/*! Copyright (c) 2021 WhatsApp Inc. All Rights Reserved. */(()=>{var __webpack_modules__={75825:e=>{"use strict";e.exports=JSON.parse("[65,26,32,26,73,1,11,1,5,1,6,23,24,31,32,449,451,7,21,2,16,5,14,1,130,4,6,2,4,4,5,1,7,1,2,3,4,1,2,20,21,83,84,140,147,166,167,38,40,49,55,-1,46,-1,2,-1,3,-1,3,-1,2,-56,64,-1,3,-1,2,-1,14,-48,82,-3,4,-101,116,-2,9,-2,12,-23,24,-30,57,-91,102,-58,67,-2,6,-3,4,-24,28,-1,10,-1,4,-1,6,-43,46,-119,167,55,56,1,2,4,12,4,5,3,10,10,12,29,30,2,3,8,10,2,4,22,23,7,8,1,4,4,7,4,10,2,4,2,3,1,9,1,5,2,3,3,7,12,14,7,8,2,7,1,2,6,10,2,4,22,23,7,8,2,3,2,3,2,6,3,27,4,5,1,8,10,12,3,4,1,13,1,2,9,10,3,4,22,23,7,8,2,3,5,8,4,12,1,2,2,5,1,16,2,6,11,19,1,9,2,3,8,10,2,4,22,23,7,8,2,3,5,8,2,3,1,7,2,4,2,12,1,5,2,3,3,7,18,29,1,2,6,9,3,4,4,7,2,3,1,2,2,5,2,5,3,6,12,16,2,3,2,5,3,4,3,6,1,7,1,15,13,27,3,4,8,9,3,4,23,24,16,19,1,4,4,23,3,8,2,6,10,17,1,8,2,3,11,12,3,4,23,24,10,11,5,8,8,9,3,4,2,11,2,9,1,2,2,6,10,11,2,17,11,12,3,4,41,43,4,9,3,4,3,4,2,6,14,18,26,28,2,3,18,21,24,25,9,10,1,3,7,15,3,9,8,14,10,12,3,15,48,49,2,14,7,15,13,50,2,3,1,2,5,6,24,25,1,2,10,11,2,11,1,3,5,6,1,10,10,12,4,36,24,26,27,28,1,2,1,6,10,11,36,54,1,6,1,3,5,54,8,9,6,7,13,50,45,49,1,7,1,3,2,4,25,27,4,7,16,20,13,14,2,4,6,7,15,16,40,41,1,6,1,3,377,378,4,6,7,8,1,2,4,6,41,42,4,6,33,34,4,6,7,8,1,2,4,6,15,16,57,58,4,6,67,72,29,32,16,32,86,88,6,9,639,640,26,31,89,96,13,14,4,18,18,21,2,11,18,32,13,14,3,18,52,54,1,8,8,9,2,13,7,8,1,4,10,48,10,16,89,96,5,7,34,35,1,6,70,80,31,35,4,6,3,7,2,3,6,19,40,42,5,16,44,48,26,32,11,48,23,25,2,5,56,57,1,10,1,2,2,10,6,19,10,16,10,16,14,100,48,49,1,6,1,2,5,6,9,13,27,36,9,14,32,36,2,4,1,4,56,57,1,3,3,4,1,4,2,10,48,56,2,7,15,18,60,67,43,45,11,22,1,14,1,8,4,5,6,7,3,5,1,6,192,256,278,280,6,8,38,40,6,8,8,9,1,2,1,2,1,2,31,33,53,54,7,8,1,4,3,4,7,10,4,6,6,10,13,18,3,4,7,24,1,1,-1,98,1,14,1,17,13,114,1,5,1,3,10,11,1,4,5,11,1,2,1,2,1,2,4,5,11,13,4,9,5,9,2,18,41,470,69,95,1,263,78,528,1,340,256,1024,47,48,47,48,133,139,4,7,2,14,38,39,1,6,1,3,56,63,2,17,23,32,7,8,7,8,7,8,7,8,7,8,7,8,7,8,7,557,3,28,9,13,2,3,5,7,5,9,86,92,3,4,90,91,4,9,43,44,94,95,48,96,45,48,48,64,28,31,50,65,12,16,167,171,99,101,31,32,6592,6656,20989,20992,1165,1232,317,320,28,48,47,64,30,32,80,82,6,48,102,103,55,57,9,51,13,14,3,4,4,5,25,27,1,9,8,16,52,64,68,78,12,36,13,14,38,46,25,36,2,13,30,36,48,49,2,6,2,4,16,17,11,15,7,8,25,26,41,47,2,4,2,13,3,4,8,9,1,3,10,12,32,33,51,52,1,4,2,4,5,7,1,2,1,25,17,19,8,19,6,8,6,8,6,15,7,8,7,8,58,64,117,118,2,3,4,7,10,16,11172,11184,23,27,49,2101,6766,6768,106,144,7,19,5,10,-1,2,-10,11,-532,534,-144,176,-13,14,-2,114,-143,177,26,32,26,37,89,92,6,8,6,8,6,8,3,38,12,13,26,27,19,20,2,3,15,17,14,48,123,128,1,2,1,5,45,48,9,86,2,67,45,176,29,32,49,96,36,45,30,35,38,48,30,31,37,41,14,56,158,160,10,16,36,40,36,40,40,48,52,63,1,145,311,320,22,32,8,160,-287,288,-225,228,-1,3,-5,9,-40,43,-4,5,-165,167,-82,89,-484,488,-8,18,-294,325,-44,46,-153,164,-175,175,1,2,54,69,7,31,10,28,49,53,2,4,7,18,1,3,25,32,10,19,36,41,1,10,18,26,35,36,3,14,52,61,10,14,2,3,16,17,20,31,18,19,28,31,2,3,1,3,6,72,7,8,1,2,4,5,15,16,11,17,47,48,3,16,10,18,2,3,8,10,2,4,22,23,7,8,2,3,5,8,3,4,4,6,2,4,3,5,1,7,1,6,7,163,56,64,2,5,1,2,21,22,1,2,3,33,51,57,1,2,4,6,1,3,4,12,10,176,50,56,4,6,1,3,27,63,51,59,2,3,1,3,4,15,10,48,43,44,1,2,2,8,1,2,1,8,10,64,27,32,2,6,1,10,16,208,47,56,1,3,1,101,83,95,8,10,1,3,8,9,2,3,30,31,2,6,1,2,4,5,3,12,10,80,8,10,42,50,4,5,4,31,1,7,2,4,40,46,2,6,8,17,1,7,2,5,46,59,1,3,9,38,57,320,9,10,38,52,8,18,29,32,32,57,1,8,1,3,1,76,7,8,2,3,38,59,1,10,10,16,6,7,2,3,37,41,2,3,1,2,1,8,10,320,19,21,4,187,1,16,21,63,923,1025,111,112,5,16,196,2944,1071,1072,9,4048,583,9216,569,576,31,32,10,14,2,98,30,37,1,11,48,55,15,25,10,11,7,8,21,26,19,707,91,192,75,80,56,67,13,77,2,3,1,13,2,16,6136,6144,1238,1280,9,8960,287,336,3,20,4,12,396,2704,107,112,13,16,9,16,10,12,1,3,1,4961,246,256,39,41,62,65,9,25,2,9,30,34,59,306,20,128,25,160,85,86,71,72,2,4,1,3,2,4,4,5,12,13,1,2,7,8,65,66,4,6,8,9,7,8,28,29,4,5,5,6,1,4,7,8,340,342,51,52,57,58,57,58,57,58,57,58,8,60,512,567,4,54,8,9,14,15,7,1659,45,55,7,9,10,14,2,370,44,48,10,1296,-208,215,-109,116,-1445,1447,-270,542,31,32,58,64,61,118,29,42,44,48,9,16,2,3504,42718,42752,4149,4160,222,224,5762,5776,7473,10576,542,2048,4939,786432,65534,65536,65534]")},15365:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},76161:e=>{e.exports=function(e){if(Array.isArray(e))return e}},39090:(e,t,n)=>{var r=n(15365);e.exports=function(e){if(Array.isArray(e))return r(e)}},94647:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},11504:(e,t,n)=>{var r=n(60077).default;function a(e,t,n,a,i,o,s){try{var u=e[o](s),l=u.value}catch(e){return void n(e)}u.done?t(l):r.resolve(l).then(a,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new r((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}}},89372:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},20639:(e,t,n)=>{var r=n(17276),a=n(47321);function i(t,n,o){return a()?e.exports=i=Reflect.construct:e.exports=i=function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&r(i,n.prototype),i},i.apply(null,arguments)}e.exports=i},5816:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},79484:(e,t,n)=>{var r=n(38620),a=n(47321),i=n(17066);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}}},65526:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},33854:(e,t,n)=>{var r=n(73515);function a(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}},a(t,n,i||t)}e.exports=a},38620:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},44422:(e,t,n)=>{var r=n(17276);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},7914:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},71954:(e,t,n)=>{var r=n(11873);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}},71021:e=>{e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},47321:e=>{e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},78850:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},61238:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}},64768:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},15929:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},73982:(e,t,n)=>{var r=n(65526);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},17066:(e,t,n)=>{var r=n(11873),a=n(94647);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},17276:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},37613:(e,t,n)=>{var r=n(76161),a=n(61238),i=n(44595),o=n(64768);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()}},73515:(e,t,n)=>{var r=n(38620);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},46292:(e,t,n)=>{var r=n(39090),a=n(78850),i=n(44595),o=n(15929);e.exports=function(e){return r(e)||a(e)||i(e)||o()}},11873:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},44595:(e,t,n)=>{var r=n(15365);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},64885:(e,t,n)=>{var r=n(38620),a=n(17276),i=n(71021),o=n(20639);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},s(t)}e.exports=s},57135:(e,t,n)=>{e.exports=n(86248)},56856:(e,t,n)=>{"use strict";var r=n(45051),a=Uint8Array,i=Uint16Array,o=Uint32Array,s=new a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u=new a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(e,t){for(var n=new i(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new o(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)a[s]=s-n[r]<<5|r;return[n,a]},d=c(s,2),f=d[0],p=d[1];f[28]=258,p[258]=28;for(var h=c(u,0),_=h[0],v=h[1],m=new i(32768),g=0;g<32768;++g){var y=(43690&g)>>>1|(21845&g)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,m[g]=((65280&y)>>>8|(255&y)<<8)>>>1}var E=function(e,t,n){for(var r=e.length,a=0,o=new i(t);a<r;++a)++o[e[a]-1];var s,u=new i(t);for(a=0;a<t;++a)u[a]=u[a-1]+o[a-1]<<1;if(n){s=new i(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],f=u[e[a]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)s[m[f]>>>l]=c}else for(s=new i(r),a=0;a<r;++a)e[a]&&(s[a]=m[u[e[a]-1]++]>>>15-e[a]);return s},S=new a(288);for(g=0;g<144;++g)S[g]=8;for(g=144;g<256;++g)S[g]=9;for(g=256;g<280;++g)S[g]=7;for(g=280;g<288;++g)S[g]=8;var b=new a(32);for(g=0;g<32;++g)b[g]=5;var T=E(S,9,0),w=E(S,9,1),A=E(b,5,0),C=E(b,5,1),O=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},M=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},I=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},k=function(e){return(e/8|0)+(7&e&&1)},P=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof i?i:e instanceof o?o:a)(n-t);return r.set(e.subarray(t,n)),r},R=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new a(0);var i=!t||n,o=!n||n.i;n||(n={}),t||(t=new a(3*r));var c=function(e){var n=t.length;if(e>n){var r=new a(Math.max(2*n,e));r.set(t),t=r}},d=n.f||0,p=n.p||0,h=n.b||0,v=n.l,m=n.d,g=n.m,y=n.n,S=8*r;do{if(!v){n.f=d=M(e,p,1);var b=M(e,p+1,3);if(p+=3,!b){var T=e[(j=k(p)+4)-4]|e[j-3]<<8,A=j+T;if(A>r){if(o)throw"unexpected EOF";break}i&&c(h+T),t.set(e.subarray(j,A),h),n.b=h+=T,n.p=p=8*A;continue}if(1==b)v=w,m=C,g=9,y=5;else{if(2!=b)throw"invalid block type";var R=M(e,p,31)+257,D=M(e,p+10,15)+4,N=R+M(e,p+5,31)+1;p+=14;for(var L=new a(N),x=new a(19),U=0;U<D;++U)x[l[U]]=M(e,p+3*U,7);p+=3*D;var F=O(x),G=(1<<F)-1;if(!o&&p+N*(F+7)>S)break;var B=E(x,F,1);for(U=0;U<N;){var j,Y=B[M(e,p,G)];if(p+=15&Y,(j=Y>>>4)<16)L[U++]=j;else{var K=0,W=0;for(16==j?(W=3+M(e,p,3),p+=2,K=L[U-1]):17==j?(W=3+M(e,p,7),p+=3):18==j&&(W=11+M(e,p,127),p+=7);W--;)L[U++]=K}}var V=L.subarray(0,R),H=L.subarray(R);g=O(V),y=O(H),v=E(V,g,1),m=E(H,y,1)}if(p>S)throw"unexpected EOF"}i&&c(h+131072);for(var $=(1<<g)-1,z=(1<<y)-1,q=g+y+18;o||p+q<S;){var J=(K=v[I(e,p)&$])>>>4;if((p+=15&K)>S)throw"unexpected EOF";if(!K)throw"invalid length/literal";if(J<256)t[h++]=J;else{if(256==J){v=null;break}var Q=J-254;if(J>264){var X=s[U=J-257];Q=M(e,p,(1<<X)-1)+f[U],p+=X}var Z=m[I(e,p)&z],ee=Z>>>4;if(!Z)throw"invalid distance";p+=15&Z;H=_[ee];if(ee>3){X=u[ee];H+=I(e,p)&(1<<X)-1,p+=X}if(p>S)throw"unexpected EOF";i&&c(h+131072);for(var te=h+Q;h<te;h+=4)t[h]=t[h-H],t[h+1]=t[h+1-H],t[h+2]=t[h+2-H],t[h+3]=t[h+3-H];h=te}}n.l=v,n.p=p,n.b=h,v&&(d=1,n.m=g,n.d=m,n.n=y)}while(!d);return h==t.length?t:P(t,0,h)},D=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},N=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},L=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,s=n.slice();if(!o)return[Y,0];if(1==o){var u=new a(n[0].s+1);return u[n[0].s]=1,[u,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,f=1,p=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};f!=o-1;)l=n[n[d].f<n[p].f?d++:p++],c=n[d!=f&&n[d].f<n[p].f?d++:p++],n[f++]={s:-1,f:l.f+c.f,l,r:c};var h=s[0].s;for(r=1;r<o;++r)s[r].s>h&&(h=s[r].s);var _=new i(h+1),v=x(n[f-1],_,0);if(v>t){r=0;var m=0,g=v-t,y=1<<g;for(s.sort((function(e,t){return _[t.s]-_[e.s]||e.f-t.f}));r<o;++r){var E=s[r].s;if(!(_[E]>t))break;m+=y-(1<<v-_[E]),_[E]=t}for(m>>>=g;m>0;){var S=s[r].s;_[S]<t?m-=1<<t-_[S]++-1:++r}for(;r>=0&&m;--r){var b=s[r].s;_[b]==t&&(--_[b],++m)}v=t}return[new a(_),v]},x=function(e,t,n){return-1==e.s?Math.max(x(e.l,t,n+1),x(e.r,t,n+1)):t[e.s]=n},U=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new i(++t),r=0,a=e[0],o=1,s=function(e){n[r++]=e},u=1;u<=t;++u)if(e[u]==a&&u!=t)++o;else{if(!a&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(a),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(a);o=1,a=e[u]}return[n.subarray(0,r),t]},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},G=function(e,t,n){var r=n.length,a=k(t+2);e[a]=255&r,e[a+1]=r>>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<r;++i)e[a+i+4]=n[i];return 8*(a+4+r)},B=function(e,t,n,r,a,o,c,d,f,p,h){D(t,h++,n),++a[256];for(var _=L(a,15),v=_[0],m=_[1],g=L(o,15),y=g[0],w=g[1],C=U(v),O=C[0],M=C[1],I=U(y),k=I[0],P=I[1],R=new i(19),x=0;x<O.length;++x)R[31&O[x]]++;for(x=0;x<k.length;++x)R[31&k[x]]++;for(var B=L(R,7),j=B[0],Y=B[1],K=19;K>4&&!j[l[K-1]];--K);var W,V,H,$,z=p+5<<3,q=F(a,S)+F(o,b)+c,J=F(a,v)+F(o,y)+c+14+3*K+F(R,j)+(2*R[16]+3*R[17]+7*R[18]);if(z<=q&&z<=J)return G(t,h,e.subarray(f,f+p));if(D(t,h,1+(J<q)),h+=2,J<q){W=E(v,m,0),V=v,H=E(y,w,0),$=y;var Q=E(j,Y,0);D(t,h,M-257),D(t,h+5,P-1),D(t,h+10,K-4),h+=14;for(x=0;x<K;++x)D(t,h+3*x,j[l[x]]);h+=3*K;for(var X=[O,k],Z=0;Z<2;++Z){var ee=X[Z];for(x=0;x<ee.length;++x){var te=31&ee[x];D(t,h,Q[te]),h+=j[te],te>15&&(D(t,h,ee[x]>>>5&127),h+=ee[x]>>>12)}}}else W=T,V=S,H=A,$=b;for(x=0;x<d;++x)if(r[x]>255){te=r[x]>>>18&31;N(t,h,W[te+257]),h+=V[te+257],te>7&&(D(t,h,r[x]>>>23&31),h+=s[te]);var ne=31&r[x];N(t,h,H[ne]),h+=$[ne],ne>3&&(N(t,h,r[x]>>>5&8191),h+=u[ne])}else N(t,h,W[r[x]]),h+=V[r[x]];return N(t,h,W[256]),h+V[256]},j=new o([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y=new a(0),K=function(e,t,n,r,l,c){var d=e.length,f=new a(r+d+5*(1+Math.ceil(d/7e3))+l),h=f.subarray(r,f.length-l),_=0;if(!t||d<8)for(var m=0;m<=d;m+=65535){var g=m+65535;g<d?_=G(h,_,e.subarray(m,g)):(h[m]=c,_=G(h,_,e.subarray(m,d)))}else{for(var y=j[t-1],E=y>>>13,S=8191&y,b=(1<<n)-1,T=new i(32768),w=new i(b+1),A=Math.ceil(n/3),C=2*A,O=function(t){return(e[t]^e[t+1]<<A^e[t+2]<<C)&b},M=new o(25e3),I=new i(288),R=new i(32),D=0,N=0,L=(m=0,0),x=0,U=0;m<d;++m){var F=O(m),K=32767&m,W=w[F];if(T[K]=W,w[F]=K,x<=m){var V=d-m;if((D>7e3||L>24576)&&V>423){_=B(e,h,0,M,I,R,N,L,U,m-U,_),L=D=N=0,U=m;for(var H=0;H<286;++H)I[H]=0;for(H=0;H<30;++H)R[H]=0}var $=2,z=0,q=S,J=K-W&32767;if(V>2&&F==O(m-J))for(var Q=Math.min(E,V)-1,X=Math.min(32767,m),Z=Math.min(258,V);J<=X&&--q&&K!=W;){if(e[m+$]==e[m+$-J]){for(var ee=0;ee<Z&&e[m+ee]==e[m+ee-J];++ee);if(ee>$){if($=ee,z=J,ee>Q)break;var te=Math.min(J,ee-2),ne=0;for(H=0;H<te;++H){var re=m-J+H+32768&32767,ae=re-T[re]+32768&32767;ae>ne&&(ne=ae,W=re)}}}J+=(K=W)-(W=T[K])+32768&32767}if(z){M[L++]=268435456|p[$]<<18|v[z];var ie=31&p[$],oe=31&v[z];N+=s[ie]+u[oe],++I[257+ie],++R[oe],x=m+$,++D}else M[L++]=e[m],++I[e[m]]}}_=B(e,h,c,M,I,R,N,L,U,m-U,_),!c&&7&_&&(_=G(h,_+1,Y))}return P(f,0,r+k(_)+l)},W=function(){for(var e=new o(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),V=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=W[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},H=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,i=n.length,o=0;o!=i;){for(var s=Math.min(o+2655,i);o<s;++o)a+=r+=n[o];r=(65535&r)+15*(r>>16),a=(65535&a)+15*(a>>16)}e=r,t=a},d:function(){return((e%=65521)>>>8<<16|(255&(t%=65521))<<8|t>>>8)+2*((255&e)<<23)}}},$=function(e,t,n,r,a){return K(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!a)},z=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},q=function(e,t,n){for(var r=e(),a=e.toString(),i=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var s=r[o],u=i[o];if("function"==typeof s){t+=";"+u+"=";var l=s.toString();if(s.prototype)if(-1!=l.indexOf("[native code]")){var c=l.indexOf(" ",8)+1;t+=l.slice(c,l.indexOf("(",c))}else for(var d in t+=l,s.prototype)t+=";"+u+".prototype."+d+"="+s.prototype[d].toString();else t+=l}else n[u]=s}return[t,n]},J=[],Q=function(e,t,n,s){var u;if(!J[n]){for(var l="",c={},d=e.length-1,f=0;f<d;++f)l=(u=q(e[f],l,c))[0],c=u[1];J[n]=q(e[d],l,c)}var p=z({},J[n][1]);return r.default(J[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,p,function(e){var t=[];for(var n in e)(e[n]instanceof a||e[n]instanceof i||e[n]instanceof o)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(p),s)},X=function(){return[a,i,o,s,u,l,f,_,w,C,m,E,O,M,I,k,P,R,Oe,ae,ie]},Z=function(){return[a,i,o,s,u,l,p,v,T,S,A,b,m,j,Y,E,D,N,L,x,U,F,G,B,k,P,K,$,Te,ae]},ee=function(){return[pe,ve,fe,V,W]},te=function(){return[he,_e]},ne=function(){return[me,fe,H]},re=function(){return[ge]},ae=function(e){return postMessage(e,[e.buffer])},ie=function(e){return e&&e.size&&new a(e.size)},oe=function(e,t,n,r,a,i){var o=Q(n,r,a,(function(e,t){o.terminate(),i(e,t)}));return o.postMessage([e,t],t.consume?[e.buffer]:[]),function(){o.terminate()}},se=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},ue=function(e,t,n,r,a){var i,o=Q(e,r,a,(function(e,n){e?(o.terminate(),t.ondata.call(t,e)):(n[1]&&o.terminate(),t.ondata.call(t,e,n[0],n[1]))}));o.postMessage(n),t.push=function(e,n){if(i)throw"stream finished";if(!t.ondata)throw"no stream handler";o.postMessage([e,i=n],[e.buffer])},t.terminate=function(){o.terminate()}},le=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+2*(e[t+3]<<23)},de=function(e,t){return ce(e,t)|4294967296*ce(e,t)},fe=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&fe(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},he=function(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},_e=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16)+2*(e[t-1]<<23)},ve=function(e){return 10+(e.filename&&e.filename.length+1||0)},me=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ge=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function ye(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var Ee=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata($(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e}();t.Deflate=Ee;var Se=function(){return function(e,t){ue([Z,function(){return[se,Ee]}],this,ye.call(this,e,t),(function(e){var t=new Ee(e.data);onmessage=se(t)}),6)}}();function be(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return oe(e,t,[Z],(function(e){return ae(Te(e.data[0],e.data[1]))}),0,n)}function Te(e,t){return $(e,t||{},0,0)}t.AsyncDeflate=Se,t.deflate=be,t.deflateSync=Te;var we=function(){function e(e){this.s={},this.p=new a(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,n=new a(t+e.length);n.set(this.p),n.set(e,t),this.p=n},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=R(this.p,this.o,this.s);this.ondata(P(n,t,this.s.b),this.d),this.o=P(n,this.s.b-32768),this.s.b=this.o.length,this.p=P(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}();t.Inflate=we;var Ae=function(){return function(e){this.ondata=e,ue([X,function(){return[se,we]}],this,0,(function(){var e=new we;onmessage=se(e)}),7)}}();function Ce(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return oe(e,t,[X],(function(e){return ae(Oe(e.data[0],ie(e.data[1])))}),1,n)}function Oe(e,t){return R(e,t)}t.AsyncInflate=Ae,t.inflate=Ce,t.inflateSync=Oe;var Me=function(){function e(e,t){this.c=V(),this.l=0,this.v=1,Ee.call(this,e,t)}return e.prototype.push=function(e,t){Ee.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=$(e,this.o,this.v&&ve(this.o),t&&8,!t);this.v&&(pe(n,this.o),this.v=0),t&&(fe(n,n.length-8,this.c.d()),fe(n,n.length-4,this.l)),this.ondata(n,t)},e}();t.Gzip=Me,t.Compress=Me;var Ie=function(){return function(e,t){ue([Z,ee,function(){return[se,Ee,Me]}],this,ye.call(this,e,t),(function(e){var t=new Me(e.data);onmessage=se(t)}),8)}}();function ke(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return oe(e,t,[Z,ee,function(){return[Pe]}],(function(e){return ae(Pe(e.data[0],e.data[1]))}),2,n)}function Pe(e,t){t||(t={});var n=V(),r=e.length;n.p(e);var a=$(e,t,ve(t),8),i=a.length;return pe(a,t),fe(a,i-8,n.d()),fe(a,i-4,r),a}t.AsyncGzip=Ie,t.AsyncCompress=Ie,t.gzip=ke,t.compress=ke,t.gzipSync=Pe,t.compressSync=Pe;var Re=function(){function e(e){this.v=1,we.call(this,e)}return e.prototype.push=function(e,t){if(we.prototype.e.call(this,e),this.v){var n=this.p.length>3?he(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}we.prototype.c.call(this,t)},e}();t.Gunzip=Re;var De=function(){return function(e){this.ondata=e,ue([X,te,function(){return[se,we,Re]}],this,0,(function(){var e=new Re;onmessage=se(e)}),9)}}();function Ne(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return oe(e,t,[X,te,function(){return[Le]}],(function(e){return ae(Le(e.data[0]))}),3,n)}function Le(e,t){return R(e.subarray(he(e),-8),t||new a(_e(e)))}t.AsyncGunzip=De,t.gunzip=Ne,t.gunzipSync=Le;var xe=function(){function e(e,t){this.c=H(),this.v=1,Ee.call(this,e,t)}return e.prototype.push=function(e,t){Ee.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=$(e,this.o,this.v&&2,t&&4,!t);this.v&&(me(n,this.o),this.v=0),t&&fe(n,n.length-4,this.c.d()),this.ondata(n,t)},e}();t.Zlib=xe;var Ue=function(){return function(e,t){ue([Z,ne,function(){return[se,Ee,xe]}],this,ye.call(this,e,t),(function(e){var t=new xe(e.data);onmessage=se(t)}),10)}}();function Fe(e,t){t||(t={});var n=H();n.p(e);var r=$(e,t,2,4);return me(r,t),fe(r,r.length-4,n.d()),r}t.AsyncZlib=Ue,t.zlib=function(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return oe(e,t,[Z,ne,function(){return[Fe]}],(function(e){return ae(Fe(e.data[0],e.data[1]))}),4,n)},t.zlibSync=Fe;var Ge=function(){function e(e){this.v=1,we.call(this,e)}return e.prototype.push=function(e,t){if(we.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}we.prototype.c.call(this,t)},e}();t.Unzlib=Ge;var Be=function(){return function(e){this.ondata=e,ue([X,re,function(){return[se,we,Ge]}],this,0,(function(){var e=new Ge;onmessage=se(e)}),11)}}();function je(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return oe(e,t,[X,re,function(){return[Ye]}],(function(e){return ae(Ye(e.data[0],ie(e.data[1])))}),5,n)}function Ye(e,t){return R((ge(e),e.subarray(2,-4)),t)}t.AsyncUnzlib=Be,t.unzlib=je,t.unzlibSync=Ye;var Ke=function(){function e(e){this.G=Re,this.I=we,this.Z=Ge,this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new a(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,i=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(i):new this.Z(i),this.s.push(this.p,t),this.p=null}}},e}();t.Decompress=Ke;var We=function(){function e(e){this.G=De,this.I=Ae,this.Z=Be,this.ondata=e}return e.prototype.push=function(e,t){Ke.prototype.push.call(this,e,t)},e}();t.AsyncDecompress=We,t.decompress=function(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return 31==e[0]&&139==e[1]&&8==e[2]?Ne(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Ce(e,t,n):je(e,t,n)},t.decompressSync=function(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?Le(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Oe(e,t):Ye(e,t)};var Ve=function(e,t,n,r){for(var i in e){var o=e[i],s=t+i;o instanceof a?n[s]=[o,r]:Array.isArray(o)?n[s]=[o[0],z(r,o[1])]:Ve(o,s+"/",n,r)}},He="undefined"!=typeof TextEncoder&&new TextEncoder,$e="undefined"!=typeof TextDecoder&&new TextDecoder,ze=0;try{$e.decode(Y,{stream:!0}),ze=1}catch(e){}var qe=function(e){for(var t="",n=0;;){var r=e[n++],a=(r>127)+(r>223)+(r>239);if(n+a>e.length)return[t,P(e,n-1)];a?3==a?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&a?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}},Je=function(){function e(e){this.ondata=e,ze?this.t=new TextDecoder:this.p=Y}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t||(t=!1),this.t)return this.ondata(this.t.decode(e,{stream:!t}),t);var n=new a(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var r=qe(n),i=r[0],o=r[1];if(t&&o.length)throw"invalid utf-8 data";this.p=o,this.ondata(i,t)},e}();t.DecodeUTF8=Je;var Qe=function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";this.ondata(Xe(e),t||!1)},e}();function Xe(e,t){if(t){for(var n=new a(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(He)return He.encode(e);var i=e.length,o=new a(e.length+(e.length>>1)),s=0,u=function(e){o[s++]=e};for(r=0;r<i;++r){if(s+5>o.length){var l=new a(s+8+(i-r<<1));l.set(o),o=l}var c=e.charCodeAt(r);c<128||t?u(c):c<2048?(u(192|c>>6),u(128|63&c)):c>55295&&c<57344?(u(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++r))>>18),u(128|c>>12&63),u(128|c>>6&63),u(128|63&c)):(u(224|c>>12),u(128|c>>6&63),u(128|63&c))}return P(o,0,s)}function Ze(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if($e)return $e.decode(e);var a=qe(e),i=a[0];if(a[1].length)throw"invalid utf-8 data";return i}t.EncodeUTF8=Qe,t.strToU8=Xe,t.strFromU8=Ze;var et=function(e){return 1==e?3:e<6?2:9==e?1:0},tt=function(e,t){return t+30+le(e,t+26)+le(e,t+28)},nt=function(e,t,n){var r=le(e,t+28),a=Ze(e.subarray(t+46,t+46+r),!(2048&le(e,t+8))),i=t+46+r,o=ce(e,t+20),s=n&&4294967295==o?rt(e,i):[o,ce(e,t+24),ce(e,t+42)],u=s[0],l=s[1],c=s[2];return[le(e,t+10),u,l,a,i+le(e,t+30)+le(e,t+32),c]},rt=function(e,t){for(;1!=le(e,t);t+=4+le(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},at=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},it=function(e,t,n,r,a,i,o,s){var u=r.length,l=n.extra,c=s&&s.length,d=at(l);fe(e,t,null!=o?33639248:67324752),t+=4,null!=o&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==i&&8),e[t++]=a&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var f=new Date(null==n.mtime?Date.now():n.mtime),p=f.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(fe(e,t,2*(p<<24)|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),t+=4,null!=i&&(fe(e,t,n.crc),fe(e,t+4,i),fe(e,t+8,n.size)),fe(e,t+12,u),fe(e,t+14,d),t+=16,null!=o&&(fe(e,t,c),fe(e,t+6,n.attrs),fe(e,t+10,o),t+=14),e.set(r,t),t+=u,d)for(var h in l){var _=l[h],v=_.length;fe(e,t,+h),fe(e,t+2,v),e.set(_,t+4),t+=4+v}return c&&(e.set(s,t),t+=c),t},ot=function(e,t,n,r,a){fe(e,t,101010256),fe(e,t+8,n),fe(e,t+10,n),fe(e,t+12,r),fe(e,t+16,a)},st=function(){function e(e){this.filename=e,this.c=V(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}();t.ZipPassThrough=st;var ut=function(){function e(e,t){var n=this;t||(t={}),st.call(this,e),this.d=new Ee(t,(function(e,t){n.ondata(null,e,t)})),this.compression=8,this.flag=et(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){st.prototype.push.call(this,e,t)},e}();t.ZipDeflate=ut;var lt=function(){function e(e,t){var n=this;t||(t={}),st.call(this,e),this.d=new Se(t,(function(e,t,r){n.ondata(e,t,r)})),this.compression=8,this.flag=et(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){st.prototype.push.call(this,e,t)},e}();t.AsyncZipDeflate=lt;var ct=function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var n=Xe(e.filename),r=n.length,i=e.comment,o=i&&Xe(i),s=r!=e.filename.length||o&&i.length!=o.length,u=r+at(e.extra)+30;if(r>65535)throw"filename too long";var l=new a(u);it(l,0,e,n,s);var c=[l],d=function(){for(var e=0,n=c;e<n.length;e++){var r=n[e];t.ondata(null,r,!1)}c=[]},f=this.d;this.d=0;var p=this.u.length,h=z(e,{f:n,u:s,o,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),f){var e=t.u[p+1];e?e.r():t.d=1}f=1}}),_=0;e.ondata=function(n,r,i){if(n)t.ondata(n,r,i),t.terminate();else if(_+=r.length,c.push(r),i){var o=new a(16);fe(o,0,134695760),fe(o,4,e.crc),fe(o,8,_),fe(o,12,e.size),c.push(o),h.c=_,h.b=u+_+16,h.crc=e.crc,h.size=e.size,f&&h.r(),f=1}else f&&d()},this.u.push(h)},e.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,t=0,n=0,r=0,i=this.u;r<i.length;r++){n+=46+(l=i[r]).f.length+at(l.extra)+(l.o?l.o.length:0)}for(var o=new a(n+22),s=0,u=this.u;s<u.length;s++){var l=u[s];it(o,e,l,l.f,l.u,l.c,t,l.o),e+=46+l.f.length+at(l.extra)+(l.o?l.o.length:0),t+=l.b}ot(o,e,this.u.length,n,t),this.ondata(null,o,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){t[e].t()}this.d=2},e}();t.Zip=ct,t.zip=function(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";var r={};Ve(e,"",r,t);var i=Object.keys(r),o=i.length,s=0,u=0,l=o,c=new Array(o),d=[],f=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(){var e=new a(u+22),t=s,r=u-s;u=0;for(var i=0;i<l;++i){var o=c[i];try{var d=o.c.length;it(e,u,o,o.f,o.u,d);var f=30+o.f.length+at(o.extra),p=u+f;e.set(o.c,p),it(e,s,o,o.f,o.u,d,u,o.m),s+=16+f+(o.m?o.m.length:0),u=p+d}catch(e){return n(e,null)}}ot(e,s,c.length,r,t),n(null,e)};o||p();for(var h=function(e){var t=i[e],a=r[t],l=a[0],h=a[1],_=V(),v=l.length;_.p(l);var m=Xe(t),g=m.length,y=h.comment,E=y&&Xe(y),S=E&&E.length,b=at(h.extra),T=0==h.level?0:8,w=function(r,a){if(r)f(),n(r,null);else{var i=a.length;c[e]=z(h,{size:v,crc:_.d(),c:a,f:m,m:E,u:g!=t.length||E&&y.length!=S,compression:T}),s+=30+g+b+i,u+=76+2*(g+b)+(S||0)+i,--o||p()}};if(g>65535&&w("filename too long",null),T)if(v<16e4)try{w(null,Te(l,h))}catch(e){w(e,null)}else d.push(be(l,h,w));else w(null,l)},_=0;_<l;++_)h(_);return f},t.zipSync=function(e,t){t||(t={});var n={},r=[];Ve(e,"",n,t);var i=0,o=0;for(var s in n){var u=n[s],l=u[0],c=u[1],d=0==c.level?0:8,f=(w=Xe(s)).length,p=c.comment,h=p&&Xe(p),_=h&&h.length,v=at(c.extra);if(f>65535)throw"filename too long";var m=d?Te(l,c):l,g=m.length,y=V();y.p(l),r.push(z(c,{size:l.length,crc:y.d(),c:m,f:w,m:h,u:f!=s.length||h&&p.length!=_,o:i,compression:d})),i+=30+f+v+g,o+=76+2*(f+v)+(_||0)+g}for(var E=new a(o+22),S=i,b=o-i,T=0;T<r.length;++T){var w=r[T];it(E,w.o,w,w.f,w.u,w.c.length);var A=30+w.f.length+at(w.extra);E.set(w.c,w.o+A),it(E,i,w,w.f,w.u,w.c.length,w.o,w.m),i+=16+A+(w.m?w.m.length:0)}return ot(E,i,r.length,b,S),E};var dt=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}();t.UnzipPassThrough=dt;var ft=function(){function e(){var e=this;this.i=new we((function(t,n){e.ondata(null,t,n)}))}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e}();t.UnzipInflate=ft;var pt=function(){function e(e,t){var n=this;t<32e4?this.i=new we((function(e,t){n.ondata(null,e,t)})):(this.i=new Ae((function(e,t,r){n.ondata(e,t,r)})),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=P(e,0)),this.i.push(e,t)},e.compression=8,e}();t.AsyncUnzipInflate=pt;var ht=function(){function e(e){this.onfile=e,this.k=[],this.o={0:dt},this.p=Y}return e.prototype.push=function(e,t){var n=this;if(!this.onfile)throw"no callback";if(this.c>0){var r=Math.min(this.c,e.length),i=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(i,!this.c):this.k[0].push(i),(e=e.subarray(r)).length)return this.push(e,t)}else{var o=0,s=0,u=void 0,l=void 0;this.p.length?e.length?((l=new a(this.p.length+e.length)).set(this.p),l.set(e,this.p.length)):l=this.p:l=e;for(var c=l.length,d=this.c,f=d&&this.d,p=function(){var e,t=ce(l,s);if(67324752==t){o=1,u=s,h.d=null,h.c=0;var r=le(l,s+6),a=le(l,s+8),i=2048&r,f=8&r,p=le(l,s+26),_=le(l,s+28);if(c>s+30+p+_){var v=[];h.k.unshift(v),o=2;var m=ce(l,s+18),g=ce(l,s+22),y=Ze(l.subarray(s+30,s+=30+p),!i);4294967295==m?(e=f?[-2]:rt(l,s),m=e[0],g=e[1]):f&&(m=-1),s+=_,h.c=m;var E={name:y,compression:a,start:function(){if(!E.ondata)throw"no callback";if(m){var e=n.o[a];if(!e)throw"unknown compression type "+a;var t=m<0?new e(y):new e(y,m,g);t.ondata=function(e,t,n){E.ondata(e,t,n)};for(var r=0,i=v;r<i.length;r++){var o=i[r];t.push(o,!1)}n.k[0]==v?n.d=t:t.push(Y,!0)}else E.ondata(null,Y,!0)},terminate:function(){n.k[0]==v&&n.d.terminate&&n.d.terminate()}};m>=0&&(E.size=m,E.originalSize=g),h.onfile(E)}return"break"}if(d){if(134695760==t)return u=s+=12+(-2==d&&8),o=3,h.c=0,"break";if(33639248==t)return u=s-=4,o=3,h.c=0,"break"}},h=this;s<c-4;++s){if("break"===p())break}if(this.p=Y,d<0){var _=o?l.subarray(0,u-12-(-2==d&&8)-(134695760==ce(l,u-16)&&4)):l.subarray(0,s);f?f.push(_,!!o):this.k[+(2==o)].push(_)}if(2&o)return this.push(l.subarray(s),t);this.p=l.subarray(s)}if(t&&this.c)throw"invalid zip file"},e.prototype.register=function(e){this.o[e.compression]=e},e}();t.Unzip=ht,t.unzip=function(e,t){if("function"!=typeof t)throw"no callback";for(var n=[],r=function(){for(var e=0;e<n.length;++e)n[e]()},i={},o=e.length-22;101010256!=ce(e,o);--o)if(!o||e.length-o>65558)return void t("invalid zip file",null);var s=le(e,o+8);s||t(null,{});var u=s,l=ce(e,o+16),c=4294967295==l;if(c){if(o=ce(e,o-12),101075792!=ce(e,o))return void t("invalid zip file",null);u=s=ce(e,o+32),l=ce(e,o+48)}for(var d=function(o){var u=nt(e,l,c),d=u[0],f=u[1],p=u[2],h=u[3],_=u[4],v=u[5],m=tt(e,v);l=_;var g=function(e,n){e?(r(),t(e,null)):(i[h]=n,--s||t(null,i))};if(d)if(8==d){var y=e.subarray(m,m+f);if(f<32e4)try{g(null,Oe(y,new a(p)))}catch(e){g(e,null)}else n.push(Ce(y,{size:p},g))}else g("unknown compression type "+d,null);else g(null,P(e,m,m+f))},f=0;f<u;++f)d();return r},t.unzipSync=function(e){for(var t={},n=e.length-22;101010256!=ce(e,n);--n)if(!n||e.length-n>65558)throw"invalid zip file";var r=le(e,n+8);if(!r)return{};var i=ce(e,n+16),o=4294967295==i;if(o){if(n=ce(e,n-12),101075792!=ce(e,n))throw"invalid zip file";r=ce(e,n+32),i=ce(e,n+48)}for(var s=0;s<r;++s){var u=nt(e,i,o),l=u[0],c=u[1],d=u[2],f=u[3],p=u[4],h=u[5],_=tt(e,h);if(i=p,l){if(8!=l)throw"unknown compression type "+l;t[f]=Oe(e.subarray(_,_+c),new a(d))}else t[f]=P(e,_,_+c)}return t}},45051:(e,t)=>{"use strict";var n={};t.default=function(e,t,r,a,i){var o=n[t]||(n[t]=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))),s=new Worker(o);return s.onerror=function(e){return i(e.error,null)},s.onmessage=function(e){return i(null,e.data)},s.postMessage(r,a),s}},54302:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="function"==typeof WeakMap?new WeakMap:new Map;function r(e){var t=n.get(e);if(void 0!==t)return t;var r=new Map;return Object.getOwnPropertyNames(e).forEach((function(t){r.set(e[t],t)})),n.set(e,r),r}var a=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return r(this).has(e)}},cast:{value:function(e){return this.isValid(e)?e:void 0}},members:{value:function(){return r(this).keys()}},getName:{value:function(e){return r(this).get(e)}}}));function i(e){var n=Object.create(a);for(var r in e)t.call(e,r)&&Object.defineProperty(n,r,{value:e[r]});return Object.freeze(n)}var o=Object.freeze(Object.defineProperties(Object.create(null),{isValid:{value:function(e){return"string"==typeof e&&t.call(this,e)}},cast:{value:a.cast},members:{value:function(){return Object.getOwnPropertyNames(this)}},getName:{value:function(e){return e}}}));i.Mirrored=function(e){for(var t=Object.create(o),n=0,r=e.length;n<r;++n)Object.defineProperty(t,e[n],{value:e[n]});return Object.freeze(t)},Object.freeze(i.Mirrored),e.exports=Object.freeze(i)},3996:e=>{"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,o,s],c=0;(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},98784:function(e,t,n){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */e=n.nmd(e),function(){var a,i="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,d=128,f=256,p=1/0,h=9007199254740991,_=NaN,v=4294967295,m=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",f]],g="[object Arguments]",y="[object Array]",E="[object Boolean]",S="[object Date]",b="[object Error]",T="[object Function]",w="[object GeneratorFunction]",A="[object Map]",C="[object Number]",O="[object Object]",M="[object Promise]",I="[object RegExp]",k="[object Set]",P="[object String]",R="[object Symbol]",D="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",x="[object Float32Array]",U="[object Float64Array]",F="[object Int8Array]",G="[object Int16Array]",B="[object Int32Array]",j="[object Uint8Array]",Y="[object Uint8ClampedArray]",K="[object Uint16Array]",W="[object Uint32Array]",V=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,J=RegExp(z.source),Q=RegExp(q.source),X=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ae.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_e=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,Te=/['\n\r\u2028\u2029\\]/g,we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ae="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ke="['’]",Pe="[\\ud800-\\udfff]",Re="["+Ie+"]",De="["+we+"]",Ne="\\d+",Le="[\\u2700-\\u27bf]",xe="["+Ce+"]",Ue="[^\\ud800-\\udfff"+Ie+Ne+Ae+Ce+Oe+"]",Fe="\\ud83c[\\udffb-\\udfff]",Ge="[^\\ud800-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",Ye="["+Oe+"]",Ke="(?:"+xe+"|"+Ue+")",We="(?:"+Ye+"|"+Ue+")",Ve="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",$e="(?:"+De+"|"+Fe+")"+"?",ze="[\\ufe0e\\ufe0f]?",qe=ze+$e+("(?:\\u200d(?:"+[Ge,Be,je].join("|")+")"+ze+$e+")*"),Je="(?:"+[Le,Be,je].join("|")+")"+qe,Qe="(?:"+[Ge+De+"?",De,Be,je,Pe].join("|")+")",Xe=RegExp(ke,"g"),Ze=RegExp(De,"g"),et=RegExp(Fe+"(?="+Fe+")|"+Qe+qe,"g"),tt=RegExp([Ye+"?"+xe+"+"+Ve+"(?="+[Re,Ye,"$"].join("|")+")",We+"+"+He+"(?="+[Re,Ye+Ke,"$"].join("|")+")",Ye+"?"+Ke+"+"+Ve,Ye+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Je].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+we+Me+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[x]=ot[U]=ot[F]=ot[G]=ot[B]=ot[j]=ot[Y]=ot[K]=ot[W]=!0,ot[g]=ot[y]=ot[N]=ot[E]=ot[L]=ot[S]=ot[b]=ot[T]=ot[A]=ot[C]=ot[O]=ot[I]=ot[k]=ot[P]=ot[D]=!1;var st={};st[g]=st[y]=st[N]=st[L]=st[E]=st[S]=st[x]=st[U]=st[F]=st[G]=st[B]=st[A]=st[C]=st[O]=st[I]=st[k]=st[P]=st[R]=st[j]=st[Y]=st[K]=st[W]=!0,st[b]=st[T]=st[D]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,dt="object"==typeof global&&global&&global.Object===Object&&global,ft="object"==typeof self&&self&&self.Object===Object&&self,pt=dt||ft||Function("return this")(),ht=t&&!t.nodeType&&t,_t=ht&&e&&!e.nodeType&&e,vt=_t&&_t.exports===ht,mt=vt&&dt.process,gt=function(){try{var e=_t&&_t.require&&_t.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),yt=gt&&gt.isArrayBuffer,Et=gt&&gt.isDate,St=gt&&gt.isMap,bt=gt&&gt.isRegExp,Tt=gt&&gt.isSet,wt=gt&&gt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(r,o,n(o),e)}return r}function Ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kt(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function Pt(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Nt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Lt(e,t,n,r){var a=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function xt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Vt("length");function Gt(e,t,n){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=n,!1})),r}function Bt(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function jt(e,t,n){return t==t?function(e,t,n){var r=n-1,a=e.length;for(;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,Kt,n)}function Yt(e,t,n,r){for(var a=n-1,i=e.length;++a<i;)if(r(e[a],t))return a;return-1}function Kt(e){return e!=e}function Wt(e,t){var n=null==e?0:e.length;return n?zt(e,t)/n:_}function Vt(e){return function(t){return null==t?a:t[e]}}function Ht(e){return function(t){return null==e?a:e[t]}}function $t(e,t,n,r,a){return a(e,(function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)})),n}function zt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,_n(e)+1).replace(oe,""):e}function Qt(e){return function(t){return e(t)}}function Xt(e,t){return Dt(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Ht({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),an=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,i[a++]=n)}return i}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ft(e)}function hn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function _n(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function e(t){var n,r=(t=null==t?pt:mn.defaults(pt.Object(),t,mn.pick(pt,at))).Array,se=t.Date,we=t.Error,Ae=t.Function,Ce=t.Math,Oe=t.Object,Me=t.RegExp,Ie=t.String,ke=t.TypeError,Pe=r.prototype,Re=Ae.prototype,De=Oe.prototype,Ne=t["__core-js_shared__"],Le=Re.toString,xe=De.hasOwnProperty,Ue=0,Fe=(n=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ge=De.toString,Be=Le.call(Oe),je=pt._,Ye=Me("^"+Le.call(xe).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=vt?t.Buffer:a,We=t.Symbol,Ve=t.Uint8Array,He=Ke?Ke.allocUnsafe:a,$e=ln(Oe.getPrototypeOf,Oe),ze=Oe.create,qe=De.propertyIsEnumerable,Je=Pe.splice,Qe=We?We.isConcatSpreadable:a,et=We?We.iterator:a,nt=We?We.toStringTag:a,ut=function(){try{var e=pi(Oe,"defineProperty");return e({},"",{}),e}catch(e){}}(),dt=t.clearTimeout!==pt.clearTimeout&&t.clearTimeout,ft=se&&se.now!==pt.Date.now&&se.now,ht=t.setTimeout!==pt.setTimeout&&t.setTimeout,_t=Ce.ceil,mt=Ce.floor,gt=Oe.getOwnPropertySymbols,Ft=Ke?Ke.isBuffer:a,Ht=t.isFinite,gn=Pe.join,yn=ln(Oe.keys,Oe),En=Ce.max,Sn=Ce.min,bn=se.now,Tn=t.parseInt,wn=Ce.random,An=Pe.reverse,Cn=pi(t,"DataView"),On=pi(t,"Map"),Mn=pi(t,"Promise"),In=pi(t,"Set"),kn=pi(t,"WeakMap"),Pn=pi(Oe,"create"),Rn=kn&&new kn,Dn={},Nn=Bi(Cn),Ln=Bi(On),xn=Bi(Mn),Un=Bi(In),Fn=Bi(kn),Gn=We?We.prototype:a,Bn=Gn?Gn.valueOf:a,jn=Gn?Gn.toString:a;function Yn(e){if(as(e)&&!$o(e)&&!(e instanceof Hn)){if(e instanceof Vn)return e;if(xe.call(e,"__wrapped__"))return ji(e)}return new Vn(e)}var Kn=function(){function e(){}return function(t){if(!rs(t))return{};if(ze)return ze(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Wn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Qn(e){var t=this.__data__=new zn(e);this.size=t.size}function Xn(e,t){var n=$o(e),r=!n&&Ho(e),a=!n&&!r&&Qo(e),i=!n&&!r&&!a&&fs(e),o=n||r||a||i,s=o?qt(e.length,Ie):[],u=s.length;for(var l in e)!t&&!xe.call(e,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ei(l,u))||s.push(l);return s}function Zn(e){var t=e.length;return t?e[Jr(0,t-1)]:a}function er(e,t){return Ui(Pa(e),lr(t,0,e.length))}function tr(e){return Ui(Pa(e))}function nr(e,t,n){(n!==a&&!Ko(e[t],n)||n===a&&!(t in e))&&sr(e,t,n)}function rr(e,t,n){var r=e[t];xe.call(e,t)&&Ko(r,n)&&(n!==a||t in e)||sr(e,t,n)}function ar(e,t){for(var n=e.length;n--;)if(Ko(e[n][0],t))return n;return-1}function ir(e,t,n,r){return hr(e,(function(e,a,i){t(r,e,n(e),i)})),r}function or(e,t){return e&&Ra(t,Ns(t),e)}function sr(e,t,n){"__proto__"==t&&ut?ut(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ur(e,t){for(var n=-1,i=t.length,o=r(i),s=null==e;++n<i;)o[n]=s?a:Is(e,t[n]);return o}function lr(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function cr(e,t,n,r,i,o){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),s!==a)return s;if(!rs(e))return e;var d=$o(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&xe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Pa(e,s)}else{var f=vi(e),p=f==T||f==w;if(Qo(e))return Aa(e,u);if(f==O||f==g||p&&!i){if(s=l||p?{}:gi(e),!u)return l?function(e,t){return Ra(e,_i(e),t)}(e,function(e,t){return e&&Ra(t,Ls(t),e)}(s,e)):function(e,t){return Ra(e,hi(e),t)}(e,or(s,e))}else{if(!st[f])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case N:return Ca(e);case E:case S:return new r(+e);case L:return function(e,t){var n=t?Ca(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case x:case U:case F:case G:case B:case j:case Y:case K:case W:return Oa(e,n);case A:return new r;case C:case P:return new r(e);case I:return function(e){var t=new e.constructor(e.source,_e.exec(e));return t.lastIndex=e.lastIndex,t}(e);case k:return new r;case R:return a=e,Bn?Oe(Bn.call(a)):{}}var a}(e,f,u)}}o||(o=new Qn);var h=o.get(e);if(h)return h;o.set(e,s),ls(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):is(e)&&e.forEach((function(r,a){s.set(a,cr(r,t,n,a,e,o))}));var _=d?a:(c?l?oi:ii:l?Ls:Ns)(e);return Ot(_||e,(function(r,a){_&&(r=e[a=r]),rr(s,a,cr(r,t,n,a,e,o))})),s}function dr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Oe(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new ke(i);return Di((function(){e.apply(a,n)}),t)}function pr(e,t,n,r){var a=-1,i=Pt,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=Dt(t,Qt(n))),r?(i=Rt,o=!1):t.length>=200&&(i=Zt,o=!1,t=new Jn(t));e:for(;++a<s;){var c=e[a],d=null==n?c:n(c);if(c=r||0!==c?c:0,o&&d==d){for(var f=l;f--;)if(t[f]===d)continue e;u.push(c)}else i(t,d,r)||u.push(c)}return u}Yn.templateSettings={escape:X,evaluate:Z,interpolate:ee,variable:"",imports:{_:Yn}},Yn.prototype=Wn.prototype,Yn.prototype.constructor=Yn,Vn.prototype=Kn(Wn.prototype),Vn.prototype.constructor=Vn,Hn.prototype=Kn(Wn.prototype),Hn.prototype.constructor=Hn,$n.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},$n.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$n.prototype.get=function(e){var t=this.__data__;if(Pn){var n=t[e];return n===o?a:n}return xe.call(t,e)?t[e]:a},$n.prototype.has=function(e){var t=this.__data__;return Pn?t[e]!==a:xe.call(t,e)},$n.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pn&&t===a?o:t,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(e){var t=this.__data__,n=ar(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)},zn.prototype.get=function(e){var t=this.__data__,n=ar(t,e);return n<0?a:t[n][1]},zn.prototype.has=function(e){return ar(this.__data__,e)>-1},zn.prototype.set=function(e,t){var n=this.__data__,r=ar(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(On||zn),string:new $n}},qn.prototype.delete=function(e){var t=di(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return di(this,e).get(e)},qn.prototype.has=function(e){return di(this,e).has(e)},qn.prototype.set=function(e,t){var n=di(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Jn.prototype.add=Jn.prototype.push=function(e){return this.__data__.set(e,o),this},Jn.prototype.has=function(e){return this.__data__.has(e)},Qn.prototype.clear=function(){this.__data__=new zn,this.size=0},Qn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Qn.prototype.get=function(e){return this.__data__.get(e)},Qn.prototype.has=function(e){return this.__data__.has(e)},Qn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!On||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var hr=La(br),_r=La(Tr,!0);function vr(e,t){var n=!0;return hr(e,(function(e,r,a){return n=!!t(e,r,a)})),n}function mr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(u===a?s==s&&!ds(s):n(s,u)))var u=s,l=o}return l}function gr(e,t){var n=[];return hr(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function yr(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=yi),a||(a=[]);++i<o;){var s=e[i];t>0&&n(s)?t>1?yr(s,t-1,n,r,a):Nt(a,s):r||(a[a.length]=s)}return a}var Er=xa(),Sr=xa(!0);function br(e,t){return e&&Er(e,t,Ns)}function Tr(e,t){return e&&Sr(e,t,Ns)}function wr(e,t){return kt(t,(function(t){return es(e[t])}))}function Ar(e,t){for(var n=0,r=(t=Sa(t,e)).length;null!=e&&n<r;)e=e[Gi(t[n++])];return n&&n==r?e:a}function Cr(e,t,n){var r=t(e);return $o(e)?r:Nt(r,n(e))}function Or(e){return null==e?e===a?"[object Undefined]":"[object Null]":nt&&nt in Oe(e)?function(e){var t=xe.call(e,nt),n=e[nt];try{e[nt]=a;var r=!0}catch(e){}var i=Ge.call(e);r&&(t?e[nt]=n:delete e[nt]);return i}(e):function(e){return Ge.call(e)}(e)}function Mr(e,t){return e>t}function Ir(e,t){return null!=e&&xe.call(e,t)}function kr(e,t){return null!=e&&t in Oe(e)}function Pr(e,t,n){for(var i=n?Rt:Pt,o=e[0].length,s=e.length,u=s,l=r(s),c=1/0,d=[];u--;){var f=e[u];u&&t&&(f=Dt(f,Qt(t))),c=Sn(f.length,c),l[u]=!n&&(t||o>=120&&f.length>=120)?new Jn(u&&f):a}f=e[0];var p=-1,h=l[0];e:for(;++p<o&&d.length<c;){var _=f[p],v=t?t(_):_;if(_=n||0!==_?_:0,!(h?Zt(h,v):i(d,v,n))){for(u=s;--u;){var m=l[u];if(!(m?Zt(m,v):i(e[u],v,n)))continue e}h&&h.push(v),d.push(_)}}return d}function Rr(e,t,n){var r=null==(e=Ii(e,t=Sa(t,e)))?e:e[Gi(Xi(t))];return null==r?a:At(r,e,n)}function Dr(e){return as(e)&&Or(e)==g}function Nr(e,t,n,r,i){return e===t||(null==e||null==t||!as(e)&&!as(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var s=$o(e),u=$o(t),l=s?y:vi(e),c=u?y:vi(t),d=(l=l==g?O:l)==O,f=(c=c==g?O:c)==O,p=l==c;if(p&&Qo(e)){if(!Qo(t))return!1;s=!0,d=!1}if(p&&!d)return o||(o=new Qn),s||fs(e)?ri(e,t,n,r,i,o):function(e,t,n,r,a,i,o){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!i(new Ve(e),new Ve(t)));case E:case S:case C:return Ko(+e,+t);case b:return e.name==t.name&&e.message==t.message;case I:case P:return e==t+"";case A:var s=un;case k:var u=1&r;if(s||(s=dn),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var c=ri(s(e),s(t),r,a,i,o);return o.delete(e),c;case R:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var h=d&&xe.call(e,"__wrapped__"),_=f&&xe.call(t,"__wrapped__");if(h||_){var v=h?e.value():e,m=_?t.value():t;return o||(o=new Qn),i(v,m,n,r,o)}}if(!p)return!1;return o||(o=new Qn),function(e,t,n,r,i,o){var s=1&n,u=ii(e),l=u.length,c=ii(t).length;if(l!=c&&!s)return!1;var d=l;for(;d--;){var f=u[d];if(!(s?f in t:xe.call(t,f)))return!1}var p=o.get(e),h=o.get(t);if(p&&h)return p==t&&h==e;var _=!0;o.set(e,t),o.set(t,e);var v=s;for(;++d<l;){var m=e[f=u[d]],g=t[f];if(r)var y=s?r(g,m,f,t,e,o):r(m,g,f,e,t,o);if(!(y===a?m===g||i(m,g,n,r,o):y)){_=!1;break}v||(v="constructor"==f)}if(_&&!v){var E=e.constructor,S=t.constructor;E==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof S&&S instanceof S||(_=!1)}return o.delete(e),o.delete(t),_}(e,t,n,r,i,o)}(e,t,n,r,Nr,i))}function Lr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Oe(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var l=(u=n[i])[0],c=e[l],d=u[1];if(s&&u[2]){if(c===a&&!(l in e))return!1}else{var f=new Qn;if(r)var p=r(c,d,l,e,t,f);if(!(p===a?Nr(d,c,3,r,f):p))return!1}}return!0}function xr(e){return!(!rs(e)||(t=e,Fe&&Fe in t))&&(es(e)?Ye:ge).test(Bi(e));var t}function Ur(e){return"function"==typeof e?e:null==e?ou:"object"==typeof e?$o(e)?Kr(e[0],e[1]):Yr(e):_u(e)}function Fr(e){if(!Ai(e))return yn(e);var t=[];for(var n in Oe(e))xe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Gr(e){if(!rs(e))return function(e){var t=[];if(null!=e)for(var n in Oe(e))t.push(n);return t}(e);var t=Ai(e),n=[];for(var r in e)("constructor"!=r||!t&&xe.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function jr(e,t){var n=-1,a=qo(e)?r(e.length):[];return hr(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}function Yr(e){var t=fi(e);return 1==t.length&&t[0][2]?Oi(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function Kr(e,t){return bi(e)&&Ci(t)?Oi(Gi(e),t):function(n){var r=Is(n,e);return r===a&&r===t?ks(n,e):Nr(t,r,3)}}function Wr(e,t,n,r,i){e!==t&&Er(t,(function(o,s){if(i||(i=new Qn),rs(o))!function(e,t,n,r,i,o,s){var u=Pi(e,n),l=Pi(t,n),c=s.get(l);if(c)return void nr(e,n,c);var d=o?o(u,l,n+"",e,t,s):a,f=d===a;if(f){var p=$o(l),h=!p&&Qo(l),_=!p&&!h&&fs(l);d=l,p||h||_?$o(u)?d=u:Jo(u)?d=Pa(u):h?(f=!1,d=Aa(l,!0)):_?(f=!1,d=Oa(l,!0)):d=[]:ss(l)||Ho(l)?(d=u,Ho(u)?d=Es(u):rs(u)&&!es(u)||(d=gi(l))):f=!1}f&&(s.set(l,d),i(d,l,r,o,s),s.delete(l));nr(e,n,d)}(e,t,s,n,Wr,r,i);else{var u=r?r(Pi(e,s),o,s+"",e,t,i):a;u===a&&(u=o),nr(e,s,u)}}),Ls)}function Vr(e,t){var n=e.length;if(n)return Ei(t+=t<0?n:0,n)?e[t]:a}function Hr(e,t,n){t=t.length?Dt(t,(function(e){return $o(e)?function(t){return Ar(t,1===e.length?e[0]:e)}:e})):[ou];var r=-1;return t=Dt(t,Qt(ci())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(jr(e,(function(e,n,a){return{criteria:Dt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,a=e.criteria,i=t.criteria,o=a.length,s=n.length;for(;++r<o;){var u=Ma(a[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function $r(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],s=Ar(e,o);n(s,o)&&ta(i,Sa(o,e),s)}return i}function zr(e,t,n,r){var a=r?Yt:jt,i=-1,o=t.length,s=e;for(e===t&&(t=Pa(t)),n&&(s=Dt(e,Qt(n)));++i<o;)for(var u=0,l=t[i],c=n?n(l):l;(u=a(s,c,u,r))>-1;)s!==e&&Je.call(s,u,1),Je.call(e,u,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==i){var i=a;Ei(a)?Je.call(e,a,1):pa(e,a)}}return e}function Jr(e,t){return e+mt(wn()*(t-e+1))}function Qr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=mt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Ni(Mi(e,t,ou),e+"")}function Zr(e){return Zn(Ks(e))}function ea(e,t){var n=Ks(e);return Ui(n,lr(t,0,n.length))}function ta(e,t,n,r){if(!rs(e))return e;for(var i=-1,o=(t=Sa(t,e)).length,s=o-1,u=e;null!=u&&++i<o;){var l=Gi(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var d=u[l];(c=r?r(d,l,u):a)===a&&(c=rs(d)?d:Ei(t[i+1])?[]:{})}rr(u,l,c),u=u[l]}return e}var na=Rn?function(e,t){return Rn.set(e,t),e}:ou,ra=ut?function(e,t){return ut(e,"toString",{configurable:!0,enumerable:!1,value:ru(t),writable:!0})}:ou;function aa(e){return Ui(Ks(e))}function ia(e,t,n){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=r(i);++a<i;)o[a]=e[a+t];return o}function oa(e,t){var n;return hr(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}function sa(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var i=r+a>>>1,o=e[i];null!==o&&!ds(o)&&(n?o<=t:o<t)?r=i+1:a=i}return a}return ua(e,t,ou,n)}function ua(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,u=null===t,l=ds(t),c=t===a;i<o;){var d=mt((i+o)/2),f=n(e[d]),p=f!==a,h=null===f,_=f==f,v=ds(f);if(s)var m=r||_;else m=c?_&&(r||p):u?_&&p&&(r||!h):l?_&&p&&!h&&(r||!v):!h&&!v&&(r?f<=t:f<t);m?i=d+1:o=d}return Sn(o,4294967294)}function la(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Ko(s,u)){var u=s;i[a++]=0===o?0:o}}return i}function ca(e){return"number"==typeof e?e:ds(e)?_:+e}function da(e){if("string"==typeof e)return e;if($o(e))return Dt(e,da)+"";if(ds(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fa(e,t,n){var r=-1,a=Pt,i=e.length,o=!0,s=[],u=s;if(n)o=!1,a=Rt;else if(i>=200){var l=t?null:Qa(e);if(l)return dn(l);o=!1,a=Zt,u=new Jn}else u=t?[]:s;e:for(;++r<i;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,o&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),s.push(c)}else a(u,d,n)||(u!==s&&u.push(d),s.push(c))}return s}function pa(e,t){return null==(e=Ii(e,t=Sa(t,e)))||delete e[Gi(Xi(t))]}function ha(e,t,n,r){return ta(e,t,n(Ar(e,t)),r)}function _a(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?ia(e,r?0:i,r?i+1:a):ia(e,r?i+1:0,r?a:i)}function va(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),n)}function ma(e,t,n){var a=e.length;if(a<2)return a?fa(e[0]):[];for(var i=-1,o=r(a);++i<a;)for(var s=e[i],u=-1;++u<a;)u!=i&&(o[i]=pr(o[i]||s,e[u],t,n));return fa(yr(o,1),t,n)}function ga(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var u=r<o?t[r]:a;n(s,e[r],u)}return s}function ya(e){return Jo(e)?e:[]}function Ea(e){return"function"==typeof e?e:ou}function Sa(e,t){return $o(e)?e:bi(e,t)?[e]:Fi(Ss(e))}var ba=Xr;function Ta(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:ia(e,t,n)}var wa=dt||function(e){return pt.clearTimeout(e)};function Aa(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Ca(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Oa(e,t){var n=t?Ca(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ma(e,t){if(e!==t){var n=e!==a,r=null===e,i=e==e,o=ds(e),s=t!==a,u=null===t,l=t==t,c=ds(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!l)return-1}return 0}function Ia(e,t,n,a){for(var i=-1,o=e.length,s=n.length,u=-1,l=t.length,c=En(o-s,0),d=r(l+c),f=!a;++u<l;)d[u]=t[u];for(;++i<s;)(f||i<o)&&(d[n[i]]=e[i]);for(;c--;)d[u++]=e[i++];return d}function ka(e,t,n,a){for(var i=-1,o=e.length,s=-1,u=n.length,l=-1,c=t.length,d=En(o-u,0),f=r(d+c),p=!a;++i<d;)f[i]=e[i];for(var h=i;++l<c;)f[h+l]=t[l];for(;++s<u;)(p||i<o)&&(f[h+n[s]]=e[i++]);return f}function Pa(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function Ra(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],l=r?r(n[u],e[u],u,n,e):a;l===a&&(l=e[u]),i?sr(n,u,l):rr(n,u,l)}return n}function Da(e,t){return function(n,r){var a=$o(n)?Ct:ir,i=t?t():{};return a(n,e,ci(r,2),i)}}function Na(e){return Xr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,s&&Si(n[0],n[1],s)&&(o=i<3?a:o,i=1),t=Oe(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t}))}function La(e,t){return function(n,r){if(null==n)return n;if(!qo(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Oe(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function xa(e){return function(t,n,r){for(var a=-1,i=Oe(t),o=r(t),s=o.length;s--;){var u=o[e?s:++a];if(!1===n(i[u],u,i))break}return t}}function Ua(e){return function(t){var n=sn(t=Ss(t))?hn(t):a,r=n?n[0]:t.charAt(0),i=n?Ta(n,1).join(""):t.slice(1);return r[e]()+i}}function Fa(e){return function(t){return Lt(eu(Hs(t).replace(Xe,"")),e,"")}}function Ga(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Kn(e.prototype),r=e.apply(n,t);return rs(r)?r:n}}function Ba(e){return function(t,n,r){var i=Oe(t);if(!qo(t)){var o=ci(n,3);t=Ns(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function ja(e){return ai((function(t){var n=t.length,r=n,o=Vn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new ke(i);if(o&&!u&&"wrapper"==ui(s))var u=new Vn([],!0)}for(r=u?r:n;++r<n;){var l=ui(s=t[r]),c="wrapper"==l?si(s):a;u=c&&Ti(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ui(c[0])].apply(u,c[3]):1==s.length&&Ti(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&$o(r))return u.plant(r).value();for(var a=0,i=n?t[a].apply(this,e):r;++a<n;)i=t[a].call(this,i);return i}}))}function Ya(e,t,n,i,o,s,u,l,c,f){var p=t&d,h=1&t,_=2&t,v=24&t,m=512&t,g=_?a:Ga(e);return function a(){for(var d=arguments.length,y=r(d),E=d;E--;)y[E]=arguments[E];if(v)var S=li(a),b=nn(y,S);if(i&&(y=Ia(y,i,o,v)),s&&(y=ka(y,s,u,v)),d-=b,v&&d<f){var T=cn(y,S);return qa(e,t,Ya,a.placeholder,n,y,T,l,c,f-d)}var w=h?n:this,A=_?w[e]:e;return d=y.length,l?y=ki(y,l):m&&d>1&&y.reverse(),p&&c<d&&(y.length=c),this&&this!==pt&&this instanceof a&&(A=g||Ga(A)),A.apply(w,y)}}function Ka(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,a,i){t(r,n(e),a,i)})),r}(n,e,t(r),{})}}function Wa(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=da(n),r=da(r)):(n=ca(n),r=ca(r)),i=e(n,r)}return i}}function Va(e){return ai((function(t){return t=Dt(t,Qt(ci())),Xr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Ha(e,t){var n=(t=t===a?" ":da(t)).length;if(n<2)return n?Qr(t,e):t;var r=Qr(t,_t(e/pn(t)));return sn(t)?Ta(hn(r),0,e).join(""):r.slice(0,e)}function $a(e){return function(t,n,i){return i&&"number"!=typeof i&&Si(t,n,i)&&(n=i=a),t=vs(t),n===a?(n=t,t=0):n=vs(n),function(e,t,n,a){for(var i=-1,o=En(_t((t-e)/(n||1)),0),s=r(o);o--;)s[a?o:++i]=e,e+=n;return s}(t,n,i=i===a?t<n?1:-1:vs(i),e)}}function za(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function qa(e,t,n,r,i,o,s,u,d,f){var p=8&t;t|=p?l:c,4&(t&=~(p?c:l))||(t&=-4);var h=[e,t,i,p?o:a,p?s:a,p?a:o,p?a:s,u,d,f],_=n.apply(a,h);return Ti(e)&&Ri(_,h),_.placeholder=r,Li(_,e,t)}function Ja(e){var t=Ce[e];return function(e,n){if(e=ys(e),(n=null==n?0:Sn(ms(n),292))&&Ht(e)){var r=(Ss(e)+"e").split("e");return+((r=(Ss(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Qa=In&&1/dn(new In([,-0]))[1]==p?function(e){return new In(e)}:du;function Xa(e){return function(t){var n=vi(t);return n==A?un(t):n==k?fn(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Za(e,t,n,o,p,h,_,v){var m=2&t;if(!m&&"function"!=typeof e)throw new ke(i);var g=o?o.length:0;if(g||(t&=-97,o=p=a),_=_===a?_:En(ms(_),0),v=v===a?v:ms(v),g-=p?p.length:0,t&c){var y=o,E=p;o=p=a}var S=m?a:si(e),b=[e,t,n,o,p,y,E,h,_,v];if(S&&function(e,t){var n=e[1],r=t[1],a=n|r,i=a<131,o=r==d&&8==n||r==d&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!o)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?Ia(l,u,t[4]):u,e[4]=l?cn(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?ka(l,u,t[6]):u,e[6]=l?cn(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&d&&(e[8]=null==e[8]?t[8]:Sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(b,S),e=b[0],t=b[1],n=b[2],o=b[3],p=b[4],!(v=b[9]=b[9]===a?m?0:e.length:En(b[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)T=8==t||t==u?function(e,t,n){var i=Ga(e);return function o(){for(var s=arguments.length,u=r(s),l=s,c=li(o);l--;)u[l]=arguments[l];var d=s<3&&u[0]!==c&&u[s-1]!==c?[]:cn(u,c);return(s-=d.length)<n?qa(e,t,Ya,o.placeholder,a,u,d,a,a,n-s):At(this&&this!==pt&&this instanceof o?i:e,this,u)}}(e,t,v):t!=l&&33!=t||p.length?Ya.apply(a,b):function(e,t,n,a){var i=1&t,o=Ga(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=a.length,d=r(c+u),f=this&&this!==pt&&this instanceof t?o:e;++l<c;)d[l]=a[l];for(;u--;)d[l++]=arguments[++s];return At(f,i?n:this,d)}}(e,t,n,o);else var T=function(e,t,n){var r=1&t,a=Ga(e);return function t(){return(this&&this!==pt&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,n);return Li((S?na:Ri)(T,b),e,t)}function ei(e,t,n,r){return e===a||Ko(e,De[n])&&!xe.call(r,n)?t:e}function ti(e,t,n,r,i,o){return rs(e)&&rs(t)&&(o.set(t,e),Wr(e,t,a,ti,o),o.delete(t)),e}function ni(e){return ss(e)?a:e}function ri(e,t,n,r,i,o){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var f=-1,p=!0,h=2&n?new Jn:a;for(o.set(e,t),o.set(t,e);++f<u;){var _=e[f],v=t[f];if(r)var m=s?r(v,_,f,t,e,o):r(_,v,f,e,t,o);if(m!==a){if(m)continue;p=!1;break}if(h){if(!Ut(t,(function(e,t){if(!Zt(h,t)&&(_===e||i(_,e,n,r,o)))return h.push(t)}))){p=!1;break}}else if(_!==v&&!i(_,v,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function ai(e){return Ni(Mi(e,a,$i),e+"")}function ii(e){return Cr(e,Ns,hi)}function oi(e){return Cr(e,Ls,_i)}var si=Rn?function(e){return Rn.get(e)}:du;function ui(e){for(var t=e.name+"",n=Dn[t],r=xe.call(Dn,t)?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}function li(e){return(xe.call(Yn,"placeholder")?Yn:e).placeholder}function ci(){var e=Yn.iteratee||su;return e=e===su?Ur:e,arguments.length?e(arguments[0],arguments[1]):e}function di(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function fi(e){for(var t=Ns(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Ci(a)]}return t}function pi(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return xr(n)?n:a}var hi=gt?function(e){return null==e?[]:(e=Oe(e),kt(gt(e),(function(t){return qe.call(e,t)})))}:gu,_i=gt?function(e){for(var t=[];e;)Nt(t,hi(e)),e=$e(e);return t}:gu,vi=Or;function mi(e,t,n){for(var r=-1,a=(t=Sa(t,e)).length,i=!1;++r<a;){var o=Gi(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++r!=a?i:!!(a=null==e?0:e.length)&&ns(a)&&Ei(o,a)&&($o(e)||Ho(e))}function gi(e){return"function"!=typeof e.constructor||Ai(e)?{}:Kn($e(e))}function yi(e){return $o(e)||Ho(e)||!!(Qe&&e&&e[Qe])}function Ei(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&Ee.test(e))&&e>-1&&e%1==0&&e<t}function Si(e,t,n){if(!rs(n))return!1;var r=typeof t;return!!("number"==r?qo(n)&&Ei(t,n.length):"string"==r&&t in n)&&Ko(n[t],e)}function bi(e,t){if($o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ds(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Oe(t))}function Ti(e){var t=ui(e),n=Yn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=si(n);return!!r&&e===r[0]}(Cn&&vi(new Cn(new ArrayBuffer(1)))!=L||On&&vi(new On)!=A||Mn&&vi(Mn.resolve())!=M||In&&vi(new In)!=k||kn&&vi(new kn)!=D)&&(vi=function(e){var t=Or(e),n=t==O?e.constructor:a,r=n?Bi(n):"";if(r)switch(r){case Nn:return L;case Ln:return A;case xn:return M;case Un:return k;case Fn:return D}return t});var wi=Ne?es:yu;function Ai(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function Ci(e){return e==e&&!rs(e)}function Oi(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in Oe(n)))}}function Mi(e,t,n){return t=En(t===a?e.length-1:t,0),function(){for(var a=arguments,i=-1,o=En(a.length-t,0),s=r(o);++i<o;)s[i]=a[t+i];i=-1;for(var u=r(t+1);++i<t;)u[i]=a[i];return u[t]=n(s),At(e,this,u)}}function Ii(e,t){return t.length<2?e:Ar(e,ia(t,0,-1))}function ki(e,t){for(var n=e.length,r=Sn(t.length,n),i=Pa(e);r--;){var o=t[r];e[r]=Ei(o,n)?i[o]:a}return e}function Pi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ri=xi(na),Di=ht||function(e,t){return pt.setTimeout(e,t)},Ni=xi(ra);function Li(e,t,n){var r=t+"";return Ni(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ot(m,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(r),n)))}function xi(e){var t=0,n=0;return function(){var r=bn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Ui(e,t){var n=-1,r=e.length,i=r-1;for(t=t===a?r:t;++n<t;){var o=Jr(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Fi=function(e){var t=Uo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,a){t.push(r?a.replace(pe,"$1"):n||e)})),t}));function Gi(e){if("string"==typeof e||ds(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bi(e){if(null!=e){try{return Le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ji(e){if(e instanceof Hn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Pa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Yi=Xr((function(e,t){return Jo(e)?pr(e,yr(t,1,Jo,!0)):[]})),Ki=Xr((function(e,t){var n=Xi(t);return Jo(n)&&(n=a),Jo(e)?pr(e,yr(t,1,Jo,!0),ci(n,2)):[]})),Wi=Xr((function(e,t){var n=Xi(t);return Jo(n)&&(n=a),Jo(e)?pr(e,yr(t,1,Jo,!0),a,n):[]}));function Vi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:ms(n);return a<0&&(a=En(r+a,0)),Bt(e,ci(t,3),a)}function Hi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=ms(n),i=n<0?En(r+i,0):Sn(i,r-1)),Bt(e,ci(t,3),i,!0)}function $i(e){return(null==e?0:e.length)?yr(e,1):[]}function zi(e){return e&&e.length?e[0]:a}var qi=Xr((function(e){var t=Dt(e,ya);return t.length&&t[0]===e[0]?Pr(t):[]})),Ji=Xr((function(e){var t=Xi(e),n=Dt(e,ya);return t===Xi(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Pr(n,ci(t,2)):[]})),Qi=Xr((function(e){var t=Xi(e),n=Dt(e,ya);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?Pr(n,a,t):[]}));function Xi(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Zi=Xr(eo);function eo(e,t){return e&&e.length&&t&&t.length?zr(e,t):e}var to=ai((function(e,t){var n=null==e?0:e.length,r=ur(e,t);return qr(e,Dt(t,(function(e){return Ei(e,n)?+e:e})).sort(Ma)),r}));function no(e){return null==e?e:An.call(e)}var ro=Xr((function(e){return fa(yr(e,1,Jo,!0))})),ao=Xr((function(e){var t=Xi(e);return Jo(t)&&(t=a),fa(yr(e,1,Jo,!0),ci(t,2))})),io=Xr((function(e){var t=Xi(e);return t="function"==typeof t?t:a,fa(yr(e,1,Jo,!0),a,t)}));function oo(e){if(!e||!e.length)return[];var t=0;return e=kt(e,(function(e){if(Jo(e))return t=En(e.length,t),!0})),qt(t,(function(t){return Dt(e,Vt(t))}))}function so(e,t){if(!e||!e.length)return[];var n=oo(e);return null==t?n:Dt(n,(function(e){return At(t,a,e)}))}var uo=Xr((function(e,t){return Jo(e)?pr(e,t):[]})),lo=Xr((function(e){return ma(kt(e,Jo))})),co=Xr((function(e){var t=Xi(e);return Jo(t)&&(t=a),ma(kt(e,Jo),ci(t,2))})),fo=Xr((function(e){var t=Xi(e);return t="function"==typeof t?t:a,ma(kt(e,Jo),a,t)})),po=Xr(oo);var ho=Xr((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,so(e,n)}));function _o(e){var t=Yn(e);return t.__chain__=!0,t}function vo(e,t){return t(e)}var mo=ai((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return ur(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&Ei(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:vo,args:[i],thisArg:a}),new Vn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(i)}));var go=Da((function(e,t,n){xe.call(e,n)?++e[n]:sr(e,n,1)}));var yo=Ba(Vi),Eo=Ba(Hi);function So(e,t){return($o(e)?Ot:hr)(e,ci(t,3))}function bo(e,t){return($o(e)?Mt:_r)(e,ci(t,3))}var To=Da((function(e,t,n){xe.call(e,n)?e[n].push(t):sr(e,n,[t])}));var wo=Xr((function(e,t,n){var a=-1,i="function"==typeof t,o=qo(e)?r(e.length):[];return hr(e,(function(e){o[++a]=i?At(t,e,n):Rr(e,t,n)})),o})),Ao=Da((function(e,t,n){sr(e,n,t)}));function Co(e,t){return($o(e)?Dt:jr)(e,ci(t,3))}var Oo=Da((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Mo=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Si(e,t[0],t[1])?t=[]:n>2&&Si(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,yr(t,1),[])})),Io=ft||function(){return pt.Date.now()};function ko(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,Za(e,d,a,a,a,a,t)}function Po(e,t){var n;if("function"!=typeof t)throw new ke(i);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Ro=Xr((function(e,t,n){var r=1;if(n.length){var a=cn(n,li(Ro));r|=l}return Za(e,r,t,n,a)})),Do=Xr((function(e,t,n){var r=3;if(n.length){var a=cn(n,li(Do));r|=l}return Za(t,r,e,n,a)}));function No(e,t,n){var r,o,s,u,l,c,d=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new ke(i);function _(t){var n=r,i=o;return r=o=a,d=t,u=e.apply(i,n)}function v(e){return d=e,l=Di(g,t),f?_(e):u}function m(e){var n=e-c;return c===a||n>=t||n<0||p&&e-d>=s}function g(){var e=Io();if(m(e))return y(e);l=Di(g,function(e){var n=t-(e-c);return p?Sn(n,s-(e-d)):n}(e))}function y(e){return l=a,h&&r?_(e):(r=o=a,u)}function E(){var e=Io(),n=m(e);if(r=arguments,o=this,c=e,n){if(l===a)return v(c);if(p)return wa(l),l=Di(g,t),_(c)}return l===a&&(l=Di(g,t)),u}return t=ys(t)||0,rs(n)&&(f=!!n.leading,s=(p="maxWait"in n)?En(ys(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),E.cancel=function(){l!==a&&wa(l),d=0,r=c=o=l=a},E.flush=function(){return l===a?u:y(Io())},E}var Lo=Xr((function(e,t){return fr(e,1,t)})),xo=Xr((function(e,t,n){return fr(e,ys(t)||0,n)}));function Uo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ke(i);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(Uo.Cache||qn),n}function Fo(e){if("function"!=typeof e)throw new ke(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Uo.Cache=qn;var Go=ba((function(e,t){var n=(t=1==t.length&&$o(t[0])?Dt(t[0],Qt(ci())):Dt(yr(t,1),Qt(ci()))).length;return Xr((function(r){for(var a=-1,i=Sn(r.length,n);++a<i;)r[a]=t[a].call(this,r[a]);return At(e,this,r)}))})),Bo=Xr((function(e,t){var n=cn(t,li(Bo));return Za(e,l,a,t,n)})),jo=Xr((function(e,t){var n=cn(t,li(jo));return Za(e,c,a,t,n)})),Yo=ai((function(e,t){return Za(e,f,a,a,a,t)}));function Ko(e,t){return e===t||e!=e&&t!=t}var Wo=za(Mr),Vo=za((function(e,t){return e>=t})),Ho=Dr(function(){return arguments}())?Dr:function(e){return as(e)&&xe.call(e,"callee")&&!qe.call(e,"callee")},$o=r.isArray,zo=yt?Qt(yt):function(e){return as(e)&&Or(e)==N};function qo(e){return null!=e&&ns(e.length)&&!es(e)}function Jo(e){return as(e)&&qo(e)}var Qo=Ft||yu,Xo=Et?Qt(Et):function(e){return as(e)&&Or(e)==S};function Zo(e){if(!as(e))return!1;var t=Or(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ss(e)}function es(e){if(!rs(e))return!1;var t=Or(e);return t==T||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ts(e){return"number"==typeof e&&e==ms(e)}function ns(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function rs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function as(e){return null!=e&&"object"==typeof e}var is=St?Qt(St):function(e){return as(e)&&vi(e)==A};function os(e){return"number"==typeof e||as(e)&&Or(e)==C}function ss(e){if(!as(e)||Or(e)!=O)return!1;var t=$e(e);if(null===t)return!0;var n=xe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Le.call(n)==Be}var us=bt?Qt(bt):function(e){return as(e)&&Or(e)==I};var ls=Tt?Qt(Tt):function(e){return as(e)&&vi(e)==k};function cs(e){return"string"==typeof e||!$o(e)&&as(e)&&Or(e)==P}function ds(e){return"symbol"==typeof e||as(e)&&Or(e)==R}var fs=wt?Qt(wt):function(e){return as(e)&&ns(e.length)&&!!ot[Or(e)]};var ps=za(Br),hs=za((function(e,t){return e<=t}));function _s(e){if(!e)return[];if(qo(e))return cs(e)?hn(e):Pa(e);if(et&&e[et])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[et]());var t=vi(e);return(t==A?un:t==k?dn:Ks)(e)}function vs(e){return e?(e=ys(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?lr(ms(e),0,v):0}function ys(e){if("number"==typeof e)return e;if(ds(e))return _;if(rs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=rs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=me.test(e);return n||ye.test(e)?ct(e.slice(2),n?2:8):ve.test(e)?_:+e}function Es(e){return Ra(e,Ls(e))}function Ss(e){return null==e?"":da(e)}var bs=Na((function(e,t){if(Ai(t)||qo(t))Ra(t,Ns(t),e);else for(var n in t)xe.call(t,n)&&rr(e,n,t[n])})),Ts=Na((function(e,t){Ra(t,Ls(t),e)})),ws=Na((function(e,t,n,r){Ra(t,Ls(t),e,r)})),As=Na((function(e,t,n,r){Ra(t,Ns(t),e,r)})),Cs=ai(ur);var Os=Xr((function(e,t){e=Oe(e);var n=-1,r=t.length,i=r>2?t[2]:a;for(i&&Si(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=Ls(o),u=-1,l=s.length;++u<l;){var c=s[u],d=e[c];(d===a||Ko(d,De[c])&&!xe.call(e,c))&&(e[c]=o[c])}return e})),Ms=Xr((function(e){return e.push(a,ti),At(Us,a,e)}));function Is(e,t,n){var r=null==e?a:Ar(e,t);return r===a?n:r}function ks(e,t){return null!=e&&mi(e,t,kr)}var Ps=Ka((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ge.call(t)),e[t]=n}),ru(ou)),Rs=Ka((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ge.call(t)),xe.call(e,t)?e[t].push(n):e[t]=[n]}),ci),Ds=Xr(Rr);function Ns(e){return qo(e)?Xn(e):Fr(e)}function Ls(e){return qo(e)?Xn(e,!0):Gr(e)}var xs=Na((function(e,t,n){Wr(e,t,n)})),Us=Na((function(e,t,n,r){Wr(e,t,n,r)})),Fs=ai((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=Sa(t,e),r||(r=t.length>1),t})),Ra(e,oi(e),n),r&&(n=cr(n,7,ni));for(var a=t.length;a--;)pa(n,t[a]);return n}));var Gs=ai((function(e,t){return null==e?{}:function(e,t){return $r(e,t,(function(t,n){return ks(e,n)}))}(e,t)}));function Bs(e,t){if(null==e)return{};var n=Dt(oi(e),(function(e){return[e]}));return t=ci(t),$r(e,n,(function(e,n){return t(e,n[0])}))}var js=Xa(Ns),Ys=Xa(Ls);function Ks(e){return null==e?[]:Xt(e,Ns(e))}var Ws=Fa((function(e,t,n){return t=t.toLowerCase(),e+(n?Vs(t):t)}));function Vs(e){return Zs(Ss(e).toLowerCase())}function Hs(e){return(e=Ss(e))&&e.replace(Se,rn).replace(Ze,"")}var $s=Fa((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),zs=Fa((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qs=Ua("toLowerCase");var Js=Fa((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Qs=Fa((function(e,t,n){return e+(n?" ":"")+Zs(t)}));var Xs=Fa((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zs=Ua("toUpperCase");function eu(e,t,n){return e=Ss(e),(t=n?a:t)===a?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var tu=Xr((function(e,t){try{return At(e,a,t)}catch(e){return Zo(e)?e:new we(e)}})),nu=ai((function(e,t){return Ot(t,(function(t){t=Gi(t),sr(e,t,Ro(e[t],e))})),e}));function ru(e){return function(){return e}}var au=ja(),iu=ja(!0);function ou(e){return e}function su(e){return Ur("function"==typeof e?e:cr(e,1))}var uu=Xr((function(e,t){return function(n){return Rr(n,e,t)}})),lu=Xr((function(e,t){return function(n){return Rr(e,n,t)}}));function cu(e,t,n){var r=Ns(t),a=wr(t,r);null!=n||rs(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=wr(t,Ns(t)));var i=!(rs(n)&&"chain"in n&&!n.chain),o=es(e);return Ot(a,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),a=n.__actions__=Pa(this.__actions__);return a.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})})),e}function du(){}var fu=Va(Dt),pu=Va(It),hu=Va(Ut);function _u(e){return bi(e)?Vt(Gi(e)):function(e){return function(t){return Ar(t,e)}}(e)}var vu=$a(),mu=$a(!0);function gu(){return[]}function yu(){return!1}var Eu=Wa((function(e,t){return e+t}),0),Su=Ja("ceil"),bu=Wa((function(e,t){return e/t}),1),Tu=Ja("floor");var wu,Au=Wa((function(e,t){return e*t}),1),Cu=Ja("round"),Ou=Wa((function(e,t){return e-t}),0);return Yn.after=function(e,t){if("function"!=typeof t)throw new ke(i);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Yn.ary=ko,Yn.assign=bs,Yn.assignIn=Ts,Yn.assignInWith=ws,Yn.assignWith=As,Yn.at=Cs,Yn.before=Po,Yn.bind=Ro,Yn.bindAll=nu,Yn.bindKey=Do,Yn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return $o(e)?e:[e]},Yn.chain=_o,Yn.chunk=function(e,t,n){t=(n?Si(e,t,n):t===a)?1:En(ms(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,u=r(_t(i/t));o<i;)u[s++]=ia(e,o,o+=t);return u},Yn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var i=e[t];i&&(a[r++]=i)}return a},Yn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Nt($o(n)?Pa(n):[n],yr(t,1))},Yn.cond=function(e){var t=null==e?0:e.length,n=ci();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new ke(i);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var a=e[r];if(At(a[0],this,n))return At(a[1],this,n)}}))},Yn.conforms=function(e){return function(e){var t=Ns(e);return function(n){return dr(n,e,t)}}(cr(e,1))},Yn.constant=ru,Yn.countBy=go,Yn.create=function(e,t){var n=Kn(e);return null==t?n:or(n,t)},Yn.curry=function e(t,n,r){var i=Za(t,8,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},Yn.curryRight=function e(t,n,r){var i=Za(t,u,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},Yn.debounce=No,Yn.defaults=Os,Yn.defaultsDeep=Ms,Yn.defer=Lo,Yn.delay=xo,Yn.difference=Yi,Yn.differenceBy=Ki,Yn.differenceWith=Wi,Yn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ia(e,(t=n||t===a?1:ms(t))<0?0:t,r):[]},Yn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ia(e,0,(t=r-(t=n||t===a?1:ms(t)))<0?0:t):[]},Yn.dropRightWhile=function(e,t){return e&&e.length?_a(e,ci(t,3),!0,!0):[]},Yn.dropWhile=function(e,t){return e&&e.length?_a(e,ci(t,3),!0):[]},Yn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Si(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ms(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:ms(r))<0&&(r+=i),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Yn.filter=function(e,t){return($o(e)?kt:gr)(e,ci(t,3))},Yn.flatMap=function(e,t){return yr(Co(e,t),1)},Yn.flatMapDeep=function(e,t){return yr(Co(e,t),p)},Yn.flatMapDepth=function(e,t,n){return n=n===a?1:ms(n),yr(Co(e,t),n)},Yn.flatten=$i,Yn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,p):[]},Yn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===a?1:ms(t)):[]},Yn.flip=function(e){return Za(e,512)},Yn.flow=au,Yn.flowRight=iu,Yn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},Yn.functions=function(e){return null==e?[]:wr(e,Ns(e))},Yn.functionsIn=function(e){return null==e?[]:wr(e,Ls(e))},Yn.groupBy=To,Yn.initial=function(e){return(null==e?0:e.length)?ia(e,0,-1):[]},Yn.intersection=qi,Yn.intersectionBy=Ji,Yn.intersectionWith=Qi,Yn.invert=Ps,Yn.invertBy=Rs,Yn.invokeMap=wo,Yn.iteratee=su,Yn.keyBy=Ao,Yn.keys=Ns,Yn.keysIn=Ls,Yn.map=Co,Yn.mapKeys=function(e,t){var n={};return t=ci(t,3),br(e,(function(e,r,a){sr(n,t(e,r,a),e)})),n},Yn.mapValues=function(e,t){var n={};return t=ci(t,3),br(e,(function(e,r,a){sr(n,r,t(e,r,a))})),n},Yn.matches=function(e){return Yr(cr(e,1))},Yn.matchesProperty=function(e,t){return Kr(e,cr(t,1))},Yn.memoize=Uo,Yn.merge=xs,Yn.mergeWith=Us,Yn.method=uu,Yn.methodOf=lu,Yn.mixin=cu,Yn.negate=Fo,Yn.nthArg=function(e){return e=ms(e),Xr((function(t){return Vr(t,e)}))},Yn.omit=Fs,Yn.omitBy=function(e,t){return Bs(e,Fo(ci(t)))},Yn.once=function(e){return Po(2,e)},Yn.orderBy=function(e,t,n,r){return null==e?[]:($o(t)||(t=null==t?[]:[t]),$o(n=r?a:n)||(n=null==n?[]:[n]),Hr(e,t,n))},Yn.over=fu,Yn.overArgs=Go,Yn.overEvery=pu,Yn.overSome=hu,Yn.partial=Bo,Yn.partialRight=jo,Yn.partition=Oo,Yn.pick=Gs,Yn.pickBy=Bs,Yn.property=_u,Yn.propertyOf=function(e){return function(t){return null==e?a:Ar(e,t)}},Yn.pull=Zi,Yn.pullAll=eo,Yn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,ci(n,2)):e},Yn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,a,n):e},Yn.pullAt=to,Yn.range=vu,Yn.rangeRight=mu,Yn.rearg=Yo,Yn.reject=function(e,t){return($o(e)?kt:gr)(e,Fo(ci(t,3)))},Yn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],i=e.length;for(t=ci(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),a.push(r))}return qr(e,a),n},Yn.rest=function(e,t){if("function"!=typeof e)throw new ke(i);return Xr(e,t=t===a?t:ms(t))},Yn.reverse=no,Yn.sampleSize=function(e,t,n){return t=(n?Si(e,t,n):t===a)?1:ms(t),($o(e)?er:ea)(e,t)},Yn.set=function(e,t,n){return null==e?e:ta(e,t,n)},Yn.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ta(e,t,n,r)},Yn.shuffle=function(e){return($o(e)?tr:aa)(e)},Yn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Si(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===a?r:ms(n)),ia(e,t,n)):[]},Yn.sortBy=Mo,Yn.sortedUniq=function(e){return e&&e.length?la(e):[]},Yn.sortedUniqBy=function(e,t){return e&&e.length?la(e,ci(t,2)):[]},Yn.split=function(e,t,n){return n&&"number"!=typeof n&&Si(e,t,n)&&(t=n=a),(n=n===a?v:n>>>0)?(e=Ss(e))&&("string"==typeof t||null!=t&&!us(t))&&!(t=da(t))&&sn(e)?Ta(hn(e),0,n):e.split(t,n):[]},Yn.spread=function(e,t){if("function"!=typeof e)throw new ke(i);return t=null==t?0:En(ms(t),0),Xr((function(n){var r=n[t],a=Ta(n,0,t);return r&&Nt(a,r),At(e,this,a)}))},Yn.tail=function(e){var t=null==e?0:e.length;return t?ia(e,1,t):[]},Yn.take=function(e,t,n){return e&&e.length?ia(e,0,(t=n||t===a?1:ms(t))<0?0:t):[]},Yn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ia(e,(t=r-(t=n||t===a?1:ms(t)))<0?0:t,r):[]},Yn.takeRightWhile=function(e,t){return e&&e.length?_a(e,ci(t,3),!1,!0):[]},Yn.takeWhile=function(e,t){return e&&e.length?_a(e,ci(t,3)):[]},Yn.tap=function(e,t){return t(e),e},Yn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new ke(i);return rs(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),No(e,t,{leading:r,maxWait:t,trailing:a})},Yn.thru=vo,Yn.toArray=_s,Yn.toPairs=js,Yn.toPairsIn=Ys,Yn.toPath=function(e){return $o(e)?Dt(e,Gi):ds(e)?[e]:Pa(Fi(Ss(e)))},Yn.toPlainObject=Es,Yn.transform=function(e,t,n){var r=$o(e),a=r||Qo(e)||fs(e);if(t=ci(t,4),null==n){var i=e&&e.constructor;n=a?r?new i:[]:rs(e)&&es(i)?Kn($e(e)):{}}return(a?Ot:br)(e,(function(e,r,a){return t(n,e,r,a)})),n},Yn.unary=function(e){return ko(e,1)},Yn.union=ro,Yn.unionBy=ao,Yn.unionWith=io,Yn.uniq=function(e){return e&&e.length?fa(e):[]},Yn.uniqBy=function(e,t){return e&&e.length?fa(e,ci(t,2)):[]},Yn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?fa(e,a,t):[]},Yn.unset=function(e,t){return null==e||pa(e,t)},Yn.unzip=oo,Yn.unzipWith=so,Yn.update=function(e,t,n){return null==e?e:ha(e,t,Ea(n))},Yn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ha(e,t,Ea(n),r)},Yn.values=Ks,Yn.valuesIn=function(e){return null==e?[]:Xt(e,Ls(e))},Yn.without=uo,Yn.words=eu,Yn.wrap=function(e,t){return Bo(Ea(t),e)},Yn.xor=lo,Yn.xorBy=co,Yn.xorWith=fo,Yn.zip=po,Yn.zipObject=function(e,t){return ga(e||[],t||[],rr)},Yn.zipObjectDeep=function(e,t){return ga(e||[],t||[],ta)},Yn.zipWith=ho,Yn.entries=js,Yn.entriesIn=Ys,Yn.extend=Ts,Yn.extendWith=ws,cu(Yn,Yn),Yn.add=Eu,Yn.attempt=tu,Yn.camelCase=Ws,Yn.capitalize=Vs,Yn.ceil=Su,Yn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=ys(n))==n?n:0),t!==a&&(t=(t=ys(t))==t?t:0),lr(ys(e),t,n)},Yn.clone=function(e){return cr(e,4)},Yn.cloneDeep=function(e){return cr(e,5)},Yn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:a)},Yn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:a)},Yn.conformsTo=function(e,t){return null==t||dr(e,t,Ns(t))},Yn.deburr=Hs,Yn.defaultTo=function(e,t){return null==e||e!=e?t:e},Yn.divide=bu,Yn.endsWith=function(e,t,n){e=Ss(e),t=da(t);var r=e.length,i=n=n===a?r:lr(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Yn.eq=Ko,Yn.escape=function(e){return(e=Ss(e))&&Q.test(e)?e.replace(q,an):e},Yn.escapeRegExp=function(e){return(e=Ss(e))&&ie.test(e)?e.replace(ae,"\\$&"):e},Yn.every=function(e,t,n){var r=$o(e)?It:vr;return n&&Si(e,t,n)&&(t=a),r(e,ci(t,3))},Yn.find=yo,Yn.findIndex=Vi,Yn.findKey=function(e,t){return Gt(e,ci(t,3),br)},Yn.findLast=Eo,Yn.findLastIndex=Hi,Yn.findLastKey=function(e,t){return Gt(e,ci(t,3),Tr)},Yn.floor=Tu,Yn.forEach=So,Yn.forEachRight=bo,Yn.forIn=function(e,t){return null==e?e:Er(e,ci(t,3),Ls)},Yn.forInRight=function(e,t){return null==e?e:Sr(e,ci(t,3),Ls)},Yn.forOwn=function(e,t){return e&&br(e,ci(t,3))},Yn.forOwnRight=function(e,t){return e&&Tr(e,ci(t,3))},Yn.get=Is,Yn.gt=Wo,Yn.gte=Vo,Yn.has=function(e,t){return null!=e&&mi(e,t,Ir)},Yn.hasIn=ks,Yn.head=zi,Yn.identity=ou,Yn.includes=function(e,t,n,r){e=qo(e)?e:Ks(e),n=n&&!r?ms(n):0;var a=e.length;return n<0&&(n=En(a+n,0)),cs(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&jt(e,t,n)>-1},Yn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:ms(n);return a<0&&(a=En(r+a,0)),jt(e,t,a)},Yn.inRange=function(e,t,n){return t=vs(t),n===a?(n=t,t=0):n=vs(n),function(e,t,n){return e>=Sn(t,n)&&e<En(t,n)}(e=ys(e),t,n)},Yn.invoke=Ds,Yn.isArguments=Ho,Yn.isArray=$o,Yn.isArrayBuffer=zo,Yn.isArrayLike=qo,Yn.isArrayLikeObject=Jo,Yn.isBoolean=function(e){return!0===e||!1===e||as(e)&&Or(e)==E},Yn.isBuffer=Qo,Yn.isDate=Xo,Yn.isElement=function(e){return as(e)&&1===e.nodeType&&!ss(e)},Yn.isEmpty=function(e){if(null==e)return!0;if(qo(e)&&($o(e)||"string"==typeof e||"function"==typeof e.splice||Qo(e)||fs(e)||Ho(e)))return!e.length;var t=vi(e);if(t==A||t==k)return!e.size;if(Ai(e))return!Fr(e).length;for(var n in e)if(xe.call(e,n))return!1;return!0},Yn.isEqual=function(e,t){return Nr(e,t)},Yn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Nr(e,t,a,n):!!r},Yn.isError=Zo,Yn.isFinite=function(e){return"number"==typeof e&&Ht(e)},Yn.isFunction=es,Yn.isInteger=ts,Yn.isLength=ns,Yn.isMap=is,Yn.isMatch=function(e,t){return e===t||Lr(e,t,fi(t))},Yn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Lr(e,t,fi(t),n)},Yn.isNaN=function(e){return os(e)&&e!=+e},Yn.isNative=function(e){if(wi(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(e)},Yn.isNil=function(e){return null==e},Yn.isNull=function(e){return null===e},Yn.isNumber=os,Yn.isObject=rs,Yn.isObjectLike=as,Yn.isPlainObject=ss,Yn.isRegExp=us,Yn.isSafeInteger=function(e){return ts(e)&&e>=-9007199254740991&&e<=h},Yn.isSet=ls,Yn.isString=cs,Yn.isSymbol=ds,Yn.isTypedArray=fs,Yn.isUndefined=function(e){return e===a},Yn.isWeakMap=function(e){return as(e)&&vi(e)==D},Yn.isWeakSet=function(e){return as(e)&&"[object WeakSet]"==Or(e)},Yn.join=function(e,t){return null==e?"":gn.call(e,t)},Yn.kebabCase=$s,Yn.last=Xi,Yn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=ms(n))<0?En(r+i,0):Sn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Bt(e,Kt,i,!0)},Yn.lowerCase=zs,Yn.lowerFirst=qs,Yn.lt=ps,Yn.lte=hs,Yn.max=function(e){return e&&e.length?mr(e,ou,Mr):a},Yn.maxBy=function(e,t){return e&&e.length?mr(e,ci(t,2),Mr):a},Yn.mean=function(e){return Wt(e,ou)},Yn.meanBy=function(e,t){return Wt(e,ci(t,2))},Yn.min=function(e){return e&&e.length?mr(e,ou,Br):a},Yn.minBy=function(e,t){return e&&e.length?mr(e,ci(t,2),Br):a},Yn.stubArray=gu,Yn.stubFalse=yu,Yn.stubObject=function(){return{}},Yn.stubString=function(){return""},Yn.stubTrue=function(){return!0},Yn.multiply=Au,Yn.nth=function(e,t){return e&&e.length?Vr(e,ms(t)):a},Yn.noConflict=function(){return pt._===this&&(pt._=je),this},Yn.noop=du,Yn.now=Io,Yn.pad=function(e,t,n){e=Ss(e);var r=(t=ms(t))?pn(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return Ha(mt(a),n)+e+Ha(_t(a),n)},Yn.padEnd=function(e,t,n){e=Ss(e);var r=(t=ms(t))?pn(e):0;return t&&r<t?e+Ha(t-r,n):e},Yn.padStart=function(e,t,n){e=Ss(e);var r=(t=ms(t))?pn(e):0;return t&&r<t?Ha(t-r,n)+e:e},Yn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Tn(Ss(e).replace(oe,""),t||0)},Yn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Si(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=vs(e),t===a?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=wn();return Sn(e+i*(t-e+lt("1e-"+((i+"").length-1))),t)}return Jr(e,t)},Yn.reduce=function(e,t,n){var r=$o(e)?Lt:$t,a=arguments.length<3;return r(e,ci(t,4),n,a,hr)},Yn.reduceRight=function(e,t,n){var r=$o(e)?xt:$t,a=arguments.length<3;return r(e,ci(t,4),n,a,_r)},Yn.repeat=function(e,t,n){return t=(n?Si(e,t,n):t===a)?1:ms(t),Qr(Ss(e),t)},Yn.replace=function(){var e=arguments,t=Ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Yn.result=function(e,t,n){var r=-1,i=(t=Sa(t,e)).length;for(i||(i=1,e=a);++r<i;){var o=null==e?a:e[Gi(t[r])];o===a&&(r=i,o=n),e=es(o)?o.call(e):o}return e},Yn.round=Cu,Yn.runInContext=e,Yn.sample=function(e){return($o(e)?Zn:Zr)(e)},Yn.size=function(e){if(null==e)return 0;if(qo(e))return cs(e)?pn(e):e.length;var t=vi(e);return t==A||t==k?e.size:Fr(e).length},Yn.snakeCase=Js,Yn.some=function(e,t,n){var r=$o(e)?Ut:oa;return n&&Si(e,t,n)&&(t=a),r(e,ci(t,3))},Yn.sortedIndex=function(e,t){return sa(e,t)},Yn.sortedIndexBy=function(e,t,n){return ua(e,t,ci(n,2))},Yn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=sa(e,t);if(r<n&&Ko(e[r],t))return r}return-1},Yn.sortedLastIndex=function(e,t){return sa(e,t,!0)},Yn.sortedLastIndexBy=function(e,t,n){return ua(e,t,ci(n,2),!0)},Yn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=sa(e,t,!0)-1;if(Ko(e[n],t))return n}return-1},Yn.startCase=Qs,Yn.startsWith=function(e,t,n){return e=Ss(e),n=null==n?0:lr(ms(n),0,e.length),t=da(t),e.slice(n,n+t.length)==t},Yn.subtract=Ou,Yn.sum=function(e){return e&&e.length?zt(e,ou):0},Yn.sumBy=function(e,t){return e&&e.length?zt(e,ci(t,2)):0},Yn.template=function(e,t,n){var r=Yn.templateSettings;n&&Si(e,t,n)&&(t=a),e=Ss(e),t=ws({},t,r,ei);var i,o,s=ws({},t.imports,r.imports,ei),u=Ns(s),l=Xt(s,u),c=0,d=t.interpolate||be,f="__p += '",p=Me((t.escape||be).source+"|"+d.source+"|"+(d===ee?he:be).source+"|"+(t.evaluate||be).source+"|$","g"),h="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(c,u).replace(Te,on),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var _=xe.call(t,"variable")&&t.variable;if(_){if(fe.test(_))throw new we("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(V,""):f).replace(H,"$1").replace($,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=tu((function(){return Ae(u,h+"return "+f).apply(a,l)}));if(v.source=f,Zo(v))throw v;return v},Yn.times=function(e,t){if((e=ms(e))<1||e>h)return[];var n=v,r=Sn(e,v);t=ci(t),e-=v;for(var a=qt(r,t);++n<e;)t(n);return a},Yn.toFinite=vs,Yn.toInteger=ms,Yn.toLength=gs,Yn.toLower=function(e){return Ss(e).toLowerCase()},Yn.toNumber=ys,Yn.toSafeInteger=function(e){return e?lr(ms(e),-9007199254740991,h):0===e?e:0},Yn.toString=Ss,Yn.toUpper=function(e){return Ss(e).toUpperCase()},Yn.trim=function(e,t,n){if((e=Ss(e))&&(n||t===a))return Jt(e);if(!e||!(t=da(t)))return e;var r=hn(e),i=hn(t);return Ta(r,en(r,i),tn(r,i)+1).join("")},Yn.trimEnd=function(e,t,n){if((e=Ss(e))&&(n||t===a))return e.slice(0,_n(e)+1);if(!e||!(t=da(t)))return e;var r=hn(e);return Ta(r,0,tn(r,hn(t))+1).join("")},Yn.trimStart=function(e,t,n){if((e=Ss(e))&&(n||t===a))return e.replace(oe,"");if(!e||!(t=da(t)))return e;var r=hn(e);return Ta(r,en(r,hn(t))).join("")},Yn.truncate=function(e,t){var n=30,r="...";if(rs(t)){var i="separator"in t?t.separator:i;n="length"in t?ms(t.length):n,r="omission"in t?da(t.omission):r}var o=(e=Ss(e)).length;if(sn(e)){var s=hn(e);o=s.length}if(n>=o)return e;var u=n-pn(r);if(u<1)return r;var l=s?Ta(s,0,u).join(""):e.slice(0,u);if(i===a)return l+r;if(s&&(u+=l.length-u),us(i)){if(e.slice(u).search(i)){var c,d=l;for(i.global||(i=Me(i.source,Ss(_e.exec(i))+"g")),i.lastIndex=0;c=i.exec(d);)var f=c.index;l=l.slice(0,f===a?u:f)}}else if(e.indexOf(da(i),u)!=u){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},Yn.unescape=function(e){return(e=Ss(e))&&J.test(e)?e.replace(z,vn):e},Yn.uniqueId=function(e){var t=++Ue;return Ss(e)+t},Yn.upperCase=Xs,Yn.upperFirst=Zs,Yn.each=So,Yn.eachRight=bo,Yn.first=zi,cu(Yn,(wu={},br(Yn,(function(e,t){xe.call(Yn.prototype,t)||(wu[t]=e)})),wu),{chain:!1}),Yn.VERSION="4.17.21",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Yn[e].placeholder=Yn})),Ot(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===a?1:En(ms(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=Sn(n,r.__takeCount__):r.__views__.push({size:Sn(n,v),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ci(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ou)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Rr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Fo(ci(e)))},Hn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(v)},br(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Yn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Yn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Hn,l=s[0],c=u||$o(t),d=function(e){var t=i.apply(Yn,Nt([e],s));return r&&f?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,p=!!this.__actions__.length,h=o&&!f,_=u&&!p;if(!o&&c){t=_?t:new Hn(this);var v=e.apply(t,s);return v.__actions__.push({func:vo,args:[d],thisArg:a}),new Vn(v,f)}return h&&_?e.apply(this,s):(v=this.thru(d),h?r?v.value()[0]:v.value():v)})})),Ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Pe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Yn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply($o(a)?a:[],e)}return this[n]((function(n){return t.apply($o(n)?n:[],e)}))}})),br(Hn.prototype,(function(e,t){var n=Yn[t];if(n){var r=n.name+"";xe.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:t,func:n})}})),Dn[Ya(a,2).name]=[{name:"wrapper",func:a}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Pa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pa(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=$o(e),r=t<0,a=n?e.length:0,i=function(e,t,n){var r=-1,a=n.length;for(;++r<a;){var i=n[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Sn(t,e+o);break;case"takeRight":e=En(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,s=i.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,d=c.length,f=0,p=Sn(u,this.__takeCount__);if(!n||!r&&a==u&&p==u)return va(e,this.__actions__);var h=[];e:for(;u--&&f<p;){for(var _=-1,v=e[l+=t];++_<d;){var m=c[_],g=m.iteratee,y=m.type,E=g(v);if(2==y)v=E;else if(!E){if(1==y)continue e;break e}}h[f++]=v}return h},Yn.prototype.at=mo,Yn.prototype.chain=function(){return _o(this)},Yn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Yn.prototype.next=function(){this.__values__===a&&(this.__values__=_s(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Yn.prototype.plant=function(e){for(var t,n=this;n instanceof Wn;){var r=ji(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Yn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:vo,args:[no],thisArg:a}),new Vn(t,this.__chain__)}return this.thru(no)},Yn.prototype.toJSON=Yn.prototype.valueOf=Yn.prototype.value=function(){return va(this.__wrapped__,this.__actions__)},Yn.prototype.first=Yn.prototype.head,et&&(Yn.prototype[et]=function(){return this}),Yn}();pt._=mn,(r=function(){return mn}.call(t,n,t,e))===a||(e.exports=r)}.call(this)},86248:(e,t,n)=>{var r=n(60077).default,a=function(e){"use strict";var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),o=new M(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return k()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=A(o,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",_={};function v(){}function m(){}function g(){}var y={};y[o]=function(){return this};var E=Object.getPrototypeOf,S=E&&E(E(I([])));S&&S!==n&&a.call(S,o)&&(y=S);var b=g.prototype=v.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e,t){function n(r,i,o,s){var u=c(e[r],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var r;this._invoke=function(e,a){function i(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(i,i):i()}}function A(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var a=c(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,_;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:k}}function k(){return{value:t,done:!0}}return m.prototype=b.constructor=g,g.constructor=m,g[u]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},T(w.prototype),w.prototype[s]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,a,i,o){void 0===o&&(o=r);var s=new w(l(t,n,a,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(b),b[u]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=a}catch(e){Function("r","regeneratorRuntime = r")(a)}},23098:module=>{var e={},aa={},l;for(l in e)e.hasOwnProperty(l)&&(aa[l]=e[l]);function ba(e){eval.call(null,e)}for(l in e.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},"undefined"!=typeof arguments&&(e.arguments=arguments),"undefined"!=typeof console?(e.print||(e.print=function(e){console.log(e)}),e.printErr||(e.printErr=function(e){console.log(e)})):e.print||(e.print=function(){}),void 0===e.setWindowTitle&&(e.setWindowTitle=function(e){document.title=e}),!e.load&&e.read&&(e.load=function(t){ba(e.read(t))}),e.print||(e.print=function(){}),e.printErr||(e.printErr=e.print),e.arguments||(e.arguments=[]),e.thisProgram||(e.thisProgram="./this.program"),e.print=e.print,e.S=e.printErr,e.preRun=[],e.postRun=[],aa)aa.hasOwnProperty(l)&&(e[l]=aa[l]);var n={cb:function(e){ca=e},Ua:function(){return ca},na:function(){return m},X:function(e){m=e},Aa:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:return"*"===e[e.length-1]?n.H:"i"===e[0]?(assert(0==(e=parseInt(e.substr(1)))%8),e/8):0}},Ta:function(e){return Math.max(n.Aa(e),n.H)},dd:16,Bd:function(e,t){return"double"===t||"i64"===t?7&e&&(assert(4==(7&e)),e+=4):assert(0==(3&e)),e},od:function(e,t,r){return r||"i64"!=e&&"double"!=e?e?Math.min(t||(e?n.Ta(e):0),n.H):Math.min(t,8):8},J:function(t,n,r){return r&&r.length?(r.splice||(r=Array.prototype.slice.call(r)),r.splice(0,0,n),e["dynCall_"+t].apply(null,r)):e["dynCall_"+t].call(null,n)},U:[],Ma:function(e){for(var t=0;t<n.U.length;t++)if(!n.U[t])return n.U[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},$a:function(e){n.U[(e-2)/2]=null},M:function(t){n.M.ma||(n.M.ma={}),n.M.ma[t]||(n.M.ma[t]=1,e.S(t))},ha:{},rd:function(e,t){assert(t),n.ha[t]||(n.ha[t]={});var r=n.ha[t];return r[e]||(r[e]=function(){return n.J(t,e,arguments)}),r[e]},pd:function(){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},W:function(e){var t=m;return m=(m=m+e|0)+15&-16,t},Ia:function(e){var t=p;return p=(p=p+e|0)+15&-16,t},P:function(e){var t=v;return(e=(v=(v=v+e|0)+15&-16)>=w)&&(z("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+w+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 "),e=!0),e?(v=t,0):t},ea:function(e,t){return Math.ceil(e/(t||16))*(t||16)},xd:function(e,t,n){return n?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t)},La:8,H:4,ed:0};e.Runtime=n,n.addFunction=n.Ma,n.removeFunction=n.$a;var A=!1,da,fa,ca,ha,ia,buffer;function assert(e,t){e||z("Assertion failed: "+t)}function ga(a){var b=e["_"+a];if(!b)try{b=eval("_"+a)}catch(e){}return assert(b,"Cannot call unknown function "+a+" (perhaps LLVM optimizations or closure removed it?)"),b}function ma(e,t,n){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":D[e>>0]=t;break;case"i16":E[e>>1]=t;break;case"i32":F[e>>2]=t;break;case"i64":fa=[t>>>0,(da=t,1<=+na(da)?0<da?(0|oa(+pa(da/4294967296),4294967295))>>>0:~~+qa((da-+(~~da>>>0))/4294967296)>>>0:0)],F[e>>2]=fa[0],F[e+4>>2]=fa[1];break;case"float":ra[e>>2]=t;break;case"double":sa[e>>3]=t;break;default:z("invalid type for setValue: "+n)}}function ta(e,t){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return D[e>>0];case"i16":return E[e>>1];case"i32":case"i64":return F[e>>2];case"float":return ra[e>>2];case"double":return sa[e>>3];default:z("invalid type for setValue: "+t)}return null}function G(e,t,r,a){var i,o;"number"==typeof e?(i=!0,o=e):(i=!1,o=e.length);var s,u,l="string"==typeof t?t:null;if(r=4==r?a:[ua,n.W,n.Ia,n.P][void 0===r?2:r](Math.max(o,l?1:t.length)),i){for(a=r,assert(0==(3&r)),e=r+(-4&o);a<e;a+=4)F[a>>2]=0;for(e=r+o;a<e;)D[a++>>0]=0;return r}if("i8"===l)return e.subarray||e.slice?H.set(e,r):H.set(new Uint8Array(e),r),r;for(a=0;a<o;){var c=e[a];"function"==typeof c&&(c=n.sd(c)),0===(i=l||t[a])?a++:("i64"==i&&(i="i32"),ma(r+a,c,i),u!==i&&(s=n.Aa(i),u=i),a+=s)}return r}function la(t,n){if(0===n||!t)return"";for(var r,a=0,i=0;(a|=r=H[t+i>>0],0!=r||n)&&(i++,!n||i!=n););if(n||(n=i),r="",128>a){for(;0<n;)a=String.fromCharCode.apply(String,H.subarray(t,t+Math.min(n,1024))),r=r?r+a:a,t+=1024,n-=1024;return r}return e.UTF8ToString(t)}function za(e,t){for(var n,r,a,i,o,s="";;){if(!(n=e[t++]))return s;128&n?(r=63&e[t++],192==(224&n)?s+=String.fromCharCode((31&n)<<6|r):(a=63&e[t++],224==(240&n)?n=(15&n)<<12|r<<6|a:(i=63&e[t++],240==(248&n)?n=(7&n)<<18|r<<12|a<<6|i:(o=63&e[t++],248==(252&n)?n=(3&n)<<24|r<<18|a<<12|i<<6|o:n=(1&n)<<30|r<<24|a<<18|i<<12|o<<6|63&e[t++])),65536>n?s+=String.fromCharCode(n):(n-=65536,s+=String.fromCharCode(55296|n>>10,56320|1023&n)))):s+=String.fromCharCode(n)}}function Aa(e,t,n,r){if(!(0<r))return 0;var a=n;r=n+r-1;for(var i=0;i<e.length;++i){var o=e.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),127>=o){if(n>=r)break;t[n++]=o}else{if(2047>=o){if(n+1>=r)break;t[n++]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;t[n++]=224|o>>12}else{if(2097151>=o){if(n+3>=r)break;t[n++]=240|o>>18}else{if(67108863>=o){if(n+4>=r)break;t[n++]=248|o>>24}else{if(n+5>=r)break;t[n++]=252|o>>30,t[n++]=128|o>>24&63}t[n++]=128|o>>18&63}t[n++]=128|o>>12&63}t[n++]=128|o>>6&63}t[n++]=128|63&o}}return t[n]=0,n-a}function Ba(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),127>=r?++t:t=2047>=r?t+2:65535>=r?t+3:2097151>=r?t+4:67108863>=r?t+5:t+6}return t}function Ca(t){var r=!!e.___cxa_demangle;if(r)try{var a=ua(t.length);ka(t.substr(1),a);var i=ua(4),o=e.___cxa_demangle(a,0,0,i);if(0===ta(i,"i32")&&o)return la(o)}catch(e){}finally{a&&Da(a),i&&Da(i),o&&Da(o)}var s=3,u={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},l=[],c=!0;a=t;try{if("Object._main"==t||"_main"==t)return"main()";if("number"==typeof t&&(t=la(t)),"_"!==t[0]||"_"!==t[1]||"Z"!==t[2])return t;switch(t[3]){case"n":return"operator new()";case"d":return"operator delete()"}a=function e(n,r,a){r=r||1/0;var i,o="",d=[];if("N"===t[s]){for(s++,"K"===t[s]&&s++,i=[];"E"!==t[s];)if("S"===t[s]){s++;var f=t.indexOf("_",s);i.push(l[t.substring(s,f)||0]||"?"),s=f+1}else if("C"===t[s])i.push(i[i.length-1]),s+=2;else{var p=(f=parseInt(t.substr(s))).toString().length;if(!f||!p){s--;break}var h=t.substr(s+p,f);i.push(h),l.push(h),s+=p+f}if(s++,i=i.join("::"),0==--r)return n?[i]:i}else("K"===t[s]||c&&"L"===t[s])&&s++,(f=parseInt(t.substr(s)))&&(p=f.toString().length,i=t.substr(s+p,f),s+=p+f);c=!1,"I"===t[s]?(s++,f=e(!0),o+=(p=e(!0,1,!0))[0]+" "+i+"<"+f.join(", ")+">"):o=i;e:for(;s<t.length&&0<r--;)if(i=t[s++],i in u)d.push(u[i]);else switch(i){case"P":d.push(e(!0,1,!0)[0]+"*");break;case"R":d.push(e(!0,1,!0)[0]+"&");break;case"L":s++,f=t.indexOf("E",s)-s,d.push(t.substr(s,f)),s+=f+2;break;case"A":if(f=parseInt(t.substr(s)),s+=f.toString().length,"_"!==t[s])throw"?";s++,d.push(e(!0,1,!0)[0]+" ["+f+"]");break;case"E":break e;default:o+="?"+i;break e}return a||1!==d.length||"void"!==d[0]||(d=[]),n?(o&&d.push(o+"?"),d):o+"("+d.join(", ")+")"}()}catch(e){a+="?"}return 0<=a.indexOf("?")&&!r&&n.M("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),a}function Ea(){return Fa().replace(/__Z[\w\d_]+/g,(function(e){var t=Ca(e);return e===t?e:e+" ["+t+"]"}))}function Fa(){var e=Error();if(!e.stack){try{throw Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Ga(){var e=v;return 0<e%4096&&(e+=4096-e%4096),e}(function(){function a(e){return{arguments:(e=e.toString().match(d).slice(1))[0],body:e[1],returnValue:e[2]}}var b={stackSave:function(){n.na()},stackRestore:function(){n.X()},arrayToC:function(e){var t=n.W(e.length);return ja(e,t),t},stringToC:function(e){var t=0;return null!=e&&0!==e&&ka(e,t=n.W(1+(e.length<<2))),t}},c={string:b.stringToC,array:b.arrayToC};ia=function(e,t,r,a,i){e=ga(e);var o=[],s=0;if(a)for(var u=0;u<a.length;u++){var l=c[r[u]];l?(0===s&&(s=n.na()),o[u]=l(a[u])):o[u]=a[u]}if(r=e.apply(null,o),"string"===t&&(r=la(r)),0!==s){if(i&&i.async)return void EmterpreterAsync.hd.push((function(){n.X(s)}));n.X(s)}return r};var d=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/,f={},h;for(h in b)b.hasOwnProperty(h)&&(f[h]=a(b[h]));ha=function(b,c,d){d=d||[];var h=ga(b);b=d.every((function(e){return"number"===e}));var u="string"!==c;if(u&&b)return h;var q=d.map((function(e,t){return"$"+t}));c="(function("+q.join(",")+") {";var y=d.length;if(!b){c+="var stack = "+f.stackSave.body+";";for(var B=0;B<y;B++){var J=q[B],ea=d[B];"number"!==ea&&(ea=f[ea+"ToC"],c+="var "+ea.arguments+" = "+J+";",c+=ea.body+";",c+=J+"="+ea.returnValue+";")}}return d=a((function(){return h})).returnValue,c+="var ret = "+d+"("+q.join(",")+");",u||(d=a((function(){return la})).returnValue,c+="ret = "+d+"(ret);"),b||(c+=f.stackRestore.body.replace("()","(stack)")+";"),eval(c+"return ret})")}})(),e.ccall=ia,e.cwrap=ha,e.setValue=ma,e.getValue=ta,e.ALLOC_NORMAL=0,e.ALLOC_STACK=1,e.ALLOC_STATIC=2,e.ALLOC_DYNAMIC=3,e.ALLOC_NONE=4,e.allocate=G,e.getMemory=function(e){return va?void 0!==wa&&!wa.C||!xa?n.P(e):ua(e):n.Ia(e)},e.Pointer_stringify=la,e.AsciiToString=function(e){for(var t="";;){var n=D[e++>>0];if(!n)return t;t+=String.fromCharCode(n)}},e.stringToAscii=function(e,t){return ya(e,t,!1)},e.UTF8ArrayToString=za,e.UTF8ToString=function(e){return za(H,e)},e.stringToUTF8Array=Aa,e.stringToUTF8=function(e,t,n){return Aa(e,H,t,n)},e.lengthBytesUTF8=Ba,e.UTF16ToString=function(e){for(var t=0,n="";;){var r=E[e+2*t>>1];if(0==r)return n;++t,n+=String.fromCharCode(r)}},e.stringToUTF16=function(e,t,n){if(void 0===n&&(n=2147483647),2>n)return 0;var r=t;n=(n-=2)<2*e.length?n/2:e.length;for(var a=0;a<n;++a)E[t>>1]=e.charCodeAt(a),t+=2;return E[t>>1]=0,t-r},e.lengthBytesUTF16=function(e){return 2*e.length},e.UTF32ToString=function(e){for(var t=0,n="";;){var r=F[e+4*t>>2];if(0==r)return n;++t,65536<=r?(r-=65536,n+=String.fromCharCode(55296|r>>10,56320|1023&r)):n+=String.fromCharCode(r)}},e.stringToUTF32=function(e,t,n){if(void 0===n&&(n=2147483647),4>n)return 0;var r=t;n=r+n-4;for(var a=0;a<e.length;++a){if(55296<=(i=e.charCodeAt(a))&&57343>=i)var i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a);if(F[t>>2]=i,(t+=4)+4>n)break}return F[t>>2]=0,t-r},e.lengthBytesUTF32=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t},e.stackTrace=function(){return Ea()};for(var D,H,E,Ha,F,Ia,ra,sa,Ja=0,p=0,va=!1,Ka=0,m=0,La=0,Ma=0,v=0,Na=e.TOTAL_STACK||5242880,w=e.TOTAL_MEMORY||16777216,I=65536;I<w||I<2*Na;)I=16777216>I?2*I:I+16777216;function Oa(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t();else{var r=t.Qa;"number"==typeof r?void 0===t.T?n.J("v",r):n.J("vi",r,[t.T]):r(void 0===t.T?null:t.T)}}}I!==w&&(w=I),assert("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support"),buffer=new ArrayBuffer(w),D=new Int8Array(buffer),E=new Int16Array(buffer),F=new Int32Array(buffer),H=new Uint8Array(buffer),Ha=new Uint16Array(buffer),Ia=new Uint32Array(buffer),ra=new Float32Array(buffer),sa=new Float64Array(buffer),F[0]=255,assert(255===H[0]&&0===H[3],"Typed arrays 2 must be run on a little-endian system"),e.HEAP=void 0,e.buffer=buffer,e.HEAP8=D,e.HEAP16=E,e.HEAP32=F,e.HEAPU8=H,e.HEAPU16=Ha,e.HEAPU32=Ia,e.HEAPF32=ra,e.HEAPF64=sa;var Pa=[],Qa=[],Ra=[],K=[],Sa=[],xa=!1;function Ta(e){Pa.unshift(e)}function Ua(e){Sa.unshift(e)}function Va(e,t,n){return e=Aa(e,n=Array(0<n?n:Ba(e)+1),0,n.length),t&&(n.length=e),n}function ka(e,t,n){for(e=Va(e,n),n=0;n<e.length;)D[t+n>>0]=e[n],n+=1}function ja(e,t){for(var n=0;n<e.length;n++)D[t++>>0]=e[n]}function ya(e,t,n){for(var r=0;r<e.length;++r)D[t++>>0]=e.charCodeAt(r);n||(D[t>>0]=0)}e.addOnPreRun=Ta,e.addOnInit=function(e){Qa.unshift(e)},e.addOnPreMain=function(e){Ra.unshift(e)},e.addOnExit=function(e){K.unshift(e)},e.addOnPostRun=Ua,e.intArrayFromString=Va,e.intArrayToString=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];255<r&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")},e.writeStringToMemory=ka,e.writeArrayToMemory=ja,e.writeAsciiToMemory=ya,Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16)|0}),Math.td=Math.imul,Math.clz32||(Math.clz32=function(e){e>>>=0;for(var t=0;32>t;t++)if(e&1<<31-t)return t;return 32}),Math.kd=Math.clz32;var na=Math.abs,qa=Math.ceil,pa=Math.floor,oa=Math.min,L=0,Wa=null,Xa=null;function Ya(){L++,e.monitorRunDependencies&&e.monitorRunDependencies(L)}function Za(){if(L--,e.monitorRunDependencies&&e.monitorRunDependencies(L),0==L&&(null!==Wa&&(clearInterval(Wa),Wa=null),Xa)){var t=Xa;Xa=null,t()}}e.addRunDependency=Ya,e.removeRunDependency=Za,e.preloadedImages={},e.preloadedAudios={},Ja=8,p=Ja+1696,Qa.push(),G([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,60,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,164,2,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",4,n.La);var $a=n.ea(G(12,"i8",2),8);function eb(e,t){K.push((function(){n.J("vi",e,[t])})),eb.level=K.length}assert(0==$a%8),e._bitshift64Ashr=ab,e._i64Subtract=bb,e._i64Add=cb,e._memset=db,e._bitshift64Lshr=fb,e._bitshift64Shl=gb;var M={G:1,B:2,Qc:3,Nb:4,F:5,sa:6,gb:7,kc:8,Z:9,ub:10,oa:11,$c:11,Ka:12,Y:13,Gb:14,wc:15,$:16,pa:17,ad:18,ba:19,qa:20,N:21,u:22,fc:23,Ja:24,O:25,Xc:26,Hb:27,sc:28,da:29,Nc:30,Zb:31,Gc:32,Db:33,Kc:34,oc:42,Kb:43,vb:44,Qb:45,Rb:46,Sb:47,Yb:48,Yc:49,ic:50,Pb:51,Ab:35,lc:37,mb:52,pb:53,bd:54,gc:55,qb:56,rb:57,Bb:35,sb:59,uc:60,jc:61,Uc:62,tc:63,pc:64,qc:65,Mc:66,mc:67,jb:68,Rc:69,wb:70,Hc:71,ac:72,Eb:73,ob:74,Bc:76,nb:77,Lc:78,Tb:79,Ub:80,Xb:81,Wb:82,Vb:83,vc:38,ra:39,bc:36,aa:40,Cc:95,Fc:96,zb:104,hc:105,kb:97,Jc:91,zc:88,rc:92,Oc:108,yb:111,hb:98,xb:103,ec:101,cc:100,Vc:110,Ib:112,Jb:113,Mb:115,lb:114,Cb:89,$b:90,Ic:93,Pc:94,ib:99,dc:102,Ob:106,xc:107,Wc:109,Zc:87,Fb:122,Sc:116,Ac:95,nc:123,Lb:84,Dc:75,tb:125,yc:131,Ec:130,Tc:86},hb={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"};function ib(t){return e.___errno_location&&(F[e.___errno_location()>>2]=t),t}function jb(e,t){for(var n=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function N(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=jb(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function kb(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function lb(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)}function mb(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=jb(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}var nb=[];function ob(e,t){nb[e]={input:[],output:[],L:t},pb(e,qb)}var qb={open:function(e){var t=nb[e.g.rdev];if(!t)throw new O(M.ba);e.tty=t,e.seekable=!1},close:function(e){e.tty.L.flush(e.tty)},flush:function(e){e.tty.L.flush(e.tty)},read:function(e,t,n,r){if(!e.tty||!e.tty.L.Ba)throw new O(M.sa);for(var a=0,i=0;i<r;i++){var o;try{o=e.tty.L.Ba(e.tty)}catch(e){throw new O(M.F)}if(void 0===o&&0===a)throw new O(M.oa);if(null==o)break;a++,t[n+i]=o}return a&&(e.g.timestamp=Date.now()),a},write:function(e,t,n,r){if(!e.tty||!e.tty.L.ja)throw new O(M.sa);for(var a=0;a<r;a++)try{e.tty.L.ja(e.tty,t[n+a])}catch(e){throw new O(M.F)}return r&&(e.g.timestamp=Date.now()),a}},rb={Ba:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&(null!==(t=readline())&&(t+="\n")),!t)return null;e.input=Va(t,!0)}return e.input.shift()},ja:function(t,n){null===n||10===n?(e.print(za(t.output,0)),t.output=[]):0!=n&&t.output.push(n)},flush:function(t){t.output&&0<t.output.length&&(e.print(za(t.output,0)),t.output=[])}},sb={ja:function(t,n){null===n||10===n?(e.printErr(za(t.output,0)),t.output=[]):0!=n&&t.output.push(n)},flush:function(t){t.output&&0<t.output.length&&(e.printErr(za(t.output,0)),t.output=[])}},P={q:null,A:function(){return P.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new O(M.G);return P.q||(P.q={dir:{g:{D:P.k.D,p:P.k.p,lookup:P.k.lookup,V:P.k.V,rename:P.k.rename,unlink:P.k.unlink,rmdir:P.k.rmdir,readdir:P.k.readdir,symlink:P.k.symlink},stream:{I:P.n.I}},file:{g:{D:P.k.D,p:P.k.p},stream:{I:P.n.I,read:P.n.read,write:P.n.write,ta:P.n.ta,Ea:P.n.Ea,Ga:P.n.Ga}},link:{g:{D:P.k.D,p:P.k.p,readlink:P.k.readlink},stream:{}},va:{g:{D:P.k.D,p:P.k.p},stream:tb}}),16384==(61440&(n=ub(e,t,n,r)).mode)?(n.k=P.q.dir.g,n.n=P.q.dir.stream,n.e={}):32768==(61440&n.mode)?(n.k=P.q.file.g,n.n=P.q.file.stream,n.o=0,n.e=null):40960==(61440&n.mode)?(n.k=P.q.link.g,n.n=P.q.link.stream):8192==(61440&n.mode)&&(n.k=P.q.va.g,n.n=P.q.va.stream),n.timestamp=Date.now(),e&&(e.e[t]=n),n},Sa:function(e){if(e.e&&e.e.subarray){for(var t=[],n=0;n<e.o;++n)t.push(e.e[n]);return t}return e.e},qd:function(e){return e.e?e.e.subarray?e.e.subarray(0,e.o):new Uint8Array(e.e):new Uint8Array},ya:function(e,t){if(e.e&&e.e.subarray&&t>e.e.length&&(e.e=P.Sa(e),e.o=e.e.length),!e.e||e.e.subarray){var n=e.e?e.e.buffer.byteLength:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)|0),0!=n&&(t=Math.max(t,256)),n=e.e,e.e=new Uint8Array(t),0<e.o&&e.e.set(n.subarray(0,e.o),0))}else for(!e.e&&0<t&&(e.e=[]);e.e.length<t;)e.e.push(0)},ab:function(e,t){if(e.o!=t)if(0==t)e.e=null,e.o=0;else{if(!e.e||e.e.subarray){var n=e.e;e.e=new Uint8Array(new ArrayBuffer(t)),n&&e.e.set(n.subarray(0,Math.min(t,e.o)))}else if(e.e||(e.e=[]),e.e.length>t)e.e.length=t;else for(;e.e.length<t;)e.e.push(0);e.o=t}},k:{D:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.o:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Pa=4096,t.blocks=Math.ceil(t.size/t.Pa),t},p:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&P.ab(e,t.size)},lookup:function(){throw vb[M.B]},V:function(e,t,n,r){return P.createNode(e,t,n,r)},rename:function(e,t,n){if(16384==(61440&e.mode)){var r;try{r=wb(t,n)}catch(e){}if(r)for(var a in r.e)throw new O(M.ra)}delete e.parent.e[e.name],e.name=n,t.e[n]=e,e.parent=t},unlink:function(e,t){delete e.e[t]},rmdir:function(e,t){var n,r=wb(e,t);for(n in r.e)throw new O(M.ra);delete e.e[t]},readdir:function(e){var t,n=[".",".."];for(t in e.e)e.e.hasOwnProperty(t)&&n.push(t);return n},symlink:function(e,t,n){return(e=P.createNode(e,t,41471,0)).link=n,e},readlink:function(e){if(40960!=(61440&e.mode))throw new O(M.u);return e.link}},n:{read:function(e,t,n,r,a){var i=e.g.e;if(a>=e.g.o)return 0;if(assert(0<=(e=Math.min(e.g.o-a,r))),8<e&&i.subarray)t.set(i.subarray(a,a+e),n);else for(r=0;r<e;r++)t[n+r]=i[a+r];return e},write:function(e,t,n,r,a,i){if(!r)return 0;if((e=e.g).timestamp=Date.now(),t.subarray&&(!e.e||e.e.subarray)){if(i)return e.e=t.subarray(n,n+r),e.o=r;if(0===e.o&&0===a)return e.e=new Uint8Array(t.subarray(n,n+r)),e.o=r;if(a+r<=e.o)return e.e.set(t.subarray(n,n+r),a),r}if(P.ya(e,a+r),e.e.subarray&&t.subarray)e.e.set(t.subarray(n,n+r),a);else for(i=0;i<r;i++)e.e[a+i]=t[n+i];return e.o=Math.max(e.o,a+r),r},I:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.g.mode)&&(t+=e.g.o),0>t)throw new O(M.u);return t},ta:function(e,t,n){P.ya(e.g,t+n),e.g.o=Math.max(e.g.o,t+n)},Ea:function(e,t,n,r,a,i,o){if(32768!=(61440&e.g.mode))throw new O(M.ba);if(n=e.g.e,2&o||n.buffer!==t&&n.buffer!==t.buffer){if((0<a||a+r<e.g.o)&&(n=n.subarray?n.subarray(a,a+r):Array.prototype.slice.call(n,a,a+r)),e=!0,!(r=ua(r)))throw new O(M.Ka);t.set(n,r)}else e=!1,r=n.byteOffset;return{Cd:r,gd:e}},Ga:function(e,t,n,r,a){if(32768!=(61440&e.g.mode))throw new O(M.ba);return 2&a||P.n.write(e,t,0,r,n,!1),0}}};G(1,"i32*",2),G(1,"i32*",2),G(1,"i32*",2);var xb=null,yb=[null],zb=[],Ab=1,R=null,Cb=!0,S={},O=null,vb={};function T(e,t){if(t=t||{},!(e=mb("/",e)))return{path:"",g:null};var n,r={za:!0,ka:0};for(n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.ka)throw new O(M.aa);r=jb(e.split("/").filter((function(e){return!!e})),!1);var a=xb;n="/";for(var i=0;i<r.length;i++){var o=i===r.length-1;if(o&&t.parent)break;if(a=wb(a,r[i]),n=N(n+"/"+r[i]),a.R&&(!o||o&&t.za)&&(a=a.R.root),!o||t.ga)for(o=0;40960==(61440&a.mode);)if(a=Db(n),a=T(n=mb(kb(n),a),{ka:t.ka}).g,40<o++)throw new O(M.aa)}return{path:n,g:a}}function U(e){for(var t;;){if(e===e.parent)return e=e.A.Fa,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function Eb(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%R.length}function Fb(e){var t=Eb(e.parent.id,e.name);e.K=R[t],R[t]=e}function wb(e,t){var n;if(n=(n=Gb(e,"x"))?n:e.k.lookup?0:M.Y)throw new O(n,e);for(n=R[Eb(e.id,t)];n;n=n.K){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.k.lookup(e,t)}function ub(e,t,n,r){return Hb||((Hb=function(e,t,n,r){e||(e=this),this.parent=e,this.A=e.A,this.R=null,this.id=Ab++,this.name=t,this.mode=n,this.k={},this.n={},this.rdev=r}).prototype={},Object.defineProperties(Hb.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},Xa:{get:function(){return 16384==(61440&this.mode)}},Ca:{get:function(){return 8192==(61440&this.mode)}}})),Fb(e=new Hb(e,t,n,r)),e}var Ib={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Gb(e,t){return Cb||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:M.Y}function Jb(e,t){try{return wb(e,t),M.pa}catch(e){}return Gb(e,"wx")}function Kb(){for(var e=0;e<=4096;e++)if(!zb[e])return e;throw new O(M.Ja)}function Lb(e){Mb||((Mb=function(){}).prototype={},Object.defineProperties(Mb.prototype,{object:{get:function(){return this.g},set:function(e){this.g=e}},vd:{get:function(){return 1!=(2097155&this.flags)}},wd:{get:function(){return 0!=(2097155&this.flags)}},ud:{get:function(){return 1024&this.flags}}}));var t,n=new Mb;for(t in e)n[t]=e[t];return e=n,n=Kb(),e.fd=n,zb[n]=e}var tb={open:function(e){e.n=yb[e.g.rdev].n,e.n.open&&e.n.open(e)},I:function(){throw new O(M.da)}},Zb;function pb(e,t){yb[e]={n:t}}function Nb(e,t){var n,r="/"===t,a=!t;if(r&&xb)throw new O(M.$);if(!r&&!a){if(t=(n=T(t,{za:!1})).path,(n=n.g).R)throw new O(M.$);if(16384!=(61440&n.mode))throw new O(M.qa)}a={type:e,Ad:{},Fa:t,Ya:[]};var i=e.A(a);i.A=a,a.root=i,r?xb=i:n&&(n.R=a,n.A&&n.A.Ya.push(a))}function Ob(e,t,n){var r=T(e,{parent:!0}).g;if(!(e=lb(e))||"."===e||".."===e)throw new O(M.u);var a=Jb(r,e);if(a)throw new O(a);if(!r.k.V)throw new O(M.G);return r.k.V(r,e,t,n)}function Pb(e,t){return t=4095&(void 0!==t?t:438),Ob(e,t|=32768,0)}function V(e,t){return t=1023&(void 0!==t?t:511),Ob(e,t|=16384,0)}function Qb(e,t,n){return void 0===n&&(n=t,t=438),Ob(e,8192|t,n)}function Rb(e,t){if(!mb(e))throw new O(M.B);var n=T(t,{parent:!0}).g;if(!n)throw new O(M.B);var r=lb(t),a=Jb(n,r);if(a)throw new O(a);if(!n.k.symlink)throw new O(M.G);return n.k.symlink(n,r,e)}function Db(e){if(!(e=T(e).g))throw new O(M.B);if(!e.k.readlink)throw new O(M.u);return mb(U(e.parent),e.k.readlink(e))}function Sb(e,t){var n;if(!(n="string"==typeof e?T(e,{ga:!0}).g:e).k.p)throw new O(M.G);n.k.p(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})}function Tb(t,n){var r,a,i;if(""===t)throw new O(M.B);if("string"==typeof n){if(void 0===(a=Ib[n]))throw Error("Unknown file open mode: "+n)}else a=n;if(r=64&(n=a)?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)i=t;else{t=N(t);try{i=T(t,{ga:!(131072&n)}).g}catch(e){}}if(a=!1,64&n)if(i){if(128&n)throw new O(M.pa)}else i=Ob(t,r,0),a=!0;if(!i)throw new O(M.B);if(8192==(61440&i.mode)&&(n&=-513),65536&n&&16384!=(61440&i.mode))throw new O(M.qa);if(!a&&(i?40960==(61440&i.mode)?r=M.aa:16384==(61440&i.mode)&&(0!=(2097155&n)||512&n)?r=M.N:(r=["r","w","rw"][3&n],512&n&&(r+="w"),r=Gb(i,r)):r=M.B,r))throw new O(r);if(512&n){var o;if(!(o="string"==typeof(r=i)?T(r,{ga:!0}).g:r).k.p)throw new O(M.G);if(16384==(61440&o.mode))throw new O(M.N);if(32768!=(61440&o.mode))throw new O(M.u);if(r=Gb(o,"w"))throw new O(r);o.k.p(o,{size:0,timestamp:Date.now()})}n&=-641,(i=Lb({g:i,path:U(i),flags:n,seekable:!0,position:0,n:i.n,eb:[],error:!1})).n.open&&i.n.open(i),!e.logReadFiles||1&n||(Ub||(Ub={}),t in Ub||(Ub[t]=1,e.printErr("read file: "+t)));try{S.onOpenFile&&(o=0,1!=(2097155&n)&&(o|=1),0!=(2097155&n)&&(o|=2),S.onOpenFile(t,o))}catch(e){console.log("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return i}function Vb(e){e.ia&&(e.ia=null);try{e.n.close&&e.n.close(e)}catch(e){throw e}finally{zb[e.fd]=null}}function Wb(e,t,n){if(!e.seekable||!e.n.I)throw new O(M.da);e.position=e.n.I(e,t,n),e.eb=[]}function Xb(e,t,n,r,a,i){if(0>r||0>a)throw new O(M.u);if(0==(2097155&e.flags))throw new O(M.Z);if(16384==(61440&e.g.mode))throw new O(M.N);if(!e.n.write)throw new O(M.u);1024&e.flags&&Wb(e,0,2);var o=!0;if(void 0===a)a=e.position,o=!1;else if(!e.seekable)throw new O(M.da);t=e.n.write(e,t,n,r,a,i),o||(e.position+=t);try{e.path&&S.onWriteToFile&&S.onWriteToFile(e.path)}catch(e){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+e.message)}return t}function Yb(){O||((O=function(e,t){this.g=t,this.bb=function(e){for(var t in this.Q=e,M)if(M[t]===e){this.code=t;break}},this.bb(e),this.message=hb[e]}).prototype=Error(),O.prototype.constructor=O,[M.B].forEach((function(e){vb[e]=new O(e),vb[e].stack="<generic error, no stack>"})))}function $b(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}function ac(e,t,n,r){return Pb(e=N(("string"==typeof e?e:U(e))+"/"+t),$b(n,r))}function bc(e,t,n,r,a,i){if(a=Pb(e=t?N(("string"==typeof e?e:U(e))+"/"+t):e,r=$b(r,a)),n){if("string"==typeof n){e=Array(n.length),t=0;for(var o=n.length;t<o;++t)e[t]=n.charCodeAt(t);n=e}Sb(a,146|r),Xb(e=Tb(a,"w"),n,0,n.length,0,i),Vb(e),Sb(a,r)}return a}function W(e,t,n,r){e=N(("string"==typeof e?e:U(e))+"/"+t),t=$b(!!n,!!r),W.Da||(W.Da=64);var a=W.Da++<<8|0;return pb(a,{open:function(e){e.seekable=!1},close:function(){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,a){for(var i=0,o=0;o<a;o++){var s;try{s=n()}catch(e){throw new O(M.F)}if(void 0===s&&0===i)throw new O(M.oa);if(null==s)break;i++,t[r+o]=s}return i&&(e.g.timestamp=Date.now()),i},write:function(e,t,n,a){for(var i=0;i<a;i++)try{r(t[n+i])}catch(e){throw new O(M.F)}return a&&(e.g.timestamp=Date.now()),i}}),Qb(e,t,a)}function cc(t){if(t.Ca||t.Xa||t.link||t.e)return!0;var n=!0;if("undefined"!=typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!e.read)throw Error("Cannot load without read() or XMLHttpRequest.");try{t.e=Va(e.read(t.url),!0),t.o=t.e.length}catch(e){n=!1}return n||ib(M.F),n}var dc={},Hb,Mb,Ub,ec=0;function X(){return F[(ec+=4)-4>>2]}function fc(){var e;if(e=X(),!(e=zb[e]))throw new O(M.Z);return e}function wa(e){wa.C||(v=Ga(),wa.C=!0,assert(n.P),wa.Ra=n.P,n.P=function(){z("cannot dynamically allocate, sbrk now has control")});var t=v;return 0==e||wa.Ra(e)?t:4294967295}function hc(e,t){if(ic=e,jc=t,!kc)return 1;if(0==e)Y=function(){setTimeout(lc,t)},mc="timeout";else if(1==e)Y=function(){nc(lc)},mc="rAF";else if(2==e){if(!window.setImmediate){var n=[];window.addEventListener("message",(function(e){e.source===window&&"__emcc"===e.data&&(e.stopPropagation(),n.shift()())}),!0),window.setImmediate=function(e){n.push(e),window.postMessage("__emcc","*")}}Y=function(){window.setImmediate(lc)},mc="immediate"}return 0}function oc(t,r,a,i,o){e.noExitRuntime=!0,assert(!kc,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),kc=t,pc=i;var s=qc;if(lc=function(){if(!A)if(0<rc.length){var r=Date.now(),a=rc.shift();if(a.Qa(a.T),sc){var o=sc,u=0==o%1?o-1:Math.floor(o);sc=a.ld?u:(8*o+(u+.5))/9}console.log('main loop blocker "'+a.name+'" took '+(Date.now()-r)+" ms"),tc(),setTimeout(lc,0)}else s<qc||(uc=uc+1|0,1==ic&&1<jc&&0!=uc%jc?Y():("timeout"===mc&&e.fa&&(e.S("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),mc=""),vc((function(){void 0!==i?n.J("vi",t,[i]):n.J("v",t)})),s<qc||("object"==typeof SDL&&SDL.audio&&SDL.audio.Za&&SDL.audio.Za(),Y())))},o||(r&&0<r?hc(0,1e3/r):hc(1,1),Y()),a)throw"SimulateInfiniteLoop"}e._memcpy=gc;var Y=null,mc="",qc=0,kc=null,pc=0,ic=0,jc=0,uc=0,rc=[];function tc(){if(e.setStatus){var t=e.statusMessage||"Please wait...",n=sc,r=wc.nd;n?n<r?e.setStatus(t+" ("+(r-n)+"/"+r+")"):e.setStatus(t):e.setStatus("")}}function vc(t){if(!(A||e.preMainLoop&&!1===e.preMainLoop())){try{t()}catch(t){if(t instanceof xc)return;throw t&&"object"==typeof t&&t.stack&&e.S("exception thrown: "+[t,t.stack]),t}e.postMainLoop&&e.postMainLoop()}}var wc={},lc,sc,yc=!1,zc=!1,Ac=[];function Bc(){function t(){zc=document.pointerLockElement===r||document.mozPointerLockElement===r||document.webkitPointerLockElement===r||document.msPointerLockElement===r}if(e.preloadPlugins||(e.preloadPlugins=[]),!Cc){Cc=!0;try{Dc=!0}catch(e){Dc=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Ec="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Dc?null:console.log("warning: no BlobBuilder"),Fc="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,e.Ha||void 0!==Fc||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.Ha=!0),e.preloadPlugins.push({canHandle:function(t){return!e.Ha&&/\.(jpg|jpeg|png|bmp)$/i.test(t)},handle:function(t,r,a,i){var o=null;if(Dc)try{(o=new Blob([t],{type:Gc(r)})).size!==t.length&&(o=new Blob([new Uint8Array(t).buffer],{type:Gc(r)}))}catch(e){n.M("Blob constructor present but fails: "+e+"; falling back to blob builder")}o||((o=new Ec).append(new Uint8Array(t).buffer),o=o.getBlob());var s=Fc.createObjectURL(o),u=new Image;u.onload=function(){assert(u.complete,"Image "+r+" could not be decoded");var n=document.createElement("canvas");n.width=u.width,n.height=u.height,n.getContext("2d").drawImage(u,0,0),e.preloadedImages[r]=n,Fc.revokeObjectURL(s),a&&a(t)},u.onerror=function(){console.log("Image "+s+" could not be decoded"),i&&i()},u.src=s}}),e.preloadPlugins.push({canHandle:function(t){return!e.zd&&t.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(t,n,r,a){function i(a){s||(s=!0,e.preloadedAudios[n]=a,r&&r(t))}function o(){s||(s=!0,e.preloadedAudios[n]=new Audio,a&&a())}var s=!1;if(!Dc)return o();try{var u=new Blob([t],{type:Gc(n)})}catch(e){return o()}u=Fc.createObjectURL(u);var l=new Audio;l.addEventListener("canplaythrough",(function(){i(l)}),!1),l.onerror=function(){if(!s){console.log("warning: browser could not fully decode audio "+n+", trying slower base64 approach");for(var e="",r=0,a=0,o=0;o<t.length;o++)for(r=r<<8|t[o],a+=8;6<=a;){var u=r>>a-6&63;a=a-6,e=e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[u]}2==a?(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&r)<<4],e+="=="):4==a&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&r)<<2],e+="="),l.src="data:audio/x-"+n.substr(-3)+";base64,"+e,i(l)}},l.src=u,Hc((function(){i(l)}))}});var r=e.canvas;r&&(r.la=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock||r.msRequestPointerLock||function(){},r.wa=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},r.wa=r.wa.bind(document),document.addEventListener("pointerlockchange",t,!1),document.addEventListener("mozpointerlockchange",t,!1),document.addEventListener("webkitpointerlockchange",t,!1),document.addEventListener("mspointerlockchange",t,!1),e.elementPointerLock&&r.addEventListener("click",(function(e){!zc&&r.la&&(r.la(),e.preventDefault())}),!1))}}function Ic(t,n,r,a){if(n&&e.fa&&t==e.canvas)return e.fa;var i,o;if(n){if(o={antialias:!1,alpha:!1},a)for(var s in a)o[s]=a[s];(o=GL.createContext(t,o))&&(i=GL.getContext(o).cd),t.style.backgroundColor="black"}else i=t.getContext("2d");return i?(r&&(n||assert("undefined"==typeof GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.fa=i,n&&GL.yd(o),e.Dd=n,Ac.forEach((function(e){e()})),Bc()),i):null}var Jc=!1,Kc=void 0,Lc=void 0;function Mc(t,n,r){function a(){yc=!1;var t=i.parentNode;(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===t?(i.ua=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen||document.exitFullscreen||function(){},i.ua=i.ua.bind(document),Kc&&i.la(),yc=!0,Lc&&Nc()):(t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t),Lc&&Oc()),e.onFullScreen&&e.onFullScreen(yc),Pc(i)}void 0===(Kc=t)&&(Kc=!0),void 0===(Lc=n)&&(Lc=!1),void 0===(Qc=r)&&(Qc=null);var i=e.canvas;Jc||(Jc=!0,document.addEventListener("fullscreenchange",a,!1),document.addEventListener("mozfullscreenchange",a,!1),document.addEventListener("webkitfullscreenchange",a,!1),document.addEventListener("MSFullscreenChange",a,!1));var o=document.createElement("div");i.parentNode.insertBefore(o,i),o.appendChild(i),o.C=o.requestFullScreen||o.mozRequestFullScreen||o.msRequestFullscreen||(o.webkitRequestFullScreen?function(){o.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),r?o.C({Ed:r}):o.C()}var Rc=0;function Sc(e){var t=Date.now();if(0===Rc)Rc=t+1e3/60;else for(;t+2>=Rc;)Rc+=1e3/60;t=Math.max(Rc-t,0),setTimeout(e,t)}function nc(e){"undefined"==typeof window?Sc(e):(window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||Sc),window.requestAnimationFrame(e))}function Hc(t){e.noExitRuntime=!0,setTimeout((function(){A||t()}),1e4)}function Gc(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]}function Tc(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}function Uc(e,t,n){Tc(e,(function(n){assert(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),Za()}),(function(){if(!n)throw'Loading data file "'+e+'" failed.';n()})),Ya()}var Vc=[],Cc,Dc,Ec,Fc,Qc;function Wc(){var t=e.canvas;Vc.forEach((function(e){e(t.width,t.height)}))}function Nc(){if("undefined"!=typeof SDL){var e=Ia[SDL.screen+0*n.H>>2];F[SDL.screen+0*n.H>>2]=8388608|e}Wc()}function Oc(){if("undefined"!=typeof SDL){var e=Ia[SDL.screen+0*n.H>>2];F[SDL.screen+0*n.H>>2]=-8388609&e}Wc()}function Pc(t,n,r){n&&r?(t.fb=n,t.Va=r):(n=t.fb,r=t.Va);var a=n,i=r;if(e.forcedAspectRatio&&0<e.forcedAspectRatio&&(a/i<e.forcedAspectRatio?a=Math.round(i*e.forcedAspectRatio):i=Math.round(a/e.forcedAspectRatio)),(document.webkitFullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.mozFullscreenElement||document.fullScreenElement||document.fullscreenElement||document.msFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement)===t.parentNode&&"undefined"!=typeof screen){var o=Math.min(screen.width/a,screen.height/i);a=Math.round(a*o),i=Math.round(i*o)}Lc?(t.width!=a&&(t.width=a),t.height!=i&&(t.height=i),void 0!==t.style&&(t.style.removeProperty("width"),t.style.removeProperty("height"))):(t.width!=n&&(t.width=n),t.height!=r&&(t.height=r),void 0!==t.style&&(a!=n||i!=r?(t.style.setProperty("width",a+"px","important"),t.style.setProperty("height",i+"px","important")):(t.style.removeProperty("width"),t.style.removeProperty("height"))))}Yb(),R=Array(4096),Nb(P,"/"),V("/tmp"),V("/home"),V("/home/web_user"),function(){var e;if(V("/dev"),pb(259,{read:function(){return 0},write:function(e,t,n,r){return r}}),Qb("/dev/null",259),ob(1280,rb),ob(1536,sb),Qb("/dev/tty",1280),Qb("/dev/tty1",1536),"undefined"!=typeof crypto){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else e=function(){return 256*Math.random()|0};W("/dev","random",e),W("/dev","urandom",e),V("/dev/shm"),V("/dev/shm/tmp")}(),V("/proc"),V("/proc/self"),V("/proc/self/fd"),Nb({A:function(){var e=ub("/proc/self","fd",16895,73);return e.k={lookup:function(e,t){var n=zb[+t];if(!n)throw new O(M.Z);var r={parent:null,A:{Fa:"fake"},k:{readlink:function(){return n.path}}};return r.parent=r}},e}},"/proc/self/fd"),Qa.unshift((function(){if(!e.noFSInit&&!Zb){assert(!Zb,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Zb=!0,Yb(),e.stdin=e.stdin,e.stdout=e.stdout,e.stderr=e.stderr,e.stdin?W("/dev","stdin",e.stdin):Rb("/dev/tty","/dev/stdin"),e.stdout?W("/dev","stdout",null,e.stdout):Rb("/dev/tty","/dev/stdout"),e.stderr?W("/dev","stderr",null,e.stderr):Rb("/dev/tty1","/dev/stderr");var t=Tb("/dev/stdin","r");assert(0===t.fd,"invalid handle for stdin ("+t.fd+")"),assert(1===(t=Tb("/dev/stdout","w")).fd,"invalid handle for stdout ("+t.fd+")"),assert(2===(t=Tb("/dev/stderr","w")).fd,"invalid handle for stderr ("+t.fd+")")}})),Ra.push((function(){Cb=!1})),K.push((function(){Zb=!1;var t=e._fflush;for(t&&t(0),t=0;t<zb.length;t++){var n=zb[t];n&&Vb(n)}})),e.FS_createFolder=function(e,t,n,r){return V(e=N(("string"==typeof e?e:U(e))+"/"+t),$b(n,r))},e.FS_createPath=function(e,t){e="string"==typeof e?e:U(e);for(var n=t.split("/").reverse();n.length;){var r=n.pop();if(r){var a=N(e+"/"+r);try{V(a)}catch(e){}e=a}}return a},e.FS_createDataFile=bc,e.FS_createPreloadedFile=function(t,n,r,a,i,o,s,u,l,c){function d(r){function d(e){c&&c(),u||bc(t,n,e,a,i,l),o&&o(),Za()}var p=!1;e.preloadPlugins.forEach((function(e){!p&&e.canHandle(f)&&(e.handle(r,f,d,(function(){s&&s(),Za()})),p=!0)})),p||d(r)}Bc();var f=n?mb(N(t+"/"+n)):t;Ya(),"string"==typeof r?Uc(r,(function(e){d(e)}),s):d(r)},e.FS_createLazyFile=function(e,t,n,r,a){if("undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";n={Ca:!1,url:n};var i=ac(e,t,r,a);n.e?i.e=n.e:n.url&&(i.e=null,i.url=n.url),Object.defineProperty(i,"usedBytes",{get:function(){return this.e.length}});var o={};return Object.keys(i.n).forEach((function(e){var t=i.n[e];o[e]=function(){if(!cc(i))throw new O(M.F);return t.apply(null,arguments)}})),o.read=function(e,t,n,r,a){if(!cc(i))throw new O(M.F);if(a>=(e=e.g.e).length)return 0;if(assert(0<=(r=Math.min(e.length-a,r))),e.slice)for(var o=0;o<r;o++)t[n+o]=e[a+o];else for(o=0;o<r;o++)t[n+o]=e.get(a+o);return r},i.n=o,i},e.FS_createLink=function(e,t,n){return Rb(n,e=N(("string"==typeof e?e:U(e))+"/"+t))},e.FS_createDevice=W,e.FS_unlink=function(e){var t,n=T(e,{parent:!0}).g,r=lb(e),a=wb(n,r);e:{try{t=wb(n,r)}catch(e){t=e.Q;break e}var i=Gb(n,"wx");t=i||(16384==(61440&t.mode)?M.N:0)}if(t)throw t===M.N&&(t=M.G),new O(t);if(!n.k.unlink)throw new O(M.G);if(a.R)throw new O(M.$);try{S.willDeletePath&&S.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}if(n.k.unlink(n,r),n=Eb(a.parent.id,a.name),R[n]===a)R[n]=a.K;else for(n=R[n];n;){if(n.K===a){n.K=a.K;break}n=n.K}try{S.onDeletePath&&S.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},Qa.unshift((function(){})),K.push((function(){})),e.requestFullScreen=function(e,t,n){Mc(e,t,n)},e.requestAnimationFrame=function(e){nc(e)},e.setCanvasSize=function(t,n,r){Pc(e.canvas,t,n),r||Wc()},e.pauseMainLoop=function(){Y=null,qc++},e.resumeMainLoop=function(){qc++;var e=ic,t=jc,n=kc;kc=null,oc(n,0,!1,pc,!0),hc(e,t),Y()},e.getUserMedia=function(){window.C||(window.C=navigator.getUserMedia||navigator.mozGetUserMedia),window.C(void 0)},e.createContext=function(e,t,n,r){return Ic(e,t,n,r)},Ka=m=n.ea(p),va=!0,La=Ka+Na,Ma=v=n.ea(La),assert(Ma<w,"TOTAL_MEMORY not big enough for stack");var Xc=G([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",3);e.Na={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},e.Oa={abort:z,assert,invoke_ii:function(t,n){try{return e.dynCall_ii(t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Z.setThrew(1,0)}},invoke_iiii:function(t,n,r,a){try{return e.dynCall_iiii(t,n,r,a)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Z.setThrew(1,0)}},invoke_vi:function(t,n){try{e.dynCall_vi(t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Z.setThrew(1,0)}},_pthread_cleanup_pop:function(){assert(eb.level==K.length,"cannot pop if something else added meanwhile!"),K.pop(),eb.level=K.length},___lock:function(){},_emscripten_set_main_loop:oc,_pthread_self:function(){return 0},___syscall6:function(e,t){ec=t;try{return Vb(fc()),0}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},_emscripten_set_main_loop_timing:hc,_abort:function(){e.abort()},_sbrk:wa,_time:function(e){var t=Date.now()/1e3|0;return e&&(F[e>>2]=t),t},___setErrNo:ib,_emscripten_memcpy_big:function(e,t,n){return H.set(H.subarray(t,t+n),e),e},___syscall54:function(e,t){ec=t;try{var n=fc(),r=X();switch(r){case 21505:case 21506:return n.tty?0:-M.O;case 21519:if(!n.tty)return-M.O;var a=X();return F[a>>2]=0;case 21520:return n.tty?-M.u:-M.O;case 21531:if(a=X(),!n.n.Wa)throw new O(M.O);return n.n.Wa(n,r,a);default:z("bad ioctl syscall "+r)}}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},___unlock:function(){},___syscall140:function(e,t){ec=t;try{var n=fc(),r=X(),a=X(),i=X(),o=X();return assert(0===r),Wb(n,a,o),F[i>>2]=n.position,n.ia&&0===a&&0===o&&(n.ia=null),0}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},_pthread_cleanup_push:eb,_sysconf:function(e){switch(e){case 30:return 4096;case 85:return I/4096;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return ib(M.u),-1},___syscall146:function(e,t){ec=t;try{var n,r=fc(),a=X();e:{for(var i=X(),o=0,s=0;s<i;s++){var u=Xb(r,D,F[a+8*s>>2],F[a+(8*s+4)>>2],void 0);if(0>u){n=-1;break e}o+=u}n=o}return n}catch(e){return void 0!==dc&&e instanceof O||z(e),-e.Q}},STACKTOP:m,STACK_MAX:La,tempDoublePtr:$a,ABORT:A,cttz_i8:Xc};var Z=function(e,t,n){var r=new e.Int8Array(n),a=(new e.Int16Array(n),new e.Int32Array(n)),i=new e.Uint8Array(n),o=(new e.Uint16Array(n),new e.Uint32Array(n),new e.Float32Array(n),new e.Float64Array(n),0|t.STACKTOP),s=(t.STACK_MAX,t.tempDoublePtr,t.ABORT,t.cttz_i8,0),u=(e.NaN,e.Infinity,0),l=(e.Math.floor,e.Math.abs,e.Math.sqrt,e.Math.pow,e.Math.cos,e.Math.sin,e.Math.tan,e.Math.acos,e.Math.asin,e.Math.atan,e.Math.atan2,e.Math.exp,e.Math.log,e.Math.ceil,e.Math.imul),c=(e.Math.min,e.Math.clz32,t.abort),d=(t.assert,t.invoke_ii,t.invoke_iiii,t.invoke_vi,t._pthread_cleanup_pop),f=t.___lock,p=(t._emscripten_set_main_loop,t._pthread_self),h=t.___syscall6,_=(t._emscripten_set_main_loop_timing,t._abort),v=t._sbrk,m=t._time,g=(t.___setErrNo,t._emscripten_memcpy_big),y=t.___syscall54,E=t.___unlock,S=t.___syscall140,b=t._pthread_cleanup_push,T=t._sysconf,w=t.___syscall146;function A(e,t,n){e|=0;var r,i=0,s=0,l=0,c=0,d=0,f=0,p=0,h=0,_=0,v=0,m=0;r=o,o=o+160|0,C(i=r,t|=0,n|=0),t=0|a[(n=i+144|0)>>2],s=0|a[n+4>>2],c=0|a[(l=n=i+64|0)>>2],d=0|a[l+4>>2],l=0|B(0|t,0|s,18,0),f=u,p=0|x(0|c,0|d,0|t,0|s),s=0|x(0|p,0|u,0|l,0|f),a[(f=n)>>2]=s,a[f+4>>2]=u,s=0|a[(f=i+136|0)>>2],n=0|a[f+4>>2],p=0|a[(l=f=i+56|0)>>2],t=0|a[l+4>>2],l=0|B(0|s,0|n,18,0),d=u,c=0|x(0|p,0|t,0|s,0|n),n=0|x(0|c,0|u,0|l,0|d),a[(d=f)>>2]=n,a[d+4>>2]=u,n=0|a[(d=i+128|0)>>2],f=0|a[d+4>>2],c=0|a[(l=d=i+48|0)>>2],s=0|a[l+4>>2],l=0|B(0|n,0|f,18,0),t=u,p=0|x(0|c,0|s,0|n,0|f),f=0|x(0|p,0|u,0|l,0|t),a[(t=d)>>2]=f,a[t+4>>2]=u,f=0|a[(t=i+120|0)>>2],d=0|a[t+4>>2],p=0|a[(l=t=i+40|0)>>2],n=0|a[l+4>>2],l=0|B(0|f,0|d,18,0),s=u,c=0|x(0|p,0|n,0|f,0|d),d=0|x(0|c,0|u,0|l,0|s),a[(s=t)>>2]=d,a[s+4>>2]=u,d=0|a[(s=i+112|0)>>2],t=0|a[s+4>>2],c=0|a[(l=s=i+32|0)>>2],f=0|a[l+4>>2],l=0|B(0|d,0|t,18,0),n=u,p=0|x(0|c,0|f,0|d,0|t),t=0|x(0|p,0|u,0|l,0|n),a[(n=s)>>2]=t,a[n+4>>2]=u,t=0|a[(n=i+104|0)>>2],s=0|a[n+4>>2],p=0|a[(l=n=i+24|0)>>2],d=0|a[l+4>>2],l=0|B(0|t,0|s,18,0),f=u,c=0|x(0|p,0|d,0|t,0|s),s=0|x(0|c,0|u,0|l,0|f),a[(f=n)>>2]=s,a[f+4>>2]=u,s=0|a[(f=i+96|0)>>2],n=0|a[f+4>>2],c=0|a[(l=f=i+16|0)>>2],t=0|a[l+4>>2],l=0|B(0|s,0|n,18,0),d=u,p=0|x(0|c,0|t,0|s,0|n),n=0|x(0|p,0|u,0|l,0|d),a[(d=f)>>2]=n,a[d+4>>2]=u,n=0|a[(d=i+88|0)>>2],f=0|a[d+4>>2],p=0|a[(l=d=i+8|0)>>2],s=0|a[l+4>>2],l=0|B(0|n,0|f,18,0),t=u,c=0|x(0|p,0|s,0|n,0|f),f=0|x(0|c,0|u,0|l,0|t),a[(t=d)>>2]=f,a[t+4>>2]=u,l=0|a[(f=t=i+80|0)>>2],c=0|a[f+4>>2],n=0|a[(f=i)>>2],s=0|a[f+4>>2],f=0|B(0|l,0|c,18,0),p=u,h=0|x(0|n,0|s,0|l,0|c),c=0|x(0|h,0|u,0|f,0|p),p=u,a[(f=i)>>2]=c,a[f+4>>2]=p,a[(f=t)>>2]=0,a[f+4>>2]=0,f=p,p=c,c=0;do{n=0|L(0|p,0|f,0|(s=0|G(0|(l=0|N(0|(h=0|x(f>>31>>>6|0,0,0|p,0|f)),0|u,26)),0|(h=u),26)),0|u),a[(s=i+(c<<3)|0)>>2]=n,a[s+4>>2]=u,m=0|L(0|(_=0|x(0|l,0|h,0|a[(n=s=i+((1|c)<<3)|0)>>2],0|a[n+4>>2])),0|(n=u),0|(v=0|G(0|(l=0|N(0|(h=0|x(n>>31>>>7|0,0,0|_,0|n)),0|u,25)),0|(h=u),25)),0|u),a[(v=s)>>2]=m,a[v+4>>2]=u,p=0|x(0|l,0|h,0|a[(m=v=i+((c=c+2|0)<<3)|0)>>2],0|a[m+4>>2]),f=u,a[(m=v)>>2]=p,a[m+4>>2]=f}while(c>>>0<10);f=0|a[(c=t)>>2],p=0|a[c+4>>2],m=0|a[(c=i)>>2],v=0|a[c+4>>2],c=0|B(0|f,0|p,18,0),h=u,l=0|x(0|m,0|v,0|f,0|p),p=0|x(0|l,0|u,0|c,0|h),h=u,a[(c=t)>>2]=0,a[c+4>>2]=0,f=0|L(0|p,0|h,0|(l=0|G(0|(t=0|N(0|(c=0|x(h>>31>>>6|0,0,0|p,0|h)),0|u,26)),0|(c=u),26)),0|u),a[(l=i)>>2]=f,a[l+4>>2]=u,f=0|x(0|t,0|c,0|a[(l=d)>>2],0|a[l+4>>2]),a[(l=d)>>2]=f,a[l+4>>2]=u,l=e,e=i,i=l+80|0;do{a[l>>2]=a[e>>2],l=l+4|0,e=e+4|0}while((0|l)<(0|i));o=r}function C(e,t,n){e|=0,n|=0;var r=0,i=0,o=0,s=0,l=0,c=0,d=0,f=0,p=0,h=0,_=0,v=0,m=0,g=0,y=0,E=0,S=0,b=0,T=0,w=0,A=0,C=0,O=0;r=0|N(0,0|a[(t|=0)>>2],32),i=u,s=0|B(0|(o=0|N(0,0|a[n>>2],32)),0|u,0|r,0|i),a[(i=e)>>2]=s,a[i+4>>2]=u,i=0|N(0,0|a[t>>2],32),s=u,l=0|B(0|(o=0|N(0,0|a[(r=n+8|0)>>2],32)),0|u,0|i,0|s),s=u,o=0|N(0,0|a[(i=t+8|0)>>2],32),c=u,c=0|x(0|(f=0|B(0|(d=0|N(0,0|a[n>>2],32)),0|u,0|o,0|c)),0|u,0|l,0|s),a[(s=e+8|0)>>2]=c,a[s+4>>2]=u,s=0|N(0,0|a[i>>2],31),c=u,f=0|B(0|(l=0|N(0,0|a[r>>2],32)),0|u,0|s,0|c),c=u,s=0|N(0,0|a[t>>2],32),l=u,l=0|x(0|(p=0|B(0|(d=0|N(0,0|a[(o=n+16|0)>>2],32)),0|u,0|s,0|l)),0|u,0|f,0|c),c=u,p=0|N(0,0|a[(f=t+16|0)>>2],32),s=u,s=0|x(0|l,0|c,0|(h=0|B(0|(d=0|N(0,0|a[n>>2],32)),0|u,0|p,0|s)),0|u),a[(h=e+16|0)>>2]=s,a[h+4>>2]=u,h=0|N(0,0|a[i>>2],32),s=u,l=0|B(0|(c=0|N(0,0|a[o>>2],32)),0|u,0|h,0|s),s=u,h=0|N(0,0|a[f>>2],32),c=u,c=0|x(0|(d=0|B(0|(p=0|N(0,0|a[r>>2],32)),0|u,0|h,0|c)),0|u,0|l,0|s),s=u,l=0|N(0,0|a[t>>2],32),d=u,d=0|x(0|c,0|s,0|(_=0|B(0|(p=0|N(0,0|a[(h=n+24|0)>>2],32)),0|u,0|l,0|d)),0|u),_=u,c=0|N(0,0|a[(s=t+24|0)>>2],32),l=u,l=0|x(0|d,0|_,0|(v=0|B(0|(p=0|N(0,0|a[n>>2],32)),0|u,0|c,0|l)),0|u),a[(v=e+24|0)>>2]=l,a[v+4>>2]=u,v=0|N(0,0|a[f>>2],32),l=u,d=0|B(0|(_=0|N(0,0|a[o>>2],32)),0|u,0|v,0|l),l=u,v=0|N(0,0|a[i>>2],32),_=u,p=0|B(0|(c=0|N(0,0|a[h>>2],32)),0|u,0|v,0|_),_=u,v=0|N(0,0|a[s>>2],32),c=u,c=0|x(0|(g=0|B(0|(m=0|N(0,0|a[r>>2],32)),0|u,0|v,0|c)),0|u,0|p,0|_),c=0|x(0|(_=0|G(0|c,0|u,1)),0|u,0|d,0|l),l=u,d=0|N(0,0|a[t>>2],32),_=u,_=0|x(0|c,0|l,0|(v=0|B(0|(g=0|N(0,0|a[(p=n+32|0)>>2],32)),0|u,0|d,0|_)),0|u),v=u,c=0|N(0,0|a[(l=t+32|0)>>2],32),d=u,d=0|x(0|_,0|v,0|(m=0|B(0|(g=0|N(0,0|a[n>>2],32)),0|u,0|c,0|d)),0|u),a[(m=e+32|0)>>2]=d,a[m+4>>2]=u,m=0|N(0,0|a[f>>2],32),d=u,_=0|B(0|(v=0|N(0,0|a[h>>2],32)),0|u,0|m,0|d),d=u,m=0|N(0,0|a[s>>2],32),v=u,v=0|x(0|(g=0|B(0|(c=0|N(0,0|a[o>>2],32)),0|u,0|m,0|v)),0|u,0|_,0|d),d=u,_=0|N(0,0|a[i>>2],32),g=u,g=0|x(0|v,0|d,0|(c=0|B(0|(m=0|N(0,0|a[p>>2],32)),0|u,0|_,0|g)),0|u),c=u,d=0|N(0,0|a[l>>2],32),v=u,v=0|x(0|g,0|c,0|(m=0|B(0|(_=0|N(0,0|a[r>>2],32)),0|u,0|d,0|v)),0|u),m=u,c=0|N(0,0|a[t>>2],32),g=u,g=0|x(0|v,0|m,0|(y=0|B(0|(_=0|N(0,0|a[(d=n+40|0)>>2],32)),0|u,0|c,0|g)),0|u),y=u,v=0|N(0,0|a[(m=t+40|0)>>2],32),c=u,c=0|x(0|g,0|y,0|(E=0|B(0|(_=0|N(0,0|a[n>>2],32)),0|u,0|v,0|c)),0|u),a[(E=e+40|0)>>2]=c,a[E+4>>2]=u,E=0|N(0,0|a[s>>2],32),c=u,g=0|B(0|(y=0|N(0,0|a[h>>2],32)),0|u,0|E,0|c),c=u,E=0|N(0,0|a[i>>2],32),y=u,y=0|x(0|(_=0|B(0|(v=0|N(0,0|a[d>>2],32)),0|u,0|E,0|y)),0|u,0|g,0|c),c=u,g=0|N(0,0|a[m>>2],32),_=u,v=0|G(0|(_=0|x(0|y,0|c,0|(v=0|B(0|(E=0|N(0,0|a[r>>2],32)),0|u,0|g,0|_)),0|u)),0|u,1),_=u,c=0|N(0,0|a[f>>2],32),y=u,y=0|x(0|v,0|_,0|(E=0|B(0|(g=0|N(0,0|a[p>>2],32)),0|u,0|c,0|y)),0|u),E=u,_=0|N(0,0|a[l>>2],32),v=u,v=0|x(0|y,0|E,0|(g=0|B(0|(c=0|N(0,0|a[o>>2],32)),0|u,0|_,0|v)),0|u),g=u,E=0|N(0,0|a[t>>2],32),y=u,y=0|x(0|v,0|g,0|(S=0|B(0|(c=0|N(0,0|a[(_=n+48|0)>>2],32)),0|u,0|E,0|y)),0|u),S=u,v=0|N(0,0|a[(g=t+48|0)>>2],32),E=u,E=0|x(0|y,0|S,0|(b=0|B(0|(c=0|N(0,0|a[n>>2],32)),0|u,0|v,0|E)),0|u),a[(b=e+48|0)>>2]=E,a[b+4>>2]=u,b=0|N(0,0|a[s>>2],32),E=u,y=0|B(0|(S=0|N(0,0|a[p>>2],32)),0|u,0|b,0|E),E=u,b=0|N(0,0|a[l>>2],32),S=u,S=0|x(0|(c=0|B(0|(v=0|N(0,0|a[h>>2],32)),0|u,0|b,0|S)),0|u,0|y,0|E),E=u,y=0|N(0,0|a[f>>2],32),c=u,c=0|x(0|S,0|E,0|(v=0|B(0|(b=0|N(0,0|a[d>>2],32)),0|u,0|y,0|c)),0|u),v=u,E=0|N(0,0|a[m>>2],32),S=u,S=0|x(0|c,0|v,0|(b=0|B(0|(y=0|N(0,0|a[o>>2],32)),0|u,0|E,0|S)),0|u),b=u,v=0|N(0,0|a[i>>2],32),c=u,c=0|x(0|S,0|b,0|(y=0|B(0|(E=0|N(0,0|a[_>>2],32)),0|u,0|v,0|c)),0|u),y=u,b=0|N(0,0|a[g>>2],32),S=u,S=0|x(0|c,0|y,0|(E=0|B(0|(v=0|N(0,0|a[r>>2],32)),0|u,0|b,0|S)),0|u),E=u,y=0|N(0,0|a[t>>2],32),c=u,c=0|x(0|S,0|E,0|(T=0|B(0|(v=0|N(0,0|a[(b=n+56|0)>>2],32)),0|u,0|y,0|c)),0|u),T=u,S=0|N(0,0|a[(E=t+56|0)>>2],32),y=u,y=0|x(0|c,0|T,0|(w=0|B(0|(v=0|N(0,0|a[n>>2],32)),0|u,0|S,0|y)),0|u),a[(w=e+56|0)>>2]=y,a[w+4>>2]=u,w=0|N(0,0|a[l>>2],32),y=u,c=0|B(0|(T=0|N(0,0|a[p>>2],32)),0|u,0|w,0|y),y=u,w=0|N(0,0|a[s>>2],32),T=u,v=0|B(0|(S=0|N(0,0|a[d>>2],32)),0|u,0|w,0|T),T=u,w=0|N(0,0|a[m>>2],32),S=u,S=0|x(0|(C=0|B(0|(A=0|N(0,0|a[h>>2],32)),0|u,0|w,0|S)),0|u,0|v,0|T),T=u,v=0|N(0,0|a[i>>2],32),C=u,C=0|x(0|S,0|T,0|(A=0|B(0|(w=0|N(0,0|a[b>>2],32)),0|u,0|v,0|C)),0|u),A=u,T=0|N(0,0|a[E>>2],32),S=u,S=0|x(0|C,0|A,0|(w=0|B(0|(v=0|N(0,0|a[r>>2],32)),0|u,0|T,0|S)),0|u),S=0|x(0|(w=0|G(0|S,0|u,1)),0|u,0|c,0|y),y=u,c=0|N(0,0|a[f>>2],32),w=u,w=0|x(0|S,0|y,0|(C=0|B(0|(A=0|N(0,0|a[_>>2],32)),0|u,0|c,0|w)),0|u),C=u,y=0|N(0,0|a[g>>2],32),S=u,S=0|x(0|w,0|C,0|(A=0|B(0|(c=0|N(0,0|a[o>>2],32)),0|u,0|y,0|S)),0|u),A=u,C=0|N(0,0|a[t>>2],32),w=u,w=0|x(0|S,0|A,0|(T=0|B(0|(c=0|N(0,0|a[(y=n+64|0)>>2],32)),0|u,0|C,0|w)),0|u),T=u,S=0|N(0,0|a[(A=t+64|0)>>2],32),C=u,C=0|x(0|w,0|T,0|(v=0|B(0|(c=0|N(0,0|a[n>>2],32)),0|u,0|S,0|C)),0|u),a[(v=e+64|0)>>2]=C,a[v+4>>2]=u,v=0|N(0,0|a[l>>2],32),C=u,w=0|B(0|(T=0|N(0,0|a[d>>2],32)),0|u,0|v,0|C),C=u,v=0|N(0,0|a[m>>2],32),T=u,T=0|x(0|(c=0|B(0|(S=0|N(0,0|a[p>>2],32)),0|u,0|v,0|T)),0|u,0|w,0|C),C=u,w=0|N(0,0|a[s>>2],32),c=u,c=0|x(0|T,0|C,0|(S=0|B(0|(v=0|N(0,0|a[_>>2],32)),0|u,0|w,0|c)),0|u),S=u,C=0|N(0,0|a[g>>2],32),T=u,T=0|x(0|c,0|S,0|(v=0|B(0|(w=0|N(0,0|a[h>>2],32)),0|u,0|C,0|T)),0|u),v=u,S=0|N(0,0|a[f>>2],32),c=u,c=0|x(0|T,0|v,0|(w=0|B(0|(C=0|N(0,0|a[b>>2],32)),0|u,0|S,0|c)),0|u),w=u,v=0|N(0,0|a[E>>2],32),T=u,T=0|x(0|c,0|w,0|(C=0|B(0|(S=0|N(0,0|a[o>>2],32)),0|u,0|v,0|T)),0|u),C=u,w=0|N(0,0|a[i>>2],32),c=u,c=0|x(0|T,0|C,0|(S=0|B(0|(v=0|N(0,0|a[y>>2],32)),0|u,0|w,0|c)),0|u),S=u,C=0|N(0,0|a[A>>2],32),T=u,T=0|x(0|c,0|S,0|(v=0|B(0|(w=0|N(0,0|a[r>>2],32)),0|u,0|C,0|T)),0|u),v=u,S=0|N(0,0|a[t>>2],32),c=u,c=0|x(0|T,0|v,0|(O=0|B(0|(w=0|N(0,0|a[(C=n+72|0)>>2],32)),0|u,0|S,0|c)),0|u),O=u,t=0|N(0,0|a[(v=t+72|0)>>2],32),T=u,T=0|x(0|c,0|O,0|(n=0|B(0|(S=0|N(0,0|a[n>>2],32)),0|u,0|t,0|T)),0|u),a[(n=e+72|0)>>2]=T,a[n+4>>2]=u,n=0|N(0,0|a[m>>2],32),T=u,c=0|B(0|(O=0|N(0,0|a[d>>2],32)),0|u,0|n,0|T),T=u,n=0|N(0,0|a[s>>2],32),O=u,O=0|x(0|(S=0|B(0|(t=0|N(0,0|a[b>>2],32)),0|u,0|n,0|O)),0|u,0|c,0|T),T=u,c=0|N(0,0|a[E>>2],32),S=u,S=0|x(0|O,0|T,0|(t=0|B(0|(n=0|N(0,0|a[h>>2],32)),0|u,0|c,0|S)),0|u),t=u,T=0|N(0,0|a[i>>2],32),i=u,i=0|x(0|S,0|t,0|(c=0|B(0|(O=0|N(0,0|a[C>>2],32)),0|u,0|T,0|i)),0|u),c=u,t=0|N(0,0|a[v>>2],32),S=u,r=0|G(0|(S=0|x(0|i,0|c,0|(r=0|B(0|(T=0|N(0,0|a[r>>2],32)),0|u,0|t,0|S)),0|u)),0|u,1),S=u,c=0|N(0,0|a[l>>2],32),i=u,i=0|x(0|r,0|S,0|(T=0|B(0|(t=0|N(0,0|a[_>>2],32)),0|u,0|c,0|i)),0|u),T=u,S=0|N(0,0|a[g>>2],32),r=u,r=0|x(0|i,0|T,0|(t=0|B(0|(c=0|N(0,0|a[p>>2],32)),0|u,0|S,0|r)),0|u),t=u,T=0|N(0,0|a[f>>2],32),i=u,i=0|x(0|r,0|t,0|(c=0|B(0|(S=0|N(0,0|a[y>>2],32)),0|u,0|T,0|i)),0|u),c=u,t=0|N(0,0|a[A>>2],32),r=u,r=0|x(0|i,0|c,0|(S=0|B(0|(T=0|N(0,0|a[o>>2],32)),0|u,0|t,0|r)),0|u),a[(S=e+80|0)>>2]=r,a[S+4>>2]=u,S=0|N(0,0|a[m>>2],32),r=u,i=0|B(0|(c=0|N(0,0|a[_>>2],32)),0|u,0|S,0|r),r=u,S=0|N(0,0|a[g>>2],32),c=u,c=0|x(0|(T=0|B(0|(t=0|N(0,0|a[d>>2],32)),0|u,0|S,0|c)),0|u,0|i,0|r),r=u,i=0|N(0,0|a[l>>2],32),T=u,T=0|x(0|c,0|r,0|(t=0|B(0|(S=0|N(0,0|a[b>>2],32)),0|u,0|i,0|T)),0|u),t=u,r=0|N(0,0|a[E>>2],32),c=u,c=0|x(0|T,0|t,0|(S=0|B(0|(i=0|N(0,0|a[p>>2],32)),0|u,0|r,0|c)),0|u),S=u,t=0|N(0,0|a[s>>2],32),T=u,T=0|x(0|c,0|S,0|(i=0|B(0|(r=0|N(0,0|a[y>>2],32)),0|u,0|t,0|T)),0|u),i=u,S=0|N(0,0|a[A>>2],32),c=u,c=0|x(0|T,0|i,0|(r=0|B(0|(t=0|N(0,0|a[h>>2],32)),0|u,0|S,0|c)),0|u),r=u,i=0|N(0,0|a[f>>2],32),f=u,f=0|x(0|c,0|r,0|(S=0|B(0|(T=0|N(0,0|a[C>>2],32)),0|u,0|i,0|f)),0|u),S=u,r=0|N(0,0|a[v>>2],32),c=u,c=0|x(0|f,0|S,0|(o=0|B(0|(i=0|N(0,0|a[o>>2],32)),0|u,0|r,0|c)),0|u),a[(o=e+88|0)>>2]=c,a[o+4>>2]=u,o=0|N(0,0|a[g>>2],32),c=u,f=0|B(0|(S=0|N(0,0|a[_>>2],32)),0|u,0|o,0|c),c=u,o=0|N(0,0|a[m>>2],32),S=u,i=0|B(0|(r=0|N(0,0|a[b>>2],32)),0|u,0|o,0|S),S=u,o=0|N(0,0|a[E>>2],32),r=u,r=0|x(0|(t=0|B(0|(T=0|N(0,0|a[d>>2],32)),0|u,0|o,0|r)),0|u,0|i,0|S),S=u,i=0|N(0,0|a[s>>2],32),s=u,s=0|x(0|r,0|S,0|(o=0|B(0|(t=0|N(0,0|a[C>>2],32)),0|u,0|i,0|s)),0|u),o=u,S=0|N(0,0|a[v>>2],32),r=u,r=0|x(0|s,0|o,0|(h=0|B(0|(i=0|N(0,0|a[h>>2],32)),0|u,0|S,0|r)),0|u),r=0|x(0|(h=0|G(0|r,0|u,1)),0|u,0|f,0|c),c=u,f=0|N(0,0|a[l>>2],32),h=u,h=0|x(0|r,0|c,0|(s=0|B(0|(o=0|N(0,0|a[y>>2],32)),0|u,0|f,0|h)),0|u),s=u,c=0|N(0,0|a[A>>2],32),r=u,r=0|x(0|h,0|s,0|(o=0|B(0|(f=0|N(0,0|a[p>>2],32)),0|u,0|c,0|r)),0|u),a[(o=e+96|0)>>2]=r,a[o+4>>2]=u,o=0|N(0,0|a[g>>2],32),r=u,h=0|B(0|(s=0|N(0,0|a[b>>2],32)),0|u,0|o,0|r),r=u,o=0|N(0,0|a[E>>2],32),s=u,s=0|x(0|(f=0|B(0|(c=0|N(0,0|a[_>>2],32)),0|u,0|o,0|s)),0|u,0|h,0|r),r=u,h=0|N(0,0|a[m>>2],32),f=u,f=0|x(0|s,0|r,0|(c=0|B(0|(o=0|N(0,0|a[y>>2],32)),0|u,0|h,0|f)),0|u),c=u,r=0|N(0,0|a[A>>2],32),s=u,s=0|x(0|f,0|c,0|(o=0|B(0|(h=0|N(0,0|a[d>>2],32)),0|u,0|r,0|s)),0|u),o=u,c=0|N(0,0|a[l>>2],32),l=u,l=0|x(0|s,0|o,0|(r=0|B(0|(f=0|N(0,0|a[C>>2],32)),0|u,0|c,0|l)),0|u),r=u,o=0|N(0,0|a[v>>2],32),s=u,s=0|x(0|l,0|r,0|(p=0|B(0|(c=0|N(0,0|a[p>>2],32)),0|u,0|o,0|s)),0|u),a[(p=e+104|0)>>2]=s,a[p+4>>2]=u,p=0|N(0,0|a[E>>2],32),s=u,l=0|B(0|(r=0|N(0,0|a[b>>2],32)),0|u,0|p,0|s),s=u,p=0|N(0,0|a[m>>2],32),m=u,m=0|x(0|(o=0|B(0|(r=0|N(0,0|a[C>>2],32)),0|u,0|p,0|m)),0|u,0|l,0|s),s=u,l=0|N(0,0|a[v>>2],32),o=u,d=0|G(0|(o=0|x(0|m,0|s,0|(d=0|B(0|(p=0|N(0,0|a[d>>2],32)),0|u,0|l,0|o)),0|u)),0|u,1),o=u,s=0|N(0,0|a[g>>2],32),m=u,m=0|x(0|d,0|o,0|(p=0|B(0|(l=0|N(0,0|a[y>>2],32)),0|u,0|s,0|m)),0|u),p=u,o=0|N(0,0|a[A>>2],32),d=u,d=0|x(0|m,0|p,0|(l=0|B(0|(s=0|N(0,0|a[_>>2],32)),0|u,0|o,0|d)),0|u),a[(l=e+112|0)>>2]=d,a[l+4>>2]=u,l=0|N(0,0|a[E>>2],32),d=u,m=0|B(0|(p=0|N(0,0|a[y>>2],32)),0|u,0|l,0|d),d=u,l=0|N(0,0|a[A>>2],32),p=u,p=0|x(0|(s=0|B(0|(o=0|N(0,0|a[b>>2],32)),0|u,0|l,0|p)),0|u,0|m,0|d),d=u,m=0|N(0,0|a[g>>2],32),g=u,g=0|x(0|p,0|d,0|(l=0|B(0|(s=0|N(0,0|a[C>>2],32)),0|u,0|m,0|g)),0|u),l=u,d=0|N(0,0|a[v>>2],32),p=u,p=0|x(0|g,0|l,0|(_=0|B(0|(m=0|N(0,0|a[_>>2],32)),0|u,0|d,0|p)),0|u),a[(_=e+120|0)>>2]=p,a[_+4>>2]=u,_=0|N(0,0|a[A>>2],32),p=u,g=0|B(0|(l=0|N(0,0|a[y>>2],32)),0|u,0|_,0|p),p=u,_=0|N(0,0|a[E>>2],32),E=u,d=0|B(0|(l=0|N(0,0|a[C>>2],32)),0|u,0|_,0|E),E=u,_=0|N(0,0|a[v>>2],32),l=u,l=0|x(0|(b=0|B(0|(m=0|N(0,0|a[b>>2],32)),0|u,0|_,0|l)),0|u,0|d,0|E),l=0|x(0|(E=0|G(0|l,0|u,1)),0|u,0|g,0|p),a[(p=e+128|0)>>2]=l,a[p+4>>2]=u,p=0|N(0,0|a[A>>2],32),A=u,g=0|B(0|(l=0|N(0,0|a[C>>2],32)),0|u,0|p,0|A),A=u,p=0|N(0,0|a[v>>2],32),l=u,l=0|x(0|(y=0|B(0|(E=0|N(0,0|a[y>>2],32)),0|u,0|p,0|l)),0|u,0|g,0|A),a[(A=e+136|0)>>2]=l,a[A+4>>2]=u,A=0|N(0,0|a[v>>2],31),v=u,C=0|B(0|(l=0|N(0,0|a[C>>2],32)),0|u,0|A,0|v),a[(v=e+144|0)>>2]=C,a[v+4>>2]=u}function O(e,t){e|=0;var n,r,i,s=0,l=0,c=0,d=0,f=0,p=0,h=0,_=0,v=0,m=0,g=0,y=0,E=0,S=0,b=0,T=0,w=0,A=0,C=0,O=0,M=0,I=0,k=0,P=0,R=0,D=0,U=0,F=0,j=0,Y=0,K=0,W=0,V=0,H=0,$=0,z=0,q=0;n=o,o=o+160|0,s=n,d=0|B(0|(r=0|N(0,0|(l=0|a[(t|=0)>>2]),32)),0|(c=u),0|r,0|c),a[(f=s)>>2]=d,a[f+4>>2]=u,f=0|N(0,0|l,31),l=u,v=0|B(0|(h=0|N(0,0|(p=0|a[(d=t+8|0)>>2]),32)),0|(_=u),0|f,0|l),a[(m=i=s+8|0)>>2]=v,a[m+4>>2]=u,m=0|B(0|h,0|_,0|h,0|_),v=u,v=0|G(0|(b=0|x(0|(S=0|B(0|(y=0|N(0,0|a[(g=t+16|0)>>2],32)),0|(E=u),0|r,0|c)),0|u,0|m,0|v)),0|u,1),a[(m=b=s+16|0)>>2]=v,a[m+4>>2]=u,m=0|B(0|y,0|E,0|h,0|_),v=u,v=0|G(0|(C=0|x(0|(A=0|B(0|(T=0|N(0,0|a[(S=t+24|0)>>2],32)),0|(w=u),0|r,0|c)),0|u,0|m,0|v)),0|u,1),a[(m=C=s+24|0)>>2]=v,a[m+4>>2]=u,m=0|B(0|y,0|E,0|y,0|E),v=u,A=0|x(0|(O=0|B(0|T,0|w,0|(A=0|N(0,0|p,30)),0|u)),0|u,0|m,0|v),l=0|x(0|A,0|(v=u),0|(I=0|B(0|(O=0|N(0,0|a[(m=t+32|0)>>2],32)),0|(M=u),0|f,0|l)),0|u),a[(v=I=s+32|0)>>2]=l,a[v+4>>2]=u,v=0|B(0|T,0|w,0|y,0|E),l=u,f=0|x(0|(A=0|B(0|O,0|M,0|h,0|_)),0|u,0|v,0|l),P=0|G(0|(R=0|x(0|f,0|(l=u),0|(P=0|B(0|(A=0|N(0,0|a[(v=t+40|0)>>2],32)),0|(k=u),0|r,0|c)),0|u)),0|u,1),a[(l=R=s+40|0)>>2]=P,a[l+4>>2]=u,l=0|B(0|T,0|w,0|T,0|w),P=u,D=0|x(0|(f=0|B(0|O,0|M,0|y,0|E)),0|u,0|l,0|P),j=0|x(0|D,0|(P=u),0|(F=0|B(0|(f=0|N(0,0|a[(l=t+48|0)>>2],32)),0|(U=u),0|r,0|c)),0|u),p=0|G(0|(P=0|x(0|j,0|(F=u),0|(p=0|B(0|A,0|k,0|(P=0|N(0,0|p,31)),0|u)),0|u)),0|u,1),a[(F=P=s+48|0)>>2]=p,a[F+4>>2]=u,F=0|B(0|O,0|M,0|T,0|w),p=u,D=0|x(0|(j=0|B(0|A,0|k,0|y,0|E)),0|u,0|F,0|p),j=0|x(0|D,0|(p=u),0|(F=0|B(0|f,0|U,0|h,0|_)),0|u),K=0|G(0|(W=0|x(0|j,0|(F=u),0|(K=0|B(0|(D=0|N(0,0|a[(p=t+56|0)>>2],32)),0|(Y=u),0|r,0|c)),0|u)),0|u,1),a[(F=W=s+56|0)>>2]=K,a[F+4>>2]=u,F=0|B(0|O,0|M,0|O,0|M),K=u,j=0|B(0|f,0|U,0|y,0|E),V=u,c=0|x(0|(q=0|B(0|($=0|N(0,0|a[(H=t+64|0)>>2],32)),0|(z=u),0|r,0|c)),0|u,0|j,0|V),V=u,j=0|B(0|D,0|Y,0|h,0|_),_=u,q=0|x(0|(h=0|B(0|A,0|k,0|T,0|w)),0|u,0|j,0|_),q=0|x(0|c,0|V,0|(_=0|G(0|q,0|u,1)),0|u),q=0|x(0|(_=0|G(0|q,0|u,1)),0|u,0|F,0|K),a[(F=K=s+64|0)>>2]=q,a[F+4>>2]=u,F=0|B(0|A,0|k,0|O,0|M),q=u,w=0|x(0|(_=0|B(0|f,0|U,0|T,0|w)),0|u,0|F,0|q),E=0|x(0|w,0|(q=u),0|(F=0|B(0|D,0|Y,0|y,0|E)),0|u),y=0|x(0|E,0|(F=u),0|(w=0|B(0|$,0|z,0|(q=0|N(0,0|a[d>>2],32)),0|(d=u))),0|u),w=u,F=0|N(0,0|a[t>>2],32),E=u,V=0|G(0|(E=0|x(0|y,0|w,0|(V=0|B(0|(t=0|N(0,0|(_=0|a[t+72>>2]),32)),0|(T=u),0|F,0|E)),0|u)),0|u,1),a[(E=s+72|0)>>2]=V,a[E+4>>2]=u,E=0|B(0|A,0|k,0|A,0|k),V=u,M=0|x(0|(w=0|B(0|f,0|U,0|O,0|M)),0|u,0|E,0|V),O=0|x(0|M,0|(V=u),0|(w=0|B(0|$,0|z,0|(E=0|N(0,0|a[g>>2],32)),0|(g=u))),0|u),w=u,M=0|B(0|D,0|Y,0|(V=0|N(0,0|a[S>>2],32)),0|(S=u)),y=u,y=0|G(0|(d=0|x(0|(F=0|B(0|t,0|T,0|q,0|d)),0|u,0|M,0|y)),0|u,1),y=0|G(0|(d=0|x(0|O,0|w,0|y,0|u)),0|u,1),a[(w=d=s+80|0)>>2]=y,a[w+4>>2]=u,w=0|B(0|f,0|U,0|A,0|k),k=u,O=0|x(0|(y=0|B(0|D,0|Y,0|(A=0|N(0,0|a[m>>2],32)),0|(m=u))),0|u,0|w,0|k),y=0|x(0|O,0|(k=u),0|(w=0|B(0|$,0|z,0|V,0|S)),0|u),w=0|G(0|(g=0|x(0|y,0|(w=u),0|(k=0|B(0|t,0|T,0|E,0|g)),0|u)),0|(k=u),1),y=u,a[(E=s+88|0)>>2]=w,a[E+4>>2]=y,E=0|B(0|f,0|U,0|f,0|U),U=u,f=0|B(0|$,0|z,0|A,0|m),O=u,q=0|B(0|D,0|Y,0|(v=0|N(0,0|(M=0|a[v>>2]),32)),0|(F=u)),c=u,S=0|x(0|(j=0|B(0|t,0|T,0|V,0|S)),0|u,0|q,0|c),S=0|x(0|(c=0|G(0|S,0|u,1)),0|u,0|f,0|O),S=0|x(0|(O=0|G(0|S,0|u,1)),0|u,0|E,0|U),U=u,a[(E=s+96|0)>>2]=S,a[E+4>>2]=U,O=0|B(0|D,0|Y,0|(E=0|N(0,0|a[l>>2],32)),0|(l=u)),Y=u,F=0|x(0|(D=0|B(0|$,0|z,0|v,0|F)),0|u,0|O,0|Y),Y=0|G(0|(m=0|x(0|F,0|(Y=u),0|(O=0|B(0|t,0|T,0|A,0|m)),0|u)),0|(O=u),1),F=u,a[(A=s+104|0)>>2]=Y,a[A+4>>2]=F,v=0|B(0|(p=0|N(0,0|(A=0|a[p>>2]),32)),0|(D=u),0|p,0|D),f=u,z=0|x(0|(c=0|B(0|$,0|z,0|E,0|l)),0|u,0|v,0|f),f=0|G(0|(v=0|x(0|z,0|(f=u),0|(M=0|B(0|t,0|T,0|(v=0|N(0,0|M,31)),0|u)),0|u)),0|(M=u),1),z=u,a[(c=s+112|0)>>2]=f,a[c+4>>2]=z,q=0|B(0|(H=0|N(0,0|(c=0|a[H>>2]),32)),0|($=u),0|p,0|D),D=u,q=0|G(0|(l=0|x(0|(p=0|B(0|t,0|T,0|E,0|l)),0|u,0|q,0|D)),0|(D=u),1),p=u,a[(E=s+120|0)>>2]=q,a[E+4>>2]=p,E=0|B(0|H,0|$,0|H,0|$),$=u,H=0|x(0|(A=0|B(0|t,0|T,0|(H=0|N(0,0|A,30)),0|u)),0|u,0|E,0|$),$=u,a[(E=s+128|0)>>2]=H,a[E+4>>2]=$,c=0|B(0|t,0|T,0|(E=0|N(0,0|c,31)),0|u),E=u,a[(A=s+136|0)>>2]=c,a[A+4>>2]=E,_=0|B(0|(A=0|N(0,0|_,31)),0|u,0|t,0|T),T=u,a[(t=s+144|0)>>2]=_,a[t+4>>2]=T,A=0|a[(t=K)>>2],j=0|a[t+4>>2],t=0|B(0|_,0|T,18,0),V=u,h=0|x(0|_,0|T,0|A,0|j),j=0|x(0|h,0|u,0|t,0|V),a[(V=K)>>2]=j,a[V+4>>2]=u,j=0|a[(V=W)>>2],K=0|a[V+4>>2],V=0|B(0|c,0|E,18,0),t=u,h=0|x(0|j,0|K,0|c,0|E),E=0|x(0|h,0|u,0|V,0|t),a[(t=W)>>2]=E,a[t+4>>2]=u,E=0|a[(t=P)>>2],W=0|a[t+4>>2],t=0|B(0|H,0|$,18,0),V=u,h=0|x(0|E,0|W,0|H,0|$),$=0|x(0|h,0|u,0|t,0|V),a[(V=P)>>2]=$,a[V+4>>2]=u,$=0|a[(V=R)>>2],P=0|a[V+4>>2],V=0|B(0|l,0|D,36,0),D=u,l=0|x(0|$,0|P,0|q,0|p),p=0|x(0|l,0|u,0|V,0|D),a[(D=R)>>2]=p,a[D+4>>2]=u,p=0|a[(D=I)>>2],R=0|a[D+4>>2],D=0|B(0|v,0|M,36,0),M=u,v=0|x(0|p,0|R,0|f,0|z),z=0|x(0|v,0|u,0|D,0|M),a[(M=I)>>2]=z,a[M+4>>2]=u,z=0|a[(M=C)>>2],I=0|a[M+4>>2],M=0|B(0|m,0|O,36,0),O=u,m=0|x(0|z,0|I,0|Y,0|F),F=0|x(0|m,0|u,0|M,0|O),a[(O=C)>>2]=F,a[O+4>>2]=u,F=0|a[(O=b)>>2],C=0|a[O+4>>2],O=0|B(0|S,0|U,18,0),M=u,m=0|x(0|F,0|C,0|S,0|U),U=0|x(0|m,0|u,0|O,0|M),a[(M=b)>>2]=U,a[M+4>>2]=u,U=0|a[(M=i)>>2],b=0|a[M+4>>2],M=0|B(0|g,0|k,36,0),k=u,g=0|x(0|U,0|b,0|w,0|y),y=0|x(0|g,0|u,0|M,0|k),a[(k=i)>>2]=y,a[k+4>>2]=u,y=0|a[(k=d)>>2],M=0|a[k+4>>2],g=0|a[(k=s)>>2],w=0|a[k+4>>2],k=0|B(0|y,0|M,18,0),b=u,U=0|x(0|g,0|w,0|y,0|M),M=0|x(0|U,0|u,0|k,0|b),b=u,a[(k=s)>>2]=M,a[k+4>>2]=b,a[(k=d)>>2]=0,a[k+4>>2]=0,k=b,b=M,M=0;do{g=0|L(0|b,0|k,0|(w=0|G(0|(y=0|N(0|(U=0|x(k>>31>>>6|0,0,0|b,0|k)),0|u,26)),0|(U=u),26)),0|u),a[(w=s+(M<<3)|0)>>2]=g,a[w+4>>2]=u,S=0|L(0|(O=0|x(0|y,0|U,0|a[(g=w=s+((1|M)<<3)|0)>>2],0|a[g+4>>2])),0|(g=u),0|(m=0|G(0|(y=0|N(0|(U=0|x(g>>31>>>7|0,0,0|O,0|g)),0|u,25)),0|(U=u),25)),0|u),a[(m=w)>>2]=S,a[m+4>>2]=u,b=0|x(0|y,0|U,0|a[(S=m=s+((M=M+2|0)<<3)|0)>>2],0|a[S+4>>2]),k=u,a[(S=m)>>2]=b,a[S+4>>2]=k}while(M>>>0<10);k=0|a[(M=d)>>2],b=0|a[M+4>>2],S=0|a[(M=s)>>2],m=0|a[M+4>>2],M=0|B(0|k,0|b,18,0),U=u,y=0|x(0|S,0|m,0|k,0|b),b=0|x(0|y,0|u,0|M,0|U),U=u,a[(M=d)>>2]=0,a[M+4>>2]=0,k=0|L(0|b,0|U,0|(y=0|G(0|(d=0|N(0|(M=0|x(U>>31>>>6|0,0,0|b,0|U)),0|u,26)),0|(M=u),26)),0|u),a[(y=s)>>2]=k,a[y+4>>2]=u,k=0|x(0|d,0|M,0|a[(y=i)>>2],0|a[y+4>>2]),a[(y=i)>>2]=k,a[y+4>>2]=u,y=e,e=s,s=y+80|0;do{a[y>>2]=a[e>>2],y=y+4|0,e=e+4|0}while((0|y)<(0|s));o=n}function M(){return 0|(0|a[2]?0|a[60+(0|p())>>2]:56)}function I(e){var t=0;return(e|=0)>>>0>4294963200?(a[(0|M())>>2]=0-e,t=-1):t=e,0|t}function k(e){return 0,0}function P(e){0}function R(e,t,n){t|=0,n|=0;var r,i,s,u,l,c=0,f=0,p=0,h=0,_=0,v=0,m=0,g=0,y=0,E=0,S=0,T=0,A=0,C=0,O=0,M=0;for(r=o,o=o+48|0,i=r+16|0,s=r,c=r+32|0,f=0|a[(u=(e|=0)+28|0)>>2],a[c>>2]=f,p=(0|a[(l=e+20|0)>>2])-f|0,a[c+4>>2]=p,a[c+8>>2]=t,a[c+12>>2]=n,t=e+60|0,f=e+44|0,h=c,c=2,_=p+n|0;;){if(0|a[2]?(b(1,0|e),a[s>>2]=a[t>>2],a[s+4>>2]=h,a[s+8>>2]=c,p=0|I(0|w(146,0|s)),d(0),v=p):(a[i>>2]=a[t>>2],a[i+4>>2]=h,a[i+8>>2]=c,v=0|I(0|w(146,0|i))),(0|_)==(0|v)){m=6;break}if((0|v)<0){g=h,y=c,m=8;break}p=_-v|0,v>>>0<=(E=0|a[h+4>>2])>>>0?2==(0|c)?(a[u>>2]=(0|a[u>>2])+v,S=E,T=v,A=h,C=2):(S=E,T=v,A=h,C=c):(O=0|a[f>>2],a[u>>2]=O,a[l>>2]=O,S=0|a[h+12>>2],T=v-E|0,A=h+8|0,C=c+-1|0),a[A>>2]=(0|a[A>>2])+T,a[A+4>>2]=S-T,h=A,c=C,_=p}return 6==(0|m)?(_=0|a[f>>2],a[e+16>>2]=_+(0|a[e+48>>2]),f=_,a[u>>2]=f,a[l>>2]=f,M=n):8==(0|m)&&(a[e+16>>2]=0,a[u>>2]=0,a[l>>2]=0,a[e>>2]=32|a[e>>2],M=2==(0|y)?0:n-(0|a[g+4>>2])|0),o=r,0|M}function D(e){var t,n,r=0,i=0,o=0,s=0,u=0;return n=(e|=0)+28|0,(0|a[(t=e+20|0)>>2])>>>0>(0|a[n>>2])>>>0&&(Y[3&a[e+36>>2]](e,0,0),0==(0|a[t>>2]))?r=-1:((o=0|a[(i=e+4|0)>>2])>>>0<(u=0|a[(s=e+8|0)>>2])>>>0&&Y[3&a[e+40>>2]](e,o-u|0,1),a[e+16>>2]=0,a[n>>2]=0,a[t>>2]=0,a[s>>2]=0,a[i>>2]=0,r=0),0|r}function N(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(u=t>>n,e>>>n|(t&(1<<n)-1)<<32-n):(u=(0|t)<0?-1:0,t>>n-32|0)}function L(e,t,n,r){return(t|=0)-(r|=0)>>>0,0|(u=t-r-((n|=0)>>>0>(e|=0)>>>0|0)>>>0,e-n>>>0|0)}function x(e,t,n,r){var a;return 0|(u=(t|=0)+(r|=0)+((a=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0,0|a)}function U(e,t,n){t|=0;var i,o=0,s=0,u=0;if(i=(e|=0)+(n|=0)|0,(0|n)>=20){if(s=(t&=255)|t<<8|t<<16|t<<24,u=-4&i,o=3&e)for(o=e+4-o|0;(0|e)<(0|o);)r[e>>0]=t,e=e+1|0;for(;(0|e)<(0|u);)a[e>>2]=s,e=e+4|0}for(;(0|e)<(0|i);)r[e>>0]=t,e=e+1|0;return e-n|0}function F(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(u=t>>>n,e>>>n|(t&(1<<n)-1)<<32-n):(u=0,t>>>n-32|0)}function G(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(u=t<<n|(e&(1<<n)-1<<32-n)>>>32-n,e<<n):(u=e<<n-32,0)}function B(e,t,n,r){t|=0,r|=0;var a,i;return n=0|function(e,t){var n,r,a,i=0;return e=((r=0|l(i=65535&(t|=0),n=65535&(e|=0)))>>>16)+(0|l(i,a=e>>>16))|0,t=0|l(i=t>>>16,n),0|(u=(e>>>16)+(0|l(i,a))+(((65535&e)+t|0)>>>16)|0,e+t<<16|65535&r|0)}(a=e|=0,e=n|=0),i=u,0|(u=(0|l(t,e))+(0|l(r,a))+i|0&i,0|n)}var j=[function(e){return 0,c(0),0},function(e){var t,n;return e|=0,t=o,o=o+16|0,a[(n=t)>>2]=a[e+60>>2],e=0|I(0|h(6,0|n)),o=t,0|e}],Y=[function(e,t,n){return 0,0,0,c(1),0},function(e,t,n){t|=0,n|=0;var i,s=0;return i=o,o=o+80|0,s=i,a[(e|=0)+36>>2]=3,0==(64&a[e>>2]|0)&&(a[s>>2]=a[e+60>>2],a[s+4>>2]=21505,a[s+8>>2]=i+12,0!=(0|y(54,0|s)))&&(r[e+75>>0]=-1),s=0|R(e,t,n),o=i,0|s},function(e,t,n){e|=0,t|=0,n|=0;var r,i,s,u=0;return r=o,o=o+32|0,s=r+20|0,a[(i=r)>>2]=a[e+60>>2],a[i+4>>2]=0,a[i+8>>2]=t,a[i+12>>2]=s,a[i+16>>2]=n,(0|I(0|S(140,0|i)))<0?(a[s>>2]=-1,u=-1):u=0|a[s>>2],o=r,0|u},R],K=[function(e){c(2)},function(e){0|a[(e|=0)+68>>2]||P()}];return{_curve25519_donna:function(e,t,n){e|=0,n|=0;var s,c,d,f,p,h,_,v,m,g,y,E,S,b,T,w,M,I,k,P,R,D,j,Y,K,W,V,H,$,z,q,J,Q,X,Z,ee,te,ne,re,ae,ie,oe,se,ue,le,ce,de,fe,pe,he,_e,ve,me,ge,ye,Ee,Se,be,Te,we=0,Ae=0,Ce=0,Oe=0,Me=0,Ie=0,ke=0,Pe=0,Re=0,De=0,Ne=0,Le=0,xe=0,Ue=0,Fe=0,Ge=0,Be=0,je=0,Ye=0,Ke=0,We=0,Ve=0,He=0,$e=0,ze=0,qe=0,Je=0,Qe=0,Xe=0,Ze=0,et=0,tt=0,nt=0,rt=0,at=0,it=0,ot=0,st=0,ut=0,lt=0,ct=0,dt=0,ft=0,pt=0,ht=0,_t=0,vt=0,mt=0,gt=0,yt=0,Et=0,St=0,bt=0,Tt=0,wt=0,At=0,Ct=0,Ot=0,Mt=0,It=0,kt=0,Pt=0,Rt=0,Dt=0,Nt=0,Lt=0,xt=0,Ut=0,Ft=0,Gt=0,Bt=0,jt=0,Yt=0,Kt=0,Wt=0,Vt=0,Ht=0,$t=0,zt=0,qt=0,Jt=0,Qt=0,Xt=0,Zt=0,en=0,tn=0,nn=0,rn=0,an=0,on=0,sn=0,un=0,ln=0,cn=0,dn=0,fn=0,pn=0,hn=0,_n=0,vn=0,mn=0,gn=0,yn=0,En=0,Sn=0,bn=0,Tn=0,wn=0,An=0,Cn=0,On=0,Mn=0,In=0,kn=0,Pn=0,Rn=0,Dn=0,Nn=0;s=o,o=o+2640|0,we=s+2456|0,Ae=s+2304|0,Ce=s+2152|0,Oe=s+2e3|0,Me=s+1848|0,Ie=s+1696|0,ke=s+1544|0,Pe=s+1392|0,Re=s+1240|0,De=s+1088|0,Ne=s+936|0,Le=s+784|0,xe=s+632|0,Ue=s+480|0,Fe=s+328|0,c=s+248|0,Ge=s+168|0,Be=s+80|0,je=s,Ke=t|=0,t=(Ye=d=s+2608|0)+32|0;do{r[Ye>>0]=0|r[Ke>>0],Ye=Ye+1|0,Ke=Ke+1|0}while((0|Ye)<(0|t));r[d>>0]=248&(0|i[d>>0]),r[(We=d+31|0)>>0]=63&(0|i[We>>0])|64,We=0|i[n>>0],Ve=0|G(0|i[n+1>>0],0,8),He=u,$e=0|G(0|i[n+2>>0],0,16),ze=He|u,qe=0|G(0|(He=0|i[n+3>>0]),0,24),a[(Je=c)>>2]=Ve|We|$e|50331648&qe,a[Je+4>>2]=ze,ze=0|G(0|i[n+4>>0],0,8),Je=u,qe=0|G(0|i[n+5>>0],0,16),$e=Je|u,Ve=0|F(ze|He|qe|(We=0|G(0|(Je=0|i[n+6>>0]),0,24))|0,$e|u|0,2),a[($e=c+8|0)>>2]=33554431&Ve,a[$e+4>>2]=0,$e=0|G(0|i[n+7>>0],0,8),Ve=u,We=0|G(0|i[n+8>>0],0,16),qe=Ve|u,ze=0|F($e|Je|We|(He=0|G(0|(Ve=0|i[n+9>>0]),0,24))|0,qe|u|0,3),a[(qe=c+16|0)>>2]=67108863&ze,a[qe+4>>2]=0,qe=0|G(0|i[n+10>>0],0,8),ze=u,He=0|G(0|i[n+11>>0],0,16),We=ze|u,$e=0|F(qe|Ve|He|(Je=0|G(0|(ze=0|i[n+12>>0]),0,24))|0,We|u|0,5),a[(We=c+24|0)>>2]=33554431&$e,a[We+4>>2]=0,We=0|G(0|i[n+13>>0],0,8),$e=u,Je=0|G(0|i[n+14>>0],0,16),He=$e|u,Ve=0|F(We|ze|Je|($e=0|G(0|i[n+15>>0],0,24))|0,He|u|0,6),a[(He=c+32|0)>>2]=67108863&Ve,a[He+4>>2]=0,He=0|i[n+16>>0],Ve=0|G(0|i[n+17>>0],0,8),$e=u,Je=0|G(0|i[n+18>>0],0,16),ze=$e|u,We=0|G(0|($e=0|i[n+19>>0]),0,24),a[(qe=c+40|0)>>2]=Ve|He|Je|16777216&We,a[qe+4>>2]=ze,ze=0|G(0|i[n+20>>0],0,8),qe=u,We=0|G(0|i[n+21>>0],0,16),Je=qe|u,Ve=0|F(ze|$e|We|(He=0|G(0|(qe=0|i[n+22>>0]),0,24))|0,Je|u|0,1),a[(Je=c+48|0)>>2]=67108863&Ve,a[Je+4>>2]=0,Je=0|G(0|i[n+23>>0],0,8),Ve=u,He=0|G(0|i[n+24>>0],0,16),We=Ve|u,ze=0|F(Je|qe|He|($e=0|G(0|(Ve=0|i[n+25>>0]),0,24))|0,We|u|0,3),a[(We=c+56|0)>>2]=33554431&ze,a[We+4>>2]=0,We=0|G(0|i[n+26>>0],0,8),ze=u,$e=0|G(0|i[n+27>>0],0,16),He=ze|u,Je=0|F(We|Ve|$e|(qe=0|G(0|(ze=0|i[n+28>>0]),0,24))|0,He|u|0,4),a[(He=c+64|0)>>2]=67108863&Je,a[He+4>>2]=0,He=0|G(0|i[n+29>>0],0,8),Je=u,qe=0|G(0|i[n+30>>0],0,16),$e=Je|u,n=0|F(He|ze|qe|(Je=0|G(0|i[n+31>>0],0,24))|0,$e|u|0,6),a[($e=c+72|0)>>2]=33554431&n,a[$e+4>>2]=0,U(0|Re,0,152),a[($e=Re)>>2]=1,a[$e+4>>2]=0,U(0|De,0,152),a[($e=De)>>2]=1,a[$e+4>>2]=0,U(0|Ne,0,152),U(0|Le,0,152),U(0|xe,0,152),a[($e=xe)>>2]=1,a[$e+4>>2]=0,U(0|Ue,0,152),U(0|Fe,0,152),a[($e=Fe)>>2]=1,a[$e+4>>2]=0,t=(Ye=Pe+80|0)+72|0;do{a[Ye>>2]=0,Ye=Ye+4|0}while((0|Ye)<(0|t));Ke=c,t=(Ye=Pe)+80|0;do{a[Ye>>2]=a[Ke>>2],Ye=Ye+4|0,Ke=Ke+4|0}while((0|Ye)<(0|t));for($e=Oe+144|0,n=Oe+64|0,Je=Oe+136|0,qe=Oe+56|0,ze=Oe+128|0,He=Oe+48|0,Ve=Oe+120|0,We=Oe+40|0,f=Oe+112|0,p=Oe+32|0,h=Oe+104|0,_=Oe+24|0,v=Oe+96|0,m=Oe+16|0,g=Oe+88|0,y=Oe+8|0,E=Oe+80|0,S=Me+144|0,b=Me+64|0,T=Me+136|0,w=Me+56|0,M=Me+128|0,I=Me+48|0,k=Me+120|0,P=Me+40|0,R=Me+112|0,D=Me+32|0,j=Me+104|0,Y=Me+24|0,K=Me+96|0,W=Me+16|0,V=Me+88|0,H=Me+8|0,$=Me+80|0,z=Oe+72|0,q=Me+72|0,J=Ae+8|0,Q=Ce+8|0,X=Ae+16|0,Z=Ce+16|0,ee=Ae+24|0,te=Ce+24|0,ne=Ae+32|0,re=Ce+32|0,ae=Ae+40|0,ie=Ce+40|0,oe=Ae+48|0,se=Ce+48|0,ue=Ae+56|0,le=Ce+56|0,ce=Ae+64|0,de=Ce+64|0,fe=Ae+72|0,pe=Ce+72|0,he=we+80|0,_e=we+8|0,ve=we+16|0,me=we+24|0,ge=we+32|0,ye=we+40|0,Ee=we+48|0,Se=we+56|0,be=we+64|0,Te=we+72|0,Qe=0,Xe=Pe,Ze=Le,Le=Re,et=xe,xe=De,tt=Ue,Ue=Ne,Ne=Fe;;){for(Fe=0|r[d+(31-Qe)>>0],nt=0,rt=Xe,at=Ze,it=Le,ot=et,st=xe,ut=tt,lt=Ue,ct=Ne;;){ft=0|L(0,0,(dt=255&Fe)>>>7|0,0),pt=u,ht=0;do{mt=0|a[(vt=_t=st+(ht<<3)|0)>>2],gt=0|a[vt+4>>2],Et=0|a[(yt=vt=rt+(ht<<3)|0)>>2],bt=((St=0|a[yt+4>>2])^gt)&pt,gt=0|N(0,(yt=(Et^mt)&ft)^mt|0,32),a[(mt=_t)>>2]=gt,a[mt+4>>2]=u,mt=0|N(0,yt^Et|0,32),a[(Et=vt)>>2]=mt,a[Et+4>>2]=u,ht=ht+1|0}while(10!=(0|ht));Tt=0;do{mt=0|a[(Et=ht=lt+(Tt<<3)|0)>>2],vt=0|a[Et+4>>2],gt=0|a[(yt=Et=it+(Tt<<3)|0)>>2],St=((_t=0|a[yt+4>>2])^vt)&pt,vt=0|N(0,(yt=(gt^mt)&ft)^mt|0,32),a[(mt=ht)>>2]=vt,a[mt+4>>2]=u,mt=0|N(0,yt^gt|0,32),a[(gt=Et)>>2]=mt,a[gt+4>>2]=u,Tt=Tt+1|0}while(10!=(0|Tt));mt=0|a[(gt=st)>>2],Et=0|a[gt+4>>2],vt=0|a[(yt=gt=st+8|0)>>2],ht=0|a[yt+4>>2],St=0|a[(_t=yt=st+16|0)>>2],bt=0|a[_t+4>>2],At=0|a[(wt=_t=st+24|0)>>2],Ct=0|a[wt+4>>2],Mt=0|a[(Ot=wt=st+32|0)>>2],It=0|a[Ot+4>>2],Pt=0|a[(kt=Ot=st+40|0)>>2],Rt=0|a[kt+4>>2],Nt=0|a[(Dt=kt=st+48|0)>>2],Lt=0|a[Dt+4>>2],Ut=0|a[(xt=Dt=st+56|0)>>2],Ft=0|a[xt+4>>2],Bt=0|a[(Gt=xt=st+64|0)>>2],jt=0|a[Gt+4>>2],Kt=0|a[(Yt=Gt=st+72|0)>>2],Wt=0|a[Yt+4>>2],Yt=0|x(0|(Vt=0|a[(Yt=lt)>>2]),0|(Ht=0|a[Yt+4>>2]),0|mt,0|Et),a[($t=st)>>2]=Yt,a[$t+4>>2]=u,Yt=0|x(0|(zt=0|a[(Yt=$t=lt+8|0)>>2]),0|(qt=0|a[Yt+4>>2]),0|vt,0|ht),a[(Jt=gt)>>2]=Yt,a[Jt+4>>2]=u,Yt=0|x(0|(gt=0|a[(Yt=Jt=lt+16|0)>>2]),0|(Qt=0|a[Yt+4>>2]),0|St,0|bt),a[(Xt=yt)>>2]=Yt,a[Xt+4>>2]=u,Yt=0|x(0|(yt=0|a[(Yt=Xt=lt+24|0)>>2]),0|(Zt=0|a[Yt+4>>2]),0|At,0|Ct),a[(en=_t)>>2]=Yt,a[en+4>>2]=u,Yt=0|x(0|(_t=0|a[(Yt=en=lt+32|0)>>2]),0|(tn=0|a[Yt+4>>2]),0|Mt,0|It),a[(nn=wt)>>2]=Yt,a[nn+4>>2]=u,Yt=0|x(0|(wt=0|a[(Yt=nn=lt+40|0)>>2]),0|(rn=0|a[Yt+4>>2]),0|Pt,0|Rt),a[(an=Ot)>>2]=Yt,a[an+4>>2]=u,Yt=0|x(0|(Ot=0|a[(Yt=an=lt+48|0)>>2]),0|(on=0|a[Yt+4>>2]),0|Nt,0|Lt),a[(sn=kt)>>2]=Yt,a[sn+4>>2]=u,Yt=0|x(0|(kt=0|a[(Yt=sn=lt+56|0)>>2]),0|(un=0|a[Yt+4>>2]),0|Ut,0|Ft),a[(ln=Dt)>>2]=Yt,a[ln+4>>2]=u,Yt=0|x(0|(Dt=0|a[(Yt=ln=lt+64|0)>>2]),0|(cn=0|a[Yt+4>>2]),0|Bt,0|jt),a[(dn=xt)>>2]=Yt,a[dn+4>>2]=u,Yt=0|x(0|(xt=0|a[(Yt=dn=lt+72|0)>>2]),0|(fn=0|a[Yt+4>>2]),0|Kt,0|Wt),a[(pn=Gt)>>2]=Yt,a[pn+4>>2]=u,pn=0|L(0|mt,0|Et,0|Vt,0|Ht),a[(Ht=lt)>>2]=pn,a[Ht+4>>2]=u,Ht=0|L(0|vt,0|ht,0|zt,0|qt),a[(qt=$t)>>2]=Ht,a[qt+4>>2]=u,qt=0|L(0|St,0|bt,0|gt,0|Qt),a[(Qt=Jt)>>2]=qt,a[Qt+4>>2]=u,Qt=0|L(0|At,0|Ct,0|yt,0|Zt),a[(Zt=Xt)>>2]=Qt,a[Zt+4>>2]=u,Zt=0|L(0|Mt,0|It,0|_t,0|tn),a[(tn=en)>>2]=Zt,a[tn+4>>2]=u,tn=0|L(0|Pt,0|Rt,0|wt,0|rn),a[(rn=nn)>>2]=tn,a[rn+4>>2]=u,rn=0|L(0|Nt,0|Lt,0|Ot,0|on),a[(on=an)>>2]=rn,a[on+4>>2]=u,on=0|L(0|Ut,0|Ft,0|kt,0|un),a[(un=sn)>>2]=on,a[un+4>>2]=u,un=0|L(0|Bt,0|jt,0|Dt,0|cn),a[(cn=ln)>>2]=un,a[cn+4>>2]=u,cn=0|L(0|Kt,0|Wt,0|xt,0|fn),a[(fn=dn)>>2]=cn,a[fn+4>>2]=u,cn=0|a[(fn=rt)>>2],dn=0|a[fn+4>>2],Wt=0|a[(xt=fn=rt+8|0)>>2],Kt=0|a[xt+4>>2],ln=0|a[(un=xt=rt+16|0)>>2],Dt=0|a[un+4>>2],Bt=0|a[(jt=un=rt+24|0)>>2],on=0|a[jt+4>>2],kt=0|a[(sn=jt=rt+32|0)>>2],Ft=0|a[sn+4>>2],rn=0|a[(Ut=sn=rt+40|0)>>2],an=0|a[Ut+4>>2],Lt=0|a[(Ot=Ut=rt+48|0)>>2],Nt=0|a[Ot+4>>2],nn=0|a[(tn=Ot=rt+56|0)>>2],wt=0|a[tn+4>>2],Pt=0|a[(Rt=tn=rt+64|0)>>2],Zt=0|a[Rt+4>>2],_t=0|a[(en=Rt=rt+72|0)>>2],It=0|a[en+4>>2],en=0|x(0|(Mt=0|a[(en=it)>>2]),0|(Qt=0|a[en+4>>2]),0|cn,0|dn),a[(Xt=rt)>>2]=en,a[Xt+4>>2]=u,en=0|x(0|(yt=0|a[(en=Xt=it+8|0)>>2]),0|(Ct=0|a[en+4>>2]),0|Wt,0|Kt),a[(At=fn)>>2]=en,a[At+4>>2]=u,en=0|x(0|(fn=0|a[(en=At=it+16|0)>>2]),0|(qt=0|a[en+4>>2]),0|ln,0|Dt),a[(Jt=xt)>>2]=en,a[Jt+4>>2]=u,en=0|x(0|(xt=0|a[(en=Jt=it+24|0)>>2]),0|(gt=0|a[en+4>>2]),0|Bt,0|on),a[(bt=un)>>2]=en,a[bt+4>>2]=u,en=0|x(0|(un=0|a[(en=bt=it+32|0)>>2]),0|(St=0|a[en+4>>2]),0|kt,0|Ft),a[(Ht=jt)>>2]=en,a[Ht+4>>2]=u,en=0|x(0|(jt=0|a[(en=Ht=it+40|0)>>2]),0|($t=0|a[en+4>>2]),0|rn,0|an),a[(zt=sn)>>2]=en,a[zt+4>>2]=u,en=0|x(0|(sn=0|a[(en=zt=it+48|0)>>2]),0|(ht=0|a[en+4>>2]),0|Lt,0|Nt),a[(vt=Ut)>>2]=en,a[vt+4>>2]=u,en=0|x(0|(Ut=0|a[(en=vt=it+56|0)>>2]),0|(pn=0|a[en+4>>2]),0|nn,0|wt),a[(Vt=Ot)>>2]=en,a[Vt+4>>2]=u,en=0|x(0|(Ot=0|a[(en=Vt=it+64|0)>>2]),0|(Et=0|a[en+4>>2]),0|Pt,0|Zt),a[(mt=tn)>>2]=en,a[mt+4>>2]=u,en=0|x(0|(tn=0|a[(en=mt=it+72|0)>>2]),0|(Yt=0|a[en+4>>2]),0|_t,0|It),a[(Gt=Rt)>>2]=en,a[Gt+4>>2]=u,Gt=0|L(0|cn,0|dn,0|Mt,0|Qt),a[(Qt=it)>>2]=Gt,a[Qt+4>>2]=u,Qt=0|L(0|Wt,0|Kt,0|yt,0|Ct),a[(Ct=Xt)>>2]=Qt,a[Ct+4>>2]=u,Ct=0|L(0|ln,0|Dt,0|fn,0|qt),a[(qt=At)>>2]=Ct,a[qt+4>>2]=u,qt=0|L(0|Bt,0|on,0|xt,0|gt),a[(gt=Jt)>>2]=qt,a[gt+4>>2]=u,gt=0|L(0|kt,0|Ft,0|un,0|St),a[(St=bt)>>2]=gt,a[St+4>>2]=u,St=0|L(0|rn,0|an,0|jt,0|$t),a[($t=Ht)>>2]=St,a[$t+4>>2]=u,$t=0|L(0|Lt,0|Nt,0|sn,0|ht),a[(ht=zt)>>2]=$t,a[ht+4>>2]=u,ht=0|L(0|nn,0|wt,0|Ut,0|pn),a[(pn=vt)>>2]=ht,a[pn+4>>2]=u,pn=0|L(0|Pt,0|Zt,0|Ot,0|Et),a[(Et=Vt)>>2]=pn,a[Et+4>>2]=u,Et=0|L(0|_t,0|It,0|tn,0|Yt),a[(Yt=mt)>>2]=Et,a[Yt+4>>2]=u,C(Oe,rt,lt),C(Me,st,it),Et=0|a[(Yt=$e)>>2],mt=0|a[Yt+4>>2],tn=0|a[(Yt=n)>>2],It=0|a[Yt+4>>2],Yt=0|B(0|Et,0|mt,18,0),_t=u,pn=0|x(0|tn,0|It,0|Et,0|mt),mt=0|x(0|pn,0|u,0|Yt,0|_t),a[(_t=n)>>2]=mt,a[_t+4>>2]=u,mt=0|a[(_t=Je)>>2],Yt=0|a[_t+4>>2],pn=0|a[(_t=qe)>>2],Et=0|a[_t+4>>2],_t=0|B(0|mt,0|Yt,18,0),It=u,tn=0|x(0|pn,0|Et,0|mt,0|Yt),Yt=0|x(0|tn,0|u,0|_t,0|It),a[(It=qe)>>2]=Yt,a[It+4>>2]=u,Yt=0|a[(It=ze)>>2],_t=0|a[It+4>>2],tn=0|a[(It=He)>>2],mt=0|a[It+4>>2],It=0|B(0|Yt,0|_t,18,0),Et=u,pn=0|x(0|tn,0|mt,0|Yt,0|_t),_t=0|x(0|pn,0|u,0|It,0|Et),a[(Et=He)>>2]=_t,a[Et+4>>2]=u,_t=0|a[(Et=Ve)>>2],It=0|a[Et+4>>2],pn=0|a[(Et=We)>>2],Yt=0|a[Et+4>>2],Et=0|B(0|_t,0|It,18,0),mt=u,tn=0|x(0|pn,0|Yt,0|_t,0|It),It=0|x(0|tn,0|u,0|Et,0|mt),a[(mt=We)>>2]=It,a[mt+4>>2]=u,It=0|a[(mt=f)>>2],Et=0|a[mt+4>>2],tn=0|a[(mt=p)>>2],_t=0|a[mt+4>>2],mt=0|B(0|It,0|Et,18,0),Yt=u,pn=0|x(0|tn,0|_t,0|It,0|Et),Et=0|x(0|pn,0|u,0|mt,0|Yt),a[(Yt=p)>>2]=Et,a[Yt+4>>2]=u,Et=0|a[(Yt=h)>>2],mt=0|a[Yt+4>>2],pn=0|a[(Yt=_)>>2],It=0|a[Yt+4>>2],Yt=0|B(0|Et,0|mt,18,0),_t=u,tn=0|x(0|pn,0|It,0|Et,0|mt),mt=0|x(0|tn,0|u,0|Yt,0|_t),a[(_t=_)>>2]=mt,a[_t+4>>2]=u,mt=0|a[(_t=v)>>2],Yt=0|a[_t+4>>2],tn=0|a[(_t=m)>>2],Et=0|a[_t+4>>2],_t=0|B(0|mt,0|Yt,18,0),It=u,pn=0|x(0|tn,0|Et,0|mt,0|Yt),Yt=0|x(0|pn,0|u,0|_t,0|It),a[(It=m)>>2]=Yt,a[It+4>>2]=u,Yt=0|a[(It=g)>>2],_t=0|a[It+4>>2],pn=0|a[(It=y)>>2],mt=0|a[It+4>>2],It=0|B(0|Yt,0|_t,18,0),Et=u,tn=0|x(0|pn,0|mt,0|Yt,0|_t),_t=0|x(0|tn,0|u,0|It,0|Et),a[(Et=y)>>2]=_t,a[Et+4>>2]=u,_t=0|a[(Et=E)>>2],It=0|a[Et+4>>2],tn=0|a[(Et=Oe)>>2],Yt=0|a[Et+4>>2],Et=0|B(0|_t,0|It,18,0),mt=u,pn=0|x(0|tn,0|Yt,0|_t,0|It),It=0|x(0|pn,0|u,0|Et,0|mt),mt=u,a[(Et=Oe)>>2]=It,a[Et+4>>2]=mt,a[(Et=E)>>2]=0,a[Et+4>>2]=0,Et=mt,mt=It,It=0;do{tn=0|L(0|mt,0|Et,0|(Yt=0|G(0|(_t=0|N(0|(pn=0|x(Et>>31>>>6|0,0,0|mt,0|Et)),0|u,26)),0|(pn=u),26)),0|u),a[(Yt=Oe+(It<<3)|0)>>2]=tn,a[Yt+4>>2]=u,Zt=0|L(0|(Vt=0|x(0|_t,0|pn,0|a[(tn=Yt=Oe+((1|It)<<3)|0)>>2],0|a[tn+4>>2])),0|(tn=u),0|(Ot=0|G(0|(_t=0|N(0|(pn=0|x(tn>>31>>>7|0,0,0|Vt,0|tn)),0|u,25)),0|(pn=u),25)),0|u),a[(Ot=Yt)>>2]=Zt,a[Ot+4>>2]=u,mt=0|x(0|_t,0|pn,0|a[(Zt=Ot=Oe+((It=It+2|0)<<3)|0)>>2],0|a[Zt+4>>2]),Et=u,a[(Zt=Ot)>>2]=mt,a[Zt+4>>2]=Et}while(It>>>0<10);Et=0|a[(It=E)>>2],mt=0|a[It+4>>2],Zt=0|a[(It=Oe)>>2],Ot=0|a[It+4>>2],It=0|B(0|Et,0|mt,18,0),pn=u,_t=0|x(0|Zt,0|Ot,0|Et,0|mt),mt=0|x(0|_t,0|u,0|It,0|pn),pn=u,a[(It=E)>>2]=0,a[It+4>>2]=0,Ot=0|L(0|mt,0|pn,0|(Et=0|G(0|(_t=0|N(0|(It=0|x(pn>>31>>>6|0,0,0|mt,0|pn)),0|u,26)),0|(It=u),26)),0|u),Et=u,a[(pn=Oe)>>2]=Ot,a[pn+4>>2]=Et,mt=0|x(0|_t,0|It,0|a[(pn=y)>>2],0|a[pn+4>>2]),pn=u,a[(It=y)>>2]=mt,a[It+4>>2]=pn,_t=0|a[(It=S)>>2],Zt=0|a[It+4>>2],Yt=0|a[(It=b)>>2],tn=0|a[It+4>>2],It=0|B(0|_t,0|Zt,18,0),Vt=u,Pt=0|x(0|Yt,0|tn,0|_t,0|Zt),Zt=0|x(0|Pt,0|u,0|It,0|Vt),a[(Vt=b)>>2]=Zt,a[Vt+4>>2]=u,Zt=0|a[(Vt=T)>>2],It=0|a[Vt+4>>2],Pt=0|a[(Vt=w)>>2],_t=0|a[Vt+4>>2],Vt=0|B(0|Zt,0|It,18,0),tn=u,Yt=0|x(0|Pt,0|_t,0|Zt,0|It),It=0|x(0|Yt,0|u,0|Vt,0|tn),a[(tn=w)>>2]=It,a[tn+4>>2]=u,It=0|a[(tn=M)>>2],Vt=0|a[tn+4>>2],Yt=0|a[(tn=I)>>2],Zt=0|a[tn+4>>2],tn=0|B(0|It,0|Vt,18,0),_t=u,Pt=0|x(0|Yt,0|Zt,0|It,0|Vt),Vt=0|x(0|Pt,0|u,0|tn,0|_t),a[(_t=I)>>2]=Vt,a[_t+4>>2]=u,Vt=0|a[(_t=k)>>2],tn=0|a[_t+4>>2],Pt=0|a[(_t=P)>>2],It=0|a[_t+4>>2],_t=0|B(0|Vt,0|tn,18,0),Zt=u,Yt=0|x(0|Pt,0|It,0|Vt,0|tn),tn=0|x(0|Yt,0|u,0|_t,0|Zt),a[(Zt=P)>>2]=tn,a[Zt+4>>2]=u,tn=0|a[(Zt=R)>>2],_t=0|a[Zt+4>>2],Yt=0|a[(Zt=D)>>2],Vt=0|a[Zt+4>>2],Zt=0|B(0|tn,0|_t,18,0),It=u,Pt=0|x(0|Yt,0|Vt,0|tn,0|_t),_t=0|x(0|Pt,0|u,0|Zt,0|It),a[(It=D)>>2]=_t,a[It+4>>2]=u,_t=0|a[(It=j)>>2],Zt=0|a[It+4>>2],Pt=0|a[(It=Y)>>2],tn=0|a[It+4>>2],It=0|B(0|_t,0|Zt,18,0),Vt=u,Yt=0|x(0|Pt,0|tn,0|_t,0|Zt),Zt=0|x(0|Yt,0|u,0|It,0|Vt),a[(Vt=Y)>>2]=Zt,a[Vt+4>>2]=u,Zt=0|a[(Vt=K)>>2],It=0|a[Vt+4>>2],Yt=0|a[(Vt=W)>>2],_t=0|a[Vt+4>>2],Vt=0|B(0|Zt,0|It,18,0),tn=u,Pt=0|x(0|Yt,0|_t,0|Zt,0|It),It=0|x(0|Pt,0|u,0|Vt,0|tn),a[(tn=W)>>2]=It,a[tn+4>>2]=u,It=0|a[(tn=V)>>2],Vt=0|a[tn+4>>2],Pt=0|a[(tn=H)>>2],Zt=0|a[tn+4>>2],tn=0|B(0|It,0|Vt,18,0),_t=u,Yt=0|x(0|Pt,0|Zt,0|It,0|Vt),Vt=0|x(0|Yt,0|u,0|tn,0|_t),a[(_t=H)>>2]=Vt,a[_t+4>>2]=u,Vt=0|a[(_t=$)>>2],tn=0|a[_t+4>>2],Yt=0|a[(_t=Me)>>2],It=0|a[_t+4>>2],_t=0|B(0|Vt,0|tn,18,0),Zt=u,Pt=0|x(0|Yt,0|It,0|Vt,0|tn),tn=0|x(0|Pt,0|u,0|_t,0|Zt),Zt=u,a[(_t=Me)>>2]=tn,a[_t+4>>2]=Zt,a[(_t=$)>>2]=0,a[_t+4>>2]=0,_t=Zt,Zt=tn,tn=0;do{Yt=0|L(0|Zt,0|_t,0|(It=0|G(0|(Vt=0|N(0|(Pt=0|x(_t>>31>>>6|0,0,0|Zt,0|_t)),0|u,26)),0|(Pt=u),26)),0|u),a[(It=Me+(tn<<3)|0)>>2]=Yt,a[It+4>>2]=u,Ut=0|L(0|(ht=0|x(0|Vt,0|Pt,0|a[(Yt=It=Me+((1|tn)<<3)|0)>>2],0|a[Yt+4>>2])),0|(Yt=u),0|(vt=0|G(0|(Vt=0|N(0|(Pt=0|x(Yt>>31>>>7|0,0,0|ht,0|Yt)),0|u,25)),0|(Pt=u),25)),0|u),a[(vt=It)>>2]=Ut,a[vt+4>>2]=u,Zt=0|x(0|Vt,0|Pt,0|a[(Ut=vt=Me+((tn=tn+2|0)<<3)|0)>>2],0|a[Ut+4>>2]),_t=u,a[(Ut=vt)>>2]=Zt,a[Ut+4>>2]=_t}while(tn>>>0<10);_t=0|a[(tn=$)>>2],Zt=0|a[tn+4>>2],Ut=0|a[(tn=Me)>>2],vt=0|a[tn+4>>2],tn=0|B(0|_t,0|Zt,18,0),Pt=u,Vt=0|x(0|Ut,0|vt,0|_t,0|Zt),Zt=0|x(0|Vt,0|u,0|tn,0|Pt),Pt=u,a[(tn=$)>>2]=0,a[tn+4>>2]=0,vt=0|L(0|Zt,0|Pt,0|(_t=0|G(0|(Vt=0|N(0|(tn=0|x(Pt>>31>>>6|0,0,0|Zt,0|Pt)),0|u,26)),0|(tn=u),26)),0|u),_t=u,Zt=0|x(0|Vt,0|tn,0|a[(Pt=H)>>2],0|a[Pt+4>>2]),Pt=u,Vt=0|a[(tn=m)>>2],Ut=0|a[tn+4>>2],It=0|a[(tn=_)>>2],Yt=0|a[tn+4>>2],ht=0|a[(tn=p)>>2],wt=0|a[tn+4>>2],nn=0|a[(tn=We)>>2],$t=0|a[tn+4>>2],zt=0|a[(tn=He)>>2],sn=0|a[tn+4>>2],Nt=0|a[(tn=qe)>>2],Lt=0|a[tn+4>>2],St=0|a[(tn=n)>>2],Ht=0|a[tn+4>>2],jt=0|a[(tn=z)>>2],an=0|a[tn+4>>2],tn=0|x(0|vt,0|_t,0|Ot,0|Et),a[(rn=Oe)>>2]=tn,a[rn+4>>2]=u,rn=0|x(0|Zt,0|Pt,0|mt,0|pn),a[(tn=y)>>2]=rn,a[tn+4>>2]=u,tn=0|x(0|(rn=0|a[(tn=W)>>2]),0|(gt=0|a[tn+4>>2]),0|Vt,0|Ut),a[(bt=m)>>2]=tn,a[bt+4>>2]=u,bt=0|x(0|(tn=0|a[(bt=Y)>>2]),0|(un=0|a[bt+4>>2]),0|It,0|Yt),a[(Ft=_)>>2]=bt,a[Ft+4>>2]=u,Ft=0|x(0|(bt=0|a[(Ft=D)>>2]),0|(kt=0|a[Ft+4>>2]),0|ht,0|wt),a[(qt=p)>>2]=Ft,a[qt+4>>2]=u,qt=0|x(0|(Ft=0|a[(qt=P)>>2]),0|(Jt=0|a[qt+4>>2]),0|nn,0|$t),a[(xt=We)>>2]=qt,a[xt+4>>2]=u,xt=0|x(0|(qt=0|a[(xt=I)>>2]),0|(on=0|a[xt+4>>2]),0|zt,0|sn),a[(Bt=He)>>2]=xt,a[Bt+4>>2]=u,Bt=0|x(0|(xt=0|a[(Bt=w)>>2]),0|(Ct=0|a[Bt+4>>2]),0|Nt,0|Lt),a[(At=qe)>>2]=Bt,a[At+4>>2]=u,At=0|x(0|(Bt=0|a[(At=b)>>2]),0|(fn=0|a[At+4>>2]),0|St,0|Ht),a[(Dt=n)>>2]=At,a[Dt+4>>2]=u,Dt=0|x(0|(At=0|a[(Dt=q)>>2]),0|(ln=0|a[Dt+4>>2]),0|jt,0|an),a[(Qt=z)>>2]=Dt,a[Qt+4>>2]=u,Qt=0|L(0|Ot,0|Et,0|vt,0|_t),a[(_t=Me)>>2]=Qt,a[_t+4>>2]=u,_t=0|L(0|mt,0|pn,0|Zt,0|Pt),a[(Pt=H)>>2]=_t,a[Pt+4>>2]=u,Pt=0|L(0|Vt,0|Ut,0|rn,0|gt),a[(gt=W)>>2]=Pt,a[gt+4>>2]=u,gt=0|L(0|It,0|Yt,0|tn,0|un),a[(un=Y)>>2]=gt,a[un+4>>2]=u,un=0|L(0|ht,0|wt,0|bt,0|kt),a[(kt=D)>>2]=un,a[kt+4>>2]=u,kt=0|L(0|nn,0|$t,0|Ft,0|Jt),a[(Jt=P)>>2]=kt,a[Jt+4>>2]=u,Jt=0|L(0|zt,0|sn,0|qt,0|on),a[(on=I)>>2]=Jt,a[on+4>>2]=u,on=0|L(0|Nt,0|Lt,0|xt,0|Ct),a[(Ct=w)>>2]=on,a[Ct+4>>2]=u,Ct=0|L(0|St,0|Ht,0|Bt,0|fn),a[(fn=b)>>2]=Ct,a[fn+4>>2]=u,fn=0|L(0|jt,0|an,0|At,0|ln),a[(ln=q)>>2]=fn,a[ln+4>>2]=u,O(ke,Oe),O(Ie,Me),C(Me,Ie,c),fn=0|a[(ln=S)>>2],At=0|a[ln+4>>2],an=0|a[(ln=b)>>2],jt=0|a[ln+4>>2],ln=0|B(0|fn,0|At,18,0),Ct=u,Bt=0|x(0|an,0|jt,0|fn,0|At),At=0|x(0|Bt,0|u,0|ln,0|Ct),a[(Ct=b)>>2]=At,a[Ct+4>>2]=u,At=0|a[(Ct=T)>>2],ln=0|a[Ct+4>>2],Bt=0|a[(Ct=w)>>2],fn=0|a[Ct+4>>2],Ct=0|B(0|At,0|ln,18,0),jt=u,an=0|x(0|Bt,0|fn,0|At,0|ln),ln=0|x(0|an,0|u,0|Ct,0|jt),a[(jt=w)>>2]=ln,a[jt+4>>2]=u,ln=0|a[(jt=M)>>2],Ct=0|a[jt+4>>2],an=0|a[(jt=I)>>2],At=0|a[jt+4>>2],jt=0|B(0|ln,0|Ct,18,0),fn=u,Bt=0|x(0|an,0|At,0|ln,0|Ct),Ct=0|x(0|Bt,0|u,0|jt,0|fn),a[(fn=I)>>2]=Ct,a[fn+4>>2]=u,Ct=0|a[(fn=k)>>2],jt=0|a[fn+4>>2],Bt=0|a[(fn=P)>>2],ln=0|a[fn+4>>2],fn=0|B(0|Ct,0|jt,18,0),At=u,an=0|x(0|Bt,0|ln,0|Ct,0|jt),jt=0|x(0|an,0|u,0|fn,0|At),a[(At=P)>>2]=jt,a[At+4>>2]=u,jt=0|a[(At=R)>>2],fn=0|a[At+4>>2],an=0|a[(At=D)>>2],Ct=0|a[At+4>>2],At=0|B(0|jt,0|fn,18,0),ln=u,Bt=0|x(0|an,0|Ct,0|jt,0|fn),fn=0|x(0|Bt,0|u,0|At,0|ln),a[(ln=D)>>2]=fn,a[ln+4>>2]=u,fn=0|a[(ln=j)>>2],At=0|a[ln+4>>2],Bt=0|a[(ln=Y)>>2],jt=0|a[ln+4>>2],ln=0|B(0|fn,0|At,18,0),Ct=u,an=0|x(0|Bt,0|jt,0|fn,0|At),At=0|x(0|an,0|u,0|ln,0|Ct),a[(Ct=Y)>>2]=At,a[Ct+4>>2]=u,At=0|a[(Ct=K)>>2],ln=0|a[Ct+4>>2],an=0|a[(Ct=W)>>2],fn=0|a[Ct+4>>2],Ct=0|B(0|At,0|ln,18,0),jt=u,Bt=0|x(0|an,0|fn,0|At,0|ln),ln=0|x(0|Bt,0|u,0|Ct,0|jt),a[(jt=W)>>2]=ln,a[jt+4>>2]=u,ln=0|a[(jt=V)>>2],Ct=0|a[jt+4>>2],Bt=0|a[(jt=H)>>2],At=0|a[jt+4>>2],jt=0|B(0|ln,0|Ct,18,0),fn=u,an=0|x(0|Bt,0|At,0|ln,0|Ct),Ct=0|x(0|an,0|u,0|jt,0|fn),a[(fn=H)>>2]=Ct,a[fn+4>>2]=u,Ct=0|a[(fn=$)>>2],jt=0|a[fn+4>>2],an=0|a[(fn=Me)>>2],ln=0|a[fn+4>>2],fn=0|B(0|Ct,0|jt,18,0),At=u,Bt=0|x(0|an,0|ln,0|Ct,0|jt),jt=0|x(0|Bt,0|u,0|fn,0|At),At=u,a[(fn=Me)>>2]=jt,a[fn+4>>2]=At,a[(fn=$)>>2]=0,a[fn+4>>2]=0,fn=At,At=jt,jt=0;do{an=0|L(0|At,0|fn,0|(ln=0|G(0|(Ct=0|N(0|(Bt=0|x(fn>>31>>>6|0,0,0|At,0|fn)),0|u,26)),0|(Bt=u),26)),0|u),a[(ln=Me+(jt<<3)|0)>>2]=an,a[ln+4>>2]=u,on=0|L(0|(Ht=0|x(0|Ct,0|Bt,0|a[(an=ln=Me+((1|jt)<<3)|0)>>2],0|a[an+4>>2])),0|(an=u),0|(St=0|G(0|(Ct=0|N(0|(Bt=0|x(an>>31>>>7|0,0,0|Ht,0|an)),0|u,25)),0|(Bt=u),25)),0|u),a[(St=ln)>>2]=on,a[St+4>>2]=u,At=0|x(0|Ct,0|Bt,0|a[(on=St=Me+((jt=jt+2|0)<<3)|0)>>2],0|a[on+4>>2]),fn=u,a[(on=St)>>2]=At,a[on+4>>2]=fn}while(jt>>>0<10);fn=0|a[(jt=$)>>2],At=0|a[jt+4>>2],pn=0|a[(jt=Me)>>2],mt=0|a[jt+4>>2],jt=0|B(0|fn,0|At,18,0),Et=u,Ot=0|x(0|pn,0|mt,0|fn,0|At),At=0|x(0|Ot,0|u,0|jt,0|Et),Et=u,a[(jt=$)>>2]=0,a[jt+4>>2]=0,mt=0|L(0|At,0|Et,0|(fn=0|G(0|(Ot=0|N(0|(jt=0|x(Et>>31>>>6|0,0,0|At,0|Et)),0|u,26)),0|(jt=u),26)),0|u),a[(fn=Me)>>2]=mt,a[fn+4>>2]=u,mt=0|x(0|Ot,0|jt,0|a[(fn=H)>>2],0|a[fn+4>>2]),a[(fn=H)>>2]=mt,a[fn+4>>2]=u,Ke=ke,t=(Ye=at)+80|0;do{a[Ye>>2]=a[Ke>>2],Ye=Ye+4|0,Ke=Ke+4|0}while((0|Ye)<(0|t));Ke=Me,t=(Ye=ot)+80|0;do{a[Ye>>2]=a[Ke>>2],Ye=Ye+4|0,Ke=Ke+4|0}while((0|Ye)<(0|t));O(Ae,st),O(Ce,lt),C(ut,Ae,Ce),mt=0|a[(fn=ut+144|0)>>2],jt=0|a[fn+4>>2],Et=0|a[(Ot=fn=ut+64|0)>>2],At=0|a[Ot+4>>2],Ot=0|B(0|mt,0|jt,18,0),pn=u,on=0|x(0|Et,0|At,0|mt,0|jt),jt=0|x(0|on,0|u,0|Ot,0|pn),a[(pn=fn)>>2]=jt,a[pn+4>>2]=u,jt=0|a[(pn=ut+136|0)>>2],fn=0|a[pn+4>>2],on=0|a[(Ot=pn=ut+56|0)>>2],mt=0|a[Ot+4>>2],Ot=0|B(0|jt,0|fn,18,0),At=u,Et=0|x(0|on,0|mt,0|jt,0|fn),fn=0|x(0|Et,0|u,0|Ot,0|At),a[(At=pn)>>2]=fn,a[At+4>>2]=u,fn=0|a[(At=ut+128|0)>>2],pn=0|a[At+4>>2],Et=0|a[(Ot=At=ut+48|0)>>2],jt=0|a[Ot+4>>2],Ot=0|B(0|fn,0|pn,18,0),mt=u,on=0|x(0|Et,0|jt,0|fn,0|pn),pn=0|x(0|on,0|u,0|Ot,0|mt),a[(mt=At)>>2]=pn,a[mt+4>>2]=u,pn=0|a[(mt=ut+120|0)>>2],At=0|a[mt+4>>2],on=0|a[(Ot=mt=ut+40|0)>>2],fn=0|a[Ot+4>>2],Ot=0|B(0|pn,0|At,18,0),jt=u,Et=0|x(0|on,0|fn,0|pn,0|At),At=0|x(0|Et,0|u,0|Ot,0|jt),a[(jt=mt)>>2]=At,a[jt+4>>2]=u,At=0|a[(jt=ut+112|0)>>2],mt=0|a[jt+4>>2],Et=0|a[(Ot=jt=ut+32|0)>>2],pn=0|a[Ot+4>>2],Ot=0|B(0|At,0|mt,18,0),fn=u,on=0|x(0|Et,0|pn,0|At,0|mt),mt=0|x(0|on,0|u,0|Ot,0|fn),a[(fn=jt)>>2]=mt,a[fn+4>>2]=u,mt=0|a[(fn=ut+104|0)>>2],jt=0|a[fn+4>>2],on=0|a[(Ot=fn=ut+24|0)>>2],At=0|a[Ot+4>>2],Ot=0|B(0|mt,0|jt,18,0),pn=u,Et=0|x(0|on,0|At,0|mt,0|jt),jt=0|x(0|Et,0|u,0|Ot,0|pn),a[(pn=fn)>>2]=jt,a[pn+4>>2]=u,jt=0|a[(pn=ut+96|0)>>2],fn=0|a[pn+4>>2],Et=0|a[(Ot=pn=ut+16|0)>>2],mt=0|a[Ot+4>>2],Ot=0|B(0|jt,0|fn,18,0),At=u,on=0|x(0|Et,0|mt,0|jt,0|fn),fn=0|x(0|on,0|u,0|Ot,0|At),a[(At=pn)>>2]=fn,a[At+4>>2]=u,fn=0|a[(At=ut+88|0)>>2],pn=0|a[At+4>>2],on=0|a[(Ot=At=ut+8|0)>>2],jt=0|a[Ot+4>>2],Ot=0|B(0|fn,0|pn,18,0),mt=u,Et=0|x(0|on,0|jt,0|fn,0|pn),pn=0|x(0|Et,0|u,0|Ot,0|mt),a[(mt=At)>>2]=pn,a[mt+4>>2]=u,Ot=0|a[(pn=mt=ut+80|0)>>2],Et=0|a[pn+4>>2],fn=0|a[(pn=ut)>>2],jt=0|a[pn+4>>2],pn=0|B(0|Ot,0|Et,18,0),on=u,St=0|x(0|fn,0|jt,0|Ot,0|Et),Et=0|x(0|St,0|u,0|pn,0|on),on=u,a[(pn=ut)>>2]=Et,a[pn+4>>2]=on,a[(pn=mt)>>2]=0,a[pn+4>>2]=0,pn=on,on=Et,Et=0;do{fn=0|L(0|on,0|pn,0|(jt=0|G(0|(Ot=0|N(0|(St=0|x(pn>>31>>>6|0,0,0|on,0|pn)),0|u,26)),0|(St=u),26)),0|u),a[(jt=ut+(Et<<3)|0)>>2]=fn,a[jt+4>>2]=u,ln=0|L(0|(Bt=0|x(0|Ot,0|St,0|a[(fn=jt=ut+((1|Et)<<3)|0)>>2],0|a[fn+4>>2])),0|(fn=u),0|(Ct=0|G(0|(Ot=0|N(0|(St=0|x(fn>>31>>>7|0,0,0|Bt,0|fn)),0|u,25)),0|(St=u),25)),0|u),a[(Ct=jt)>>2]=ln,a[Ct+4>>2]=u,on=0|x(0|Ot,0|St,0|a[(ln=Ct=ut+((Et=Et+2|0)<<3)|0)>>2],0|a[ln+4>>2]),pn=u,a[(ln=Ct)>>2]=on,a[ln+4>>2]=pn}while(Et>>>0<10);pn=0|a[(Et=mt)>>2],on=0|a[Et+4>>2],ln=0|a[(Et=ut)>>2],Ct=0|a[Et+4>>2],Et=0|B(0|pn,0|on,18,0),St=u,Ot=0|x(0|ln,0|Ct,0|pn,0|on),on=0|x(0|Ot,0|u,0|Et,0|St),St=u,a[(Et=mt)>>2]=0,a[Et+4>>2]=0,Ct=0|L(0|on,0|St,0|(pn=0|G(0|(Ot=0|N(0|(Et=0|x(St>>31>>>6|0,0,0|on,0|St)),0|u,26)),0|(Et=u),26)),0|u),a[(pn=ut)>>2]=Ct,a[pn+4>>2]=u,Ct=0|x(0|Ot,0|Et,0|a[(pn=At)>>2],0|a[pn+4>>2]),a[(pn=At)>>2]=Ct,a[pn+4>>2]=u,Ot=0|L(0|(Ct=0|a[(pn=Ae)>>2]),0|(Et=0|a[pn+4>>2]),0|a[(pn=Ce)>>2],0|a[pn+4>>2]),pn=u,a[(St=Ce)>>2]=Ot,a[St+4>>2]=pn,jt=0|L(0|(on=0|a[(St=J)>>2]),0|(ln=0|a[St+4>>2]),0|a[(St=Q)>>2],0|a[St+4>>2]),St=u,a[(fn=Q)>>2]=jt,a[fn+4>>2]=St,Ht=0|L(0|(Bt=0|a[(fn=X)>>2]),0|(an=0|a[fn+4>>2]),0|a[(fn=Z)>>2],0|a[fn+4>>2]),fn=u,a[(xt=Z)>>2]=Ht,a[xt+4>>2]=fn,Jt=0|L(0|(Lt=0|a[(xt=ee)>>2]),0|(Nt=0|a[xt+4>>2]),0|a[(xt=te)>>2],0|a[xt+4>>2]),xt=u,a[(qt=te)>>2]=Jt,a[qt+4>>2]=xt,kt=0|L(0|(sn=0|a[(qt=ne)>>2]),0|(zt=0|a[qt+4>>2]),0|a[(qt=re)>>2],0|a[qt+4>>2]),qt=u,a[(Ft=re)>>2]=kt,a[Ft+4>>2]=qt,un=0|L(0|($t=0|a[(Ft=ae)>>2]),0|(nn=0|a[Ft+4>>2]),0|a[(Ft=ie)>>2],0|a[Ft+4>>2]),Ft=u,a[(bt=ie)>>2]=un,a[bt+4>>2]=Ft,gt=0|L(0|(wt=0|a[(bt=oe)>>2]),0|(ht=0|a[bt+4>>2]),0|a[(bt=se)>>2],0|a[bt+4>>2]),bt=u,a[(tn=se)>>2]=gt,a[tn+4>>2]=bt,Pt=0|L(0|(Yt=0|a[(tn=ue)>>2]),0|(It=0|a[tn+4>>2]),0|a[(tn=le)>>2],0|a[tn+4>>2]),tn=u,a[(rn=le)>>2]=Pt,a[rn+4>>2]=tn,_t=0|L(0|(Ut=0|a[(rn=ce)>>2]),0|(Vt=0|a[rn+4>>2]),0|a[(rn=de)>>2],0|a[rn+4>>2]),rn=u,a[(Zt=de)>>2]=_t,a[Zt+4>>2]=rn,Dt=0|L(0|(Qt=0|a[(Zt=fe)>>2]),0|(vt=0|a[Zt+4>>2]),0|a[(Zt=pe)>>2],0|a[Zt+4>>2]),Zt=u,a[(Xt=pe)>>2]=Dt,a[Xt+4>>2]=Zt,t=(Ye=he)+72|0;do{a[Ye>>2]=0,Ye=Ye+4|0}while((0|Ye)<(0|t));At=0|B(0|Ot,0|pn,121665,0),mt=u,a[(Xt=we)>>2]=At,a[Xt+4>>2]=mt,Xt=0|B(0|jt,0|St,121665,0),a[(yt=_e)>>2]=Xt,a[yt+4>>2]=u,yt=0|B(0|Ht,0|fn,121665,0),a[(Xt=ve)>>2]=yt,a[Xt+4>>2]=u,Xt=0|B(0|Jt,0|xt,121665,0),a[(yt=me)>>2]=Xt,a[yt+4>>2]=u,yt=0|B(0|kt,0|qt,121665,0),a[(Xt=ge)>>2]=yt,a[Xt+4>>2]=u,Xt=0|B(0|un,0|Ft,121665,0),a[(yt=ye)>>2]=Xt,a[yt+4>>2]=u,yt=0|B(0|gt,0|bt,121665,0),a[(Xt=Ee)>>2]=yt,a[Xt+4>>2]=u,Xt=0|B(0|Pt,0|tn,121665,0),a[(yt=Se)>>2]=Xt,a[yt+4>>2]=u,yt=0|B(0|_t,0|rn,121665,0),a[(Xt=be)>>2]=yt,a[Xt+4>>2]=u,Xt=0|B(0|Dt,0|Zt,121665,0),a[(yt=Te)>>2]=Xt,a[yt+4>>2]=u,a[(yt=he)>>2]=0,a[yt+4>>2]=0,yt=mt,mt=At,At=0;do{Gt=0|L(0|mt,0|yt,0|(Wt=0|G(0|(Kt=0|N(0|(Xt=0|x(yt>>31>>>6|0,0,0|mt,0|yt)),0|u,26)),0|(Xt=u),26)),0|u),a[(Wt=we+(At<<3)|0)>>2]=Gt,a[Wt+4>>2]=u,cn=0|L(0|(Mt=0|x(0|Kt,0|Xt,0|a[(Gt=Wt=we+((1|At)<<3)|0)>>2],0|a[Gt+4>>2])),0|(Gt=u),0|(dn=0|G(0|(Kt=0|N(0|(Xt=0|x(Gt>>31>>>7|0,0,0|Mt,0|Gt)),0|u,25)),0|(Xt=u),25)),0|u),a[(dn=Wt)>>2]=cn,a[dn+4>>2]=u,mt=0|x(0|Kt,0|Xt,0|a[(cn=dn=we+((At=At+2|0)<<3)|0)>>2],0|a[cn+4>>2]),yt=u,a[(cn=dn)>>2]=mt,a[cn+4>>2]=yt}while(At>>>0<10);yt=0|a[(At=he)>>2],mt=0|a[At+4>>2],Zt=0|a[(At=we)>>2],Dt=0|a[At+4>>2],At=0|B(0|yt,0|mt,18,0),rn=u,_t=0|x(0|Zt,0|Dt,0|yt,0|mt),mt=0|x(0|_t,0|u,0|At,0|rn),rn=u,a[(At=he)>>2]=0,a[At+4>>2]=0,yt=0|G(0|(_t=0|N(0|(At=0|x(rn>>31>>>6|0,0,0|mt,0|rn)),0|u,26)),0|(At=u),26),Dt=u,tn=0|a[(Zt=_e)>>2],Pt=0|a[Zt+4>>2],rn=0|L(0|(Zt=0|x(0|mt,0|rn,0|Ct,0|Et)),0|u,0|yt,0|Dt),a[(Dt=we)>>2]=rn,a[Dt+4>>2]=u,Dt=0|x(0|tn,0|Pt,0|on,0|ln),Pt=0|x(0|Dt,0|u,0|_t,0|At),a[(At=_e)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=ve)>>2],0|a[At+4>>2],0|Bt,0|an),a[(At=ve)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=me)>>2],0|a[At+4>>2],0|Lt,0|Nt),a[(At=me)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=ge)>>2],0|a[At+4>>2],0|sn,0|zt),a[(At=ge)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=ye)>>2],0|a[At+4>>2],0|$t,0|nn),a[(At=ye)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=Ee)>>2],0|a[At+4>>2],0|wt,0|ht),a[(At=Ee)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=Se)>>2],0|a[At+4>>2],0|Yt,0|It),a[(At=Se)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=be)>>2],0|a[At+4>>2],0|Ut,0|Vt),a[(At=be)>>2]=Pt,a[At+4>>2]=u,Pt=0|x(0|a[(At=Te)>>2],0|a[At+4>>2],0|Qt,0|vt),a[(At=Te)>>2]=Pt,a[At+4>>2]=u,C(ct,Ce,we),Pt=0|a[(At=ct+144|0)>>2],_t=0|a[At+4>>2],tn=0|a[(Dt=At=ct+64|0)>>2],rn=0|a[Dt+4>>2],Dt=0|B(0|Pt,0|_t,18,0),yt=u,Zt=0|x(0|tn,0|rn,0|Pt,0|_t),_t=0|x(0|Zt,0|u,0|Dt,0|yt),a[(yt=At)>>2]=_t,a[yt+4>>2]=u,_t=0|a[(yt=ct+136|0)>>2],At=0|a[yt+4>>2],Zt=0|a[(Dt=yt=ct+56|0)>>2],Pt=0|a[Dt+4>>2],Dt=0|B(0|_t,0|At,18,0),rn=u,tn=0|x(0|Zt,0|Pt,0|_t,0|At),At=0|x(0|tn,0|u,0|Dt,0|rn),a[(rn=yt)>>2]=At,a[rn+4>>2]=u,At=0|a[(rn=ct+128|0)>>2],yt=0|a[rn+4>>2],tn=0|a[(Dt=rn=ct+48|0)>>2],_t=0|a[Dt+4>>2],Dt=0|B(0|At,0|yt,18,0),Pt=u,Zt=0|x(0|tn,0|_t,0|At,0|yt),yt=0|x(0|Zt,0|u,0|Dt,0|Pt),a[(Pt=rn)>>2]=yt,a[Pt+4>>2]=u,yt=0|a[(Pt=ct+120|0)>>2],rn=0|a[Pt+4>>2],Zt=0|a[(Dt=Pt=ct+40|0)>>2],At=0|a[Dt+4>>2],Dt=0|B(0|yt,0|rn,18,0),_t=u,tn=0|x(0|Zt,0|At,0|yt,0|rn),rn=0|x(0|tn,0|u,0|Dt,0|_t),a[(_t=Pt)>>2]=rn,a[_t+4>>2]=u,rn=0|a[(_t=ct+112|0)>>2],Pt=0|a[_t+4>>2],tn=0|a[(Dt=_t=ct+32|0)>>2],yt=0|a[Dt+4>>2],Dt=0|B(0|rn,0|Pt,18,0),At=u,Zt=0|x(0|tn,0|yt,0|rn,0|Pt),Pt=0|x(0|Zt,0|u,0|Dt,0|At),a[(At=_t)>>2]=Pt,a[At+4>>2]=u,Pt=0|a[(At=ct+104|0)>>2],_t=0|a[At+4>>2],Zt=0|a[(Dt=At=ct+24|0)>>2],rn=0|a[Dt+4>>2],Dt=0|B(0|Pt,0|_t,18,0),yt=u,tn=0|x(0|Zt,0|rn,0|Pt,0|_t),_t=0|x(0|tn,0|u,0|Dt,0|yt),a[(yt=At)>>2]=_t,a[yt+4>>2]=u,_t=0|a[(yt=ct+96|0)>>2],At=0|a[yt+4>>2],tn=0|a[(Dt=yt=ct+16|0)>>2],Pt=0|a[Dt+4>>2],Dt=0|B(0|_t,0|At,18,0),rn=u,Zt=0|x(0|tn,0|Pt,0|_t,0|At),At=0|x(0|Zt,0|u,0|Dt,0|rn),a[(rn=yt)>>2]=At,a[rn+4>>2]=u,At=0|a[(rn=ct+88|0)>>2],yt=0|a[rn+4>>2],Zt=0|a[(Dt=rn=ct+8|0)>>2],_t=0|a[Dt+4>>2],Dt=0|B(0|At,0|yt,18,0),Pt=u,tn=0|x(0|Zt,0|_t,0|At,0|yt),yt=0|x(0|tn,0|u,0|Dt,0|Pt),a[(Pt=rn)>>2]=yt,a[Pt+4>>2]=u,Dt=0|a[(yt=Pt=ct+80|0)>>2],tn=0|a[yt+4>>2],At=0|a[(yt=ct)>>2],_t=0|a[yt+4>>2],yt=0|B(0|Dt,0|tn,18,0),Zt=u,mt=0|x(0|At,0|_t,0|Dt,0|tn),tn=0|x(0|mt,0|u,0|yt,0|Zt),Zt=u,a[(yt=ct)>>2]=tn,a[yt+4>>2]=Zt,a[(yt=Pt)>>2]=0,a[yt+4>>2]=0,yt=Zt,Zt=tn,tn=0;do{At=0|L(0|Zt,0|yt,0|(_t=0|G(0|(Dt=0|N(0|(mt=0|x(yt>>31>>>6|0,0,0|Zt,0|yt)),0|u,26)),0|(mt=u),26)),0|u),a[(_t=ct+(tn<<3)|0)>>2]=At,a[_t+4>>2]=u,Ft=0|L(0|(bt=0|x(0|Dt,0|mt,0|a[(At=_t=ct+((1|tn)<<3)|0)>>2],0|a[At+4>>2])),0|(At=u),0|(gt=0|G(0|(Dt=0|N(0|(mt=0|x(At>>31>>>7|0,0,0|bt,0|At)),0|u,25)),0|(mt=u),25)),0|u),a[(gt=_t)>>2]=Ft,a[gt+4>>2]=u,Zt=0|x(0|Dt,0|mt,0|a[(Ft=gt=ct+((tn=tn+2|0)<<3)|0)>>2],0|a[Ft+4>>2]),yt=u,a[(Ft=gt)>>2]=Zt,a[Ft+4>>2]=yt}while(tn>>>0<10);yt=0|a[(tn=Pt)>>2],Zt=0|a[tn+4>>2],vt=0|a[(tn=ct)>>2],Qt=0|a[tn+4>>2],tn=0|B(0|yt,0|Zt,18,0),Vt=u,Ut=0|x(0|vt,0|Qt,0|yt,0|Zt),Zt=0|x(0|Ut,0|u,0|tn,0|Vt),Vt=u,a[(tn=Pt)>>2]=0,a[tn+4>>2]=0,Qt=0|L(0|Zt,0|Vt,0|(yt=0|G(0|(Ut=0|N(0|(tn=0|x(Vt>>31>>>6|0,0,0|Zt,0|Vt)),0|u,26)),0|(tn=u),26)),0|u),a[(yt=ct)>>2]=Qt,a[yt+4>>2]=u,Qt=0|x(0|Ut,0|tn,0|a[(yt=rn)>>2],0|a[yt+4>>2]),a[(yt=rn)>>2]=Qt,a[yt+4>>2]=u,yt=0;do{Ut=0|a[(tn=Qt=ut+(yt<<3)|0)>>2],Vt=0|a[tn+4>>2],vt=0|a[(Zt=tn=at+(yt<<3)|0)>>2],Yt=((It=0|a[Zt+4>>2])^Vt)&pt,Vt=0|N(0,(Zt=(vt^Ut)&ft)^Ut|0,32),a[(Ut=Qt)>>2]=Vt,a[Ut+4>>2]=u,Ut=0|N(0,Zt^vt|0,32),a[(vt=tn)>>2]=Ut,a[vt+4>>2]=u,yt=yt+1|0}while(10!=(0|yt));hn=0;do{Pt=0|a[(rn=yt=ct+(hn<<3)|0)>>2],vt=0|a[rn+4>>2],tn=0|a[(Ut=rn=ot+(hn<<3)|0)>>2],Vt=((Zt=0|a[Ut+4>>2])^vt)&pt,vt=0|N(0,(Ut=(tn^Pt)&ft)^Pt|0,32),a[(Pt=yt)>>2]=vt,a[Pt+4>>2]=u,Pt=0|N(0,Ut^tn|0,32),a[(tn=rn)>>2]=Pt,a[tn+4>>2]=u,hn=hn+1|0}while(10!=(0|hn));if(8==(0|(nt=nt+1|0))){_n=rt,vn=at,mn=it,gn=ot,yn=st,En=ut,Sn=lt,bn=ct;break}pt=ct,ft=ut,tn=ot,Pt=at,Fe=dt<<1&255,ct=lt,lt=pt,ut=st,st=ft,ot=it,it=tn,at=rt,rt=Pt}if(32==(0|(rt=Qe+1|0))){Tn=En,wn=bn;break}Qe=rt,Xe=vn,Ze=_n,Le=gn,et=mn,xe=En,tt=yn,Ue=bn,Ne=Sn}Ke=Tn,t=(Ye=Ge)+80|0;do{a[Ye>>2]=a[Ke>>2],Ye=Ye+4|0,Ke=Ke+4|0}while((0|Ye)<(0|t));Ke=wn,t=(Ye=Be)+80|0;do{a[Ye>>2]=a[Ke>>2],Ye=Ye+4|0,Ke=Ke+4|0}while((0|Ye)<(0|t));O(we,Be),O(De,we),O(Re,De),A(Ae,Re,Be),A(Ce,Ae,we),O(Re,Ce),A(Oe,Re,Ae),O(Re,Oe),O(De,Re),O(Re,De),O(De,Re),O(Re,De),A(Me,Re,Oe),O(Re,Me),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),A(Ie,De,Me),O(Re,Ie),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),A(Re,De,Ie),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),O(Re,De),A(ke,Re,Me),O(Re,ke),O(De,Re),Me=2;do{O(Re,De),O(De,Re),Me=Me+2|0}while((0|Me)<50);A(Pe,De,ke),O(De,Pe),O(Re,De),Me=2;do{O(De,Re),O(Re,De),Me=Me+2|0}while((0|Me)<100);A(De,Re,Pe),O(Re,De),O(De,Re),Pe=2;do{O(Re,De),O(De,Re),Pe=Pe+2|0}while((0|Pe)<50);for(A(Re,De,ke),O(De,Re),O(Re,De),O(De,Re),O(Re,De),O(De,Re),A(je,De,Ce),A(Be,Ge,je),je=0|a[Be>>2],a[we>>2]=je,a[(Ge=we+4|0)>>2]=a[Be+8>>2],a[(Ce=we+8|0)>>2]=a[Be+16>>2],a[(De=we+12|0)>>2]=a[Be+24>>2],a[(Re=we+16|0)>>2]=a[Be+32>>2],a[(ke=we+20|0)>>2]=a[Be+40>>2],a[(Pe=we+24|0)>>2]=a[Be+48>>2],a[(Me=we+28|0)>>2]=a[Be+56>>2],a[(Ie=we+32|0)>>2]=a[Be+64>>2],a[(Oe=we+36|0)>>2]=a[Be+72>>2],Be=je,je=0;Ae=we+(je<<2)|0,Ke=Be>>31&Be,1&je?(t=Ke>>25,a[Ae>>2]=(0|l(t,-33554432))+Be,Tn=(0|a[(Ke=we+((Ae=je+1|0)<<2)|0)>>2])+t|0,a[Ke>>2]=Tn,An=Tn,Cn=Ae):(Ye=Ke>>26,a[Ae>>2]=(0|l(Ye,-67108864))+Be,Tn=(0|a[(wn=we+((t=je+1|0)<<2)|0)>>2])+Ye|0,a[wn>>2]=Tn,An=Tn,Cn=t),9!=(0|Cn);)Be=An,je=Cn;for(je=((Cn=0|a[Oe>>2])>>31&Cn)>>25,a[Oe>>2]=(0|l(je,-33554432))+Cn,Cn=(19*je|0)+(0|a[we>>2])|0,a[we>>2]=Cn,je=Cn,Cn=0;An=we+(Cn<<2)|0,Be=je>>31&je,1&Cn?(t=Be>>25,a[An>>2]=(0|l(t,-33554432))+je,Tn=(0|a[(Be=we+((An=Cn+1|0)<<2)|0)>>2])+t|0,a[Be>>2]=Tn,On=An,Mn=Tn):(Ae=Be>>26,a[An>>2]=(0|l(Ae,-67108864))+je,t=(0|a[(Ke=we+((Tn=Cn+1|0)<<2)|0)>>2])+Ae|0,a[Ke>>2]=t,On=Tn,Mn=t),9!=(0|On);)je=Mn,Cn=On;for(Cn=((On=0|a[Oe>>2])>>31&On)>>25,a[Oe>>2]=(0|l(Cn,-33554432))+On,On=(19*Cn|0)+(0|a[we>>2])|0,Mn=(0|l(Cn=(On>>31&On)>>26,-67108864))+On|0,a[we>>2]=Mn,a[Ge>>2]=Cn+(0|a[Ge>>2]),Cn=Mn,Mn=0;On=we+(Mn<<2)|0,1&Mn?(a[On>>2]=33554431&Cn,je=(0|a[(An=we+((On=Mn+1|0)<<2)|0)>>2])+(Cn>>25)|0,a[An>>2]=je,In=On,kn=je):(a[On>>2]=67108863&Cn,An=(0|a[(Tn=we+((je=Mn+1|0)<<2)|0)>>2])+(Cn>>26)|0,a[Tn>>2]=An,In=je,kn=An),9!=(0|In);)Cn=kn,Mn=In;for(In=0|a[Oe>>2],a[Oe>>2]=33554431&In,Mn=(19*(In>>25)|0)+(0|a[we>>2])|0,a[we>>2]=Mn,In=Mn,Mn=0;kn=we+(Mn<<2)|0,1&Mn?(a[kn>>2]=33554431&In,Cn=(0|a[(On=we+((kn=Mn+1|0)<<2)|0)>>2])+(In>>25)|0,a[On>>2]=Cn,Pn=kn,Rn=Cn):(a[kn>>2]=67108863&In,On=(0|a[(je=we+((Cn=Mn+1|0)<<2)|0)>>2])+(In>>26)|0,a[je>>2]=On,Pn=Cn,Rn=On),9!=(0|Pn);)In=Rn,Mn=Pn;for(Mn=33554431&(Pn=0|a[Oe>>2]),a[Oe>>2]=Mn,Rn=(19*(Pn>>25)|0)+(0|a[we>>2])|0,a[we>>2]=Rn,Pn=1,In=~(Rn+-67108845>>31);;){if(Cn=0|a[we+(Pn<<2)>>2],Dn=1&Pn?(Cn=(On=(Cn=(On=Cn<<16&(-33554432^Cn))<<8&On)<<4&Cn)<<2&On)<<1&Cn:(On=(kn=(On=(kn=Cn<<16&(-67108864^Cn))<<8&kn)<<4&On)<<2&kn)<<1&On,Cn=Dn>>31&In,10==(0|(Pn=Pn+1|0))){Nn=Cn;break}In=Cn}return In=Rn-(67108845&Nn)|0,a[we>>2]=In,we=67108863&Nn,Rn=33554431&Nn,Dn=(Pn=(0|a[Ge>>2])-Rn|0)<<2,On=(Cn=(0|a[Ce>>2])-we|0)<<3,je=(kn=(0|a[De>>2])-Rn|0)<<5,Nn=(An=(0|a[Re>>2])-Nn|0)<<6,Tn=(0|a[ke>>2])-Rn|0,a[ke>>2]=Tn,Be=(ke=(0|a[Pe>>2])-we|0)<<1,Ke=(t=(0|a[Me>>2])-Rn|0)<<3,Ae=(0|a[Ie>>2])-we<<4,a[Ge>>2]=Dn,a[Ce>>2]=On,a[De>>2]=je,a[Re>>2]=Nn,a[Pe>>2]=Be,a[Me>>2]=Ke,a[Ie>>2]=Ae,a[Oe>>2]=Mn-Rn<<6,r[e>>0]=In,r[e+1>>0]=In>>>8,r[e+2>>0]=In>>>16,r[e+3>>0]=Dn|In>>>24,r[e+4>>0]=Pn>>>6,r[e+5>>0]=Pn>>>14,r[e+6>>0]=On|Pn>>>22,r[e+7>>0]=Cn>>>5,r[e+8>>0]=Cn>>>13,r[e+9>>0]=je|Cn>>>21,r[e+10>>0]=kn>>>3,r[e+11>>0]=kn>>>11,r[e+12>>0]=Nn|kn>>>19,r[e+13>>0]=An>>>2,r[e+14>>0]=An>>>10,r[e+15>>0]=An>>>18,r[e+16>>0]=Tn,r[e+17>>0]=Tn>>>8,r[e+18>>0]=Tn>>>16,r[e+19>>0]=Tn>>>24|Be,r[e+20>>0]=ke>>>7,r[e+21>>0]=ke>>>15,r[e+22>>0]=ke>>>23|Ke,r[e+23>>0]=t>>>5,r[e+24>>0]=t>>>13,Ke=0|a[Ie>>2],r[e+25>>0]=t>>>21|Ke,r[e+26>>0]=Ke>>>8,r[e+27>>0]=Ke>>>16,t=0|a[Oe>>2],r[e+28>>0]=Ke>>>24|t,r[e+29>>0]=t>>>8,r[e+30>>0]=t>>>16,r[e+31>>0]=t>>>24,o=s,0},_free:function(e){var t,n,r=0,i=0,o=0,s=0,u=0,l=0,c=0,d=0,f=0,p=0,h=0,v=0,m=0,g=0,y=0,E=0,S=0,b=0,T=0,w=0,A=0,C=0,O=0,M=0,I=0,k=0,P=0,R=0,D=0,N=0,L=0,x=0,U=0,F=0;if(e|=0){(r=e+-8|0)>>>0<(i=0|a[47])>>>0&&_(),1==(0|(e=3&(t=0|a[e+-4>>2])))&&_(),n=r+(o=-8&t)|0;do{if(1&t)f=r,p=o;else{if(s=0|a[r>>2],!e)return;if(l=s+o|0,(u=r+(0-s)|0)>>>0<i>>>0&&_(),(0|u)==(0|a[48])){if(3!=(3&(d=0|a[(c=n+4|0)>>2])|0)){f=u,p=l;break}return a[45]=l,a[c>>2]=-2&d,a[u+4>>2]=1|l,void(a[u+l>>2]=l)}if(d=s>>>3,s>>>0<256){if(s=0|a[u+8>>2],c=0|a[u+12>>2],(0|s)!=(0|(h=212+(d<<1<<2)|0))&&(s>>>0<i>>>0&&_(),(0|a[s+12>>2])!=(0|u)&&_()),(0|c)==(0|s)){a[43]=a[43]&~(1<<d),f=u,p=l;break}(0|c)!=(0|h)?(c>>>0<i>>>0&&_(),(0|a[(h=c+8|0)>>2])==(0|u)?v=h:_()):v=c+8|0,a[s+12>>2]=c,a[v>>2]=s,f=u,p=l;break}s=0|a[u+24>>2],c=0|a[u+12>>2];do{if((0|c)==(0|u)){if(m=0|a[(d=(h=u+16|0)+4|0)>>2])E=m,S=d;else{if(!(g=0|a[h>>2])){y=0;break}E=g,S=h}for(;;)if(m=0|a[(d=E+20|0)>>2])E=m,S=d;else{if(!(m=0|a[(d=E+16|0)>>2])){b=E,T=S;break}E=m,S=d}if(!(T>>>0<i>>>0)){a[T>>2]=0,y=b;break}_()}else{if((d=0|a[u+8>>2])>>>0<i>>>0&&_(),(0|a[(m=d+12|0)>>2])!=(0|u)&&_(),(0|a[(h=c+8|0)>>2])==(0|u)){a[m>>2]=c,a[h>>2]=d,y=c;break}_()}}while(0);if(s){if(c=0|a[u+28>>2],(0|u)==(0|a[(d=476+(c<<2)|0)>>2])){if(a[d>>2]=y,!y){a[44]=a[44]&~(1<<c),f=u,p=l;break}}else if(s>>>0<(0|a[47])>>>0&&_(),(0|a[(c=s+16|0)>>2])==(0|u)?a[c>>2]=y:a[s+20>>2]=y,!y){f=u,p=l;break}y>>>0<(c=0|a[47])>>>0&&_(),a[y+24>>2]=s,h=0|a[(d=u+16|0)>>2];do{if(h){if(!(h>>>0<c>>>0)){a[y+16>>2]=h,a[h+24>>2]=y;break}_()}}while(0);if(h=0|a[d+4>>2]){if(!(h>>>0<(0|a[47])>>>0)){a[y+20>>2]=h,a[h+24>>2]=y,f=u,p=l;break}_()}else f=u,p=l}else f=u,p=l}}while(0);if(f>>>0>=n>>>0&&_(),1&(r=0|a[(o=n+4|0)>>2])||_(),2&r)a[o>>2]=-2&r,a[f+4>>2]=1|p,a[f+p>>2]=p,k=p;else{if((0|n)==(0|a[49])){if(y=(0|a[46])+p|0,a[46]=y,a[49]=f,a[f+4>>2]=1|y,(0|f)!=(0|a[48]))return;return a[48]=0,void(a[45]=0)}if((0|n)==(0|a[48]))return y=(0|a[45])+p|0,a[45]=y,a[48]=f,a[f+4>>2]=1|y,void(a[f+y>>2]=y);y=(-8&r)+p|0,i=r>>>3;do{if(r>>>0>=256){b=0|a[n+24>>2],T=0|a[n+12>>2];do{if((0|T)==(0|n)){if(v=0|a[(E=(S=n+16|0)+4|0)>>2])A=v,C=E;else{if(!(e=0|a[S>>2])){w=0;break}A=e,C=S}for(;;)if(v=0|a[(E=A+20|0)>>2])A=v,C=E;else{if(!(v=0|a[(E=A+16|0)>>2])){O=A,M=C;break}A=v,C=E}if(!(M>>>0<(0|a[47])>>>0)){a[M>>2]=0,w=O;break}_()}else{if((E=0|a[n+8>>2])>>>0<(0|a[47])>>>0&&_(),(0|a[(v=E+12|0)>>2])!=(0|n)&&_(),(0|a[(S=T+8|0)>>2])==(0|n)){a[v>>2]=T,a[S>>2]=E,w=T;break}_()}}while(0);if(b){if(T=0|a[n+28>>2],(0|n)==(0|a[(l=476+(T<<2)|0)>>2])){if(a[l>>2]=w,!w){a[44]=a[44]&~(1<<T);break}}else if(b>>>0<(0|a[47])>>>0&&_(),(0|a[(T=b+16|0)>>2])==(0|n)?a[T>>2]=w:a[b+20>>2]=w,!w)break;w>>>0<(T=0|a[47])>>>0&&_(),a[w+24>>2]=b,u=0|a[(l=n+16|0)>>2];do{if(u){if(!(u>>>0<T>>>0)){a[w+16>>2]=u,a[u+24>>2]=w;break}_()}}while(0);if(u=0|a[l+4>>2]){if(!(u>>>0<(0|a[47])>>>0)){a[w+20>>2]=u,a[u+24>>2]=w;break}_()}}}else{if(u=0|a[n+8>>2],T=0|a[n+12>>2],(0|u)!=(0|(b=212+(i<<1<<2)|0))&&(u>>>0<(0|a[47])>>>0&&_(),(0|a[u+12>>2])!=(0|n)&&_()),(0|T)==(0|u)){a[43]=a[43]&~(1<<i);break}(0|T)!=(0|b)?(T>>>0<(0|a[47])>>>0&&_(),(0|a[(b=T+8|0)>>2])==(0|n)?I=b:_()):I=T+8|0,a[u+12>>2]=T,a[I>>2]=u}}while(0);if(a[f+4>>2]=1|y,a[f+y>>2]=y,(0|f)==(0|a[48]))return void(a[45]=y);k=y}if(p=k>>>3,k>>>0<256)return r=212+(p<<1<<2)|0,(o=0|a[43])&(y=1<<p)?(I=0|a[(p=r+8|0)>>2])>>>0<(0|a[47])>>>0?_():(P=p,R=I):(a[43]=o|y,P=r+8|0,R=r),a[P>>2]=f,a[R+12>>2]=f,a[f+8>>2]=R,void(a[f+12>>2]=r);D=(r=k>>>8)?k>>>0>16777215?31:k>>>((o=14-((r=((P=r<<(R=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|R|(P=((y=P<<r)+245760|0)>>>16&2))+(y<<P>>>15)|0)+7|0)&1|o<<1:0,o=476+(D<<2)|0,a[f+28>>2]=D,a[f+20>>2]=0,a[f+16>>2]=0,P=0|a[44],y=1<<D;do{if(P&y){for(R=k<<(31==(0|D)?0:25-(D>>>1)|0),r=0|a[o>>2];;){if((-8&a[r+4>>2]|0)==(0|k)){N=r,L=130;break}if(!(p=0|a[(I=r+16+(R>>>31<<2)|0)>>2])){x=I,U=r,L=127;break}R<<=1,r=p}if(127==(0|L)){if(!(x>>>0<(0|a[47])>>>0)){a[x>>2]=f,a[f+24>>2]=U,a[f+12>>2]=f,a[f+8>>2]=f;break}_()}else if(130==(0|L)){if((R=0|a[(r=N+8|0)>>2])>>>0>=(l=0|a[47])>>>0&N>>>0>=l>>>0){a[R+12>>2]=f,a[r>>2]=f,a[f+8>>2]=R,a[f+12>>2]=N,a[f+24>>2]=0;break}_()}}else a[44]=P|y,a[o>>2]=f,a[f+24>>2]=o,a[f+12>>2]=f,a[f+8>>2]=f}while(0);if(f=(0|a[51])-1|0,a[51]=f,!f){for(F=628;f=0|a[F>>2];)F=f+8|0;a[51]=-1}}},_i64Add:x,_bitshift64Ashr:N,_i64Subtract:L,_memset:U,_malloc:function(e){e|=0;var t=0,n=0,r=0,i=0,o=0,s=0,u=0,l=0,c=0,d=0,f=0,p=0,h=0,g=0,y=0,E=0,S=0,b=0,w=0,A=0,C=0,O=0,I=0,k=0,P=0,R=0,D=0,N=0,L=0,x=0,U=0,F=0,G=0,B=0,j=0,Y=0,K=0,W=0,V=0,H=0,$=0,z=0,q=0,J=0,Q=0,X=0,Z=0,ee=0,te=0,ne=0,re=0,ae=0,ie=0,oe=0,se=0,ue=0,le=0,ce=0,de=0,fe=0,pe=0,he=0,_e=0,ve=0,me=0,ge=0,ye=0,Ee=0,Se=0,be=0,Te=0,we=0,Ae=0,Ce=0,Oe=0,Me=0,Ie=0,ke=0,Pe=0,Re=0,De=0,Ne=0,Le=0,xe=0,Ue=0,Fe=0,Ge=0,Be=0,je=0,Ye=0;do{if(e>>>0<245){if(n=(t=e>>>0<11?16:e+11&-8)>>>3,3&(i=(r=0|a[43])>>>n)){l=0|a[(u=(s=212+((o=(1&i^1)+n|0)<<1<<2)|0)+8|0)>>2],d=0|a[(c=l+8|0)>>2];do{if((0|s)!=(0|d)){if(d>>>0<(0|a[47])>>>0&&_(),(0|a[(f=d+12|0)>>2])==(0|l)){a[f>>2]=s,a[u>>2]=d;break}_()}else a[43]=r&~(1<<o)}while(0);return d=o<<3,a[l+4>>2]=3|d,a[(u=l+d+4|0)>>2]=1|a[u>>2],0|c}if(t>>>0>(u=0|a[45])>>>0){if(i){p=0|a[(g=(h=212+((y=((d=(f=(d=((s=i<<n&((d=2<<n)|0-d))&0-s)-1|0)>>>(s=d>>>12&16))>>>5&8)|s|(f=(p=f>>>d)>>>2&4)|(p=(h=p>>>f)>>>1&2)|(h=(g=h>>>p)>>>1&1))+(g>>>h)|0)<<1<<2)|0)+8|0)>>2],s=0|a[(f=p+8|0)>>2];do{if((0|h)!=(0|s)){if(s>>>0<(0|a[47])>>>0&&_(),(0|a[(d=s+12|0)>>2])==(0|p)){a[d>>2]=h,a[g>>2]=s,E=0|a[45];break}_()}else a[43]=r&~(1<<y),E=u}while(0);return u=(y<<3)-t|0,a[p+4>>2]=3|t,a[(r=p+t|0)+4>>2]=1|u,a[r+u>>2]=u,E&&(s=0|a[48],h=212+((g=E>>>3)<<1<<2)|0,(n=0|a[43])&(i=1<<g)?(c=0|a[(g=h+8|0)>>2])>>>0<(0|a[47])>>>0?_():(S=g,b=c):(a[43]=n|i,S=h+8|0,b=h),a[S>>2]=s,a[b+12>>2]=s,a[s+8>>2]=b,a[s+12>>2]=h),a[45]=u,a[48]=r,0|f}if(r=0|a[44]){for(c=0|a[476+(((u=(h=(u=(r&0-r)-1|0)>>>(r=u>>>12&16))>>>5&8)|r|(h=(s=h>>>u)>>>2&4)|(s=(i=s>>>h)>>>1&2)|(i=(n=i>>>s)>>>1&1))+(n>>>i)<<2)>>2],i=(-8&a[c+4>>2])-t|0,n=c,s=c;;){if(c=0|a[n+16>>2])C=c;else{if(!(h=0|a[n+20>>2])){w=i,A=s;break}C=h}i=(h=(c=(-8&a[C+4>>2])-t|0)>>>0<i>>>0)?c:i,n=C,s=h?C:s}A>>>0<(s=0|a[47])>>>0&&_(),A>>>0>=(n=A+t|0)>>>0&&_(),i=0|a[A+24>>2],f=0|a[A+12>>2];do{if((0|f)==(0|A)){if(y=0|a[(p=A+20|0)>>2])I=y,k=p;else{if(!(c=0|a[(h=A+16|0)>>2])){O=0;break}I=c,k=h}for(;;)if(y=0|a[(p=I+20|0)>>2])I=y,k=p;else{if(!(y=0|a[(p=I+16|0)>>2])){P=I,R=k;break}I=y,k=p}if(!(R>>>0<s>>>0)){a[R>>2]=0,O=P;break}_()}else{if((p=0|a[A+8>>2])>>>0<s>>>0&&_(),(0|a[(y=p+12|0)>>2])!=(0|A)&&_(),(0|a[(h=f+8|0)>>2])==(0|A)){a[y>>2]=f,a[h>>2]=p,O=f;break}_()}}while(0);do{if(i){if(f=0|a[A+28>>2],(0|A)==(0|a[(s=476+(f<<2)|0)>>2])){if(a[s>>2]=O,!O){a[44]=a[44]&~(1<<f);break}}else if(i>>>0<(0|a[47])>>>0&&_(),(0|a[(f=i+16|0)>>2])==(0|A)?a[f>>2]=O:a[i+20>>2]=O,!O)break;O>>>0<(f=0|a[47])>>>0&&_(),a[O+24>>2]=i,s=0|a[A+16>>2];do{if(s){if(!(s>>>0<f>>>0)){a[O+16>>2]=s,a[s+24>>2]=O;break}_()}}while(0);if(s=0|a[A+20>>2]){if(!(s>>>0<(0|a[47])>>>0)){a[O+20>>2]=s,a[s+24>>2]=O;break}_()}}}while(0);return w>>>0<16?(i=w+t|0,a[A+4>>2]=3|i,a[(s=A+i+4|0)>>2]=1|a[s>>2]):(a[A+4>>2]=3|t,a[n+4>>2]=1|w,a[n+w>>2]=w,(s=0|a[45])&&(i=0|a[48],s=212+((f=s>>>3)<<1<<2)|0,(p=0|a[43])&(h=1<<f)?(y=0|a[(f=s+8|0)>>2])>>>0<(0|a[47])>>>0?_():(D=f,N=y):(a[43]=p|h,D=s+8|0,N=s),a[D>>2]=i,a[N+12>>2]=i,a[i+8>>2]=N,a[i+12>>2]=s),a[45]=w,a[48]=n),0|(A+8|0)}L=t}else L=t}else if(e>>>0<=4294967231)if(i=-8&(s=e+11|0),h=0|a[44]){p=0-i|0,x=(y=s>>>8)?i>>>0>16777215?31:i>>>((r=14-((y=((f=y<<(s=(y+1048320|0)>>>16&8))+520192|0)>>>16&4)|s|(f=((c=f<<y)+245760|0)>>>16&2))+(c<<f>>>15)|0)+7|0)&1|r<<1:0,r=0|a[476+(x<<2)>>2];e:do{if(r)for(f=p,c=0,s=i<<(31==(0|x)?0:25-(x>>>1)|0),y=r,u=0;;){if((l=(g=-8&a[y+4>>2])-i|0)>>>0<f>>>0){if((0|g)==(0|i)){j=l,Y=y,K=y,B=90;break e}W=l,V=y}else W=f,V=u;if(g=0==(0|(l=0|a[y+20>>2]))|(0|l)==(0|(y=0|a[y+16+(s>>>31<<2)>>2]))?c:l,l=0==(0|y)){U=W,F=g,G=V,B=86;break}f=W,c=g,s<<=1&l^1,u=V}else U=p,F=0,G=0,B=86}while(0);if(86==(0|B)){if(0==(0|F)&0==(0|G)){if(!(p=h&((r=2<<x)|0-r))){L=i;break}H=0|a[476+(((r=(t=(r=(p&0-p)-1|0)>>>(p=r>>>12&16))>>>5&8)|p|(t=(n=t>>>r)>>>2&4)|(n=(u=n>>>t)>>>1&2)|(u=(s=u>>>n)>>>1&1))+(s>>>u)<<2)>>2]}else H=F;H?(j=U,Y=H,K=G,B=90):($=U,z=G)}if(90==(0|B))for(;;)if(B=0,n=(s=(u=(-8&a[Y+4>>2])-i|0)>>>0<j>>>0)?u:j,u=s?Y:K,s=0|a[Y+16>>2])j=n,Y=s,K=u,B=90;else{if(!(Y=0|a[Y+20>>2])){$=n,z=u;break}j=n,K=u,B=90}if(0!=(0|z)&&$>>>0<((0|a[45])-i|0)>>>0){z>>>0<(h=0|a[47])>>>0&&_(),z>>>0>=(u=z+i|0)>>>0&&_(),n=0|a[z+24>>2],s=0|a[z+12>>2];do{if((0|s)==(0|z)){if(p=0|a[(t=z+20|0)>>2])J=p,Q=t;else{if(!(c=0|a[(r=z+16|0)>>2])){q=0;break}J=c,Q=r}for(;;)if(p=0|a[(t=J+20|0)>>2])J=p,Q=t;else{if(!(p=0|a[(t=J+16|0)>>2])){X=J,Z=Q;break}J=p,Q=t}if(!(Z>>>0<h>>>0)){a[Z>>2]=0,q=X;break}_()}else{if((t=0|a[z+8>>2])>>>0<h>>>0&&_(),(0|a[(p=t+12|0)>>2])!=(0|z)&&_(),(0|a[(r=s+8|0)>>2])==(0|z)){a[p>>2]=s,a[r>>2]=t,q=s;break}_()}}while(0);do{if(n){if(s=0|a[z+28>>2],(0|z)==(0|a[(h=476+(s<<2)|0)>>2])){if(a[h>>2]=q,!q){a[44]=a[44]&~(1<<s);break}}else if(n>>>0<(0|a[47])>>>0&&_(),(0|a[(s=n+16|0)>>2])==(0|z)?a[s>>2]=q:a[n+20>>2]=q,!q)break;q>>>0<(s=0|a[47])>>>0&&_(),a[q+24>>2]=n,h=0|a[z+16>>2];do{if(h){if(!(h>>>0<s>>>0)){a[q+16>>2]=h,a[h+24>>2]=q;break}_()}}while(0);if(h=0|a[z+20>>2]){if(!(h>>>0<(0|a[47])>>>0)){a[q+20>>2]=h,a[h+24>>2]=q;break}_()}}}while(0);do{if($>>>0>=16){if(a[z+4>>2]=3|i,a[u+4>>2]=1|$,a[u+$>>2]=$,n=$>>>3,$>>>0<256){h=212+(n<<1<<2)|0,(s=0|a[43])&(t=1<<n)?(r=0|a[(n=h+8|0)>>2])>>>0<(0|a[47])>>>0?_():(ee=n,te=r):(a[43]=s|t,ee=h+8|0,te=h),a[ee>>2]=u,a[te+12>>2]=u,a[u+8>>2]=te,a[u+12>>2]=h;break}if(ne=(h=$>>>8)?$>>>0>16777215?31:$>>>((n=14-((h=((s=h<<(t=(h+1048320|0)>>>16&8))+520192|0)>>>16&4)|t|(s=((r=s<<h)+245760|0)>>>16&2))+(r<<s>>>15)|0)+7|0)&1|n<<1:0,n=476+(ne<<2)|0,a[u+28>>2]=ne,a[(s=u+16|0)+4>>2]=0,a[s>>2]=0,!((s=0|a[44])&(r=1<<ne))){a[44]=s|r,a[n>>2]=u,a[u+24>>2]=n,a[u+12>>2]=u,a[u+8>>2]=u;break}for(r=$<<(31==(0|ne)?0:25-(ne>>>1)|0),s=0|a[n>>2];;){if((-8&a[s+4>>2]|0)==(0|$)){re=s,B=148;break}if(!(t=0|a[(n=s+16+(r>>>31<<2)|0)>>2])){ae=n,ie=s,B=145;break}r<<=1,s=t}if(145==(0|B)){if(!(ae>>>0<(0|a[47])>>>0)){a[ae>>2]=u,a[u+24>>2]=ie,a[u+12>>2]=u,a[u+8>>2]=u;break}_()}else if(148==(0|B)){if((r=0|a[(s=re+8|0)>>2])>>>0>=(t=0|a[47])>>>0&re>>>0>=t>>>0){a[r+12>>2]=u,a[s>>2]=u,a[u+8>>2]=r,a[u+12>>2]=re,a[u+24>>2]=0;break}_()}}else r=$+i|0,a[z+4>>2]=3|r,a[(s=z+r+4|0)>>2]=1|a[s>>2]}while(0);return 0|(z+8|0)}L=i}else L=i;else L=-1}while(0);if((z=0|a[45])>>>0>=L>>>0)return $=z-L|0,re=0|a[48],$>>>0>15?(ie=re+L|0,a[48]=ie,a[45]=$,a[ie+4>>2]=1|$,a[ie+$>>2]=$,a[re+4>>2]=3|L):(a[45]=0,a[48]=0,a[re+4>>2]=3|z,a[($=re+z+4|0)>>2]=1|a[$>>2]),0|(re+8|0);if((re=0|a[46])>>>0>L>>>0)return $=re-L|0,a[46]=$,z=(re=0|a[49])+L|0,a[49]=z,a[z+4>>2]=1|$,a[re+4>>2]=3|L,0|(re+8|0);do{if(!(0|a[161])){if(!((re=0|T(30))+-1&re)){a[163]=re,a[162]=re,a[164]=-1,a[165]=-1,a[166]=0,a[154]=0,a[161]=-16&(0|m(0))^1431655768;break}_()}}while(0);if(re=L+48|0,($=(ie=($=0|a[163])+(z=L+47|0)|0)&(ae=0-$|0))>>>0<=L>>>0)return 0|0;if(0!=(0|(ne=0|a[153]))&&(ee=(te=0|a[151])+$|0)>>>0<=te>>>0|ee>>>0>ne>>>0)return 0|0;e:do{if(4&a[154])B=190;else{ne=0|a[49];t:do{if(ne){for(ee=620;;){if((te=0|a[ee>>2])>>>0<=ne>>>0&&(te+(0|a[(q=ee+4|0)>>2])|0)>>>0>ne>>>0){oe=ee,se=q;break}if(!(ee=0|a[ee+8>>2])){B=173;break t}}if((ee=ie-(0|a[46])&ae)>>>0<2147483647)if((0|(q=0|v(0|ee)))==((0|a[oe>>2])+(0|a[se>>2])|0)){if(-1!=(0|q)){ue=q,le=ee,B=193;break e}}else ce=q,de=ee,B=183}else B=173}while(0);do{if(173==(0|B)&&-1!=(0|(ne=0|v(0)))&&(i=ne,fe=(q=(ee=0|a[162])+-1|0)&i?$-i+(q+i&0-ee)|0:$,i=(ee=0|a[151])+fe|0,fe>>>0>L>>>0&fe>>>0<2147483647)){if(0!=(0|(q=0|a[153]))&&i>>>0<=ee>>>0|i>>>0>q>>>0)break;if((0|(q=0|v(0|fe)))==(0|ne)){ue=ne,le=fe,B=193;break e}ce=q,de=fe,B=183}}while(0);t:do{if(183==(0|B)){q=0-de|0;do{if(re>>>0>de>>>0&de>>>0<2147483647&-1!=(0|ce)&&(i=z-de+(ne=0|a[163])&0-ne)>>>0<2147483647){if(-1==(0|v(0|i))){v(0|q);break t}pe=i+de|0;break}pe=de}while(0);if(-1!=(0|ce)){ue=ce,le=pe,B=193;break e}}}while(0);a[154]=4|a[154],B=190}}while(0);if(190==(0|B)&&$>>>0<2147483647&&(pe=0|v(0|$))>>>0<($=0|v(0))>>>0&-1!=(0|pe)&-1!=(0|$)&&(ce=$-pe|0)>>>0>(L+40|0)>>>0&&(ue=pe,le=ce,B=193),193==(0|B)){ce=(0|a[151])+le|0,a[151]=ce,ce>>>0>(0|a[152])>>>0&&(a[152]=ce),ce=0|a[49];do{if(ce){pe=620;do{if((0|ue)==(($=0|a[pe>>2])+(z=0|a[(de=pe+4|0)>>2])|0)){he=$,_e=de,ve=z,me=pe,B=203;break}pe=0|a[pe+8>>2]}while(0!=(0|pe));if(203==(0|B)&&0==(8&a[me+12>>2]|0)&&ce>>>0<ue>>>0&ce>>>0>=he>>>0){a[_e>>2]=ve+le,pe=ce+(z=0==(7&(pe=ce+8|0)|0)?0:0-pe&7)|0,de=le-z+(0|a[46])|0,a[49]=pe,a[46]=de,a[pe+4>>2]=1|de,a[pe+de+4>>2]=40,a[50]=a[165];break}for(ue>>>0<(de=0|a[47])>>>0?(a[47]=ue,ge=ue):ge=de,de=ue+le|0,pe=620;;){if((0|a[pe>>2])==(0|de)){ye=pe,Ee=pe,B=211;break}if(!(pe=0|a[pe+8>>2])){Se=620;break}}if(211==(0|B)){if(!(8&a[Ee+12>>2])){a[ye>>2]=ue,a[(pe=Ee+4|0)>>2]=(0|a[pe>>2])+le,z=ue+(0==(7&(pe=ue+8|0)|0)?0:0-pe&7)|0,$=de+(0==(7&(pe=de+8|0)|0)?0:0-pe&7)|0,pe=z+L|0,re=$-z-L|0,a[z+4>>2]=3|L;do{if((0|$)!=(0|ce)){if((0|$)==(0|a[48])){fe=(0|a[45])+re|0,a[45]=fe,a[48]=pe,a[pe+4>>2]=1|fe,a[pe+fe>>2]=fe;break}if(1==(3&(fe=0|a[$+4>>2])|0)){se=-8&fe,oe=fe>>>3;e:do{if(fe>>>0>=256){ae=0|a[$+24>>2],ie=0|a[$+12>>2];do{if((0|ie)==(0|$)){if(ne=0|a[(i=(q=$+16|0)+4|0)>>2])Te=ne,we=i;else{if(!(ee=0|a[q>>2])){be=0;break}Te=ee,we=q}for(;;)if(ne=0|a[(i=Te+20|0)>>2])Te=ne,we=i;else{if(!(ne=0|a[(i=Te+16|0)>>2])){Ae=Te,Ce=we;break}Te=ne,we=i}if(!(Ce>>>0<ge>>>0)){a[Ce>>2]=0,be=Ae;break}_()}else{if((i=0|a[$+8>>2])>>>0<ge>>>0&&_(),(0|a[(ne=i+12|0)>>2])!=(0|$)&&_(),(0|a[(q=ie+8|0)>>2])==(0|$)){a[ne>>2]=ie,a[q>>2]=i,be=ie;break}_()}}while(0);if(!ae)break;i=476+((ie=0|a[$+28>>2])<<2)|0;do{if((0|$)==(0|a[i>>2])){if(a[i>>2]=be,be)break;a[44]=a[44]&~(1<<ie);break e}if(ae>>>0<(0|a[47])>>>0&&_(),(0|a[(q=ae+16|0)>>2])==(0|$)?a[q>>2]=be:a[ae+20>>2]=be,!be)break e}while(0);be>>>0<(ie=0|a[47])>>>0&&_(),a[be+24>>2]=ae,q=0|a[(i=$+16|0)>>2];do{if(q){if(!(q>>>0<ie>>>0)){a[be+16>>2]=q,a[q+24>>2]=be;break}_()}}while(0);if(!(q=0|a[i+4>>2]))break;if(!(q>>>0<(0|a[47])>>>0)){a[be+20>>2]=q,a[q+24>>2]=be;break}_()}else{q=0|a[$+8>>2],ie=0|a[$+12>>2],ae=212+(oe<<1<<2)|0;do{if((0|q)!=(0|ae)){if(q>>>0<ge>>>0&&_(),(0|a[q+12>>2])==(0|$))break;_()}}while(0);if((0|ie)==(0|q)){a[43]=a[43]&~(1<<oe);break}do{if((0|ie)==(0|ae))Oe=ie+8|0;else{if(ie>>>0<ge>>>0&&_(),(0|a[(i=ie+8|0)>>2])==(0|$)){Oe=i;break}_()}}while(0);a[q+12>>2]=ie,a[Oe>>2]=q}}while(0);Me=$+se|0,Ie=se+re|0}else Me=$,Ie=re;if(a[(oe=Me+4|0)>>2]=-2&a[oe>>2],a[pe+4>>2]=1|Ie,a[pe+Ie>>2]=Ie,oe=Ie>>>3,Ie>>>0<256){fe=212+(oe<<1<<2)|0,ae=0|a[43],i=1<<oe;do{if(ae&i){if((ne=0|a[(oe=fe+8|0)>>2])>>>0>=(0|a[47])>>>0){ke=oe,Pe=ne;break}_()}else a[43]=ae|i,ke=fe+8|0,Pe=fe}while(0);a[ke>>2]=pe,a[Pe+12>>2]=pe,a[pe+8>>2]=Pe,a[pe+12>>2]=fe;break}i=Ie>>>8;do{if(i){if(Ie>>>0>16777215){Re=31;break}Re=Ie>>>((ee=14-((ne=((se=i<<(ae=(i+1048320|0)>>>16&8))+520192|0)>>>16&4)|ae|(se=((oe=se<<ne)+245760|0)>>>16&2))+(oe<<se>>>15)|0)+7|0)&1|ee<<1}else Re=0}while(0);if(i=476+(Re<<2)|0,a[pe+28>>2]=Re,a[(fe=pe+16|0)+4>>2]=0,a[fe>>2]=0,!((fe=0|a[44])&(ee=1<<Re))){a[44]=fe|ee,a[i>>2]=pe,a[pe+24>>2]=i,a[pe+12>>2]=pe,a[pe+8>>2]=pe;break}for(ee=Ie<<(31==(0|Re)?0:25-(Re>>>1)|0),fe=0|a[i>>2];;){if((-8&a[fe+4>>2]|0)==(0|Ie)){De=fe,B=281;break}if(!(se=0|a[(i=fe+16+(ee>>>31<<2)|0)>>2])){Ne=i,Le=fe,B=278;break}ee<<=1,fe=se}if(278==(0|B)){if(!(Ne>>>0<(0|a[47])>>>0)){a[Ne>>2]=pe,a[pe+24>>2]=Le,a[pe+12>>2]=pe,a[pe+8>>2]=pe;break}_()}else if(281==(0|B)){if((ee=0|a[(fe=De+8|0)>>2])>>>0>=(se=0|a[47])>>>0&De>>>0>=se>>>0){a[ee+12>>2]=pe,a[fe>>2]=pe,a[pe+8>>2]=ee,a[pe+12>>2]=De,a[pe+24>>2]=0;break}_()}}else ee=(0|a[46])+re|0,a[46]=ee,a[49]=pe,a[pe+4>>2]=1|ee}while(0);return 0|(z+8|0)}Se=620}for(;;){if((pe=0|a[Se>>2])>>>0<=ce>>>0&&(re=pe+(0|a[Se+4>>2])|0)>>>0>ce>>>0){xe=re;break}Se=0|a[Se+8>>2]}pe=(z=(pe=(z=xe+-47|0)+(0==(7&(re=z+8|0)|0)?0:0-re&7)|0)>>>0<(re=ce+16|0)>>>0?ce:pe)+8|0,$=ue+(de=0==(7&($=ue+8|0)|0)?0:0-$&7)|0,ee=le+-40-de|0,a[49]=$,a[46]=ee,a[$+4>>2]=1|ee,a[$+ee+4>>2]=40,a[50]=a[165],a[(ee=z+4|0)>>2]=27,a[pe>>2]=a[155],a[pe+4>>2]=a[156],a[pe+8>>2]=a[157],a[pe+12>>2]=a[158],a[155]=ue,a[156]=le,a[158]=0,a[157]=pe,pe=z+24|0;do{a[(pe=pe+4|0)>>2]=7}while((pe+4|0)>>>0<xe>>>0);if((0|z)!=(0|ce)){if(pe=z-ce|0,a[ee>>2]=-2&a[ee>>2],a[ce+4>>2]=1|pe,a[z>>2]=pe,$=pe>>>3,pe>>>0<256){de=212+($<<1<<2)|0,(fe=0|a[43])&(se=1<<$)?(i=0|a[($=de+8|0)>>2])>>>0<(0|a[47])>>>0?_():(Ue=$,Fe=i):(a[43]=fe|se,Ue=de+8|0,Fe=de),a[Ue>>2]=ce,a[Fe+12>>2]=ce,a[ce+8>>2]=Fe,a[ce+12>>2]=de;break}if(Ge=(de=pe>>>8)?pe>>>0>16777215?31:pe>>>(($=14-((de=((fe=de<<(se=(de+1048320|0)>>>16&8))+520192|0)>>>16&4)|se|(fe=((i=fe<<de)+245760|0)>>>16&2))+(i<<fe>>>15)|0)+7|0)&1|$<<1:0,$=476+(Ge<<2)|0,a[ce+28>>2]=Ge,a[ce+20>>2]=0,a[re>>2]=0,!((fe=0|a[44])&(i=1<<Ge))){a[44]=fe|i,a[$>>2]=ce,a[ce+24>>2]=$,a[ce+12>>2]=ce,a[ce+8>>2]=ce;break}for(i=pe<<(31==(0|Ge)?0:25-(Ge>>>1)|0),fe=0|a[$>>2];;){if((-8&a[fe+4>>2]|0)==(0|pe)){Be=fe,B=307;break}if(!(se=0|a[($=fe+16+(i>>>31<<2)|0)>>2])){je=$,Ye=fe,B=304;break}i<<=1,fe=se}if(304==(0|B)){if(!(je>>>0<(0|a[47])>>>0)){a[je>>2]=ce,a[ce+24>>2]=Ye,a[ce+12>>2]=ce,a[ce+8>>2]=ce;break}_()}else if(307==(0|B)){if((i=0|a[(fe=Be+8|0)>>2])>>>0>=(pe=0|a[47])>>>0&Be>>>0>=pe>>>0){a[i+12>>2]=ce,a[fe>>2]=ce,a[ce+8>>2]=i,a[ce+12>>2]=Be,a[ce+24>>2]=0;break}_()}}}else{0==(0|(i=0|a[47]))|ue>>>0<i>>>0&&(a[47]=ue),a[155]=ue,a[156]=le,a[158]=0,a[52]=a[161],a[51]=-1,i=0;do{a[(fe=212+(i<<1<<2)|0)+12>>2]=fe,a[fe+8>>2]=fe,i=i+1|0}while(32!=(0|i));i=ue+(fe=0==(7&(i=ue+8|0)|0)?0:0-i&7)|0,pe=le+-40-fe|0,a[49]=i,a[46]=pe,a[i+4>>2]=1|pe,a[i+pe+4>>2]=40,a[50]=a[165]}}while(0);if((le=0|a[46])>>>0>L>>>0)return ue=le-L|0,a[46]=ue,ce=(le=0|a[49])+L|0,a[49]=ce,a[ce+4>>2]=1|ue,a[le+4>>2]=3|L,0|(le+8|0)}return a[(0|M())>>2]=12,0|0},_memcpy:function(e,t,n){var i;if(e|=0,t|=0,(0|(n|=0))>=4096)return 0|g(0|e,0|t,0|n);if(i=0|e,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|i;r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(;(0|n)>=4;)a[e>>2]=a[t>>2],e=e+4|0,t=t+4|0,n=n-4|0}for(;(0|n)>0;)r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0;return 0|i},_bitshift64Lshr:F,_fflush:function e(t){t|=0;var n=0,r=0,i=0,o=0,s=0,u=0,l=0;do{if(t){if((0|a[t+76>>2])<=-1){n=0|D(t);break}r=0==(0|k()),i=0|D(t),r||P(),n=i}else{if(o=0|a[13]?0|e(0|a[13]):0,f(36),i=0|a[8])for(r=i,i=o;;){if(u=(0|a[r+76>>2])>-1?0|k():0,l=(0|a[r+20>>2])>>>0>(0|a[r+28>>2])>>>0?0|D(r)|i:i,u&&P(),!(r=0|a[r+56>>2])){s=l;break}i=l}else s=o;E(36),n=s}}while(0);return 0|n},___errno_location:M,_bitshift64Shl:G,runPostSets:function(){},stackAlloc:function(e){var t;return t=o,o=(o=o+(e|=0)|0)+15&-16,0|t},stackSave:function(){return 0|o},stackRestore:function(e){o=e|=0},establishStackSpace:function(e,t){o=e|=0,t|=0},setThrew:function(e,t){e|=0,t|=0,s||(s=e,t)},setTempRet0:function(e){u=e|=0},getTempRet0:function(){return 0|u},dynCall_ii:function(e,t){return t|=0,0|j[1&(e|=0)](0|t)},dynCall_iiii:function(e,t,n,r){return t|=0,n|=0,r|=0,0|Y[3&(e|=0)](0|t,0|n,0|r)},dynCall_vi:function(e,t){t|=0,K[1&(e|=0)](0|t)}}}(e.Na,e.Oa,buffer);e._curve25519_donna=Z._curve25519_donna;var Da=e._free=Z._free;e.runPostSets=Z.runPostSets;var cb=e._i64Add=Z._i64Add,ab=e._bitshift64Ashr=Z._bitshift64Ashr,bb=e._i64Subtract=Z._i64Subtract,db=e._memset=Z._memset,ua=e._malloc=Z._malloc,gc=e._memcpy=Z._memcpy,fb=e._bitshift64Lshr=Z._bitshift64Lshr;e._fflush=Z._fflush,e.___errno_location=Z.___errno_location;var gb=e._bitshift64Shl=Z._bitshift64Shl;function xc(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}e.dynCall_ii=Z.dynCall_ii,e.dynCall_iiii=Z.dynCall_iiii,e.dynCall_vi=Z.dynCall_vi,n.W=Z.stackAlloc,n.na=Z.stackSave,n.X=Z.stackRestore,n.md=Z.establishStackSpace,n.cb=Z.setTempRet0,n.Ua=Z.getTempRet0,xc.prototype=Error(),xc.prototype.constructor=xc;var Yc=null,Xa=function t(){e.calledRun||$c(),e.calledRun||(Xa=t)};function $c(t){function n(){if(!e.calledRun&&(e.calledRun=!0,!A)){if(xa||(xa=!0,Oa(Qa)),Oa(Ra),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e._main&&bd&&e.callMain(t),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)Ua(e.postRun.shift());Oa(Sa)}}if(t=t||e.arguments,null===Yc&&(Yc=Date.now()),!(0<L)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)Ta(e.preRun.shift());Oa(Pa),0<L||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n())}}function ad(t,n){if(!n||!e.noExitRuntime)throw!e.noExitRuntime&&(A=!0,m=void 0,Oa(K),e.onExit)&&e.onExit(t),new xc(t)}e.callMain=e.jd=function(t){function n(){for(var e=0;3>e;e++)a.push(0)}assert(0==L,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(0==Pa.length,"cannot call main when preRun functions remain to be called"),t=t||[],xa||(xa=!0,Oa(Qa));var r=t.length+1,a=[G(Va(e.thisProgram),"i8",0)];n();for(var i=0;i<r-1;i+=1)a.push(G(Va(t[i]),"i8",0)),n();a.push(0),a=G(a,"i32",0);try{ad(e._main(r,a,0),!0)}catch(t){if(!(t instanceof xc)){if("SimulateInfiniteLoop"!=t)throw t&&"object"==typeof t&&t.stack&&e.S("exception thrown: "+[t,t.stack]),t;e.noExitRuntime=!0}}},e.run=e.run=$c,e.exit=e.exit=ad;var cd=[];function z(t){void 0!==t?(e.print(t),e.S(t),t=JSON.stringify(t)):t="",A=!0;var n="abort("+t+") at "+Ea()+"\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.";throw cd&&cd.forEach((function(e){n=e(n,t)})),n}if(e.abort=e.abort=z,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();var bd=!0;e.noInitialRun&&(bd=!1),$c(),module.exports=e},31516:e=>{var t;!function(){function e(e){if(this.mode=r.MODE_8BIT_BYTE,this.data=e,this.parsedData=[],e instanceof ArrayBuffer)this.parsedData=new Int8Array(e);else{for(var t=0,n=this.data.length;t<n;t++){var a=[],i=this.data.charCodeAt(t);i>65536?(a[0]=240|(1835008&i)>>>18,a[1]=128|(258048&i)>>>12,a[2]=128|(4032&i)>>>6,a[3]=128|63&i):i>2048?(a[0]=224|(61440&i)>>>12,a[1]=128|(4032&i)>>>6,a[2]=128|63&i):i>128?(a[0]=192|(1984&i)>>>6,a[1]=128|63&i):a[0]=i,this.parsedData.push(a)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}}function n(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},n.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=p.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var a=0;a<this.modules.length;a++)for(var i=1*a,o=0;o<this.modules[a].length;o++){var s=1*o;this.modules[a][o]&&(r.beginFill(0,100),r.moveTo(s,i),r.lineTo(s+1,i),r.lineTo(s+1,i+1),r.lineTo(s,i+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=p.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],a=e[n];if(null==this.modules[r][a])for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)this.modules[r+i][a+o]=-2==i||2==i||-2==o||2==o||0==i&&0==o}},setupTypeNumber:function(e){for(var t=p.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=p.getBCHTypeInfo(n),a=0;a<15;a++){var i=!e&&1==(r>>a&1);a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(a=0;a<15;a++){i=!e&&1==(r>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var s=0;s<2;s++)if(null==this.modules[r][o-s]){var u=!1;i<e.length&&(u=1==(e[i]>>>a&1)),p.getMask(t,r,o-s)&&(u=!u),this.modules[r][o-s]=u,-1==--a&&(i++,a=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(e,t,r){for(var a=m.getRSBlocks(e,t),i=new g,o=0;o<r.length;o++){var s=r[o];i.put(s.mode,4),i.put(s.getLength(),p.getLengthInBits(s.mode,e)),s.write(i)}var u=0;for(o=0;o<a.length;o++)u+=a[o].dataCount;if(i.getLengthInBits()>8*u)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*u+")");for(i.getLengthInBits()+4<=8*u&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*u||(i.put(n.PAD0,8),i.getLengthInBits()>=8*u));)i.put(n.PAD1,8);return n.createBytes(i,a)},n.createBytes=function(e,t){for(var n=0,r=0,a=0,i=new Array(t.length),o=new Array(t.length),s=0;s<t.length;s++){var u=t[s].dataCount,l=t[s].totalCount-u;r=Math.max(r,u),a=Math.max(a,l),i[s]=new Array(u);for(var c=0;c<i[s].length;c++)i[s][c]=255&e.buffer[c+n];n+=u;var d=p.getErrorCorrectPolynomial(l),f=new v(i[s],d.getLength()-1).mod(d);o[s]=new Array(d.getLength()-1);for(c=0;c<o[s].length;c++){var h=c+f.getLength()-o[s].length;o[s][c]=h>=0?f.get(h):0}}var _=0;for(c=0;c<t.length;c++)_+=t[c].totalCount;var m=new Array(_),g=0;for(c=0;c<r;c++)for(s=0;s<t.length;s++)c<i[s].length&&(m[g++]=i[s][c]);for(c=0;c<a;c++)for(s=0;s<t.length;s++)c<o[s].length&&(m[g++]=o[s][c]);return m};for(var r={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},a={L:1,M:0,Q:3,H:2},i=0,o=1,s=2,u=3,l=4,c=5,d=6,f=7,p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;p.getBCHDigit(t)-p.getBCHDigit(p.G15)>=0;)t^=p.G15<<p.getBCHDigit(t)-p.getBCHDigit(p.G15);return(e<<10|t)^p.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;p.getBCHDigit(t)-p.getBCHDigit(p.G18)>=0;)t^=p.G18<<p.getBCHDigit(t)-p.getBCHDigit(p.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return p.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case i:return(t+n)%2==0;case o:return t%2==0;case s:return n%3==0;case u:return(t+n)%3==0;case l:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case c:return t*n%2+t*n%3==0;case d:return(t*n%2+t*n%3)%2==0;case f:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new v([1],0),n=0;n<e;n++)t=t.multiply(new v([1,h.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var a=0;a<t;a++){for(var i=0,o=e.isDark(r,a),s=-1;s<=1;s++)if(!(r+s<0||t<=r+s))for(var u=-1;u<=1;u++)a+u<0||t<=a+u||0==s&&0==u||o==e.isDark(r+s,a+u)&&i++;i>5&&(n+=3+i-5)}for(r=0;r<t-1;r++)for(a=0;a<t-1;a++){var l=0;e.isDark(r,a)&&l++,e.isDark(r+1,a)&&l++,e.isDark(r,a+1)&&l++,e.isDark(r+1,a+1)&&l++,0!=l&&4!=l||(n+=3)}for(r=0;r<t;r++)for(a=0;a<t-6;a++)e.isDark(r,a)&&!e.isDark(r,a+1)&&e.isDark(r,a+2)&&e.isDark(r,a+3)&&e.isDark(r,a+4)&&!e.isDark(r,a+5)&&e.isDark(r,a+6)&&(n+=40);for(a=0;a<t;a++)for(r=0;r<t-6;r++)e.isDark(r,a)&&!e.isDark(r+1,a)&&e.isDark(r+2,a)&&e.isDark(r+3,a)&&e.isDark(r+4,a)&&!e.isDark(r+5,a)&&e.isDark(r+6,a)&&(n+=40);var c=0;for(a=0;a<t;a++)for(r=0;r<t;r++)e.isDark(r,a)&&c++;return n+=10*(Math.abs(100*c/t/t-50)/5)}},h={glog:function(e){if(e<1)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},_=0;_<8;_++)h.EXP_TABLE[_]=1<<_;for(_=8;_<256;_++)h.EXP_TABLE[_]=h.EXP_TABLE[_-4]^h.EXP_TABLE[_-5]^h.EXP_TABLE[_-6]^h.EXP_TABLE[_-8];for(_=0;_<255;_++)h.LOG_TABLE[h.EXP_TABLE[_]]=_;function v(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function m(e,t){this.totalCount=e,this.dataCount=t}function g(){this.buffer=[],this.length=0}v.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=h.gexp(h.glog(this.get(n))+h.glog(e.get(r)));return new v(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=h.glog(this.get(0))-h.glog(e.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<e.getLength();r++)n[r]^=h.gexp(h.glog(e.get(r))+t);return new v(n,0).mod(e)}},m.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],m.getRSBlocks=function(e,t){var n=m.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,a=[],i=0;i<r;i++)for(var o=n[3*i+0],s=n[3*i+1],u=n[3*i+2],l=0;l<o;l++)a.push(new m(s,u));return a},m.getRsBlockTable=function(e,t){switch(t){case a.L:return m.RS_BLOCK_TABLE[4*(e-1)+0];case a.M:return m.RS_BLOCK_TABLE[4*(e-1)+1];case a.Q:return m.RS_BLOCK_TABLE[4*(e-1)+2];case a.H:return m.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},g.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var y=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],E=function(e,t){this._bIsPainted=!1,this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,this._elCanvas.setAttribute("aria-label","Scan me!"),this._elCanvas.setAttribute("role","img"),e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};function S(e,t){for(var n=1,r=e instanceof ArrayBuffer?e.byteLength:function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e.length?3:0)}(e),i=0,o=y.length;i<=o;i++){var s=0;switch(t){case a.L:s=y[i][0];break;case a.M:s=y[i][1];break;case a.Q:s=y[i][2];break;case a.H:s=y[i][3]}if(r<=s)break;n++}if(n>y.length)throw new Error("Too long data");return n}E.prototype.draw=function(e){var t=this._oContext,n=this._htOption,r=e.getModuleCount(),a=n.width/r,i=n.height/r,o=Math.round(a),s=Math.round(i);this.clear();for(var u=0;u<r;u++)for(var l=0;l<r;l++){var c=e.isDark(u,l),d=l*a,f=u*i;t.strokeStyle=c?n.colorDark:n.colorLight,t.lineWidth=1,t.fillStyle=c?n.colorDark:n.colorLight,t.fillRect(d,f,a,i),t.strokeRect(Math.floor(d)+.5,Math.floor(f)+.5,o,s),t.strokeRect(Math.ceil(d)-.5,Math.ceil(f)-.5,o,s)}this._bIsPainted=!0},E.prototype.isPainted=function(){return this._bIsPainted},E.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},E.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},(t=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:a.H},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.getElementById(e)),this._el=e,this._oQRCode=null,this._oDrawing=new E(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e){this._oQRCode=new n(S(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode)},t.prototype.clear=function(){this._oDrawing.clear()},t.CorrectLevel=a}(),e.exports=t},26299:(e,t,n)=>{var r={"./af":[42297,6365],"./af.js":[42297,6365],"./ar":[46922,8054],"./ar-XB":[89347,9995],"./ar-XB.js":[89347,9995],"./ar.js":[46922,8054],"./az":[3914,7072],"./az.js":[3914,7072],"./bg":[29787,7102],"./bg.js":[29787,7102],"./bn":[66190,8700],"./bn.js":[66190,8700],"./ca":[75662,5632],"./ca.js":[75662,5632],"./cs":[16052,165],"./cs.js":[16052,165],"./da":[33680,1628],"./da.js":[33680,1628],"./de":[56175,7216],"./de.js":[56175,7216],"./el":[18221,1204],"./el.js":[18221,1204],"./en":[167,6933],"./en.js":[167,6933],"./es":[59230,673],"./es.js":[59230,673],"./et":[93624,792],"./et.js":[93624,792],"./fa":[82663,9999],"./fa.js":[82663,9999],"./fi":[20221,9613],"./fi.js":[20221,9613],"./fil":[30662,907],"./fil.js":[30662,907],"./fr":[10822,6293],"./fr.js":[10822,6293],"./gu":[83944,6038],"./gu.js":[83944,6038],"./he":[88708,5729],"./he.js":[88708,5729],"./hi":[76848,3722],"./hi.js":[76848,3722],"./hr":[93953,5708],"./hr.js":[93953,5708],"./hu":[20245,2556],"./hu.js":[20245,2556],"./id":[39524,5128],"./id.js":[39524,5128],"./it":[7988,2830],"./it.js":[7988,2830],"./ja":[74008,5182],"./ja.js":[74008,5182],"./kk":[28517,9719],"./kk.js":[28517,9719],"./kn":[9777,155],"./kn.js":[9777,155],"./ko":[11274,820],"./ko.js":[11274,820],"./lt":[91151,1529],"./lt.js":[91151,1529],"./lv":[98739,4708],"./lv.js":[98739,4708],"./mk":[39778,6651],"./mk.js":[39778,6651],"./ml":[10652,6655],"./ml.js":[10652,6655],"./mr":[11687,1248],"./mr.js":[11687,1248],"./ms":[48810,5443],"./ms.js":[48810,5443],"./nb":[18637,7749],"./nb.js":[18637,7749],"./nl":[73247,9750],"./nl.js":[73247,9750],"./pa":[11396,9815],"./pa.js":[11396,9815],"./pl":[41394,8628],"./pl.js":[41394,8628],"./pt":[45726,1715,6953],"./pt-BR":[18754,1715,2091],"./pt-BR.js":[18754,1715,2091],"./pt.js":[45726,1715,6953],"./ro":[83215,7162],"./ro.js":[83215,7162],"./ru":[40973,8292],"./ru.js":[40973,8292],"./sk":[49493,1770],"./sk.js":[49493,1770],"./sl":[82562,4259],"./sl.js":[82562,4259],"./sq":[80200,9737],"./sq.js":[80200,9737],"./sr":[15451,6331],"./sr.js":[15451,6331],"./sv":[16092,2944],"./sv.js":[16092,2944],"./sw":[29651,3998],"./sw.js":[29651,3998],"./ta":[92296,2739],"./ta.js":[92296,2739],"./te":[52722,5650],"./te.js":[52722,5650],"./th":[28336,2135],"./th.js":[28336,2135],"./tr":[21357,248],"./tr.js":[21357,248],"./uk":[69032,906],"./uk.js":[69032,906],"./ur":[2970,4361],"./ur.js":[2970,4361],"./uz":[92647,4873],"./uz.js":[92647,4873],"./vi":[16382,8598],"./vi.js":[16382,8598],"./zh-CN":[82407,6483],"./zh-CN.js":[82407,6483],"./zh-HK":[8574,1081],"./zh-HK.js":[8574,1081],"./zh-TW":[74047,7542],"./zh-TW.js":[74047,7542]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(a)))}a.keys=()=>Object.keys(r),a.id=26299,e.exports=a},19922:(e,t,n)=>{var r={"./af":[31812,3748],"./af.js":[31812,3748],"./ar":[3676,1473],"./ar-DZ":[3484,6884],"./ar-DZ.js":[3484,6884],"./ar-KW":[74999,6282],"./ar-KW.js":[74999,6282],"./ar-LY":[64887,5671],"./ar-LY.js":[64887,5671],"./ar-MA":[18018,2966],"./ar-MA.js":[18018,2966],"./ar-SA":[80369,9646],"./ar-SA.js":[80369,9646],"./ar-TN":[32810,9289],"./ar-TN.js":[32810,9289],"./ar-XB":[2444,3934],"./ar-XB.js":[2444,3934],"./ar.js":[3676,1473],"./az":[90136,5740],"./az.js":[90136,5740],"./bn":[35040,7728],"./bn.js":[35040,7728],"./ca":[13188,9817],"./ca.js":[13188,9817],"./cs":[33947,2023],"./cs.js":[33947,2023],"./da":[19113,7315],"./da.js":[19113,7315],"./de":[16611,5862],"./de.js":[16611,5862],"./el":[54987,1055],"./el.js":[54987,1055],"./en-AU":[15733,8678],"./en-AU.js":[15733,8678],"./en-CA":[20477,4616],"./en-CA.js":[20477,4616],"./en-GB":[55087,9227],"./en-GB.js":[55087,9227],"./en-IE":[42613,2979],"./en-IE.js":[42613,2979],"./en-NZ":[51708,3892],"./en-NZ.js":[51708,3892],"./es":[69437,1791],"./es-DO":[75982,2394],"./es-DO.js":[75982,2394],"./es.js":[69437,1791],"./et":[55921,4473],"./et.js":[55921,4473],"./fa":[19041,7662],"./fa.js":[19041,7662],"./fi":[330,7386],"./fi.js":[330,7386],"./fr":[33902,2445],"./fr-CA":[41463,9765],"./fr-CA.js":[41463,9765],"./fr-CH":[45509,8799],"./fr-CH.js":[45509,8799],"./fr.js":[33902,2445],"./he":[75264,5027],"./he.js":[75264,5027],"./hi":[97722,6709],"./hi.js":[97722,6709],"./hr":[5598,1381],"./hr.js":[5598,1381],"./hu":[65852,4339],"./hu.js":[65852,4339],"./id":[6377,6511],"./id.js":[6377,6511],"./it":[9717,5247],"./it.js":[9717,5247],"./kk":[23557,7074],"./kk.js":[23557,7074],"./kn":[53653,6568],"./kn.js":[53653,6568],"./ko":[79716,4818],"./ko.js":[79716,4818],"./lt":[24576,6920],"./lt.js":[24576,6920],"./mk":[59671,9545],"./mk.js":[59671,9545],"./ml":[68012,3113],"./ml.js":[68012,3113],"./mr":[21456,3422],"./mr.js":[21456,3422],"./ms":[60828,7739],"./ms-MY":[69896,1520],"./ms-MY.js":[69896,1520],"./ms.js":[60828,7739],"./nb":[6,5959],"./nb.js":[6,5959],"./nl":[44136,319],"./nl.js":[44136,319],"./pa-IN":[2687,8132],"./pa-IN.js":[2687,8132],"./pl":[89526,4980],"./pl.js":[89526,4980],"./pt":[13313,9116],"./pt-BR":[78547,6547],"./pt-BR.js":[78547,6547],"./pt.js":[13313,9116],"./ro":[6092,3569],"./ro.js":[6092,3569],"./ru":[16544,2957],"./ru.js":[16544,2957],"./sl":[70975,3501],"./sl.js":[70975,3501],"./sq":[63187,6496],"./sq.js":[63187,6496],"./sr":[95036,5170],"./sr-CYRL":[26368,5790],"./sr-CYRL.js":[26368,5790],"./sr.js":[95036,5170],"./sv":[87506,1069],"./sv.js":[87506,1069],"./sw":[88335,2017],"./sw.js":[88335,2017],"./ta":[74633,8634],"./ta.js":[74633,8634],"./te":[5997,3370],"./te.js":[5997,3370],"./tr":[41554,9313],"./tr.js":[41554,9313],"./uk":[11967,9682],"./uk.js":[11967,9682],"./ur":[46990,6163],"./ur.js":[46990,6163],"./uz":[4596,3017],"./uz-LATN":[5146,8117],"./uz-LATN.js":[5146,8117],"./uz.js":[4596,3017],"./zh-CN":[94616,3047],"./zh-CN.js":[94616,3047],"./zh-TW":[52875,5125],"./zh-TW.js":[52875,5125]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((()=>n(a)))}a.keys=()=>Object.keys(r),a.id=19922,e.exports=a},47466:e=>{"use strict";e.exports=JSON.parse('{"application/":{"applixware":"aw","atom+xml":"atom","atomcat+xml":"atomcat","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-":{"capability":"cdmia","container":"cdmic","domain":"cdmid","object":"cdmio","queue":"cdmiq"},"davmount+xml":"davmount","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","ecmascript":"ecma","emma+xml":"emma","epub+zip":"epub","exi":"exi","font-":{"tdpfr":"pfr","woff":"woff"},"gml+xml":"gml","gpx+xml":"gpx","gxf":"gxf","hyperstudio":"stk","inkml+xml":["ink","inkml"],"ipfix":"ipfix","java-":{"archive":"jar","vm":"class","serialized-object":"ser"},"javascript":"js","json":"json","jsonml+json":"jsonml","lost+xml":"lostxml","mac-":{"binhex40":"hqx","compactpro":"cpt"},"mads+xml":"mads","marc":"mrc","marcxml+xml":"mrcx","mathematica":["ma","nb","mb"],"mathml+xml":"mathml","mbox":"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods","mp21":["m21","mp21"],"mp4":"mp4s","msword":["doc","dot"],"mxf":"mxf","oda":"oda","ogg":"ogx","omdoc+xml":"omdoc","onenote":["onetoc","onetoc2","onetmp","onepkg"],"oxps":"oxps","pdf":"pdf","pgp-":{"encrypted":"pgp","signature":["asc","sig"]},"pkcs10":"p10","pkcs7-":{"mime":["p7m","p7c"],"signature":"p7s"},"pkcs8":"p8","pkix-":{"cert":"cer","crl":"crl","pkipath":"pkipath","attr-cert":"ac"},"pkixcmp":"pki","pls+xml":"pls","postscript":["ai","eps","ps"],"pskc+xml":"pskcxml","rdf+xml":"rdf","reginfo+xml":"rif","resource-":{"lists+xml":"rl","lists-diff+xml":"rld"},"rpki-":{"ghostbusters":"gbr","manifest":"mft","roa":"roa"},"rsd+xml":"rsd","rss+xml":"rss","rtf":"rtf","sbml+xml":"sbml","scvp-":{"cv-":{"request":"scq","response":"scs"},"vp-":{"request":"spq","response":"spp"}},"sdp":"sdp","set-":{"payment-initiation":"setpay","registration-initiation":"setreg"},"shf+xml":"shf","smil+xml":["smi","smil"],"sparql-":{"query":"rq","results+xml":"srx"},"srgs":"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","vnd.":{"acucobol":"acu","acucorp":["atc","acutc"],"adobe.":{"fxp":["fxp","fxpl"],"xdp+xml":"xdp","xfdf":"xfdf","formscentral.fcdt":"fcdt","air-application-installer-package+zip":"air"},"apple.":{"installer+xml":"mpkg","mpegurl":"m3u8"},"audiograph":"aep","bmi":"bmi","businessobjects":"rep","chemdraw+xml":"cdxml","cinderella":"cdy","claymore":"cla","commonspace":"csp","cosmocaller":"cmc","crick.":{"clicker":"clkx","clicker.":{"keyboard":"clkk","palette":"clkp","template":"clkt","wordbank":"clkw"}},"curl.":{"car":"car","pcurl":"pcurl"},"dart":"dart","dece.":{"data":["uvf","uvvf","uvd","uvvd"],"ttml+xml":["uvt","uvvt"],"unspecified":["uvx","uvvx"],"zip":["uvz","uvvz"]},"dna":"dna","dpgraph":"dpg","dreamfactory":"dfac","dvb.":{"ait":"ait","service":"svc"},"dynageo":"geo","enliven":"nml","epson.":{"esf":"esf","msf":"msf","quickanime":"qam","salt":"slt","ssf":"ssf"},"eszigno3+xml":["es3","et3"],"ezpix-":{"album":"ez2","package":"ez3"},"fdf":"fdf","fdsn.":{"mseed":"mseed","seed":["seed","dataless"]},"flographit":"gph","framemaker":["fm","frame","maker","book"],"frogans.":{"fnc":"fnc","ltf":"ltf"},"fujitsu.":{"oasys":"oas","oasys2":"oa2","oasys3":"oa3","oasysgp":"fg5","oasysprs":"bh2"},"fujixerox.":{"ddd":"ddd","docuworks":"xdw","docuworks.binder":"xbd"},"fuzzysheet":"fzs","geogebra.":{"file":"ggb","tool":"ggt"},"geonext":"gxt","geoplan":"g2w","geospace":"g3w","gmx":"gmx","grafeq":["gqf","gqs"],"groove-":{"account":"gac","help":"ghf","injector":"grv","tool-":{"message":"gtm","template":"tpl"},"vcard":"vcg","identity-message":"gim"},"hal+xml":"hal","hbci":"hbci","hp-":{"hpgl":"hpgl","hpid":"hpid","hps":"hps","jlyt":"jlt","pcl":"pcl","pclxl":"pclxl"},"ibm.":{"minipay":"mpy","modcap":["afp","listafp","list3820"],"rights-management":"irm","secure-container":"sc"},"iccprofile":["icc","icm"],"igloader":"igl","immervision-":{"ivp":"ivp","ivu":"ivu"},"intergeo":"i2g","intu.":{"qbo":"qbo","qfx":"qfx"},"jam":"jam","jisp":"jisp","kahootz":["ktz","ktr"],"kde.":{"karbon":"karbon","kchart":"chrt","kformula":"kfo","kivio":"flw","kontour":"kon","kpresenter":["kpr","kpt"],"kspread":"ksp","kword":["kwd","kwt"]},"kenameaapp":"htke","kidspiration":"kia","kinar":["kne","knp"],"koan":["skp","skd","skt","skm"],"lotus-":{"approach":"apr","freelance":"pre","notes":"nsf","organizer":"org","screencam":"scm","wordpro":"lwp","1-2-3":"123"},"mcd":"mcd","medcalcdata":"mc1","mfer":"mwf","mfmp":"mfm","micrografx.":{"flo":"flo","igx":"igx"},"mif":"mif","mobius.":{"daf":"daf","dis":"dis","mbk":"mbk","mqy":"mqy","msl":"msl","plc":"plc","txf":"txf"},"mophun.":{"application":"mpn","certificate":"mpc"},"ms-":{"artgalry":"cil","excel":["xls","xlm","xla","xlc","xlt","xlw"],"excel.":{"sheet.":{"macroenabled.12":"xlsm","binary.macroenabled.12":"xlsb"},"addin.macroenabled.12":"xlam","template.macroenabled.12":"xltm"},"fontobject":"eot","htmlhelp":"chm","ims":"ims","lrm":"lrm","officetheme":"thmx","pki.":{"seccat":"cat","stl":"stl"},"powerpoint":["ppt","pps","pot"],"powerpoint.":{"addin.macroenabled.12":"ppam","presentation.macroenabled.12":"pptm","slide.macroenabled.12":"sldm","slideshow.macroenabled.12":"ppsm","template.macroenabled.12":"potm"},"project":["mpp","mpt"],"word.":{"document.macroenabled.12":"docm","template.macroenabled.12":"dotm"},"works":["wps","wks","wcm","wdb"],"wpl":"wpl","xpsdocument":"xps","cab-compressed":"cab"},"mseq":"mseq","musician":"mus","mynfc":"taglet","nitf":["ntf","nitf"],"noblenet-":{"directory":"nnd","sealer":"nns","web":"nnw"},"nokia.":{"radio-":{"preset":"rpst","presets":"rpss"},"n-gage.":{"data":"ngdat","symbian.install":"n-gage"}},"novadigm.":{"edm":"edm","edx":"edx","ext":"ext"},"osgi.":{"dp":"dp","subsystem":"esa"},"palm":["pdb","pqa","oprc"],"pawaafile":"paw","pg.":{"format":"str","osasli":"ei6"},"picsel":"efif","pocketlearn":"plf","powerbuilder6":"pbd","recordare.":{"musicxml":"mxl","musicxml+xml":"musicxml"},"rn-":{"realmedia":"rm","realmedia-vbr":"rmvb"},"seemail":"see","sema":"sema","semd":"semd","semf":"semf","smaf":"mmf","spotfire.":{"dxp":"dxp","sfs":"sfs"},"stardivision.":{"calc":"sdc","draw":"sda","impress":"sdd","math":"smf","writer":["sdw","vor"],"writer-global":"sgl"},"stepmania.":{"package":"smzip","stepchart":"sm"},"svd":"svd","syncml+xml":"xsm","syncml.":{"dm+wbxml":"bdm","dm+xml":"xdm"},"trueapp":"tra","ufdl":["ufd","ufdl"],"umajin":"umj","unity":"unityweb","uoml+xml":"uoml","vcx":"vcx","visio":["vsd","vst","vss","vsw"],"visionary":"vis","vsf":"vsf","Webd.":{"wbxml":"wbxml","wmlc":"wmlc","wmlscriptc":"wmlsc"},"webturbo":"wtb","wordperfect":"wpd","wqd":"wqd","xara":"xar","xfdl":"xfdl","yamaha.":{"hv-":{"dic":"hvd","script":"hvs","voice":"hvp"},"openscoreformat":"osf","smaf-":{"audio":"saf","phrase":"spf"},"openscoreformat.osfpvg+xml":"osfpvg"},"zul":["zir","zirz"],"3gpp2.tcap":"tcap","accpac.simply.":{"aso":"aso","imp":"imp"},"ahead.space":"ahead","airzip.filesecure.":{"azf":"azf","azs":"azs"},"amazon.ebook":"azw","americandynamics.acc":"acc","amiga.ami":"ami","anser-web-":{"certificate-issue-initiation":"cii","funds-transfer-initiation":"fti"},"aristanetworks.swi":"swi","blueice.multipass":"mpm","cloanto.rp9":"rp9","clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"cluetrust.cartomobile-":{"config":"c11amc","config-pkg":"c11amz"},"contact.cmsg":"cdbcmsg","criticaltools.wbs+xml":"wbs","ctc-posml":"pml","cups-ppd":"ppd","dolby.mlp":"mlp","ds-keypoint":"kpxx","ecowin.chart":"mag","fluxtime.clip":"ftc","fsc.weblaunch":"fsc","genomatix.tuxedo":"txd","geometry-explorer":["gex","gre"],"google-earth.":{"kml+xml":"kml","kmz":"kmz"},"handheld-entertainment+xml":"zmm","insors.igm":"igm","intercon.formnet":["xpw","xpx"],"ipunplugged.rcprofile":"rcprofile","irepository.package+xml":"irp","is-xpr":"xpr","isac.fcs":"fcs","kodak-descriptor":"sse","las.las+xml":"lasxml","macports.portpkg":"portpkg","mediastation.cdkey":"cdkey","mozilla.xul+xml":"xul","muvee.style":"msty","neurolanguage.nlu":"nlu","oasis.opendocument.":{"chart":"odc","database":"odb","formula":"odf","graphics":"odg","image":"odi","presentation":"odp","spreadsheet":"ods","text":"odt","text-":{"master":"odm","template":"ott","web":"oth"},"chart-template":"otc","formula-template":"odft","graphics-template":"otg","image-template":"oti","presentation-template":"otp","spreadsheet-template":"ots"},"olpc-sugar":"xo","oma.dd2+xml":"dd2","openofficeorg.extension":"oxt","openxmlformats-officedocument.":{"presentationml.":{"presentation":"pptx","slide":"sldx","slideshow":"ppsx","template":"potx"},"spreadsheetml.":{"sheet":"xlsx","template":"xltx"},"wordprocessingml.":{"document":"docx","template":"dotx"}},"pmi.widget":"wg","previewsystems.box":"box","proteus.magazine":"mgz","pvi.ptid1":"ptid","quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"realvnc.bed":"bed","rig.cryptonote":"cryptonote","rim.cod":"cod","route66.link66+xml":"link66","sailingtracker.track":"st","shana.informed.":{"formdata":"ifm","formtemplate":"itp","interchange":"iif","package":"ipk"},"simtech-mindmapper":["twd","twds"],"smart.teacher":"teacher","solent.sdkm+xml":["sdkm","sdkd"],"sun.xml.":{"calc":"sxc","draw":"sxd","impress":"sxi","math":"sxm","writer":"sxw","writer.":{"global":"sxg","template":"stw"},"calc.template":"stc","draw.template":"std","impress.template":"sti"},"sus-calendar":["sus","susp"],"symbian.install":["sis","sisx"],"tcpdump.pcap":["pcap","cap","dmp"],"tmobile-livetv":"tmo","trid.tpt":"tpt","triscape.mxs":"mxs","uiq.theme":"utz","wolfram.player":"nbp","wt.stf":"stf","zzazz.deck+xml":"zaz","3gpp.pic-bw-":{"large":"plb","small":"psb","var":"pvb"},"3m.post-it-notes":"pwn","android.package-archive":"apk","antix.game-component":"atx","astraea-software.iota":"iota","chipnuts.karaoke-mmd":"mmd","data-vision.rdz":"rdz","denovo.fcselayout-link":"fe_launch","hhe.lesson-player":"les","hydrostatix.sof-data":"sfd-hdstx","jcp.javame.midlet-rms":"rms","joost.joda-archive":"joda","llamagraphics.life-balance.":{"desktop":"lbd","exchange+xml":"lbe"},"osgeo.mapguide.package":"mgp","publishare-delta-tree":"qps","tao.intent-module-archive":"tao","yellowriver-custom-menu":"cmp"},"voicexml+xml":"vxml","widget":"wgt","winhlp":"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-":{"abiword":"abw","authorware-":{"bin":["aab","x32","u32","vox"],"map":"aam","seg":"aas"},"bcpio":"bcpio","bittorrent":"torrent","blorb":["blb","blorb"],"bzip":"bz","bzip2":["bz2","boz"],"cbr":["cbr","cba","cbt","cbz","cb7"],"cdlink":"vcd","chat":"chat","conference":"nsc","cpio":"cpio","csh":"csh","director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"doom":"wad","dtbncx+xml":"ncx","dtbook+xml":"dtb","dtbresource+xml":"res","dvi":"dvi","envoy":"evy","eva":"eva","font-":{"bdf":"bdf","ghostscript":"gsf","otf":"otf","pcf":"pcf","snf":"snf","ttf":["ttf","ttc"],"type1":["pfa","pfb","pfm","afm"],"linux-psf":"psf"},"freearc":"arc","futuresplash":"spl","glulx":"ulx","gnumeric":"gnumeric","gtar":"gtar","hdf":"hdf","latex":"latex","mie":"mie","ms-":{"application":"application","shortcut":"lnk","wmd":"wmd","wmz":"wmz","xbap":"xbap"},"msaccess":"mdb","msbinder":"obd","mscardfile":"crd","msclip":"clp","msdownload":["exe","dll","com","bat","msi"],"msmediaview":["mvb","m13","m14"],"msmetafile":["wmf","wmz","emf","emz"],"msmoney":"mny","mspublisher":"pub","msschedule":"scd","msterminal":"trm","mswrite":"wri","netcdf":["nc","cdf"],"nzb":"nzb","pkcs12":["p12","pfx"],"pkcs7-":{"certificates":["p7b","spc"],"certreqresp":"p7r"},"sh":"sh","shar":"shar","sql":"sql","stuffit":"sit","stuffitx":"sitx","subrip":"srt","sv4cpio":"sv4cpio","sv4crc":"sv4crc","tads":"gam","tar":"tar","tcl":"tcl","tex":"tex","texinfo":["texinfo","texi"],"tgif":"obj","ustar":"ustar","xfig":"fig","xliff+xml":"xlf","xpinstall":"xpi","xz":"xz","zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"7z-compressed":"7z","ace-compressed":"ace","apple-diskimage":"dmg","cfs-compressed":"cfs","chess-pgn":"pgn","debian-package":["deb","udeb"],"dgc-compressed":"dgc","gca-compressed":"gca","gramps-xml":"gramps","install-instructions":"install","iso9660-image":"iso","lzh-compressed":["lzh","lha"],"mobipocket-ebook":["prc","mobi"],"rar-compressed":"rar","shockwave-flash":"swf","silverlight-app":"xap","t3vm-image":"t3","tex-tfm":"tfm","wais-source":"src","java-jnlp-file":"jnlp","research-info-systems":"ris","x509-ca-cert":["der","crt"]},"xaml+xml":"xaml","xenc+xml":"xenc","xhtml+xml":["xhtml","xht"],"xml":["xml","xsl"],"xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xspf+xml":"xspf","xv+xml":["mxml","xhvml","xvml","xvm"],"yang":"yang","yin+xml":"yin","zip":"zip","andrew-inset":"ez","cu-seeme":"cu","octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy"],"oebps-package+xml":"opf","pics-rules":"prf","prs.cww":"cww","rls-services+xml":"rs","timestamped-data":"tsd","xcap-diff+xml":"xdf","xml-dtd":"dtd","patch-ops-error+xml":"xer","relax-ng-compact-syntax":"rnc"},"audio/":{"adpcm":"adp","basic":["au","snd"],"midi":["mid","midi","kar","rmi"],"mp4":["m4a","mp4a"],"mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"ogg":["oga","ogg","spx"],"s3m":"s3m","silk":"sil","vnd.":{"dra":"dra","dts":"dts","nuera.":{"ecelp4800":"ecelp4800","ecelp7470":"ecelp7470","ecelp9600":"ecelp9600"},"rip":"rip","dece.audio":["uva","uvva"],"digital-winds":"eol","dts.hd":"dtshd","lucent.voice":"lvp","ms-playready.media.pya":"pya"},"webm":"weba","x-":{"aac":"aac","aiff":["aif","aiff","aifc"],"caf":"caf","flac":"flac","matroska":"mka","mpegurl":"m3u","ms-":{"wax":"wax","wma":"wma"},"pn-":{"realaudio":["ram","ra"],"realaudio-plugin":"rmp"},"wav":"wav"},"xm":"xm"},"image/":{"bmp":"bmp","cgm":"cgm","g3fax":"g3","gif":"gif","ief":"ief","jpeg":["jpeg","jpg","jpe"],"ktx":"ktx","png":"png","sgi":"sgi","svg+xml":["svg","svgz"],"tiff":["tiff","tif"],"vnd.":{"djvu":["djvu","djv"],"dwg":"dwg","dxf":"dxf","fastbidsheet":"fbs","fpx":"fpx","fst":"fst","ms-":{"modi":"mdi","photo":"wdp"},"xiff":"xif","adobe.photoshop":"psd","dece.graphic":["uvi","uvvi","uvg","uvvg"],"dvb.subtitle":"sub","fujixerox.edmics-":{"mmr":"mmr","rlc":"rlc"},"net-fpx":"npx","wap.wbmp":"wbmp"},"webp":"webp","x-":{"3ds":"3ds","cmx":"cmx","freehand":["fh","fhc","fh4","fh5","fh7"],"icon":"ico","pcx":"pcx","pict":["pic","pct"],"portable-":{"anymap":"pnm","bitmap":"pbm","graymap":"pgm","pixmap":"ppm"},"rgb":"rgb","tga":"tga","xbitmap":"xbm","xpixmap":"xpm","xwindowdump":"xwd","cmu-raster":"ras","mrsid-image":"sid"},"prs.btif":"btif"},"model/":{"iges":["igs","iges"],"mesh":["msh","mesh","silo"],"vnd.":{"collada+xml":"dae","dwf":"dwf","gdl":"gdl","gtw":"gtw","mts":"mts","vtu":"vtu"},"vrml":["wrl","vrml"],"x3d+binary":["x3db","x3dbz"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"]},"text/":{"calendar":["ics","ifb"],"css":"css","csv":"csv","html":["html","htm"],"n3":"n3","plain":["txt","text","conf","def","list","log","in"],"richtext":"rtx","sgml":["sgml","sgm"],"troff":["t","tr","roff","man","me","ms"],"turtle":"ttl","vcard":"vcard","vnd.":{"curl":"curl","curl.":{"dcurl":"dcurl","mcurl":"mcurl","scurl":"scurl"},"fly":"fly","graphviz":"gv","in3d.":{"3dml":"3dml","spot":"spot"},"wap.":{"wml":"wml","wmlscript":"wmls"},"dvb.subtitle":"sub","fmi.flexstor":"flx","sun.j2me.app-descriptor":"jad"},"x-":{"asm":["s","asm"],"c":["c","cc","cxx","cpp","h","hh","dic"],"fortran":["f","for","f77","f90"],"nfo":"nfo","opml":"opml","pascal":["p","pas"],"setext":"etx","sfv":"sfv","uuencode":"uu","vcalendar":"vcs","vcard":"vcf","java-source":"java"},"cache-manifest":"appcache","uri-list":["uri","uris","urls"],"prs.lines.tag":"dsc","tab-separated-values":"tsv"},"video/":{"3gpp":"3gp","3gpp2":"3g2","h261":"h261","h263":"h263","h264":"h264","jpeg":"jpgv","jpm":["jpm","jpgm"],"mj2":["mj2","mjp2"],"mp4":["mp4","mp4v","mpg4"],"mpeg":["mpeg","mpg","mpe","m1v","m2v"],"ogg":"ogv","quicktime":["qt","mov"],"vnd.":{"dece.":{"hd":["uvh","uvvh"],"mobile":["uvm","uvvm"],"pd":["uvp","uvvp"],"sd":["uvs","uvvs"],"video":["uvv","uvvv"]},"fvt":"fvt","mpegurl":["mxu","m4u"],"vivo":"viv","dvb.file":"dvb","uvvu.mp4":["uvu","uvvu"],"ms-playready.media.pyv":"pyv"},"webm":"webm","x-":{"f4v":"f4v","fli":"fli","flv":"flv","m4v":"m4v","matroska":["mkv","mk3d","mks"],"mng":"mng","ms-":{"asf":["asf","asx"],"vob":"vob","wm":"wm","wmv":"wmv","wmx":"wmx","wvx":"wvx"},"msvideo":"avi","smv":"smv","sgi-movie":"movie"}},"chemical/x-":{"cdx":"cdx","cif":"cif","cmdf":"cmdf","cml":"cml","csml":"csml","xyz":"xyz"},"message/rfc822":["eml","mime"],"x-conference/x-cooltalk":"ice"}')},62129:e=>{"use strict";e.exports=JSON.parse('{"prefixHash":"c5d5efa57261ce0f42943ff6ff953fb9"}')},89580:e=>{"use strict";e.exports=JSON.parse('{"🤝🏻":"🤝","🤝🏼":"🤝","🤝🏽":"🤝","🤝🏾":"🤝","🤝🏿":"🤝","👯🏻":"👯","👯🏼":"👯","👯🏽":"👯","👯🏾":"👯","👯🏿":"👯","👯🏻‍♂":"👯‍♂","👯🏼‍♂":"👯‍♂","👯🏽‍♂":"👯‍♂","👯🏾‍♂":"👯‍♂","👯🏿‍♂":"👯‍♂"}')},67228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},22858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},23646:(e,t,n)=>{var r=n(67228);e.exports=function(e){if(Array.isArray(e))return r(e)}},81506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},48926:(e,t,n)=>{var r=n(60077).default;function a(e,t,n,a,i,o,s){try{var u=e[o](s),l=u.value}catch(e){return void n(e)}u.done?t(l):r.resolve(l).then(a,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new r((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}}},34575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},69100:(e,t,n)=>{var r=n(99489),a=n(57067);function i(t,n,o){return a()?e.exports=i=Reflect.construct:e.exports=i=function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&r(i,n.prototype),i},i.apply(null,arguments)}e.exports=i},93913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},43269:(e,t,n)=>{var r=n(60379);e.exports=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},99842:(e,t,n)=>{var r=n(29754),a=n(57067),i=n(78585);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}}},59713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},67154:e=>{function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},16525:(e,t,n)=>{var r=n(58331);function a(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}},a(t,n,i||t)}e.exports=a},29754:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},2205:(e,t,n)=>{var r=n(99489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},20862:(e,t,n)=>{var r=n(50008);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}},70430:e=>{e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},57067:e=>{e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},46860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},13884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}},80521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},98206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},81109:(e,t,n)=>{var r=n(59713);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},6479:(e,t,n)=>{var r=n(37316);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},37316:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},78585:(e,t,n)=>{var r=n(50008),a=n(81506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},99489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},63038:(e,t,n)=>{var r=n(22858),a=n(13884),i=n(60379),o=n(80521);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()}},58331:(e,t,n)=>{var r=n(29754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},68551:(e,t,n)=>{var r=n(22858),a=n(46860),i=n(60379),o=n(80521);e.exports=function(e){return r(e)||a(e)||i(e)||o()}},319:(e,t,n)=>{var r=n(23646),a=n(46860),i=n(60379),o=n(98206);e.exports=function(e){return r(e)||a(e)||i(e)||o()}},50008:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},60379:(e,t,n)=>{var r=n(67228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},65957:(e,t,n)=>{var r=n(29754),a=n(99489),i=n(70430),o=n(69100);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},s(t)}e.exports=s},87757:(e,t,n)=>{e.exports=n(35666)},14277:e=>{"use strict";e.exports=()=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|");return new RegExp(e,"g")}},34088:e=>{e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},94184:(e,t)=>{var n;
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n))e.push(a.apply(null,n));else if("object"===i)for(var o in n)r.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?e.exports=a:void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},16313:e=>{var t=function(){"use strict";function e(t,r,a,i){"object"==typeof r&&(a=r.depth,i=r.prototype,r.filter,r=r.circular);var o=[],s=[],u="undefined"!=typeof Buffer;return void 0===r&&(r=!0),void 0===a&&(a=1/0),function t(a,l){if(null===a)return null;if(0==l)return a;var c,d;if("object"!=typeof a)return a;if(e.__isArray(a))c=[];else if(e.__isRegExp(a))c=new RegExp(a.source,n(a)),a.lastIndex&&(c.lastIndex=a.lastIndex);else if(e.__isDate(a))c=new Date(a.getTime());else{if(u&&Buffer.isBuffer(a))return c=Buffer.allocUnsafe?Buffer.allocUnsafe(a.length):new Buffer(a.length),a.copy(c),c;void 0===i?(d=Object.getPrototypeOf(a),c=Object.create(d)):(c=Object.create(i),d=i)}if(r){var f=o.indexOf(a);if(-1!=f)return s[f];o.push(a),s.push(c)}for(var p in a){var h;d&&(h=Object.getOwnPropertyDescriptor(d,p)),h&&null==h.set||(c[p]=t(a[p],l-1))}return c}(t,a)}function t(e){return Object.prototype.toString.call(e)}function n(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return e.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},e.__objToStr=t,e.__isDate=function(e){return"object"==typeof e&&"[object Date]"===t(e)},e.__isArray=function(e){return"object"==typeof e&&"[object Array]"===t(e)},e.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},e.__getRegExpFlags=n,e}();e.exports&&(e.exports=t)},41185:(e,t,n)=>{var r=n(16313);e.exports=function(e,t){return e=e||{},Object.keys(t).forEach((function(n){void 0===e[n]&&(e[n]=r(t[n]))})),e}},86128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Gt});var r=Object.keys,a=Array.isArray,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function o(e,t){return"object"!=typeof t||r(t).forEach((function(n){e[n]=t[n]})),e}var s=Object.getPrototypeOf,u={}.hasOwnProperty;function l(e,t){return u.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(s(e))),r(t).forEach((function(n){f(e,n,t[n])}))}var d=Object.defineProperty;function f(e,t,n,r){d(e,t,o(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}var h=Object.getOwnPropertyDescriptor;function _(e,t){var n;return h(e,t)||(n=s(e))&&_(n,t)}var v=[].slice;function m(e,t,n){return v.call(e,t,n)}function g(e,t){return t(e)}function y(e){if(!e)throw new Error("Assertion Failed")}function E(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function S(e,t){return e.reduce((function(e,n,r){var a=t(n,r);return a&&(e[a[0]]=a[1]),e}),{})}function b(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function T(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function w(e,t){if(l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,a=t.length;r<a;++r){var i=w(e,t[r]);n.push(i)}return n}var o=t.indexOf(".");if(-1!==o){var s=e[t.substr(0,o)];return void 0===s?void 0:w(s,t.substr(o+1))}}function A(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){y("string"!=typeof n&&"length"in n);for(var r=0,a=t.length;r<a;++r)A(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var o=t.substr(0,i),s=t.substr(i+1);if(""===s)void 0===n?delete e[o]:e[o]=n;else{var u=e[o];u||(u=e[o]={}),A(u,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function C(e){var t={};for(var n in e)l(e,n)&&(t[n]=e[n]);return t}var O=[].concat;function M(e){return O.apply([],e)}var I="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(M([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return i[e]})).map((function(e){return i[e]}));function k(e){if(!e||"object"!=typeof e)return e;var t;if(a(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(k(e[n]))}else if(I.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)l(e,i)&&(t[i]=k(e[i]));return t}function P(e,t,n,a){return n=n||{},a=a||"",r(e).forEach((function(r){if(l(t,r)){var i=e[r],o=t[r];"object"==typeof i&&"object"==typeof o&&i&&o&&""+i.constructor==""+o.constructor?P(i,o,n,a+r+"."):i!==o&&(n[a+r]=t[r])}else n[a+r]=void 0})),r(t).forEach((function(r){l(e,r)||(n[a+r]=t[r])})),n}var R="undefined"!=typeof Symbol&&Symbol.iterator,D=R?function(e){var t;return null!=e&&(t=e[R])&&t.apply(e)}:function(){return null},N={};function L(e){var t,n,r,i;if(1===arguments.length){if(a(e))return e.slice();if(this===N&&"string"==typeof e)return[e];if(i=D(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var x="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function U(e,t){x=e,F=t}var F=function(){return!0},G=!new Error("").stack;function B(){if(G)try{throw B.arguments,new Error}catch(e){return e}return new Error}function j(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(F).map((function(e){return"\n"+e})).join("")):""}var Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],K=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function V(e,t){this._e=B(),this.name=e,this.message=t}function H(e,t,n,r){this._e=B(),this.failures=t,this.failedKeys=r,this.successCount=n}function $(e,t){this._e=B(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map((function(e){return e.toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}(e,t)}p(V).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+j(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(H).from(V),p($).from(V);var z=K.reduce((function(e,t){return e[t]=t+"Error",e}),{}),q=V,J=K.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=B(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=W[t]||n,this.inner=null)}return p(r).from(q),e[t]=r,e}),{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Q=Y.reduce((function(e,t){return e[t+"Error"]=J[t],e}),{});var X=K.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=J[t]),e}),{});function Z(){}function ee(e){return e}function te(e,t){return null==e||e===ee?t:function(n){return t(e(n))}}function ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function re(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ne(r,this.onsuccess):r),a&&(this.onerror=this.onerror?ne(a,this.onerror):a),void 0!==i?i:n}}function ae(e,t){return e===Z?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ne(r,this.onerror):r)}}function ie(e,t){return e===Z?t:function(n){var r=e.apply(this,arguments);o(n,r);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ne(a,this.onsuccess):a),i&&(this.onerror=this.onerror?ne(i,this.onerror):i),void 0===r?void 0===s?void 0:s:o(r,s)}}function oe(e,t){return e===Z?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function se(e,t){return e===Z?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,a=arguments.length,i=new Array(a);a--;)i[a]=arguments[a];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}X.ModifyError=H,X.DexieError=V,X.BulkError=$;var ue={},le=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=i.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),ce=le[0],de=le[1],fe=le[2],pe=de&&de.then,he=ce&&ce.constructor,_e=le[3],ve=!!fe,me=!1,ge=fe?function(){fe.then(je)}:i.setImmediate?setImmediate.bind(null,je):i.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){je(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(je,0)},ye=function(e,t){Me.push([e,t]),Se&&(ge(),Se=!1)},Ee=!0,Se=!0,be=[],Te=[],we=null,Ae=ee,Ce={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{dt(e[0],e[1])}catch(e){}}))}},Oe=Ce,Me=[],Ie=0,ke=[];function Pe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Z,this._lib=!1;var t=this._PSD=Oe;if(x&&(this._stackHolder=B(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ue)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Le(this,this._value))}this._state=null,this._value=null,++t.ref,Ne(this,e)}var Re={get:function(){var e=Oe,t=Qe;function n(n,r){var a=this,i=!e.global&&(e!==Oe||t!==Qe);i&&tt();var o=new Pe((function(t,o){Ue(a,new De(ut(n,e,i),ut(r,e,i),t,o,e))}));return x&&Be(o,this),o}return n.prototype=ue,n},set:function(e){f(this,"then",e&&e.prototype===ue?Re:{get:function(){return e},set:Re.set})}};function De(e,t,n,r,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=a}function Ne(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ye();t&&"function"==typeof t.then?Ne(e,(function(e,n){t instanceof Pe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,xe(e)),n&&Ke()}}),Le.bind(null,e))}catch(t){Le(e,t)}}function Le(e,t){if(Te.push(t),null===e._state){var n=e._lib&&Ye();t=Ae(t),e._state=!1,e._value=t,x&&null!==t&&"object"==typeof t&&!t._promise&&T((function(){var n=_(t,"stack");t._promise=e,f(t,"stack",{get:function(){return me?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){be.some((function(t){return t._value===e._value}))||be.push(e)}(e),xe(e),n&&Ke()}}function xe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ue(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),0===Ie&&(++Ie,ye((function(){0==--Ie&&We()}),[]))}function Ue(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ie,ye(Fe,[n,e,t])}else e._listeners.push(t)}function Fe(e,t,n){try{we=t;var r,a=t._value;t._state?r=e(a):(Te.length&&(Te=[]),r=e(a),-1===Te.indexOf(a)&&function(e){var t=be.length;for(;t;)if(be[--t]._value===e._value)return void be.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{we=null,0==--Ie&&We(),--n.psd.ref||n.psd.finalize()}}function Ge(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var a,i,o=e._value;null!=o?(a=o.name||"Error",i=o.message||o,r=j(o,0)):(a=o,i=""),t.push(a+(i?": "+i:"")+r)}return x&&((r=j(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Ge(e._prev,t,n)),t}function Be(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function je(){Ye()&&Ke()}function Ye(){var e=Ee;return Ee=!1,Se=!1,e}function Ke(){var e,t,n;do{for(;Me.length>0;)for(e=Me,Me=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Me.length>0);Ee=!0,Se=!0}function We(){var e=be;be=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=ke.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Pe(ue,!1,e)}function He(e,t){var n=Oe;return function(){var r=Ye(),a=Oe;try{return it(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{it(a,!1),r&&Ke()}}}c(Pe.prototype,{then:Re,_then:function(e,t){Ue(this,new De(null,null,e,t,Oe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):Ve(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Ve(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Ve(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=Ge(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Pe((function(r,a){var i=setTimeout((function(){return a(new J.Timeout(t))}),e);n.then(r,a).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Pe.prototype,Symbol.toStringTag,"Promise"),Ce.env=ot(),c(Pe,{all:function(){var e=L.apply(null,arguments).map(nt);return new Pe((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(a,i){return Pe.resolve(a).then((function(n){e[i]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Pe)return e;if(e&&"function"==typeof e.then)return new Pe((function(t,n){e.then(t,n)}));var t=new Pe(ue,!0,e);return Be(t,we),t},reject:Ve,race:function(){var e=L.apply(null,arguments).map(nt);return new Pe((function(t,n){e.map((function(e){return Pe.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Oe},set:function(e){return Oe=e}},newPSD:Ze,usePSD:st,scheduler:{get:function(){return ye},set:function(e){ye=e}},rejectionMapper:{get:function(){return Ae},set:function(e){Ae=e}},follow:function(e,t){return new Pe((function(n,r){return Ze((function(t,n){var r=Oe;r.unhandleds=[],r.onunhandled=n,r.finalize=ne((function(){var e=this;!function(e){function t(){e(),ke.splice(ke.indexOf(t),1)}ke.push(t),++Ie,ye((function(){0==--Ie&&We()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}});var $e={awaits:0,echoes:0,id:0},ze=0,qe=[],Je=0,Qe=0,Xe=0;function Ze(e,t,n,r){var a=Oe,i=Object.create(a);i.parent=a,i.ref=0,i.global=!1,i.id=++Xe;var s=Ce.env;i.env=ve?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,resolve:Pe.resolve,reject:Pe.reject,nthen:lt(s.nthen,i),gthen:lt(s.gthen,i)}:{},t&&o(i,t),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=st(i,e,n,r);return 0===i.ref&&i.finalize(),u}function et(){return $e.id||($e.id=++ze),++$e.awaits,$e.echoes+=7,$e.id}function tt(e){!$e.awaits||e&&e!==$e.id||(0==--$e.awaits&&($e.id=0),$e.echoes=7*$e.awaits)}function nt(e){return $e.echoes&&e&&e.constructor===he?(et(),e.then((function(e){return tt(),e}),(function(e){return tt(),ft(e)}))):e}function rt(e){++Qe,$e.echoes&&0!=--$e.echoes||($e.echoes=$e.id=0),qe.push(Oe),it(e,!0)}function at(){var e=qe[qe.length-1];qe.pop(),it(e,!1)}function it(e,t){var n,r=Oe;if((t?!$e.echoes||Je++&&e===Oe:!Je||--Je&&e===Oe)||(n=t?rt.bind(null,e):at,pe.call(ce,n)),e!==Oe&&(Oe=e,r===Ce&&(Ce.env=ot()),ve)){var a=Ce.env.Promise,o=e.env;de.then=o.nthen,a.prototype.then=o.gthen,(r.global||e.global)&&(Object.defineProperty(i,"Promise",o.PromiseProp),a.all=o.all,a.race=o.race,a.resolve=o.resolve,a.reject=o.reject)}}function ot(){var e=i.Promise;return ve?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:de.then,gthen:e.prototype.then}:{}}function st(e,t,n,r,a){var i=Oe;try{return it(e,!0),t(n,r,a)}finally{it(i,!1)}}function ut(e,t,n){return"function"!=typeof e?e:function(){var r=Oe;n&&et(),it(t,!0);try{return e.apply(this,arguments)}finally{it(r,!1)}}}function lt(e,t){return function(n,r){return e.call(this,ut(n,t,!1),ut(r,t,!1))}}var ct="unhandledrejection";function dt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,a={promise:t,reason:e};if(i.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ct,!0,!0),o(r,a)):i.CustomEvent&&o(r=new CustomEvent(ct,{detail:a}),a),r&&i.dispatchEvent&&(dispatchEvent(r),!i.PromiseRejectionEvent&&i.onunhandledrejection))try{i.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var ft=Pe.reject;function pt(e){var t={},n=function(n,r){if(r){for(var a=arguments.length,i=new Array(a-1);--a;)i[a-1]=arguments[a];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var i=1,o=arguments.length;i<o;++i)s(arguments[i]);return n;function s(e,r,a){if("object"==typeof e)return u(e);r||(r=oe),a||(a=Z);var i={subscribers:[],fire:a,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=r(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(r,a)}};return t[e]=n[e]=i,i}function u(e){r(e).forEach((function(t){var n=e[t];if(a(n))s(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new J.InvalidArgument("Invalid event config");var r=s(t,ee,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){E((function(){e.apply(null,t)}))}))}))}}))}}var ht,_t="{version}",vt=String.fromCharCode(65535),mt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return vt}}(),gt=-1/0,yt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Et="String expected.",St=[],bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Tt=bt,wt=bt,At=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function Ct(e,t){var n,s,u,d,p,h=Ct.dependencies,_=o({addons:Ct.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},t),v=_.addons,E=_.autoOpen,O=_.indexedDB,I=_.IDBKeyRange,R=this._dbSchema={},D=[],U=[],F={},G=null,Y=null,K=!1,W=null,V=!1,z="readonly",q="readwrite",Q=this,X=new Pe((function(e){n=e})),ne=new Pe((function(e,t){s=t})),oe=!0,ue=!!Ft(O);function le(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ce(e,t,n){var a=Q._createTransaction(q,U,R);a.create(t),a._completion.catch(n);var i=a._reject.bind(a);Ze((function(){Oe.trans=a,0===e?(r(R).forEach((function(e){de(t,e,R[e].primKey,R[e].indexes)})),Pe.follow((function(){return Q.on.populate.fire(a)})).catch(i)):function(e,t,n){var a=[],i=D.filter((function(t){return t._cfg.version===e}))[0];if(!i)throw new J.Upgrade("Dexie specification of currently installed DB version is missing");R=Q._dbSchema=i._cfg.dbschema;var o=!1;function s(){return a.length?Pe.resolve(a.shift()(t.idbtrans)).then(s):Pe.resolve()}return D.filter((function(t){return t._cfg.version>e})).forEach((function(e){a.push((function(){var r=R,a=e._cfg.dbschema;xe(r,n),xe(a,n),R=Q._dbSchema=a;var i=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var a=e[r],i=t[r];if(a){var o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(a.primKey.src!==i.primKey.src)o.recreate=!0,n.change.push(o);else{var s=a.idxByName,u=i.idxByName;for(var l in s)u[l]||o.del.push(l);for(l in u){var c=s[l],d=u[l];c?c.src!==d.src&&o.change.push(d):o.add.push(d)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}(r,a);if(i.add.forEach((function(e){de(n,e[0],e[1].primKey,e[1].indexes)})),i.change.forEach((function(e){if(e.recreate)throw new J.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach((function(e){fe(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),fe(t,e)})),e.del.forEach((function(e){t.deleteIndex(e)}))})),e._cfg.contentUpgrade)return o=!0,Pe.follow((function(){e._cfg.contentUpgrade(t)}))})),a.push((function(t){o&&Tt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)}))})),s().then((function(){!function(e,t){r(e).forEach((function(n){t.db.objectStoreNames.contains(n)||de(t,n,e[n].primKey,e[n].indexes)}))}(R,n)}))}(e,a,t).catch(i)}))}function de(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){fe(a,e)})),a}function fe(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function pe(e,t,n){if(V||Oe.letThrough){var r=Q._createTransaction(e,t,R);try{r.create()}catch(e){return ft(e)}return r._promise(e,(function(e,t){return Ze((function(){return Oe.trans=r,n(e,t,r)}))})).then((function(e){return r._completion.then((function(){return e}))}))}if(!K){if(!E)return ft(new J.DatabaseClosed);Q.open().catch(Z)}return X.then((function(){return pe(e,t,n)}))}function ve(e,t,n){var r=arguments.length;if(r<2)throw new J.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];n=a.pop();var i=M(a);return[e,i,n]}function me(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=F[e]?F[e].hook:pt(null,{creating:[re,Z],reading:[te,ee],updating:[ie,Z],deleting:[ae,Z]})}function ge(e,t,n){return(n?Rt:kt)((function(n){e.push(n),t&&t()}))}function ye(e,t,n,r,a){return new Pe((function(i,o){var s=n.length,u=s-1;if(0===s)return i();if(r){var l,c=Rt(o),d=It(null);T((function(){for(var r=0;r<s;++r){l={onsuccess:null,onerror:null};var o=n[r];a.call(l,o[0],o[1],t);var f=e.delete(o[0]);f._hookCtx=l,f.onerror=c,f.onsuccess=r===u?It(i):d}}),(function(e){throw l.onerror&&l.onerror(e),e}))}else for(var f=0;f<s;++f){var p=e.delete(n[f]);p.onerror=kt(o),f===u&&(p.onsuccess=He((function(){return i()})))}}))}function Ee(e,t,n,r){var a=this;this.db=Q,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=pt(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),ft(e)}))}function Se(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function be(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var a=e._ctx,i=a.table;this._ctx={table:i,index:a.index,isPrimKey:!a.index||i.schema.primKey.keyPath&&a.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:a.or,valueMapper:i.hook.reading.fire}}function Te(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function we(e,t){return e._cfg.version-t._cfg.version}function Ae(e,t,n){t.forEach((function(t){var r=n[t];e.forEach((function(e){t in e||(e===Ee.prototype||e instanceof Ee?f(e,t,{get:function(){return this.table(t)}}):e[t]=new me(t,r))}))}))}function Ce(e,t,n,r,a,i){var o=He(i?function(e,t,r){return n(i(e),t,r)}:n,a);e.onerror||(e.onerror=kt(a)),e.onsuccess=b(t?function(){var n=e.result;if(n){var i=function(){n.continue()};t(n,(function(e){i=e}),r,a)&&o(n.value,n,(function(e){i=e})),i()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};o(t.value,t,(function(e){n=e})),n()}else r()},a)}function Me(e,t){return O.cmp(e,t)}function Ie(e,t){return Me(e,t)>0?e:t}function ke(e,t){return O.cmp(e,t)}function Re(e,t){return O.cmp(t,e)}function De(e,t){return e<t?-1:e===t?0:1}function Ne(e,t){return e>t?-1:e===t?0:1}function Le(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function xe(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var a=n[r],o=t.objectStore(a);u="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var l=o.indexNames[s],c=o.index(l).keyPath,d="string"==typeof c?c:"["+m(c).join("+")+"]";if(e[a]){var f=e[a].idxByName[d];f&&(f.name=l)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u=!1)}function Ue(e){Q.on("blocked").fire(e),St.filter((function(e){return e.name===Q.name&&e!==Q&&!e._vcFired})).map((function(t){return t.on("versionchange").fire(e)}))}this.version=function(e){if(G||K)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=D.filter((function(t){return t._cfg.version===e}))[0];return t||(t=new le(e),D.push(t),D.sort(we),oe=!1,t)},o(le.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e;var t={};D.forEach((function(e){o(t,e._cfg.storesSource)}));var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),R=Q._dbSchema=n,[F,Q,Ee.prototype].forEach((function(e){for(var t in e)e[t]instanceof me&&delete e[t]})),Ae([F,Q,Ee.prototype,this._cfg.tables],r(n),n),U=r(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){r(e).forEach((function(n){if(null!==e[n]){var r={},i=function(e){var t=[];return e.split(",").forEach((function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new Lt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),/\./.test(e)))})),t}(e[n]),o=i.shift();if(o.multi)throw new J.Schema("Primary key cannot be multi-valued");o.keyPath&&A(r,o.keyPath,o.auto?0:o.keyPath),i.forEach((function(e){if(e.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string");A(r,e.keyPath,e.compound?e.keyPath.map((function(){return""})):"")})),t[n]=new xt(n,o,i,r)}}))}}),this._allTables=F,this._createTransaction=function(e,t,n,r){return new Ee(e,t,n,r)},this._whenReady=function(e){return V||Oe.letThrough?e():new Pe((function(e,t){if(!K){if(!E)return void t(new J.DatabaseClosed);Q.open().catch(Z)}X.then(e,t)})).then(e)},this.verno=0,this.open=function(){if(K||G)return X.then((function(){return Y?ft(Y):Q}));x&&(ne._stackHolder=B()),K=!0,Y=null,V=!1;var t=n,a=null;return Pe.race([ne,new Pe((function(t,n){if(!O)throw new J.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=oe?O.open(e):O.open(e,Math.round(10*Q.verno));if(!i)throw new J.MissingAPI("IndexedDB API not available");i.onerror=kt(n),i.onblocked=He(Ue),i.onupgradeneeded=He((function(t){if(a=i.transaction,oe&&!Q._allowEmptyDB){i.onerror=Dt,a.abort(),i.result.close();var r=O.deleteDatabase(e);r.onsuccess=r.onerror=He((function(){n(new J.NoSuchDatabase("Database "+e+" doesnt exist"))}))}else{a.onerror=kt(n),ce((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,a,n)}}),n),i.onsuccess=He((function(){if(a=null,G=i.result,St.push(Q),oe)!function(){if(Q.verno=G.version/10,Q._dbSchema=R={},0===(U=m(G.objectStoreNames,0)).length)return;var e=G.transaction(Ut(U),"readonly");U.forEach((function(t){for(var n=e.objectStore(t),r=n.keyPath,a=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new Lt(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,a),o=[],s=0;s<n.indexNames.length;++s){var u=n.index(n.indexNames[s]);a=(r=u.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var l=new Lt(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,a);o.push(l)}R[t]=new xt(t,i,o,{})})),Ae([F],r(R),R)}();else if(G.objectStoreNames.length>0)try{xe(R,G.transaction(Ut(G.objectStoreNames),z))}catch(e){}G.onversionchange=He((function(e){Q._vcFired=!0,Q.on("versionchange").fire(e)})),ue||"__dbnames"===e||ht.dbnames.put({name:e}).catch(Z),t()}),n)}))]).then((function(){return W=[],Pe.resolve(Ct.vip(Q.on.ready.fire)).then((function e(){if(W.length>0){var t=W.reduce(se,Z);return W=[],Pe.resolve(Ct.vip(t)).then(e)}}))})).finally((function(){W=null})).then((function(){return K=!1,Q})).catch((function(e){try{a&&a.abort()}catch(e){}return K=!1,Q.close(),ft(Y=e)})).finally((function(){V=!0,t()}))},this.close=function(){var e=St.indexOf(Q);if(e>=0&&St.splice(e,1),G){try{G.close()}catch(e){}G=null}E=!1,Y=new J.DatabaseClosed,K&&s(Y),X=new Pe((function(e){n=e})),ne=new Pe((function(e,t){s=t}))},this.delete=function(){var t=arguments.length>0;return new Pe((function(n,r){if(t)throw new J.InvalidArgument("Arguments not allowed in db.delete()");function a(){Q.close();var t=O.deleteDatabase(e);t.onsuccess=He((function(){ue||ht.dbnames.delete(e).catch(Z),n()})),t.onerror=kt(r),t.onblocked=Ue}K?X.then(a):a()}))},this.backendDB=function(){return G},this.isOpen=function(){return null!==G},this.hasBeenClosed=function(){return Y&&Y instanceof J.DatabaseClosed},this.hasFailed=function(){return null!==Y},this.dynamicallyOpened=function(){return oe},this.name=e,c(this,{tables:{get:function(){return r(F).map((function(e){return F[e]}))}}}),this.on=pt(this,"populate","blocked","versionchange",{ready:[se,Z]}),this.on.ready.subscribe=g(this.on.ready.subscribe,(function(e){return function(t,n){Ct.vip((function(){V?(Y||Pe.resolve().then(t),n&&e(t)):W?(W.push(t),n&&e(t)):(e(t),n||e((function e(){Q.on.ready.unsubscribe(t),Q.on.ready.unsubscribe(e)})))}))}})),this.transaction=function(){var e=ve.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=Oe.trans;r&&r.db===Q&&-1===e.indexOf("!")||(r=null);var a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var i=t.map((function(e){var t=e instanceof me?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if("r"==e||e==z)e=z;else{if("rw"!=e&&e!=q)throw new J.InvalidArgument("Invalid transaction mode: "+e);e=q}if(r){if(r.mode===z&&e===q){if(!a)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&i.forEach((function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!a)throw new J.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),a&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,(function(t,n){n(e)})):ft(e)}return r?r._promise(e,o,"lock"):Oe.trans?st(Oe.transless,(function(){return Q._whenReady(o)})):Q._whenReady(o);function o(){return Pe.resolve().then((function(){var t,a=Oe.transless||Oe,o=Q._createTransaction(e,i,R,r),s={trans:o,transless:a};r?o.idbtrans=r.idbtrans:o.create(),n.constructor===_e&&et();var u=Pe.follow((function(){if(t=n.call(o,o))if(t.constructor===he){var e=tt.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Nt(t))}),s);return(t&&"function"==typeof t.then?Pe.resolve(t).then((function(e){return o.active?e:ft(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return t}))).then((function(e){return r&&o._resolve(),o._completion.then((function(){return e}))})).catch((function(e){return o._reject(e),ft(e)}))}))}},this.table=function(e){if(!l(F,e))throw new J.InvalidTable("Table "+e+" does not exist");return F[e]},c(me.prototype,{_trans:function(e,t,n){var r=this._tx||Oe.trans;return r&&r.db===Q?r===Oe.trans?r._promise(e,t,n):Ze((function(){return r._promise(e,t,n)}),{trans:r,transless:Oe.transless||Oe}):pe(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,(function(e,n,a){if(-1===a.storeNames.indexOf(r))throw new J.NotFound("Table"+r+" not part of transaction");return t(e,n,a.idbtrans.objectStore(r),a)}),n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore(z,(function(t,r,a){var i=a.get(e);i.onerror=kt(r),i.onsuccess=He((function(){t(n.hook.reading.fire(i.result))}),r)})).then(t)},where:function(e){if("string"==typeof e)return new Se(this,e);if(a(e))return new Se(this,"["+e.join("+")+"]");var t=r(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&mt!==vt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var i=this.schema.idxByName,o=t.reduce((function(t,n){return[t[0]||i[n],t[0]||!i[n]?Le(t[1],(function(t){return""+w(t,n)==""+e[n]})):t[1]]}),[null,null]),s=o[0];return s?this.where(s.name).equals(e[s.keyPath]).filter(o[1]):n?this.filter(o[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new be(new Se(this,a(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new be(new Se(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&Mt(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(l(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(Ct.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===Z?this._idbstore(q,(function(t,n,r,a){t(ye(r,a,e,!1,Z))})):this.where(":id").anyOf(e).delete().then((function(){}))},bulkPut:function(e,t){var n=this;return this._idbstore(q,(function(r,a,i){if(!i.keyPath&&!n.schema.primKey.auto&&!t)throw new J.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&t)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var o,s,u=function(e){0===l.length?r(e):a(new $(n.name+".bulkPut(): "+l.length+" of "+c+" operations failed",l))},l=[],c=e.length,d=n;if(n.hook.creating.fire===Z&&n.hook.updating.fire===Z){s=ge(l);for(var f=0,p=e.length;f<p;++f)(o=t?i.put(e[f],t[f]):i.put(e[f])).onerror=s;o.onerror=ge(l,u),o.onsuccess=Pt(u)}else{var h=t||i.keyPath&&e.map((function(e){return w(e,i.keyPath)})),_=h&&S(h,(function(t,n){return null!=t&&[t,e[n]]}));(h?d.where(":id").anyOf(h.filter((function(e){return null!=e}))).modify((function(){this.value=_[this.primKey],_[this.primKey]=null})).catch(H,(function(e){l=e.failures})).then((function(){for(var n=[],r=t&&[],a=h.length-1;a>=0;--a){var i=h[a];(null==i||_[i])&&(n.push(e[a]),t&&r.push(i),null!=i&&(_[i]=null))}return n.reverse(),t&&r.reverse(),d.bulkAdd(n,r)})).then((function(e){var t=h[h.length-1];return null!=t?t:e})):d.bulkAdd(e)).then(u).catch($,(function(e){l=l.concat(e.failures),u()})).catch(a)}}),"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(q,(function(a,i,o,s){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new J.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return a();function u(e){0===f.length?a(e):i(new $(n.name+".bulkAdd(): "+f.length+" of "+p+" operations failed",f))}var l,c,d,f=[],p=e.length;if(r!==Z){var h,_=o.keyPath;c=ge(f,null,!0),d=It(null),T((function(){for(var n=0,a=e.length;n<a;++n){h={onerror:null,onsuccess:null};var i=t&&t[n],u=e[n],f=t?i:_?w(u,_):void 0,p=r.call(h,f,u,s);null==f&&null!=p&&(_?A(u=k(u),_,p):i=p),(l=null!=i?o.add(u,i):o.add(u))._hookCtx=h,n<a-1&&(l.onerror=c,h.onsuccess&&(l.onsuccess=d))}}),(function(e){throw h.onerror&&h.onerror(e),e})),l.onerror=ge(f,u,!0),l.onsuccess=It(u)}else{c=ge(f);for(var v=0,m=e.length;v<m;++v)(l=t?o.add(e[v],t[v]):o.add(e[v])).onerror=c;l.onerror=ge(f,u),l.onsuccess=Pt(u)}}))},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(q,(function(r,a,i,o){var s={onsuccess:null,onerror:null};if(n!==Z){var u=null!=t?t:i.keyPath?w(e,i.keyPath):void 0,l=n.call(s,u,e,o);null==u&&null!=l&&(i.keyPath?A(e,i.keyPath,l):t=l)}try{var c=null!=t?i.add(e,t):i.add(e);c._hookCtx=s,c.onerror=Rt(a),c.onsuccess=It((function(t){var n=i.keyPath;n&&A(e,n,t),r(t)}))}catch(e){throw s.onerror&&s.onerror(e),e}}))},put:function(e,t){var n=this,r=this.hook.creating.fire,a=this.hook.updating.fire;if(r!==Z||a!==Z){var i=this.schema.primKey.keyPath,o=void 0!==t?t:i&&w(e,i);return null==o?this.add(e):(e=k(e),this._trans(q,(function(){return n.where(":id").equals(o).modify((function(){this.value=e})).then((function(r){return 0===r?n.add(e,t):o}))}),"locked"))}return this._idbstore(q,(function(n,r,a){var i=void 0!==t?a.put(e,t):a.put(e);i.onerror=kt(r),i.onsuccess=He((function(t){var r=a.keyPath;r&&A(e,r,t.target.result),n(i.result)}))}))},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(q,(function(t,n,r){var a=r.delete(e);a.onerror=kt(n),a.onsuccess=He((function(){t(a.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(q,(function(e,t,n){var r=n.clear();r.onerror=kt(t),r.onsuccess=He((function(){e(r.result)}))}))},update:function(e,t){if("object"!=typeof t||a(t))throw new J.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||a(e))return this.where(":id").equals(e).modify(t);r(t).forEach((function(n){A(e,n,t[n])}));var n=w(e,this.schema.primKey.keyPath);return void 0===n?ft(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),c(Ee.prototype,{_lock:function(){return y(!Oe.global),++this._reculock,1!==this._reculock||Oe.global||(Oe.lockOwnerFor=this),this},_unlock:function(){if(y(!Oe.global),0==--this._reculock)for(Oe.global||(Oe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{st(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Oe.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(y(!this.idbtrans),!e&&!G)switch(Y&&Y.name){case"DatabaseClosedError":throw new J.DatabaseClosed(Y);case"MissingAPIError":throw new J.MissingAPI(Y.message,Y);default:throw new J.OpenFailed(Y)}if(!this.active)throw new J.TransactionInactive;return y(null===this._completion._state),(e=this.idbtrans=e||G.transaction(Ut(this.storeNames),this.mode)).onerror=He((function(n){Dt(n),t._reject(e.error)})),e.onabort=He((function(n){Dt(n),t.active&&t._reject(new J.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=He((function(){t.active=!1,t._resolve()})),this},_promise:function(e,t,n){var r=this;if(e===q&&this.mode!==q)return ft(new J.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new J.TransactionInactive);if(this._locked())return new Pe((function(a,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,i)},Oe])}));if(n)return Ze((function(){var e=new Pe((function(e,n){r._lock();var a=t(e,n,r);a&&a.then&&a.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var a=new Pe((function(e,n){var a=t(e,n,r);a&&a.then&&a.then(e,n)}));return a._lib=!0,a},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Pe.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return e}));else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Pe((function(n,a){e.then((function(e){return t._waitingQueue.push(He(n.bind(null,e)))}),(function(e){return t._waitingQueue.push(He(a.bind(null,e)))})).finally((function(){t._waitingFor===r&&(t._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new J.Abort),this.active=!1},tables:{get:(d="Transaction.tables",p=function(){return F},function(){return console.warn(d+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+j(B(),1)),p.apply(this,arguments)})},table:function(e){return new me(e,Q.table(e).schema,this)}}),c(Se.prototype,(function(){function e(e,t,n){var r=e instanceof Se?new be(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new be(e,(function(){return I.only("")})).limit(0)}function n(e,t,n,r,a,i){for(var o=Math.min(e.length,r.length),s=-1,u=0;u<o;++u){var l=t[u];if(l!==r[u])return a(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):a(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;a(e[u],l)<0&&(s=u)}return o<r.length&&"next"===i?e+n.substr(e.length):o<e.length&&"prev"===i?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function r(t,r,a,i){var o,s,u,l,c,d,f,p=a.length;if(!a.every((function(e){return"string"==typeof e})))return e(t,Et);function h(e){o=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),s=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),u="next"===e?De:Ne;var t=a.map((function(e){return{lower:s(e),upper:o(e)}})).sort((function(e,t){return u(e.lower,t.lower)}));l=t.map((function(e){return e.upper})),c=t.map((function(e){return e.lower})),d=e,f="next"===e?"":i}h("next");var _=new be(t,(function(){return I.bound(l[0],c[p-1]+i)}));_._ondirectionchange=function(e){h(e)};var v=0;return _._addAlgorithm((function(e,t,a){var i=e.key;if("string"!=typeof i)return!1;var o=s(i);if(r(o,c,v))return!0;for(var h=null,_=v;_<p;++_){var m=n(i,o,l[_],c[_],u,d);null===m&&null===h?v=_+1:(null===h||u(h,m)>0)&&(h=m)}return t(null!==h?function(){e.continue(h+f)}:a),!1})),_}return{between:function(n,r,a,i){a=!1!==a,i=!0===i;try{return Me(n,r)>0||0===Me(n,r)&&(a||i)&&(!a||!i)?t(this):new be(this,(function(){return I.bound(n,r,!a,!i)}))}catch(t){return e(this,yt)}},equals:function(e){return new be(this,(function(){return I.only(e)}))},above:function(e){return new be(this,(function(){return I.lowerBound(e,!0)}))},aboveOrEqual:function(e){return new be(this,(function(){return I.lowerBound(e)}))},below:function(e){return new be(this,(function(){return I.upperBound(e,!0)}))},belowOrEqual:function(e){return new be(this,(function(){return I.upperBound(e)}))},startsWith:function(t){return"string"!=typeof t?e(this,Et):this.between(t,t+vt,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],vt)},equalsIgnoreCase:function(e){return r(this,(function(e,t){return e===t[0]}),[e],"")},anyOfIgnoreCase:function(){var e=L.apply(N,arguments);return 0===e.length?t(this):r(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},startsWithAnyOfIgnoreCase:function(){var e=L.apply(N,arguments);return 0===e.length?t(this):r(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,vt)},anyOf:function(){var n=L.apply(N,arguments),r=ke;try{n.sort(r)}catch(t){return e(this,yt)}if(0===n.length)return t(this);var a=new be(this,(function(){return I.bound(n[0],n[n.length-1])}));a._ondirectionchange=function(e){r="next"===e?ke:Re,n.sort(r)};var i=0;return a._addAlgorithm((function(e,t,a){for(var o=e.key;r(o,n[i])>0;)if(++i===n.length)return t(a),!1;return 0===r(o,n[i])||(t((function(){e.continue(n[i])})),!1)})),a},notEqual:function(e){return this.inAnyRange([[gt,e],[e,mt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=L.apply(N,arguments);if(0===t.length)return new be(this);try{t.sort(ke)}catch(t){return e(this,yt)}var n=t.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[gt,t]]}),null);return n.push([t[t.length-1],mt]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&ke(e[0],e[1])<=0})))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var a=!r||!1!==r.includeLowers,i=r&&!0===r.includeUppers;var o,s=ke;function u(e,t){return s(e[0],t[0])}try{(o=n.reduce((function(e,t){for(var n=0,r=e.length;n<r;++n){var a=e[n];if(Me(t[0],a[1])<0&&Me(t[1],a[0])>0){a[0]=Me(i=a[0],o=t[0])<0?i:o,a[1]=Ie(a[1],t[1]);break}}var i,o;return n===r&&e.push(t),e}),[])).sort(u)}catch(t){return e(this,yt)}var l=0,c=i?function(e){return ke(e,o[l][1])>0}:function(e){return ke(e,o[l][1])>=0},d=a?function(e){return Re(e,o[l][0])>0}:function(e){return Re(e,o[l][0])>=0};var f=c,p=new be(this,(function(){return I.bound(o[0][0],o[o.length-1][1],!a,!i)}));return p._ondirectionchange=function(e){"next"===e?(f=c,s=ke):(f=d,s=Re),o.sort(u)},p._addAlgorithm((function(e,t,n){for(var r=e.key;f(r);)if(++l===o.length)return t(n),!1;return!!function(e){return!c(e)&&!d(e)}(r)||(0===Me(r,o[l][1])||0===Me(r,o[l][0])||t((function(){s===ke?e.continue(o[l][0]):e.continue(o[l][1])})),!1)})),p},startsWithAnyOf:function(){var n=L.apply(N,arguments);return n.every((function(e){return"string"==typeof e}))?0===n.length?t(this):this.inAnyRange(n.map((function(e){return[e,e+vt]}))):e(this,"startsWithAnyOf() only works with strings")}}})),c(be.prototype,(function(){function e(e,t){e.filter=Le(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Le(r(),t())}:t,e.justLimit=n&&!r}function n(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new J.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function a(e,t){var r=n(e,t);return e.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(e.range||null,e.dir+e.unique):r.openCursor(e.range||null,e.dir+e.unique)}function i(e,t,n,r,i){var o=e.replayFilter?Le(e.filter,e.replayFilter()):e.filter;e.or?function(){var s={},u=0;function c(){2==++u&&n()}function d(e,n,a){if(!o||o(n,a,c,r)){var i=n.primaryKey,u=""+i;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(i)),l(s,u)||(s[u]=!0,t(e,n,a))}}e.or._iterate(d,c,r,i),Ce(a(e,i),e.algorithm,d,c,r,!e.keysOnly&&e.valueMapper)}():Ce(a(e,i),Le(e.algorithm,o),t,n,r,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ft.bind(null,n.error)):n.table._idbstore(z,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,ft.bind(null,t.error)):t.table._idbstore(q,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Le(t.algorithm,e)},_iterate:function(e,t,n,r){return i(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read((function(n,r,a){i(t,e,n,r,a)}))},count:function(e){var t=this._ctx;if(Te(t,!0))return this._read((function(e,r,a){var i=n(t,a),o=t.range?i.count(t.range):i.count();o.onerror=kt(r),o.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}}),e);var r=0;return this._read((function(e,n,a){i(t,(function(){return++r,!1}),(function(){e(r)}),n,a)}),e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function s(e,t){var n=i(e,a),r=i(t,a);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(s)})).then(t)},toArray:function(e){var t=this._ctx;return this._read((function(e,r,a){if(u&&"next"===t.dir&&Te(t,!0)&&t.limit>0){var o=t.table.hook.reading.fire,s=n(t,a),l=t.limit<1/0?s.getAll(t.range,t.limit):s.getAll(t.range);l.onerror=kt(r),l.onsuccess=Pt(o===ee?e:function(t){try{e(t.map(o))}catch(e){r(e)}})}else{var c=[];i(t,(function(e){c.push(e)}),(function(){e(c)}),r,a)}}),e)},offset:function(e){var n=this._ctx;return e<=0||(n.offset+=e,Te(n)?t(n,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):t(n,(function(){var t=e;return function(){return--t<0}}))),this},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},until:function(t,n){return e(this._ctx,(function(e,r,a){return!t(e.value)||(r(a),n)})),this},first:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return e(this._ctx,(function(e){return t(e.value)})),function(e,t){e.isMatch=Le(e.isMatch,t)}(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new Se(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},primaryKeys:function(e){var t=this._ctx;if(u&&"next"===t.dir&&Te(t,!0)&&t.limit>0)return this._read((function(e,r,a){var i=n(t,a),o=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);o.onerror=kt(r),o.onsuccess=Pt(e)})).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,(function(e){var t=e.primaryKey.toString(),n=l(r,t);return r[t]=!0,!n})),this},modify:function(e){var t=this,n=this._ctx.table.hook,a=n.updating.fire,i=n.deleting.fire;return this._write((function(n,s,u,c){var d;if("function"==typeof e)d=a===Z&&i===Z?e:function(t){var n=k(t);if(!1===e.call(this,t,this))return!1;if(l(this,"value")){var o=P(n,this.value),s=a.call(this,o,this.primKey,n,c);s&&(t=this.value,r(s).forEach((function(e){A(t,e,s[e])})))}else i.call(this,this.primKey,t,c)};else if(a===Z){var f=r(e),p=f.length;d=function(t){for(var n=!1,r=0;r<p;++r){var a=f[r],i=e[a];w(t,a)!==i&&(A(t,a,i),n=!0)}return n}}else{var h=e;e=C(h),d=function(t){var n=!1,i=a.call(this,e,this.primKey,k(t),c);return i&&o(e,i),r(e).forEach((function(r){var a=e[r];w(t,r)!==a&&(A(t,r,a),n=!0)})),i&&(e=C(h)),n}}var _=0,v=0,m=!1,g=[],y=[],E=null;function S(e){return e&&(g.push(e),y.push(E)),s(new H("Error modifying one or more objects",g,v,y))}function b(){m&&v+g.length===_&&(g.length>0?S():n(v))}t.clone().raw()._iterate((function(e,t){E=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return g.push(e),y.push(n.primKey),b(),!0}if(!1!==d.call(n,e,n)){var a=!l(n,"value");++_,T((function(){var e=a?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=Rt(r),e.onsuccess=It((function(){++v,b()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){m=!0,b()}),S,u)}))},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,a=r!==Z;if(!a&&Te(t)&&(t.isPrimKey&&!wt||!n))return this._write((function(e,t,r){var a=kt(t),i=n?r.count(n):r.count();i.onerror=a,i.onsuccess=function(){var o=i.result;T((function(){var t=n?r.delete(n):r.clear();t.onerror=a,t.onsuccess=function(){return e(o)}}),(function(e){return t(e)}))}}));var i=a?2e3:1e4;return this._write((function(n,o,s,u){var l=0,c=e.clone({keysOnly:!t.isMatch&&!a}).distinct().limit(i).raw(),d=[],f=function(){return c.each(a?function(e,t){d.push([t.primaryKey,t.value])}:function(e,t){d.push(t.primaryKey)}).then((function(){return a?d.sort((function(e,t){return ke(e[0],t[0])})):d.sort(ke),ye(s,u,d,a,r)})).then((function(){var e=d.length;return l+=e,d=[],e<i?l:f()}))};n(f())}))}}})),o(this,{Collection:be,Table:me,Transaction:Ee,Version:le,WhereClause:Se}),Q.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+Q.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Q.name+"'. Closing db now to resume the delete request."),Q.close()})),Q.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+Q.name+"') was blocked"):console.warn("Upgrade '"+Q.name+"' blocked by other connection holding version "+e.oldVersion/10)})),v.forEach((function(e){e(Q)}))}function Ot(e){if("function"==typeof e)return new e;if(a(e))return[Ot(e[0])];if(e&&"object"==typeof e){var t={};return Mt(t,e),t}return e}function Mt(e,t){return r(t).forEach((function(n){var r=Ot(t[n]);e[n]=r})),e}function It(e){return He((function(t){var n=t.target,r=n._hookCtx,a=r.value||n.result,i=r&&r.onsuccess;i&&i(a),e&&e(a)}),e)}function kt(e){return He((function(t){return Dt(t),e(t.target.error),!1}))}function Pt(e){return He((function(t){e(t.target.result)}))}function Rt(e){return He((function(t){var n=t.target,r=n.error,a=n._hookCtx,i=a&&a.onerror;return i&&i(r),Dt(t),e(r),!1}))}function Dt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Nt(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):a(o)?Pe.all(o).then(n,r):n(o)}}return i(t)()}function Lt(e,t,n,r,a,i,o){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=a,this.compound=i,this.dotted=o;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(a?"++":"")+s}function xt(e,t,n,r){this.name=e,this.primKey=t||new Lt,this.indexes=n||[new Lt],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=S(n,(function(e){return[e.name,e]}))}function Ut(e){return 1===e.length?e[0]:e}function Ft(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}U(x,At),c(Ct,X),c(Ct,{delete:function(e){var t=new Ct(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new Ct(e).open().then((function(e){return e.close(),!0})).catch(Ct.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(e){var t=Ft(Ct.dependencies.indexedDB);return t?new Pe((function(e,n){var r=t();r.onsuccess=function(t){e(m(t.target.result,0))},r.onerror=kt(n)})).then(e):ht.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&o(this,e)}},applyStructure:Mt,ignoreTransaction:function(e){return Oe.trans?st(Oe.transless,e):e()},vip:function(e){return Ze((function(){return Oe.letThrough=!0,e()}))},async:function(e){return function(){try{var t=Nt(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Pe.resolve(t)}catch(e){return ft(e)}}},spawn:function(e,t,n){try{var r=Nt(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Pe.resolve(r)}catch(e){return ft(e)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(e,t){var n=Pe.resolve("function"==typeof e?Ct.ignoreTransaction(e):e).timeout(t||6e4);return Oe.trans?Oe.trans.waitFor(n):n},Promise:Pe,debug:{get:function(){return x},set:function(e){U(e,"dexie"===e?function(){return!0}:At)}},derive:p,extend:o,props:c,override:g,Events:pt,getByKeyPath:w,setByKeyPath:A,delByKeyPath:function(e,t){"string"==typeof t?A(e,t,void 0):"length"in t&&[].map.call(t,(function(t){A(e,t,void 0)}))},shallowClone:C,deepClone:k,getObjectDiff:P,asap:E,maxKey:mt,minKey:gt,addons:[],connections:St,MultiModifyError:J.Modify,errnames:z,IndexSpec:Lt,TableSchema:xt,dependencies:function(){try{return{indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:_t,version:_t.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:Ct,Dexie:Ct}),Pe.rejectionMapper=function(e,t){if(!e||e instanceof V||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Q[e.name])return e;var n=new Q[e.name](t||e.message,e);return"stack"in e&&f(n,"stack",{get:function(){return this.inner.stack}}),n},(ht=new Ct("__dbnames")).version(1).stores({dbnames:"name"}),function(){var e="Dexie.DatabaseNames";try{void 0!==typeof localStorage&&void 0!==i.document&&(JSON.parse(localStorage.getItem(e)||"[]").forEach((function(e){return ht.dbnames.put({name:e}).catch(Z)})),localStorage.removeItem(e))}catch(e){}}();const Gt=Ct},38469:(e,t,n)=>{var r,a=n(14277);try{r=n(71011)}catch(e){}function i(){this.rows=[],this.row={__printers:{}}}function o(e){return void 0===e?"":""+e}function s(e){var t=e.replace(a(),"");return null==r?t.length:r(t)}function u(e){return function(t,n){var r=o(t),a=s(r);return(n>a?Array(n-a+1).join(e):"")+r}}e.exports=i,i.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this},i.prototype.cell=function(e,t,n){return this.row[e]=t,this.row.__printers[e]=n||o,this},i.prototype.separator="  ",i.string=o,i.leftPadder=u;var l=i.padLeft=u(" ");function c(e){return function(t,n){var r=o(t),a=s(r);return r+(n>a?Array(n-a+1).join(e):"")}}i.rightPadder=c;var d=c(" ");function f(e,t){for(var n in e)"__printers"!=n&&t(n,e[n])}function p(e,t){return e===t?0:void 0===e?1:void 0===t?-1:null===e?1:null===t?-1:e>t?1:e<t?-1:p(String(e),String(t))}i.number=function(e){return function(t,n){if(null==t)return"";if("number"!=typeof t)throw new Error(t+" is not a number");var r=null==e?t+"":t.toFixed(e);return l(r,n)}},i.prototype.columns=function(){for(var e={},t=0;t<2;t++)this.rows.forEach((function(t){var n=0;f(t,(function(t){n=Math.max(n,e[t]||0),e[t]=n,n++}))}));return Object.keys(e).sort((function(t,n){return e[t]-e[n]}))},i.prototype.print=function(){var e=this.columns(),t=this.separator,n={},r="";return this.rows.forEach((function(e){f(e,(function(t,r){var a=e.__printers[t].call(e,r);n[t]=Math.max(s(a),n[t]||0)}))})),this.rows.forEach((function(a){var i="";e.forEach((function(e){var r=n[e],o=a.hasOwnProperty(e)?""+a.__printers[e].call(a,a[e],r):"";i+=d(o,r)+t})),i=i.slice(0,-t.length),r+=i+"\n"})),r},i.prototype.toString=function(){var e=this.columns(),t=new i;return t.separator=this.separator,e.forEach((function(e){t.cell(e,e)})),t.newRow(),t.pushDelimeter(e),t.rows=t.rows.concat(this.rows),this.totals&&this.rows.length&&(t.pushDelimeter(e),this.forEachTotal(t.cell.bind(t)),t.newRow()),t.print()},i.prototype.pushDelimeter=function(e){return(e=e||this.columns()).forEach((function(e){this.cell(e,void 0,u("-"))}),this),this.newRow()},i.prototype.forEachTotal=function(e){for(var t in this.totals){var n=this.totals[t],r=n.init,a=this.rows.length;this.rows.forEach((function(e,i){r=n.reduce.call(e,r,e[t],i,a)})),e(t,r,n.printer)}},i.prototype.printTransposed=function(e){e=e||{};var t=new i;return t.separator=e.separator||this.separator,this.columns().forEach((function(n){t.cell(0,n,e.namePrinter),this.rows.forEach((function(e,r){t.cell(r+1,e[n],e.__printers[n])})),t.newRow()}),this),t.print()},i.prototype.sort=function(e){if("function"==typeof e)return this.rows.sort(e),this;var t=(Array.isArray(e)?e:this.columns()).map((function(e){var t="asc",n=/(.*)\|\s*(asc|des)\s*$/.exec(e);return n&&(e=n[1],t=n[2]),function(n,r){return"asc"==t?p(n[e],r[e]):p(r[e],n[e])}}));return this.sort((function(e,n){for(var r=0;r<t.length;r++){var a=t[r](e,n);if(0!=a)return a}return 0}))},i.prototype.total=function(e,t){return t=t||{},this.totals=this.totals||{},this.totals[e]={reduce:t.reduce||i.aggr.sum,printer:t.printer||l,init:null==t.init?0:t.init},this},i.aggr={},i.aggr.printer=function(e,t){return t=t||o,function(n,r){return l(e+t(n),r)}},i.aggr.sum=function(e,t){return e+t},i.aggr.avg=function(e,t,n,r){return e+=t,n+1==r?e/r:e},i.print=function(e,t,n){var r=t||{};t="function"==typeof t?t:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var a=r[n]||{};t(a.name||n,e[n],a.printer)}};var a=new i,o=a.cell.bind(a);return Array.isArray(e)?(n=n||function(e){return e.toString()},e.forEach((function(e){t(e,o),a.newRow()}))):(n=n||function(e){return e.printTransposed({separator:" : "})},t(e,o),a.newRow()),n(a)},i.log=function(e,t,n){console.log(i.print(e,t,n))},i.prototype.log=function(){console.log(this.toString())}},26642:(e,t,n)=>{var r=n(56321).ExifReader;e.exports=function(e){var t=new r;t.load(e);var n,a=t.getAllTags(),i={};for(var o in a)i[(n=o,n.replace(/([A-Z][a-z])|([a-z][A-Z])|([A-Z])/g,(function(e){return 1==e.length?e.toLowerCase():e[0]==e[0].toUpperCase()?" "+e.toLowerCase():e[0]+" "+e[1].toLowerCase()})).replace(/^\s+|\s+$/g,""))]=a[o].description;return i}},56321:function(e,t){(function(){(null!==t?t:this).ExifReader=function(){function e(){var e=this;this._getTagValueAt={1:function(t){return e._getByteAt(t)},2:function(t){return e._getAsciiAt(t)},3:function(t){return e._getShortAt(t)},4:function(t){return e._getLongAt(t)},5:function(t){return e._getRationalAt(t)},7:function(t){return e._getUndefinedAt(t)},9:function(t){return e._getSlongAt(t)},10:function(t){return e._getSrationalAt(t)}},this._tiffHeaderOffset=0}return e.prototype._MIN_DATA_BUFFER_LENGTH=2,e.prototype._JPEG_ID_SIZE=2,e.prototype._JPEG_ID=65496,e.prototype._APP_MARKER_SIZE=2,e.prototype._APP0_MARKER=65504,e.prototype._APP1_MARKER=65505,e.prototype._APP15_MARKER=65519,e.prototype._APP_ID_OFFSET=4,e.prototype._BYTES_Exif=1165519206,e.prototype._TIFF_HEADER_OFFSET=10,e.prototype._BYTE_ORDER_BIG_ENDIAN=18761,e.prototype._BYTE_ORDER_LITTLE_ENDIAN=19789,e.prototype.load=function(e){return this.loadView(new DataView(e))},e.prototype.loadView=function(e){return this._dataView=e,this._tags={},this._checkImageHeader(),this._readTags()},e.prototype._checkImageHeader=function(){var e;if((e=this._dataView).byteLength<this._MIN_DATA_BUFFER_LENGTH||e.getUint16(0,!1)!==this._JPEG_ID)throw new Error("Invalid image format");if(this._parseAppMarkers(e),!this._hasExifData())throw new Error("No Exif data")},e.prototype._parseAppMarkers=function(e){var t,n,r;for(t=this._JPEG_ID_SIZE,r=[];!(e.byteLength<t+this._APP_ID_OFFSET+5);){if(this._isApp1ExifMarker(e,t))n=e.getUint16(t+this._APP_MARKER_SIZE,!1),this._tiffHeaderOffset=t+this._TIFF_HEADER_OFFSET;else{if(!this._isAppMarker(e,t))break;n=e.getUint16(t+this._APP_MARKER_SIZE,!1)}r.push(t+=this._APP_MARKER_SIZE+n)}return r},e.prototype._isApp1ExifMarker=function(e,t){return e.getUint16(t,!1)===this._APP1_MARKER&&e.getUint32(t+this._APP_ID_OFFSET,!1)===this._BYTES_Exif&&0===e.getUint8(t+this._APP_ID_OFFSET+4,!1)},e.prototype._isAppMarker=function(e,t){var n;return(n=e.getUint16(t,!1))>=this._APP0_MARKER&&n<=this._APP15_MARKER},e.prototype._hasExifData=function(){return 0!==this._tiffHeaderOffset},e.prototype._readTags=function(){return this._setByteOrder(),this._read0thIfd(),this._readExifIfd(),this._readGpsIfd(),this._readInteroperabilityIfd()},e.prototype._setByteOrder=function(){if(this._dataView.getUint16(this._tiffHeaderOffset)===this._BYTE_ORDER_BIG_ENDIAN)return this._littleEndian=!0;if(this._dataView.getUint16(this._tiffHeaderOffset)===this._BYTE_ORDER_LITTLE_ENDIAN)return this._littleEndian=!1;throw new Error("Illegal byte order value. Faulty image.")},e.prototype._read0thIfd=function(){var e;return e=this._getIfdOffset(),this._readIfd("0th",e)},e.prototype._getIfdOffset=function(){return this._tiffHeaderOffset+this._getLongAt(this._tiffHeaderOffset+4)},e.prototype._readExifIfd=function(){var e;if(null!=this._tags["Exif IFD Pointer"])return e=this._tiffHeaderOffset+this._tags["Exif IFD Pointer"].value,this._readIfd("exif",e)},e.prototype._readGpsIfd=function(){var e;if(null!=this._tags["GPS Info IFD Pointer"])return e=this._tiffHeaderOffset+this._tags["GPS Info IFD Pointer"].value,this._readIfd("gps",e)},e.prototype._readInteroperabilityIfd=function(){var e;if(null!=this._tags["Interoperability IFD Pointer"])return e=this._tiffHeaderOffset+this._tags["Interoperability IFD Pointer"].value,this._readIfd("interoperability",e)},e.prototype._readIfd=function(e,t){var n,r,a,i;for(n=this._getShortAt(t),t+=2,i=[],a=0;0<=n?a<n:a>n;0<=n?++a:--a)r=this._readTag(e,t),this._tags[r.name]={value:r.value,description:r.description},i.push(t+=12);return i},e.prototype._readTag=function(e,t){var n,r,a,i,o,s,u;return n=this._getShortAt(t),o=this._getShortAt(t+2),r=this._getLongAt(t+4),this._typeSizes[o]*r<=4?s=this._getTagValue(t+8,o,r):(u=this._getLongAt(t+8),s=this._getTagValue(this._tiffHeaderOffset+u,o,r)),o===this._tagTypes.ASCII&&(s=this._splitNullSeparatedAsciiString(s)),null!=this._tagNames[e][n]?(null!=this._tagNames[e][n].name&&null!=this._tagNames[e][n].description?(i=this._tagNames[e][n].name,a=this._tagNames[e][n].description(s)):(i=this._tagNames[e][n],a=s instanceof Array?s.join(", "):s),{name:i,value:s,description:a}):{name:"undefined-"+n,value:s,description:s}},e.prototype._getTagValue=function(e,t,n){var r,a;return 1===(a=function(){var a,i;for(i=[],a=0;0<=n?a<n:a>n;0<=n?++a:--a)r=this._getTagValueAt[t](e),e+=this._typeSizes[t],i.push(r);return i}.call(this)).length?a=a[0]:t===this._tagTypes.ASCII&&(a=this._getAsciiValue(a)),a},e.prototype._getAsciiValue=function(e){var t;return function(){var n,r,a;for(a=[],n=0,r=e.length;n<r;n++)t=e[n],a.push(String.fromCharCode(t));return a}()},e.prototype._getByteAt=function(e){return this._dataView.getUint8(e)},e.prototype._getAsciiAt=function(e){return this._dataView.getUint8(e)},e.prototype._getShortAt=function(e){return this._dataView.getUint16(e,this._littleEndian)},e.prototype._getLongAt=function(e){return this._dataView.getUint32(e,this._littleEndian)},e.prototype._getRationalAt=function(e){return this._getLongAt(e)/this._getLongAt(e+4)},e.prototype._getUndefinedAt=function(e){return this._getByteAt(e)},e.prototype._getSlongAt=function(e){return this._dataView.getInt32(e,this._littleEndian)},e.prototype._getSrationalAt=function(e){return this._getSlongAt(e)/this._getSlongAt(e+4)},e.prototype._splitNullSeparatedAsciiString=function(e){var t,n,r,a,i;for(r=[],n=0,a=0,i=e.length;a<i;a++)"\0"!==(t=e[a])?(null==r[n]&&(r[n]=""),r[n]+=t):n++;return r},e.prototype._typeSizes={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8},e.prototype._tagTypes={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10},e.prototype._tagNames={"0th":{256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:function(e){switch(e){case 1:return"top-left";case 2:return"top-right";case 3:return"bottom-right";case 4:return"bottom-left";case 5:return"left-top";case 6:return"right-top";case 7:return"right-bottom";case 8:return"left-bottom";default:return"Undefined"}}},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:{name:"ResolutionUnit",description:function(e){switch(e){case 2:return"inches";case 3:return"centimeters";default:return"Unknown"}}},301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",318:"WhitePoint",319:"PrimaryChromaticities",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:function(e){switch(e){case 1:return"centered";case 2:return"co-sited";default:return"undefied "+e}}},532:"ReferenceBlackWhite",33432:{name:"Copyright",description:function(e){return e.join("; ")}},34665:"Exif IFD Pointer",34853:"GPS Info IFD Pointer"},exif:{33434:"ExposureTime",33437:"FNumber",34850:{name:"ExposureProgram",description:function(e){switch(e){case 0:return"Undefined";case 1:return"Manual";case 2:return"Normal program";case 3:return"Aperture priority";case 4:return"Shutter priority";case 5:return"Creative program";case 6:return"Action program";case 7:return"Portrait mode";case 8:return"Landscape mode";default:return"Unknown"}}},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:function(e){return"[Raw OECF table data]"}},36864:{name:"ExifVersion",description:function(e){var t,n,r,a;for(n="",r=0,a=e.length;r<a;r++)t=e[r],n+=String.fromCharCode(t);return n}},36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:{name:"ComponentsConfiguration",description:function(e){var t,n,r;for(t="",n=0,r=e.length;n<r;n++)switch(e[n]){case 49:t+="Y";break;case 50:t+="Cb";break;case 51:t+="Cr";break;case 52:t+="R";break;case 53:t+="G";break;case 54:t+="B"}return t}},37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:{name:"MeteringMode",description:function(e){switch(e){case 1:return"Average";case 2:return"CenterWeightedAverage";case 3:return"Spot";case 4:return"MultiSpot";case 5:return"Pattern";case 6:return"Partial";case 255:return"Other";default:return"Unknown"}}},37384:{name:"LightSource",description:function(e){switch(e){case 1:return"Daylight";case 2:return"Fluorescent";case 3:return"Tungsten (incandescent light)";case 4:return"Flash";case 9:return"Fine weather";case 10:return"Cloudy weather";case 11:return"Shade";case 12:return"Daylight fluorescent (D 5700 – 7100K)";case 13:return"Day white fluorescent (N 4600 – 5400K)";case 14:return"Cool white fluorescent (W 3900 – 4500K)";case 15:return"White fluorescent (WW 3200 – 3700K)";case 17:return"Standard light A";case 18:return"Standard light B";case 19:return"Standard light C";case 20:return"D55";case 21:return"D65";case 22:return"D75";case 23:return"D50";case 24:return"ISO studio tungsten";case 255:return"Other light source";default:return"Unknown"}}},37385:{name:"Flash",description:function(e){switch(e){case 0:return"Flash did not fire";case 1:return"Flash fired";case 5:return"Strobe return light not detected";case 7:return"Strobe return light detected";case 9:return"Flash fired, compulsory flash mode";case 13:return"Flash fired, compulsory flash mode, return light not detected";case 15:return"Flash fired, compulsory flash mode, return light detected";case 16:return"Flash did not fire, compulsory flash mode";case 24:return"Flash did not fire, auto mode";case 25:return"Flash fired, auto mode";case 29:return"Flash fired, auto mode, return light not detected";case 31:return"Flash fired, auto mode, return light detected";case 32:return"No flash function";case 65:return"Flash fired, red-eye reduction mode";case 69:return"Flash fired, red-eye reduction mode, return light not detected";case 71:return"Flash fired, red-eye reduction mode, return light detected";case 73:return"Flash fired, compulsory flash mode, red-eye reduction mode";case 77:return"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected";case 79:return"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected";case 89:return"Flash fired, auto mode, red-eye reduction mode";case 93:return"Flash fired, auto mode, return light not detected, red-eye reduction mode";case 95:return"Flash fired, auto mode, return light detected, red-eye reduction mode";default:return"Unknown"}}},37386:"FocalLength",37396:{name:"SubjectArea",description:function(e){switch(e.length){case 2:return"Location; X: "+e[0]+", Y: "+e[1];case 3:return"Circle; X: "+e[0]+", Y: "+e[1]+", diameter: "+e[2];case 4:return"Rectangle; X: "+e[0]+", Y: "+e[1]+", width: "+e[2]+", height: "+e[3];default:return"Unknown"}}},37500:{name:"MakerNote",description:function(e){return"[Raw maker note data]"}},37510:{name:"UserComment",description:function(e){switch(e.slice(0,8).map((function(e){return String.fromCharCode(e)})).join("")){case"ASCII\0\0\0":return e.slice(8,e.length).map((function(e){return String.fromCharCode(e)})).join("");case"JIS\0\0\0\0\0":return"[JIS encoded text]";case"UNICODE\0":return"[Unicode encoded text]";case"\0\0\0\0\0\0\0\0":return"[Undefined encoding]"}}},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",40960:{name:"FlashpixVersion",description:function(e){var t,n,r,a;for(n="",r=0,a=e.length;r<a;r++)t=e[r],n+=String.fromCharCode(t);return n}},40961:{name:"ColorSpace",description:function(e){switch(e){case 1:return"sRGB";case 65535:return"Uncalibrated";default:return"Unknown"}}},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:function(e){return"[Raw SFR table data]"}},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:function(e){switch(e){case 2:return"inches";case 3:return"centimeters";default:return"Unknown"}}},41492:{name:"SubjectLocation",description:function(e){return"X: "+e[0]+", Y: "+e[1]}},41493:"ExposureIndex",41495:{name:"SensingMethod",description:function(e){switch(e){case 1:return"Undefined";case 2:return"One-chip color area sensor";case 3:return"Two-chip color area sensor";case 4:return"Three-chip color area sensor";case 5:return"Color sequential area sensor";case 7:return"Trilinear sensor";case 8:return"Color sequential linear sensor";default:return"Unknown"}}},41728:{name:"FileSource",description:function(e){switch(e){case 3:return"DSC";default:return"Unknown"}}},41729:{name:"SceneType",description:function(e){switch(e){case 1:return"A directly photographed image";default:return"Unknown"}}},41730:{name:"CFAPattern",description:function(e){return"[Raw CFA pattern table data]"}},41985:{name:"CustomRendered",description:function(e){switch(e){case 0:return"Normal process";case 1:return"Custom process";default:return"Unknown"}}},41986:{name:"ExposureMode",description:function(e){switch(e){case 0:return"Auto exposure";case 1:return"Manual exposure";case 2:return"Auto bracket";default:return"Unknown"}}},41987:{name:"WhiteBalance",description:function(e){switch(e){case 0:return"Auto white balance";case 1:return"Manual white balance";default:return"Unknown"}}},41988:{name:"DigitalZoomRatio",description:function(e){switch(e){case 0:return"Digital zoom was not used";default:return e}}},41989:{name:"FocalLengthIn35mmFilm",description:function(e){switch(e){case 0:return"Unknown";default:return e}}},41990:{name:"SceneCaptureType",description:function(e){switch(e){case 0:return"Standard";case 1:return"Landscape";case 2:return"Portrait";case 3:return"Night scene";default:return"Unknown"}}},41991:{name:"GainControl",description:function(e){switch(e){case 0:return"None";case 1:return"Low gain up";case 2:return"High gain up";case 3:return"Low gain down";case 4:return"High gain down";default:return"Unknown"}}},41992:{name:"Contrast",description:function(e){switch(e){case 0:return"Normal";case 1:return"Soft";case 2:return"Hard";default:return"Unknown"}}},41993:{name:"Saturation",description:function(e){switch(e){case 0:return"Normal";case 1:return"Low saturation";case 2:return"High saturation";default:return"Unknown"}}},41994:{name:"Sharpness",description:function(e){switch(e){case 0:return"Normal";case 1:return"Soft";case 2:return"Hard";default:return"Unknown"}}},41995:{name:"DeviceSettingDescription",description:function(e){return"[Raw device settings table data]"}},41996:{name:"SubjectDistanceRange",description:function(e){switch(e){case 1:return"Macro";case 2:return"Close view";case 3:return"Distant view";default:return"Unknown"}}},42016:"ImageUniqueID"},gps:{0:{name:"GPSVersionID",description:function(e){var t,n;return e[0]===(t=e[1])&&2===t&&e[2]===(n=e[3])&&0===n?"Version 2.2":"Unknown"}},1:{name:"GPSLatitudeRef",description:function(e){switch(e.join("")){case"N":return"North latitude";case"S":return"South latitude";default:return"Unknown"}}},2:{name:"GPSLatitude",description:function(e){return e[0]+e[1]/60+e[2]/3600}},3:{name:"GPSLongitudeRef",description:function(e){switch(e.join("")){case"E":return"East longitude";case"W":return"West longitude";default:return"Unknown"}}},4:{name:"GPSLongitude",description:function(e){return e[0]+e[1]/60+e[2]/3600}},5:{name:"GPSAltitudeRef",description:function(e){switch(e){case 0:return"Sea level";case 1:return"Sea level reference (negative value)";default:return"Unknown"}}},6:{name:"GPSAltitude",description:function(e){return e+" m"}},7:{name:"GPSTimeStamp",description:function(e){var t;return t=function(e){return function(){var t,n,r;for(r=[],t=0,n=2-(""+Math.floor(e)).length;0<=n?t<n:t>n;0<=n?++t:--t)r.push("0");return r}()+e},e.map(t).join(":")}},8:"GPSSatellites",9:{name:"GPSStatus",description:function(e){switch(e.join("")){case"A":return"Measurement in progress";case"V":return"Measurement Interoperability";default:return"Unknown"}}},10:{name:"GPSMeasureMode",description:function(e){switch(e.join("")){case"2":return"2-dimensional measurement";case"3":return"3-dimensional measurement";default:return"Unknown"}}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:function(e){switch(e.join("")){case"K":return"Kilometers per hour";case"M":return"Miles per hour";case"N":return"Knots";default:return"Unknown"}}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:function(e){switch(e.join("")){case"T":return"True direction";case"M":return"Magnetic direction";default:return"Unknown"}}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:function(e){switch(e.join("")){case"T":return"True direction";case"M":return"Magnetic direction";default:return"Unknown"}}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:function(e){switch(e.join("")){case"N":return"North latitude";case"S":return"South latitude";default:return"Unknown"}}},20:{name:"GPSDestLatitude",description:function(e){return e[0]+e[1]/60+e[2]/3600}},21:{name:"GPSDestLongitudeRef",description:function(e){switch(e.join("")){case"E":return"East longitude";case"W":return"West longitude";default:return"Unknown"}}},22:{name:"GPSDestLongitude",description:function(e){return e[0]+e[1]/60+e[2]/3600}},23:{name:"GPSDestBearingRef",description:function(e){switch(e.join("")){case"T":return"True direction";case"M":return"Magnetic direction";default:return"Unknown"}}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:function(e){switch(e.join("")){case"K":return"Kilometers";case"M":return"Miles";case"N":return"Knots";default:return"Unknown"}}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:function(e){switch(e.slice(0,8).map((function(e){return String.fromCharCode(e)})).join("")){case"ASCII\0\0\0":return e.slice(8,e.length).map((function(e){return String.fromCharCode(e)})).join("");case"JIS\0\0\0\0\0":return"[JIS encoded text]";case"UNICODE\0":return"[Unicode encoded text]";case"\0\0\0\0\0\0\0\0":return"[Undefined encoding]"}}},28:{name:"GPSAreaInformation",description:function(e){switch(e.slice(0,8).map((function(e){return String.fromCharCode(e)})).join("")){case"ASCII\0\0\0":return e.slice(8,e.length).map((function(e){return String.fromCharCode(e)})).join("");case"JIS\0\0\0\0\0":return"[JIS encoded text]";case"UNICODE\0":return"[Unicode encoded text]";case"\0\0\0\0\0\0\0\0":return"[Undefined encoding]"}}},29:"GPSDateStamp",30:{name:"GPSDifferential",description:function(e){switch(e){case 0:return"Measurement without differential correction";case 1:return"Differential correction applied";default:return"Unknown"}}}},interoperability:{1:"InteroperabilityIndex",2:"UnknownInteroperabilityTag0x0002",4097:"UnknownInteroperabilityTag0x1001",4098:"UnknownInteroperabilityTag0x1002"}},e.prototype.getTagValue=function(e){return null!=this._tags[e]?this._tags[e].value:void 0},e.prototype.getTagDescription=function(e){return null!=this._tags[e]?this._tags[e].description:void 0},e.prototype.getAllTags=function(){return this._tags},e}()}).call(this)},97769:e=>{"use strict";e.exports=function(e){return e&&e.length>1?255===e[0]&&216===e[1]&&255===e[2]?{ext:"jpg",mime:"image/jpeg"}:137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?{ext:"png",mime:"image/png"}:71===e[0]&&73===e[1]&&70===e[2]?{ext:"gif",mime:"image/gif"}:87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]?{ext:"webp",mime:"image/webp"}:(73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3])&&67===e[8]&&82===e[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]?{ext:"tif",mime:"image/tiff"}:66===e[0]&&77===e[1]?{ext:"bmp",mime:"image/bmp"}:73===e[0]&&73===e[1]&&188===e[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===e[0]&&66===e[1]&&80===e[2]&&83===e[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&109===e[30]&&105===e[31]&&109===e[32]&&101===e[33]&&116===e[34]&&121===e[35]&&112===e[36]&&101===e[37]&&97===e[38]&&112===e[39]&&112===e[40]&&108===e[41]&&105===e[42]&&99===e[43]&&97===e[44]&&116===e[45]&&105===e[46]&&111===e[47]&&110===e[48]&&47===e[49]&&101===e[50]&&112===e[51]&&117===e[52]&&98===e[53]&&43===e[54]&&122===e[55]&&105===e[56]&&112===e[57]?{ext:"epub",mime:"application/epub+zip"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&77===e[30]&&69===e[31]&&84===e[32]&&65===e[33]&&45===e[34]&&73===e[35]&&78===e[36]&&70===e[37]&&47===e[38]&&109===e[39]&&111===e[40]&&122===e[41]&&105===e[42]&&108===e[43]&&108===e[44]&&97===e[45]&&46===e[46]&&114===e[47]&&115===e[48]&&97===e[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80!==e[0]||75!==e[1]||3!==e[2]&&5!==e[2]&&7!==e[2]||4!==e[3]&&6!==e[3]&&8!==e[3]?117===e[257]&&115===e[258]&&116===e[259]&&97===e[260]&&114===e[261]?{ext:"tar",mime:"application/x-tar"}:82!==e[0]||97!==e[1]||114!==e[2]||33!==e[3]||26!==e[4]||7!==e[5]||0!==e[6]&&1!==e[6]?31===e[0]&&139===e[1]&&8===e[2]?{ext:"gz",mime:"application/gzip"}:66===e[0]&&90===e[1]&&104===e[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===e[0]&&122===e[1]&&188===e[2]&&175===e[3]&&39===e[4]&&28===e[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===e[0]&&1===e[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===e[0]&&0===e[1]&&0===e[2]&&(24===e[3]||32===e[3])&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||51===e[0]&&103===e[1]&&112===e[2]&&53===e[3]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&109===e[16]&&112===e[17]&&52===e[18]&&49===e[19]&&109===e[20]&&112===e[21]&&52===e[22]&&50===e[23]&&105===e[24]&&115===e[25]&&111===e[26]&&109===e[27]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&105===e[8]&&115===e[9]&&111===e[10]&&109===e[11]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&0===e[15]?{ext:"mp4",mime:"video/mp4"}:0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&86===e[10]?{ext:"m4v",mime:"video/x-m4v"}:77===e[0]&&84===e[1]&&104===e[2]&&100===e[3]?{ext:"mid",mime:"audio/midi"}:109===e[31]&&97===e[32]&&116===e[33]&&114===e[34]&&111===e[35]&&115===e[36]&&107===e[37]&&97===e[38]?{ext:"mkv",mime:"video/x-matroska"}:26===e[0]&&69===e[1]&&223===e[2]&&163===e[3]?{ext:"webm",mime:"video/webm"}:0===e[0]&&0===e[1]&&0===e[2]&&20===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]?{ext:"mov",mime:"video/quicktime"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&65===e[8]&&86===e[9]&&73===e[10]?{ext:"avi",mime:"video/x-msvideo"}:48===e[0]&&38===e[1]&&178===e[2]&&117===e[3]&&142===e[4]&&102===e[5]&&207===e[6]&&17===e[7]&&166===e[8]&&217===e[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===e[0]&&0===e[1]&&1===e[2]&&"b"===e[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&251===e[1]?{ext:"mp3",mime:"audio/mpeg"}:102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&65===e[10]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3]?{ext:"m4a",mime:"audio/m4a"}:79===e[28]&&112===e[29]&&117===e[30]&&115===e[31]&&72===e[32]&&101===e[33]&&97===e[34]&&100===e[35]?{ext:"opus",mime:"audio/opus"}:79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]?{ext:"ogg",mime:"audio/ogg"}:102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]?{ext:"flac",mime:"audio/x-flac"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]?{ext:"wav",mime:"audio/x-wav"}:35===e[0]&&33===e[1]&&65===e[2]&&77===e[3]&&82===e[4]&&10===e[5]?{ext:"amr",mime:"audio/amr"}:37===e[0]&&80===e[1]&&68===e[2]&&70===e[3]?{ext:"pdf",mime:"application/pdf"}:77===e[0]&&90===e[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||87!==e[1]||83!==e[2]?123===e[0]&&92===e[1]&&114===e[2]&&116===e[3]&&102===e[4]?{ext:"rtf",mime:"application/rtf"}:119===e[0]&&79===e[1]&&70===e[2]&&70===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff",mime:"application/font-woff"}:119===e[0]&&79===e[1]&&70===e[2]&&50===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff2",mime:"application/font-woff"}:76===e[34]&&80===e[35]&&(0===e[8]&&0===e[9]&&1===e[10]||1===e[8]&&0===e[9]&&2===e[10]||2===e[8]&&0===e[9]&&2===e[10])?{ext:"eot",mime:"application/octet-stream"}:0===e[0]&&1===e[1]&&0===e[2]&&0===e[3]&&0===e[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===e[0]&&84===e[1]&&84===e[2]&&79===e[3]&&0===e[4]?{ext:"otf",mime:"application/font-sfnt"}:0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?{ext:"ico",mime:"image/x-icon"}:70===e[0]&&76===e[1]&&86===e[2]&&1===e[3]?{ext:"flv",mime:"video/x-flv"}:37===e[0]&&33===e[1]?{ext:"ps",mime:"application/postscript"}:253===e[0]&&55===e[1]&&122===e[2]&&88===e[3]&&90===e[4]&&0===e[5]?{ext:"xz",mime:"application/x-xz"}:83===e[0]&&81===e[1]&&76===e[2]&&105===e[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===e[0]&&69===e[1]&&83===e[2]&&26===e[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===e[0]&&114===e[1]&&50===e[2]&&52===e[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===e[0]&&83===e[1]&&67===e[2]&&70===e[3]||73===e[0]&&83===e[1]&&99===e[2]&&40===e[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]&&10===e[7]&&100===e[8]&&101===e[9]&&98===e[10]&&105===e[11]&&97===e[12]&&110===e[13]&&45===e[14]&&98===e[15]&&105===e[16]&&110===e[17]&&97===e[18]&&114===e[19]&&121===e[20]?{ext:"deb",mime:"application/x-deb"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===e[0]&&171===e[1]&&238===e[2]&&219===e[3]?{ext:"rpm",mime:"application/x-rpm"}:31===e[0]&&160===e[1]||31===e[0]&&157===e[1]?{ext:"Z",mime:"application/x-compress"}:76===e[0]&&90===e[1]&&73===e[2]&&80===e[3]?{ext:"lz",mime:"application/x-lzip"}:208===e[0]&&207===e[1]&&17===e[2]&&224===e[3]&&161===e[4]&&177===e[5]&&26===e[6]&&225===e[7]?{ext:"msi",mime:"application/x-msi"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}:{ext:"rar",mime:"application/x-rar-compressed"}:{ext:"zip",mime:"application/zip"}:null}},42317:function(e){
/**
 * filesize
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2014 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/filesize.js/master/LICENSE>
 * @link http://filesizejs.com
 * @module filesize
 * @version 2.0.4
 */
!function(t){"use strict";var n=/b$/,r=/.*\./,a=/^0$/;var i={bits:["B","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","kB","MB","GB","TB","PB","EB","ZB","YB"]};e.exports=function(e,t){var o,s,u,l,c,d,f,p,h,_,v,m,g="",y=0;if(isNaN(e))throw new Error("Invalid arguments");return u=!0===(t=t||{}).bits,p=!0===t.unix,s=void 0!==t.base?t.base:p?2:10,f=void 0!==t.round?t.round:p?1:2,h=void 0!==t.spacer?t.spacer:p?"":" ",m=void 0!==t.suffixes?t.suffixes:{},l=s>2?1e3:1024,(c=(d=Number(e))<0)&&(d=-d),0===d?g=p?"0":"0"+h+(m[_="B"]||_):((o=Math.floor(Math.log(d)/Math.log(1e3)))>8&&(y*=1e3*(o-8),o=8),y=2===s?d/Math.pow(2,10*o):d/Math.pow(1e3,o),u&&(y*=8)>l&&(y/=l,o++),g=y.toFixed(o>0?f:0),_=i[u?"bits":"bytes"][o],p?(u&&n.test(_)&&(_=_.toLowerCase()),_=_.charAt(0),v=g.replace(r,""),"B"===_?_="":u||"k"!==_||(_="K"),a.test(v)&&(g=parseInt(g,10).toString()),g+=h+(m[_]||_)):p||(g+=h+(m[_]||_))),c&&(g="-"+g),g}}()},41143:e=>{"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,o,s],c=0;(u=new Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},97331:(e,t,n)=>{var r=n(19810);function a(e){return e.replace(/[^A-Za-z0-9]/g,(function(e){return r[e]||e}))}a.isLatin=function(e){return e===a(e)},e.exports=a},19810:e=>{e.exports={Á:"A",Ă:"A",Ắ:"A",Ặ:"A",Ằ:"A",Ẳ:"A",Ẵ:"A",Ǎ:"A",Â:"A",Ấ:"A",Ậ:"A",Ầ:"A",Ẩ:"A",Ẫ:"A",Ä:"A",Ǟ:"A",Ȧ:"A",Ǡ:"A",Ạ:"A",Ȁ:"A",À:"A",Ả:"A",Ȃ:"A",Ā:"A",Ą:"A",Å:"A",Ǻ:"A",Ḁ:"A",Ⱥ:"A",Ã:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY",Ḃ:"B",Ḅ:"B",Ɓ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ć:"C",Č:"C",Ç:"C",Ḉ:"C",Ĉ:"C",Ċ:"C",Ƈ:"C",Ȼ:"C",Ď:"D",Ḑ:"D",Ḓ:"D",Ḋ:"D",Ḍ:"D",Ɗ:"D",Ḏ:"D",ǲ:"D",ǅ:"D",Đ:"D",Ƌ:"D",Ǳ:"DZ",Ǆ:"DZ",É:"E",Ĕ:"E",Ě:"E",Ȩ:"E",Ḝ:"E",Ê:"E",Ế:"E",Ệ:"E",Ề:"E",Ể:"E",Ễ:"E",Ḙ:"E",Ë:"E",Ė:"E",Ẹ:"E",Ȅ:"E",È:"E",Ẻ:"E",Ȇ:"E",Ē:"E",Ḗ:"E",Ḕ:"E",Ę:"E",Ɇ:"E",Ẽ:"E",Ḛ:"E",Ꝫ:"ET",Ḟ:"F",Ƒ:"F",Ǵ:"G",Ğ:"G",Ǧ:"G",Ģ:"G",Ĝ:"G",Ġ:"G",Ɠ:"G",Ḡ:"G",Ǥ:"G",Ḫ:"H",Ȟ:"H",Ḩ:"H",Ĥ:"H",Ⱨ:"H",Ḧ:"H",Ḣ:"H",Ḥ:"H",Ħ:"H",Í:"I",Ĭ:"I",Ǐ:"I",Î:"I",Ï:"I",Ḯ:"I",İ:"I",Ị:"I",Ȉ:"I",Ì:"I",Ỉ:"I",Ȋ:"I",Ī:"I",Į:"I",Ɨ:"I",Ĩ:"I",Ḭ:"I",Ꝺ:"D",Ꝼ:"F",Ᵹ:"G",Ꞃ:"R",Ꞅ:"S",Ꞇ:"T",Ꝭ:"IS",Ĵ:"J",Ɉ:"J",Ḱ:"K",Ǩ:"K",Ķ:"K",Ⱪ:"K",Ꝃ:"K",Ḳ:"K",Ƙ:"K",Ḵ:"K",Ꝁ:"K",Ꝅ:"K",Ĺ:"L",Ƚ:"L",Ľ:"L",Ļ:"L",Ḽ:"L",Ḷ:"L",Ḹ:"L",Ⱡ:"L",Ꝉ:"L",Ḻ:"L",Ŀ:"L",Ɫ:"L",ǈ:"L",Ł:"L",Ǉ:"LJ",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ń:"N",Ň:"N",Ņ:"N",Ṋ:"N",Ṅ:"N",Ṇ:"N",Ǹ:"N",Ɲ:"N",Ṉ:"N",Ƞ:"N",ǋ:"N",Ñ:"N",Ǌ:"NJ",Ó:"O",Ŏ:"O",Ǒ:"O",Ô:"O",Ố:"O",Ộ:"O",Ồ:"O",Ổ:"O",Ỗ:"O",Ö:"O",Ȫ:"O",Ȯ:"O",Ȱ:"O",Ọ:"O",Ő:"O",Ȍ:"O",Ò:"O",Ỏ:"O",Ơ:"O",Ớ:"O",Ợ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ȏ:"O",Ꝋ:"O",Ꝍ:"O",Ō:"O",Ṓ:"O",Ṑ:"O",Ɵ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Õ:"O",Ṍ:"O",Ṏ:"O",Ȭ:"O",Ƣ:"OI",Ꝏ:"OO",Ɛ:"E",Ɔ:"O",Ȣ:"OU",Ṕ:"P",Ṗ:"P",Ꝓ:"P",Ƥ:"P",Ꝕ:"P",Ᵽ:"P",Ꝑ:"P",Ꝙ:"Q",Ꝗ:"Q",Ŕ:"R",Ř:"R",Ŗ:"R",Ṙ:"R",Ṛ:"R",Ṝ:"R",Ȑ:"R",Ȓ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꜿ:"C",Ǝ:"E",Ś:"S",Ṥ:"S",Š:"S",Ṧ:"S",Ş:"S",Ŝ:"S",Ș:"S",Ṡ:"S",Ṣ:"S",Ṩ:"S",ẞ:"SS",Ť:"T",Ţ:"T",Ṱ:"T",Ț:"T",Ⱦ:"T",Ṫ:"T",Ṭ:"T",Ƭ:"T",Ṯ:"T",Ʈ:"T",Ŧ:"T",Ɐ:"A",Ꞁ:"L",Ɯ:"M",Ʌ:"V",Ꜩ:"TZ",Ú:"U",Ŭ:"U",Ǔ:"U",Û:"U",Ṷ:"U",Ü:"U",Ǘ:"U",Ǚ:"U",Ǜ:"U",Ǖ:"U",Ṳ:"U",Ụ:"U",Ű:"U",Ȕ:"U",Ù:"U",Ủ:"U",Ư:"U",Ứ:"U",Ự:"U",Ừ:"U",Ử:"U",Ữ:"U",Ȗ:"U",Ū:"U",Ṻ:"U",Ų:"U",Ů:"U",Ũ:"U",Ṹ:"U",Ṵ:"U",Ꝟ:"V",Ṿ:"V",Ʋ:"V",Ṽ:"V",Ꝡ:"VY",Ẃ:"W",Ŵ:"W",Ẅ:"W",Ẇ:"W",Ẉ:"W",Ẁ:"W",Ⱳ:"W",Ẍ:"X",Ẋ:"X",Ý:"Y",Ŷ:"Y",Ÿ:"Y",Ẏ:"Y",Ỵ:"Y",Ỳ:"Y",Ƴ:"Y",Ỷ:"Y",Ỿ:"Y",Ȳ:"Y",Ɏ:"Y",Ỹ:"Y",Ź:"Z",Ž:"Z",Ẑ:"Z",Ⱬ:"Z",Ż:"Z",Ẓ:"Z",Ȥ:"Z",Ẕ:"Z",Ƶ:"Z",Ĳ:"IJ",Œ:"OE",ᴀ:"A",ᴁ:"AE",ʙ:"B",ᴃ:"B",ᴄ:"C",ᴅ:"D",ᴇ:"E",ꜰ:"F",ɢ:"G",ʛ:"G",ʜ:"H",ɪ:"I",ʁ:"R",ᴊ:"J",ᴋ:"K",ʟ:"L",ᴌ:"L",ᴍ:"M",ɴ:"N",ᴏ:"O",ɶ:"OE",ᴐ:"O",ᴕ:"OU",ᴘ:"P",ʀ:"R",ᴎ:"N",ᴙ:"R",ꜱ:"S",ᴛ:"T",ⱻ:"E",ᴚ:"R",ᴜ:"U",ᴠ:"V",ᴡ:"W",ʏ:"Y",ᴢ:"Z",á:"a",ă:"a",ắ:"a",ặ:"a",ằ:"a",ẳ:"a",ẵ:"a",ǎ:"a",â:"a",ấ:"a",ậ:"a",ầ:"a",ẩ:"a",ẫ:"a",ä:"a",ǟ:"a",ȧ:"a",ǡ:"a",ạ:"a",ȁ:"a",à:"a",ả:"a",ȃ:"a",ā:"a",ą:"a",ᶏ:"a",ẚ:"a",å:"a",ǻ:"a",ḁ:"a",ⱥ:"a",ã:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay",ḃ:"b",ḅ:"b",ɓ:"b",ḇ:"b",ᵬ:"b",ᶀ:"b",ƀ:"b",ƃ:"b",ɵ:"o",ć:"c",č:"c",ç:"c",ḉ:"c",ĉ:"c",ɕ:"c",ċ:"c",ƈ:"c",ȼ:"c",ď:"d",ḑ:"d",ḓ:"d",ȡ:"d",ḋ:"d",ḍ:"d",ɗ:"d",ᶑ:"d",ḏ:"d",ᵭ:"d",ᶁ:"d",đ:"d",ɖ:"d",ƌ:"d",ı:"i",ȷ:"j",ɟ:"j",ʄ:"j",ǳ:"dz",ǆ:"dz",é:"e",ĕ:"e",ě:"e",ȩ:"e",ḝ:"e",ê:"e",ế:"e",ệ:"e",ề:"e",ể:"e",ễ:"e",ḙ:"e",ë:"e",ė:"e",ẹ:"e",ȅ:"e",è:"e",ẻ:"e",ȇ:"e",ē:"e",ḗ:"e",ḕ:"e",ⱸ:"e",ę:"e",ᶒ:"e",ɇ:"e",ẽ:"e",ḛ:"e",ꝫ:"et",ḟ:"f",ƒ:"f",ᵮ:"f",ᶂ:"f",ǵ:"g",ğ:"g",ǧ:"g",ģ:"g",ĝ:"g",ġ:"g",ɠ:"g",ḡ:"g",ᶃ:"g",ǥ:"g",ḫ:"h",ȟ:"h",ḩ:"h",ĥ:"h",ⱨ:"h",ḧ:"h",ḣ:"h",ḥ:"h",ɦ:"h",ẖ:"h",ħ:"h",ƕ:"hv",í:"i",ĭ:"i",ǐ:"i",î:"i",ï:"i",ḯ:"i",ị:"i",ȉ:"i",ì:"i",ỉ:"i",ȋ:"i",ī:"i",į:"i",ᶖ:"i",ɨ:"i",ĩ:"i",ḭ:"i",ꝺ:"d",ꝼ:"f",ᵹ:"g",ꞃ:"r",ꞅ:"s",ꞇ:"t",ꝭ:"is",ǰ:"j",ĵ:"j",ʝ:"j",ɉ:"j",ḱ:"k",ǩ:"k",ķ:"k",ⱪ:"k",ꝃ:"k",ḳ:"k",ƙ:"k",ḵ:"k",ᶄ:"k",ꝁ:"k",ꝅ:"k",ĺ:"l",ƚ:"l",ɬ:"l",ľ:"l",ļ:"l",ḽ:"l",ȴ:"l",ḷ:"l",ḹ:"l",ⱡ:"l",ꝉ:"l",ḻ:"l",ŀ:"l",ɫ:"l",ᶅ:"l",ɭ:"l",ł:"l",ǉ:"lj",ſ:"s",ẜ:"s",ẛ:"s",ẝ:"s",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ᵯ:"m",ᶆ:"m",ń:"n",ň:"n",ņ:"n",ṋ:"n",ȵ:"n",ṅ:"n",ṇ:"n",ǹ:"n",ɲ:"n",ṉ:"n",ƞ:"n",ᵰ:"n",ᶇ:"n",ɳ:"n",ñ:"n",ǌ:"nj",ó:"o",ŏ:"o",ǒ:"o",ô:"o",ố:"o",ộ:"o",ồ:"o",ổ:"o",ỗ:"o",ö:"o",ȫ:"o",ȯ:"o",ȱ:"o",ọ:"o",ő:"o",ȍ:"o",ò:"o",ỏ:"o",ơ:"o",ớ:"o",ợ:"o",ờ:"o",ở:"o",ỡ:"o",ȏ:"o",ꝋ:"o",ꝍ:"o",ⱺ:"o",ō:"o",ṓ:"o",ṑ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",õ:"o",ṍ:"o",ṏ:"o",ȭ:"o",ƣ:"oi",ꝏ:"oo",ɛ:"e",ᶓ:"e",ɔ:"o",ᶗ:"o",ȣ:"ou",ṕ:"p",ṗ:"p",ꝓ:"p",ƥ:"p",ᵱ:"p",ᶈ:"p",ꝕ:"p",ᵽ:"p",ꝑ:"p",ꝙ:"q",ʠ:"q",ɋ:"q",ꝗ:"q",ŕ:"r",ř:"r",ŗ:"r",ṙ:"r",ṛ:"r",ṝ:"r",ȑ:"r",ɾ:"r",ᵳ:"r",ȓ:"r",ṟ:"r",ɼ:"r",ᵲ:"r",ᶉ:"r",ɍ:"r",ɽ:"r",ↄ:"c",ꜿ:"c",ɘ:"e",ɿ:"r",ś:"s",ṥ:"s",š:"s",ṧ:"s",ş:"s",ŝ:"s",ș:"s",ṡ:"s",ṣ:"s",ṩ:"s",ʂ:"s",ᵴ:"s",ᶊ:"s",ȿ:"s",ɡ:"g",ß:"ss",ᴑ:"o",ᴓ:"o",ᴝ:"u",ť:"t",ţ:"t",ṱ:"t",ț:"t",ȶ:"t",ẗ:"t",ⱦ:"t",ṫ:"t",ṭ:"t",ƭ:"t",ṯ:"t",ᵵ:"t",ƫ:"t",ʈ:"t",ŧ:"t",ᵺ:"th",ɐ:"a",ᴂ:"ae",ǝ:"e",ᵷ:"g",ɥ:"h",ʮ:"h",ʯ:"h",ᴉ:"i",ʞ:"k",ꞁ:"l",ɯ:"m",ɰ:"m",ᴔ:"oe",ɹ:"r",ɻ:"r",ɺ:"r",ⱹ:"r",ʇ:"t",ʌ:"v",ʍ:"w",ʎ:"y",ꜩ:"tz",ú:"u",ŭ:"u",ǔ:"u",û:"u",ṷ:"u",ü:"u",ǘ:"u",ǚ:"u",ǜ:"u",ǖ:"u",ṳ:"u",ụ:"u",ű:"u",ȕ:"u",ù:"u",ủ:"u",ư:"u",ứ:"u",ự:"u",ừ:"u",ử:"u",ữ:"u",ȗ:"u",ū:"u",ṻ:"u",ų:"u",ᶙ:"u",ů:"u",ũ:"u",ṹ:"u",ṵ:"u",ᵫ:"ue",ꝸ:"um",ⱴ:"v",ꝟ:"v",ṿ:"v",ʋ:"v",ᶌ:"v",ⱱ:"v",ṽ:"v",ꝡ:"vy",ẃ:"w",ŵ:"w",ẅ:"w",ẇ:"w",ẉ:"w",ẁ:"w",ⱳ:"w",ẘ:"w",ẍ:"x",ẋ:"x",ᶍ:"x",ý:"y",ŷ:"y",ÿ:"y",ẏ:"y",ỵ:"y",ỳ:"y",ƴ:"y",ỷ:"y",ỿ:"y",ȳ:"y",ẙ:"y",ɏ:"y",ỹ:"y",ź:"z",ž:"z",ẑ:"z",ʑ:"z",ⱬ:"z",ż:"z",ẓ:"z",ȥ:"z",ẕ:"z",ᵶ:"z",ᶎ:"z",ʐ:"z",ƶ:"z",ɀ:"z",ﬀ:"ff",ﬃ:"ffi",ﬄ:"ffl",ﬁ:"fi",ﬂ:"fl",ĳ:"ij",œ:"oe",ﬆ:"st",ₐ:"a",ₑ:"e",ᵢ:"i",ⱼ:"j",ₒ:"o",ᵣ:"r",ᵤ:"u",ᵥ:"v",ₓ:"x",Ё:"YO",Й:"I",Ц:"TS",У:"U",К:"K",Е:"E",Н:"N",Г:"G",Ш:"SH",Щ:"SCH",З:"Z",Х:"H",Ъ:"",ё:"yo",й:"i",ц:"ts",у:"u",к:"k",е:"e",н:"n",г:"g",ш:"sh",щ:"sch",з:"z",х:"h",ъ:"",Ф:"F",Ы:"I",В:"V",А:"A",П:"P",Р:"R",О:"O",Л:"L",Д:"D",Ж:"ZH",Э:"E",ф:"f",ы:"i",в:"v",а:"a",п:"p",р:"r",о:"o",л:"l",д:"d",ж:"zh",э:"e",Я:"Ya",Ч:"CH",С:"S",М:"M",И:"I",Т:"T",Ь:"",Б:"B",Ю:"YU",я:"ya",ч:"ch",с:"s",м:"m",и:"i",т:"t",ь:"",б:"b",ю:"yu"}},96486:function(e,t,n){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */e=n.nmd(e),function(){var a,i="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,d=128,f=256,p=1/0,h=9007199254740991,_=NaN,v=4294967295,m=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",f]],g="[object Arguments]",y="[object Array]",E="[object Boolean]",S="[object Date]",b="[object Error]",T="[object Function]",w="[object GeneratorFunction]",A="[object Map]",C="[object Number]",O="[object Object]",M="[object Promise]",I="[object RegExp]",k="[object Set]",P="[object String]",R="[object Symbol]",D="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",x="[object Float32Array]",U="[object Float64Array]",F="[object Int8Array]",G="[object Int16Array]",B="[object Int32Array]",j="[object Uint8Array]",Y="[object Uint8ClampedArray]",K="[object Uint16Array]",W="[object Uint32Array]",V=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,J=RegExp(z.source),Q=RegExp(q.source),X=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ae.source),oe=/^\s+|\s+$/g,se=/^\s+/,ue=/\s+$/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_e=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,Te=/['\n\r\u2028\u2029\\]/g,we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ae="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ke="['’]",Pe="[\\ud800-\\udfff]",Re="["+Ie+"]",De="["+we+"]",Ne="\\d+",Le="[\\u2700-\\u27bf]",xe="["+Ce+"]",Ue="[^\\ud800-\\udfff"+Ie+Ne+Ae+Ce+Oe+"]",Fe="\\ud83c[\\udffb-\\udfff]",Ge="[^\\ud800-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",Ye="["+Oe+"]",Ke="(?:"+xe+"|"+Ue+")",We="(?:"+Ye+"|"+Ue+")",Ve="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",$e="(?:"+De+"|"+Fe+")"+"?",ze="[\\ufe0e\\ufe0f]?",qe=ze+$e+("(?:\\u200d(?:"+[Ge,Be,je].join("|")+")"+ze+$e+")*"),Je="(?:"+[Le,Be,je].join("|")+")"+qe,Qe="(?:"+[Ge+De+"?",De,Be,je,Pe].join("|")+")",Xe=RegExp(ke,"g"),Ze=RegExp(De,"g"),et=RegExp(Fe+"(?="+Fe+")|"+Qe+qe,"g"),tt=RegExp([Ye+"?"+xe+"+"+Ve+"(?="+[Re,Ye,"$"].join("|")+")",We+"+"+He+"(?="+[Re,Ye+Ke,"$"].join("|")+")",Ye+"?"+Ke+"+"+Ve,Ye+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Je].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+we+Me+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[x]=ot[U]=ot[F]=ot[G]=ot[B]=ot[j]=ot[Y]=ot[K]=ot[W]=!0,ot[g]=ot[y]=ot[N]=ot[E]=ot[L]=ot[S]=ot[b]=ot[T]=ot[A]=ot[C]=ot[O]=ot[I]=ot[k]=ot[P]=ot[D]=!1;var st={};st[g]=st[y]=st[N]=st[L]=st[E]=st[S]=st[x]=st[U]=st[F]=st[G]=st[B]=st[A]=st[C]=st[O]=st[I]=st[k]=st[P]=st[R]=st[j]=st[Y]=st[K]=st[W]=!0,st[b]=st[T]=st[D]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,dt="object"==typeof global&&global&&global.Object===Object&&global,ft="object"==typeof self&&self&&self.Object===Object&&self,pt=dt||ft||Function("return this")(),ht=t&&!t.nodeType&&t,_t=ht&&e&&!e.nodeType&&e,vt=_t&&_t.exports===ht,mt=vt&&dt.process,gt=function(){try{var e=_t&&_t.require&&_t.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),yt=gt&&gt.isArrayBuffer,Et=gt&&gt.isDate,St=gt&&gt.isMap,bt=gt&&gt.isRegExp,Tt=gt&&gt.isSet,wt=gt&&gt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(r,o,n(o),e)}return r}function Ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kt(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function Pt(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Nt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Lt(e,t,n,r){var a=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function xt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Vt("length");function Gt(e,t,n){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=n,!1})),r}function Bt(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function jt(e,t,n){return t==t?function(e,t,n){var r=n-1,a=e.length;for(;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,Kt,n)}function Yt(e,t,n,r){for(var a=n-1,i=e.length;++a<i;)if(r(e[a],t))return a;return-1}function Kt(e){return e!=e}function Wt(e,t){var n=null==e?0:e.length;return n?zt(e,t)/n:_}function Vt(e){return function(t){return null==t?a:t[e]}}function Ht(e){return function(t){return null==e?a:e[t]}}function $t(e,t,n,r,a){return a(e,(function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)})),n}function zt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return function(t){return e(t)}}function Qt(e,t){return Dt(t,(function(t){return e[t]}))}function Xt(e,t){return e.has(t)}function Zt(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var nn=Ht({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),rn=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ut[e]}function on(e){return nt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,i[a++]=n)}return i}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return on(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ft(e)}function pn(e){return on(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}var hn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _n=function e(t){var n,r=(t=null==t?pt:_n.defaults(pt.Object(),t,_n.pick(pt,at))).Array,we=t.Date,Ae=t.Error,Ce=t.Function,Oe=t.Math,Me=t.Object,Ie=t.RegExp,ke=t.String,Pe=t.TypeError,Re=r.prototype,De=Ce.prototype,Ne=Me.prototype,Le=t["__core-js_shared__"],xe=De.toString,Ue=Ne.hasOwnProperty,Fe=0,Ge=(n=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Ne.toString,je=xe.call(Me),Ye=pt._,Ke=Ie("^"+xe.call(Ue).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=vt?t.Buffer:a,Ve=t.Symbol,He=t.Uint8Array,$e=We?We.allocUnsafe:a,ze=un(Me.getPrototypeOf,Me),qe=Me.create,Je=Ne.propertyIsEnumerable,Qe=Re.splice,et=Ve?Ve.isConcatSpreadable:a,nt=Ve?Ve.iterator:a,ut=Ve?Ve.toStringTag:a,dt=function(){try{var e=fi(Me,"defineProperty");return e({},"",{}),e}catch(e){}}(),ft=t.clearTimeout!==pt.clearTimeout&&t.clearTimeout,ht=we&&we.now!==pt.Date.now&&we.now,_t=t.setTimeout!==pt.setTimeout&&t.setTimeout,mt=Oe.ceil,gt=Oe.floor,Ft=Me.getOwnPropertySymbols,Ht=We?We.isBuffer:a,vn=t.isFinite,mn=Re.join,gn=un(Me.keys,Me),yn=Oe.max,En=Oe.min,Sn=we.now,bn=t.parseInt,Tn=Oe.random,wn=Re.reverse,An=fi(t,"DataView"),Cn=fi(t,"Map"),On=fi(t,"Promise"),Mn=fi(t,"Set"),In=fi(t,"WeakMap"),kn=fi(Me,"create"),Pn=In&&new In,Rn={},Dn=Gi(An),Nn=Gi(Cn),Ln=Gi(On),xn=Gi(Mn),Un=Gi(In),Fn=Ve?Ve.prototype:a,Gn=Fn?Fn.valueOf:a,Bn=Fn?Fn.toString:a;function jn(e){if(rs(e)&&!Ho(e)&&!(e instanceof Vn)){if(e instanceof Wn)return e;if(Ue.call(e,"__wrapped__"))return Bi(e)}return new Wn(e)}var Yn=function(){function e(){}return function(t){if(!ns(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Kn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Vn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new zn;++t<n;)this.add(e[t])}function Jn(e){var t=this.__data__=new $n(e);this.size=t.size}function Qn(e,t){var n=Ho(e),r=!n&&Vo(e),a=!n&&!r&&Jo(e),i=!n&&!r&&!a&&ds(e),o=n||r||a||i,s=o?qt(e.length,ke):[],u=s.length;for(var l in e)!t&&!Ue.call(e,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yi(l,u))||s.push(l);return s}function Xn(e){var t=e.length;return t?e[qr(0,t-1)]:a}function Zn(e,t){return xi(ka(e),ur(t,0,e.length))}function er(e){return xi(ka(e))}function tr(e,t,n){(n!==a&&!Yo(e[t],n)||n===a&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Ue.call(e,t)&&Yo(r,n)&&(n!==a||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Yo(e[n][0],t))return n;return-1}function ar(e,t,n,r){return pr(e,(function(e,a,i){t(r,e,n(e),i)})),r}function ir(e,t){return e&&Pa(t,Ds(t),e)}function or(e,t,n){"__proto__"==t&&dt?dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,i=t.length,o=r(i),s=null==e;++n<i;)o[n]=s?a:Ms(e,t[n]);return o}function ur(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function lr(e,t,n,r,i,o){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),s!==a)return s;if(!ns(e))return e;var d=Ho(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ue.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return ka(e,s)}else{var f=_i(e),p=f==T||f==w;if(Jo(e))return wa(e,u);if(f==O||f==g||p&&!i){if(s=l||p?{}:mi(e),!u)return l?function(e,t){return Pa(e,hi(e),t)}(e,function(e,t){return e&&Pa(t,Ns(t),e)}(s,e)):function(e,t){return Pa(e,pi(e),t)}(e,ir(s,e))}else{if(!st[f])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case N:return Aa(e);case E:case S:return new r(+e);case L:return function(e,t){var n=t?Aa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case x:case U:case F:case G:case B:case j:case Y:case K:case W:return Ca(e,n);case A:return new r;case C:case P:return new r(e);case I:return function(e){var t=new e.constructor(e.source,_e.exec(e));return t.lastIndex=e.lastIndex,t}(e);case k:return new r;case R:return a=e,Gn?Me(Gn.call(a)):{}}var a}(e,f,u)}}o||(o=new Jn);var h=o.get(e);if(h)return h;o.set(e,s),us(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,o))})):as(e)&&e.forEach((function(r,a){s.set(a,lr(r,t,n,a,e,o))}));var _=d?a:(c?l?ii:ai:l?Ns:Ds)(e);return Ot(_||e,(function(r,a){_&&(r=e[a=r]),nr(s,a,lr(r,t,n,a,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Me(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new Pe(i);return Ri((function(){e.apply(a,n)}),t)}function fr(e,t,n,r){var a=-1,i=Pt,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=Dt(t,Jt(n))),r?(i=Rt,o=!1):t.length>=200&&(i=Xt,o=!1,t=new qn(t));e:for(;++a<s;){var c=e[a],d=null==n?c:n(c);if(c=r||0!==c?c:0,o&&d==d){for(var f=l;f--;)if(t[f]===d)continue e;u.push(c)}else i(t,d,r)||u.push(c)}return u}jn.templateSettings={escape:X,evaluate:Z,interpolate:ee,variable:"",imports:{_:jn}},jn.prototype=Kn.prototype,jn.prototype.constructor=jn,Wn.prototype=Yn(Kn.prototype),Wn.prototype.constructor=Wn,Vn.prototype=Yn(Kn.prototype),Vn.prototype.constructor=Vn,Hn.prototype.clear=function(){this.__data__=kn?kn(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(kn){var n=t[e];return n===o?a:n}return Ue.call(t,e)?t[e]:a},Hn.prototype.has=function(e){var t=this.__data__;return kn?t[e]!==a:Ue.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=kn&&t===a?o:t,this},$n.prototype.clear=function(){this.__data__=[],this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,!0)},$n.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?a:t[n][1]},$n.prototype.has=function(e){return rr(this.__data__,e)>-1},$n.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Cn||$n),string:new Hn}},zn.prototype.delete=function(e){var t=ci(this,e).delete(e);return this.size-=t?1:0,t},zn.prototype.get=function(e){return ci(this,e).get(e)},zn.prototype.has=function(e){return ci(this,e).has(e)},zn.prototype.set=function(e,t){var n=ci(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(e){return this.__data__.set(e,o),this},qn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.clear=function(){this.__data__=new $n,this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Jn.prototype.get=function(e){return this.__data__.get(e)},Jn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $n){var r=n.__data__;if(!Cn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zn(r)}return n.set(e,t),this.size=n.size,this};var pr=Na(Sr),hr=Na(br,!0);function _r(e,t){var n=!0;return pr(e,(function(e,r,a){return n=!!t(e,r,a)})),n}function vr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(u===a?s==s&&!cs(s):n(s,u)))var u=s,l=o}return l}function mr(e,t){var n=[];return pr(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function gr(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=gi),a||(a=[]);++i<o;){var s=e[i];t>0&&n(s)?t>1?gr(s,t-1,n,r,a):Nt(a,s):r||(a[a.length]=s)}return a}var yr=La(),Er=La(!0);function Sr(e,t){return e&&yr(e,t,Ds)}function br(e,t){return e&&Er(e,t,Ds)}function Tr(e,t){return kt(t,(function(t){return Zo(e[t])}))}function wr(e,t){for(var n=0,r=(t=Ea(t,e)).length;null!=e&&n<r;)e=e[Fi(t[n++])];return n&&n==r?e:a}function Ar(e,t,n){var r=t(e);return Ho(e)?r:Nt(r,n(e))}function Cr(e){return null==e?e===a?"[object Undefined]":"[object Null]":ut&&ut in Me(e)?function(e){var t=Ue.call(e,ut),n=e[ut];try{e[ut]=a;var r=!0}catch(e){}var i=Be.call(e);r&&(t?e[ut]=n:delete e[ut]);return i}(e):function(e){return Be.call(e)}(e)}function Or(e,t){return e>t}function Mr(e,t){return null!=e&&Ue.call(e,t)}function Ir(e,t){return null!=e&&t in Me(e)}function kr(e,t,n){for(var i=n?Rt:Pt,o=e[0].length,s=e.length,u=s,l=r(s),c=1/0,d=[];u--;){var f=e[u];u&&t&&(f=Dt(f,Jt(t))),c=En(f.length,c),l[u]=!n&&(t||o>=120&&f.length>=120)?new qn(u&&f):a}f=e[0];var p=-1,h=l[0];e:for(;++p<o&&d.length<c;){var _=f[p],v=t?t(_):_;if(_=n||0!==_?_:0,!(h?Xt(h,v):i(d,v,n))){for(u=s;--u;){var m=l[u];if(!(m?Xt(m,v):i(e[u],v,n)))continue e}h&&h.push(v),d.push(_)}}return d}function Pr(e,t,n){var r=null==(e=Mi(e,t=Ea(t,e)))?e:e[Fi(Qi(t))];return null==r?a:At(r,e,n)}function Rr(e){return rs(e)&&Cr(e)==g}function Dr(e,t,n,r,i){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var s=Ho(e),u=Ho(t),l=s?y:_i(e),c=u?y:_i(t),d=(l=l==g?O:l)==O,f=(c=c==g?O:c)==O,p=l==c;if(p&&Jo(e)){if(!Jo(t))return!1;s=!0,d=!1}if(p&&!d)return o||(o=new Jn),s||ds(e)?ni(e,t,n,r,i,o):function(e,t,n,r,a,i,o){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!i(new He(e),new He(t)));case E:case S:case C:return Yo(+e,+t);case b:return e.name==t.name&&e.message==t.message;case I:case P:return e==t+"";case A:var s=sn;case k:var u=1&r;if(s||(s=cn),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var c=ni(s(e),s(t),r,a,i,o);return o.delete(e),c;case R:if(Gn)return Gn.call(e)==Gn.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var h=d&&Ue.call(e,"__wrapped__"),_=f&&Ue.call(t,"__wrapped__");if(h||_){var v=h?e.value():e,m=_?t.value():t;return o||(o=new Jn),i(v,m,n,r,o)}}if(!p)return!1;return o||(o=new Jn),function(e,t,n,r,i,o){var s=1&n,u=ai(e),l=u.length,c=ai(t).length;if(l!=c&&!s)return!1;var d=l;for(;d--;){var f=u[d];if(!(s?f in t:Ue.call(t,f)))return!1}var p=o.get(e),h=o.get(t);if(p&&h)return p==t&&h==e;var _=!0;o.set(e,t),o.set(t,e);var v=s;for(;++d<l;){var m=e[f=u[d]],g=t[f];if(r)var y=s?r(g,m,f,t,e,o):r(m,g,f,e,t,o);if(!(y===a?m===g||i(m,g,n,r,o):y)){_=!1;break}v||(v="constructor"==f)}if(_&&!v){var E=e.constructor,S=t.constructor;E==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof S&&S instanceof S||(_=!1)}return o.delete(e),o.delete(t),_}(e,t,n,r,i,o)}(e,t,n,r,Dr,i))}function Nr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Me(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var l=(u=n[i])[0],c=e[l],d=u[1];if(s&&u[2]){if(c===a&&!(l in e))return!1}else{var f=new Jn;if(r)var p=r(c,d,l,e,t,f);if(!(p===a?Dr(d,c,3,r,f):p))return!1}}return!0}function Lr(e){return!(!ns(e)||(t=e,Ge&&Ge in t))&&(Zo(e)?Ke:ge).test(Gi(e));var t}function xr(e){return"function"==typeof e?e:null==e?iu:"object"==typeof e?Ho(e)?Yr(e[0],e[1]):jr(e):hu(e)}function Ur(e){if(!wi(e))return gn(e);var t=[];for(var n in Me(e))Ue.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Me(e))t.push(n);return t}(e);var t=wi(e),n=[];for(var r in e)("constructor"!=r||!t&&Ue.call(e,r))&&n.push(r);return n}function Gr(e,t){return e<t}function Br(e,t){var n=-1,a=zo(e)?r(e.length):[];return pr(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}function jr(e){var t=di(e);return 1==t.length&&t[0][2]?Ci(t[0][0],t[0][1]):function(n){return n===e||Nr(n,e,t)}}function Yr(e,t){return Si(e)&&Ai(t)?Ci(Fi(e),t):function(n){var r=Ms(n,e);return r===a&&r===t?Is(n,e):Dr(t,r,3)}}function Kr(e,t,n,r,i){e!==t&&yr(t,(function(o,s){if(i||(i=new Jn),ns(o))!function(e,t,n,r,i,o,s){var u=ki(e,n),l=ki(t,n),c=s.get(l);if(c)return void tr(e,n,c);var d=o?o(u,l,n+"",e,t,s):a,f=d===a;if(f){var p=Ho(l),h=!p&&Jo(l),_=!p&&!h&&ds(l);d=l,p||h||_?Ho(u)?d=u:qo(u)?d=ka(u):h?(f=!1,d=wa(l,!0)):_?(f=!1,d=Ca(l,!0)):d=[]:os(l)||Vo(l)?(d=u,Vo(u)?d=ys(u):ns(u)&&!Zo(u)||(d=mi(l))):f=!1}f&&(s.set(l,d),i(d,l,r,o,s),s.delete(l));tr(e,n,d)}(e,t,s,n,Kr,r,i);else{var u=r?r(ki(e,s),o,s+"",e,t,i):a;u===a&&(u=o),tr(e,s,u)}}),Ns)}function Wr(e,t){var n=e.length;if(n)return yi(t+=t<0?n:0,n)?e[t]:a}function Vr(e,t,n){t=t.length?Dt(t,(function(e){return Ho(e)?function(t){return wr(t,1===e.length?e[0]:e)}:e})):[iu];var r=-1;return t=Dt(t,Jt(li())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Br(e,(function(e,n,a){return{criteria:Dt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,a=e.criteria,i=t.criteria,o=a.length,s=n.length;for(;++r<o;){var u=Oa(a[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],s=wr(e,o);n(s,o)&&ea(i,Ea(o,e),s)}return i}function $r(e,t,n,r){var a=r?Yt:jt,i=-1,o=t.length,s=e;for(e===t&&(t=ka(t)),n&&(s=Dt(e,Jt(n)));++i<o;)for(var u=0,l=t[i],c=n?n(l):l;(u=a(s,c,u,r))>-1;)s!==e&&Qe.call(s,u,1),Qe.call(e,u,1);return e}function zr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==i){var i=a;yi(a)?Qe.call(e,a,1):fa(e,a)}}return e}function qr(e,t){return e+gt(Tn()*(t-e+1))}function Jr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Di(Oi(e,t,iu),e+"")}function Xr(e){return Xn(Ys(e))}function Zr(e,t){var n=Ys(e);return xi(n,ur(t,0,n.length))}function ea(e,t,n,r){if(!ns(e))return e;for(var i=-1,o=(t=Ea(t,e)).length,s=o-1,u=e;null!=u&&++i<o;){var l=Fi(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var d=u[l];(c=r?r(d,l,u):a)===a&&(c=ns(d)?d:yi(t[i+1])?[]:{})}nr(u,l,c),u=u[l]}return e}var ta=Pn?function(e,t){return Pn.set(e,t),e}:iu,na=dt?function(e,t){return dt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:iu;function ra(e){return xi(Ys(e))}function aa(e,t,n){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=r(i);++a<i;)o[a]=e[a+t];return o}function ia(e,t){var n;return pr(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}function oa(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var i=r+a>>>1,o=e[i];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=i+1:a=i}return a}return sa(e,t,iu,n)}function sa(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,u=null===t,l=cs(t),c=t===a;i<o;){var d=gt((i+o)/2),f=n(e[d]),p=f!==a,h=null===f,_=f==f,v=cs(f);if(s)var m=r||_;else m=c?_&&(r||p):u?_&&p&&(r||!h):l?_&&p&&!h&&(r||!v):!h&&!v&&(r?f<=t:f<t);m?i=d+1:o=d}return En(o,4294967294)}function ua(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Yo(s,u)){var u=s;i[a++]=0===o?0:o}}return i}function la(e){return"number"==typeof e?e:cs(e)?_:+e}function ca(e){if("string"==typeof e)return e;if(Ho(e))return Dt(e,ca)+"";if(cs(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function da(e,t,n){var r=-1,a=Pt,i=e.length,o=!0,s=[],u=s;if(n)o=!1,a=Rt;else if(i>=200){var l=t?null:Ja(e);if(l)return cn(l);o=!1,a=Xt,u=new qn}else u=t?[]:s;e:for(;++r<i;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,o&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),s.push(c)}else a(u,d,n)||(u!==s&&u.push(d),s.push(c))}return s}function fa(e,t){return null==(e=Mi(e,t=Ea(t,e)))||delete e[Fi(Qi(t))]}function pa(e,t,n,r){return ea(e,t,n(wr(e,t)),r)}function ha(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?aa(e,r?0:i,r?i+1:a):aa(e,r?i+1:0,r?a:i)}function _a(e,t){var n=e;return n instanceof Vn&&(n=n.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),n)}function va(e,t,n){var a=e.length;if(a<2)return a?da(e[0]):[];for(var i=-1,o=r(a);++i<a;)for(var s=e[i],u=-1;++u<a;)u!=i&&(o[i]=fr(o[i]||s,e[u],t,n));return da(gr(o,1),t,n)}function ma(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var u=r<o?t[r]:a;n(s,e[r],u)}return s}function ga(e){return qo(e)?e:[]}function ya(e){return"function"==typeof e?e:iu}function Ea(e,t){return Ho(e)?e:Si(e,t)?[e]:Ui(Es(e))}var Sa=Qr;function ba(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:aa(e,t,n)}var Ta=ft||function(e){return pt.clearTimeout(e)};function wa(e,t){if(t)return e.slice();var n=e.length,r=$e?$e(n):new e.constructor(n);return e.copy(r),r}function Aa(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ca(e,t){var n=t?Aa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Oa(e,t){if(e!==t){var n=e!==a,r=null===e,i=e==e,o=cs(e),s=t!==a,u=null===t,l=t==t,c=cs(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!l)return-1}return 0}function Ma(e,t,n,a){for(var i=-1,o=e.length,s=n.length,u=-1,l=t.length,c=yn(o-s,0),d=r(l+c),f=!a;++u<l;)d[u]=t[u];for(;++i<s;)(f||i<o)&&(d[n[i]]=e[i]);for(;c--;)d[u++]=e[i++];return d}function Ia(e,t,n,a){for(var i=-1,o=e.length,s=-1,u=n.length,l=-1,c=t.length,d=yn(o-u,0),f=r(d+c),p=!a;++i<d;)f[i]=e[i];for(var h=i;++l<c;)f[h+l]=t[l];for(;++s<u;)(p||i<o)&&(f[h+n[s]]=e[i++]);return f}function ka(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function Pa(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],l=r?r(n[u],e[u],u,n,e):a;l===a&&(l=e[u]),i?or(n,u,l):nr(n,u,l)}return n}function Ra(e,t){return function(n,r){var a=Ho(n)?Ct:ar,i=t?t():{};return a(n,e,li(r,2),i)}}function Da(e){return Qr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,s&&Ei(n[0],n[1],s)&&(o=i<3?a:o,i=1),t=Me(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Na(e,t){return function(n,r){if(null==n)return n;if(!zo(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Me(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function La(e){return function(t,n,r){for(var a=-1,i=Me(t),o=r(t),s=o.length;s--;){var u=o[e?s:++a];if(!1===n(i[u],u,i))break}return t}}function xa(e){return function(t){var n=on(t=Es(t))?pn(t):a,r=n?n[0]:t.charAt(0),i=n?ba(n,1).join(""):t.slice(1);return r[e]()+i}}function Ua(e){return function(t){return Lt(Zs(Vs(t).replace(Xe,"")),e,"")}}function Fa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Yn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Ga(e){return function(t,n,r){var i=Me(t);if(!zo(t)){var o=li(n,3);t=Ds(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function Ba(e){return ri((function(t){var n=t.length,r=n,o=Wn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Pe(i);if(o&&!u&&"wrapper"==si(s))var u=new Wn([],!0)}for(r=u?r:n;++r<n;){var l=si(s=t[r]),c="wrapper"==l?oi(s):a;u=c&&bi(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[si(c[0])].apply(u,c[3]):1==s.length&&bi(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Ho(r))return u.plant(r).value();for(var a=0,i=n?t[a].apply(this,e):r;++a<n;)i=t[a].call(this,i);return i}}))}function ja(e,t,n,i,o,s,u,l,c,f){var p=t&d,h=1&t,_=2&t,v=24&t,m=512&t,g=_?a:Fa(e);return function a(){for(var d=arguments.length,y=r(d),E=d;E--;)y[E]=arguments[E];if(v)var S=ui(a),b=tn(y,S);if(i&&(y=Ma(y,i,o,v)),s&&(y=Ia(y,s,u,v)),d-=b,v&&d<f){var T=ln(y,S);return za(e,t,ja,a.placeholder,n,y,T,l,c,f-d)}var w=h?n:this,A=_?w[e]:e;return d=y.length,l?y=Ii(y,l):m&&d>1&&y.reverse(),p&&c<d&&(y.length=c),this&&this!==pt&&this instanceof a&&(A=g||Fa(A)),A.apply(w,y)}}function Ya(e,t){return function(n,r){return function(e,t,n,r){return Sr(e,(function(e,a,i){t(r,n(e),a,i)})),r}(n,e,t(r),{})}}function Ka(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=ca(n),r=ca(r)):(n=la(n),r=la(r)),i=e(n,r)}return i}}function Wa(e){return ri((function(t){return t=Dt(t,Jt(li())),Qr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Va(e,t){var n=(t=t===a?" ":ca(t)).length;if(n<2)return n?Jr(t,e):t;var r=Jr(t,mt(e/fn(t)));return on(t)?ba(pn(r),0,e).join(""):r.slice(0,e)}function Ha(e){return function(t,n,i){return i&&"number"!=typeof i&&Ei(t,n,i)&&(n=i=a),t=_s(t),n===a?(n=t,t=0):n=_s(n),function(e,t,n,a){for(var i=-1,o=yn(mt((t-e)/(n||1)),0),s=r(o);o--;)s[a?o:++i]=e,e+=n;return s}(t,n,i=i===a?t<n?1:-1:_s(i),e)}}function $a(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function za(e,t,n,r,i,o,s,u,d,f){var p=8&t;t|=p?l:c,4&(t&=~(p?c:l))||(t&=-4);var h=[e,t,i,p?o:a,p?s:a,p?a:o,p?a:s,u,d,f],_=n.apply(a,h);return bi(e)&&Pi(_,h),_.placeholder=r,Ni(_,e,t)}function qa(e){var t=Oe[e];return function(e,n){if(e=gs(e),(n=null==n?0:En(vs(n),292))&&vn(e)){var r=(Es(e)+"e").split("e");return+((r=(Es(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ja=Mn&&1/cn(new Mn([,-0]))[1]==p?function(e){return new Mn(e)}:cu;function Qa(e){return function(t){var n=_i(t);return n==A?sn(t):n==k?dn(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xa(e,t,n,o,p,h,_,v){var m=2&t;if(!m&&"function"!=typeof e)throw new Pe(i);var g=o?o.length:0;if(g||(t&=-97,o=p=a),_=_===a?_:yn(vs(_),0),v=v===a?v:vs(v),g-=p?p.length:0,t&c){var y=o,E=p;o=p=a}var S=m?a:oi(e),b=[e,t,n,o,p,y,E,h,_,v];if(S&&function(e,t){var n=e[1],r=t[1],a=n|r,i=a<131,o=r==d&&8==n||r==d&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!o)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?Ma(l,u,t[4]):u,e[4]=l?ln(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?Ia(l,u,t[6]):u,e[6]=l?ln(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&d&&(e[8]=null==e[8]?t[8]:En(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(b,S),e=b[0],t=b[1],n=b[2],o=b[3],p=b[4],!(v=b[9]=b[9]===a?m?0:e.length:yn(b[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)T=8==t||t==u?function(e,t,n){var i=Fa(e);return function o(){for(var s=arguments.length,u=r(s),l=s,c=ui(o);l--;)u[l]=arguments[l];var d=s<3&&u[0]!==c&&u[s-1]!==c?[]:ln(u,c);return(s-=d.length)<n?za(e,t,ja,o.placeholder,a,u,d,a,a,n-s):At(this&&this!==pt&&this instanceof o?i:e,this,u)}}(e,t,v):t!=l&&33!=t||p.length?ja.apply(a,b):function(e,t,n,a){var i=1&t,o=Fa(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=a.length,d=r(c+u),f=this&&this!==pt&&this instanceof t?o:e;++l<c;)d[l]=a[l];for(;u--;)d[l++]=arguments[++s];return At(f,i?n:this,d)}}(e,t,n,o);else var T=function(e,t,n){var r=1&t,a=Fa(e);return function t(){return(this&&this!==pt&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,n);return Ni((S?ta:Pi)(T,b),e,t)}function Za(e,t,n,r){return e===a||Yo(e,Ne[n])&&!Ue.call(r,n)?t:e}function ei(e,t,n,r,i,o){return ns(e)&&ns(t)&&(o.set(t,e),Kr(e,t,a,ei,o),o.delete(t)),e}function ti(e){return os(e)?a:e}function ni(e,t,n,r,i,o){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var f=-1,p=!0,h=2&n?new qn:a;for(o.set(e,t),o.set(t,e);++f<u;){var _=e[f],v=t[f];if(r)var m=s?r(v,_,f,t,e,o):r(_,v,f,e,t,o);if(m!==a){if(m)continue;p=!1;break}if(h){if(!Ut(t,(function(e,t){if(!Xt(h,t)&&(_===e||i(_,e,n,r,o)))return h.push(t)}))){p=!1;break}}else if(_!==v&&!i(_,v,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function ri(e){return Di(Oi(e,a,Hi),e+"")}function ai(e){return Ar(e,Ds,pi)}function ii(e){return Ar(e,Ns,hi)}var oi=Pn?function(e){return Pn.get(e)}:cu;function si(e){for(var t=e.name+"",n=Rn[t],r=Ue.call(Rn,t)?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}function ui(e){return(Ue.call(jn,"placeholder")?jn:e).placeholder}function li(){var e=jn.iteratee||ou;return e=e===ou?xr:e,arguments.length?e(arguments[0],arguments[1]):e}function ci(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function di(e){for(var t=Ds(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Ai(a)]}return t}function fi(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Lr(n)?n:a}var pi=Ft?function(e){return null==e?[]:(e=Me(e),kt(Ft(e),(function(t){return Je.call(e,t)})))}:mu,hi=Ft?function(e){for(var t=[];e;)Nt(t,pi(e)),e=ze(e);return t}:mu,_i=Cr;function vi(e,t,n){for(var r=-1,a=(t=Ea(t,e)).length,i=!1;++r<a;){var o=Fi(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++r!=a?i:!!(a=null==e?0:e.length)&&ts(a)&&yi(o,a)&&(Ho(e)||Vo(e))}function mi(e){return"function"!=typeof e.constructor||wi(e)?{}:Yn(ze(e))}function gi(e){return Ho(e)||Vo(e)||!!(et&&e&&e[et])}function yi(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&Ee.test(e))&&e>-1&&e%1==0&&e<t}function Ei(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?zo(n)&&yi(t,n.length):"string"==r&&t in n)&&Yo(n[t],e)}function Si(e,t){if(Ho(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Me(t))}function bi(e){var t=si(e),n=jn[t];if("function"!=typeof n||!(t in Vn.prototype))return!1;if(e===n)return!0;var r=oi(n);return!!r&&e===r[0]}(An&&_i(new An(new ArrayBuffer(1)))!=L||Cn&&_i(new Cn)!=A||On&&_i(On.resolve())!=M||Mn&&_i(new Mn)!=k||In&&_i(new In)!=D)&&(_i=function(e){var t=Cr(e),n=t==O?e.constructor:a,r=n?Gi(n):"";if(r)switch(r){case Dn:return L;case Nn:return A;case Ln:return M;case xn:return k;case Un:return D}return t});var Ti=Le?Zo:gu;function wi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ne)}function Ai(e){return e==e&&!ns(e)}function Ci(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in Me(n)))}}function Oi(e,t,n){return t=yn(t===a?e.length-1:t,0),function(){for(var a=arguments,i=-1,o=yn(a.length-t,0),s=r(o);++i<o;)s[i]=a[t+i];i=-1;for(var u=r(t+1);++i<t;)u[i]=a[i];return u[t]=n(s),At(e,this,u)}}function Mi(e,t){return t.length<2?e:wr(e,aa(t,0,-1))}function Ii(e,t){for(var n=e.length,r=En(t.length,n),i=ka(e);r--;){var o=t[r];e[r]=yi(o,n)?i[o]:a}return e}function ki(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Pi=Li(ta),Ri=_t||function(e,t){return pt.setTimeout(e,t)},Di=Li(na);function Ni(e,t,n){var r=t+"";return Di(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ot(m,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(de):[]}(r),n)))}function Li(e){var t=0,n=0;return function(){var r=Sn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function xi(e,t){var n=-1,r=e.length,i=r-1;for(t=t===a?r:t;++n<t;){var o=qr(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ui=function(e){var t=xo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,a){t.push(r?a.replace(pe,"$1"):n||e)})),t}));function Fi(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Gi(e){if(null!=e){try{return xe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Bi(e){if(e instanceof Vn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=ka(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ji=Qr((function(e,t){return qo(e)?fr(e,gr(t,1,qo,!0)):[]})),Yi=Qr((function(e,t){var n=Qi(t);return qo(n)&&(n=a),qo(e)?fr(e,gr(t,1,qo,!0),li(n,2)):[]})),Ki=Qr((function(e,t){var n=Qi(t);return qo(n)&&(n=a),qo(e)?fr(e,gr(t,1,qo,!0),a,n):[]}));function Wi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:vs(n);return a<0&&(a=yn(r+a,0)),Bt(e,li(t,3),a)}function Vi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=vs(n),i=n<0?yn(r+i,0):En(i,r-1)),Bt(e,li(t,3),i,!0)}function Hi(e){return(null==e?0:e.length)?gr(e,1):[]}function $i(e){return e&&e.length?e[0]:a}var zi=Qr((function(e){var t=Dt(e,ga);return t.length&&t[0]===e[0]?kr(t):[]})),qi=Qr((function(e){var t=Qi(e),n=Dt(e,ga);return t===Qi(n)?t=a:n.pop(),n.length&&n[0]===e[0]?kr(n,li(t,2)):[]})),Ji=Qr((function(e){var t=Qi(e),n=Dt(e,ga);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?kr(n,a,t):[]}));function Qi(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Xi=Qr(Zi);function Zi(e,t){return e&&e.length&&t&&t.length?$r(e,t):e}var eo=ri((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return zr(e,Dt(t,(function(e){return yi(e,n)?+e:e})).sort(Oa)),r}));function to(e){return null==e?e:wn.call(e)}var no=Qr((function(e){return da(gr(e,1,qo,!0))})),ro=Qr((function(e){var t=Qi(e);return qo(t)&&(t=a),da(gr(e,1,qo,!0),li(t,2))})),ao=Qr((function(e){var t=Qi(e);return t="function"==typeof t?t:a,da(gr(e,1,qo,!0),a,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=kt(e,(function(e){if(qo(e))return t=yn(e.length,t),!0})),qt(t,(function(t){return Dt(e,Vt(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:Dt(n,(function(e){return At(t,a,e)}))}var so=Qr((function(e,t){return qo(e)?fr(e,t):[]})),uo=Qr((function(e){return va(kt(e,qo))})),lo=Qr((function(e){var t=Qi(e);return qo(t)&&(t=a),va(kt(e,qo),li(t,2))})),co=Qr((function(e){var t=Qi(e);return t="function"==typeof t?t:a,va(kt(e,qo),a,t)})),fo=Qr(io);var po=Qr((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,oo(e,n)}));function ho(e){var t=jn(e);return t.__chain__=!0,t}function _o(e,t){return t(e)}var vo=ri((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Vn&&yi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:_o,args:[i],thisArg:a}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(i)}));var mo=Ra((function(e,t,n){Ue.call(e,n)?++e[n]:or(e,n,1)}));var go=Ga(Wi),yo=Ga(Vi);function Eo(e,t){return(Ho(e)?Ot:pr)(e,li(t,3))}function So(e,t){return(Ho(e)?Mt:hr)(e,li(t,3))}var bo=Ra((function(e,t,n){Ue.call(e,n)?e[n].push(t):or(e,n,[t])}));var To=Qr((function(e,t,n){var a=-1,i="function"==typeof t,o=zo(e)?r(e.length):[];return pr(e,(function(e){o[++a]=i?At(t,e,n):Pr(e,t,n)})),o})),wo=Ra((function(e,t,n){or(e,n,t)}));function Ao(e,t){return(Ho(e)?Dt:Br)(e,li(t,3))}var Co=Ra((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Oo=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ei(e,t[0],t[1])?t=[]:n>2&&Ei(t[0],t[1],t[2])&&(t=[t[0]]),Vr(e,gr(t,1),[])})),Mo=ht||function(){return pt.Date.now()};function Io(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,Xa(e,d,a,a,a,a,t)}function ko(e,t){var n;if("function"!=typeof t)throw new Pe(i);return e=vs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Po=Qr((function(e,t,n){var r=1;if(n.length){var a=ln(n,ui(Po));r|=l}return Xa(e,r,t,n,a)})),Ro=Qr((function(e,t,n){var r=3;if(n.length){var a=ln(n,ui(Ro));r|=l}return Xa(t,r,e,n,a)}));function Do(e,t,n){var r,o,s,u,l,c,d=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new Pe(i);function _(t){var n=r,i=o;return r=o=a,d=t,u=e.apply(i,n)}function v(e){return d=e,l=Ri(g,t),f?_(e):u}function m(e){var n=e-c;return c===a||n>=t||n<0||p&&e-d>=s}function g(){var e=Mo();if(m(e))return y(e);l=Ri(g,function(e){var n=t-(e-c);return p?En(n,s-(e-d)):n}(e))}function y(e){return l=a,h&&r?_(e):(r=o=a,u)}function E(){var e=Mo(),n=m(e);if(r=arguments,o=this,c=e,n){if(l===a)return v(c);if(p)return Ta(l),l=Ri(g,t),_(c)}return l===a&&(l=Ri(g,t)),u}return t=gs(t)||0,ns(n)&&(f=!!n.leading,s=(p="maxWait"in n)?yn(gs(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),E.cancel=function(){l!==a&&Ta(l),d=0,r=c=o=l=a},E.flush=function(){return l===a?u:y(Mo())},E}var No=Qr((function(e,t){return dr(e,1,t)})),Lo=Qr((function(e,t,n){return dr(e,gs(t)||0,n)}));function xo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(i);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(xo.Cache||zn),n}function Uo(e){if("function"!=typeof e)throw new Pe(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}xo.Cache=zn;var Fo=Sa((function(e,t){var n=(t=1==t.length&&Ho(t[0])?Dt(t[0],Jt(li())):Dt(gr(t,1),Jt(li()))).length;return Qr((function(r){for(var a=-1,i=En(r.length,n);++a<i;)r[a]=t[a].call(this,r[a]);return At(e,this,r)}))})),Go=Qr((function(e,t){var n=ln(t,ui(Go));return Xa(e,l,a,t,n)})),Bo=Qr((function(e,t){var n=ln(t,ui(Bo));return Xa(e,c,a,t,n)})),jo=ri((function(e,t){return Xa(e,f,a,a,a,t)}));function Yo(e,t){return e===t||e!=e&&t!=t}var Ko=$a(Or),Wo=$a((function(e,t){return e>=t})),Vo=Rr(function(){return arguments}())?Rr:function(e){return rs(e)&&Ue.call(e,"callee")&&!Je.call(e,"callee")},Ho=r.isArray,$o=yt?Jt(yt):function(e){return rs(e)&&Cr(e)==N};function zo(e){return null!=e&&ts(e.length)&&!Zo(e)}function qo(e){return rs(e)&&zo(e)}var Jo=Ht||gu,Qo=Et?Jt(Et):function(e){return rs(e)&&Cr(e)==S};function Xo(e){if(!rs(e))return!1;var t=Cr(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Zo(e){if(!ns(e))return!1;var t=Cr(e);return t==T||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==vs(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var as=St?Jt(St):function(e){return rs(e)&&_i(e)==A};function is(e){return"number"==typeof e||rs(e)&&Cr(e)==C}function os(e){if(!rs(e)||Cr(e)!=O)return!1;var t=ze(e);if(null===t)return!0;var n=Ue.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&xe.call(n)==je}var ss=bt?Jt(bt):function(e){return rs(e)&&Cr(e)==I};var us=Tt?Jt(Tt):function(e){return rs(e)&&_i(e)==k};function ls(e){return"string"==typeof e||!Ho(e)&&rs(e)&&Cr(e)==P}function cs(e){return"symbol"==typeof e||rs(e)&&Cr(e)==R}var ds=wt?Jt(wt):function(e){return rs(e)&&ts(e.length)&&!!ot[Cr(e)]};var fs=$a(Gr),ps=$a((function(e,t){return e<=t}));function hs(e){if(!e)return[];if(zo(e))return ls(e)?pn(e):ka(e);if(nt&&e[nt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[nt]());var t=_i(e);return(t==A?sn:t==k?cn:Ys)(e)}function _s(e){return e?(e=gs(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=_s(e),n=t%1;return t==t?n?t-n:t:0}function ms(e){return e?ur(vs(e),0,v):0}function gs(e){if("number"==typeof e)return e;if(cs(e))return _;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(oe,"");var n=me.test(e);return n||ye.test(e)?ct(e.slice(2),n?2:8):ve.test(e)?_:+e}function ys(e){return Pa(e,Ns(e))}function Es(e){return null==e?"":ca(e)}var Ss=Da((function(e,t){if(wi(t)||zo(t))Pa(t,Ds(t),e);else for(var n in t)Ue.call(t,n)&&nr(e,n,t[n])})),bs=Da((function(e,t){Pa(t,Ns(t),e)})),Ts=Da((function(e,t,n,r){Pa(t,Ns(t),e,r)})),ws=Da((function(e,t,n,r){Pa(t,Ds(t),e,r)})),As=ri(sr);var Cs=Qr((function(e,t){e=Me(e);var n=-1,r=t.length,i=r>2?t[2]:a;for(i&&Ei(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=Ns(o),u=-1,l=s.length;++u<l;){var c=s[u],d=e[c];(d===a||Yo(d,Ne[c])&&!Ue.call(e,c))&&(e[c]=o[c])}return e})),Os=Qr((function(e){return e.push(a,ei),At(xs,a,e)}));function Ms(e,t,n){var r=null==e?a:wr(e,t);return r===a?n:r}function Is(e,t){return null!=e&&vi(e,t,Ir)}var ks=Ya((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),nu(iu)),Ps=Ya((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Ue.call(e,t)?e[t].push(n):e[t]=[n]}),li),Rs=Qr(Pr);function Ds(e){return zo(e)?Qn(e):Ur(e)}function Ns(e){return zo(e)?Qn(e,!0):Fr(e)}var Ls=Da((function(e,t,n){Kr(e,t,n)})),xs=Da((function(e,t,n,r){Kr(e,t,n,r)})),Us=ri((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=Ea(t,e),r||(r=t.length>1),t})),Pa(e,ii(e),n),r&&(n=lr(n,7,ti));for(var a=t.length;a--;)fa(n,t[a]);return n}));var Fs=ri((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return Is(e,n)}))}(e,t)}));function Gs(e,t){if(null==e)return{};var n=Dt(ii(e),(function(e){return[e]}));return t=li(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Bs=Qa(Ds),js=Qa(Ns);function Ys(e){return null==e?[]:Qt(e,Ds(e))}var Ks=Ua((function(e,t,n){return t=t.toLowerCase(),e+(n?Ws(t):t)}));function Ws(e){return Xs(Es(e).toLowerCase())}function Vs(e){return(e=Es(e))&&e.replace(Se,nn).replace(Ze,"")}var Hs=Ua((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),$s=Ua((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),zs=xa("toLowerCase");var qs=Ua((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Js=Ua((function(e,t,n){return e+(n?" ":"")+Xs(t)}));var Qs=Ua((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xs=xa("toUpperCase");function Zs(e,t,n){return e=Es(e),(t=n?a:t)===a?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=Qr((function(e,t){try{return At(e,a,t)}catch(e){return Xo(e)?e:new Ae(e)}})),tu=ri((function(e,t){return Ot(t,(function(t){t=Fi(t),or(e,t,Po(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Ba(),au=Ba(!0);function iu(e){return e}function ou(e){return xr("function"==typeof e?e:lr(e,1))}var su=Qr((function(e,t){return function(n){return Pr(n,e,t)}})),uu=Qr((function(e,t){return function(n){return Pr(e,n,t)}}));function lu(e,t,n){var r=Ds(t),a=Tr(t,r);null!=n||ns(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=Tr(t,Ds(t)));var i=!(ns(n)&&"chain"in n&&!n.chain),o=Zo(e);return Ot(a,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),a=n.__actions__=ka(this.__actions__);return a.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})})),e}function cu(){}var du=Wa(Dt),fu=Wa(It),pu=Wa(Ut);function hu(e){return Si(e)?Vt(Fi(e)):function(e){return function(t){return wr(t,e)}}(e)}var _u=Ha(),vu=Ha(!0);function mu(){return[]}function gu(){return!1}var yu=Ka((function(e,t){return e+t}),0),Eu=qa("ceil"),Su=Ka((function(e,t){return e/t}),1),bu=qa("floor");var Tu,wu=Ka((function(e,t){return e*t}),1),Au=qa("round"),Cu=Ka((function(e,t){return e-t}),0);return jn.after=function(e,t){if("function"!=typeof t)throw new Pe(i);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},jn.ary=Io,jn.assign=Ss,jn.assignIn=bs,jn.assignInWith=Ts,jn.assignWith=ws,jn.at=As,jn.before=ko,jn.bind=Po,jn.bindAll=tu,jn.bindKey=Ro,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ho(e)?e:[e]},jn.chain=ho,jn.chunk=function(e,t,n){t=(n?Ei(e,t,n):t===a)?1:yn(vs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,u=r(mt(i/t));o<i;)u[s++]=aa(e,o,o+=t);return u},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var i=e[t];i&&(a[r++]=i)}return a},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Nt(Ho(n)?ka(n):[n],gr(t,1))},jn.cond=function(e){var t=null==e?0:e.length,n=li();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Pe(i);return[n(e[0]),e[1]]})):[],Qr((function(n){for(var r=-1;++r<t;){var a=e[r];if(At(a[0],this,n))return At(a[1],this,n)}}))},jn.conforms=function(e){return function(e){var t=Ds(e);return function(n){return cr(n,e,t)}}(lr(e,1))},jn.constant=nu,jn.countBy=mo,jn.create=function(e,t){var n=Yn(e);return null==t?n:ir(n,t)},jn.curry=function e(t,n,r){var i=Xa(t,8,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},jn.curryRight=function e(t,n,r){var i=Xa(t,u,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},jn.debounce=Do,jn.defaults=Cs,jn.defaultsDeep=Os,jn.defer=No,jn.delay=Lo,jn.difference=ji,jn.differenceBy=Yi,jn.differenceWith=Ki,jn.drop=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,(t=n||t===a?1:vs(t))<0?0:t,r):[]},jn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,0,(t=r-(t=n||t===a?1:vs(t)))<0?0:t):[]},jn.dropRightWhile=function(e,t){return e&&e.length?ha(e,li(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?ha(e,li(t,3),!0):[]},jn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Ei(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=vs(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:vs(r))<0&&(r+=i),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},jn.filter=function(e,t){return(Ho(e)?kt:mr)(e,li(t,3))},jn.flatMap=function(e,t){return gr(Ao(e,t),1)},jn.flatMapDeep=function(e,t){return gr(Ao(e,t),p)},jn.flatMapDepth=function(e,t,n){return n=n===a?1:vs(n),gr(Ao(e,t),n)},jn.flatten=Hi,jn.flattenDeep=function(e){return(null==e?0:e.length)?gr(e,p):[]},jn.flattenDepth=function(e,t){return(null==e?0:e.length)?gr(e,t=t===a?1:vs(t)):[]},jn.flip=function(e){return Xa(e,512)},jn.flow=ru,jn.flowRight=au,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},jn.functions=function(e){return null==e?[]:Tr(e,Ds(e))},jn.functionsIn=function(e){return null==e?[]:Tr(e,Ns(e))},jn.groupBy=bo,jn.initial=function(e){return(null==e?0:e.length)?aa(e,0,-1):[]},jn.intersection=zi,jn.intersectionBy=qi,jn.intersectionWith=Ji,jn.invert=ks,jn.invertBy=Ps,jn.invokeMap=To,jn.iteratee=ou,jn.keyBy=wo,jn.keys=Ds,jn.keysIn=Ns,jn.map=Ao,jn.mapKeys=function(e,t){var n={};return t=li(t,3),Sr(e,(function(e,r,a){or(n,t(e,r,a),e)})),n},jn.mapValues=function(e,t){var n={};return t=li(t,3),Sr(e,(function(e,r,a){or(n,r,t(e,r,a))})),n},jn.matches=function(e){return jr(lr(e,1))},jn.matchesProperty=function(e,t){return Yr(e,lr(t,1))},jn.memoize=xo,jn.merge=Ls,jn.mergeWith=xs,jn.method=su,jn.methodOf=uu,jn.mixin=lu,jn.negate=Uo,jn.nthArg=function(e){return e=vs(e),Qr((function(t){return Wr(t,e)}))},jn.omit=Us,jn.omitBy=function(e,t){return Gs(e,Uo(li(t)))},jn.once=function(e){return ko(2,e)},jn.orderBy=function(e,t,n,r){return null==e?[]:(Ho(t)||(t=null==t?[]:[t]),Ho(n=r?a:n)||(n=null==n?[]:[n]),Vr(e,t,n))},jn.over=du,jn.overArgs=Fo,jn.overEvery=fu,jn.overSome=pu,jn.partial=Go,jn.partialRight=Bo,jn.partition=Co,jn.pick=Fs,jn.pickBy=Gs,jn.property=hu,jn.propertyOf=function(e){return function(t){return null==e?a:wr(e,t)}},jn.pull=Xi,jn.pullAll=Zi,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,li(n,2)):e},jn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,a,n):e},jn.pullAt=eo,jn.range=_u,jn.rangeRight=vu,jn.rearg=jo,jn.reject=function(e,t){return(Ho(e)?kt:mr)(e,Uo(li(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],i=e.length;for(t=li(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),a.push(r))}return zr(e,a),n},jn.rest=function(e,t){if("function"!=typeof e)throw new Pe(i);return Qr(e,t=t===a?t:vs(t))},jn.reverse=to,jn.sampleSize=function(e,t,n){return t=(n?Ei(e,t,n):t===a)?1:vs(t),(Ho(e)?Zn:Zr)(e,t)},jn.set=function(e,t,n){return null==e?e:ea(e,t,n)},jn.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ea(e,t,n,r)},jn.shuffle=function(e){return(Ho(e)?er:ra)(e)},jn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Ei(e,t,n)?(t=0,n=r):(t=null==t?0:vs(t),n=n===a?r:vs(n)),aa(e,t,n)):[]},jn.sortBy=Oo,jn.sortedUniq=function(e){return e&&e.length?ua(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?ua(e,li(t,2)):[]},jn.split=function(e,t,n){return n&&"number"!=typeof n&&Ei(e,t,n)&&(t=n=a),(n=n===a?v:n>>>0)?(e=Es(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=ca(t))&&on(e)?ba(pn(e),0,n):e.split(t,n):[]},jn.spread=function(e,t){if("function"!=typeof e)throw new Pe(i);return t=null==t?0:yn(vs(t),0),Qr((function(n){var r=n[t],a=ba(n,0,t);return r&&Nt(a,r),At(e,this,a)}))},jn.tail=function(e){var t=null==e?0:e.length;return t?aa(e,1,t):[]},jn.take=function(e,t,n){return e&&e.length?aa(e,0,(t=n||t===a?1:vs(t))<0?0:t):[]},jn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?aa(e,(t=r-(t=n||t===a?1:vs(t)))<0?0:t,r):[]},jn.takeRightWhile=function(e,t){return e&&e.length?ha(e,li(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?ha(e,li(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Pe(i);return ns(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Do(e,t,{leading:r,maxWait:t,trailing:a})},jn.thru=_o,jn.toArray=hs,jn.toPairs=Bs,jn.toPairsIn=js,jn.toPath=function(e){return Ho(e)?Dt(e,Fi):cs(e)?[e]:ka(Ui(Es(e)))},jn.toPlainObject=ys,jn.transform=function(e,t,n){var r=Ho(e),a=r||Jo(e)||ds(e);if(t=li(t,4),null==n){var i=e&&e.constructor;n=a?r?new i:[]:ns(e)&&Zo(i)?Yn(ze(e)):{}}return(a?Ot:Sr)(e,(function(e,r,a){return t(n,e,r,a)})),n},jn.unary=function(e){return Io(e,1)},jn.union=no,jn.unionBy=ro,jn.unionWith=ao,jn.uniq=function(e){return e&&e.length?da(e):[]},jn.uniqBy=function(e,t){return e&&e.length?da(e,li(t,2)):[]},jn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?da(e,a,t):[]},jn.unset=function(e,t){return null==e||fa(e,t)},jn.unzip=io,jn.unzipWith=oo,jn.update=function(e,t,n){return null==e?e:pa(e,t,ya(n))},jn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:pa(e,t,ya(n),r)},jn.values=Ys,jn.valuesIn=function(e){return null==e?[]:Qt(e,Ns(e))},jn.without=so,jn.words=Zs,jn.wrap=function(e,t){return Go(ya(t),e)},jn.xor=uo,jn.xorBy=lo,jn.xorWith=co,jn.zip=fo,jn.zipObject=function(e,t){return ma(e||[],t||[],nr)},jn.zipObjectDeep=function(e,t){return ma(e||[],t||[],ea)},jn.zipWith=po,jn.entries=Bs,jn.entriesIn=js,jn.extend=bs,jn.extendWith=Ts,lu(jn,jn),jn.add=yu,jn.attempt=eu,jn.camelCase=Ks,jn.capitalize=Ws,jn.ceil=Eu,jn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=gs(n))==n?n:0),t!==a&&(t=(t=gs(t))==t?t:0),ur(gs(e),t,n)},jn.clone=function(e){return lr(e,4)},jn.cloneDeep=function(e){return lr(e,5)},jn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:a)},jn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:a)},jn.conformsTo=function(e,t){return null==t||cr(e,t,Ds(t))},jn.deburr=Vs,jn.defaultTo=function(e,t){return null==e||e!=e?t:e},jn.divide=Su,jn.endsWith=function(e,t,n){e=Es(e),t=ca(t);var r=e.length,i=n=n===a?r:ur(vs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},jn.eq=Yo,jn.escape=function(e){return(e=Es(e))&&Q.test(e)?e.replace(q,rn):e},jn.escapeRegExp=function(e){return(e=Es(e))&&ie.test(e)?e.replace(ae,"\\$&"):e},jn.every=function(e,t,n){var r=Ho(e)?It:_r;return n&&Ei(e,t,n)&&(t=a),r(e,li(t,3))},jn.find=go,jn.findIndex=Wi,jn.findKey=function(e,t){return Gt(e,li(t,3),Sr)},jn.findLast=yo,jn.findLastIndex=Vi,jn.findLastKey=function(e,t){return Gt(e,li(t,3),br)},jn.floor=bu,jn.forEach=Eo,jn.forEachRight=So,jn.forIn=function(e,t){return null==e?e:yr(e,li(t,3),Ns)},jn.forInRight=function(e,t){return null==e?e:Er(e,li(t,3),Ns)},jn.forOwn=function(e,t){return e&&Sr(e,li(t,3))},jn.forOwnRight=function(e,t){return e&&br(e,li(t,3))},jn.get=Ms,jn.gt=Ko,jn.gte=Wo,jn.has=function(e,t){return null!=e&&vi(e,t,Mr)},jn.hasIn=Is,jn.head=$i,jn.identity=iu,jn.includes=function(e,t,n,r){e=zo(e)?e:Ys(e),n=n&&!r?vs(n):0;var a=e.length;return n<0&&(n=yn(a+n,0)),ls(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&jt(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:vs(n);return a<0&&(a=yn(r+a,0)),jt(e,t,a)},jn.inRange=function(e,t,n){return t=_s(t),n===a?(n=t,t=0):n=_s(n),function(e,t,n){return e>=En(t,n)&&e<yn(t,n)}(e=gs(e),t,n)},jn.invoke=Rs,jn.isArguments=Vo,jn.isArray=Ho,jn.isArrayBuffer=$o,jn.isArrayLike=zo,jn.isArrayLikeObject=qo,jn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Cr(e)==E},jn.isBuffer=Jo,jn.isDate=Qo,jn.isElement=function(e){return rs(e)&&1===e.nodeType&&!os(e)},jn.isEmpty=function(e){if(null==e)return!0;if(zo(e)&&(Ho(e)||"string"==typeof e||"function"==typeof e.splice||Jo(e)||ds(e)||Vo(e)))return!e.length;var t=_i(e);if(t==A||t==k)return!e.size;if(wi(e))return!Ur(e).length;for(var n in e)if(Ue.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Dr(e,t)},jn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Dr(e,t,a,n):!!r},jn.isError=Xo,jn.isFinite=function(e){return"number"==typeof e&&vn(e)},jn.isFunction=Zo,jn.isInteger=es,jn.isLength=ts,jn.isMap=as,jn.isMatch=function(e,t){return e===t||Nr(e,t,di(t))},jn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Nr(e,t,di(t),n)},jn.isNaN=function(e){return is(e)&&e!=+e},jn.isNative=function(e){if(Ti(e))throw new Ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=is,jn.isObject=ns,jn.isObjectLike=rs,jn.isPlainObject=os,jn.isRegExp=ss,jn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=h},jn.isSet=us,jn.isString=ls,jn.isSymbol=cs,jn.isTypedArray=ds,jn.isUndefined=function(e){return e===a},jn.isWeakMap=function(e){return rs(e)&&_i(e)==D},jn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Cr(e)},jn.join=function(e,t){return null==e?"":mn.call(e,t)},jn.kebabCase=Hs,jn.last=Qi,jn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=vs(n))<0?yn(r+i,0):En(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Bt(e,Kt,i,!0)},jn.lowerCase=$s,jn.lowerFirst=zs,jn.lt=fs,jn.lte=ps,jn.max=function(e){return e&&e.length?vr(e,iu,Or):a},jn.maxBy=function(e,t){return e&&e.length?vr(e,li(t,2),Or):a},jn.mean=function(e){return Wt(e,iu)},jn.meanBy=function(e,t){return Wt(e,li(t,2))},jn.min=function(e){return e&&e.length?vr(e,iu,Gr):a},jn.minBy=function(e,t){return e&&e.length?vr(e,li(t,2),Gr):a},jn.stubArray=mu,jn.stubFalse=gu,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=wu,jn.nth=function(e,t){return e&&e.length?Wr(e,vs(t)):a},jn.noConflict=function(){return pt._===this&&(pt._=Ye),this},jn.noop=cu,jn.now=Mo,jn.pad=function(e,t,n){e=Es(e);var r=(t=vs(t))?fn(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return Va(gt(a),n)+e+Va(mt(a),n)},jn.padEnd=function(e,t,n){e=Es(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?e+Va(t-r,n):e},jn.padStart=function(e,t,n){e=Es(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?Va(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(Es(e).replace(se,""),t||0)},jn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Ei(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=_s(e),t===a?(t=e,e=0):t=_s(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Tn();return En(e+i*(t-e+lt("1e-"+((i+"").length-1))),t)}return qr(e,t)},jn.reduce=function(e,t,n){var r=Ho(e)?Lt:$t,a=arguments.length<3;return r(e,li(t,4),n,a,pr)},jn.reduceRight=function(e,t,n){var r=Ho(e)?xt:$t,a=arguments.length<3;return r(e,li(t,4),n,a,hr)},jn.repeat=function(e,t,n){return t=(n?Ei(e,t,n):t===a)?1:vs(t),Jr(Es(e),t)},jn.replace=function(){var e=arguments,t=Es(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(e,t,n){var r=-1,i=(t=Ea(t,e)).length;for(i||(i=1,e=a);++r<i;){var o=null==e?a:e[Fi(t[r])];o===a&&(r=i,o=n),e=Zo(o)?o.call(e):o}return e},jn.round=Au,jn.runInContext=e,jn.sample=function(e){return(Ho(e)?Xn:Xr)(e)},jn.size=function(e){if(null==e)return 0;if(zo(e))return ls(e)?fn(e):e.length;var t=_i(e);return t==A||t==k?e.size:Ur(e).length},jn.snakeCase=qs,jn.some=function(e,t,n){var r=Ho(e)?Ut:ia;return n&&Ei(e,t,n)&&(t=a),r(e,li(t,3))},jn.sortedIndex=function(e,t){return oa(e,t)},jn.sortedIndexBy=function(e,t,n){return sa(e,t,li(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oa(e,t);if(r<n&&Yo(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return oa(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return sa(e,t,li(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oa(e,t,!0)-1;if(Yo(e[n],t))return n}return-1},jn.startCase=Js,jn.startsWith=function(e,t,n){return e=Es(e),n=null==n?0:ur(vs(n),0,e.length),t=ca(t),e.slice(n,n+t.length)==t},jn.subtract=Cu,jn.sum=function(e){return e&&e.length?zt(e,iu):0},jn.sumBy=function(e,t){return e&&e.length?zt(e,li(t,2)):0},jn.template=function(e,t,n){var r=jn.templateSettings;n&&Ei(e,t,n)&&(t=a),e=Es(e),t=Ts({},t,r,Za);var i,o,s=Ts({},t.imports,r.imports,Za),u=Ds(s),l=Qt(s,u),c=0,d=t.interpolate||be,f="__p += '",p=Ie((t.escape||be).source+"|"+d.source+"|"+(d===ee?he:be).source+"|"+(t.evaluate||be).source+"|$","g"),h="//# sourceURL="+(Ue.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(c,u).replace(Te,an),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var _=Ue.call(t,"variable")&&t.variable;_||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(V,""):f).replace(H,"$1").replace($,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=eu((function(){return Ce(u,h+"return "+f).apply(a,l)}));if(v.source=f,Xo(v))throw v;return v},jn.times=function(e,t){if((e=vs(e))<1||e>h)return[];var n=v,r=En(e,v);t=li(t),e-=v;for(var a=qt(r,t);++n<e;)t(n);return a},jn.toFinite=_s,jn.toInteger=vs,jn.toLength=ms,jn.toLower=function(e){return Es(e).toLowerCase()},jn.toNumber=gs,jn.toSafeInteger=function(e){return e?ur(vs(e),-9007199254740991,h):0===e?e:0},jn.toString=Es,jn.toUpper=function(e){return Es(e).toUpperCase()},jn.trim=function(e,t,n){if((e=Es(e))&&(n||t===a))return e.replace(oe,"");if(!e||!(t=ca(t)))return e;var r=pn(e),i=pn(t);return ba(r,Zt(r,i),en(r,i)+1).join("")},jn.trimEnd=function(e,t,n){if((e=Es(e))&&(n||t===a))return e.replace(ue,"");if(!e||!(t=ca(t)))return e;var r=pn(e);return ba(r,0,en(r,pn(t))+1).join("")},jn.trimStart=function(e,t,n){if((e=Es(e))&&(n||t===a))return e.replace(se,"");if(!e||!(t=ca(t)))return e;var r=pn(e);return ba(r,Zt(r,pn(t))).join("")},jn.truncate=function(e,t){var n=30,r="...";if(ns(t)){var i="separator"in t?t.separator:i;n="length"in t?vs(t.length):n,r="omission"in t?ca(t.omission):r}var o=(e=Es(e)).length;if(on(e)){var s=pn(e);o=s.length}if(n>=o)return e;var u=n-fn(r);if(u<1)return r;var l=s?ba(s,0,u).join(""):e.slice(0,u);if(i===a)return l+r;if(s&&(u+=l.length-u),ss(i)){if(e.slice(u).search(i)){var c,d=l;for(i.global||(i=Ie(i.source,Es(_e.exec(i))+"g")),i.lastIndex=0;c=i.exec(d);)var f=c.index;l=l.slice(0,f===a?u:f)}}else if(e.indexOf(ca(i),u)!=u){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},jn.unescape=function(e){return(e=Es(e))&&J.test(e)?e.replace(z,hn):e},jn.uniqueId=function(e){var t=++Fe;return Es(e)+t},jn.upperCase=Qs,jn.upperFirst=Xs,jn.each=Eo,jn.eachRight=So,jn.first=$i,lu(jn,(Tu={},Sr(jn,(function(e,t){Ue.call(jn.prototype,t)||(Tu[t]=e)})),Tu),{chain:!1}),jn.VERSION="4.17.20",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){jn[e].placeholder=jn})),Ot(["drop","take"],(function(e,t){Vn.prototype[e]=function(n){n=n===a?1:yn(vs(n),0);var r=this.__filtered__&&!t?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=En(n,r.__takeCount__):r.__views__.push({size:En(n,v),type:e+(r.__dir__<0?"Right":"")}),r},Vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Vn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:li(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Vn.prototype[e]=function(){return this[n](1).value()[0]}})),Ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Vn.prototype[e]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(iu)},Vn.prototype.find=function(e){return this.filter(e).head()},Vn.prototype.findLast=function(e){return this.reverse().find(e)},Vn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new Vn(this):this.map((function(n){return Pr(n,e,t)}))})),Vn.prototype.reject=function(e){return this.filter(Uo(li(e)))},Vn.prototype.slice=function(e,t){e=vs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Vn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=vs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Vn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vn.prototype.toArray=function(){return this.take(v)},Sr(Vn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=jn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(jn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Vn,l=s[0],c=u||Ho(t),d=function(e){var t=i.apply(jn,Nt([e],s));return r&&f?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,p=!!this.__actions__.length,h=o&&!f,_=u&&!p;if(!o&&c){t=_?t:new Vn(this);var v=e.apply(t,s);return v.__actions__.push({func:_o,args:[d],thisArg:a}),new Wn(v,f)}return h&&_?e.apply(this,s):(v=this.thru(d),h?r?v.value()[0]:v.value():v)})})),Ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply(Ho(a)?a:[],e)}return this[n]((function(n){return t.apply(Ho(n)?n:[],e)}))}})),Sr(Vn.prototype,(function(e,t){var n=jn[t];if(n){var r=n.name+"";Ue.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:t,func:n})}})),Rn[ja(a,2).name]=[{name:"wrapper",func:a}],Vn.prototype.clone=function(){var e=new Vn(this.__wrapped__);return e.__actions__=ka(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ka(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ka(this.__views__),e},Vn.prototype.reverse=function(){if(this.__filtered__){var e=new Vn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ho(e),r=t<0,a=n?e.length:0,i=function(e,t,n){var r=-1,a=n.length;for(;++r<a;){var i=n[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=En(t,e+o);break;case"takeRight":e=yn(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,s=i.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,d=c.length,f=0,p=En(u,this.__takeCount__);if(!n||!r&&a==u&&p==u)return _a(e,this.__actions__);var h=[];e:for(;u--&&f<p;){for(var _=-1,v=e[l+=t];++_<d;){var m=c[_],g=m.iteratee,y=m.type,E=g(v);if(2==y)v=E;else if(!E){if(1==y)continue e;break e}}h[f++]=v}return h},jn.prototype.at=vo,jn.prototype.chain=function(){return ho(this)},jn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===a&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var t,n=this;n instanceof Kn;){var r=Bi(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vn){var t=e;return this.__actions__.length&&(t=new Vn(this)),(t=t.reverse()).__actions__.push({func:_o,args:[to],thisArg:a}),new Wn(t,this.__chain__)}return this.thru(to)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return _a(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,nt&&(jn.prototype[nt]=function(){return this}),jn}();pt._=_n,(r=function(){return _n}.call(t,n,t,e))===a||(e.exports=r)}.call(this)},42053:()=>{
/*! modernizr 3.11.4 (Custom Build) | MIT *
 * https://modernizr.com/download/?-adownload-cssanimations-csstransitions-serviceworker-webp-domprefixes-hasevent-prefixed-prefixes-setclasses-testallprops-testprop !*/
!function(e,t,n,r){function a(e,t){return typeof e===t}function i(e){var t=S.className,n=y._config.classPrefix||"";if(b&&(t=t.baseVal),y._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}y._config.enableClasses&&(e.length>0&&(t+=" "+n+e.join(" "+n)),b?S.className.baseVal=t:S.className=t)}function o(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):b?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function s(e,t){return!!~(""+e).indexOf(t)}function u(e,t,r,a){var i,s,u,l,c="modernizr",d=o("div"),f=function(){var e=n.body;return e||((e=o(b?"svg":"body")).fake=!0),e}();if(parseInt(r,10))for(;r--;)(u=o("div")).id=a?a[r]:c+(r+1),d.appendChild(u);return(i=o("style")).type="text/css",i.id="s"+c,(f.fake?f:d).appendChild(i),f.appendChild(d),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(n.createTextNode(e)),d.id=c,f.fake&&(f.style.background="",f.style.overflow="hidden",l=S.style.overflow,S.style.overflow="hidden",S.appendChild(f)),s=t(d,e),f.fake?(f.parentNode.removeChild(f),S.style.overflow=l,S.offsetHeight):d.parentNode.removeChild(d),!!s}function l(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function c(e,n){var a=e.length;if("CSS"in t&&"supports"in t.CSS){for(;a--;)if(t.CSS.supports(l(e[a]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var i=[];a--;)i.push("("+l(e[a])+":"+n+")");return u("@supports ("+(i=i.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"===function(e,n,r){var a;if("getComputedStyle"in t){a=getComputedStyle.call(t,e,n);var i=t.console;null!==a?r&&(a=a.getPropertyValue(r)):i&&i[i.error?"error":"log"].call(i,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else a=!n&&e.currentStyle&&e.currentStyle[r];return a}(e,null,"position")}))}return r}function d(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function f(e,t,n,i){function u(){f&&(delete I.style,delete I.modElem)}if(i=!a(i,"undefined")&&i,!a(n,"undefined")){var l=c(e,n);if(!a(l,"undefined"))return l}for(var f,p,h,_,v,m=["modernizr","tspan","samp"];!I.style&&m.length;)f=!0,I.modElem=o(m.shift()),I.style=I.modElem.style;for(h=e.length,p=0;p<h;p++)if(_=e[p],v=I.style[_],s(_,"-")&&(_=d(_)),I.style[_]!==r){if(i||a(n,"undefined"))return u(),"pfx"!==t||_;try{I.style[_]=n}catch(e){}if(I.style[_]!==v)return u(),"pfx"!==t||_}return u(),!1}function p(e,t){return function(){return e.apply(t,arguments)}}function h(e,t,n,r,i){var o=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+O.join(o+" ")+o).split(" ");return a(t,"string")||a(t,"undefined")?f(s,t,r,i):function(e,t,n){var r;for(var i in e)if(e[i]in t)return!1===n?e[i]:a(r=t[e[i]],"function")?p(r,n||t):r;return!1}(s=(e+" "+w.join(o+" ")+o).split(" "),t,n)}function _(e,t,n){return h(e,r,r,t,n)}function v(e,t){if("object"==typeof e)for(var n in e)k(e,n)&&v(n,e[n]);else{var r=(e=e.toLowerCase()).split("."),a=y[r[0]];if(2===r.length&&(a=a[r[1]]),void 0!==a)return y;t="function"==typeof t?t():t,1===r.length?y[r[0]]=t:(!y[r[0]]||y[r[0]]instanceof Boolean||(y[r[0]]=new Boolean(y[r[0]])),y[r[0]][r[1]]=t),i([(t&&!1!==t?"":"no-")+r.join("-")]),y._trigger(e,t)}return y}var m=[],g={_version:"3.11.4",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){m.push({name:e,fn:t,options:n})},addAsyncTest:function(e){m.push({name:null,fn:e})}},y=function(){};y.prototype=g,y=new y;var E=[],S=n.documentElement,b="svg"===S.nodeName.toLowerCase(),T="Moz O ms Webkit",w=g._config.usePrefixes?T.toLowerCase().split(" "):[];g._domPrefixes=w;var A=g._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];g._prefixes=A;var C=function(){var e=!("onblur"in S);return function(t,n){var a;return!!t&&(n&&"string"!=typeof n||(n=o(n||"div")),!(a=(t="on"+t)in n)&&e&&(n.setAttribute||(n=o("div")),n.setAttribute(t,""),a="function"==typeof n[t],n[t]!==r&&(n[t]=r),n.removeAttribute(t)),a)}}();g.hasEvent=C;var O=g._config.usePrefixes?T.split(" "):[];g._cssomPrefixes=O;var M={elem:o("modernizr")};y._q.push((function(){delete M.elem}));var I={style:M.elem.style};y._q.unshift((function(){delete I.style})),g.testAllProps=h;var k,P=function(e){var n,a=A.length,i=t.CSSRule;if(void 0===i)return r;if(!e)return!1;if((n=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in i)return"@"+e;for(var o=0;o<a;o++){var s=A[o];if(s.toUpperCase()+"_"+n in i)return"@-"+s.toLowerCase()+"-"+e}return!1};g.atRule=P,g.prefixed=function(e,t,n){return 0===e.indexOf("@")?P(e):(-1!==e.indexOf("-")&&(e=d(e)),t?h(e,t,n):h(e,"pfx"))},g.testAllProps=_,g.testProp=function(e,t,n){return f([e],r,t,n)},function(){var e={}.hasOwnProperty;k=a(e,"undefined")||a(e.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),g._l={},g.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),y.hasOwnProperty(e)&&setTimeout((function(){y._trigger(e,y[e])}),0)},g._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout((function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)}),0),delete this._l[e]}},y._q.push((function(){g.addTest=v})),y.addAsyncTest((function(){function e(e,t,n){function r(t){var r=!(!t||"load"!==t.type)&&1===a.width;v(e,"webp"===e&&r?new Boolean(r):r),n&&n(t)}var a=new Image;a.onerror=r,a.onload=r,a.src=t}var t=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],n=t.shift();e(n.name,n.uri,(function(n){if(n&&"load"===n.type)for(var r=0;r<t.length;r++)e(t[r].name,t[r].uri)}))})),y.addTest("serviceworker","serviceWorker"in navigator),y.addTest("adownload",!t.externalHost&&"download"in o("a")),y.addTest("cssanimations",_("animationName","a",!0)),y.addTest("csstransitions",_("transition","all",!0)),function(){var e,t,n,r,i,o;for(var s in m)if(m.hasOwnProperty(s)){if(e=[],(t=m[s]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=a(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)1===(o=e[i].split(".")).length?y[o[0]]=r:(y[o[0]]&&(!y[o[0]]||y[o[0]]instanceof Boolean)||(y[o[0]]=new Boolean(y[o[0]])),y[o[0]][o[1]]=r),E.push((r?"":"no-")+o.join("-"))}}(),i(E),delete g.addTest,delete g.addAsyncTest;for(var R=0;R<y._q.length;R++)y._q[R]();e.Modernizr=y}(window,window,document)},30381:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t;function n(){return t.apply(null,arguments)}function r(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t;for(t in e)return!1;return!0}function s(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)d(t,n)&&(e[n]=t[n]);return d(t,"toString")&&(e.toString=t.toString),d(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Gn(e,t,n,r,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _(e){return null==e._pf&&(e._pf=h()),e._pf}var v=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function m(e){if(null==e._isValid){var t=_(e),n=v.call(t.parsedDateParts,(function(e){return null!=e})),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=p(NaN);return null!=e?f(_(t),e):_(t).userInvalidated=!0,t}var y=n.momentProperties=[];function E(e,t){var n,r,a;if(s(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),s(t._i)||(e._i=t._i),s(t._f)||(e._f=t._f),s(t._l)||(e._l=t._l),s(t._strict)||(e._strict=t._strict),s(t._tzm)||(e._tzm=t._tzm),s(t._isUTC)||(e._isUTC=t._isUTC),s(t._offset)||(e._offset=t._offset),s(t._pf)||(e._pf=_(t)),s(t._locale)||(e._locale=t._locale),y.length>0)for(n=0;n<y.length;n++)s(a=t[r=y[n]])||(e[r]=a);return e}var S=!1;function b(e){E(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===S&&(S=!0,n.updateOffset(this),S=!1)}function T(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function A(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function C(e,t,n){var r,a=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0;for(r=0;r<a;r++)(n&&e[r]!==t[r]||!n&&A(e[r])!==A(t[r]))&&o++;return o+i}function O(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function M(e,t){var r=!0;return f((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){for(var a,i=[],o=0;o<arguments.length;o++){if(a="","object"==typeof arguments[o]){for(var s in a+="\n["+o+"] ",arguments[0])a+=s+": "+arguments[0][s]+", ";a=a.slice(0,-2)}else a=arguments[o];i.push(a)}O(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)}),t)}var I={};function k(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),I[e]||(O(t),I[e]=!0)}function P(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e){var t,n;for(n in e)P(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(e,t){var n,r=f({},e);for(n in t)d(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)d(e,n)&&!d(t,n)&&i(e[n])&&(r[n]=f({},r[n]));return r}function N(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var L=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)d(e,t)&&n.push(t);return n},x={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function U(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return P(r)?r.call(t,n):r}var F={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])}var B="Invalid date";function j(){return this._invalidDate}var Y="%d",K=/\d{1,2}/;function W(e){return this._ordinal.replace("%d",e)}var V={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function H(e,t,n,r){var a=this._relativeTime[n];return P(a)?a(e,t,n,r):a.replace(/%d/i,e)}function $(e,t){var n=this._relativeTime[e>0?"future":"past"];return P(n)?n(t):n.replace(/%s/i,t)}var z={};function q(e,t){var n=e.toLowerCase();z[n]=z[n+"s"]=z[t]=e}function J(e){return"string"==typeof e?z[e]||z[e.toLowerCase()]:void 0}function Q(e){var t,n,r={};for(n in e)d(e,n)&&(t=J(n))&&(r[t]=e[n]);return r}var X={};function Z(e,t){X[e]=t}function ee(e){var t=[];for(var n in e)t.push({unit:n,priority:X[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}function te(e,t){return function(r){return null!=r?(re(this,e,r),n.updateOffset(this,t),this):ne(this,e)}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function re(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ae(e){return P(this[e=J(e)])?this[e]():this}function ie(e,t){if("object"==typeof e)for(var n=ee(e=Q(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(P(this[e=J(e)]))return this[e](t);return this}function oe(e,t,n){var r=""+Math.abs(e),a=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var se=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ue=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,le={},ce={};function de(e,t,n,r){var a=r;"string"==typeof r&&(a=function(){return this[r]()}),e&&(ce[e]=a),t&&(ce[t[0]]=function(){return oe(a.apply(this,arguments),t[1],t[2])}),n&&(ce[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function fe(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function pe(e){var t,n,r=e.match(se);for(t=0,n=r.length;t<n;t++)ce[r[t]]?r[t]=ce[r[t]]:r[t]=fe(r[t]);return function(t){var a,i="";for(a=0;a<n;a++)i+=P(r[a])?r[a].call(t,e):r[a];return i}}function he(e,t){return e.isValid()?(t=_e(t,e.localeData()),le[t]=le[t]||pe(t),le[t](e)):e.localeData().invalidDate()}function _e(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(ue.lastIndex=0;n>=0&&ue.test(e);)e=e.replace(ue,r),ue.lastIndex=0,n-=1;return e}var ve=/\d/,me=/\d\d/,ge=/\d{3}/,ye=/\d{4}/,Ee=/[+-]?\d{6}/,Se=/\d\d?/,be=/\d\d\d\d?/,Te=/\d\d\d\d\d\d?/,we=/\d{1,3}/,Ae=/\d{1,4}/,Ce=/[+-]?\d{1,6}/,Oe=/\d+/,Me=/[+-]?\d+/,Ie=/Z|[+-]\d\d:?\d\d/gi,ke=/Z|[+-]\d\d(?::?\d\d)?/gi,Pe=/[+-]?\d+(\.\d{1,3})?/,Re=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,De={};function Ne(e,t,n){De[e]=P(t)?t:function(e,r){return e&&n?n:t}}function Le(e,t){return d(De,e)?De[e](t._strict,t._locale):new RegExp(xe(e))}function xe(e){return Ue(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,a){return t||n||r||a})))}function Ue(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Fe={};function Ge(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),u(t)&&(r=function(e,n){n[t]=A(e)}),n=0;n<e.length;n++)Fe[e[n]]=r}function Be(e,t){Ge(e,(function(e,n,r,a){r._w=r._w||{},t(e,r._w,r,a)}))}function je(e,t,n){null!=t&&d(Fe,e)&&Fe[e](t,n._a,n,e)}var Ye=0,Ke=1,We=2,Ve=3,He=4,$e=5,ze=6,qe=7,Je=8,Qe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Xe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}de("M",["MM",2],"Mo",(function(){return this.month()+1})),de("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),de("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),q("month","M"),Z("month",8),Ne("M",Se),Ne("MM",Se,me),Ne("MMM",(function(e,t){return t.monthsShortRegex(e)})),Ne("MMMM",(function(e,t){return t.monthsRegex(e)})),Ge(["M","MM"],(function(e,t){t[Ke]=A(e)-1})),Ge(["MMM","MMMM"],(function(e,t,n,r){var a=n._locale.monthsParse(e,r,n._strict);null!=a?t[Ke]=a:_(n).invalidMonth=e}));var Ze=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,et="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function tt(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ze).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}var nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function rt(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ze.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function at(e,t,n){var r,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(a=Qe.call(this._shortMonthsParse,o))?a:null:-1!==(a=Qe.call(this._longMonthsParse,o))?a:null:"MMM"===t?-1!==(a=Qe.call(this._shortMonthsParse,o))||-1!==(a=Qe.call(this._longMonthsParse,o))?a:null:-1!==(a=Qe.call(this._longMonthsParse,o))||-1!==(a=Qe.call(this._shortMonthsParse,o))?a:null}function it(e,t,n){var r,a,i;if(this._monthsParseExact)return at.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ot(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=A(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Xe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function st(e){return null!=e?(ot(this,e),n.updateOffset(this,!0),this):ne(this,"Month")}function ut(){return Xe(this.year(),this.month())}var lt=Re;function ct(e){return this._monthsParseExact?(d(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=lt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}var dt=Re;function ft(e){return this._monthsParseExact?(d(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=dt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,n,r=[],a=[],i=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),a.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),a.sort(e),i.sort(e),t=0;t<12;t++)r[t]=Ue(r[t]),a[t]=Ue(a[t]);for(t=0;t<24;t++)i[t]=Ue(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ht(e){return _t(e)?366:365}function _t(e){return e%4==0&&e%100!=0||e%400==0}de("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),de(0,["YY",2],0,(function(){return this.year()%100})),de(0,["YYYY",4],0,"year"),de(0,["YYYYY",5],0,"year"),de(0,["YYYYYY",6,!0],0,"year"),q("year","y"),Z("year",1),Ne("Y",Me),Ne("YY",Se,me),Ne("YYYY",Ae,ye),Ne("YYYYY",Ce,Ee),Ne("YYYYYY",Ce,Ee),Ge(["YYYYY","YYYYYY"],Ye),Ge("YYYY",(function(e,t){t[Ye]=2===e.length?n.parseTwoDigitYear(e):A(e)})),Ge("YY",(function(e,t){t[Ye]=n.parseTwoDigitYear(e)})),Ge("Y",(function(e,t){t[Ye]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return A(e)+(A(e)>68?1900:2e3)};var vt=te("FullYear",!0);function mt(){return _t(this.year())}function gt(e,t,n,r,a,i,o){var s=new Date(e,t,n,r,a,i,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function yt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Et(e,t,n){var r=7+t-n;return-(7+yt(e,0,r).getUTCDay()-t)%7+r-1}function St(e,t,n,r,a){var i,o,s=1+7*(t-1)+(7+n-r)%7+Et(e,r,a);return s<=0?o=ht(i=e-1)+s:s>ht(e)?(i=e+1,o=s-ht(e)):(i=e,o=s),{year:i,dayOfYear:o}}function bt(e,t,n){var r,a,i=Et(e.year(),t,n),o=Math.floor((e.dayOfYear()-i-1)/7)+1;return o<1?r=o+Tt(a=e.year()-1,t,n):o>Tt(e.year(),t,n)?(r=o-Tt(e.year(),t,n),a=e.year()+1):(a=e.year(),r=o),{week:r,year:a}}function Tt(e,t,n){var r=Et(e,t,n),a=Et(e+1,t,n);return(ht(e)-r+a)/7}function wt(e){return bt(e,this._week.dow,this._week.doy).week}de("w",["ww",2],"wo","week"),de("W",["WW",2],"Wo","isoWeek"),q("week","w"),q("isoWeek","W"),Z("week",5),Z("isoWeek",5),Ne("w",Se),Ne("ww",Se,me),Ne("W",Se),Ne("WW",Se,me),Be(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=A(e)}));var At={dow:0,doy:6};function Ct(){return this._week.dow}function Ot(){return this._week.doy}function Mt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function It(e){var t=bt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function kt(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Pt(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}de("d",0,"do","day"),de("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),de("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),de("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),de("e",0,0,"weekday"),de("E",0,0,"isoWeekday"),q("day","d"),q("weekday","e"),q("isoWeekday","E"),Z("day",11),Z("weekday",11),Z("isoWeekday",11),Ne("d",Se),Ne("e",Se),Ne("E",Se),Ne("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Ne("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Ne("dddd",(function(e,t){return t.weekdaysRegex(e)})),Be(["dd","ddd","dddd"],(function(e,t,n,r){var a=n._locale.weekdaysParse(e,r,n._strict);null!=a?t.d=a:_(n).invalidWeekday=e})),Be(["d","e","E"],(function(e,t,n,r){t[r]=A(e)}));var Rt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Dt(e,t){return e?a(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:a(this._weekdays)?this._weekdays:this._weekdays.standalone}var Nt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Lt(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var xt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ut(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ft(e,t,n){var r,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(a=Qe.call(this._weekdaysParse,o))?a:null:"ddd"===t?-1!==(a=Qe.call(this._shortWeekdaysParse,o))?a:null:-1!==(a=Qe.call(this._minWeekdaysParse,o))?a:null:"dddd"===t?-1!==(a=Qe.call(this._weekdaysParse,o))||-1!==(a=Qe.call(this._shortWeekdaysParse,o))||-1!==(a=Qe.call(this._minWeekdaysParse,o))?a:null:"ddd"===t?-1!==(a=Qe.call(this._shortWeekdaysParse,o))||-1!==(a=Qe.call(this._weekdaysParse,o))||-1!==(a=Qe.call(this._minWeekdaysParse,o))?a:null:-1!==(a=Qe.call(this._minWeekdaysParse,o))||-1!==(a=Qe.call(this._weekdaysParse,o))||-1!==(a=Qe.call(this._shortWeekdaysParse,o))?a:null}function Gt(e,t,n){var r,a,i;if(this._weekdaysParseExact)return Ft.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Bt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=kt(e,this.localeData()),this.add(e-t,"d")):t}function jt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Yt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Pt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}var Kt=Re;function Wt(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||qt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=Kt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}var Vt=Re;function Ht(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||qt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Vt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}var $t=Re;function zt(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||qt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$t),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qt(){function e(e,t){return t.length-e.length}var t,n,r,a,i,o=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=this.weekdaysMin(n,""),a=this.weekdaysShort(n,""),i=this.weekdays(n,""),o.push(r),s.push(a),u.push(i),l.push(r),l.push(a),l.push(i);for(o.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=Ue(s[t]),u[t]=Ue(u[t]),l[t]=Ue(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function Xt(e,t){de(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Zt(e,t){return t._meridiemParse}function en(e){return"p"===(e+"").toLowerCase().charAt(0)}de("H",["HH",2],0,"hour"),de("h",["hh",2],0,Jt),de("k",["kk",2],0,Qt),de("hmm",0,0,(function(){return""+Jt.apply(this)+oe(this.minutes(),2)})),de("hmmss",0,0,(function(){return""+Jt.apply(this)+oe(this.minutes(),2)+oe(this.seconds(),2)})),de("Hmm",0,0,(function(){return""+this.hours()+oe(this.minutes(),2)})),de("Hmmss",0,0,(function(){return""+this.hours()+oe(this.minutes(),2)+oe(this.seconds(),2)})),Xt("a",!0),Xt("A",!1),q("hour","h"),Z("hour",13),Ne("a",Zt),Ne("A",Zt),Ne("H",Se),Ne("h",Se),Ne("k",Se),Ne("HH",Se,me),Ne("hh",Se,me),Ne("kk",Se,me),Ne("hmm",be),Ne("hmmss",Te),Ne("Hmm",be),Ne("Hmmss",Te),Ge(["H","HH"],Ve),Ge(["k","kk"],(function(e,t,n){var r=A(e);t[Ve]=24===r?0:r})),Ge(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ge(["h","hh"],(function(e,t,n){t[Ve]=A(e),_(n).bigHour=!0})),Ge("hmm",(function(e,t,n){var r=e.length-2;t[Ve]=A(e.substr(0,r)),t[He]=A(e.substr(r)),_(n).bigHour=!0})),Ge("hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[Ve]=A(e.substr(0,r)),t[He]=A(e.substr(r,2)),t[$e]=A(e.substr(a)),_(n).bigHour=!0})),Ge("Hmm",(function(e,t,n){var r=e.length-2;t[Ve]=A(e.substr(0,r)),t[He]=A(e.substr(r))})),Ge("Hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[Ve]=A(e.substr(0,r)),t[He]=A(e.substr(r,2)),t[$e]=A(e.substr(a))}));var tn=/[ap]\.?m?\.?/i;function nn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var rn,an=te("Hours",!0),on={calendar:x,longDateFormat:F,invalidDate:B,ordinal:Y,dayOfMonthOrdinalParse:K,relativeTime:V,months:et,monthsShort:nt,week:At,weekdays:Rt,weekdaysMin:xt,weekdaysShort:Nt,meridiemParse:tn},sn={},un={};function ln(e){return e?e.toLowerCase().replace("_","-"):e}function cn(e){for(var t,n,r,a,i=0;i<e.length;){for(t=(a=ln(e[i]).split("-")).length,n=(n=ln(e[i+1]))?n.split("-"):null;t>0;){if(r=dn(a.slice(0,t).join("-")))return r;if(n&&n.length>=t&&C(a,n,!0)>=t-1)break;t--}i++}return null}function dn(t){var n=null;if(!sn[t]&&e&&e.exports)try{n=rn._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),fn(n)}catch(e){}return sn[t]}function fn(e,t){var n;return e&&(n=s(t)?_n(e):pn(e,t))&&(rn=n),rn._abbr}function pn(e,t){if(null!==t){var n=on;if(t.abbr=e,null!=sn[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=sn[e]._config;else if(null!=t.parentLocale){if(null==sn[t.parentLocale])return un[t.parentLocale]||(un[t.parentLocale]=[]),un[t.parentLocale].push({name:e,config:t}),null;n=sn[t.parentLocale]._config}return sn[e]=new N(D(n,t)),un[e]&&un[e].forEach((function(e){pn(e.name,e.config)})),fn(e),sn[e]}return delete sn[e],null}function hn(e,t){if(null!=t){var n,r=on;null!=sn[e]&&(r=sn[e]._config),(n=new N(t=D(r,t))).parentLocale=sn[e],sn[e]=n,fn(e)}else null!=sn[e]&&(null!=sn[e].parentLocale?sn[e]=sn[e].parentLocale:null!=sn[e]&&delete sn[e]);return sn[e]}function _n(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return rn;if(!a(e)){if(t=dn(e))return t;e=[e]}return cn(e)}function vn(){return L(sn)}function mn(e){var t,n=e._a;return n&&-2===_(e).overflow&&(t=n[Ke]<0||n[Ke]>11?Ke:n[We]<1||n[We]>Xe(n[Ye],n[Ke])?We:n[Ve]<0||n[Ve]>24||24===n[Ve]&&(0!==n[He]||0!==n[$e]||0!==n[ze])?Ve:n[He]<0||n[He]>59?He:n[$e]<0||n[$e]>59?$e:n[ze]<0||n[ze]>999?ze:-1,_(e)._overflowDayOfYear&&(t<Ye||t>We)&&(t=We),_(e)._overflowWeeks&&-1===t&&(t=qe),_(e)._overflowWeekday&&-1===t&&(t=Je),_(e).overflow=t),e}var gn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,En=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],bn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Tn=/^\/?Date\((\-?\d+)/i;function wn(e){var t,n,r,a,i,o,s=e._i,u=gn.exec(s)||yn.exec(s);if(u){for(_(e).iso=!0,t=0,n=Sn.length;t<n;t++)if(Sn[t][1].exec(u[1])){a=Sn[t][0],r=!1!==Sn[t][2];break}if(null==a)return void(e._isValid=!1);if(u[3]){for(t=0,n=bn.length;t<n;t++)if(bn[t][1].exec(u[3])){i=(u[2]||" ")+bn[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(u[4]){if(!En.exec(u[4]))return void(e._isValid=!1);o="Z"}e._f=a+(i||"")+(o||""),Rn(e)}else e._isValid=!1}var An=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function Cn(e){var t,n,r,a,i,o,s,u,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},c="YXWVUTSRQPONZABCDEFGHIKLM";if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=An.exec(t)){if(r=n[1]?"ddd"+(5===n[1].length?", ":" "):"",a="D MMM "+(n[2].length>10?"YYYY ":"YY "),i="HH:mm"+(n[4]?":ss":""),n[1]){var d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(n[2]).getDay()];if(n[1].substr(0,3)!==d)return _(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:s=0===u?" +0000":((u=c.indexOf(n[5][1].toUpperCase())-12)<0?" -":" +")+(""+u).replace(/^-?/,"0").match(/..$/)[0]+"00";break;case 4:s=l[n[5]];break;default:s=l[" GMT"]}n[5]=s,e._i=n.splice(1).join(""),o=" ZZ",e._f=r+a+i+o,Rn(e),_(e).rfc2822=!0}else e._isValid=!1}function On(e){var t=Tn.exec(e._i);null===t?(wn(e),!1===e._isValid&&(delete e._isValid,Cn(e),!1===e._isValid&&(delete e._isValid,n.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Mn(e,t,n){return null!=e?e:null!=t?t:n}function In(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function kn(e){var t,n,r,a,i=[];if(!e._d){for(r=In(e),e._w&&null==e._a[We]&&null==e._a[Ke]&&Pn(e),null!=e._dayOfYear&&(a=Mn(e._a[Ye],r[Ye]),(e._dayOfYear>ht(a)||0===e._dayOfYear)&&(_(e)._overflowDayOfYear=!0),n=yt(a,0,e._dayOfYear),e._a[Ke]=n.getUTCMonth(),e._a[We]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ve]&&0===e._a[He]&&0===e._a[$e]&&0===e._a[ze]&&(e._nextDay=!0,e._a[Ve]=0),e._d=(e._useUTC?yt:gt).apply(null,i),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ve]=24)}}function Pn(e){var t,n,r,a,i,o,s,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)i=1,o=4,n=Mn(t.GG,e._a[Ye],bt(Bn(),1,4).year),r=Mn(t.W,1),((a=Mn(t.E,1))<1||a>7)&&(u=!0);else{i=e._locale._week.dow,o=e._locale._week.doy;var l=bt(Bn(),i,o);n=Mn(t.gg,e._a[Ye],l.year),r=Mn(t.w,l.week),null!=t.d?((a=t.d)<0||a>6)&&(u=!0):null!=t.e?(a=t.e+i,(t.e<0||t.e>6)&&(u=!0)):a=i}r<1||r>Tt(n,i,o)?_(e)._overflowWeeks=!0:null!=u?_(e)._overflowWeekday=!0:(s=St(n,r,a,i,o),e._a[Ye]=s.year,e._dayOfYear=s.dayOfYear)}function Rn(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],_(e).empty=!0;var t,r,a,i,o,s=""+e._i,u=s.length,l=0;for(a=_e(e._f,e._locale).match(se)||[],t=0;t<a.length;t++)i=a[t],(r=(s.match(Le(i,e))||[])[0])&&((o=s.substr(0,s.indexOf(r))).length>0&&_(e).unusedInput.push(o),s=s.slice(s.indexOf(r)+r.length),l+=r.length),ce[i]?(r?_(e).empty=!1:_(e).unusedTokens.push(i),je(i,r,e)):e._strict&&!r&&_(e).unusedTokens.push(i);_(e).charsLeftOver=u-l,s.length>0&&_(e).unusedInput.push(s),e._a[Ve]<=12&&!0===_(e).bigHour&&e._a[Ve]>0&&(_(e).bigHour=void 0),_(e).parsedDateParts=e._a.slice(0),_(e).meridiem=e._meridiem,e._a[Ve]=Dn(e._locale,e._a[Ve],e._meridiem),kn(e),mn(e)}else Cn(e);else wn(e)}function Dn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Nn(e){var t,n,r,a,i;if(0===e._f.length)return _(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<e._f.length;a++)i=0,t=E({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],Rn(t),m(t)&&(i+=_(t).charsLeftOver,i+=10*_(t).unusedTokens.length,_(t).score=i,(null==r||i<r)&&(r=i,n=t));f(e,n||t)}function Ln(e){if(!e._d){var t=Q(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),kn(e)}}function xn(e){var t=new b(mn(Un(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Un(e){var t=e._i,n=e._f;return e._locale=e._locale||_n(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),T(t)?new b(mn(t)):(l(t)?e._d=t:a(n)?Nn(e):n?Rn(e):Fn(e),m(e)||(e._d=null),e))}function Fn(e){var t=e._i;s(t)?e._d=new Date(n.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?On(e):a(t)?(e._a=c(t.slice(0),(function(e){return parseInt(e,10)})),kn(e)):i(t)?Ln(e):u(t)?e._d=new Date(t):n.createFromInputFallback(e)}function Gn(e,t,n,r,s){var u={};return!0!==n&&!1!==n||(r=n,n=void 0),(i(e)&&o(e)||a(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=e,u._f=t,u._strict=r,xn(u)}function Bn(e,t,n,r){return Gn(e,t,n,r,!1)}n.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var jn=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Bn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),Yn=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Bn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Kn(e,t){var n,r;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Bn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Wn(){return Kn("isBefore",[].slice.call(arguments,0))}function Vn(){return Kn("isAfter",[].slice.call(arguments,0))}var Hn=function(){return Date.now?Date.now():+new Date},$n=["year","quarter","month","week","day","hour","minute","second","millisecond"];function zn(e){for(var t in e)if(-1===$n.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<$n.length;++r)if(e[$n[r]]){if(n)return!1;parseFloat(e[$n[r]])!==A(e[$n[r]])&&(n=!0)}return!0}function qn(){return this._isValid}function Jn(){return gr(NaN)}function Qn(e){var t=Q(e),n=t.year||0,r=t.quarter||0,a=t.month||0,i=t.week||0,o=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=zn(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+o+7*i,this._months=+a+3*r+12*n,this._data={},this._locale=_n(),this._bubble()}function Xn(e){return e instanceof Qn}function Zn(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function er(e,t){de(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+oe(~~(e/60),2)+t+oe(~~e%60,2)}))}er("Z",":"),er("ZZ",""),Ne("Z",ke),Ne("ZZ",ke),Ge(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=nr(ke,e)}));var tr=/([\+\-]|\d\d)/gi;function nr(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(tr)||["-",0,0],a=60*r[1]+A(r[2]);return 0===a?0:"+"===r[0]?a:-a}function rr(e,t){var r,a;return t._isUTC?(r=t.clone(),a=(T(e)||l(e)?e.valueOf():Bn(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+a),n.updateOffset(r,!1),r):Bn(e).local()}function ar(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function ir(e,t,r){var a,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=nr(ke,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(a=ar(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),i!==e&&(!t||this._changeInProgress?Tr(this,gr(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:ar(this)}function or(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function sr(e){return this.utcOffset(0,e)}function ur(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ar(this),"m")),this}function lr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=nr(Ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function cr(e){return!!this.isValid()&&(e=e?Bn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function dr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function fr(){if(!s(this._isDSTShifted))return this._isDSTShifted;var e={};if(E(e,this),(e=Un(e))._a){var t=e._isUTC?p(e._a):Bn(e._a);this._isDSTShifted=this.isValid()&&C(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function pr(){return!!this.isValid()&&!this._isUTC}function hr(){return!!this.isValid()&&this._isUTC}function _r(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var vr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,mr=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function gr(e,t){var n,r,a,i=e,o=null;return Xn(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:u(e)?(i={},t?i[t]=e:i.milliseconds=e):(o=vr.exec(e))?(n="-"===o[1]?-1:1,i={y:0,d:A(o[We])*n,h:A(o[Ve])*n,m:A(o[He])*n,s:A(o[$e])*n,ms:A(Zn(1e3*o[ze]))*n}):(o=mr.exec(e))?(n="-"===o[1]?-1:1,i={y:yr(o[2],n),M:yr(o[3],n),w:yr(o[4],n),d:yr(o[5],n),h:yr(o[6],n),m:yr(o[7],n),s:yr(o[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(a=Sr(Bn(i.from),Bn(i.to)),(i={}).ms=a.milliseconds,i.M=a.months),r=new Qn(i),Xn(e)&&d(e,"_locale")&&(r._locale=e._locale),r}function yr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Er(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Sr(e,t){var n;return e.isValid()&&t.isValid()?(t=rr(t,e),e.isBefore(t)?n=Er(e,t):((n=Er(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function br(e,t){return function(n,r){var a;return null===r||isNaN(+r)||(k(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=r,r=a),Tr(this,gr(n="string"==typeof n?+n:n,r),e),this}}function Tr(e,t,r,a){var i=t._milliseconds,o=Zn(t._days),s=Zn(t._months);e.isValid()&&(a=null==a||a,i&&e._d.setTime(e._d.valueOf()+i*r),o&&re(e,"Date",ne(e,"Date")+o*r),s&&ot(e,ne(e,"Month")+s*r),a&&n.updateOffset(e,o||s))}gr.fn=Qn.prototype,gr.invalid=Jn;var wr=br(1,"add"),Ar=br(-1,"subtract");function Cr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Or(e,t){var r=e||Bn(),a=rr(r,this).startOf("day"),i=n.calendarFormat(this,a)||"sameElse",o=t&&(P(t[i])?t[i].call(this,r):t[i]);return this.format(o||this.localeData().calendar(i,this,Bn(r)))}function Mr(){return new b(this)}function Ir(e,t){var n=T(e)?e:Bn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=J(s(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function kr(e,t){var n=T(e)?e:Bn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=J(s(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Pr(e,t,n,r){return("("===(r=r||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Rr(e,t){var n,r=T(e)?e:Bn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=J(t||"millisecond"))?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Dr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Nr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Lr(e,t,n){var r,a,i,o;return this.isValid()&&(r=rr(e,this)).isValid()?(a=6e4*(r.utcOffset()-this.utcOffset()),"year"===(t=J(t))||"month"===t||"quarter"===t?(o=xr(this,r),"quarter"===t?o/=3:"year"===t&&(o/=12)):(i=this-r,o="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?o:w(o)):NaN}function xr(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Ur(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Fr(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?he(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(Date.prototype.toISOString)?this.toDate().toISOString():he(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Gr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]';return this.format(n+r+a+i)}function Br(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=he(this,e);return this.localeData().postformat(t)}function jr(e,t){return this.isValid()&&(T(e)&&e.isValid()||Bn(e).isValid())?gr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Yr(e){return this.from(Bn(),e)}function Kr(e,t){return this.isValid()&&(T(e)&&e.isValid()||Bn(e).isValid())?gr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Wr(e){return this.to(Bn(),e)}function Vr(e){var t;return void 0===e?this._locale._abbr:(null!=(t=_n(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Hr=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function $r(){return this._locale}function zr(e){switch(e=J(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function qr(e){return void 0===(e=J(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function Jr(){return this._d.valueOf()-6e4*(this._offset||0)}function Qr(){return Math.floor(this.valueOf()/1e3)}function Xr(){return new Date(this.valueOf())}function Zr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ea(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ta(){return this.isValid()?this.toISOString():null}function na(){return m(this)}function ra(){return f({},_(this))}function aa(){return _(this).overflow}function ia(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function oa(e,t){de(0,[e,e.length],0,t)}function sa(e){return da.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ua(e){return da.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function la(){return Tt(this.year(),1,4)}function ca(){var e=this.localeData()._week;return Tt(this.year(),e.dow,e.doy)}function da(e,t,n,r,a){var i;return null==e?bt(this,r,a).year:(t>(i=Tt(e,r,a))&&(t=i),fa.call(this,e,t,n,r,a))}function fa(e,t,n,r,a){var i=St(e,t,n,r,a),o=yt(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function pa(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}de(0,["gg",2],0,(function(){return this.weekYear()%100})),de(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),oa("gggg","weekYear"),oa("ggggg","weekYear"),oa("GGGG","isoWeekYear"),oa("GGGGG","isoWeekYear"),q("weekYear","gg"),q("isoWeekYear","GG"),Z("weekYear",1),Z("isoWeekYear",1),Ne("G",Me),Ne("g",Me),Ne("GG",Se,me),Ne("gg",Se,me),Ne("GGGG",Ae,ye),Ne("gggg",Ae,ye),Ne("GGGGG",Ce,Ee),Ne("ggggg",Ce,Ee),Be(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=A(e)})),Be(["gg","GG"],(function(e,t,r,a){t[a]=n.parseTwoDigitYear(e)})),de("Q",0,"Qo","quarter"),q("quarter","Q"),Z("quarter",7),Ne("Q",ve),Ge("Q",(function(e,t){t[Ke]=3*(A(e)-1)})),de("D",["DD",2],"Do","date"),q("date","D"),Z("date",9),Ne("D",Se),Ne("DD",Se,me),Ne("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ge(["D","DD"],We),Ge("Do",(function(e,t){t[We]=A(e.match(Se)[0],10)}));var ha=te("Date",!0);function _a(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}de("DDD",["DDDD",3],"DDDo","dayOfYear"),q("dayOfYear","DDD"),Z("dayOfYear",4),Ne("DDD",we),Ne("DDDD",ge),Ge(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=A(e)})),de("m",["mm",2],0,"minute"),q("minute","m"),Z("minute",14),Ne("m",Se),Ne("mm",Se,me),Ge(["m","mm"],He);var va=te("Minutes",!1);de("s",["ss",2],0,"second"),q("second","s"),Z("second",15),Ne("s",Se),Ne("ss",Se,me),Ge(["s","ss"],$e);var ma,ga=te("Seconds",!1);for(de("S",0,0,(function(){return~~(this.millisecond()/100)})),de(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),de(0,["SSS",3],0,"millisecond"),de(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),de(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),de(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),de(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),de(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),de(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),q("millisecond","ms"),Z("millisecond",16),Ne("S",we,ve),Ne("SS",we,me),Ne("SSS",we,ge),ma="SSSS";ma.length<=9;ma+="S")Ne(ma,Oe);function ya(e,t){t[ze]=A(1e3*("0."+e))}for(ma="S";ma.length<=9;ma+="S")Ge(ma,ya);var Ea=te("Milliseconds",!1);function Sa(){return this._isUTC?"UTC":""}function ba(){return this._isUTC?"Coordinated Universal Time":""}de("z",0,0,"zoneAbbr"),de("zz",0,0,"zoneName");var Ta=b.prototype;function wa(e){return Bn(1e3*e)}function Aa(){return Bn.apply(null,arguments).parseZone()}function Ca(e){return e}Ta.add=wr,Ta.calendar=Or,Ta.clone=Mr,Ta.diff=Lr,Ta.endOf=qr,Ta.format=Br,Ta.from=jr,Ta.fromNow=Yr,Ta.to=Kr,Ta.toNow=Wr,Ta.get=ae,Ta.invalidAt=aa,Ta.isAfter=Ir,Ta.isBefore=kr,Ta.isBetween=Pr,Ta.isSame=Rr,Ta.isSameOrAfter=Dr,Ta.isSameOrBefore=Nr,Ta.isValid=na,Ta.lang=Hr,Ta.locale=Vr,Ta.localeData=$r,Ta.max=Yn,Ta.min=jn,Ta.parsingFlags=ra,Ta.set=ie,Ta.startOf=zr,Ta.subtract=Ar,Ta.toArray=Zr,Ta.toObject=ea,Ta.toDate=Xr,Ta.toISOString=Fr,Ta.inspect=Gr,Ta.toJSON=ta,Ta.toString=Ur,Ta.unix=Qr,Ta.valueOf=Jr,Ta.creationData=ia,Ta.year=vt,Ta.isLeapYear=mt,Ta.weekYear=sa,Ta.isoWeekYear=ua,Ta.quarter=Ta.quarters=pa,Ta.month=st,Ta.daysInMonth=ut,Ta.week=Ta.weeks=Mt,Ta.isoWeek=Ta.isoWeeks=It,Ta.weeksInYear=ca,Ta.isoWeeksInYear=la,Ta.date=ha,Ta.day=Ta.days=Bt,Ta.weekday=jt,Ta.isoWeekday=Yt,Ta.dayOfYear=_a,Ta.hour=Ta.hours=an,Ta.minute=Ta.minutes=va,Ta.second=Ta.seconds=ga,Ta.millisecond=Ta.milliseconds=Ea,Ta.utcOffset=ir,Ta.utc=sr,Ta.local=ur,Ta.parseZone=lr,Ta.hasAlignedHourOffset=cr,Ta.isDST=dr,Ta.isLocal=pr,Ta.isUtcOffset=hr,Ta.isUtc=_r,Ta.isUTC=_r,Ta.zoneAbbr=Sa,Ta.zoneName=ba,Ta.dates=M("dates accessor is deprecated. Use date instead.",ha),Ta.months=M("months accessor is deprecated. Use month instead",st),Ta.years=M("years accessor is deprecated. Use year instead",vt),Ta.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",or),Ta.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",fr);var Oa=N.prototype;function Ma(e,t,n,r){var a=_n(),i=p().set(r,t);return a[n](i,e)}function Ia(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return Ma(e,t,n,"month");var r,a=[];for(r=0;r<12;r++)a[r]=Ma(e,r,n,"month");return a}function ka(e,t,n,r){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var a,i=_n(),o=e?i._week.dow:0;if(null!=n)return Ma(t,(n+o)%7,r,"day");var s=[];for(a=0;a<7;a++)s[a]=Ma(t,(a+o)%7,r,"day");return s}function Pa(e,t){return Ia(e,t,"months")}function Ra(e,t){return Ia(e,t,"monthsShort")}function Da(e,t,n){return ka(e,t,n,"weekdays")}function Na(e,t,n){return ka(e,t,n,"weekdaysShort")}function La(e,t,n){return ka(e,t,n,"weekdaysMin")}Oa.calendar=U,Oa.longDateFormat=G,Oa.invalidDate=j,Oa.ordinal=W,Oa.preparse=Ca,Oa.postformat=Ca,Oa.relativeTime=H,Oa.pastFuture=$,Oa.set=R,Oa.months=tt,Oa.monthsShort=rt,Oa.monthsParse=it,Oa.monthsRegex=ft,Oa.monthsShortRegex=ct,Oa.week=wt,Oa.firstDayOfYear=Ot,Oa.firstDayOfWeek=Ct,Oa.weekdays=Dt,Oa.weekdaysMin=Ut,Oa.weekdaysShort=Lt,Oa.weekdaysParse=Gt,Oa.weekdaysRegex=Wt,Oa.weekdaysShortRegex=Ht,Oa.weekdaysMinRegex=zt,Oa.isPM=en,Oa.meridiem=nn,fn("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===A(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=M("moment.lang is deprecated. Use moment.locale instead.",fn),n.langData=M("moment.langData is deprecated. Use moment.localeData instead.",_n);var xa=Math.abs;function Ua(){var e=this._data;return this._milliseconds=xa(this._milliseconds),this._days=xa(this._days),this._months=xa(this._months),e.milliseconds=xa(e.milliseconds),e.seconds=xa(e.seconds),e.minutes=xa(e.minutes),e.hours=xa(e.hours),e.months=xa(e.months),e.years=xa(e.years),this}function Fa(e,t,n,r){var a=gr(t,n);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function Ga(e,t){return Fa(this,e,t,1)}function Ba(e,t){return Fa(this,e,t,-1)}function ja(e){return e<0?Math.floor(e):Math.ceil(e)}function Ya(){var e,t,n,r,a,i=this._milliseconds,o=this._days,s=this._months,u=this._data;return i>=0&&o>=0&&s>=0||i<=0&&o<=0&&s<=0||(i+=864e5*ja(Wa(s)+o),o=0,s=0),u.milliseconds=i%1e3,e=w(i/1e3),u.seconds=e%60,t=w(e/60),u.minutes=t%60,n=w(t/60),u.hours=n%24,o+=w(n/24),s+=a=w(Ka(o)),o-=ja(Wa(a)),r=w(s/12),s%=12,u.days=o,u.months=s,u.years=r,this}function Ka(e){return 4800*e/146097}function Wa(e){return 146097*e/4800}function Va(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=J(e))||"year"===e)return t=this._days+r/864e5,n=this._months+Ka(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Wa(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Ha(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12):NaN}function $a(e){return function(){return this.as(e)}}var za=$a("ms"),qa=$a("s"),Ja=$a("m"),Qa=$a("h"),Xa=$a("d"),Za=$a("w"),ei=$a("M"),ti=$a("y");function ni(e){return e=J(e),this.isValid()?this[e+"s"]():NaN}function ri(e){return function(){return this.isValid()?this._data[e]:NaN}}var ai=ri("milliseconds"),ii=ri("seconds"),oi=ri("minutes"),si=ri("hours"),ui=ri("days"),li=ri("months"),ci=ri("years");function di(){return w(this.days()/7)}var fi=Math.round,pi={ss:44,s:45,m:45,h:22,d:26,M:11};function hi(e,t,n,r,a){return a.relativeTime(t||1,!!n,e,r)}function _i(e,t,n){var r=gr(e).abs(),a=fi(r.as("s")),i=fi(r.as("m")),o=fi(r.as("h")),s=fi(r.as("d")),u=fi(r.as("M")),l=fi(r.as("y")),c=a<=pi.ss&&["s",a]||a<pi.s&&["ss",a]||i<=1&&["m"]||i<pi.m&&["mm",i]||o<=1&&["h"]||o<pi.h&&["hh",o]||s<=1&&["d"]||s<pi.d&&["dd",s]||u<=1&&["M"]||u<pi.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,hi.apply(null,c)}function vi(e){return void 0===e?fi:"function"==typeof e&&(fi=e,!0)}function mi(e,t){return void 0!==pi[e]&&(void 0===t?pi[e]:(pi[e]=t,"s"===e&&(pi.ss=t-1),!0))}function gi(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=_i(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}var yi=Math.abs;function Ei(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=yi(this._milliseconds)/1e3,r=yi(this._days),a=yi(this._months);e=w(n/60),t=w(e/60),n%=60,e%=60;var i=w(a/12),o=a%=12,s=r,u=t,l=e,c=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(i?i+"Y":"")+(o?o+"M":"")+(s?s+"D":"")+(u||l||c?"T":"")+(u?u+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var Si=Qn.prototype;return Si.isValid=qn,Si.abs=Ua,Si.add=Ga,Si.subtract=Ba,Si.as=Va,Si.asMilliseconds=za,Si.asSeconds=qa,Si.asMinutes=Ja,Si.asHours=Qa,Si.asDays=Xa,Si.asWeeks=Za,Si.asMonths=ei,Si.asYears=ti,Si.valueOf=Ha,Si._bubble=Ya,Si.get=ni,Si.milliseconds=ai,Si.seconds=ii,Si.minutes=oi,Si.hours=si,Si.days=ui,Si.weeks=di,Si.months=li,Si.years=ci,Si.humanize=gi,Si.toISOString=Ei,Si.toString=Ei,Si.toJSON=Ei,Si.locale=Vr,Si.localeData=$r,Si.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ei),Si.lang=Hr,de("X",0,0,"unix"),de("x",0,0,"valueOf"),Ne("x",Me),Ne("X",Pe),Ge("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),Ge("x",(function(e,t,n){n._d=new Date(A(e))})),n.version="2.18.1",r(Bn),n.fn=Ta,n.min=Wn,n.max=Vn,n.now=Hn,n.utc=p,n.unix=wa,n.months=Pa,n.isDate=l,n.locale=fn,n.invalid=g,n.duration=gr,n.isMoment=T,n.weekdays=Da,n.parseZone=Aa,n.localeData=_n,n.isDuration=Xn,n.monthsShort=Ra,n.weekdaysMin=La,n.defineLocale=pn,n.updateLocale=hn,n.locales=vn,n.weekdaysShort=Na,n.normalizeUnits=J,n.relativeTimeRounding=vi,n.relativeTimeThreshold=mi,n.calendarFormat=Cr,n.prototype=Ta,n}()},27418:e=>{"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(u[c]=o[c]);if(t){s=t(o);for(var d=0;d<s.length;d++)r.call(o,s[d])&&(u[s[d]]=o[s[d]])}}return u}},92703:(e,t,n)=>{"use strict";var r=n(50414);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},45697:(e,t,n)=>{e.exports=n(92703)()},50414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},74971:function(e,t,n){var r;/*! https://mths.be/punycode v1.3.2 by @mathias */e=n.nmd(e),function(a){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof global&&global;i.global!==i&&i.window!==i&&i.self;var o,s=2147483647,u=36,l=/^xn--/,c=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function _(e){throw RangeError(f[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(d,".")).split("."),t).join(".")}function g(e){for(var t,n,r=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function y(e){return v(e,(function(e){var t="";return e>65535&&(t+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=h(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=u)e=p(e/35);return p(r+36*e/(e+38))}function b(e){var t,n,r,a,i,o,l,c,d,f,h,v=[],m=e.length,g=0,E=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&_("not-basic"),v.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<m;){for(i=g,o=1,l=u;a>=m&&_("invalid-input"),((c=(h=e.charCodeAt(a++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:u)>=u||c>p((s-g)/o))&&_("overflow"),g+=c*o,!(c<(d=l<=b?1:l>=b+26?26:l-b));l+=u)o>p(s/(f=u-d))&&_("overflow"),o*=f;b=S(g-i,t=v.length+1,0==i),p(g/t)>s-E&&_("overflow"),E+=p(g/t),g%=t,v.splice(g++,0,E)}return y(v)}function T(e){var t,n,r,a,i,o,l,c,d,f,v,m,y,b,T,w=[];for(m=(e=g(e)).length,t=128,n=0,i=72,o=0;o<m;++o)(v=e[o])<128&&w.push(h(v));for(r=a=w.length,a&&w.push("-");r<m;){for(l=s,o=0;o<m;++o)(v=e[o])>=t&&v<l&&(l=v);for(l-t>p((s-n)/(y=r+1))&&_("overflow"),n+=(l-t)*y,t=l,o=0;o<m;++o)if((v=e[o])<t&&++n>s&&_("overflow"),v==t){for(c=n,d=u;!(c<(f=d<=i?1:d>=i+26?26:d-i));d+=u)T=c-f,b=u-f,w.push(h(E(f+T%b,0))),c=p(T/b);w.push(h(E(c,0))),i=S(n,y,r==a),n=0,++r}++n,++t}return w.join("")}o={version:"1.3.2",ucs2:{decode:g,encode:y},decode:b,encode:T,toASCII:function(e){return m(e,(function(e){return c.test(e)?"xn--"+T(e):e}))},toUnicode:function(e){return m(e,(function(e){return l.test(e)?b(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},62587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,a){n=n||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(n);var s=1e3;a&&"number"==typeof a.maxKeys&&(s=a.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var c,d,f,p,h=e[l].replace(o,"%20"),_=h.indexOf(r);_>=0?(c=h.substr(0,_),d=h.substr(_+1)):(c=h,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),t(i,f)?Array.isArray(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i}},12361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,a){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(a){var i=encodeURIComponent(t(a))+r;return Array.isArray(e[a])?e[a].map((function(e){return i+encodeURIComponent(t(e))})).join(n):i+encodeURIComponent(t(e[a]))})).join(n):a?encodeURIComponent(t(a))+r+encodeURIComponent(t(e)):""}},17673:(e,t,n)=>{"use strict";t.decode=t.parse=n(62587),t.encode=t.stringify=n(12361)},64448:(e,t,n)=>{"use strict";
/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(67294),a=n(27418),i=n(63840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function s(e,t,n,r,a,i,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var u=!1,l=null,c=!1,d=null,f={onError:function(e){u=!0,l=e}};function p(e,t,n,r,a,i,o,c,d){u=!1,l=null,s.apply(f,arguments)}var h=null,_=null,v=null;function m(e,t,n){var r=e.type||"unknown-event";e.currentTarget=v(n),function(e,t,n,r,a,i,s,f,h){if(p.apply(this,arguments),u){if(!u)throw Error(o(198));var _=l;u=!1,l=null,c||(c=!0,d=_)}}(r,t,void 0,e),e.currentTarget=null}var g=null,y={};function E(){if(g)for(var e in y){var t=y[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!b[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in b[n]=t,n=t.eventTypes){var a=void 0,i=n[r],s=t,u=r;if(T.hasOwnProperty(u))throw Error(o(99,u));T[u]=i;var l=i.phasedRegistrationNames;if(l){for(a in l)l.hasOwnProperty(a)&&S(l[a],s,u);a=!0}else i.registrationName?(S(i.registrationName,s,u),a=!0):a=!1;if(!a)throw Error(o(98,r,e))}}}}function S(e,t,n){if(w[e])throw Error(o(100,e));w[e]=t,A[e]=t.eventTypes[n].dependencies}var b=[],T={},w={},A={};function C(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!y.hasOwnProperty(t)||y[t]!==r){if(y[t])throw Error(o(102,t));y[t]=r,n=!0}}n&&E()}var O=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),M=null,I=null,k=null;function P(e){if(e=_(e)){if("function"!=typeof M)throw Error(o(280));var t=e.stateNode;t&&(t=h(t),M(e.stateNode,e.type,t))}}function R(e){I?k?k.push(e):k=[e]:I=e}function D(){if(I){var e=I,t=k;if(k=I=null,P(e),t)for(e=0;e<t.length;e++)P(t[e])}}function N(e,t){return e(t)}function L(e,t,n,r,a){return e(t,n,r,a)}function x(){}var U=N,F=!1,G=!1;function B(){null===I&&null===k||(x(),D())}function j(e,t,n){if(G)return e(t,n);G=!0;try{return U(e,t,n)}finally{G=!1,B()}}var Y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K=Object.prototype.hasOwnProperty,W={},V={};function H(e,t,n,r,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){$[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){$[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){$[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var z=/[\-:]([a-z])/g;function q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(z,q);$[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(z,q);$[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(z,q);$[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),$.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){$[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Q(e,t,n,r){var a=$.hasOwnProperty(t)?$[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!K.call(V,e)||!K.call(W,e)&&(Y.test(e)?V[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}J.hasOwnProperty("ReactCurrentDispatcher")||(J.ReactCurrentDispatcher={current:null}),J.hasOwnProperty("ReactCurrentBatchConfig")||(J.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ae=Z?Symbol.for("react.profiler"):60114,ie=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,se=Z?Symbol.for("react.concurrent_mode"):60111,ue=Z?Symbol.for("react.forward_ref"):60112,le=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,de=Z?Symbol.for("react.memo"):60115,fe=Z?Symbol.for("react.lazy"):60116,pe=Z?Symbol.for("react.block"):60121,he="function"==typeof Symbol&&Symbol.iterator;function _e(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=he&&e[he]||e["@@iterator"])?e:null}function ve(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ae:return"Profiler";case re:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ie:return"Context.Provider";case ue:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return ve(e.type);case pe:return ve(e.render);case fe:if(e=1===e._status?e._result:null)return ve(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,a=e._debugSource,i=ve(e.type);n=null,r&&(n=ve(r.type)),r=i,i="",a?i=" (at "+a.fileName.replace(X,"")+":"+a.lineNumber+")":n&&(i=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+i}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ye(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ee(e){e._valueTracker||(e._valueTracker=function(e){var t=ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Se(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ye(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function be(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function we(e,t){null!=(t=t.checked)&&Q(e,"checked",t,!1)}function Ae(e,t){we(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ce(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Oe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Me(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ie(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ke(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Re(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ne="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function xe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?xe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,Ge,Be=(Ge=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ge(e,t)}))}:Ge);function je(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ye(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ke={animationend:Ye("Animation","AnimationEnd"),animationiteration:Ye("Animation","AnimationIteration"),animationstart:Ye("Animation","AnimationStart"),transitionend:Ye("Transition","TransitionEnd")},We={},Ve={};function He(e){if(We[e])return We[e];if(!Ke[e])return e;var t,n=Ke[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ve)return We[e]=n[t];return e}O&&(Ve=document.createElement("div").style,"AnimationEvent"in window||(delete Ke.animationend.animation,delete Ke.animationiteration.animation,delete Ke.animationstart.animation),"TransitionEvent"in window||delete Ke.transitionend.transition);var $e=He("animationend"),ze=He("animationiteration"),qe=He("animationstart"),Je=He("transitionend"),Qe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"==typeof WeakMap?WeakMap:Map);function Ze(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return nt(a),e;if(i===r)return nt(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function at(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function st(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)m(e,t[r],n[r]);else t&&m(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ut(e){if(null!==e&&(ot=at(ot,e)),e=ot,ot=null,e){if(it(e,st),ot)throw Error(o(95));if(c)throw e=d,c=!1,d=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!O)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var dt=[];function ft(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>dt.length&&dt.push(e)}function pt(e,t,n,r){if(dt.length){var a=dt.pop();return a.topLevelType=e,a.eventSystemFlags=r,a.nativeEvent=t,a.targetInst=n,a}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function ht(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Pn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var a=lt(e.nativeEvent);r=e.topLevelType;var i=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var s=null,u=0;u<b.length;u++){var l=b[u];l&&(l=l.extractEvents(r,t,i,a,o))&&(s=at(s,l))}ut(s)}}function _t(e,t,n){if(!n.has(e)){switch(e){case"scroll":qt(t,"scroll",!0);break;case"focus":case"blur":qt(t,"focus",!0),qt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&qt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qe.indexOf(e)&&zt(e,t)}n.set(e,null)}}var vt,mt,gt,yt=!1,Et=[],St=null,bt=null,Tt=null,wt=new Map,At=new Map,Ct=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Mt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function It(e,t,n,r,a){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:a,container:r}}function kt(e,t){switch(e){case"focus":case"blur":St=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":wt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Pt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=It(t,n,r,a,i),null!==t&&(null!==(t=Rn(t))&&mt(t)),e):(e.eventSystemFlags|=r,e)}function Rt(e){var t=Pn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void i.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Rn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function Nt(e,t,n){Dt(e)&&n.delete(t)}function Lt(){for(yt=!1;0<Et.length;){var e=Et[0];if(null!==e.blockedOn){null!==(e=Rn(e.blockedOn))&&vt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:Et.shift()}null!==St&&Dt(St)&&(St=null),null!==bt&&Dt(bt)&&(bt=null),null!==Tt&&Dt(Tt)&&(Tt=null),wt.forEach(Nt),At.forEach(Nt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Lt)))}function Ut(e){function t(t){return xt(t,e)}if(0<Et.length){xt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&xt(St,e),null!==bt&&xt(bt,e),null!==Tt&&xt(Tt,e),wt.forEach(t),At.forEach(t),n=0;n<Ct.length;n++)(r=Ct[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ct.length&&null===(n=Ct[0]).blockedOn;)Rt(n),null===n.blockedOn&&Ct.shift()}var Ft={},Gt=new Map,Bt=new Map,jt=["abort","abort",$e,"animationEnd",ze,"animationIteration",qe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Je,"transitionEnd","waiting","waiting"];function Yt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1],i="on"+(a[0].toUpperCase()+a.slice(1));i={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[r],eventPriority:t},Bt.set(r,t),Gt.set(r,i),Ft[a]=i}}Yt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Yt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Yt(jt,2);for(var Kt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<Kt.length;Wt++)Bt.set(Kt[Wt],0);var Vt=i.unstable_UserBlockingPriority,Ht=i.unstable_runWithPriority,$t=!0;function zt(e,t){qt(t,e,!1)}function qt(e,t,n){var r=Bt.get(t);switch(void 0===r?2:r){case 0:r=Jt.bind(null,t,1,e);break;case 1:r=Qt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Jt(e,t,n,r){F||x();var a=Xt,i=F;F=!0;try{L(a,e,t,n,r)}finally{(F=i)||B()}}function Qt(e,t,n,r){Ht(Vt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if($t)if(0<Et.length&&-1<Ot.indexOf(e))e=It(null,e,t,n,r),Et.push(e);else{var a=Zt(e,t,n,r);if(null===a)kt(e,r);else if(-1<Ot.indexOf(e))e=It(a,e,t,n,r),Et.push(e);else if(!function(e,t,n,r,a){switch(t){case"focus":return St=Pt(St,e,t,n,r,a),!0;case"dragenter":return bt=Pt(bt,e,t,n,r,a),!0;case"mouseover":return Tt=Pt(Tt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return wt.set(i,Pt(wt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,At.set(i,Pt(At.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r)){kt(e,r),e=pt(e,r,null,t);try{j(ht,e)}finally{ft(e)}}}}function Zt(e,t,n,r){if(null!==(n=Pn(n=lt(r)))){var a=et(n);if(null===a)n=null;else{var i=a.tag;if(13===i){if(null!==(n=tt(a)))return n;n=null}else if(3===i){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}e=pt(e,r,n,t);try{j(ht,e)}finally{ft(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62,""))}}function sn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=Ne;function ln(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=A[t];for(var r=0;r<t.length;r++)_t(t[r],e,n)}function cn(){}function dn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pn(e,t){var n,r=fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fn(r)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function _n(){for(var e=window,t=dn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=dn((e=t.contentWindow).document)}return t}function vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn="$?",gn="$!",yn=null,En=null;function Sn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function bn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Tn="function"==typeof setTimeout?setTimeout:void 0,wn="function"==typeof clearTimeout?clearTimeout:void 0;function An(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===gn||n===mn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Mn="__reactInternalInstance$"+On,In="__reactEventHandlers$"+On,kn="__reactContainere$"+On;function Pn(e){var t=e[Mn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[kn]||n[Mn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[Mn])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function Rn(e){return!(e=e[Mn]||e[kn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Dn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Nn(e){return e[In]||null}function Ln(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function xn(e,t){var n=e.stateNode;if(!n)return null;var r=h(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}function Un(e,t,n){(t=xn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=at(n._dispatchListeners,t),n._dispatchInstances=at(n._dispatchInstances,e))}function Fn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ln(t);for(t=n.length;0<t--;)Un(n[t],"captured",e);for(t=0;t<n.length;t++)Un(n[t],"bubbled",e)}}function Gn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=xn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=at(n._dispatchListeners,t),n._dispatchInstances=at(n._dispatchInstances,e))}function Bn(e){e&&e.dispatchConfig.registrationName&&Gn(e._targetInst,null,e)}function jn(e){it(e,Fn)}var Yn=null,Kn=null,Wn=null;function Vn(){if(Wn)return Wn;var e,t,n=Kn,r=n.length,a="value"in Yn?Yn.value:Yn.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Wn=a.slice(e,1<t?1-t:void 0)}function Hn(){return!0}function $n(){return!1}function zn(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Hn:$n,this.isPropagationStopped=$n,this}function qn(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Qn(e){e.eventPool=[],e.getPooled=qn,e.release=Jn}a(zn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){this.isPersistent=Hn},isPersistent:$n,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=$n,this._dispatchInstances=this._dispatchListeners=null}}),zn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},zn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return a(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,Qn(n),n},Qn(zn);var Xn=zn.extend({data:null}),Zn=zn.extend({data:null}),er=[9,13,27,32],tr=O&&"CompositionEvent"in window,nr=null;O&&"documentMode"in document&&(nr=document.documentMode);var rr=O&&"TextEvent"in window&&!nr,ar=O&&(!tr||nr&&8<nr&&11>=nr),ir=String.fromCharCode(32),or={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},sr=!1;function ur(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function lr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var cr=!1;var dr={eventTypes:or,extractEvents:function(e,t,n,r){var a;if(tr)e:{switch(e){case"compositionstart":var i=or.compositionStart;break e;case"compositionend":i=or.compositionEnd;break e;case"compositionupdate":i=or.compositionUpdate;break e}i=void 0}else cr?ur(e,n)&&(i=or.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=or.compositionStart);return i?(ar&&"ko"!==n.locale&&(cr||i!==or.compositionStart?i===or.compositionEnd&&cr&&(a=Vn()):(Kn="value"in(Yn=r)?Yn.value:Yn.textContent,cr=!0)),i=Xn.getPooled(i,t,n,r),a?i.data=a:null!==(a=lr(n))&&(i.data=a),jn(i),a=i):a=null,(e=rr?function(e,t){switch(e){case"compositionend":return lr(t);case"keypress":return 32!==t.which?null:(sr=!0,ir);case"textInput":return(e=t.data)===ir&&sr?null:e;default:return null}}(e,n):function(e,t){if(cr)return"compositionend"===e||!tr&&ur(e,t)?(e=Vn(),Wn=Kn=Yn=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ar&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Zn.getPooled(or.beforeInput,t,n,r)).data=e,jn(t)):t=null,null===a?t:null===t?a:[a,t]}},fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!fr[e.type]:"textarea"===t}var hr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function _r(e,t,n){return(e=zn.getPooled(hr.change,e,t,n)).type="change",R(n),jn(e),e}var vr=null,mr=null;function gr(e){ut(e)}function yr(e){if(Se(Dn(e)))return e}function Er(e,t){if("change"===e)return t}var Sr=!1;function br(){vr&&(vr.detachEvent("onpropertychange",Tr),mr=vr=null)}function Tr(e){if("value"===e.propertyName&&yr(mr))if(e=_r(mr,e,lt(e)),F)ut(e);else{F=!0;try{N(gr,e)}finally{F=!1,B()}}}function wr(e,t,n){"focus"===e?(br(),mr=n,(vr=t).attachEvent("onpropertychange",Tr)):"blur"===e&&br()}function Ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return yr(mr)}function Cr(e,t){if("click"===e)return yr(t)}function Or(e,t){if("input"===e||"change"===e)return yr(t)}O&&(Sr=ct("input")&&(!document.documentMode||9<document.documentMode));var Mr={eventTypes:hr,_isInputEventSupported:Sr,extractEvents:function(e,t,n,r){var a=t?Dn(t):window,i=a.nodeName&&a.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===a.type)var o=Er;else if(pr(a))if(Sr)o=Or;else{o=Ar;var s=wr}else(i=a.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(o=Cr);if(o&&(o=o(e,t)))return _r(o,n,r);s&&s(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&Oe(a,"number",a.value)}},Ir=zn.extend({view:null,detail:null}),kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kr[e])&&!!t[e]}function Rr(){return Pr}var Dr=0,Nr=0,Lr=!1,xr=!1,Ur=Ir.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Dr;return Dr=e.screenX,Lr?"mousemove"===e.type?e.screenX-t:0:(Lr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Nr;return Nr=e.screenY,xr?"mousemove"===e.type?e.screenY-t:0:(xr=!0,0)}}),Fr=Ur.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Gr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Br={eventTypes:Gr,extractEvents:function(e,t,n,r,a){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&0==(32&a)&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Pn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var s=Ur,u=Gr.mouseLeave,l=Gr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Fr,u=Gr.pointerLeave,l=Gr.pointerEnter,c="pointer");if(e=null==o?i:Dn(o),i=null==t?i:Dn(t),(u=s.getPooled(u,o,n,r)).type=c+"leave",u.target=e,u.relatedTarget=i,(n=s.getPooled(l,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=e,c=t,(r=o)&&c)e:{for(l=c,o=0,e=s=r;e;e=Ln(e))o++;for(e=0,t=l;t;t=Ln(t))e++;for(;0<o-e;)s=Ln(s),o--;for(;0<e-o;)l=Ln(l),e--;for(;o--;){if(s===l||s===l.alternate)break e;s=Ln(s),l=Ln(l)}s=null}else s=null;for(l=s,s=[];r&&r!==l&&(null===(o=r.alternate)||o!==l);)s.push(r),r=Ln(r);for(r=[];c&&c!==l&&(null===(o=c.alternate)||o!==l);)r.push(c),c=Ln(c);for(c=0;c<s.length;c++)Gn(s[c],"bubbled",u);for(c=r.length;0<c--;)Gn(r[c],"captured",n);return 0==(64&a)?[u]:[u,n]}};var jr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Yr=Object.prototype.hasOwnProperty;function Kr(e,t){if(jr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Yr.call(t,n[r])||!jr(e[n[r]],t[n[r]]))return!1;return!0}var Wr=O&&"documentMode"in document&&11>=document.documentMode,Vr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Hr=null,$r=null,zr=null,qr=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return qr||null==Hr||Hr!==dn(n)?null:("selectionStart"in(n=Hr)&&vn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},zr&&Kr(zr,n)?null:(zr=n,(e=zn.getPooled(Vr.select,$r,e,t)).type="select",e.target=Hr,jn(e),e))}var Qr={eventTypes:Vr,extractEvents:function(e,t,n,r,a,i){if(!(i=!(a=i||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{a=Ze(a),i=A.onSelect;for(var o=0;o<i.length;o++)if(!a.has(i[o])){a=!1;break e}a=!0}i=!a}if(i)return null;switch(a=t?Dn(t):window,e){case"focus":(pr(a)||"true"===a.contentEditable)&&(Hr=a,$r=t,zr=null);break;case"blur":zr=$r=Hr=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":return qr=!1,Jr(n,r);case"selectionchange":if(Wr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},Xr=zn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zr=zn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ea=Ir.extend({relatedTarget:null});function ta(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aa=Ir.extend({key:function(e){if(e.key){var t=na[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ta(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ra[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rr,charCode:function(e){return"keypress"===e.type?ta(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ta(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ia=Ur.extend({dataTransfer:null}),oa=Ir.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rr}),sa=zn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ua=Ur.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),la={eventTypes:Ft,extractEvents:function(e,t,n,r){var a=Gt.get(e);if(!a)return null;switch(e){case"keypress":if(0===ta(n))return null;case"keydown":case"keyup":e=aa;break;case"blur":case"focus":e=ea;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ur;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ia;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=oa;break;case $e:case ze:case qe:e=Xr;break;case Je:e=sa;break;case"scroll":e=Ir;break;case"wheel":e=ua;break;case"copy":case"cut":case"paste":e=Zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Fr;break;default:e=zn}return jn(t=e.getPooled(a,t,n,r)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),E(),h=Nn,_=Rn,v=Dn,C({SimpleEventPlugin:la,EnterLeaveEventPlugin:Br,ChangeEventPlugin:Mr,SelectEventPlugin:Qr,BeforeInputEventPlugin:dr});var ca=[],da=-1;function fa(e){0>da||(e.current=ca[da],ca[da]=null,da--)}function pa(e,t){da++,ca[da]=e.current,e.current=t}var ha={},_a={current:ha},va={current:!1},ma=ha;function ga(e,t){var n=e.type.contextTypes;if(!n)return ha;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ya(e){return null!=(e=e.childContextTypes)}function Ea(){fa(va),fa(_a)}function Sa(e,t,n){if(_a.current!==ha)throw Error(o(168));pa(_a,t),pa(va,n)}function ba(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,ve(t)||"Unknown",i));return a({},n,{},r)}function Ta(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ha,ma=_a.current,pa(_a,e),pa(va,va.current),!0}function wa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ba(e,t,ma),r.__reactInternalMemoizedMergedChildContext=e,fa(va),fa(_a),pa(_a,e)):fa(va),pa(va,n)}var Aa=i.unstable_runWithPriority,Ca=i.unstable_scheduleCallback,Oa=i.unstable_cancelCallback,Ma=i.unstable_requestPaint,Ia=i.unstable_now,ka=i.unstable_getCurrentPriorityLevel,Pa=i.unstable_ImmediatePriority,Ra=i.unstable_UserBlockingPriority,Da=i.unstable_NormalPriority,Na=i.unstable_LowPriority,La=i.unstable_IdlePriority,xa={},Ua=i.unstable_shouldYield,Fa=void 0!==Ma?Ma:function(){},Ga=null,Ba=null,ja=!1,Ya=Ia(),Ka=1e4>Ya?Ia:function(){return Ia()-Ya};function Wa(){switch(ka()){case Pa:return 99;case Ra:return 98;case Da:return 97;case Na:return 96;case La:return 95;default:throw Error(o(332))}}function Va(e){switch(e){case 99:return Pa;case 98:return Ra;case 97:return Da;case 96:return Na;case 95:return La;default:throw Error(o(332))}}function Ha(e,t){return e=Va(e),Aa(e,t)}function $a(e,t,n){return e=Va(e),Ca(e,t,n)}function za(e){return null===Ga?(Ga=[e],Ba=Ca(Pa,Ja)):Ga.push(e),xa}function qa(){if(null!==Ba){var e=Ba;Ba=null,Oa(e)}Ja()}function Ja(){if(!ja&&null!==Ga){ja=!0;var e=0;try{var t=Ga;Ha(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ga=null}catch(t){throw null!==Ga&&(Ga=Ga.slice(e+1)),Ca(Pa,qa),t}finally{ja=!1}}}function Qa(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Xa(e,t){if(e&&e.defaultProps)for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Za={current:null},ei=null,ti=null,ni=null;function ri(){ni=ti=ei=null}function ai(e){var t=Za.current;fa(Za),e.type._context._currentValue=t}function ii(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function oi(e,t){ei=e,ni=ti=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(No=!0),e.firstContext=null)}function si(e,t){if(ni!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ni=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ti){if(null===ei)throw Error(o(308));ti=t,ei.dependencies={expirationTime:0,firstContext:t,responders:null}}else ti=ti.next=t;return e._currentValue}var ui=!1;function li(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ci(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function di(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function fi(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function pi(e,t){var n=e.alternate;null!==n&&ci(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function hi(e,t,n,r){var i=e.updateQueue;ui=!1;var o=i.baseQueue,s=i.shared.pending;if(null!==s){if(null!==o){var u=o.next;o.next=s.next,s.next=u}o=s,i.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==o){u=o.next;var l=i.baseState,c=0,d=null,f=null,p=null;if(null!==u)for(var h=u;;){if((s=h.expirationTime)<r){var _={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(f=p=_,d=l):p=p.next=_,s>c&&(c=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),pu(s,h.suspenseConfig);e:{var v=e,m=h;switch(s=t,_=n,m.tag){case 1:if("function"==typeof(v=m.payload)){l=v.call(_,l,s);break e}l=v;break e;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null==(s="function"==typeof(v=m.payload)?v.call(_,l,s):v))break e;l=a({},l,s);break e;case 2:ui=!0}}null!==h.callback&&(e.effectTag|=32,null===(s=i.effects)?i.effects=[h]:s.push(h))}if(null===(h=h.next)||h===u){if(null===(s=i.shared.pending))break;h=o.next=s.next,s.next=u,i.baseQueue=o=s,i.shared.pending=null}}null===p?d=l:p.next=f,i.baseState=d,i.baseQueue=p,hu(c),e.expirationTime=c,e.memoizedState=l}}function _i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=a,a=n,"function"!=typeof r)throw Error(o(191,r));r.call(a)}}}var vi=J.ReactCurrentBatchConfig,mi=(new r.Component).refs;function gi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var yi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=eu(),a=vi.suspense;(a=di(r=tu(r,e,a),a)).payload=t,null!=n&&(a.callback=n),fi(e,a),nu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=eu(),a=vi.suspense;(a=di(r=tu(r,e,a),a)).tag=1,a.payload=t,null!=n&&(a.callback=n),fi(e,a),nu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=eu(),r=vi.suspense;(r=di(n=tu(n,e,r),r)).tag=2,null!=t&&(r.callback=t),fi(e,r),nu(e,n)}};function Ei(e,t,n,r,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Kr(n,r)||!Kr(a,i))}function Si(e,t,n){var r=!1,a=ha,i=t.contextType;return"object"==typeof i&&null!==i?i=si(i):(a=ya(t)?ma:_a.current,i=(r=null!=(r=t.contextTypes))?ga(e,a):ha),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function bi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function Ti(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=mi,li(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=si(i):(i=ya(t)?ma:_a.current,a.context=ga(e,i)),hi(e,n,a,r),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(gi(e,t,i,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&yi.enqueueReplaceState(a,a.state,null),hi(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.effectTag|=4)}var wi=Array.isArray;function Ai(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===mi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ci(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Oi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Uu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Ai(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Ai(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=xu(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Uu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Ai(e,null,t),n.return=e,n;case te:return(t=Fu(t,e.mode,n)).return=e,t}if(wi(t)||_e(t))return(t=xu(t,e.mode,n,null)).return=e,t;Ci(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===a?n.type===ne?d(e,t,n.props.children,r,a):l(e,t,n,r):null;case te:return n.key===a?c(e,t,n,r):null}if(wi(n)||_e(n))return null!==a?null:d(e,t,n,r,null);Ci(e,n)}return null}function h(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?d(t,e,r.props.children,a,r.key):l(t,e,r,a);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(wi(r)||_e(r))return d(t,e=e.get(n)||null,r,a,null);Ci(t,r)}return null}function _(a,o,s,u){for(var l=null,c=null,d=o,_=o=0,v=null;null!==d&&_<s.length;_++){d.index>_?(v=d,d=null):v=d.sibling;var m=p(a,d,s[_],u);if(null===m){null===d&&(d=v);break}e&&d&&null===m.alternate&&t(a,d),o=i(m,o,_),null===c?l=m:c.sibling=m,c=m,d=v}if(_===s.length)return n(a,d),l;if(null===d){for(;_<s.length;_++)null!==(d=f(a,s[_],u))&&(o=i(d,o,_),null===c?l=d:c.sibling=d,c=d);return l}for(d=r(a,d);_<s.length;_++)null!==(v=h(d,a,_,s[_],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?_:v.key),o=i(v,o,_),null===c?l=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(a,e)})),l}function v(a,s,u,l){var c=_e(u);if("function"!=typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,_=s,v=s=0,m=null,g=u.next();null!==_&&!g.done;v++,g=u.next()){_.index>v?(m=_,_=null):m=_.sibling;var y=p(a,_,g.value,l);if(null===y){null===_&&(_=m);break}e&&_&&null===y.alternate&&t(a,_),s=i(y,s,v),null===d?c=y:d.sibling=y,d=y,_=m}if(g.done)return n(a,_),c;if(null===_){for(;!g.done;v++,g=u.next())null!==(g=f(a,g.value,l))&&(s=i(g,s,v),null===d?c=g:d.sibling=g,d=g);return c}for(_=r(a,_);!g.done;v++,g=u.next())null!==(g=h(_,a,v,g.value,l))&&(e&&null!==g.alternate&&_.delete(null===g.key?v:g.key),s=i(g,s,v),null===d?c=g:d.sibling=g,d=g);return e&&_.forEach((function(e){return t(a,e)})),c}return function(e,r,i,u){var l="object"==typeof i&&null!==i&&i.type===ne&&null===i.key;l&&(i=i.props.children);var c="object"==typeof i&&null!==i;if(c)switch(i.$$typeof){case ee:e:{for(c=i.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(i.type===ne){n(e,l.sibling),(r=a(l,i.props.children)).return=e,e=r;break e}break;default:if(l.elementType===i.type){n(e,l.sibling),(r=a(l,i.props)).ref=Ai(e,l,i),r.return=e,e=r;break e}}n(e,l);break}t(e,l),l=l.sibling}i.type===ne?((r=xu(i.props.children,e.mode,u,i.key)).return=e,e=r):((u=Lu(i.type,i.key,i.props,null,e.mode,u)).ref=Ai(e,r,i),u.return=e,e=u)}return s(e);case te:e:{for(l=i.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Fu(i,e.mode,u)).return=e,e=r}return s(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Uu(i,e.mode,u)).return=e,e=r),s(e);if(wi(i))return _(e,r,i,u);if(_e(i))return v(e,r,i,u);if(c&&Ci(e,i),void 0===i&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Mi=Oi(!0),Ii=Oi(!1),ki={},Pi={current:ki},Ri={current:ki},Di={current:ki};function Ni(e){if(e===ki)throw Error(o(174));return e}function Li(e,t){switch(pa(Di,t),pa(Ri,e),pa(Pi,ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ue(null,"");break;default:t=Ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}fa(Pi),pa(Pi,t)}function xi(){fa(Pi),fa(Ri),fa(Di)}function Ui(e){Ni(Di.current);var t=Ni(Pi.current),n=Ue(t,e.type);t!==n&&(pa(Ri,e),pa(Pi,n))}function Fi(e){Ri.current===e&&(fa(Pi),fa(Ri))}var Gi={current:0};function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===mn||n.data===gn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ji(e,t){return{responder:e,props:t}}var Yi=J.ReactCurrentDispatcher,Ki=J.ReactCurrentBatchConfig,Wi=0,Vi=null,Hi=null,$i=null,zi=!1;function qi(){throw Error(o(321))}function Ji(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jr(e[n],t[n]))return!1;return!0}function Qi(e,t,n,r,a,i){if(Wi=i,Vi=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Yi.current=null===e||null===e.memoizedState?So:bo,e=n(r,a),t.expirationTime===Wi){i=0;do{if(t.expirationTime=0,!(25>i))throw Error(o(301));i+=1,$i=Hi=null,t.updateQueue=null,Yi.current=To,e=n(r,a)}while(t.expirationTime===Wi)}if(Yi.current=Eo,t=null!==Hi&&null!==Hi.next,Wi=0,$i=Hi=Vi=null,zi=!1,t)throw Error(o(300));return e}function Xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$i?Vi.memoizedState=$i=e:$i=$i.next=e,$i}function Zi(){if(null===Hi){var e=Vi.alternate;e=null!==e?e.memoizedState:null}else e=Hi.next;var t=null===$i?Vi.memoizedState:$i.next;if(null!==t)$i=t,Hi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Hi=e).memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},null===$i?Vi.memoizedState=$i=e:$i=$i.next=e}return $i}function eo(e,t){return"function"==typeof t?t(e):t}function to(e){var t=Zi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Hi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=i=null,l=a;do{var c=l.expirationTime;if(c<Wi){var d={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=d,i=r):u=u.next=d,c>Vi.expirationTime&&(Vi.expirationTime=c,hu(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),pu(c,l.suspenseConfig),r=l.eagerReducer===e?l.eagerState:e(r,l.action);l=l.next}while(null!==l&&l!==a);null===u?i=r:u.next=s,jr(r,t.memoizedState)||(No=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function no(e){var t=Zi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);jr(i,t.memoizedState)||(No=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ro(e){var t=Xi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=yo.bind(null,Vi,e),[t.memoizedState,e]}function ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Vi.updateQueue)?(t={lastEffect:null},Vi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function io(){return Zi().memoizedState}function oo(e,t,n,r){var a=Xi();Vi.effectTag|=e,a.memoizedState=ao(1|t,n,void 0,void 0===r?null:r)}function so(e,t,n,r){var a=Zi();r=void 0===r?null:r;var i=void 0;if(null!==Hi){var o=Hi.memoizedState;if(i=o.destroy,null!==r&&Ji(r,o.deps))return void ao(t,n,i,r)}Vi.effectTag|=e,a.memoizedState=ao(1|t,n,i,r)}function uo(e,t){return oo(516,4,e,t)}function lo(e,t){return so(516,4,e,t)}function co(e,t){return so(4,2,e,t)}function fo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function po(e,t,n){return n=null!=n?n.concat([e]):null,so(4,2,fo.bind(null,t,e),n)}function ho(){}function _o(e,t){return Xi().memoizedState=[e,void 0===t?null:t],e}function vo(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mo(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ji(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function go(e,t,n){var r=Wa();Ha(98>r?98:r,(function(){e(!0)})),Ha(97<r?97:r,(function(){var r=Ki.suspense;Ki.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ki.suspense=r}}))}function yo(e,t,n){var r=eu(),a=vi.suspense;a={expirationTime:r=tu(r,e,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var i=t.pending;if(null===i?a.next=a:(a.next=i.next,i.next=a),t.pending=a,i=e.alternate,e===Vi||null!==i&&i===Vi)zi=!0,a.expirationTime=Wi,Vi.expirationTime=Wi;else{if(0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.eagerReducer=i,a.eagerState=s,jr(s,o))return}catch(e){}nu(e,r)}}var Eo={readContext:si,useCallback:qi,useContext:qi,useEffect:qi,useImperativeHandle:qi,useLayoutEffect:qi,useMemo:qi,useReducer:qi,useRef:qi,useState:qi,useDebugValue:qi,useResponder:qi,useDeferredValue:qi,useTransition:qi},So={readContext:si,useCallback:_o,useContext:si,useEffect:uo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,oo(4,2,fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=Xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=yo.bind(null,Vi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Xi().memoizedState=e},useState:ro,useDebugValue:ho,useResponder:ji,useDeferredValue:function(e,t){var n=ro(e),r=n[0],a=n[1];return uo((function(){var n=Ki.suspense;Ki.suspense=void 0===t?null:t;try{a(e)}finally{Ki.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(!1),n=t[0];return t=t[1],[_o(go.bind(null,t,e),[t,e]),n]}},bo={readContext:si,useCallback:vo,useContext:si,useEffect:lo,useImperativeHandle:po,useLayoutEffect:co,useMemo:mo,useReducer:to,useRef:io,useState:function(){return to(eo)},useDebugValue:ho,useResponder:ji,useDeferredValue:function(e,t){var n=to(eo),r=n[0],a=n[1];return lo((function(){var n=Ki.suspense;Ki.suspense=void 0===t?null:t;try{a(e)}finally{Ki.suspense=n}}),[e,t]),r},useTransition:function(e){var t=to(eo),n=t[0];return t=t[1],[vo(go.bind(null,t,e),[t,e]),n]}},To={readContext:si,useCallback:vo,useContext:si,useEffect:lo,useImperativeHandle:po,useLayoutEffect:co,useMemo:mo,useReducer:no,useRef:io,useState:function(){return no(eo)},useDebugValue:ho,useResponder:ji,useDeferredValue:function(e,t){var n=no(eo),r=n[0],a=n[1];return lo((function(){var n=Ki.suspense;Ki.suspense=void 0===t?null:t;try{a(e)}finally{Ki.suspense=n}}),[e,t]),r},useTransition:function(e){var t=no(eo),n=t[0];return t=t[1],[vo(go.bind(null,t,e),[t,e]),n]}},wo=null,Ao=null,Co=!1;function Oo(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Mo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Io(e){if(Co){var t=Ao;if(t){var n=t;if(!Mo(e,t)){if(!(t=An(n.nextSibling))||!Mo(e,t))return e.effectTag=-1025&e.effectTag|2,Co=!1,void(wo=e);Oo(wo,n)}wo=e,Ao=An(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Co=!1,wo=e}}function ko(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;wo=e}function Po(e){if(e!==wo)return!1;if(!Co)return ko(e),Co=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!bn(t,e.memoizedProps))for(t=Ao;t;)Oo(e,t),t=An(t.nextSibling);if(ko(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ao=An(e.nextSibling);break e}t--}else"$"!==n&&n!==gn&&n!==mn||t++}e=e.nextSibling}Ao=null}}else Ao=wo?An(e.stateNode.nextSibling):null;return!0}function Ro(){Ao=wo=null,Co=!1}var Do=J.ReactCurrentOwner,No=!1;function Lo(e,t,n,r){t.child=null===e?Ii(t,null,n,r):Mi(t,e.child,n,r)}function xo(e,t,n,r,a){n=n.render;var i=t.ref;return oi(t,a),r=Qi(e,t,n,r,i,a),null===e||No?(t.effectTag|=1,Lo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),Xo(e,t,a))}function Uo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!=typeof o||Du(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,null,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,r,a,i))}return o=e.child,a<i&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:Kr)(a,r)&&e.ref===t.ref)?Xo(e,t,i):(t.effectTag|=1,(e=Nu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,n,r,a,i){return null!==e&&Kr(e.memoizedProps,r)&&e.ref===t.ref&&(No=!1,a<i)?(t.expirationTime=e.expirationTime,Xo(e,t,i)):Bo(e,t,n,r,i)}function Go(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Bo(e,t,n,r,a){var i=ya(n)?ma:_a.current;return i=ga(t,i),oi(t,a),n=Qi(e,t,n,r,i,a),null===e||No?(t.effectTag|=1,Lo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),Xo(e,t,a))}function jo(e,t,n,r,a){if(ya(n)){var i=!0;Ta(t)}else i=!1;if(oi(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Si(t,n,r),Ti(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"==typeof l&&null!==l?l=si(l):l=ga(t,l=ya(n)?ma:_a.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||u!==l)&&bi(t,o,r,l),ui=!1;var f=t.memoizedState;o.state=f,hi(t,r,o,a),u=t.memoizedState,s!==r||f!==u||va.current||ui?("function"==typeof c&&(gi(t,n,c,r),u=t.memoizedState),(s=ui||Ei(t,n,s,r,f,u,l))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ci(e,t),s=t.memoizedProps,o.props=t.type===t.elementType?s:Xa(t.type,s),u=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=si(l):l=ga(t,l=ya(n)?ma:_a.current),(d="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||u!==l)&&bi(t,o,r,l),ui=!1,u=t.memoizedState,o.state=u,hi(t,r,o,a),f=t.memoizedState,s!==r||u!==f||va.current||ui?("function"==typeof c&&(gi(t,n,c,r),f=t.memoizedState),(c=ui||Ei(t,n,s,r,u,f,l))?(d||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Yo(e,t,n,r,i,a)}function Yo(e,t,n,r,a,i){Go(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return a&&wa(t,n,!1),Xo(e,t,i);r=t.stateNode,Do.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Mi(t,e.child,null,i),t.child=Mi(t,null,s,i)):Lo(e,t,s,i),t.memoizedState=r.state,a&&wa(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?Sa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Sa(0,t.context,!1),Li(e,t.containerInfo)}var Wo,Vo,Ho,$o={dehydrated:null,retryTime:0};function zo(e,t,n){var r,a=t.mode,i=t.pendingProps,o=Gi.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&o)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),pa(Gi,1&o),null===e){if(void 0!==i.fallback&&Io(t),s){if(s=i.fallback,(i=xu(null,a,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(n=xu(s,a,n,null)).return=t,i.sibling=n,t.memoizedState=$o,t.child=i,n}return a=i.children,t.memoizedState=null,t.child=Ii(t,null,a,n)}if(null!==e.memoizedState){if(a=(e=e.child).sibling,s){if(i=i.fallback,(n=Nu(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(a=Nu(a,i)).return=t,n.sibling=a,n.childExpirationTime=0,t.memoizedState=$o,t.child=n,a}return n=Mi(t,e.child,i.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=i.fallback,(i=xu(null,a,0,null)).return=t,i.child=e,null!==e&&(e.return=i),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(n=xu(s,a,n,null)).return=t,i.sibling=n,n.effectTag|=2,i.childExpirationTime=0,t.memoizedState=$o,t.child=i,n}return t.memoizedState=null,t.child=Mi(t,e,i.children,n)}function qo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ii(e.return,t)}function Jo(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=a,o.lastEffect=i)}function Qo(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Lo(e,t,r.children,n),0!=(2&(r=Gi.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n);else if(19===e.tag)qo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pa(Gi,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Bi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Jo(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Bi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Jo(t,!0,n,null,i,t.lastEffect);break;case"together":Jo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&hu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function es(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ya(t.type)&&Ea(),null;case 3:return xi(),fa(va),fa(_a),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Po(t)||(t.effectTag|=4),null;case 5:Fi(t),n=Ni(Di.current);var i=t.type;if(null!==e&&null!=t.stateNode)Vo(e,t,i,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ni(Pi.current),Po(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[Mn]=t,r[In]=s,i){case"iframe":case"object":case"embed":zt("load",r);break;case"video":case"audio":for(e=0;e<Qe.length;e++)zt(Qe[e],r);break;case"source":zt("error",r);break;case"img":case"image":case"link":zt("error",r),zt("load",r);break;case"form":zt("reset",r),zt("submit",r);break;case"details":zt("toggle",r);break;case"input":Te(r,s),zt("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zt("invalid",r),ln(n,"onChange");break;case"textarea":Pe(r,s),zt("invalid",r),ln(n,"onChange")}for(var u in on(i,s),e=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"==typeof l?r.textContent!==l&&(e=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(e=["children",""+l]):w.hasOwnProperty(u)&&null!=l&&ln(n,u)}switch(i){case"input":Ee(r),Ce(r,s,!0);break;case"textarea":Ee(r),De(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,e===un&&(e=xe(i)),e===un?"script"===i?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(i,{is:r.is}):(e=u.createElement(i),"select"===i&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,i),e[Mn]=t,e[In]=r,Wo(e,t),t.stateNode=e,u=sn(i,r),i){case"iframe":case"object":case"embed":zt("load",e),l=r;break;case"video":case"audio":for(l=0;l<Qe.length;l++)zt(Qe[l],e);l=r;break;case"source":zt("error",e),l=r;break;case"img":case"image":case"link":zt("error",e),zt("load",e),l=r;break;case"form":zt("reset",e),zt("submit",e),l=r;break;case"details":zt("toggle",e),l=r;break;case"input":Te(e,r),l=be(e,r),zt("invalid",e),ln(n,"onChange");break;case"option":l=Me(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=a({},r,{value:void 0}),zt("invalid",e),ln(n,"onChange");break;case"textarea":Pe(e,r),l=ke(e,r),zt("invalid",e),ln(n,"onChange");break;default:l=r}on(i,l);var c=l;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?rn(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&Be(e,d):"children"===s?"string"==typeof d?("textarea"!==i||""!==d)&&je(e,d):"number"==typeof d&&je(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(w.hasOwnProperty(s)?null!=d&&ln(n,s):null!=d&&Q(e,s,d,u))}switch(i){case"input":Ee(e),Ce(e,r,!1);break;case"textarea":Ee(e),De(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ie(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=cn)}Sn(i,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ho(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Ni(Di.current),Ni(Pi.current),Po(t)?(n=t.stateNode,r=t.memoizedProps,n[Mn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Mn]=t,t.stateNode=n)}return null;case 13:return fa(Gi),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Po(t):(r=null!==(i=e.memoizedState),n||null===i||null!==(i=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=i,i.nextEffect=s):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Gi.current)?Ls===Ms&&(Ls=Is):(Ls!==Ms&&Ls!==Is||(Ls=ks),0!==Bs&&null!==Rs&&(ju(Rs,Ns),Yu(Rs,Bs)))),(n||r)&&(t.effectTag|=4),null);case 4:return xi(),null;case 10:return ai(t),null;case 17:return ya(t.type)&&Ea(),null;case 19:if(fa(Gi),null===(r=t.memoizedState))return null;if(i=0!=(64&t.effectTag),null===(s=r.rendering)){if(i)Zo(r,!1);else if(Ls!==Ms||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Bi(s))){for(t.effectTag|=64,Zo(r,!1),null!==(i=e.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(i=r).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(e=i.alternate)?(i.childExpirationTime=0,i.expirationTime=s,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return pa(Gi,1&Gi.current|2),t.child}s=s.sibling}}else{if(!i)if(null!==(e=Bi(s))){if(t.effectTag|=64,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Zo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ka()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,i=!0,Zo(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ka()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ka(),n.sibling=null,t=Gi.current,pa(Gi,i?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function ts(e){switch(e.tag){case 1:ya(e.type)&&Ea();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(xi(),fa(va),fa(_a),0!=(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Fi(e),null;case 13:return fa(Gi),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return fa(Gi),null;case 4:return xi(),null;case 10:return ai(e),null;default:return null}}function ns(e,t){return{value:e,source:t,stack:me(t)}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Vo=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var s,u,l=t.stateNode;switch(Ni(Pi.current),e=null,n){case"input":o=be(l,o),r=be(l,r),e=[];break;case"option":o=Me(l,o),r=Me(l,r),e=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),e=[];break;case"textarea":o=ke(l,o),r=ke(l,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(l.onclick=cn)}for(s in on(n,r),n=null,o)if(!r.hasOwnProperty(s)&&o.hasOwnProperty(s)&&null!=o[s])if("style"===s)for(u in l=o[s])l.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(w.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var c=r[s];if(l=null!=o?o[s]:void 0,r.hasOwnProperty(s)&&c!==l&&(null!=c||null!=l))if("style"===s)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(n||(n={}),n[u]=c[u])}else n||(e||(e=[]),e.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(s,c)):"children"===s?l===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(w.hasOwnProperty(s)?(null!=c&&ln(i,s),e||l===c||(e=[])):(e=e||[]).push(s,c))}n&&(e=e||[]).push("style",n),i=e,(t.updateQueue=i)&&(t.effectTag|=4)}},Ho=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var rs="function"==typeof WeakSet?WeakSet:Set;function as(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=me(n)),null!==n&&ve(n.type),t=t.value,null!==e&&1===e.tag&&ve(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function is(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Cu(e,t)}else t.current=null}function os(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xa(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ss(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function us(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ls(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void us(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Xa(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&_i(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}_i(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Sn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ut(n)))));case 19:case 17:case 20:case 21:return}throw Error(o(163))}function cs(e,t,n){switch("function"==typeof ku&&ku(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Ha(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var a=t;try{n()}catch(e){Cu(a,e)}}e=e.next}while(e!==r)}))}break;case 1:is(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Cu(e,t)}}(t,n);break;case 5:is(t);break;case 4:vs(e,t,n)}}function ds(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ds(t)}function fs(e){return 5===e.tag||3===e.tag||4===e.tag}function ps(e){e:{for(var t=e.return;null!==t;){if(fs(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(je(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||fs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?hs(e,n,t):_s(e,n,t)}function hs(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(hs(e,t,n),e=e.sibling;null!==e;)hs(e,t,n),e=e.sibling}function _s(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function vs(e,t,n){for(var r,a,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:a=!1;break e;case 3:case 4:r=r.containerInfo,a=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var u=e,l=i,c=n,d=l;;)if(cs(u,d,c),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===l)break e;for(;null===d.sibling;){if(null===d.return||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a?(u=r,l=i.stateNode,8===u.nodeType?u.parentNode.removeChild(l):u.removeChild(l)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,a=!0,i.child.return=i,i=i.child;continue}}else if(cs(e,i,n),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function ms(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ss(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[In]=r,"input"===e&&"radio"===r.type&&null!=r.name&&we(n,r),sn(e,a),t=sn(e,r),a=0;a<i.length;a+=2){var s=i[a],u=i[a+1];"style"===s?rn(n,u):"dangerouslySetInnerHTML"===s?Be(n,u):"children"===s?je(n,u):Q(n,s,u,t)}switch(e){case"input":Ae(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ie(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ie(n,!!r.multiple,r.defaultValue,!0):Ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ut(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Ys=Ka()),null!==n)e:for(e=n;;){if(5===e.tag)i=e.stateNode,r?"function"==typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none":(i=e.stateNode,a=null!=(a=e.memoizedProps.style)&&a.hasOwnProperty("display")?a.display:null,i.style.display=nn("display",a));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(i=e.child.sibling).return=e,e=i;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void gs(t);case 19:return void gs(t);case 17:return}throw Error(o(163))}function gs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new rs),t.forEach((function(t){var r=Mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ys="function"==typeof WeakMap?WeakMap:Map;function Es(e,t,n){(n=di(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Vs=r),as(e,t)},n}function Ss(e,t,n){(n=di(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return as(e,t),r(a)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this),as(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var bs,Ts=Math.ceil,ws=J.ReactCurrentDispatcher,As=J.ReactCurrentOwner,Cs=16,Os=32,Ms=0,Is=3,ks=4,Ps=0,Rs=null,Ds=null,Ns=0,Ls=Ms,xs=null,Us=1073741823,Fs=1073741823,Gs=null,Bs=0,js=!1,Ys=0,Ks=null,Ws=!1,Vs=null,Hs=null,$s=!1,zs=null,qs=90,Js=null,Qs=0,Xs=null,Zs=0;function eu(){return 0!=(48&Ps)?1073741821-(Ka()/10|0):0!==Zs?Zs:Zs=1073741821-(Ka()/10|0)}function tu(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Wa();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(Ps&Cs))return Ns;if(null!==n)e=Qa(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Qa(e,150,100);break;case 97:case 96:e=Qa(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Rs&&e===Ns&&--e,e}function nu(e,t){if(50<Qs)throw Qs=0,Xs=null,Error(o(185));if(null!==(e=ru(e,t))){var n=Wa();1073741823===t?0!=(8&Ps)&&0==(48&Ps)?su(e):(iu(e),0===Ps&&qa()):iu(e),0==(4&Ps)||98!==n&&99!==n||(null===Js?Js=new Map([[e,t]]):(void 0===(n=Js.get(e))||n>t)&&Js.set(e,t))}}function ru(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,a=null;if(null===r&&3===e.tag)a=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return null!==a&&(Rs===a&&(hu(t),Ls===ks&&ju(a,Ns)),Yu(a,t)),a}function au(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Bu(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function iu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=za(su.bind(null,e));else{var t=au(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=eu();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=r)return;n!==xa&&Oa(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?za(su.bind(null,e)):$a(r,ou.bind(null,e),{timeout:10*(1073741821-t)-Ka()}),e.callbackNode=t}}}function ou(e,t){if(Zs=0,t)return Ku(e,t=eu()),iu(e),null;var n=au(e);if(0!==n){if(t=e.callbackNode,0!=(48&Ps))throw Error(o(327));if(Tu(),e===Rs&&n===Ns||cu(e,n),null!==Ds){var r=Ps;Ps|=Cs;for(var a=fu();;)try{vu();break}catch(t){du(e,t)}if(ri(),Ps=r,ws.current=a,1===Ls)throw t=xs,cu(e,n),ju(e,n),iu(e),t;if(null===Ds)switch(a=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ls,Rs=null,r){case Ms:case 1:throw Error(o(345));case 2:Ku(e,2<n?2:n);break;case Is:if(ju(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=yu(a)),1073741823===Us&&10<(a=Ys+500-Ka())){if(js){var i=e.lastPingedTime;if(0===i||i>=n){e.lastPingedTime=n,cu(e,n);break}}if(0!==(i=au(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Tn(Eu.bind(null,e),a);break}Eu(e);break;case ks:if(ju(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=yu(a)),js&&(0===(a=e.lastPingedTime)||a>=n)){e.lastPingedTime=n,cu(e,n);break}if(0!==(a=au(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Fs?r=10*(1073741821-Fs)-Ka():1073741823===Us?r=0:(r=10*(1073741821-Us)-5e3,0>(r=(a=Ka())-r)&&(r=0),(n=10*(1073741821-n)-a)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ts(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Tn(Eu.bind(null,e),r);break}Eu(e);break;case 5:if(1073741823!==Us&&null!==Gs){i=Us;var s=Gs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(a=0|s.busyDelayMs,r=(i=Ka()-(10*(1073741821-i)-(0|s.timeoutMs||5e3)))<=a?0:a+r-i),10<r){ju(e,n),e.timeoutHandle=Tn(Eu.bind(null,e),r);break}}Eu(e);break;default:throw Error(o(329))}if(iu(e),e.callbackNode===t)return ou.bind(null,e)}}return null}function su(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Ps))throw Error(o(327));if(Tu(),e===Rs&&t===Ns||cu(e,t),null!==Ds){var n=Ps;Ps|=Cs;for(var r=fu();;)try{_u();break}catch(t){du(e,t)}if(ri(),Ps=n,ws.current=r,1===Ls)throw n=xs,cu(e,t),ju(e,t),iu(e),n;if(null!==Ds)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Rs=null,Eu(e),iu(e)}return null}function uu(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&qa()}}function lu(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&qa()}}function cu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,wn(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ea();break;case 3:xi(),fa(va),fa(_a);break;case 5:Fi(r);break;case 4:xi();break;case 13:case 19:fa(Gi);break;case 10:ai(r)}n=n.return}Rs=e,Ds=Nu(e.current,null),Ns=t,Ls=Ms,xs=null,Fs=Us=1073741823,Gs=null,Bs=0,js=!1}function du(e,t){for(;;){try{if(ri(),Yi.current=Eo,zi)for(var n=Vi.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wi=0,$i=Hi=Vi=null,zi=!1,null===Ds||null===Ds.return)return Ls=1,xs=t,Ds=null;e:{var a=e,i=Ds.return,o=Ds,s=t;if(t=Ns,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&o.mode)){var l=o.alternate;l?(o.updateQueue=l.updateQueue,o.memoizedState=l.memoizedState,o.expirationTime=l.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var c=0!=(1&Gi.current),d=i;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var h=d.memoizedProps;f=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!c)}}if(f){var _=d.updateQueue;if(null===_){var v=new Set;v.add(u),d.updateQueue=v}else _.add(u);if(0==(2&d.mode)){if(d.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var m=di(1073741823,null);m.tag=2,fi(o,m)}o.expirationTime=1073741823;break e}s=void 0,o=t;var g=a.pingCache;if(null===g?(g=a.pingCache=new ys,s=new Set,g.set(u,s)):void 0===(s=g.get(u))&&(s=new Set,g.set(u,s)),!s.has(o)){s.add(o);var y=Ou.bind(null,a,u,o);u.then(y,y)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((ve(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(o))}5!==Ls&&(Ls=2),s=ns(s,o),d=i;do{switch(d.tag){case 3:u=s,d.effectTag|=4096,d.expirationTime=t,pi(d,Es(d,u,t));break e;case 1:u=s;var E=d.type,S=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof E.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Hs||!Hs.has(S)))){d.effectTag|=4096,d.expirationTime=t,pi(d,Ss(d,u,t));break e}}d=d.return}while(null!==d)}Ds=gu(Ds)}catch(e){t=e;continue}break}}function fu(){var e=ws.current;return ws.current=Eo,null===e?Eo:e}function pu(e,t){e<Us&&2<e&&(Us=e),null!==t&&e<Fs&&2<e&&(Fs=e,Gs=t)}function hu(e){e>Bs&&(Bs=e)}function _u(){for(;null!==Ds;)Ds=mu(Ds)}function vu(){for(;null!==Ds&&!Ua();)Ds=mu(Ds)}function mu(e){var t=bs(e.alternate,e,Ns);return e.memoizedProps=e.pendingProps,null===t&&(t=gu(e)),As.current=null,t}function gu(e){Ds=e;do{var t=Ds.alternate;if(e=Ds.return,0==(2048&Ds.effectTag)){if(t=es(t,Ds,Ns),1===Ns||1!==Ds.childExpirationTime){for(var n=0,r=Ds.child;null!==r;){var a=r.expirationTime,i=r.childExpirationTime;a>n&&(n=a),i>n&&(n=i),r=r.sibling}Ds.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ds.firstEffect),null!==Ds.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ds.firstEffect),e.lastEffect=Ds.lastEffect),1<Ds.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ds:e.firstEffect=Ds,e.lastEffect=Ds))}else{if(null!==(t=ts(Ds)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ds.sibling))return t;Ds=e}while(null!==Ds);return Ls===Ms&&(Ls=5),null}function yu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Eu(e){var t=Wa();return Ha(99,Su.bind(null,e,t)),null}function Su(e,t){do{Tu()}while(null!==zs);if(0!=(48&Ps))throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var a=yu(n);if(e.firstPendingTime=a,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Rs&&(Ds=Rs=null,Ns=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,null!==a){var i=Ps;Ps|=Os,As.current=null,yn=$t;var s=_n();if(vn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{u.nodeType,d.nodeType}catch(e){u=null;break e}var f=0,p=-1,h=-1,_=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==c&&3!==m.nodeType||(p=f+c),m!==d||0!==l&&3!==m.nodeType||(h=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++_===c&&(p=f),g===d&&++v===l&&(h=f),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===p||-1===h?null:{start:p,end:h}}else u=null}u=u||{start:0,end:0}}else u=null;En={activeElementDetached:null,focusedElem:s,selectionRange:u},$t=!1,Ks=a;do{try{bu()}catch(e){if(null===Ks)throw Error(o(330));Cu(Ks,e),Ks=Ks.nextEffect}}while(null!==Ks);Ks=a;do{try{for(s=e,u=t;null!==Ks;){var E=Ks.effectTag;if(16&E&&je(Ks.stateNode,""),128&E){var S=Ks.alternate;if(null!==S){var b=S.ref;null!==b&&("function"==typeof b?b(null):b.current=null)}}switch(1038&E){case 2:ps(Ks),Ks.effectTag&=-3;break;case 6:ps(Ks),Ks.effectTag&=-3,ms(Ks.alternate,Ks);break;case 1024:Ks.effectTag&=-1025;break;case 1028:Ks.effectTag&=-1025,ms(Ks.alternate,Ks);break;case 4:ms(Ks.alternate,Ks);break;case 8:vs(s,c=Ks,u),ds(c)}Ks=Ks.nextEffect}}catch(e){if(null===Ks)throw Error(o(330));Cu(Ks,e),Ks=Ks.nextEffect}}while(null!==Ks);if(b=En,S=_n(),E=b.focusedElem,u=b.selectionRange,S!==E&&E&&E.ownerDocument&&hn(E.ownerDocument.documentElement,E)){null!==u&&vn(E)&&(S=u.start,void 0===(b=u.end)&&(b=S),"selectionStart"in E?(E.selectionStart=S,E.selectionEnd=Math.min(b,E.value.length)):(b=(S=E.ownerDocument||document)&&S.defaultView||window).getSelection&&(b=b.getSelection(),c=E.textContent.length,s=Math.min(u.start,c),u=void 0===u.end?s:Math.min(u.end,c),!b.extend&&s>u&&(c=u,u=s,s=c),c=pn(E,s),d=pn(E,u),c&&d&&(1!==b.rangeCount||b.anchorNode!==c.node||b.anchorOffset!==c.offset||b.focusNode!==d.node||b.focusOffset!==d.offset)&&((S=S.createRange()).setStart(c.node,c.offset),b.removeAllRanges(),s>u?(b.addRange(S),b.extend(d.node,d.offset)):(S.setEnd(d.node,d.offset),b.addRange(S))))),S=[];for(b=E;b=b.parentNode;)1===b.nodeType&&S.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof E.focus&&E.focus(),E=0;E<S.length;E++)(b=S[E]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!yn,En=yn=null,e.current=n,Ks=a;do{try{for(E=e;null!==Ks;){var T=Ks.effectTag;if(36&T&&ls(E,Ks.alternate,Ks),128&T){S=void 0;var w=Ks.ref;if(null!==w){var A=Ks.stateNode;switch(Ks.tag){case 5:S=A;break;default:S=A}"function"==typeof w?w(S):w.current=S}}Ks=Ks.nextEffect}}catch(e){if(null===Ks)throw Error(o(330));Cu(Ks,e),Ks=Ks.nextEffect}}while(null!==Ks);Ks=null,Fa(),Ps=i}else e.current=n;if($s)$s=!1,zs=e,qs=t;else for(Ks=a;null!==Ks;)t=Ks.nextEffect,Ks.nextEffect=null,Ks=t;if(0===(t=e.firstPendingTime)&&(Hs=null),1073741823===t?e===Xs?Qs++:(Qs=0,Xs=e):Qs=0,"function"==typeof Iu&&Iu(n.stateNode,r),iu(e),Ws)throw Ws=!1,e=Vs,Vs=null,e;return 0!=(8&Ps)||qa(),null}function bu(){for(;null!==Ks;){var e=Ks.effectTag;0!=(256&e)&&os(Ks.alternate,Ks),0==(512&e)||$s||($s=!0,$a(97,(function(){return Tu(),null}))),Ks=Ks.nextEffect}}function Tu(){if(90!==qs){var e=97<qs?97:qs;return qs=90,Ha(e,wu)}}function wu(){if(null===zs)return!1;var e=zs;if(zs=null,0!=(48&Ps))throw Error(o(331));var t=Ps;for(Ps|=Os,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ss(5,n),us(5,n)}}catch(t){if(null===e)throw Error(o(330));Cu(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ps=t,qa(),!0}function Au(e,t,n){fi(e,t=Es(e,t=ns(n,t),1073741823)),null!==(e=ru(e,1073741823))&&iu(e)}function Cu(e,t){if(3===e.tag)Au(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Au(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){fi(n,e=Ss(n,e=ns(t,e),1073741823)),null!==(n=ru(n,1073741823))&&iu(n);break}}n=n.return}}function Ou(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Rs===e&&Ns===n?Ls===ks||Ls===Is&&1073741823===Us&&Ka()-Ys<500?cu(e,Ns):js=!0:Bu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,iu(e)))}function Mu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=tu(t=eu(),e,null)),null!==(e=ru(e,t))&&iu(e)}bs=function(e,t,n){var r=t.expirationTime;if(null!==e){var a=t.pendingProps;if(e.memoizedProps!==a||va.current)No=!0;else{if(r<n){switch(No=!1,t.tag){case 3:Ko(t),Ro();break;case 5:if(Ui(t),4&t.mode&&1!==n&&a.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:ya(t.type)&&Ta(t);break;case 4:Li(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,a=t.type._context,pa(Za,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?zo(e,t,n):(pa(Gi,1&Gi.current),null!==(t=Xo(e,t,n))?t.sibling:null);pa(Gi,1&Gi.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return Qo(e,t,n);t.effectTag|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null),pa(Gi,Gi.current),!r)return null}return Xo(e,t,n)}No=!1}}else No=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,a=ga(t,_a.current),oi(t,n),a=Qi(null,t,r,e,a,n),t.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ya(r)){var i=!0;Ta(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,li(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&gi(t,r,s,e),a.updater=yi,t.stateNode=a,a._reactInternalFiber=t,Ti(t,r,e,n),t=Yo(null,t,r,!0,i,n)}else t.tag=0,Lo(null,t,a,n),t=t.child;return t;case 16:e:{if(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(a),1!==a._status)throw a._result;switch(a=a._result,t.type=a,i=t.tag=function(e){if("function"==typeof e)return Du(e)?1:0;if(null!=e){if((e=e.$$typeof)===ue)return 11;if(e===de)return 14}return 2}(a),e=Xa(a,e),i){case 0:t=Bo(null,t,a,e,n);break e;case 1:t=jo(null,t,a,e,n);break e;case 11:t=xo(null,t,a,e,n);break e;case 14:t=Uo(null,t,a,Xa(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Bo(e,t,r,a=t.elementType===r?a:Xa(r,a),n);case 1:return r=t.type,a=t.pendingProps,jo(e,t,r,a=t.elementType===r?a:Xa(r,a),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ci(e,t),hi(t,r,null,n),(r=t.memoizedState.element)===a)Ro(),t=Xo(e,t,n);else{if((a=t.stateNode.hydrate)&&(Ao=An(t.stateNode.containerInfo.firstChild),wo=t,a=Co=!0),a)for(n=Ii(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Lo(e,t,r,n),Ro();t=t.child}return t;case 5:return Ui(t),null===e&&Io(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,bn(r,a)?s=null:null!==i&&bn(r,i)&&(t.effectTag|=16),Go(e,t),4&t.mode&&1!==n&&a.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Lo(e,t,s,n),t=t.child),t;case 6:return null===e&&Io(t),null;case 13:return zo(e,t,n);case 4:return Li(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Mi(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xo(e,t,r,a=t.elementType===r?a:Xa(r,a),n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var u=t.type._context;if(pa(Za,u._currentValue),u._currentValue=i,null!==s)if(u=s.value,0===(i=jr(u,i)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,i):1073741823))){if(s.children===a.children&&!va.current){t=Xo(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&i)){1===u.tag&&((c=di(n,null)).tag=2,fi(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),ii(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Lo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,oi(t,n),r=r(a=si(a,i.unstable_observedBits)),t.effectTag|=1,Lo(e,t,r,n),t.child;case 14:return i=Xa(a=t.type,t.pendingProps),Uo(e,t,a,i=Xa(a.type,i),r,n);case 15:return Fo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Xa(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,ya(r)?(e=!0,Ta(t)):e=!1,oi(t,n),Si(t,r,a),Ti(t,r,a,n),Yo(null,t,r,!0,e,n);case 19:return Qo(e,t,n)}throw Error(o(156,t.tag))};var Iu=null,ku=null;function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ru(e,t,n,r){return new Pu(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,a,i){var s=2;if(r=e,"function"==typeof e)Du(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ne:return xu(n.children,a,i,t);case se:s=8,a|=7;break;case re:s=8,a|=1;break;case ae:return(e=Ru(12,n,t,8|a)).elementType=ae,e.type=ae,e.expirationTime=i,e;case le:return(e=Ru(13,n,t,a)).type=le,e.elementType=le,e.expirationTime=i,e;case ce:return(e=Ru(19,n,t,a)).elementType=ce,e.expirationTime=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ie:s=10;break e;case oe:s=9;break e;case ue:s=11;break e;case de:s=14;break e;case fe:s=16,r=null;break e;case pe:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ru(s,n,t,a)).elementType=e,t.type=r,t.expirationTime=i,t}function xu(e,t,n,r){return(e=Ru(7,e,r,t)).expirationTime=n,e}function Uu(e,t,n){return(e=Ru(6,e,null,t)).expirationTime=n,e}function Fu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Bu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function ju(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Yu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ku(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Wu(e,t,n,r){var a=t.current,i=eu(),s=vi.suspense;i=tu(i,a,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ya(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(ya(l)){n=ba(n,l,u);break e}}n=u}else n=ha;return null===t.context?t.context=n:t.pendingContext=n,(t=di(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fi(a,t),nu(a,i),i}function Vu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Hu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function $u(e,t){Hu(e,t),(e=e.alternate)&&Hu(e,t)}function zu(e,t,n){var r=new Gu(e,t,n=null!=n&&!0===n.hydrate),a=Ru(3,null,null,2===t?7:1===t?3:0);r.current=a,a.stateNode=r,li(a),e[kn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);Ot.forEach((function(e){_t(e,t,n)})),Mt.forEach((function(e){_t(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"==typeof a){var s=a;a=function(){var e=Vu(o);s.call(e)}}Wu(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new zu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"==typeof a){var u=a;a=function(){var e=Vu(o);u.call(e)}}lu((function(){Wu(t,o,e,a)}))}return Vu(o)}function Qu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Xu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(t))throw Error(o(200));return Qu(e,t,null,n)}zu.prototype.render=function(e){Wu(e,this._internalRoot,null,null)},zu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Wu(null,e,null,(function(){t[kn]=null}))},vt=function(e){if(13===e.tag){var t=Qa(eu(),150,100);nu(e,t),$u(e,t)}},mt=function(e){13===e.tag&&(nu(e,3),$u(e,3))},gt=function(e){if(13===e.tag){var t=eu();nu(e,t=tu(t,e,null)),$u(e,t)}},M=function(e,t,n){switch(t){case"input":if(Ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Nn(r);if(!a)throw Error(o(90));Se(r),Ae(r,a)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&Ie(e,!!n.multiple,t,!1)}},N=uu,L=function(e,t,n,r,a){var i=Ps;Ps|=4;try{return Ha(98,e.bind(null,t,n,r,a))}finally{0===(Ps=i)&&qa()}},x=function(){0==(49&Ps)&&(function(){if(null!==Js){var e=Js;Js=null,e.forEach((function(e,t){Ku(t,e),iu(t)})),qa()}}(),Tu())},U=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&qa()}};var Zu={Events:[Rn,Dn,Nn,C,T,jn,function(e){it(e,Bn)},R,D,Xt,ut,Tu,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Iu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},ku=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}})(a({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Pn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zu,t.createPortal=Xu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Ps))throw Error(o(187));var n=Ps;Ps|=1;try{return Ha(99,e.bind(null,t))}finally{Ps=n,qa()}},t.hydrate=function(e,t,n){if(!qu(t))throw Error(o(200));return Ju(null,e,t,!0,n)},t.render=function(e,t,n){if(!qu(t))throw Error(o(200));return Ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qu(e))throw Error(o(40));return!!e._reactRootContainer&&(lu((function(){Ju(null,null,e,!1,(function(){e._reactRootContainer=null,e[kn]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_createPortal=function(e,t){return Xu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qu(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return Ju(e,t,n,!1,r)},t.version="16.13.1"},73935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(64448)},25300:(e,t,n)=>{"use strict";t.__esModule=!0,t.useFocusVisibility=function(){return"keyboard"===(0,r.useModality)().activeModality};var r=n(24706)},95454:(e,t,n)=>{"use strict";t.__esModule=!0,t.useFocus=function(e){var t=e.disabled,n=e.onBlur,r=e.onBlurCapture,u=e.onFocus,l=e.onFocusCapture,c=e.onFocusChange,d=a.default.useRef(null);return a.default.useCallback((function(e){function a(e){t||(null!=n&&n(e),null!=c&&c(!1,e))}function f(e){t||(null!=u&&u(e),null!=c&&c(!0,e))}if(null!==e)d.current=e,(0,i.addEvent)(e,"blur",a,o),(0,i.addEvent)(e,"focus",f,o),null!=r&&(0,i.addEvent)(e,"blur",!t&&r||null,s),null!=l&&(0,i.addEvent)(e,"focus",!t&&l||null,s);else if(null!=d.current){var p=d.current;(0,i.removeEvent)(p,"blur",a,o),(0,i.removeEvent)(p,"focus",f,o),(0,i.removeEvent)(p,"blur",r,s),(0,i.removeEvent)(p,"focus",l,s),d.current=null}}),[t,n,r,u,l,c])};var r,a=(r=n(67294))&&r.__esModule?r:{default:r},i=n(62958);var o={passive:!0},s={capture:!0,passive:!0}},24706:(e,t,n)=>{"use strict";t.__esModule=!0,t.useModality=function(){var e=r.default.useState({activeModality:(0,a.getActiveModality)(),modality:(0,a.getModality)()}),t=e[0],n=e[1];return(0,i.default)((function(){return(0,a.addModalityListener)((function(e){n(e)}))}),[]),t};var r=o(n(67294)),a=n(12139),i=o(n(24739));function o(e){return e&&e.__esModule?e:{default:e}}},62958:(e,t,n)=>{"use strict";var r;t.__esModule=!0,t.addEvent=function(e,t,n,r){var a=s(t,r);if(null!=n){var o=e;return o.addEventListener(t,n,a),function(){null!=o&&o.removeEventListener(t,n,a)}}return i},t.removeEvent=function(e,t,n,r){var a=s(t,r);if(null!=n){e.removeEventListener(t,n,a)}};var a=(0,((r=n(68485))&&r.__esModule?r:{default:r}).default)(),i=function(){},o={touchstart:!0,touchmove:!0,scroll:!0};function s(e,t){if(null!=t){var n=t.capture,r=t.passive;return a?null==r||!0===o[e]?{capture:n,passive:!0}:t:Boolean(n)}return!1}},12139:(e,t,n)=>{"use strict";t.__esModule=!0,t.getActiveModality=function(){return l},t.getModality=function(){return c},t.addModalityListener=function(e){return f.add(e),function(){f.delete(e)}},t.testOnly_resetActiveModality=function(){d=!1,l=p,c=p};var r=n(62958),a=o(n(3806)),i=o(n(36172));function o(e){return e&&e.__esModule?e:{default:e}}var s,u,l="keyboard",c="keyboard",d=!1,f=new Set,p="keyboard",h="mouse",_="touch",v="contextmenu",m="mousedown",g="mousemove",y="mouseover",E="mouseup",S="pointerdown",b="pointermove",T="pointerover",w="scroll",A="selectionchange",C="touchcancel",O="touchmove",M="touchstart",I={capture:!0,passive:!0};function k(){null==s&&null==u||(null!=s&&(c=s,s=null),null!=u&&(l=u,u=null),R())}function P(e){var t=e.type;if((0,i.default)()){if(t===S)return void(l!==e.pointerType&&(c=e.pointerType,l=e.pointerType,R()));if(t===b||t===T)return void(c!==e.pointerType&&(c=e.pointerType,R()))}else{if(d||(t===m&&l!==h&&(c=h,l=h,R()),t!==g&&t!==y||c!==h&&(c=h,R())),t===M)return d=!0,e.touches&&e.touches.length>1&&(d=!1),void(l!==_&&(c=_,l=_,R()));t!==v&&t!==E&&t!==A&&t!==w&&t!==C&&t!==O||(d=!1)}}function R(){var e={activeModality:l,modality:c};f.forEach((function(t){t(e)}))}(0,a.default)()&&((0,r.addEvent)(window,"blur",(function(){s=c,u=l,l=p,c=p,R(),d=!1})),(0,r.addEvent)(window,"focus",(function(){k()})),(0,r.addEvent)(document,"keydown",(function(e){e.metaKey||e.altKey||e.ctrlKey||c!==p&&(c=p,l=p,R())}),I),(0,r.addEvent)(document,"visibilitychange",(function(){"hidden"!==document.visibilityState&&k()}),I),[S,b,T,v,m,g,y,E,w,A,C,O,M].forEach((function(e){(0,r.addEvent)(document,e,P,I)})))},3806:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(){return!("undefined"==typeof window||!window.document||!window.document.createElement)},e.exports=t.default},68485:(e,t,n)=>{"use strict";var r;t.__esModule=!0,t.default=function(){var e=!1;if(a)try{var t={};Object.defineProperty(t,"passive",{get:function(){return e=!0,!1}}),window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e};var a=(0,((r=n(3806))&&r.__esModule?r:{default:r}).default)();e.exports=t.default},36172:(e,t)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=function(){return!("undefined"==typeof window||null==window.PointerEvent)};t.default=n,e.exports=t.default},24739:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;var r,a=n(67294);var i=(0,((r=n(3806))&&r.__esModule?r:{default:r}).default)()?a.useLayoutEffect:a.useEffect;t.default=i,e.exports=t.default},22885:(e,t,n)=>{"use strict";e.exports=n(25300)},62488:(e,t,n)=>{"use strict";e.exports=n(95454)},79647:(e,t,n)=>{"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(34088)),i=u(n(67294)),o=u(n(45697)),s=(u(n(30670)),n(6491));function u(e){return e&&e.__esModule?e:{default:e}}o.default.any,o.default.func,o.default.node;var l=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.performEnter(e,i.childRefs[e]):i.setState((function(t){var n=r({},t.children);return delete n[e],{children:n}}))},i.childRefs=Object.create(null),i.state={children:(0,s.getChildMapping)(n.children)},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var a=n&&n.hasOwnProperty(r);!t[r]||a||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var i in n){var o=t&&t.hasOwnProperty(i);!n[i]||o||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var o="string"!=typeof r.ref,s=e.props.childFactory(r),u=function(t){e.childRefs[n]=t};s===r&&o&&(u=(0,a.default)(r.ref,u)),t.push(i.default.cloneElement(s,{key:n,ref:u}))}};for(var o in this.state.children)n(o);var s=r({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,i.default.createElement(this.props.component,s,t)},t}(i.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},53175:(e,t,n)=>{"use strict";var r,a=n(79647),i=(r=a)&&r.__esModule?r:{default:r};e.exports={TransitionGroup:i.default}},6491:(e,t,n)=>{"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},a=[];for(var i in e)t.hasOwnProperty(i)?a.length&&(r[i]=a,a=[]):a.push(i);var o=void 0,s={};for(var u in t){if(r.hasOwnProperty(u))for(o=0;o<r[u].length;o++){var l=r[u][o];s[r[u][o]]=n(l)}s[u]=n(u)}for(o=0;o<a.length;o++)s[a[o]]=n(a[o]);return s};var r=n(67294)},72408:(e,t,n)=>{"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(27418),a="function"==typeof Symbol&&Symbol.for,i=a?Symbol.for("react.element"):60103,o=a?Symbol.for("react.portal"):60106,s=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,l=a?Symbol.for("react.profiler"):60114,c=a?Symbol.for("react.provider"):60109,d=a?Symbol.for("react.context"):60110,f=a?Symbol.for("react.forward_ref"):60112,p=a?Symbol.for("react.suspense"):60113,h=a?Symbol.for("react.memo"):60115,_=a?Symbol.for("react.lazy"):60116,v="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function E(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}function S(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||g}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=E.prototype;var T=b.prototype=new S;T.constructor=b,r(T,E.prototype),T.isPureReactComponent=!0;var w={current:null},A=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)A.call(t,r)&&!C.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:w.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g,k=[];function P(e,t,n,r){if(k.length){var a=k.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>k.length&&k.push(e)}function D(e,t,n,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var s=!1;if(null===e)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case o:s=!0}}if(s)return n(r,e,""===t?"."+L(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=t+L(a=e[u],u);s+=D(a,l,n,r)}else if(null===e||"object"!=typeof e?l=null:l="function"==typeof(l=v&&e[v]||e["@@iterator"])?l:null,"function"==typeof l)for(e=l.call(e),u=0;!(a=e.next()).done;)s+=D(a=a.value,l=t+L(a,u++),n,r);else if("object"===a)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function N(e,t,n){return null==e?0:D(e,"",t,n)}function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function x(e,t){e.func.call(e.context,t,e.count++)}function U(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(M(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(I,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,a){var i="";null!=n&&(i=(""+n).replace(I,"$&/")+"/"),N(e,U,t=P(t,i,r,a)),R(t)}var G={current:null};function B(){var e=G.current;if(null===e)throw Error(m(321));return e}var j={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;N(e,x,t=P(null,null,t,n)),R(t)},count:function(e){return N(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!M(e))throw Error(m(143));return e}},t.Component=E,t.Fragment=s,t.Profiler=l,t.PureComponent=b,t.StrictMode=u,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,n){if(null==e)throw Error(m(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)A.call(t,c)&&!C.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:_,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return B().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,n){return B().useReducer(e,t,n)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.13.1"},67294:(e,t,n)=>{"use strict";e.exports=n(72408)},35666:(e,t,n)=>{var r=n(60077).default,a=function(e){"use strict";var t,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),o=new M(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return k()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=A(o,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",_={};function v(){}function m(){}function g(){}var y={};y[o]=function(){return this};var E=Object.getPrototypeOf,S=E&&E(E(I([])));S&&S!==n&&a.call(S,o)&&(y=S);var b=g.prototype=v.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e,t){function n(r,i,o,s){var u=c(e[r],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var r;this._invoke=function(e,a){function i(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(i,i):i()}}function A(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var a=c(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,_;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:k}}function k(){return{value:t,done:!0}}return m.prototype=b.constructor=g,g.constructor=m,g[u]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},T(w.prototype),w.prototype[s]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,a,i,o){void 0===o&&(o=r);var s=new w(l(t,n,a,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(b),b[u]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=a}catch(e){Function("r","regeneratorRuntime = r")(a)}},91033:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),a="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&u()}function s(){o(i)}function u(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);a=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},f=g(0,0,0,0);function p(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+p(e["border-"+n+"-width"])}),0)}function _(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=d(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],i=e["padding-"+a];t[a]=p(i)}return t}(r),i=a.left+a.right,o=a.top+a.bottom,s=p(r.width),u=p(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=h(r,"left","right")+i),Math.round(u+o)!==n&&(u-=h(r,"top","bottom")+o)),!function(e){return e===d(e).document.documentElement}(e)){var l=Math.round(s+i)-t,c=Math.round(u+o)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return g(a.left,a.top,s,u)}var v="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function m(e){return a?v(e)?function(e){var t=e.getBBox();return g(0,0,t.width,t.height)}(e):_(e):f}function g(e,t,n,r){return{x:e,y:t,width:n,height:r}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),E=function(e,t){var n,r,a,i,o,s,u,l=(r=(n=t).x,a=n.y,i=n.width,o=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(s.prototype),c(u,{x:r,y:a,width:i,height:o,top:a,right:r+i,bottom:o+a,left:r}),u);c(this,{target:e,contentRect:l})},S=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new E(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),b="undefined"!=typeof WeakMap?new WeakMap:new r,T=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new S(t,n,this);b.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){T.prototype[e]=function(){var t;return(t=b.get(this))[e].apply(t,arguments)}}));const w=void 0!==i.ResizeObserver?i.ResizeObserver:T},60053:(e,t)=>{"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n,r,a,i,o;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,l=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(l,0),e}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(l,0))},r=function(e,t){u=setTimeout(e,t)},a=function(){clearTimeout(u)},i=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,f=window.Date,p=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var _=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var v=f.now();t.unstable_now=function(){return f.now()-v}}var m=!1,g=null,y=-1,E=5,S=0;i=function(){return t.unstable_now()>=S},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):E=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,T=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();S=e+E;try{g(!0,e)?T.postMessage(null):(m=!1,g=null)}catch(e){throw T.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,T.postMessage(null))},r=function(e,n){y=p((function(){e(t.unstable_now())}),n)},a=function(){h(y),y=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<O(a,t)))break e;e[r]=t,e[n]=a,n=r}}function A(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,u=e[s];if(void 0!==o&&0>O(o,n))void 0!==u&&0>O(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==u&&0>O(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function O(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var M=[],I=[],k=1,P=null,R=3,D=!1,N=!1,L=!1;function x(e){for(var t=A(I);null!==t;){if(null===t.callback)C(I);else{if(!(t.startTime<=e))break;C(I),t.sortIndex=t.expirationTime,w(M,t)}t=A(I)}}function U(e){if(L=!1,x(e),!N)if(null!==A(M))N=!0,n(F);else{var t=A(I);null!==t&&r(U,t.startTime-e)}}function F(e,n){N=!1,L&&(L=!1,a()),D=!0;var o=R;try{for(x(n),P=A(M);null!==P&&(!(P.expirationTime>n)||e&&!i());){var s=P.callback;if(null!==s){P.callback=null,R=P.priorityLevel;var u=s(P.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?P.callback=u:P===A(M)&&C(M),x(n)}else C(M);P=A(M)}if(null!==P)var l=!0;else{var c=A(I);null!==c&&r(U,c.startTime-n),l=!1}return l}finally{P=null,R=o,D=!1}}function G(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||D||(N=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return A(M)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();if("object"==typeof o&&null!==o){var u=o.delay;u="number"==typeof u&&0<u?s+u:s,o="number"==typeof o.timeout?o.timeout:G(e)}else o=G(e),u=s;return e={id:k++,callback:i,priorityLevel:e,startTime:u,expirationTime:o=u+o,sortIndex:-1},u>s?(e.sortIndex=u,w(I,e),null===A(M)&&e===A(I)&&(L?a():L=!0,r(U,u-s))):(e.sortIndex=o,w(M,e),N||D||(N=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();x(e);var n=A(M);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<P.expirationTime||i()},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},63840:(e,t,n)=>{"use strict";e.exports=n(60053)},96774:e=>{e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var l=i[u];if(!s(l))return!1;var c=e[l],d=t[l];if(!1===(a=n?n.call(r,c,d,l):void 0)||void 0===a&&c!==d)return!1}return!0}},88388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{focusable:()=>h,isFocusable:()=>m,isTabbable:()=>_,tabbable:()=>p});
/*!
* tabbable 5.1.5
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
var r=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],a=r.join(","),i="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,o=function(e,t,n){var r=Array.prototype.slice.apply(e.querySelectorAll(a));return t&&i.call(e,a)&&r.unshift(e),r=r.filter(n)},s=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName&&"DETAILS"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t},u=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},l=function(e){return"INPUT"===e.tagName},c=function(e){return function(e){return l(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||e.ownerDocument,r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var a=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!a||a===e}(e)},d=function(e){return!(e.disabled||function(e){return l(e)&&"hidden"===e.type}(e)||function(e){if("hidden"===getComputedStyle(e).visibility)return!0;var t=i.call(e,"details>summary:first-of-type")?e.parentElement:e;if(i.call(t,"details:not([open]) *"))return!0;for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(e))},f=function(e){return!(!d(e)||c(e)||s(e)<0)},p=function(e,t){var n=[],r=[];return o(e,(t=t||{}).includeContainer,f).forEach((function(e,t){var a=s(e);0===a?n.push(e):r.push({documentOrder:t,tabIndex:a,node:e})})),r.sort(u).map((function(e){return e.node})).concat(n)},h=function(e,t){return o(e,(t=t||{}).includeContainer,d)},_=function(e){if(!e)throw new Error("No node provided");return!1!==i.call(e,a)&&f(e)},v=r.concat("iframe").join(","),m=function(e){if(!e)throw new Error("No node provided");return!1!==i.call(e,v)&&d(e)}},94633:(e,t)=>{function n(e,t){for(var n=e.length,r=new Array(n),a={},i=n;i--;)a[i]||o(e[i],i,[]);return r;function o(i,s,u){if(u.indexOf(i)>=0)throw new Error("Cyclic dependency: "+JSON.stringify(i));if(!~e.indexOf(i))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(i));if(!a[s]){a[s]=!0;var l=t.filter((function(e){return e[0]===i}));if(s=l.length){var c=u.concat(i);do{var d=l[--s][1];o(d,e.indexOf(d),c)}while(s)}r[--n]=i}}}e.exports=t=function(e){return n(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];t.indexOf(a[0])<0&&t.push(a[0]),t.indexOf(a[1])<0&&t.push(a[1])}return t}(e),e)},t.array=n},42238:function(e,t,n){var r;
/*!
 * UAParser.js v0.7.20
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(a,i){"use strict";var o="function",s="undefined",u="object",l="model",c="name",d="type",f="vendor",p="version",h="architecture",_="console",v="mobile",m="tablet",g="smarttv",y="wearable",E={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:i},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},S={rgx:function(e,t){for(var n,r,a,s,l,c,d=0;d<t.length&&!l;){var f=t[d],p=t[d+1];for(n=r=0;n<f.length&&!l;)if(l=f[n++].exec(e))for(a=0;a<p.length;a++)c=l[++r],typeof(s=p[a])===u&&s.length>0?2==s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3==s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):i:this[s[0]]=c?s[1].call(this,c,s[2]):i:4==s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):i):this[s]=c||i;d+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(E.has(t[n][r],e))return"?"===n?i:n}else if(E.has(t[n],e))return"?"===n?i:n;return e}},b={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},T={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,p],[/(opios)[\/\s]+([\w\.]+)/i],[[c,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[c,p],[/(konqueror)\/([\w\.]+)/i],[[c,"Konqueror"],p],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],p],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[c,"Edge"],p],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],p],[/(puffin)\/([\w\.]+)/i],[[c,"Puffin"],p],[/(focus)\/([\w\.]+)/i],[[c,"Firefox Focus"],p],[/(opt)\/([\w\.]+)/i],[[c,"Opera Touch"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[c,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],p],[/(windowswechat qbcore)\/([\w\.]+)/i],[[c,"WeChat(Win) Desktop"],p],[/(micromessenger)\/([\w\.]+)/i],[[c,"WeChat"],p],[/(brave)\/([\w\.]+)/i],[[c,"Brave"],p],[/(qqbrowserlite)\/([\w\.]+)/i],[c,p],[/(QQ)\/([\d\.]+)/i],[c,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[c,p],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[c,p],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[c,p],[/(MetaSr)[\/\s]?([\w\.]+)/i],[c],[/(LBBROWSER)/i],[c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[c,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[c,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[c,p],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[c,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[c,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[c,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[c,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[c,"Sailfish Browser"],p],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[c,p],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],p],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[c,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[c,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[c,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[p,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[p,c],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[c,"GSA"],p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[p,S.str,b.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[c,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,E.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",E.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,E.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[l,f,[d,m]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[f,"Apple"],[d,m]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[f,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[f,l,[d,m]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[l,[f,"Amazon"],[d,m]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[l,S.str,b.device.amazon.model],[f,"Amazon"],[d,v]],[/android.+aft([bms])\sbuild/i],[l,[f,"Amazon"],[d,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,f,[d,v]],[/\((ip[honed|\s\w*]+);/i],[l,[f,"Apple"],[d,v]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[f,l,[d,v]],[/\(bb10;\s(\w+)/i],[l,[f,"BlackBerry"],[d,v]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[l,[f,"Asus"],[d,m]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[f,"Sony"],[l,"Xperia Tablet"],[d,m]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,"Sony"],[d,v]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[f,l,[d,_]],[/android.+;\s(shield)\sbuild/i],[l,[f,"Nvidia"],[d,_]],[/(playstation\s[34portablevi]+)/i],[l,[f,"Sony"],[d,_]],[/(sprint\s(\w+))/i],[[f,S.str,b.device.sprint.vendor],[l,S.str,b.device.sprint.model],[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[f,[l,/_/g," "],[d,v]],[/(nexus\s9)/i],[l,[f,"HTC"],[d,m]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[l,[f,"Huawei"],[d,v]],[/(microsoft);\s(lumia[\s\w]+)/i],[f,l,[d,v]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[f,"Microsoft"],[d,_]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,"Microsoft"],[d,v]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[f,"Motorola"],[d,v]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[f,"Motorola"],[d,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[f,E.trim],[l,E.trim],[d,g]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,"Samsung"],[d,g]],[/\(dtv[\);].+(aquos)/i],[l,[f,"Sharp"],[d,g]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[f,"Samsung"],l,[d,m]],[/smart-tv.+(samsung)/i],[f,[d,g],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[f,"Samsung"],l,[d,v]],[/sie-(\w*)/i],[l,[f,"Siemens"],[d,v]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[f,"Nokia"],l,[d,v]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[l,[f,"Acer"],[d,m]],[/android.+([vl]k\-?\d{3})\s+build/i],[l,[f,"LG"],[d,m]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[f,"LG"],l,[d,m]],[/(lg) netcast\.tv/i],[f,l,[d,g]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[l,[f,"LG"],[d,v]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[f,l,[d,m]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[f,"Lenovo"],[d,m]],[/(lenovo)[_\s-]?([\w-]+)/i],[f,l,[d,v]],[/linux;.+((jolla));/i],[f,l,[d,v]],[/((pebble))app\/[\d\.]+\s/i],[f,l,[d,y]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[f,l,[d,v]],[/crkey/i],[[l,"Chromecast"],[f,"Google"]],[/android.+;\s(glass)\s\d/i],[l,[f,"Google"],[d,y]],[/android.+;\s(pixel c)[\s)]/i],[l,[f,"Google"],[d,m]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[l,[f,"Google"],[d,v]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[f,"Xiaomi"],[d,v]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[f,"Xiaomi"],[d,m]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[f,"Meizu"],[d,v]],[/(mz)-([\w-]{2,})/i],[[f,"Meizu"],l,[d,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[l,[f,"OnePlus"],[d,v]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[l,[f,"RCA"],[d,m]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[l,[f,"Dell"],[d,m]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[f,"Verizon"],[d,m]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[f,"Barnes & Noble"],l,[d,m]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[l,[f,"NuVision"],[d,m]],[/android.+;\s(k88)\sbuild/i],[l,[f,"ZTE"],[d,m]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[l,[f,"Swiss"],[d,v]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[l,[f,"Swiss"],[d,m]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[f,"Zeki"],[d,m]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[f,"Dragon Touch"],l,[d,m]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[l,[f,"Insignia"],[d,m]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[l,[f,"NextBook"],[d,m]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[f,"Voice"],l,[d,v]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[f,"LvTel"],l,[d,v]],[/android.+;\s(PH-1)\s/i],[l,[f,"Essential"],[d,v]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[f,"Envizen"],[d,m]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[f,l,[d,m]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[l,[f,"MachSpeed"],[d,m]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[f,l,[d,m]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[l,[f,"Rotor"],[d,m]],[/android.+(KS(.+))\s+build/i],[l,[f,"Amazon"],[d,m]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[f,l,[d,m]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,E.lowerize],f,l],[/[\s\/\(](smart-?tv)[;\)]/i],[[d,g]],[/(android[\w\.\s\-]{0,9});.+build/i],[l,[f,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)/i],[[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,p],[/rv\:([\w\.]{1,9}).+(gecko)/i],[p,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[c,[p,S.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[p,S.str,b.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[c,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[c,"Symbian"],p],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],p],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[c,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],p],[/(sunos)\s?([\w\.\d]*)/i],[[c,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[c,p],[/(haiku)\s(\w+)/i],[c,p],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[p,/_/g,"."],[c,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[c,p]]},w=function(e,t){if("object"==typeof e&&(t=e,e=i),!(this instanceof w))return new w(e,t).getResult();var n=e||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),r=t?E.extend(T,t):T;return this.getBrowser=function(){var e={name:i,version:i};return S.rgx.call(e,n,r.browser),e.major=E.major(e.version),e},this.getCPU=function(){var e={architecture:i};return S.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:i,model:i,type:i};return S.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:i,version:i};return S.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:i,version:i};return S.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};w.VERSION="0.7.20",w.BROWSER={NAME:c,MAJOR:"major",VERSION:p},w.CPU={ARCHITECTURE:h},w.DEVICE={MODEL:l,VENDOR:f,TYPE:d,CONSOLE:_,MOBILE:v,SMARTTV:g,TABLET:m,WEARABLE:y,EMBEDDED:"embedded"},w.ENGINE={NAME:c,VERSION:p},w.OS={NAME:c,VERSION:p},typeof t!==s?(e.exports&&(t=e.exports=w),t.UAParser=w):(r=function(){return w}.call(t,n,t,e))===i||(e.exports=r);var A=a&&(a.jQuery||a.Zepto);if(typeof A!==s&&!A.ua){var C=new w;A.ua=C.getResult(),A.ua.get=function(){return C.getUA()},A.ua.set=function(e){C.setUA(e);var t=C.getResult();for(var n in t)A.ua[n]=t[n]}}}("object"==typeof window?window:this)},35449:function(){
/**
 *
 *
 * @author Jerry Bendy <jerry@icewingcc.com>
 * @licence MIT
 *
 */
!function(e){"use strict";var t,n=e.URLSearchParams&&e.URLSearchParams.prototype.get?e.URLSearchParams:null,r=n&&"a=1"===new n({a:1}).toString(),a=n&&"+"===new n("s=%2B").get("s"),i=!n||((t=new n).append("s"," &"),"s=+%26"===t.toString()),o=c.prototype,s=!(!e.Symbol||!e.Symbol.iterator);if(!(n&&r&&a&&i)){o.append=function(e,t){_(this.__URLSearchParams__,e,t)},o.delete=function(e){delete this.__URLSearchParams__[e]},o.get=function(e){var t=this.__URLSearchParams__;return e in t?t[e][0]:null},o.getAll=function(e){var t=this.__URLSearchParams__;return e in t?t[e].slice(0):[]},o.has=function(e){return e in this.__URLSearchParams__},o.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},o.toString=function(){var e,t,n,r,a=this.__URLSearchParams__,i=[];for(t in a)for(n=d(t),e=0,r=a[t];e<r.length;e++)i.push(n+"="+d(r[e]));return i.join("&")};var u=!!a&&n&&!r&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:u?new Proxy(n,{construct:function(e,t){return new e(new c(t[0]).toString())}}):c});var l=e.URLSearchParams.prototype;l.polyfill=!0,l.forEach=l.forEach||function(e,t){var n=h(this.toString());Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},l.sort=l.sort||function(){var e,t,n,r=h(this.toString()),a=[];for(e in r)a.push(e);for(a.sort(),t=0;t<a.length;t++)this.delete(a[t]);for(t=0;t<a.length;t++){var i=a[t],o=r[i];for(n=0;n<o.length;n++)this.append(i,o[n])}},l.keys=l.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},l.values=l.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},l.entries=l.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},s&&(l[e.Symbol.iterator]=l[e.Symbol.iterator]||l.entries)}function c(e){((e=e||"")instanceof URLSearchParams||e instanceof c)&&(e=e.toString()),this.__URLSearchParams__=h(e)}function d(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function f(e){return decodeURIComponent(e.replace(/\+/g," "))}function p(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s&&(n[e.Symbol.iterator]=function(){return n}),n}function h(e){var t={};if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&_(t,n,e[n]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var r=e.split("&"),a=0;a<r.length;a++){var i=r[a],o=i.indexOf("=");-1<o?_(t,f(i.slice(0,o)),f(i.slice(o+1))):i&&_(t,f(i),"")}}return t}function _(e,t,n){var r="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);t in e?e[t].push(r):e[t]=[r]}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this)},8575:(e,t,n)=>{"use strict";var r=n(74971),a=n(62502);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){a.isString(e)&&(e=y(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),d=["%","/","?",";","#"].concat(c),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(17673);function y(e,t,n){if(e&&a.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var y=e=l.join(s);if(y=y.trim(),!n&&1===e.split("#").length){var E=u.exec(y);if(E)return this.path=y,this.href=y,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=o.exec(y);if(S){var b=(S=S[0]).toLowerCase();this.protocol=b,y=y.substr(S.length)}if(n||S||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===y.substr(0,2);!T||S&&v[S]||(y=y.substr(2),this.slashes=!0)}if(!v[S]&&(T||S&&!m[S])){for(var w,A,C=-1,O=0;O<f.length;O++){-1!==(M=y.indexOf(f[O]))&&(-1===C||M<C)&&(C=M)}-1!==(A=-1===C?y.lastIndexOf("@"):y.lastIndexOf("@",C))&&(w=y.slice(0,A),y=y.slice(A+1),this.auth=decodeURIComponent(w)),C=-1;for(O=0;O<d.length;O++){var M;-1!==(M=y.indexOf(d[O]))&&(-1===C||M<C)&&(C=M)}-1===C&&(C=y.length),this.host=y.slice(0,C),y=y.slice(C),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var k=this.hostname.split(/\./),P=(O=0,k.length);O<P;O++){var R=k[O];if(R&&!R.match(p)){for(var D="",N=0,L=R.length;N<L;N++)R.charCodeAt(N)>127?D+="x":D+=R[N];if(!D.match(p)){var x=k.slice(0,O),U=k.slice(O+1),F=R.match(h);F&&(x.push(F[1]),U.unshift(F[2])),U.length&&(y="/"+U.join(".")+y),this.hostname=x.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var G=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+G,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!_[b])for(O=0,P=c.length;O<P;O++){var j=c[O];if(-1!==y.indexOf(j)){var Y=encodeURIComponent(j);Y===j&&(Y=escape(j)),y=y.split(j).join(Y)}}var K=y.indexOf("#");-1!==K&&(this.hash=y.substr(K),y=y.slice(0,K));var W=y.indexOf("?");if(-1!==W?(this.search=y.substr(W),this.query=y.substr(W+1),t&&(this.query=g.parse(this.query)),y=y.slice(0,W)):t&&(this.search="",this.query={}),y&&(this.pathname=y),m[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var V=this.search||"";this.path=G+V}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=g.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(a.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=e[c])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var _=n.pathname||"",g=n.search||"";n.path=_+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=E||y||n.host&&e.pathname,b=S,T=n.pathname&&n.pathname.split("/")||[],w=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),S=S&&(""===h[0]||""===T[0])),E)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,T=h;else if(h.length)T||(T=[]),T.pop(),T=T.concat(h),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(w)n.hostname=n.host=T.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift());return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=T.slice(-1)[0],C=(n.host||e.host||T.length>1)&&("."===A||".."===A)||""===A,O=0,M=T.length;M>=0;M--)"."===(A=T[M])?T.splice(M,1):".."===A?(T.splice(M,1),O++):O&&(T.splice(M,1),O--);if(!S&&!b)for(;O--;O)T.unshift("..");!S||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),C&&"/"!==T.join("/").substr(-1)&&T.push("");var I,k=""===T[0]||T[0]&&"/"===T[0].charAt(0);w&&(n.hostname=n.host=k?"":T.length?T.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift()));return(S=S||n.host&&T.length)&&!k&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},62502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},12641:(e,t,n)=>{var r,a;/*! VelocityJS.org (1.5.2). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */!function(e){"use strict";if(!e.jQuery){var t=function(e,n){return new t.fn.init(e,n)};t.isWindow=function(e){return e&&e===e.window},t.type=function(e){return e?"object"==typeof e||"function"==typeof e?r[i.call(e)]||"object":typeof e:e+""},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isPlainObject=function(e){var n;if(!e||"object"!==t.type(e)||e.nodeType||t.isWindow(e))return!1;try{if(e.constructor&&!a.call(e,"constructor")&&!a.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(n in e);return void 0===n||a.call(e,n)},t.each=function(e,t,n){var r=0,a=e.length,i=u(e);if(n){if(i)for(;r<a&&!1!==t.apply(e[r],n);r++);else for(r in e)if(e.hasOwnProperty(r)&&!1===t.apply(e[r],n))break}else if(i)for(;r<a&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(e[r],r,e[r]))break;return e},t.data=function(e,r,a){if(void 0===a){var i=e[t.expando],o=i&&n[i];if(void 0===r)return o;if(o&&r in o)return o[r]}else if(void 0!==r){var s=e[t.expando]||(e[t.expando]=++t.uuid);return n[s]=n[s]||{},n[s][r]=a,a}},t.removeData=function(e,r){var a=e[t.expando],i=a&&n[a];i&&(r?t.each(r,(function(e,t){delete i[t]})):delete n[a])},t.extend=function(){var e,n,r,a,i,o,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[u]||{},u++),"object"!=typeof s&&"function"!==t.type(s)&&(s={}),u===l&&(s=this,u--);u<l;u++)if(i=arguments[u])for(a in i)i.hasOwnProperty(a)&&(e=s[a],s!==(r=i[a])&&(c&&r&&(t.isPlainObject(r)||(n=t.isArray(r)))?(n?(n=!1,o=e&&t.isArray(e)?e:[]):o=e&&t.isPlainObject(e)?e:{},s[a]=t.extend(c,o,r)):void 0!==r&&(s[a]=r)));return s},t.queue=function(e,n,r){if(e){n=(n||"fx")+"queue";var a,i,o,s=t.data(e,n);return r?(!s||t.isArray(r)?s=t.data(e,n,(o=i||[],(a=r)&&(u(Object(a))?function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;)e[a++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[a++]=t[r++];e.length=a}(o,"string"==typeof a?[a]:a):[].push.call(o,a)),o)):s.push(r),s):s||[]}},t.dequeue=function(e,n){t.each(e.nodeType?[e]:e,(function(e,r){n=n||"fx";var a=t.queue(r,n),i=a.shift();"inprogress"===i&&(i=a.shift()),i&&("fx"===n&&a.unshift("inprogress"),i.call(r,(function(){t.dequeue(r,n)})))}))},t.fn=t.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){var e=this[0],n=function(e){for(var t=e.offsetParent;t&&"html"!==t.nodeName.toLowerCase()&&t.style&&"static"===t.style.position.toLowerCase();)t=t.offsetParent;return t||document}(e),r=this.offset(),a=/^(?:body|html)$/i.test(n.nodeName)?{top:0,left:0}:t(n).offset();return r.top-=parseFloat(e.style.marginTop)||0,r.left-=parseFloat(e.style.marginLeft)||0,n.style&&(a.top+=parseFloat(n.style.borderTopWidth)||0,a.left+=parseFloat(n.style.borderLeftWidth)||0),{top:r.top-a.top,left:r.left-a.left}}};var n={};t.expando="velocity"+(new Date).getTime(),t.uuid=0;for(var r={},a=r.hasOwnProperty,i=r.toString,o="Boolean Number String Function Array Date RegExp Object Error".split(" "),s=0;s<o.length;s++)r["[object "+o[s]+"]"]=o[s].toLowerCase();t.fn.init.prototype=t.fn,e.Velocity={Utilities:t}}function u(e){var n=e.length,r=t.type(e);return"function"!==r&&!t.isWindow(e)&&(!(1!==e.nodeType||!n)||("array"===r||0===n||"number"==typeof n&&n>0&&n-1 in e))}}(window),function(i){"use strict";"object"==typeof e.exports?e.exports=i():void 0===(a="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=a)}((function(){"use strict";return function(e,t,n,r){var a,i=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}return r}(),o=(a=0,t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){var t,n=(new Date).getTime();return t=Math.max(0,16-(n-a)),a=n+t,setTimeout((function(){e(n+t)}),t)}),s=function(){var e=t.performance||{};if("function"!=typeof e.now){var n=e.timing&&e.timing.navigationStart?e.timing.navigationStart:(new Date).getTime();e.now=function(){return(new Date).getTime()-n}}return e}();var u=function(){var e=Array.prototype.slice;try{return e.call(n.documentElement),e}catch(t){return function(t,n){var r=this.length;if("number"!=typeof t&&(t=0),"number"!=typeof n&&(n=r),this.slice)return e.call(this,t,n);var a,i=[],o=t>=0?t:Math.max(0,r+t),s=(n<0?r+n:Math.min(n,r))-o;if(s>0)if(i=new Array(s),this.charAt)for(a=0;a<s;a++)i[a]=this.charAt(o+a);else for(a=0;a<s;a++)i[a]=this[o+a];return i}}}(),l=function(){return Array.prototype.includes?function(e,t){return e.includes(t)}:Array.prototype.indexOf?function(e,t){return e.indexOf(t)>=0}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}};function c(e){return f.isWrapped(e)?e=u.call(e):f.isNode(e)&&(e=[e]),e}var d,f={isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isWrapped:function(e){return e&&e!==t&&f.isNumber(e.length)&&!f.isString(e)&&!f.isFunction(e)&&!f.isNode(e)&&(0===e.length||f.isNode(e[0]))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},p=!1;if(e.fn&&e.fn.jquery?(d=e,p=!0):d=t.Velocity.Utilities,i<=8&&!p)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(i<=7)){var h=400,_="swing",v={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t.navigator.userAgent),isAndroid:/Android/i.test(t.navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(t.navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(t.navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[],delayedElements:{count:0}},CSS:{},Utilities:d,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:h,easing:_,begin:r,complete:r,progress:r,display:r,visibility:r,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0,promiseRejectEmpty:!0},init:function(e){d.data(e,"velocity",{isSVG:f.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:5,patch:2},debug:!1,timestamp:!0,pauseAll:function(e){var t=(new Date).getTime();d.each(v.State.calls,(function(t,n){if(n){if(e!==r&&(n[2].queue!==e||!1===n[2].queue))return!0;n[5]={resume:!1}}})),d.each(v.State.delayedElements,(function(e,n){n&&T(n,t)}))},resumeAll:function(e){var t=(new Date).getTime();d.each(v.State.calls,(function(t,n){if(n){if(e!==r&&(n[2].queue!==e||!1===n[2].queue))return!0;n[5]&&(n[5].resume=!0)}})),d.each(v.State.delayedElements,(function(e,n){n&&w(n,t)}))}};t.pageYOffset!==r?(v.State.scrollAnchor=t,v.State.scrollPropertyLeft="pageXOffset",v.State.scrollPropertyTop="pageYOffset"):(v.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,v.State.scrollPropertyLeft="scrollLeft",v.State.scrollPropertyTop="scrollTop");var m=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var a={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:a.v,dv:e(a)}}function n(n,r){var a={dx:n.v,dv:e(n)},i=t(n,.5*r,a),o=t(n,.5*r,i),s=t(n,r,o),u=1/6*(a.dx+2*(i.dx+o.dx)+s.dx),l=1/6*(a.dv+2*(i.dv+o.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function e(t,r,a){var i,o,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0,d=1e-4;for(t=parseFloat(t)||500,r=parseFloat(r)||20,a=a||null,u.tension=t,u.friction=r,o=(i=null!==a)?(c=e(t,r))/a*.016:.016;s=n(s||u,o),l.push(1+s.x),c+=16,Math.abs(s.x)>d&&Math.abs(s.v)>d;);return i?function(e){return l[e*(l.length-1)|0]}:c}}();v.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},d.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],(function(e,t){v.Easings[t[0]]=C.apply(null,t[1])}));var g=v.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%","em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","Q","in","pc","pt","px","deg","grad","rad","turn","s","ms"],colorNames:{aliceblue:"240,248,255",antiquewhite:"250,235,215",aquamarine:"127,255,212",aqua:"0,255,255",azure:"240,255,255",beige:"245,245,220",bisque:"255,228,196",black:"0,0,0",blanchedalmond:"255,235,205",blueviolet:"138,43,226",blue:"0,0,255",brown:"165,42,42",burlywood:"222,184,135",cadetblue:"95,158,160",chartreuse:"127,255,0",chocolate:"210,105,30",coral:"255,127,80",cornflowerblue:"100,149,237",cornsilk:"255,248,220",crimson:"220,20,60",cyan:"0,255,255",darkblue:"0,0,139",darkcyan:"0,139,139",darkgoldenrod:"184,134,11",darkgray:"169,169,169",darkgrey:"169,169,169",darkgreen:"0,100,0",darkkhaki:"189,183,107",darkmagenta:"139,0,139",darkolivegreen:"85,107,47",darkorange:"255,140,0",darkorchid:"153,50,204",darkred:"139,0,0",darksalmon:"233,150,122",darkseagreen:"143,188,143",darkslateblue:"72,61,139",darkslategray:"47,79,79",darkturquoise:"0,206,209",darkviolet:"148,0,211",deeppink:"255,20,147",deepskyblue:"0,191,255",dimgray:"105,105,105",dimgrey:"105,105,105",dodgerblue:"30,144,255",firebrick:"178,34,34",floralwhite:"255,250,240",forestgreen:"34,139,34",fuchsia:"255,0,255",gainsboro:"220,220,220",ghostwhite:"248,248,255",gold:"255,215,0",goldenrod:"218,165,32",gray:"128,128,128",grey:"128,128,128",greenyellow:"173,255,47",green:"0,128,0",honeydew:"240,255,240",hotpink:"255,105,180",indianred:"205,92,92",indigo:"75,0,130",ivory:"255,255,240",khaki:"240,230,140",lavenderblush:"255,240,245",lavender:"230,230,250",lawngreen:"124,252,0",lemonchiffon:"255,250,205",lightblue:"173,216,230",lightcoral:"240,128,128",lightcyan:"224,255,255",lightgoldenrodyellow:"250,250,210",lightgray:"211,211,211",lightgrey:"211,211,211",lightgreen:"144,238,144",lightpink:"255,182,193",lightsalmon:"255,160,122",lightseagreen:"32,178,170",lightskyblue:"135,206,250",lightslategray:"119,136,153",lightsteelblue:"176,196,222",lightyellow:"255,255,224",limegreen:"50,205,50",lime:"0,255,0",linen:"250,240,230",magenta:"255,0,255",maroon:"128,0,0",mediumaquamarine:"102,205,170",mediumblue:"0,0,205",mediumorchid:"186,85,211",mediumpurple:"147,112,219",mediumseagreen:"60,179,113",mediumslateblue:"123,104,238",mediumspringgreen:"0,250,154",mediumturquoise:"72,209,204",mediumvioletred:"199,21,133",midnightblue:"25,25,112",mintcream:"245,255,250",mistyrose:"255,228,225",moccasin:"255,228,181",navajowhite:"255,222,173",navy:"0,0,128",oldlace:"253,245,230",olivedrab:"107,142,35",olive:"128,128,0",orangered:"255,69,0",orange:"255,165,0",orchid:"218,112,214",palegoldenrod:"238,232,170",palegreen:"152,251,152",paleturquoise:"175,238,238",palevioletred:"219,112,147",papayawhip:"255,239,213",peachpuff:"255,218,185",peru:"205,133,63",pink:"255,192,203",plum:"221,160,221",powderblue:"176,224,230",purple:"128,0,128",red:"255,0,0",rosybrown:"188,143,143",royalblue:"65,105,225",saddlebrown:"139,69,19",salmon:"250,128,114",sandybrown:"244,164,96",seagreen:"46,139,87",seashell:"255,245,238",sienna:"160,82,45",silver:"192,192,192",skyblue:"135,206,235",slateblue:"106,90,205",slategray:"112,128,144",snow:"255,250,250",springgreen:"0,255,127",steelblue:"70,130,180",tan:"210,180,140",teal:"0,128,128",thistle:"216,191,216",tomato:"255,99,71",turquoise:"64,224,208",violet:"238,130,238",wheat:"245,222,179",whitesmoke:"245,245,245",white:"255,255,255",yellowgreen:"154,205,50",yellow:"255,255,0"}},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<g.Lists.colors.length;e++){var t="color"===g.Lists.colors[e]?"0 0 0 1":"255 255 255 1";g.Hooks.templates[g.Lists.colors[e]]=["Red Green Blue Alpha",t]}var n,r,a;if(i)for(n in g.Hooks.templates)if(g.Hooks.templates.hasOwnProperty(n)){a=(r=g.Hooks.templates[n])[0].split(" ");var o=r[1].match(g.RegEx.valueSplit);"Color"===a[0]&&(a.push(a.shift()),o.push(o.shift()),g.Hooks.templates[n]=[a.join(" "),o.join(" ")])}for(n in g.Hooks.templates)if(g.Hooks.templates.hasOwnProperty(n))for(var s in a=(r=g.Hooks.templates[n])[0].split(" "))if(a.hasOwnProperty(s)){var u=n+a[s],l=s;g.Hooks.registered[u]=[n,l]}},getRoot:function(e){var t=g.Hooks.registered[e];return t?t[0]:e},getUnit:function(e,t){var n=(e.substr(t||0,5).match(/^[a-z%]+/)||[])[0]||"";return n&&l(g.Lists.units)?n:""},fixColors:function(e){return e.replace(/(rgba?\(\s*)?(\b[a-z]+\b)/g,(function(e,t,n){return g.Lists.colorNames.hasOwnProperty(n)?(t||"rgba(")+g.Lists.colorNames[n]+(t?"":",1)"):t+n}))},cleanRootPropertyValue:function(e,t){return g.RegEx.valueUnwrap.test(t)&&(t=t.match(g.RegEx.valueUnwrap)[1]),g.Values.isCSSNullValue(t)&&(t=g.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=g.Hooks.registered[e];if(n){var r=n[0],a=n[1];return(t=g.Hooks.cleanRootPropertyValue(r,t)).toString().match(g.RegEx.valueSplit)[a]}return t},injectValue:function(e,t,n){var r=g.Hooks.registered[e];if(r){var a,i=r[0],o=r[1];return(a=(n=g.Hooks.cleanRootPropertyValue(i,n)).toString().match(g.RegEx.valueSplit))[o]=t,a.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var r;return r=g.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(r=n.toString().match(g.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return v.State.isFirefox?"filter":"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var a=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=a?a[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(i<=8)switch(e){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=r?r[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){i&&!(i>9)||v.State.isGingerbread||(g.Lists.transformsBase=g.Lists.transformsBase.concat(g.Lists.transforms3D));for(var e=0;e<g.Lists.transformsBase.length;e++)!function(){var t=g.Lists.transformsBase[e];g.Normalizations.registered[t]=function(e,n,a){switch(e){case"name":return"transform";case"extract":return b(n)===r||b(n).transformCache[t]===r?/^scale/i.test(t)?1:0:b(n).transformCache[t].replace(/[()]/g,"");case"inject":var i=!1;switch(t.substr(0,t.length-1)){case"translate":i=!/(%|px|em|rem|vw|vh|\d)$/i.test(a);break;case"scal":case"scale":v.State.isAndroid&&b(n).transformCache[t]===r&&a<1&&(a=1),i=!/(\d)$/i.test(a);break;case"skew":case"rotate":i=!/(deg|\d)$/i.test(a)}return i||(b(n).transformCache[t]="("+a+")"),b(n).transformCache[t]}}}();for(var t=0;t<g.Lists.colors.length;t++)!function(){var e=g.Lists.colors[t];g.Normalizations.registered[e]=function(t,n,a){switch(t){case"name":return e;case"extract":var o;if(g.RegEx.wrappedValueAlreadyExtracted.test(a))o=a;else{var s,u={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(a)?s=u[a]!==r?u[a]:u.black:g.RegEx.isHex.test(a)?s="rgb("+g.Values.hexToRgb(a).join(" ")+")":/^rgba?\(/i.test(a)||(s=u.black),o=(s||a).toString().match(g.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return(!i||i>8)&&3===o.split(" ").length&&(o+=" 1"),o;case"inject":return/^rgb/.test(a)?a:(i<=8?4===a.split(" ").length&&(a=a.split(/\s+/).slice(0,3).join(" ")):3===a.split(" ").length&&(a+=" 1"),(i<=8?"rgb":"rgba")+"("+a.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")")}}}();function n(e,t,n){if("border-box"===g.getPropertyValue(t,"boxSizing").toString().toLowerCase()===(n||!1)){var r,a,i=0,o="width"===e?["Left","Right"]:["Top","Bottom"],s=["padding"+o[0],"padding"+o[1],"border"+o[0]+"Width","border"+o[1]+"Width"];for(r=0;r<s.length;r++)a=parseFloat(g.getPropertyValue(t,s[r])),isNaN(a)||(i+=a);return n?-i:i}return 0}function a(e,t){return function(r,a,i){switch(r){case"name":return e;case"extract":return parseFloat(i)+n(e,a,t);case"inject":return parseFloat(i)-n(e,a,t)+"px"}}}g.Normalizations.registered.innerWidth=a("width",!0),g.Normalizations.registered.innerHeight=a("height",!0),g.Normalizations.registered.outerWidth=a("width"),g.Normalizations.registered.outerHeight=a("height")}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(i||v.State.isAndroid&&!v.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(v.State.prefixMatches[e])return[v.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,r=t.length;n<r;n++){var a;if(a=0===n?e:t[n]+e.replace(/^\w/,(function(e){return e.toUpperCase()})),f.isString(v.State.prefixElement.style[a]))return v.State.prefixMatches[e]=a,[a,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return!e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){if(e)if(e.classList)e.classList.add(t);else if(f.isString(e.className))e.className+=(e.className.length?" ":"")+t;else{var n=e.getAttribute(i<=7?"className":"class")||"";e.setAttribute("class",n+(n?" ":"")+t)}},removeClass:function(e,t){if(e)if(e.classList)e.classList.remove(t);else if(f.isString(e.className))e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ");else{var n=e.getAttribute(i<=7?"className":"class")||"";e.setAttribute("class",n.replace(new RegExp("(^|s)"+t.split(" ").join("|")+"(s|$)","gi")," "))}}},getPropertyValue:function(e,n,a,o){function s(e,n){var a=0;if(i<=8)a=d.css(e,n);else{var u=!1;/^(width|height)$/.test(n)&&0===g.getPropertyValue(e,"display")&&(u=!0,g.setPropertyValue(e,"display",g.Values.getDisplayType(e)));var l,c=function(){u&&g.setPropertyValue(e,"display","none")};if(!o){if("height"===n&&"border-box"!==g.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var f=e.offsetHeight-(parseFloat(g.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(g.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(g.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(g.getPropertyValue(e,"paddingBottom"))||0);return c(),f}if("width"===n&&"border-box"!==g.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(g.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(g.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(g.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(g.getPropertyValue(e,"paddingRight"))||0);return c(),p}}l=b(e)===r?t.getComputedStyle(e,null):b(e).computedStyle?b(e).computedStyle:b(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===n&&(n="borderTopColor"),""!==(a=9===i&&"filter"===n?l.getPropertyValue(n):l[n])&&null!==a||(a=e.style[n]),c()}if("auto"===a&&/^(top|right|bottom|left)$/i.test(n)){var h=s(e,"position");("fixed"===h||"absolute"===h&&/top|left/i.test(n))&&(a=d(e).position()[n]+"px")}return a}var u;if(g.Hooks.registered[n]){var l=n,c=g.Hooks.getRoot(l);a===r&&(a=g.getPropertyValue(e,g.Names.prefixCheck(c)[0])),g.Normalizations.registered[c]&&(a=g.Normalizations.registered[c]("extract",e,a)),u=g.Hooks.extractValue(l,a)}else if(g.Normalizations.registered[n]){var f,p;"transform"!==(f=g.Normalizations.registered[n]("name",e))&&(p=s(e,g.Names.prefixCheck(f)[0]),g.Values.isCSSNullValue(p)&&g.Hooks.templates[n]&&(p=g.Hooks.templates[n][1])),u=g.Normalizations.registered[n]("extract",e,p)}if(!/^[\d-]/.test(u)){var h=b(e);if(h&&h.isSVG&&g.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{u=e.getBBox()[n]}catch(e){u=0}else u=e.getAttribute(n);else u=s(e,g.Names.prefixCheck(n)[0])}return g.Values.isCSSNullValue(u)&&(u=0),v.debug>=2&&console.log("Get "+n+": "+u),u},setPropertyValue:function(e,n,r,a,o){var s=n;if("scroll"===n)o.container?o.container["scroll"+o.direction]=r:"Left"===o.direction?t.scrollTo(r,o.alternateValue):t.scrollTo(o.alternateValue,r);else if(g.Normalizations.registered[n]&&"transform"===g.Normalizations.registered[n]("name",e))g.Normalizations.registered[n]("inject",e,r),s="transform",r=b(e).transformCache[n];else{if(g.Hooks.registered[n]){var u=n,l=g.Hooks.getRoot(n);a=a||g.getPropertyValue(e,l),r=g.Hooks.injectValue(u,r,a),n=l}if(g.Normalizations.registered[n]&&(r=g.Normalizations.registered[n]("inject",e,r),n=g.Normalizations.registered[n]("name",e)),s=g.Names.prefixCheck(n)[0],i<=8)try{e.style[s]=r}catch(e){v.debug&&console.log("Browser does not support ["+r+"] for ["+s+"]")}else{var c=b(e);c&&c.isSVG&&g.Names.SVGAttribute(n)?e.setAttribute(n,r):e.style[s]=r}v.debug>=2&&console.log("Set "+n+" ("+s+"): "+r)}return[s,r]},flushTransformCache:function(e){var t="",n=b(e);if((i||v.State.isAndroid&&!v.State.isChrome)&&n&&n.isSVG){var r=function(t){return parseFloat(g.getPropertyValue(e,t))},a={translate:[r("translateX"),r("translateY")],skewX:[r("skewX")],skewY:[r("skewY")],scale:1!==r("scale")?[r("scale"),r("scale")]:[r("scaleX"),r("scaleY")],rotate:[r("rotateZ"),0,0]};d.each(b(e).transformCache,(function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),a[e]&&(t+=e+"("+a[e].join(" ")+") ",delete a[e])}))}else{var o,s;d.each(b(e).transformCache,(function(n){if(o=b(e).transformCache[n],"transformPerspective"===n)return s=o,!0;9===i&&"rotateZ"===n&&(n="rotate"),t+=n+o+" "})),s&&(t="perspective"+s+" "+t)}g.setPropertyValue(e,"transform",t)}};g.Hooks.register(),g.Normalizations.register(),v.hook=function(e,t,n){var a;return e=c(e),d.each(e,(function(e,i){if(b(i)===r&&v.init(i),n===r)a===r&&(a=g.getPropertyValue(i,t));else{var o=g.setPropertyValue(i,t,n);"transform"===o[0]&&v.CSS.flushTransformCache(i),a=o}})),a};var y=function(){var e;function a(){return i?E.promise||null:o}var i,o,s,u,p,_,m=arguments[0]&&(arguments[0].p||d.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||f.isString(arguments[0].properties));f.isWrapped(this)?(i=!1,s=0,u=this,o=this):(i=!0,s=1,u=m?arguments[0].elements||arguments[0].e:arguments[0]);var E={promise:null,resolver:null,rejecter:null};if(i&&v.Promise&&(E.promise=new v.Promise((function(e,t){E.resolver=e,E.rejecter=t}))),m?(p=arguments[0].properties||arguments[0].p,_=arguments[0].options||arguments[0].o):(p=arguments[s],_=arguments[s+1]),u=c(u)){var S,A=u.length,C=0;if(!/^(stop|finish|finishAll|pause|resume)$/i.test(p)&&!d.isPlainObject(_)){var k=s+1;_={};for(var P=k;P<arguments.length;P++)f.isArray(arguments[P])||!/^(fast|normal|slow)$/i.test(arguments[P])&&!/^\d/.test(arguments[P])?f.isString(arguments[P])||f.isArray(arguments[P])?_.easing=arguments[P]:f.isFunction(arguments[P])&&(_.complete=arguments[P]):_.duration=arguments[P]}switch(p){case"scroll":S="scroll";break;case"reverse":S="reverse";break;case"pause":var R=(new Date).getTime();return d.each(u,(function(e,t){T(t,R)})),d.each(v.State.calls,(function(e,t){var n=!1;t&&d.each(t[1],(function(e,a){var i=_===r?"":_;return!0!==i&&t[2].queue!==i&&(_!==r||!1!==t[2].queue)||(d.each(u,(function(e,r){if(r===a)return t[5]={resume:!1},n=!0,!1})),!n&&void 0)}))})),a();case"resume":return d.each(u,(function(e,t){w(t)})),d.each(v.State.calls,(function(e,t){var n=!1;t&&d.each(t[1],(function(e,a){var i=_===r?"":_;return!0!==i&&t[2].queue!==i&&(_!==r||!1!==t[2].queue)||(!t[5]||(d.each(u,(function(e,r){if(r===a)return t[5].resume=!0,n=!0,!1})),!n&&void 0))}))})),a();case"finish":case"finishAll":case"stop":d.each(u,(function(e,t){b(t)&&b(t).delayTimer&&(clearTimeout(b(t).delayTimer.setTimeout),b(t).delayTimer.next&&b(t).delayTimer.next(),delete b(t).delayTimer),"finishAll"!==p||!0!==_&&!f.isString(_)||(d.each(d.queue(t,f.isString(_)?_:""),(function(e,t){f.isFunction(t)&&t()})),d.queue(t,f.isString(_)?_:"",[]))}));var D=[];return d.each(v.State.calls,(function(e,t){t&&d.each(t[1],(function(n,a){var i=_===r?"":_;if(!0!==i&&t[2].queue!==i&&(_!==r||!1!==t[2].queue))return!0;d.each(u,(function(n,r){if(r===a)if((!0===_||f.isString(_))&&(d.each(d.queue(r,f.isString(_)?_:""),(function(e,t){f.isFunction(t)&&t(null,!0)})),d.queue(r,f.isString(_)?_:"",[])),"stop"===p){var o=b(r);o&&o.tweensContainer&&(!0===i||""===i)&&d.each(o.tweensContainer,(function(e,t){t.endValue=t.currentValue})),D.push(e)}else"finish"!==p&&"finishAll"!==p||(t[2].duration=1)}))}))})),"stop"===p&&(d.each(D,(function(e,t){I(t,!0)})),E.promise&&E.resolver(u)),a();default:if(!d.isPlainObject(p)||f.isEmptyObject(p)){if(f.isString(p)&&v.Redirects[p]){var N=(e=d.extend({},_)).duration,L=e.delay||0;return!0===e.backwards&&(u=d.extend(!0,[],u).reverse()),d.each(u,(function(t,n){parseFloat(e.stagger)?e.delay=L+parseFloat(e.stagger)*t:f.isFunction(e.stagger)&&(e.delay=L+e.stagger.call(n,t,A)),e.drag&&(e.duration=parseFloat(N)||(/^(callout|transition)/.test(p)?1e3:h),e.duration=Math.max(e.duration*(e.backwards?1-t/A:(t+1)/A),.75*e.duration,200)),v.Redirects[p].call(n,n,e||{},t,A,u,E.promise?E:r)})),a()}var x="Velocity: First argument ("+p+") was not a property map, a known action, or a registered redirect. Aborting.";return E.promise?E.rejecter(new Error(x)):t.console&&console.log(x),a()}S="start"}var U={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},F=[];d.each(u,(function(e,t){f.isNode(t)&&Y(t,e)})),(e=d.extend({},v.defaults,_)).loop=parseInt(e.loop,10);var G=2*e.loop-1;if(e.loop)for(var B=0;B<G;B++){var j={delay:e.delay,progress:e.progress};B===G-1&&(j.display=e.display,j.visibility=e.visibility,j.complete=e.complete),y(u,"reverse",j)}return a()}function Y(e,a){var i,o,s=d.extend({},v.defaults,_),c={};switch(b(e)===r&&v.init(e),parseFloat(s.delay)&&!1!==s.queue&&d.queue(e,s.queue,(function(t,n){if(!0===n)return!0;v.velocityQueueEntryFlag=!0;var r=v.State.delayedElements.count++;v.State.delayedElements[r]=e;var a,i=(a=r,function(){v.State.delayedElements[a]=!1,t()});b(e).delayBegin=(new Date).getTime(),b(e).delay=parseFloat(s.delay),b(e).delayTimer={setTimeout:setTimeout(t,parseFloat(s.delay)),next:i}})),s.duration.toString().toLowerCase()){case"fast":s.duration=200;break;case"normal":s.duration=h;break;case"slow":s.duration=600;break;default:s.duration=parseFloat(s.duration)||1}function m(o){var h,m;if(s.begin&&0===C)try{s.begin.call(u,u)}catch(e){setTimeout((function(){throw e}),1)}if("scroll"===S){var y,T,w,I=/^x$/i.test(s.axis)?"Left":"Top",k=parseFloat(s.offset)||0;s.container?f.isWrapped(s.container)||f.isNode(s.container)?(s.container=s.container[0]||s.container,w=(y=s.container["scroll"+I])+d(e).position()[I.toLowerCase()]+k):s.container=null:(y=v.State.scrollAnchor[v.State["scrollProperty"+I]],T=v.State.scrollAnchor[v.State["scrollProperty"+("Left"===I?"Top":"Left")]],w=d(e).offset()[I.toLowerCase()]+k),c={scroll:{rootPropertyValue:!1,startValue:y,currentValue:y,endValue:w,unitType:"",easing:s.easing,scrollData:{container:s.container,direction:I,alternateValue:T}},element:e},v.debug&&console.log("tweensContainer (scroll): ",c.scroll,e)}else if("reverse"===S){if(!(h=b(e)))return;if(!h.tweensContainer)return void d.dequeue(e,s.queue);for(var P in"none"===h.opts.display&&(h.opts.display="auto"),"hidden"===h.opts.visibility&&(h.opts.visibility="visible"),h.opts.loop=!1,h.opts.begin=null,h.opts.complete=null,_.easing||delete s.easing,_.duration||delete s.duration,s=d.extend({},h.opts,s),m=d.extend(!0,{},h?h.tweensContainer:null))if(m.hasOwnProperty(P)&&"element"!==P){var R=m[P].startValue;m[P].startValue=m[P].currentValue=m[P].endValue,m[P].endValue=R,f.isEmptyObject(_)||(m[P].easing=s.easing),v.debug&&console.log("reverse tweensContainer ("+P+"): "+JSON.stringify(m[P]),e)}c=m}else if("start"===S){(h=b(e))&&h.tweensContainer&&!0===h.isAnimating&&(m=h.tweensContainer);var D=function(t,n){var r,i,o;return f.isFunction(t)&&(t=t.call(e,a,A)),f.isArray(t)?(r=t[0],!f.isArray(t[1])&&/^[\d-]/.test(t[1])||f.isFunction(t[1])||g.RegEx.isHex.test(t[1])?o=t[1]:f.isString(t[1])&&!g.RegEx.isHex.test(t[1])&&v.Easings[t[1]]||f.isArray(t[1])?(i=n?t[1]:O(t[1],s.duration),o=t[2]):o=t[1]||t[2]):r=t,n||(i=i||s.easing),f.isFunction(r)&&(r=r.call(e,a,A)),f.isFunction(o)&&(o=o.call(e,a,A)),[r||0,i,o]},N=function(a,o){var u,l=g.Hooks.getRoot(a),p=!1,_=o[0],y=o[1],E=o[2];if(h&&h.isSVG||"tween"===l||!1!==g.Names.prefixCheck(l)[1]||g.Normalizations.registered[l]!==r){(s.display!==r&&null!==s.display&&"none"!==s.display||s.visibility!==r&&"hidden"!==s.visibility)&&/opacity|filter/.test(a)&&!E&&0!==_&&(E=0),s._cacheValues&&m&&m[a]?(E===r&&(E=m[a].endValue+m[a].unitType),p=h.rootPropertyValueCache[l]):g.Hooks.registered[a]?E===r?(p=g.getPropertyValue(e,l),E=g.getPropertyValue(e,a,p)):p=g.Hooks.templates[l][1]:E===r&&(E=g.getPropertyValue(e,a));var S,b,T,w=!1,A=function(e,t){var n,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,(function(e){return n=e,""})),n||(n=g.Values.getUnitType(e)),[r,n]};if(E!==_&&f.isString(E)&&f.isString(_)){u="";var C=0,O=0,M=[],I=[],k=0,P=0,R=0;for(E=g.Hooks.fixColors(E),_=g.Hooks.fixColors(_);C<E.length&&O<_.length;){var D=E[C],N=_[O];if(/[\d\.-]/.test(D)&&/[\d\.-]/.test(N)){for(var L=D,x=N,F=".",G=".";++C<E.length;){if((D=E[C])===F)F="..";else if(!/\d/.test(D))break;L+=D}for(;++O<_.length;){if((N=_[O])===G)G="..";else if(!/\d/.test(N))break;x+=N}var B=g.Hooks.getUnit(E,C),j=g.Hooks.getUnit(_,O);if(C+=B.length,O+=j.length,B===j)L===x?u+=L+B:(u+="{"+M.length+(P?"!":"")+"}"+B,M.push(parseFloat(L)),I.push(parseFloat(x)));else{var Y=parseFloat(L),K=parseFloat(x);u+=(k<5?"calc":"")+"("+(Y?"{"+M.length+(P?"!":"")+"}":"0")+B+" + "+(K?"{"+(M.length+(Y?1:0))+(P?"!":"")+"}":"0")+j+")",Y&&(M.push(Y),I.push(0)),K&&(M.push(0),I.push(K))}}else{if(D!==N){k=0;break}u+=D,C++,O++,0===k&&"c"===D||1===k&&"a"===D||2===k&&"l"===D||3===k&&"c"===D||k>=4&&"("===D?k++:(k&&k<5||k>=4&&")"===D&&--k<5)&&(k=0),0===P&&"r"===D||1===P&&"g"===D||2===P&&"b"===D||3===P&&"a"===D||P>=3&&"("===D?(3===P&&"a"===D&&(R=1),P++):R&&","===D?++R>3&&(P=R=0):(R&&P<(R?5:4)||P>=(R?4:3)&&")"===D&&--P<(R?5:4))&&(P=R=0)}}C===E.length&&O===_.length||(v.debug&&console.error('Trying to pattern match mis-matched strings ["'+_+'", "'+E+'"]'),u=r),u&&(M.length?(v.debug&&console.log('Pattern found "'+u+'" -> ',M,I,"["+E+","+_+"]"),E=M,_=I,b=T=""):u=r)}u||(E=(S=A(a,E))[0],T=S[1],_=(S=A(a,_))[0].replace(/^([+-\/*])=/,(function(e,t){return w=t,""})),b=S[1],E=parseFloat(E)||0,_=parseFloat(_)||0,"%"===b&&(/^(fontSize|lineHeight)$/.test(a)?(_/=100,b="em"):/^scale/.test(a)?(_/=100,b=""):/(Red|Green|Blue)$/i.test(a)&&(_=_/100*255,b="")));if(/[\/*]/.test(w))b=T;else if(T!==b&&0!==E)if(0===_)b=T;else{i=i||function(){var r={myParent:e.parentNode||n.body,position:g.getPropertyValue(e,"position"),fontSize:g.getPropertyValue(e,"fontSize")},a=r.position===U.lastPosition&&r.myParent===U.lastParent,i=r.fontSize===U.lastFontSize;U.lastParent=r.myParent,U.lastPosition=r.position,U.lastFontSize=r.fontSize;var o=100,s={};if(i&&a)s.emToPx=U.lastEmToPx,s.percentToPxWidth=U.lastPercentToPxWidth,s.percentToPxHeight=U.lastPercentToPxHeight;else{var u=h&&h.isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");v.init(u),r.myParent.appendChild(u),d.each(["overflow","overflowX","overflowY"],(function(e,t){v.CSS.setPropertyValue(u,t,"hidden")})),v.CSS.setPropertyValue(u,"position",r.position),v.CSS.setPropertyValue(u,"fontSize",r.fontSize),v.CSS.setPropertyValue(u,"boxSizing","content-box"),d.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],(function(e,t){v.CSS.setPropertyValue(u,t,"100%")})),v.CSS.setPropertyValue(u,"paddingLeft","100em"),s.percentToPxWidth=U.lastPercentToPxWidth=(parseFloat(g.getPropertyValue(u,"width",null,!0))||1)/o,s.percentToPxHeight=U.lastPercentToPxHeight=(parseFloat(g.getPropertyValue(u,"height",null,!0))||1)/o,s.emToPx=U.lastEmToPx=(parseFloat(g.getPropertyValue(u,"paddingLeft"))||1)/o,r.myParent.removeChild(u)}return null===U.remToPx&&(U.remToPx=parseFloat(g.getPropertyValue(n.body,"fontSize"))||16),null===U.vwToPx&&(U.vwToPx=parseFloat(t.innerWidth)/100,U.vhToPx=parseFloat(t.innerHeight)/100),s.remToPx=U.remToPx,s.vwToPx=U.vwToPx,s.vhToPx=U.vhToPx,v.debug>=1&&console.log("Unit ratios: "+JSON.stringify(s),e),s}();var W=/margin|padding|left|right|width|text|word|letter/i.test(a)||/X$/.test(a)||"x"===a?"x":"y";switch(T){case"%":E*="x"===W?i.percentToPxWidth:i.percentToPxHeight;break;case"px":break;default:E*=i[T+"ToPx"]}switch(b){case"%":E*=1/("x"===W?i.percentToPxWidth:i.percentToPxHeight);break;case"px":break;default:E*=1/i[b+"ToPx"]}}switch(w){case"+":_=E+_;break;case"-":_=E-_;break;case"*":_*=E;break;case"/":_=E/_}c[a]={rootPropertyValue:p,startValue:E,currentValue:E,endValue:_,unitType:b,easing:y},u&&(c[a].pattern=u),v.debug&&console.log("tweensContainer ("+a+"): "+JSON.stringify(c[a]),e)}else v.debug&&console.log("Skipping ["+l+"] due to a lack of browser support.")};for(var L in p)if(p.hasOwnProperty(L)){var x=g.Names.camelCase(L),G=D(p[L]);if(l(g.Lists.colors)){var B=G[0],j=G[1],Y=G[2];if(g.RegEx.isHex.test(B)){for(var K=["Red","Green","Blue"],W=g.Values.hexToRgb(B),V=Y?g.Values.hexToRgb(Y):r,H=0;H<K.length;H++){var $=[W[H]];j&&$.push(j),V!==r&&$.push(V[H]),N(x+K[H],$)}continue}}N(x,G)}c.element=e}c.element&&(g.Values.addClass(e,"velocity-animating"),F.push(c),(h=b(e))&&(""===s.queue&&(h.tweensContainer=c,h.opts=s),h.isAnimating=!0),C===A-1?(v.State.calls.push([F,u,s,null,E.resolver,null,0]),!1===v.State.isTicking&&(v.State.isTicking=!0,M())):C++)}if(!1!==v.mock&&(!0===v.mock?s.duration=s.delay=1:(s.duration*=parseFloat(v.mock)||1,s.delay*=parseFloat(v.mock)||1)),s.easing=O(s.easing,s.duration),s.begin&&!f.isFunction(s.begin)&&(s.begin=null),s.progress&&!f.isFunction(s.progress)&&(s.progress=null),s.complete&&!f.isFunction(s.complete)&&(s.complete=null),s.display!==r&&null!==s.display&&(s.display=s.display.toString().toLowerCase(),"auto"===s.display&&(s.display=v.CSS.Values.getDisplayType(e))),s.visibility!==r&&null!==s.visibility&&(s.visibility=s.visibility.toString().toLowerCase()),s.mobileHA=s.mobileHA&&v.State.isMobile&&!v.State.isGingerbread,!1===s.queue)if(s.delay){var y=v.State.delayedElements.count++;v.State.delayedElements[y]=e;var T=(o=y,function(){v.State.delayedElements[o]=!1,m()});b(e).delayBegin=(new Date).getTime(),b(e).delay=parseFloat(s.delay),b(e).delayTimer={setTimeout:setTimeout(m,parseFloat(s.delay)),next:T}}else m();else d.queue(e,s.queue,(function(e,t){if(!0===t)return E.promise&&E.resolver(u),!0;v.velocityQueueEntryFlag=!0,m()}));""!==s.queue&&"fx"!==s.queue||"inprogress"===d.queue(e)[0]||d.dequeue(e)}E.promise&&(p&&_&&!1===_.promiseRejectEmpty?E.resolver():E.rejecter())};(v=d.extend(y,v)).animate=y;var E=t.requestAnimationFrame||o;if(!v.State.isMobile&&n.hidden!==r){var S=function(){n.hidden?(E=function(e){return setTimeout((function(){e(!0)}),16)},M()):E=t.requestAnimationFrame||o};S(),n.addEventListener("visibilitychange",S)}return e.Velocity=v,e!==t&&(e.fn.velocity=y,e.fn.velocity.defaults=v.defaults),d.each(["Down","Up"],(function(e,t){v.Redirects["slide"+t]=function(e,n,a,i,o,s){var u=d.extend({},n),l=u.begin,c=u.complete,f={},p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""};u.display===r&&(u.display="Down"===t?"inline"===v.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),u.begin=function(){for(var n in 0===a&&l&&l.call(o,o),p)if(p.hasOwnProperty(n)){f[n]=e.style[n];var r=g.getPropertyValue(e,n);p[n]="Down"===t?[r,0]:[0,r]}f.overflow=e.style.overflow,e.style.overflow="hidden"},u.complete=function(){for(var t in f)f.hasOwnProperty(t)&&(e.style[t]=f[t]);a===i-1&&(c&&c.call(o,o),s&&s.resolver(o))},v(e,p,u)}})),d.each(["In","Out"],(function(e,t){v.Redirects["fade"+t]=function(e,n,a,i,o,s){var u=d.extend({},n),l=u.complete,c={opacity:"In"===t?1:0};0!==a&&(u.begin=null),u.complete=a!==i-1?null:function(){l&&l.call(o,o),s&&s.resolver(o)},u.display===r&&(u.display="In"===t?"auto":"none"),v(this,c,u)}})),v}function b(e){var t=d.data(e,"velocity");return null===t?r:t}function T(e,t){var n=b(e);n&&n.delayTimer&&!n.delayPaused&&(n.delayRemaining=n.delay-t+n.delayBegin,n.delayPaused=!0,clearTimeout(n.delayTimer.setTimeout))}function w(e,t){var n=b(e);n&&n.delayTimer&&n.delayPaused&&(n.delayPaused=!1,n.delayTimer.setTimeout=setTimeout(n.delayTimer.next,n.delayRemaining))}function A(e){return function(t){return Math.round(t*e)*(1/e)}}function C(e,n,r,a){var i=4,o=.001,s=1e-7,u=10,l=11,c=1/(l-1),d="Float32Array"in t;if(4!==arguments.length)return!1;for(var f=0;f<4;++f)if("number"!=typeof arguments[f]||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var p=d?new Float32Array(l):new Array(l);function h(e,t){return 1-3*t+3*e}function _(e,t){return 3*t-6*e}function v(e){return 3*e}function m(e,t,n){return((h(t,n)*e+_(t,n))*e+v(t))*e}function g(e,t,n){return 3*h(t,n)*e*e+2*_(t,n)*e+v(t)}function y(t,n){for(var a=0;a<i;++a){var o=g(n,e,r);if(0===o)return n;n-=(m(n,e,r)-t)/o}return n}function E(){for(var t=0;t<l;++t)p[t]=m(t*c,e,r)}function S(t,n,a){var i,o,l=0;do{(i=m(o=n+(a-n)/2,e,r)-t)>0?a=o:n=o}while(Math.abs(i)>s&&++l<u);return o}function b(t){for(var n=0,a=1,i=l-1;a!==i&&p[a]<=t;++a)n+=c;--a;var s=n+(t-p[a])/(p[a+1]-p[a])*c,u=g(s,e,r);return u>=o?y(t,s):0===u?s:S(t,n,n+c)}var T=!1;function w(){T=!0,e===n&&r===a||E()}var A=function(t){return T||w(),e===n&&r===a?t:0===t?0:1===t?1:m(b(t),n,a)};A.getControlPoints=function(){return[{x:e,y:n},{x:r,y:a}]};var C="generateBezier("+[e,n,r,a]+")";return A.toString=function(){return C},A}function O(e,t){var n=e;return f.isString(e)?v.Easings[e]||(n=!1):n=f.isArray(e)&&1===e.length?A.apply(null,e):f.isArray(e)&&2===e.length?m.apply(null,e.concat([t])):!(!f.isArray(e)||4!==e.length)&&C.apply(null,e),!1===n&&(n=v.Easings[v.defaults.easing]?v.defaults.easing:_),n}function M(e){if(e){var t=v.timestamp&&!0!==e?e:s.now(),n=v.State.calls.length;n>1e4&&(v.State.calls=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var a=e[t];a&&r.push(a)}return r}(v.State.calls),n=v.State.calls.length);for(var a=0;a<n;a++)if(v.State.calls[a]){var o=v.State.calls[a],u=o[0],l=o[2],c=o[3],p=!c,h=null,_=o[5],m=o[6];if(c||(c=v.State.calls[a][3]=t-16),_){if(!0!==_.resume)continue;c=o[3]=Math.round(t-m-16),o[5]=null}m=o[6]=t-c;for(var y=Math.min(m/l.duration,1),S=0,T=u.length;S<T;S++){var w=u[S],A=w.element;if(b(A)){var C=!1;if(l.display!==r&&null!==l.display&&"none"!==l.display){if("flex"===l.display){d.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],(function(e,t){g.setPropertyValue(A,"display",t)}))}g.setPropertyValue(A,"display",l.display)}for(var O in l.visibility!==r&&"hidden"!==l.visibility&&g.setPropertyValue(A,"visibility",l.visibility),w)if(w.hasOwnProperty(O)&&"element"!==O){var k,P=w[O],R=f.isString(P.easing)?v.Easings[P.easing]:P.easing;if(f.isString(P.pattern)){var D=1===y?function(e,t,n){var r=P.endValue[t];return n?Math.round(r):r}:function(e,t,n){var r=P.startValue[t],a=P.endValue[t]-r,i=r+a*R(y,l,a);return n?Math.round(i):i};k=P.pattern.replace(/{(\d+)(!)?}/g,D)}else if(1===y)k=P.endValue;else{var N=P.endValue-P.startValue;k=P.startValue+N*R(y,l,N)}if(!p&&k===P.currentValue)continue;if(P.currentValue=k,"tween"===O)h=k;else{var L;if(g.Hooks.registered[O]){L=g.Hooks.getRoot(O);var x=b(A).rootPropertyValueCache[L];x&&(P.rootPropertyValue=x)}var U=g.setPropertyValue(A,O,P.currentValue+(i<9&&0===parseFloat(k)?"":P.unitType),P.rootPropertyValue,P.scrollData);g.Hooks.registered[O]&&(g.Normalizations.registered[L]?b(A).rootPropertyValueCache[L]=g.Normalizations.registered[L]("extract",null,U[1]):b(A).rootPropertyValueCache[L]=U[1]),"transform"===U[0]&&(C=!0)}}l.mobileHA&&b(A).transformCache.translate3d===r&&(b(A).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&g.flushTransformCache(A)}}l.display!==r&&"none"!==l.display&&(v.State.calls[a][2].display=!1),l.visibility!==r&&"hidden"!==l.visibility&&(v.State.calls[a][2].visibility=!1),l.progress&&l.progress.call(o[1],o[1],y,Math.max(0,c+l.duration-t),c,h),1===y&&I(a)}}v.State.isTicking&&E(M)}function I(e,t){if(!v.State.calls[e])return!1;for(var n=v.State.calls[e][0],a=v.State.calls[e][1],i=v.State.calls[e][2],o=v.State.calls[e][4],s=!1,u=0,l=n.length;u<l;u++){var c=n[u].element;t||i.loop||("none"===i.display&&g.setPropertyValue(c,"display",i.display),"hidden"===i.visibility&&g.setPropertyValue(c,"visibility",i.visibility));var f=b(c);if(!0!==i.loop&&(d.queue(c)[1]===r||!/\.velocityQueueEntryFlag/i.test(d.queue(c)[1]))&&f){f.isAnimating=!1,f.rootPropertyValueCache={};var p=!1;d.each(g.Lists.transforms3D,(function(e,t){var n=/^scale/.test(t)?1:0,a=f.transformCache[t];f.transformCache[t]!==r&&new RegExp("^\\("+n+"[^.]").test(a)&&(p=!0,delete f.transformCache[t])})),i.mobileHA&&(p=!0,delete f.transformCache.translate3d),p&&g.flushTransformCache(c),g.Values.removeClass(c,"velocity-animating")}if(!t&&i.complete&&!i.loop&&u===l-1)try{i.complete.call(a,a)}catch(e){setTimeout((function(){throw e}),1)}o&&!0!==i.loop&&o(a),f&&!0===i.loop&&!t&&(d.each(f.tweensContainer,(function(e,t){if(/^rotate/.test(e)&&(parseFloat(t.startValue)-parseFloat(t.endValue))%360==0){var n=t.startValue;t.startValue=t.endValue,t.endValue=n}/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)})),v(c,"reverse",{loop:!0,delay:i.delay})),!1!==i.queue&&d.dequeue(c,i.queue)}v.State.calls[e]=!1;for(var h=0,_=v.State.calls.length;h<_;h++)if(!1!==v.State.calls[h]){s=!0;break}!1===s&&(v.State.isTicking=!1,delete v.State.calls,v.State.calls=[])}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,window?window.document:void 0)}))},38161:e=>{
/* VelocityJS.org UI Pack (5.2.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License. Portions copyright Daniel Eden, Christian Pucci. */
!function(t){"use strict";e.exports=function(e,t,n,r){var a=e.Velocity;if(a&&a.Utilities){var i=a.Utilities;if(u({major:1,minor:1,patch:0},a.version)){var o="Velocity UI Pack: You need to update Velocity (velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(o),new Error(o)}for(var s in a.RegisterEffect=a.RegisterUI=function(e,t){function n(e,t,n,r){var o,s=0;i.each(e.nodeType?[e]:e,(function(e,t){r&&(n+=e*r),o=t.parentNode;var u=["height","paddingTop","paddingBottom","marginTop","marginBottom"];"border-box"===a.CSS.getPropertyValue(t,"boxSizing").toString().toLowerCase()&&(u=["height"]),i.each(u,(function(e,n){s+=parseFloat(a.CSS.getPropertyValue(t,n))}))})),a.animate(o,{height:("In"===t?"+":"-")+"="+s},{queue:!1,easing:"ease-in-out",duration:n*("In"===t?.6:1)})}return a.Redirects[e]=function(o,s,u,l,c,d,f){var p=u===l-1,h=0;f=f||t.loop,"function"==typeof t.defaultDuration?t.defaultDuration=t.defaultDuration.call(c,c):t.defaultDuration=parseFloat(t.defaultDuration);for(var _=0;_<t.calls.length;_++)"number"==typeof(E=t.calls[_][1])&&(h+=E);var v=h>=1?0:t.calls.length?(1-h)/t.calls.length:1;for(_=0;_<t.calls.length;_++){var m=t.calls[_],g=m[0],y=1e3,E=m[1],S=m[2]||{},b={};if(s.duration!==r?y=s.duration:t.defaultDuration!==r&&(y=t.defaultDuration),b.duration=y*("number"==typeof E?E:v),b.queue=s.queue||"",b.easing=S.easing||"ease",b.delay=parseFloat(S.delay)||0,b.loop=!t.loop&&S.loop,b._cacheValues=S._cacheValues||!0,0===_){if(b.delay+=parseFloat(s.delay)||0,0===u&&(b.begin=function(){s.begin&&s.begin.call(c,c);var t=e.match(/(In|Out)$/);t&&"In"===t[0]&&g.opacity!==r&&i.each(c.nodeType?[c]:c,(function(e,t){a.CSS.setPropertyValue(t,"opacity",0)})),s.animateParentHeight&&t&&n(c,t[0],y+b.delay,s.stagger)}),null!==s.display)if(s.display!==r&&"none"!==s.display)b.display=s.display;else if(/In$/.test(e)){var T=a.CSS.Values.getDisplayType(o);b.display="inline"===T?"inline-block":T}s.visibility&&"hidden"!==s.visibility&&(b.visibility=s.visibility)}if(_===t.calls.length-1){var w=function(){s.display!==r&&"none"!==s.display||!/Out$/.test(e)||i.each(c.nodeType?[c]:c,(function(e,t){a.CSS.setPropertyValue(t,"display","none")})),s.complete&&s.complete.call(c,c),d&&d.resolver(c||o)};b.complete=function(){if(f&&a.Redirects[e](o,s,u,l,c,d,!0===f||Math.max(0,f-1)),t.reset){for(var n in t.reset)if(t.reset.hasOwnProperty(n)){var i=t.reset[n];a.CSS.Hooks.registered[n]!==r||"string"!=typeof i&&"number"!=typeof i||(t.reset[n]=[t.reset[n],t.reset[n]])}var h={duration:0,queue:!1};p&&(h.complete=w),a.animate(o,t.reset,h)}else p&&w()},"hidden"===s.visibility&&(b.visibility=s.visibility)}a.animate(o,g,b)}},a},a.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:11}],[{translateX:-11}],[{translateX:0}]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]}],[{opacity:[1,"easeInOutQuad"]}],[{opacity:[0,"easeInOutQuad"]}],[{opacity:[1,"easeInOutQuad"]}]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15}],[{rotateZ:-10}],[{rotateZ:5}],[{rotateZ:-5}],[{rotateZ:0}]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10}],[{opacity:0,rotateY:90}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15}],[{opacity:0,rotateX:90}]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.35],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.45]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}},a.RegisterEffect.packagedEffects)a.RegisterEffect.packagedEffects.hasOwnProperty(s)&&a.RegisterEffect(s,a.RegisterEffect.packagedEffects[s]);a.RunSequence=function(e){var t=i.extend(!0,[],e);t.length>1&&(i.each(t.reverse(),(function(e,n){var r=t[e+1];if(r){var o=n.o||n.options,s=r.o||r.options,u=o&&!1===o.sequenceQueue?"begin":"complete",l=s&&s[u],c={};c[u]=function(){var e=r.e||r.elements,t=e.nodeType?[e]:e;l&&l.call(t,t),a(n)},r.o?r.o=i.extend({},s,c):r.options=i.extend({},s,c)}})),t.reverse()),a(t[0])}}else t.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting.");function u(e,t){var n=[];return!(!e||!t)&&(i.each([e,t],(function(e,t){var r=[];i.each(t,(function(e,t){for(;t.toString().length<5;)t="0"+t;r.push(t)})),n.push(r.join(""))})),parseFloat(n[0])>parseFloat(n[1]))}}(window.jQuery||window.Zepto||window,window,window&&window.document)}()},25241:(e,t)=>{
/**
 * An implementation of the standard DOMException and DOMError interfaces
 *
 * @module w3c-domcore-errors
 * @see http://www.w3.org/TR/dom/#errors
 * @see http://dom.spec.whatwg.org/#errors
 *
 * @author Alexandre Morgaut (http://github.com/AMorgaut)
 * @license MIT
 **/
var n,r;function a(e,t){var r;r=n[e]||{},this.name=e||this.name||"DOMError",this.code=r.code||0,this.message=t||this.message||r.message||this.name}function i(e){var t;t=n[e]||{},this.code=t.code||0,this.message=t.message||e,this.name=e}i.prototype=Object.create(Error.prototype),n={IndexSizeError:{message:"The index is not in the allowed range",constantName:"INDEX_SIZE_ERR",code:1},HierarchyRequestError:{message:"The operation would yield an incorrect node tree.",constantName:"HIERARCHY_REQUEST_ERR",code:3},WrongDocumentError:{message:"The object is in the wrong document.",constantName:"WRONG_DOCUMENT_ERR",code:4},InvalidCharacterError:{message:"The string contains invalid characters.",constantName:"INVALID_CHARACTER_ERR",code:5},NoModificationAllowedError:{message:"The object can not be modified.",constantName:"NO_MODIFICATION_ALLOWED_ERR",code:7},NotFoundError:{message:"The object can not be found here.",constantName:"NOT_FOUND_ERR",code:8},NotSupportedError:{message:"The operation is not supported.",constantName:"NOT_SUPPORTED_ERR",code:9},InvalidStateError:{message:"The object is in an invalid state.",constantName:"INVALID_STATE_ERR",code:11},SyntaxError:{message:"The string did not match the expected pattern",constantName:"SYNTAX_ERR",code:12},InvalidModificationError:{message:"The object can not be modified in this way",constantName:"INVALID_MODIFICATION_ERR",code:13},NamespaceError:{message:"The operation is not allowed by Namespaces in XML.",constantName:"NAMESPACE_ERR",code:14},InvalidAccessError:{message:"The object does not support the operation or argument.",constantName:"INVALID_ACCESS_ERR",code:15},SecurityError:{message:"The operation is insecure.",constantName:"SECURITY_ERR",code:18},NetworkError:{message:"A network error occurred.",constantName:"NETWORK_ERR",code:19},AbortError:{message:"The operation was aborted.",constantName:"ABORT_ERR",code:20},URLMismatchError:{message:"The given URL does not match another URL.",constantName:"URL_MISMATCH_ERR",code:21},QuotaExceededError:{message:"The quota has been exceeded.",constantName:"QUOTA_EXCEEDED_ERR",code:22},TimeoutError:{message:"The operation timed out.",constantName:"TIMEOUT_ERR",code:23},InvalidNodeTypeError:{message:"The supplied node is incorrect or has an incorrect ancestor for this operation.",constantName:"INVALID_NODE_TYPE_ERR",code:24},DataCloneError:{message:"The object can not be cloned.",constantName:"DATA_CLONE_ERR",code:25},EncodingError:{message:"The encoding operation (either encoded or decoding) failed."}},r={},["","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR"].forEach((function(e,t){var n;n={writable:!1,enumerable:!0,configurable:!1,value:t},r[e]=n})),Object.defineProperties(i,r),Object.defineProperties(i.prototype,r),t.DOMException=i,t.DOMError=a,t.Polyfill=function(){this.hasOwnProperty("DOMException")||(this.DOMException=i),this.hasOwnProperty("DOMError")||(this.DOMError=a)}},30670:e=>{"use strict";e.exports=function(){}},72653:e=>{e.exports=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]]},71011:(e,t,n)=>{"use strict";var r=n(41185),a=n(72653),i={nul:0,control:0};function o(e,t){if("string"!=typeof e)return s(e,t);for(var n=0,r=0;r<e.length;r++){var a=s(e.charCodeAt(r),t);if(a<0)return-1;n+=a}return n}function s(e,t){return 0===e?t.nul:e<32||e>=127&&e<160?t.control:function(e){var t,n=0,r=a.length-1;if(e<a[0][0]||e>a[r][1])return!1;for(;r>=n;)if(t=Math.floor((n+r)/2),e>a[t][1])n=t+1;else{if(!(e<a[t][0]))return!0;r=t-1}return!1}(e)?0:1+(e>=4352&&(e<=4447||9001==e||9002==e||e>=11904&&e<=42191&&12351!=e||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65135||e>=65280&&e<=65376||e>=65504&&e<=65510||e>=131072&&e<=196605||e>=196608&&e<=262141))}e.exports=function(e){return o(e,i)},e.exports.config=function(e){return e=r(e||{},i),function(t){return o(t,e)}}},75933:(e,t,n)=>{var r,a=n(60077).default;!function(){function i(e,t,n){return e.call.apply(e.bind,arguments)}function o(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function s(e,t,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o).apply(null,arguments)}var u=Date.now||function(){return+new Date};function l(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var c=!!window.FontFace;function d(e,t,n,r){if(t=e.c.createElement(t),n)for(var a in n)n.hasOwnProperty(a)&&("style"==a?t.style.cssText=n[a]:t.setAttribute(a,n[a]));return r&&t.appendChild(e.c.createTextNode(r)),t}function f(e,t,n){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t,n){t=t||[],n=n||[];for(var r=e.className.split(/\s+/),a=0;a<t.length;a+=1){for(var i=!1,o=0;o<r.length;o+=1)if(t[a]===r[o]){i=!0;break}i||r.push(t[a])}for(t=[],a=0;a<r.length;a+=1){for(i=!1,o=0;o<n.length;o+=1)if(r[a]===n[o]){i=!0;break}i||t.push(r[a])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function _(e,t){for(var n=e.className.split(/\s+/),r=0,a=n.length;r<a;r++)if(n[r]==t)return!0;return!1}function v(e,t,n){function r(){s&&a&&i&&(s(o),s=null)}t=d(e,"link",{rel:"stylesheet",href:t,media:"all"});var a=!1,i=!0,o=null,s=n||null;c?(t.onload=function(){a=!0,r()},t.onerror=function(){a=!0,o=Error("Stylesheet failed to load"),r()}):setTimeout((function(){a=!0,r()}),0),f(e,"head",t)}function m(e,t,n,r){var a=e.c.getElementsByTagName("head")[0];if(a){var i=d(e,"script",{src:t}),o=!1;return i.onload=i.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,n&&n(null),i.onload=i.onreadystatechange=null,"HEAD"==i.parentNode.tagName&&a.removeChild(i))},a.appendChild(i),setTimeout((function(){o||(o=!0,n&&n(Error("Script load timeout")))}),r||5e3),i}return null}function g(){this.a=0,this.c=null}function y(e){return e.a++,function(){e.a--,S(e)}}function E(e,t){e.c=t,S(e)}function S(e){0==e.a&&e.c&&(e.c(),e.c=null)}function b(e){this.a=e||"-"}function T(e,t){this.c=e,this.f=4,this.a="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function w(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var r=e[n].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?t.push("'"+r+"'"):t.push(r)}return t.join(",")}function A(e){return e.a+e.f}function C(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function O(e){var t=4,n="n",r=null;return e&&((r=e.match(/(normal|oblique|italic)/i))&&r[1]&&(n=r[1].substr(0,1).toLowerCase()),(r=e.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?t=7:/[1-9]00/.test(r[1])&&(t=parseInt(r[1].substr(0,1),10)))),n+t}function M(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new b("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function I(e){if(e.g){var t=_(e.f,e.a.c("wf","active")),n=[],r=[e.a.c("wf","loading")];t||n.push(e.a.c("wf","inactive")),h(e.f,n,r)}k(e,"inactive")}function k(e,t,n){e.j&&e.h[t]&&(n?e.h[t](n.c,A(n)):e.h[t]())}function P(){this.c={}}function R(e,t){this.c=e,this.f=t,this.a=d(this.c,"span",{"aria-hidden":"true"},this.f)}function D(e){f(e.c,"body",e.a)}function N(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(e.c)+";font-style:"+C(e)+";font-weight:"+e.f+"00;"}function L(e,t,n,r,a,i){this.g=e,this.j=t,this.a=r,this.c=n,this.f=a||3e3,this.h=i||void 0}function x(e,t,n,r,a,i,o){this.v=e,this.B=t,this.c=n,this.a=r,this.s=o||"BESbswy",this.f={},this.w=a||3e3,this.u=i||null,this.m=this.j=this.h=this.g=null,this.g=new R(this.c,this.s),this.h=new R(this.c,this.s),this.j=new R(this.c,this.s),this.m=new R(this.c,this.s),e=N(e=new T(this.a.c+",serif",A(this.a))),this.g.a.style.cssText=e,e=N(e=new T(this.a.c+",sans-serif",A(this.a))),this.h.a.style.cssText=e,e=N(e=new T("serif",A(this.a))),this.j.a.style.cssText=e,e=N(e=new T("sans-serif",A(this.a))),this.m.a.style.cssText=e,D(this.g),D(this.h),D(this.j),D(this.m)}b.prototype.c=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},L.prototype.start=function(){var e=this.c.o.document,t=this,n=u(),r=new a((function(r,a){!function i(){u()-n>=t.f?a():e.fonts.load(function(e){return C(e)+" "+e.f+"00 300px "+w(e.c)}(t.a),t.h).then((function(e){1<=e.length?r():setTimeout(i,25)}),(function(){a()}))}()})),i=null,o=new a((function(e,n){i=setTimeout(n,t.f)}));a.race([o,r]).then((function(){i&&(clearTimeout(i),i=null),t.g(t.a)}),(function(){t.j(t.a)}))};var U={D:"serif",C:"sans-serif"},F=null;function G(){if(null===F){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);F=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return F}function B(e,t,n){for(var r in U)if(U.hasOwnProperty(r)&&t===e.f[U[r]]&&n===e.f[U[r]])return!0;return!1}function j(e){var t,n=e.g.a.offsetWidth,r=e.h.a.offsetWidth;(t=n===e.f.serif&&r===e.f["sans-serif"])||(t=G()&&B(e,n,r)),t?u()-e.A>=e.w?G()&&B(e,n,r)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?Y(e,e.v):Y(e,e.B):function(e){setTimeout(s((function(){j(this)}),e),50)}(e):Y(e,e.v)}function Y(e,t){setTimeout(s((function(){p(this.g.a),p(this.h.a),p(this.j.a),p(this.m.a),t(this.a)}),e),0)}function K(e,t,n){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=n}x.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=u(),j(this)};var W=null;function V(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&h(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),k(e,"active")):I(e.a))}function H(e){this.j=e,this.a=new P,this.h=0,this.f=this.g=!0}function $(e,t,n,r,a){var i=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=a||null,o=r||{};if(0===n.length&&i)I(t.a);else{t.f+=n.length,i&&(t.j=i);var u,l=[];for(u=0;u<n.length;u++){var c=n[u],d=o[c.c],f=t.a,p=c;if(f.g&&h(f.f,[f.a.c("wf",p.c,A(p).toString(),"loading")]),k(f,"fontloading",p),f=null,null===W)if(window.FontFace){p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var _=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);W=p?42<parseInt(p[1],10):!_}else W=!1;f=W?new L(s(t.g,t),s(t.h,t),t.c,c,t.s,d):new x(s(t.g,t),s(t.h,t),t.c,c,t.s,e,d),l.push(f)}for(u=0;u<l.length;u++)l[u].start()}}),0)}function z(e,t){this.c=e,this.a=t}function q(e,t){this.c=e,this.a=t}function J(e,t){this.c=e||Q,this.a=[],this.f=[],this.g=t||""}K.prototype.g=function(e){var t=this.a;t.g&&h(t.f,[t.a.c("wf",e.c,A(e).toString(),"active")],[t.a.c("wf",e.c,A(e).toString(),"loading"),t.a.c("wf",e.c,A(e).toString(),"inactive")]),k(t,"fontactive",e),this.m=!0,V(this)},K.prototype.h=function(e){var t=this.a;if(t.g){var n=_(t.f,t.a.c("wf",e.c,A(e).toString(),"active")),r=[],a=[t.a.c("wf",e.c,A(e).toString(),"loading")];n||r.push(t.a.c("wf",e.c,A(e).toString(),"inactive")),h(t.f,r,a)}k(t,"fontinactive",e),V(this)},H.prototype.load=function(e){this.c=new l(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,n){var r=[],a=n.timeout;!function(e){e.g&&h(e.f,[e.a.c("wf","loading")]),k(e,"loading")}(t);r=function(e,t,n){var r,a=[];for(r in t)if(t.hasOwnProperty(r)){var i=e.c[r];i&&a.push(i(t[r],n))}return a}(e.a,n,e.c);var i=new K(e.c,t,a);for(e.h=r.length,t=0,n=r.length;t<n;t++)r[t].load((function(t,n,r){$(e,i,t,n,r)}))}(this,new M(this.c,e),e)},z.prototype.load=function(e){function t(){if(i["__mti_fntLst"+r]){var n,a=i["__mti_fntLst"+r](),o=[];if(a)for(var s=0;s<a.length;s++){var u=a[s].fontfamily;null!=a[s].fontStyle&&null!=a[s].fontWeight?(n=a[s].fontStyle+a[s].fontWeight,o.push(new T(u,n))):o.push(new T(u))}e(o)}else setTimeout((function(){t()}),50)}var n=this,r=n.a.projectId,a=n.a.version;if(r){var i=n.c.o;m(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(a?"?v="+a:""),(function(a){a?e([]):(i["__MonotypeConfiguration__"+r]=function(){return n.a},t())})).id="__MonotypeAPIScript__"+r}else e([])},q.prototype.load=function(e){var t,n,r=this.a.urls||[],a=this.a.families||[],i=this.a.testStrings||{},o=new g;for(t=0,n=r.length;t<n;t++)v(this.c,r[t],y(o));var s=[];for(t=0,n=a.length;t<n;t++)if((r=a[t].split(":"))[1])for(var u=r[1].split(","),l=0;l<u.length;l+=1)s.push(new T(r[0],u[l]));else s.push(new T(r[0]));E(o,(function(){e(s,i)}))};var Q="https://fonts.googleapis.com/css";function X(e){this.f=e,this.a=[],this.c={}}var Z={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ee={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},te={i:"i",italic:"i",n:"n",normal:"n"},ne=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function re(e,t){this.c=e,this.a=t}var ae={Arimo:!0,Cousine:!0,Tinos:!0};function ie(e,t){this.c=e,this.a=t}function oe(e,t){this.c=e,this.f=t,this.a=[]}re.prototype.load=function(e){var t=new g,n=this.c,r=new J(this.a.api,this.a.text),a=this.a.families;!function(e,t){for(var n=t.length,r=0;r<n;r++){var a=t[r].split(":");3==a.length&&e.f.push(a.pop());var i="";2==a.length&&""!=a[1]&&(i=":"),e.a.push(a.join(i))}}(r,a);var i=new X(a);!function(e){for(var t=e.f.length,n=0;n<t;n++){var r=e.f[n].split(":"),a=r[0].replace(/\+/g," "),i=["n4"];if(2<=r.length){var o;if(o=[],s=r[1])for(var s,u=(s=s.split(",")).length,l=0;l<u;l++){var c;if((c=s[l]).match(/^[\w-]+$/))if(null==(d=ne.exec(c.toLowerCase())))c="";else{if(c=null==(c=d[2])||""==c?"n":te[c],null==(d=d[1])||""==d)d="4";else var d=ee[d]||(isNaN(d)?"4":d.substr(0,1));c=[c,d].join("")}else c="";c&&o.push(c)}0<o.length&&(i=o),3==r.length&&(o=[],0<(r=(r=r[2])?r.split(","):o).length&&(r=Z[r[0]])&&(e.c[a]=r))}for(e.c[a]||(r=Z[a])&&(e.c[a]=r),r=0;r<i.length;r+=1)e.a.push(new T(a,i[r]))}}(i),v(n,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,n=[],r=0;r<t;r++)n.push(e.a[r].replace(/ /g,"+"));return t=e.c+"?family="+n.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(r),y(t)),E(t,(function(){e(i.a,i.c,ae)}))},ie.prototype.load=function(e){var t=this.a.id,n=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var r=[],a=0;a<t.length;a+=2)for(var i=t[a],o=t[a+1],s=0;s<o.length;s++)r.push(new T(i,o[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(r)}}),2e3):e([])},oe.prototype.load=function(e){var t=this.f.id,n=this.c.o,r=this;t?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[t]=function(t,n){for(var a=0,i=n.fonts.length;a<i;++a){var o=n.fonts[a];r.a.push(new T(o.name,O("font-weight:"+o.weight+";font-style:"+o.style)))}e(r.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var se=new H(window);se.a.c.custom=function(e,t){return new q(t,e)},se.a.c.fontdeck=function(e,t){return new oe(t,e)},se.a.c.monotype=function(e,t){return new z(t,e)},se.a.c.typekit=function(e,t){return new ie(t,e)},se.a.c.google=function(e,t){return new re(t,e)};var ue={load:s(se.load,se)};void 0===(r=function(){return ue}.call(t,n,t,e))||(e.exports=r)}()},4210:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=[["","Add additional hours","Add product","Chat list","Close panel","Open the chat context menu","This is a disappearing message","Full screen","Exit full screen","Mute","Pause","Play","Unmute","Message list. Press right arrow key on a message to open message context menu.","Message list. Press left arrow key on a message to open message context menu.","__author__:","You:","Delivered","Pending","Read","Sent","Voice message","Muted chat","Open emojis panel","Open gif panel","Open sticker panel","Cancel","Voice message","Send","Stop","Result: __name__","Search results.","Starred","Sticker with: __emojis__","Sticker with no label","Unselect category","View once info","Turn off view once","Turn on view once","Changing __count__ label","The label could not be updated","__count__ label changed","Adding new label: __labelName__","Archived chats will unarchive when you receive a new message.","Couldn't change archive setting.","Changing archive setting","Archived chats will remain archived when you receive a new message.","Couldn't block __participant__","__participant__ blocked","Blocking __participant__","Couldn't delete broadcast list.","Broadcast list deleted","Broadcast list deleted from this device","Deleting broadcast list","Group setting could not be changed","Couldn't archive chat.","Chat archived","Archiving chat","Couldn't clear chat.","Chat cleared","Chat cleared from this device","Clearing chat","Couldn't delete chat.","Chat deleted","Chat deleted from this device","Deleting chat","Couldn't dismiss change number notification.","Change number notification dismissed.","Dismissing change number notification.","Couldn't mark chat as read.","Couldn't mark chat as unread.","Marked as read","Marked as unread","Marking as read","Marking as unread","Couldn't mute chat.","Chat muted","Muting chat","Couldn't pin chat","You can only pin up to 3 chats.","Chat pinned","Pinning chat","Couldn't unarchive chat.","Chat unarchived","Unarchiving chat","Unmute","Couldn't unmute chat.","Chat unmuted","Unmuting chat","Couldn't unpin chat","Chat unpinned","Unpinning chat","Deleting label: __labelName__ failed","Deleted label: __labelName__","Deleting label: __labelName__","Couldn't create group.","Please enter a shorter subject.","You've created too many groups too quickly. Try again later.","Can't add more than __max__ participants","Created group","Creating group","Couldn't delete group.","Group deleted","Group deleted from this device","Deleting group","Changing group description","Group description change failed","Group description changed","Couldn't exit group.","Exited group","Exiting group","You're not a participant.","This group has ended.","You've added too many contacts to groups too quickly. Try again later.","Couldn't remove group icon.","Group icon removed","Removing group icon","Group icon set","Couldn't set group icon.","Setting group icon","Couldn't mute group.","Group muted","Muting group","Couldn't rename group.","Group renamed to __subject__","Renaming group","Group subject can't be empty","Couldn't unmute group.","Group unmuted","Unmuting group","Updating label color","Label color update failed","Label color updated","Updating label name","Label name update failed","Label name updated","Couldn't stop sharing live location","Stop sharing live location with __name__?","Stop sharing live location with __name__?","Stopped sharing live location","Stopping live location sharing","Marking as not spam","Couldn't mark as not spam","Marked as not spam","Couldn't delete message because the message may have expired","Couldn't delete message","__count__ message deleted","Deleting message","Couldn't star message because the message may have expired","Couldn't star message","__count__ message starred","Starring message","Couldn't unstar all messages","Couldn't unstar message because the message may have expired","Couldn't unstar message","__count__ message unstarred","All messages unstarred","Unstarring message","Unstarring all messages","Failed to add label: __labelName__","Label: __labelName__ added successfully","Couldn't add __participantNames__.","Couldn't add some participants.","You added __participantNames__.","Adding __participantNames__.","Removing __participantNames__ as an admin failed.","You can't dismiss __participant__ as admin because they created this group.","Couldn't remove some participants as an admin.","__participantNames__ is no longer a group admin.","Removing __participantNames__ as a group admin.","They are no longer in this group.","You can't add this participant because they left the group recently.","This group is full.","Please try again.","Couldn't make __participantNames__ an admin.","Couldn't make some participants admin.","__participantNames__ is now a group admin.","Making __participantNames__ a group admin.","Couldn't remove __participantNames__.","Couldn't remove some participants.","You can't remove __participant__ because they created this group.","You removed __participantNames__.","Removing __participantNames__.","Couldn't remove profile photo.","Profile photo removed","Removing profile photo","Profile photo set","Couldn't set profile photo.","Setting profile photo","Your name can't be empty","Your name changed","Couldn't change your name.","That emoji isn't allowed in your name","Changing your name","Reporting spam","Couldn't report spam","Reported spam","About can't be empty","About changed","Couldn't change About.","Changing About…","Try again.","Couldn't unblock __participant__","__participant__ unblocked","Unblocking __participant__","Undo","Add a caption…","The contact you have selected is blocked. Would you like to unblock them and add them to the group?","Blocked contacts will no longer be able to call you or send you messages","Add blocked contact","Add catalog","Add to a group","Add file","Add group description","Add group icon","Add participant","Add group participants","Label name already exists","NEW LABEL","New label","Add new label","Add profile photo","Add set of hours","Add to catalog","Drag the image to adjust","All chats are archived","Already added to group","Only admins can send messages","Only __admins__ can send messages","admins","Archive chat","Archived","Archived Chats","To reduce interruptions, archived chats will stay here with notifications turned off. To change this experience, go to Settings > Archived Chats.","Archived chats will stay archived","Archive settings","No archived chats","Archived chats","Archived","Archived chats are muted","Camera","Attach Desktop Client Logs","Document","__count__ Page","Photos & Videos","Catalog","Contact","__number__ audio file you tried adding has no content.","Your browser doesn’t support audio playback.","1.5×","1×","2×","__number__ audio you tried adding is larger than the __maxSize__ limit.","Media Auto-Download","Archived chats will remain archived when you receive a new message","Keep chats archived","Using __deviceName__ as your __deviceType__ for your WhatsApp calls","BETA","You're using the multi-device beta","This chat is with a business account. Click for more info.",'"__businessName__" registered as a business account, but WhatsApp hasn’t verified their name yet.','This chat is with the official business account of "__businessName__". Click for more info.','WhatsApp has verified that this is the official business account of "__businessName__".','WhatsApp has verified that this is the official business account of "__businessName__". This account is saved with a different name in your address book.',"This business account has now registered as a standard account. Click for more info.","This account was previously a business account but has now registered as a standard account and may no longer belong to the business.",'This official business account changed its name to "__businessName__". Click for more info.','WhatsApp has verified that this official business account changed its name and now uses the name "__businessName__".',"__businessName__ used other companies to store and manage this message.","__businessName__ used Facebook and other companies to store and manage this message.","This message was delivered directly from __businessName__.","This message was delivered directly to __businessName__.","__businessName__ used Facebook to store and manage this message.","This chat is with a business account. Click for more info.",'"__businessName__" registered as a business account, but WhatsApp hasn’t verified their name yet.','This chat is with the official business account of "__businessName__". Click for more info.','WhatsApp has verified that this is the official business account of "__businessName__".','WhatsApp has verified that this is the official business account of "__businessName__". This account is saved with a different name in your address book.','This chat is now with the official business account of "__businessName__". Click for more info.','WhatsApp has verified that this is the official business account of "__businessName__".','This chat is no longer with the official business account of "__businessName__". Click for more info.','WhatsApp is no longer able to verify that this is the official business account of "__businessName__".',"Block","Block __contact__? Blocked contacts will no longer be able to call you or send you messages.","Block Contact","List of contacts that you have blocked","No blocked contacts yet","Blocked contacts","WhatsApp secures messages while they're being delivered to and from the companies that store and manage this chat for __businessName__. Contact __businessName__ for more information on their privacy practices.","This chat is with a business account.","WhatsApp secures messages while they're being delivered to and from Facebook, where this chat is stored and managed for __businessName__. Contact __businessName__ for more information on their privacy practices.","WhatsApp secures messages while they're being delivered to and from Facebook, where this chat is stored and managed for __businessName__.","__businessName__ is registered as a business account.","__businessName__ is registered as an official business account.","__businessName__ is registered as an official business account. The business is saved as a different name in your contacts.","This chat is with the official business account of __businessName__.","This chat is with the official business account of __businessName__. The business is saved as a different name in your contacts.","__businessName__ is now registered as a business account, instead of an official business account.","__businessName__ no longer uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ now only uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ no longer uses Facebook or other companies to manage its WhatsApp conversations.","This chat is with a business account that uses Facebook and other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","__businessName__ is now registered as an official business account. This business no longer uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account, but it's saved as a different name in your contacts. This business no longer uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account that only uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account, but it's saved as a different name in your contacts. This business only uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account. This business no longer uses Facebook or other companies to manage its WhatsApp conversations. Click to learn more.","This chat is with the official business account of __businessName__. This business uses Facebook and other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","This chat is with the official business account of __businessName__, but it's saved as a different name in your contacts. This business uses Facebook and other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","__businessName__ is no longer an official business account and it no longer uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is no longer an official business account and it now only uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is no longer an official business account and it no longer uses Facebook or other companies to manage its WhatsApp conversations. Click to learn more.","__businessName__ no longer uses other companies to manage its WhatsApp conversations.","This chat is with a business account that uses other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","__businessName__ is now registered as an official business account. This business no longer uses other companies to manage its WhatsApp conversations. Click to learn more.","This chat is with the official business account of __businessName__. This business uses other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","This chat is with the official business account of __businessName__, but it's saved as a different name in your contacts. This business uses other companies to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","__businessName__ is no longer an official business account and it no longer uses other companies to manage its WhatsApp conversations. Click to learn more.","__businessName__ is now registered as a business account that uses Facebook and other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as a business account that uses other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as a business account that uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as a business account. Click to learn more.","__businessName__ now uses other companies instead of Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ no longer uses Facebook to manage its WhatsApp conversations.","This chat is with a business account that uses Facebook to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","__businessName__ is now registered as an official business account. This business now uses other companies instead of Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account, but it's saved as a different name in your contacts. This business now uses other companies instead of Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account. This business no longer uses Facebook to manage its WhatsApp conversations. Click to learn more.","This chat is with the official business account of __businessName__. This business uses Facebook to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","This chat is with the official business account of __businessName__, but it's saved as a different name in your contacts. This business uses Facebook to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","This chat is with the official account of __businessName__, but it's saved as a different name in your contacts. This account uses Facebook to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","This chat is with the official account of __businessName__. This account uses Facebook to manage its WhatsApp conversations. Click to learn more about privacy in this chat.","__businessName__ is no longer an official business account. This business uses other companies instead of Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is no longer an official business account and it no longer uses Facebook to manage its WhatsApp conversations. Click to learn more.","__businessName__ now uses other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","This chat is with a business account. Click to learn more.","This chat is with the official business account of __businessName__. Click to learn more.","__businessName__ now uses Facebook and other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is no longer registered as a business account.","__businessName__ now uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account that uses Facebook and other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account, but it's saved as a different name in your contacts. This business uses Facebook and other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account that uses other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account, but it's saved as a different name in your contacts. This business uses other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account that uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account, but it's saved as a different name in your contacts. This business uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is now registered as an official business account. Click to learn more.","__businessName__ is no longer an official business account. This business now uses Facebook and other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is no longer an official business account and it now uses other companies to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is no longer an official business account and it now uses Facebook to manage its WhatsApp conversations. Click to learn how this changes privacy in this chat.","__businessName__ is no longer registered as an official business account. Click to learn more.","Broadcast list deleted","Broadcast list info","Browser not supported","and","By appointment only","Closed","Closed now","__closed__, opens at __time__","Closed today","Always Open","By Appointment","Edit Business Hours","End Time","Selected Hours","Start Time","Open","Open 24 hours","__open__ 24 hours","__open__ by appointment only","Open by appointment only","Open now","__open__ until __time__","__open__ until __time__, __additionalOpenTime__ - __additionalCloseTime__","Business Info","This is your business name. It will be visible to your WhatsApp customers.","This verified business is not in your contact list.","__streetAddress__, __city__","__streetAddress__, __city__ __zipCode__","Business account","Something went wrong.",'You cannot select categories when you have selected "Not a Business"',"Choose up to three categories","Confirmed as __businessName__","Confirmed business","About and Phone Number","Add another website","Business Address","Business Hours","Categories","Business Description","Email Address","End Time","Edit map on mobile","This name will be visible to your WhatsApp customers and can only be editable from the app on your mobile device.","Your phone number can only be editable from the app on your mobile device.","Something went wrong","An error occurred while saving.  Please try again.","Business Information","Website","This name will be visible to your WhatsApp customers and can only be editable from the app on your mobile device.","No categories found","Official business account","Search categories","This is a business account.","Verified","__verified__ as __businessName__","Verified business","Use Here","WhatsApp needs a camera for video calls and taking photos. Allow access in your computer's settings.","Allow WhatsApp to access your camera?","Calls are not supported on WhatsApp Web. Open WhatsApp on your phone to call this business.","__count__ message couldn't be forwarded because __contact__ is on a version of WhatsApp that doesn't support it.","No messages could be forwarded because __contact__ is on a version of WhatsApp that doesn't support them.","__count__ message couldn't be forwarded because the file is missing.","__count__ message couldn't be forwarded because the file is missing or __contact__ is on a version of WhatsApp that doesn't support it.","No messages could be forwarded because the file is missing or __contact__ is on a version of WhatsApp that doesn't support them.","No messages could be forwarded because the file is missing.","Can't Load WhatsApp","The caption you’re pasting is too long. Try shortening it or sending it as a separate message.","Caption Too Long","Your cart","Add items to your cart","Collect all the items you're interested in here and then send them to the business. Use your cart to ask about buying, customizing, delivery, or anything you want.","Ask for price","Qty __quantity__","One or more items in your cart have been updated","You can't add any more of this item","Add a message","The message you’re pasting is too long. Try shortening it or sending it as a separate message.","Message Too Long","Received cart","Your sent cart","Send a cart","Something went wrong","Add Images","Add items to your catalog so customers can see what you're offering","Add new item","Failed to send review request.","Add Items","New collection","Failed to delete collection","When you delete this collection, items in the collection will not be deleted.","Delete","Delete Collection","Edit","__updated__ Item Updated","Name required","New collection","New collection","This collection won’t be visible to customers until you add at least 1 item","Update Items","Collections","You already have a collection with this group of items. Add or delete items to make a different group.","Failed to save collection","Are you sure you want to delete this item from your catalog?","Delete Item","Failed to delete product","Catalog disabled","Your catalog is temporarily disabled because WhatsApp is a sales channel for your Facebook shop. To restore your catalog, go to Commerce Manager and set the shop’s visibility to “hidden”, or remove WhatsApp from the Business Manager account.","By using this feature, you're using a __fb_product_link__ and agree that the __fb_commerce_link__ and __wa_commerce_policy_link__ apply.","If you feel this is not correct, you can __request_review_link__.","Your appeal was submitted. If it’s approved, your item will be added to your catalog. If it’s not approved, you’ll be notified.","We reviewed this item again and found it didn't follow product or service guidelines. __learn_more_link__.","We will review the item and if it meets our guidelines, it will be added to your catalog.","When you hide an item, customers won’t see it in your catalog.","Hide item","Hide item in your catalog?","This item wasn't approved because it doesn't follow our product or service guidelines. __learn_more_link__.","request another review","Changes saved","Add to cart","Delete","Hide item","Share","Show item","Show item in your catalog?","This item is being reviewed. If it’s been approved, your customers will be able to see it on your profile. __learn_more_link__.","This item is being reviewed. You hid it, so customers won’t see it in your catalog when it’s approved. __learn_more_link__.","Catalog link","Failed to save changes","Add to cart","Turn this on to let customers add items to a cart when shopping in your catalog. Turning this off won't affect carts you've already received. __learn_more_link__","Failed to load catalog settings.","Settings","Off","On","Learn more about their products & services","View __catalogOwnerName__'s Catalog on WhatsApp","__productName__ from __catalogOwnerName__ on WhatsApp.","Anyone with WhatsApp can follow this link to browse catalog","Add new item","Edit item","View all","Change group icon","Message new number","__name__ changed their phone number. You're currently chatting with their new number.","__name__ changed their phone number to a new number.","__name__ changed their phone number to a new number. Click to message the new number.","Change profile photo","You allowed all participants to send messages to this group","You allowed only admins to send messages to this group","You turned off disappearing messages in this chat","You turned on disappearing messages in this chat","You allowed participants to send messages that have been forwarded many times to this group","You blocked participants from sending messages that have been forwarded many times to this group","You allowed all participants to change this group's info","You allowed only admins to change this group's info","Allowing all participants to send messages to this group","Allowing only admins to send messages to this group","Turning off disappearing messages in this chat","Turning on disappearing messages in this chat","Allowing participants to send messages that have been forwarded many times to this group","Blocking participants from sending messages that have been forwarded many times to this group","Allowing all participants to change this group's info","Allowing only admins to change this group's info","Charge your phone to keep using WhatsApp","Archived","You are not an admin","Search for messages within __chatName__.","Starred Messages","No Internet connection","Group invite message. Open WhatsApp on your phone to view.","Sharing live location. Open WhatsApp on your phone to view.","Payment message. Open WhatsApp on your phone to view.","Choose a phone number","Clear this chat?","Clear messages","Clear chat","Clear this chat?","Delete file from your phone","Clear this chat?","click here for group info","click here for contact info","Update WhatsApp","Click to reload QR code","Click to save, ESC to cancel","Click to update WhatsApp","Close chat","All Items","__count__ item","rejected","See all","This collection is currently under review. Once it’s been approved, your customers will be able to see it on your profile.","Collections","This collection wasn’t approved because it doesn’t follow our guidelines.","Rename","Commerce Manager","Your computer is connected to a network that prevents WhatsApp from working correctly","Computer not connected","Add __participant__ to “__subject__” group?","Add __participants__ to “__subject__” group?","Confirm","You are closing WhatsApp.","Some messages can’t be forwarded, do you want to forward rest of the messages?","Can't forward all messages","Forward to __chat__?","Log out?","Make __participant__ an admin for “__subject__” group?","Remove __participant__ from “__subject__” group?","Send __count__ contact to “__chat__”?","Send __count__ contact to “__chat__”?","Send __count__ contact to “__chat__”?","Unblock __chat__ and forward messages?","Blocked. Click to unblock","Unblock __contact__","Unmute this chat?","Enable sounds and notifications?","Unmute this group?","Connecting…","Connecting to WhatsApp","Connecting","Contact","Contact Card","About and phone number","Contact is blocked","Hey there! I am using WhatsApp.","Loading About…","View contact","__number__ contact that you tried to add has no content.","The contact that you tried to add is larger than the __maxSize__ limit.","Use WhatsApp on your phone to see the complete message history.","Older documents may be available","Older files may be available","Older links may be available","Older media may be available","Older messages may be available","Older products may be available","Use WhatsApp on your phone to search messages from before __date__.","Use WhatsApp on your phone to see the complete chat history.","Older chat history is available","Additional messages for this chat are being synced","Search for messages with __chatName__.","Copy link","Decrease speed of selected voice message","WhatsApp message","WhatsApp group message","Default","Delete all","Delete broadcast list?","Delete for me","Delete chat","Delete chat","Delete this chat?","Delete group","Delete this group?","Delete Item","Deleting a label removes it from all messages, contacts, and from the list of labels. Are you sure you want to delete this label?","Delete message","Delete message?","Tell us about your issue","Update","Please Update WhatsApp","New version available","Go To Settings","Please update WhatsApp from the Mac App Store","Desktop Settings","Update","To continue using WhatsApp, click Update and install the latest version.","Couldn't Update Automatically","Downloading an update to WhatsApp. This may take several minutes. WhatsApp will automatically update and restart when the download finishes.","Updating WhatsApp","Please update WhatsApp from the Windows App Store","Dismiss","Dismiss as admin","Docs","__count__ Doc","“__name__” downloaded.","__number__ document you tried adding has no content.","__number__ document you tried adding is larger than the __maxSize__ limit.","Download all","This contact can't be displayed in WhatsApp Web. Download it to open it with another app on your computer?","Download contact?","Download failed","open","Downloading…","Download completed","This file can't be opened in WhatsApp Web. Download it to open it with another app on your computer?","Download Unsupported File?","Drag file here","End-to-end encrypted","Edit","Choose who can change this group’s subject, icon, description and disappearing messages setting.","Add text to your image…","Edit label","Did you know? You can type : and a word to search emoji","smile","Activity","Animals & Nature","Flags","Food & Drink","Objects","Smileys & People","Symbols","Travel & Places","Turn on desktop notifications","& "," • ",", ","Only admins can change this setting.","Disappearing messages were turned off.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ day.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ hour.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ minute.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ second.","You turned off disappearing messages.","You turned on disappearing messages. New messages will disappear from this chat after __number__ day.","You turned on disappearing messages. New messages will disappear from this chat after __number__ hour.","You turned on disappearing messages. New messages will disappear from this chat after __number__ minute.","You turned on disappearing messages. New messages will disappear from this chat after __number__ second.","__name__ turned off disappearing messages.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ day.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ hour.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ minute.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ second.","","Disappearing messages were turned off. Click to change.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ day. Click to change.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ hour. Click to change.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ minute. Click to change.","Disappearing messages were turned on. New messages will disappear from this chat after __number__ second. Click to change.","You turned off disappearing messages. Click to change.","You turned on disappearing messages. New messages will disappear from this chat after __number__ day. Click to change.","You turned on disappearing messages. New messages will disappear from this chat after __number__ hour. Click to change.","You turned on disappearing messages. New messages will disappear from this chat after __number__ minute. Click to change.","You turned on disappearing messages. New messages will disappear from this chat after __number__ second. Click to change.","__name__ turned off disappearing messages. Click to change.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ day. Click to change.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ hour. Click to change.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ minute. Click to change.","__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ second. Click to change.","Turning on this setting will make new messages disappear from this chat after 7 days. Recipients can still save these messages elsewhere.","Turning on this setting will make new messages disappear from this chat after a selected amount of time. Recipients can still save these messages elsewhere.","New messages will disappear from this chat after __number__ day.","New messages will disappear from this chat after __number__ hour.","New messages will disappear from this chat after __number__ minute.","New messages will disappear from this chat after __number__ second.","Anyone in this chat can change this setting.","Group admins control who can change this setting.","This message was sent while disappearing messages were turned off.","This message will disappear from this chat after __number__ day.","This message will disappear from this chat after __number__ hour.","This message will disappear from this chat after __number__ minute.","This message will disappear from this chat after __number__ second.","Messages will disappear after 7 days if they’re sent to a chat that has disappearing messages turned on.","Messages will disappear after a selected amount of time if they’re sent to a chat that has disappearing messages turned on.","While this setting is on, new messages will disappear from this chat after 7 days.","While this setting is on, new messages will disappear from this chat after a selected amount of time.","Media and messages won’t disappear from outside the chat or from any devices they’re saved on.","There are still ways for recipients to save messages, like forwarding them or taking a screenshot.","Get Started With Disappearing Messages","Disappearing Messages Were Turned On","You can't change this setting because you're not connected to the Internet. Check your Internet and try again.","Off","On","__number__ day","__number__ hour","__number__ minute","__number__ second","You can't turn off disappearing messages for this chat unless you unblock this contact.","You can't turn on disappearing messages for this chat unless you unblock this contact.","Catalog already created.","Two or more images are the same. Delete any duplicates and try again.","Item code must be unique.","Incorrect email address format","Add at least one image","Add a title","Enter a valid price","Wait until the message finishes sending and displays a checkmark before forwarding.","Wait until this message is fully delivered before forwarding.","Unable to forward unsent message.","Can’t Forward","URL is incorrect","Exit group","Exit this group?","Facebook shop","Facebook Commercial Terms","Facebook Product","__number__ file you tried adding has no content.","__count__ file failed to be downloaded because it's no longer on your phone.","__number__ file could not be added.","__number__ file you tried adding is not supported.","__number__ file you tried adding is larger than the __maxSize__ limit.","B","GB","kB","MB","Forward","Forward all","You can only share with up to __count__ chat","Forwarded many times. You can only share with up to __count__ chat.","Messages forwarded many times can only be shared with up to __count__ chat at a time.","Forward message","Forward message to","Forwarded","Forwarded __count__ time","Can't send messages that have been forwarded many times","Forwarded many times","One or more messages will be marked as forwarded many times.","This message will be marked as forwarded many times.","Found a contact card for this number. View contact card?","Older results may be available","Gallery","Get directions","Microsoft Edge","Google Chrome","Mozilla Firefox","Get notified of new messages","Opera","Safari (macOS 11+ Only)","Get support via email","Custom GIF animations are currently not supported. Please use provided GIF selection feature.","Favorites","Haha","Love","Reactions","Sad","Sports","Trending","TV","Alerts and sounds off","Alerts and sounds off for 1 day","Alerts and sounds off for 1 hour","Alerts and sounds off for 1 week","Alerts and sounds off for 8 hours","Alerts and sounds off. Click to restore.","Notifications enabled","Go to message","Messages are now end-to-end encrypted. No one outside of this chat, not even WhatsApp, can read or listen to them. Click to learn more.","Failed to load Google Maps","GOT IT","Group","You were added by someone who's not in your contacts","Group deleted","Description","You can't join this group because you were removed.","You can't join this group because it has ended.","You can't join this group because this invite link was reset.","You can't join this group because it is full.","Couldn't join this group. Please try again.","Cancel","Checking invite link","__count__ contact","Reset link","Join group","Invite to group via link","Anyone with WhatsApp can follow this link to join this group. Only share it with people you trust.","__count__ participant","You can't view this group's invite link because you're not an admin.","You can't view this group's invite link because you're no longer a participant.","You can't view this group's invite link because this group has ended.","This invite link doesn't match any WhatsApp groups.","Are you sure you want to reset the invite link for __groupName__? If you reset the link, no one will be able to use it to join this group.","Resetting the invite link for __groupName__.","The previous invite link is now reset and a new invite link has been created.","Send link to","Log in to WhatsApp Web to join this WhatsApp group","View group","Group muted","Type contact name","All participants","Edit group info","Disappearing Messages","Allow","Frequently forwarded messages","Messages forwarded many times","Don't allow","Only admins","Send messages","Group Settings","Follow this link to join my WhatsApp group:","__count__ more","Group Subject","Invitation to join my WhatsApp group","Invite Expired","__number__ invited","Couldn't add __participant__. You can invite them privately to join this group.","WhatsApp group invite","Invited","View invite","Group video call","Group voice call","Send invite to...","Reset invite for __participant__? If you reset the invite, __participant__ won't be able to use it to join this group.","To take photos, click “Allow” above to give WhatsApp access to your computer's camera.","To take photos, click “Yes” below to give WhatsApp access to your computer's camera.","To take photos, WhatsApp needs access to your computer's camera. Click __chrome_media_error__ in the URL bar and choose “Always allow web.whatsapp.com to access your camera.”","To take photos, WhatsApp needs access to your computer’s camera. Refresh the page, try sending a camera image, and select “Yes” from the menu that appears.","To take photos, WhatsApp needs access to your computer’s camera. Click __firefox_lock__ in the URL bar and set “Use the Camera” to “Allow.”","To take photos, WhatsApp needs access to your computer’s camera. Click __opera_media__ in the URL bar and click “Clear This Setting and Reload.”","To take photos, WhatsApp needs access to your computer’s camera. Open your browser’s Preferences → Websites and change camera setting for web.whatsapp.com to “Allow”.","You can’t take a photo because it looks like your computer doesn’t have a camera. Try connecting one or if you have one connected, try restarting your browser.","Camera Not Found","Allow camera","To record Voice Messages, click “Allow” above to give WhatsApp access to your computer's microphone.","To record Voice Messages, click “Yes” below to give WhatsApp access to your computer's microphone.","To record Voice Messages, WhatsApp needs access to your microphone. Click __chrome_media_error__ in the URL bar and choose “Always allow web.whatsapp.com to access your microphone.”","To record Voice Messages, WhatsApp needs access to your computer’s microphone. Refresh the page, try sending a Voice Message, and select “Yes” from the menu that appears.","To record Voice Messages, WhatsApp needs access to your computer’s microphone. Click __firefox_lock__ in the URL bar and set “Use the Microphone” to “Allow.”","To record Voice Messages, WhatsApp needs access to your computer’s microphone. Click __opera_media__ in the URL bar and click “Clear This Setting and Reload.”","To record Voice Messages, WhatsApp needs access to your computer’s microphone. Open your browser’s Preferences → Websites and change microphone setting for web.whatsapp.com to “Allow”.","You can’t record a Voice Message because it looks like your computer doesn’t have a microphone. Try connecting one or if you have one connected, try restarting your browser.","Microphone Not Found","Can’t record voice messages during a WhatsApp call.","Allow microphone","To get notifications for new messages, click “Allow” above.","To get notifications for new messages, click “Yes” below.","To get notifications for new messages, select “Allow notifications” from the prompt below the URL bar.","Allow notifications","Help","New Message","Message from __author__","__unreadCount__ New Message","You'll be logged out after several minutes of inactivity","Failed to load image","__number__ image you tried adding has no content.","Image may be subject to copyright.","Image search failed","Enter search term here","No images found","Search for images","Image Search","Terms of Service","__number__ image you tried adding is larger than the __maxSize__ limit.","Check your phone to answer","WhatsApp group video call from __name__","WhatsApp group voice call from __name__","WhatsApp video call from __name__","WhatsApp voice call from __name__","Increase speed of selected voice message","Send and receive messages without connecting your phone.","Use WhatsApp on up to 4 devices at the same time.","WhatsApp Web","WhatsApp connects to your phone to sync messages. To reduce data usage, connect your phone to Wi-Fi.","Make calls and send messages without connecting your phone.","WhatsApp for Desktop","Get it here","WhatsApp is available for Mac. __get_it_here__.","WhatsApp is available for Windows. __get_it_here__.","Keep your phone connected","Expires at __time__","Expires in __number__ day","Invite expired","Keep starred messages","Keyboard Shortcuts","Catalog","Catalog (temporarily disabled)","Choose color","__count__ item","Label items","Item Code (Optional)","Description (Optional)","Link (Optional)","Name","Price __currencySymbol__ (Optional)","Enter reason for this request...","Search in __labelName__...","Labels","There was an unexpected error, please click to reload the application.","Learn more","Licenses","Couldn't copy to clipboard. Copy using mouse or keyboard.","Link copied to clipboard.","Links","__count__ Link","Accurate to __accuracy__ M","__count__ people","Live location ended","Expired Location","Last updated __date__ at __time__","Last updated today at __time__","Last updated __date__ at __time__","Last updated yesterday at __time__","Live until __time__","Map view","Satellite view","Terrain view","Hide traffic","Show traffic","Click to continue viewing live location","__hours__h left","__hours__h __minutes__m left","__minutes__m left","__sharers__ is sharing live location","__name__ is sharing live location","__count__ person is sharing live location","You are sharing live location","You and __name__ are sharing live location","You and __count__ other person are sharing live location","You are sharing live location","Stop Sharing","__name__ stopped sharing","Live Location","Updated __hours__h ago","Updated __hours__h __minutes__m ago","Updated just now","Updated __minutes__m ago","View Live Location","load earlier messages…","load recent messages…","Loading…","loading messages…","Log in","Menu __android_menu_icon__","Click to reload QR code","Need help to get started?","Settings __iphone_settings_icon__","Open WhatsApp on your phone","Tap __android_menu__ or __iphone_settings__ and select __whatsapp_web_menu_item__","Point your phone to this screen to capture the code","To use WhatsApp on your computer:","WhatsApp Web","Linked Devices","This business account is not in your contact list.","Make sure your computer has an active Internet connection.","Make sure your phone has an active Internet connection.","Edit group admins","Mark as read","Mark as unread","You've reached the maximum number of images to add.","Downloading messages: __progress__%","Don't close this window. Your messages are downloading.","Media","Voice Messages are always automatically downloaded for the best communication experience","Add a caption","Background","Done","Failed to add image","Bryndan Write","Norican","Oswald","Sans Serif","Serif","No preview available","Reset","Crop & Rotate","Delete","Emoji","Paint","Redo","Rotate left","Rotate right","Sticker","Text","Undo","Type something","The item you tried adding failed to load.","This file was changed from original.","Media, Links and Docs","Media, Links, Docs and Products","Archived","Blocked","Desktop Settings","Help","Keep me signed in","Log out","Make group admin","Media Auto-Download","Notifications","Profile","Profile","Remove","Security","Settings","Starred","Theme","Chat Wallpaper","Attach","Menu","Message","Message admin","This audio is too large. You can send audio up to __maxSize__.","Message __author__","This document is too large. You can send documents up to __maxSize__.","This file is too large. You can send files up to __maxSize__.","This image is too large. You can send images up to __maxSize__.","Message info","Delivered","Delivered to","Played","Played by","Read","Read by","__count__ remaining","Seen","Seen by","Seen","Seen by","Opened","Opened by","Couldn't find message","The message you’re pasting is too long. Try shortening it or sending it in multiple parts.","Message Too Long","This video is too large. You can send videos up to __maxSize__.","Room","Continue in Messenger","Create a room in Messenger and send a link to group video chat with anyone, even if they don't have WhatsApp or Messenger.","Rooms are protected by Messenger's encryption and privacy controls, but they aren't end-to-end encrypted.","Introducing Messenger Rooms","Continue in Messenger to create a room.","Create a room","WhatsApp needs a microphone for calls and voice messages. Allow access in your computer's settings.","Allow WhatsApp to access your microphone?","Can’t play this Voice Message because it's no longer on your phone.","Voice Message Unavailable","Can’t view this contact because it's no longer on your phone.","Contact Unavailable","Can’t download this document because it's no longer on your phone.","Document Unavailable","Can’t view this GIF because it's no longer on your phone.","GIF Unavailable","Media Message Unavailable","Can’t view this photo because it's no longer on your phone.","Photo Unavailable","Can’t download this sticker because it's no longer on your phone.","Sticker Unavailable","Can’t play this video because it's no longer on your phone.","Video Unavailable","Couldn't display message info. Try again later.","Phone number shared via url is invalid.","Send message to","Log in to WhatsApp Web to share","__contactName__ and __count__ other contact","No contacts","__count__ contact","You can only send up to __count__ contact","View all","1 Day","1 Hour","1 Week","1 Year","8 Hours","Always","Mute “__name__” for…","__A__, __B__","__A__, and __B__","__A__, __B__","__A__ and __B__","Archive Chat","Close Window","WhatsApp needed to restart because of a problem.","Problem Detected","Delete Chat","Delete Group","Exit Group","Log Out","Mark as Read","Mark as Unread","Call","Always On Top","Chat","File","Help","Help Center","Terms and Privacy Policy","Copy","Copy Image","Copy Link","Cut","Edit","About WhatsApp","Hide","Hide Others","Preferences","Quit WhatsApp","Services","Show All","Paste","Redo","Search","Select All","Undo","View","Enter Full Screen","Exit Full Screen","Zoom In","Actual Size","Zoom Out","Next Chat","Previous Chat","Search Chat","Add to dictionary","Copy","Copy Image","Copy Link","Cut","Paste","Redo","Select All","Undo","Window","Bring All to Front","Minimize","Zoom","Do Not Move","Move to Applications","You can move WhatsApp to Applications so it's easier to find.","Move WhatsApp to Applications?","Mute","New Chat","New Group","Pin Chat","Profile and About","Unarchive Chat","Cancel Mute","Unpin Chat","Cancel","End Call","Are you sure you want to end the current call?","This video is unavailable. Please try again.","New chat","New group","Next","You need to create a catalog on the phone first","No chats","No contacts","No Docs","No groups","No Links","No Media","No Media, Links and Docs","No Media, Links, Docs and Products","No products","No result found for '__labelName__'","No results","No starred messages","No thanks","No update found","Not spam","Notifications","__number__ of __totalNumber__","+__number__",'This chat is with the official business account of "WhatsApp". Click for more info.','This is the official business account of "WhatsApp".','This is the official business account of "WhatsApp". This account is saved with a different name in your address book.',"This official business account is not in your contact list.","OK, got it","Only admins can edit this group's info","Opening link in new window...","You will now be directed to","Audio","Start WhatsApp at Login","Desktop Alerts","Documents","Show Previews","Display message text in desktop alerts","Outgoing Message Tone","Toggles the audio tone that plays when you send a message","Photos","Sounds","Videos","Ask for total","The seller has deleted your sent cart. Contact the seller for more information.","Order Detail","Your Order","__subtotal__ (estimated)","Qty __quantity__","__total__ (estimated total)","No Items","View cart","View sent cart","Organizing messages","This message can't be viewed in WhatsApp Desktop. View it on your phone instead.","This message can't be viewed in WhatsApp Web. View it on your phone instead.","Recent","Already blocked","Payment","Not Now","Phone battery low","WhatsApp is open on another computer or browser. Click “Use Here” to use WhatsApp in this window.","Phone not connected",'The version of WhatsApp on your phone is too old. Please update to the latest version, then click "LOG IN" to continue using WhatsApp.',"The video can't be played.","Open the link","This video is playing in picture in picture.","Currently playing video was revoked.","Pin chat","Waiting for this message. This may take a while.","Previous","Reply privately","Add to cart","Item added to cart","Catalog","More","Send catalog","Follow this link to view our catalog on WhatsApp:","Something went wrong","Catalog","View catalog","This item is out of stock.","Details","You hid this item. Your customers can't see it in your catalog","Product link","View items","Items in this message are no longer available","Message Business","Can not send product before media is ready","View","Out of Stock","Remove from cart","This product or service has been removed","This is abusive, harmful or illegal","This appears to be a knockoff or counterfeit item","The pictures or descriptions don't match the item","Other","Tell us more","This is fraud or a scam","This is spam","Submit","Couldn't report product","Thanks for your feedback","Reporting product","Please select a reason.","Follow this link to view our item on WhatsApp:","Waiting for network","Products","__count__ Product","This photo is too small. Please select a photo with height and width of at least __size__ pixel.","Couldn't send this Voice Message.","…","Your Name","This is not your username or pin. This name will be visible to your WhatsApp contacts.","Group • __groupName__","Read more","Reconnect","Remove","Remove this group's icon?",'Remove label "__labelName__" from __count__ item',"Remove photo","Remove your profile photo?","Reply","Report","Report and block","Report business","Block business and clear chat","Report this business to WhatsApp?","Report contact","Block contact and clear chat","Report this contact to WhatsApp?","Report __contactInfo__","Report group","Exit group and clear chat","Report this group to WhatsApp?","Report product","Report Product","We will review the product and if it does not meet our guidelines, it will be removed.","Your report has now been submitted.","Report this product?","Tell Us More","Report spam","Most recent messages in this group will be forwarded to WhatsApp.","Most recent messages from this user will be forwarded to WhatsApp.","Most recent messages from this business will be forwarded to WhatsApp.","Request review","Click to resend","Retake","Retry","Retry Now","Upload","Retrying…","Retrying in __duration__…","Retrying in __number__ second…","Delete for everyone","Revoke invite","This message was deleted","Messages you selected will be deleted for everyone on the latest version of WhatsApp in this chat.","You deleted this message","Save","Search…","Search contacts","Search Emoji","Search GIFs via __service__","Search groups","Search Messages","No chats, contacts or messages found","No contacts found","No groups found","No messages found","No results found for '__keyword__'","Search or start new chat","Search Participants","Search results not yet available. Try again later.","Search via WhatsApp sticker store","Search Web","Couldn't search the web. Check your computer's internet connection and try again.","Would you like to search this on the web? This will upload the message to Google.","Looking for chats, contacts or messages…","Searching for images...","Looking for messages…","Security code notifications are no longer available for this chat.","Learn which chats are end to end encrypted","Turn on this setting to receive notifications when one of your contact's security code changes.","Turn on this setting to be notified when your security code changes for a contact in an end-to-end encrypted chat. This setting must be enabled on each device you want notifications to show.","Show security notifications","Show security notifications on this computer","WhatsApp secures your conversations with end-to-end encryption. This means your messages, calls and status updates stay between you and the people you choose. Not even WhatsApp can read or listen to them.","Messages and calls in end-to-end encrypted chats stay between you and the people or businesses you choose, so not even WhatsApp can read or listen to them.","Security","See __count__ archived chat","See Location","See more","__count__ selected","Send contact","Send contacts","Couldn't send this message.","Send link via WhatsApp","send","Feedback/Question about WhatsApp","Email address","Confirm email address","Please enter a valid email address","The email addresses do not match","Subject","Please upload images 10 MB or smaller","Question about WhatsApp Business for Mac","Question about WhatsApp for Mac","Release to add...","Add Screenshots","Feedback sent","Please enter a subject.","Contact us","__count__ Screenshot Maximum","Please add more to your description","Question about WhatsApp Business for Web","Question about WhatsApp for Web","Question about WhatsApp Business for Windows","Question about WhatsApp for Windows","To verify, send a message to __name__ and try again.","Send product","Send products","The sender is not in your contact list","Settings","Shop","Search in Broadcast lists","Broadcast lists","Unread chats","Search in Groups","Labels","Search in Unread chats","Some of your messages are still sending.","Star message","No starred messages","Starred messages","Starting chat","Status","Camera","HIDE","SHOW","Status update not found","MUTED","My Status","No updates","Click on a contact to view their status updates","RECENT","Sending reply…","You received a status, but your version of WhatsApp doesn't support it.","Update your status","Upload","View status","View your updates","VIEWED","You don't have any stickers yet. Download sticker packs on your phone to get started.","Angry","Celebrate","Greetings","Happy","Love","Sad","You haven't sent any stickers yet","You haven't favorited any stickers yet","Subject","This chat has been closed","Include device information? (optional)","Technical details like your model and settings can help us answer your question.","Tell us how we can help","Your question has been sent to WhatsApp Support. We'll respond in a WhatsApp chat shortly.","Contact us","The support request form is not yet available for desktop. Use your phone to submit it.","WhatsApp secures messages and calls while they’re being delivered to and from this account.","Learn more about chats with WhatsApp Support.","Click to learn how messages and calls are secured.","Security","This chat is with the official account of WhatsApp Support. Click to learn more.","WhatsApp Support","Suspicious link","__count__ suspicious link","Open link","This link contains unusual characters. It may be trying to appear as another site.","Take photo","You'll be able to use WhatsApp again in __duration__","You're temporarily banned from WhatsApp because you sent too many messages to people who don’t have __phone__ in their address books.","You're temporarily banned from WhatsApp because too many people blocked you.","You're temporarily banned from WhatsApp because you created too many groups with people who don’t have __phone__ in their address books.","You're temporarily banned from WhatsApp because you sent the same message to too many people.","You're temporarily banned from WhatsApp because you sent too many messages to a broadcast list.","You're temporarily banned from WhatsApp because you may have violated our terms of service.","Terms and Privacy Policy","Dark","Light","Choose theme","System default","Maximum number of files uploaded. __number__ file has been ignored.","Trying to reach phone","Turn off all desktop notifications","Turn off all desktop notifications for:","Type a message","Type a reply…","Unarchive chat","Unblock","Unblock __contact__?","Unblock Contact","unknown subject","Unpin chat","__count__ unread message","Unread messages","Could not forward this message because the file is no longer on your phone.","Unstar all","Unstar","Unstar all messages?","Unstar message","You received a message on your phone, but your version of WhatsApp Desktop doesn't support it.","This message can't be shown on WhatsApp Desktop. Open WhatsApp on your phone to view.","You received a message, but your version of WhatsApp doesn't support it.","You sent a message from your phone, but your version of WhatsApp Web doesn't support it.","You received a message on your phone, but your version of WhatsApp Web doesn't support it.","Click here to update.","This message can't be shown on WhatsApp Web. Open WhatsApp on your phone to view.","Until __date__ at __time__","Until today at __time__","Until tomorrow at __time__","Until __day__ at __time__","Untitled","Update available","Download Microsoft Edge","Update Google Chrome","Update Mozilla Firefox","Update Safari","Updating WhatsApp","WhatsApp is out of date. Updating now…","Updating","Upload photo","__participants__ joined using your invite","You invited __participants__","AIM","Birthday","Description","Business Name","Mobile","Email","Home","Home Fax","ICQ","iPhone","Jabber","Main","Windows Live","Nickname","Pager","Skype","Work","Work Fax","Yahoo","Version __version__","Video call","Switch","__number__ video you tried adding has no content.","Your browser doesn’t support video playback.","__number__ video you tried adding is larger than the __maxSize__ limit.","View business","View Contact Card","Expired","For more privacy, your photo or video will disappear from the chat after the recipient opens it once. Remember, people can always take screenshots.","Send photos and videos that can be viewed only once","Photo","Photo set to view once.","For more privacy, this photo will disappear after you close it.","This photo is set to view once","Video set to view once.","For more privacy, this video will disappear after you close it.","This video is set to view once","Video","Opened","View or edit catalog","View photo","View Shop","Voice call","End call","Mute microphone","Turn off camera","Turn on camera","Unmute microphone","You can turn on your camera after __callee__ answers","Request to switch to video call","Calling…","Camera not found","camera off","Call ended","Call failed","Call answered on your connected phone","In call","Your call will end in a few seconds because your microphone and sound output device were disconnected.","Your call will end in a few seconds because your microphone was disconnected.","Microphone not found","Call not answered","__name__'s camera and mic are off","The other person's camera and mic are off","__name__'s camera is off","The other person's camera is off","__name__'s mic is muted","The other person's mic is muted","Reconnecting…","Call declined","Your connected phone is already on a WhatsApp call","__name__ is requesting to switch to a video call","Requesting to switch to a video call...","Requesting to switch to a video call...","requesting video call...","Ringing…","Your call will end in a few seconds because your sound output device was disconnected.","Your microphone is muted","Camera","Use System Setting","Microphone","Audio Device","Default Communications Device","You can turn off your camera after __callee__ answers","WhatsApp didn't connect to a video or audio device. Try starting the call again. If the problem continues, you may have to restart WhatsApp or your computer.","Call could not be started","Please contact us with the make and model of your camera. ","WhatsApp doesn't work with your camera yet","You are already on a WhatsApp call","Call cannot be placed for more than __count__ participant","Couldn't place call: all recipients are using old versions of WhatsApp or incompatible devices.","You can only call up to __count__ contact","__callee__ couldn't be added to the call, because they are using an old version of WhatsApp or an incompatible device.","__count__ others","WhatsApp needs a camera for video calls. Connect one to your computer.","WhatsApp could not find a connected camera","WhatsApp needs a microphone for calls. Connect one to your computer.","WhatsApp could not find a connected microphone","Make sure your computer has an active Internet connection and try again.","Computer not connected to the Internet","Make sure your phone has an active Internet connection and try again.","Phone not connected to the Internet","WhatsApp needs an audio output device for calls. Connect one to your computer.","WhatsApp could not find a connected audio device","Call could not connect","__callee__ is in a country where WhatsApp Calling is unavailable","Couldn't place call: __callee__ is unable to receive WhatsApp calls.","WhatsApp Calling is unavailable in your country.","Couldn't place call: __callee__ is unable to receive WhatsApp calls at this time.","Couldn't place call: __callee__ is unable to receive WhatsApp calls.","Couldn't place call: __callee__ is not registered on WhatsApp","Unblock this contact to call them.","Couldn't place call: __callee__ is unable to receive WhatsApp video calls at this time.","Your audio device is unavailable","Your audio device or microphone is unavailable","Your camera is unavailable or used by another app","Allow WhatsApp to access your camera in computer's settings","Your microphone is unavailable. Switch to another microphone or end the call and try again.","Allow WhatsApp to access your microphone in computer's settings","Accept","Decline","Ignore","WhatsApp voice call","WhatsApp group voice call","WhatsApp group video call","WhatsApp video call","WhatsApp will use your computer's camera for video calls and taking photos. You can always change this later in your computer's settings.","WhatsApp will use your computer's microphone for calls and voice messages. You can always change this later in your computer's settings.","Call could not connect","__contactName__ - WhatsApp voice call","__contactName__ - WhatsApp video call","Add WhatsApp Doodles","Chat wallpaper set","Chat wallpaper doodles added","Chat wallpaper doodles removed","Set Chat Wallpaper","Wallpaper Preview","Your security code with __contactName__ changed because there was a login on a new device of theirs.","Your security code with __contactName__ changed because you logged into a new device.",'Your security code with all recipients changed because there was a login on a new device of yours. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Your security code with __contactName__ changed because there was a login on a new device of yours.",'Your security code with all participants changed because there was a login on a new device of yours. To verify a contact\'s security code, open their Contact Info page and click "Encryption"',"Your security code with __contactName__ changed because there was a login on this device.",'Your security code with all recipients changed because there was a login on this device. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Messages are end-to-end encrypted. Click to learn more.","Messages you send to this broadcast list are secured with end-to-end encryption. Click to learn more.","Messages you send to this broadcast list are secured with end-to-end encryption, which means WhatsApp and third parties can't read them.","Your security code with all recipients changed. Click to learn more.",'WhatsApp has verified that this is the official business account of "__businessName__".',"WhatsApp has verified that this is the official business account of __businessName__. This account is saved with a different name in your contacts.","This may be a business. WhatsApp hasn't verified their name yet.","Download","Add label","Delete label","Remove label","Cancel","You can't send messages to this group because you're no longer a participant.","Can't send a message to blocked contact __contact__.","Your security code with __contactName__ changed because there was a login or logout from one or more of their devices.",'Your security code with all recipients changed because there was a login or logout from one or more of your devices. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Your security code with __contactName__ changed because there was a login or logout from one or more of your devices.",'Your security code with all participants changed because there was a login or logout from one or more of your devices. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"WhatsApp secures your conversations with end-to-end encryption. This means your messages and status updates stay between you and the people you choose. Not even WhatsApp can read or listen to them.","WhatsApp secures your conversations with end-to-end encryption. This means your messages, calls and status updates stay between you and the people you choose. Not even WhatsApp can read or listen to them.","Muted","Chats","Close","Contact info","Messages are end-to-end encrypted. No one outside of this chat, not even WhatsApp, can read or listen to them. Click to learn more.","Messages to this chat are secured with end-to-end encryption. __businessName__ may use another company to store, read and respond to your messages. Click to learn more.","Messages are end-to-end encrypted. Click to verify.","Messages and calls are end-to-end encrypted. Click to verify.","Contacts","Continue","online","typing…","recording audio…","last seen __date__ at __time__","last seen today at __time__","last seen __date__ at __time__","last seen yesterday at __time__","__participant__ is typing…","__participant__ is recording audio…","Audio","Contact","__count__ page","Document","Photo","Live location","Location","Product","Sticker","Video","Voice message","Delete","Delete group","Delete broadcast list","Download “__name__”","Encryption","Exit","Exit group","Frequently Contacted","Go",'Your security code with all participants changed because there was a login on this device. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Group admin","Only admins can message this group.","__name__ changed this group's settings to allow all participants to send messages to this group.","You changed this group's settings to allow all participants to send messages to this group.","__name__ changed this group's settings to allow only admins to send messages to this group.","You allowed only admins to send messages to this group","An admin created this group","__name__ created group “__subject__”","__name__ created this group","An admin created group “__subject__”","You created group “__subject__”","You created this group","Created __date__ at __time__","Created __date__ at __time__","Created today at __time__","Created today at __time__","Created __day__ at __time__","Created __day__ at __time__","Created yesterday at __time__","Created yesterday at __time__","__name__ changed the group description. Click to view.","__name__ changed the group description.","A participant changed the group description. Click to view.","A participant changed the group description.","You changed the group description. Click to view.","Group Description","This group has ended","Group info","Messages are end-to-end encrypted. Click to learn more.","Messages and calls are end-to-end encrypted. Click to learn more.","Messages are end-to-end encrypted. No one outside of this chat, not even WhatsApp, can read or listen to them. Click to learn more.","Messages you send to this group are secured with end-to-end encryption, which means WhatsApp and third parties can't read them.","Messages and calls to this group are secured with end-to-end encryption, which means WhatsApp and third parties can't read or listen to them.","Messages and calls are end-to-end encrypted. No one outside of this chat, not even WhatsApp, can read or listen to them. Click to learn more.","__name__ reset this group's invite link. Click to view the new invite link.","You reset this group's invite link. Click to view the new invite link.","__name__ changed this group's settings to allow messages that have been forwarded many times.","You changed this group's settings to allow messages that have been forwarded many times.","__name__ changed this group's settings to not allow messages that have been forwarded many times.","You changed this group's settings to not allow messages that have been forwarded many times.","__name__ was added","You were added","__name__ changed their phone number to a new number.","__name__ changed to __new_number__","__participants__ is no longer an admin","You're no longer an admin","__name__ joined via an invite link","You joined via an invite link","__name__ left","You left","__participants__ is now an admin","You're now an admin","__name__ was removed","You were removed","__name__ added __participants__","__name__ added you","__name__ removed __participants__","__name__ removed you","A participant added __participants__","A participant added you","A participant removed __participants__","A participant removed you","You added __participants__","You removed __participants__","__name__ changed this group's settings to allow all participants to edit this group's info.","You changed this group's settings to allow all participants to edit this group's info.","__name__ changed this group's settings to allow only admins to edit this group's info.","You changed this group's settings to allow only admins to edit this group's info.","Your security code with all participants changed. Click to learn more.","__name__ changed the subject to “__subject__”","A participant changed the subject to “__subject__”","You changed the subject to “__subject__”","Invite to group","__num__ invite sent","Invite reset","Groups","Groups in common","Messages to this chat and calls are secured with end-to-end encryption, which means that WhatsApp and third parties can’t read or listen to them. __businessName__ may use a service to store, read and respond to your messages and calls. Contact __businessName__ for information on their privacy practices.","Learn more","Broadcast list info","__name__ added to the list","__name__ removed from the list","Logging Out","Do not close this window","One or more group participants are using old versions of WhatsApp that can't receive messages sent from this device. Use your phone to message them instead.","__name__ and possibly other group participants are using an old version of WhatsApp that cannot receive messages sent from web/desktop using the multi-device beta. Use your phone to message this group.","This message couldn’t be delivered","__name__ is using an old version of WhatsApp that cannot receive messages sent from web/desktop using the multi-device beta. Use your phone to message them.","Clearing or deleting entire chats will remove messages from this device only. They will not be removed from other devices.","Changes to clearing or deleting a chat","Messages will be removed from this device only.","Messages will be removed from this device only.","Your computer does not have enough space for WhatsApp to run. Please create more storage by deleting unused files from your computer, then log in again.","The most recent messages in this group will be forwarded to WhatsApp. If you exit the group and clear the chat, it will be deleted from this device only.","The most recent messages from this contact will be forwarded to WhatsApp. If you block this contact and clear the chat, it will be deleted from this device only.","The most recent messages from this business will be forwarded to WhatsApp. If you block this business and clear the chat, it will be deleted from this device only.","Pinning chats from web/desktop is not yet available on the multi-device beta","Can't pin chat","To verify that messages and calls with __contactName__ are end-to-end encrypted, open this screen on your phone, and follow the instructions.","New group","Mute notifications","Unmute notifications","New chat","About","Status","Could not deliver message","Messages","Missed group video call","Missed group video call at __time__","Missed group voice call","Missed group voice call at __time__","Missed video call","Missed video call at __time__","Missed voice call","Missed voice call at __time__","No","The business account for __businessName__ has registered as a standard user account and may no longer belong to the business.","The business account you were chatting with is now a standard account. Click for more info.","Messages to this chat are now secured with end-to-end encryption, which means third parties can't read or listen to them.","Messages to this chat are now secured with end-to-end encryption. Click to learn more.","OK","Other contacts","__count__ participant","To receive a payment from __senderName__, set up your payment account on your phone.","__contactName__ canceled their payment request for __currencyAndAmount__","You canceled your payment request to __contactName__ for __currencyAndAmount__","__contactName__ declined your payment request for __currencyAndAmount__.","You declined __contactName__'s payment request for __currencyAndAmount__.","__senderName__'s payment request for __currencyAndAmount__ to you expired.","Your payment request to __receiverName__ for __currencyAndAmount__ expired.","You notified __receiverName__ that you are trying to send a payment.","You can now send __receiverName__ a payment.","Waiting for this payment message's note. This may take a while.","Payment message • Amount unavailable","This payment message has a note but your version of WhatsApp doesn't support viewing it.","Requested from __receiverName__","Requested __amount__ from You","__senderName__ requested __amount__ from You","__senderName__ requested __amount__ from __receiverName__","Sent __amount__ to You","__senderName__ sent __amount__ to You","__senderName__ sent __amount__ to __receiverName__","Sent to __receiverName__","Canceled","Completed","Failed","Expired","In Review","Pending","Pending (expiring)","Pending (expires __timeSpan__)","Pending (expires in less than 1 minute)","Processing","__senderName__ sent you __currencyAndAmount__. Use WhatsApp on your phone to accept this transaction.","__senderName__'s payment __relativeTime__ is complete.","Declined","Your payment to __receiverName__ __relativeTime__ couldn't complete.","Your payment to __receiverName__ __relativeTime__ couldn't complete.","Your payment to __receiverName__  was refunded __relativeTime__.","on Friday","on Monday","on Saturday","on __date__","on Sunday","on Thursday","on Tuesday","on Wednesday","__name__ changed this group's icon","You changed this group's icon","__name__ deleted this group's icon","You deleted this group's icon","Preview","OFFICIAL ANNOUNCEMENTS","Recent chats","Recipients","Your security code with __contactName__ changed because there was a logout from one of their devices.",'Your security code with all recipients changed because there was a logout from one of your devices. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Your security code with __contactName__ changed because there was a logout from one of your devices.",'Your security code with all participants changed because there was a logout from one of your devices. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Reset link","Web Search","Your security code with __contactName__ changed. Click to learn more.","Your security code with __name__ changed because there was a registration on a new device of theirs.",'Your security code with all recipients changed because there was a registration on a new device of yours. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Your security code with __name__ changed because there was a registration on a new device of yours.",'Your security code with all participants changed because there was a registration on a new device of yours. To verify a contact\'s security code, open their Contact Info page and click "Encryption".',"Select messages","Help Center","Share","This business uses WhatsApp Business, which allows them to add their opening hours, address, website and catalog of products or services.",'WhatsApp has verified that this is the official business account of "__businessName__". This business uses WhatsApp Business, which allows them to add their opening hours, address, website and catalog of products or services.',"Learn about getting the app","About WhatsApp Business","If you’re a business, the free WhatsApp Business app can help.","If you’re a business, you can benefit from switching to the free WhatsApp Business app. It has tools to connect with customers and manage messages.","Scan this code to get the WhatsApp Business App. Or, you can install it from the App Store or Google Play Store.","WhatsApp Business app","We are updating our WhatsApp Business Terms of Service. Agree to our new Terms on your phone to continue using WhatsApp Business.",'We are updating our WhatsApp Business Terms of Service. Agree to our new Terms on your phone to continue using WhatsApp Business. If you have accepted the Terms of Service, click "LOG IN" to continue using WhatsApp Business.',"Starred Messages","About",'This chat is with the verified business account for "__businessName__". Click for more info.','WhatsApp has made changes to the business account types. "Verified Business" will now be labeled as "Official Business Account".','This chat is with the business account for "__businessName__". Click for more info.','WhatsApp has made changes to the business account types. "Confirmed Business" will now be labeled as "Business Account".',"This chat may be with a business account. Click for more info.","__businessName__ may be a business account, but WhatsApp hasn’t verified their name yet.",'The business account you’re chatting with is now verified as "__businessName__". Click for more info.','WhatsApp has made changes to the business account types. "Verified Business" will now be labeled as "Official Business Account".',"This business account has now registered as a standard account. Click for more info.","This account was previously a business account and has now registered as a standard account. It may no longer belong to the business.",'The business account you’re chatting with is no longer verified as "__businessName__". Click for more info.','WhatsApp is no longer able to verify that this is the account for "__businessName__".','The business account you’re chatting with is no longer verified as "__businessName__". Click for more info.','WhatsApp is no longer able to verify that this is the account for "__businessName__".','The business account you’re chatting with is no longer confirmed as "__businessName__". Click for more info.','WhatsApp is no longer able to confirm that this is the account for "__businessName__".',"This account has registered as a business account. Click for more info.",'This account has registered as a business account and WhatsApp has confirmed that this is the account for "__businessName__".',"This chat may be with a business account. Click for more info.","__businessName__ registered as a business account, but WhatsApp hasn’t verified their name yet.",'The business account you\'re chatting with belongs to "__businessName__".','WhatsApp has made changes to the business account types. This "Confirmed Business" will now be labeled as "Business Account".',"WhatsApp is updating our Terms and Privacy Policy to reflect new features and comply with the new European Union data protection laws. Open WhatsApp on your phone to read our Terms and Privacy Policy and learn more about the choices you have.","WhatsApp is updating our Terms and Privacy Policy to reflect new features and comply with the new European Union data protection laws. Open WhatsApp on your phone to read our Terms and Privacy Policy and learn more about the choices you have.",'WhatsApp is updating our Terms and Privacy Policy to reflect new features and comply with the new European Union data protection laws. Open WhatsApp on your phone to read our Terms and Privacy Policy and learn more about the choices you have. If you have accepted the Terms and Privacy Policy, click "LOG IN" to continue using WhatsApp.',"__date__ at __time__","today","today at __time__","Try Again","There is already another active WhatsApp Web tab in this browser. WhatsApp Web does not support multiple active tabs in this browser. Please use the existing tab or close it and refresh this tab.","Refresh","The business account you're chatting with may belong to __businessName__. WhatsApp hasn't verified their name yet.","The business account you're chatting with is now unverified. Click for more info.","To help you connect with businesses, we have verified that the business account you're chatting with belongs to __businessName__.","This chat is with a verified business account. Click for more info.","The business account you're chatting with may belong to __businessName__. WhatsApp hasn't verified their name yet.","This chat is with an unverified business account. Click for more info.","To help you connect with businesses, we have verified that the business account you're chatting with belongs to __businessName__.","The business account you're chatting with is now verified. Click for more info.","Verify","Download code","Release to verify…","The image does not contain a valid identity verification QR code.",'You opened "Verify security code" for the wrong phone number. Open it for the correct number to verify __contact__.','__contact__ opened "Verify security code" for the wrong phone number. Ask __contact__ to open it for your phone number.',"Scan the code on your contact's phone, or ask them to scan your code, to verify your messages and calls to them are end-to-end encrypted. You can also compare the number above to verify. This is optional.","Couldn't display security code. You can verify using the QR code instead.","Verify Security Code","Upload Code","Turn Off Camera","Please try increasing the brightness or reducing light reflection.","Scan Code","WHATSAPP VIDEO CALL","WHATSAPP VOICE CALL","Yes","yesterday","yesterday at __time__","You","You created a broadcast list with __count__ recipient","You","To use WhatsApp, update __chrome_update__ or use __firefox_homepage__, __safari_homepage__, __edge_homepage__ or __opera_homepage__.","WhatsApp works with Google Chrome __min_version_chrome__+","WhatsApp Commerce Policies","To use WhatsApp, update __edge_homepage__ or use __chrome_homepage__, __firefox_homepage__ or __opera_homepage__.","WhatsApp works with Microsoft Edge __min_version_edge__+","To use WhatsApp, update __firefox_update__ or use __chrome_homepage__, __safari_homepage__, __edge_homepage__ or __opera_homepage__.","WhatsApp works with Mozilla Firefox __min_version_firefox__+","WhatsApp group invite","WhatsApp","To use WhatsApp, update __safari_update__ or use __chrome_homepage__, __firefox_homepage__ or __opera_homepage__.","To use all of WhatsApp's features like photo capturing and Voice Message recording, we recommend using __chrome_homepage__, __firefox_homepage__ or __opera_homepage__.","Using Safari","WhatsApp works with Safari __min_version_safari__+","WhatsApp","Send and receive WhatsApp messages right from your computer.","WhatsApp is open in another window. Click “Use Here” to use WhatsApp in this window.","Quickly send and receive WhatsApp messages right from your computer.","We recommend using WhatsApp with one of the following browsers:","WhatsApp also supports:","You can't add more than __count__ labels","Manage shop on Commerce Manager","Go to Commerce Manager to update your Facebook shop.","Your security code with __contactName__ changed","This happened likely because __contactName__ or you recently changed which devices you use WhatsApp on. Please verify the security code again.","Failed to update the setting.","Group participants have changed. Click to view","Can't join group","Joining group invites from Web is not yet available on the multi-device beta. Use your phone instead.","Joining group invites from Desktop is not yet available on the multi-device beta. Use your phone instead.","Can't view group invite details","Viewing and revoking group invites from Web is not yet available on the multi-device beta. Use your phone instead.","Viewing and revoking group invites from Desktop is not yet available on the multi-device beta. Use your phone instead."],{39:"Changing __count__ labels",40:"Some labels could not be updated",41:"__count__ labels changed",144:"Couldn't delete __count__ messages because the messages may have expired",145:"Couldn't delete messages",146:"__count__ messages deleted",147:"Deleting messages",148:"Couldn't star messages because the messages may have expired",149:"Couldn't star messages",150:"__count__ messages starred",151:"Starring messages",153:"Couldn't unstar messages because the messages may have expired",154:"Couldn't unstar messages",155:"__count__ messages unstarred",157:"Unstarring messages",161:"Couldn't add __participantNames__.",163:"You added __participantNames__.",164:"Adding __participantNames__.",165:"Removing __participantNames__ as admins failed.",168:"__participantNames__ are no longer group admins.",169:"Removing __participantNames__ as group admins.",170:"They are no longer in this group.",171:"You can't add these participants because they left the group recently.",174:"Couldn't make __participantNames__ admins.",176:"__participantNames__ are now group admins.",177:"Making __participantNames__ group admins.",178:"Couldn't remove __participantNames__.",181:"You removed __participantNames__.",182:"Removing __participantNames__.",215:"Add participants",243:"__count__ Pages",247:"__number__ audio files you tried adding have no content.",252:"__number__ audio files you tried adding are larger than the __maxSize__ limit.",412:"__count__ messages couldn't be forwarded because __contact__ is on a version of WhatsApp that doesn't support them.",414:"__count__ messages couldn't be forwarded because the file is missing.",415:"__count__ messages couldn't be forwarded because the file is missing or __contact__ is on a version of WhatsApp that doesn't support them.",446:"__updated__ Items Updated",540:"__count__ items",560:"Send __count__ contacts to “__chat__”?",561:"Send __count__ contacts to “__chat__”?",562:"Send __count__ contacts to “__chat__”?",573:"Contact Cards",579:"__number__ contacts that you tried to add have no content.",580:"The contacts that you tried to add are larger than the __maxSize__ limit.",607:"Deleting a label removes it from all messages, contacts, and from the list of labels. Are you sure you want to delete these labels?",608:"Delete messages",609:"Delete messages?",626:"__count__ Docs",628:"__number__ documents you tried adding have no content.",629:"__number__ documents you tried adding are larger than the __maxSize__ limit.",661:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ days.",662:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ hours.",663:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ minutes.",664:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ seconds.",666:"You turned on disappearing messages. New messages will disappear from this chat after __number__ days.",667:"You turned on disappearing messages. New messages will disappear from this chat after __number__ hours.",668:"You turned on disappearing messages. New messages will disappear from this chat after __number__ minutes.",669:"You turned on disappearing messages. New messages will disappear from this chat after __number__ seconds.",671:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ days.",672:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ hours.",673:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ minutes.",674:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ seconds.",675:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ years.",677:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ days. Click to change.",678:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ hours. Click to change.",679:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ minutes. Click to change.",680:"Disappearing messages were turned on. New messages will disappear from this chat after __number__ seconds. Click to change.",682:"You turned on disappearing messages. New messages will disappear from this chat after __number__ days. Click to change.",683:"You turned on disappearing messages. New messages will disappear from this chat after __number__ hours. Click to change.",684:"You turned on disappearing messages. New messages will disappear from this chat after __number__ minutes. Click to change.",685:"You turned on disappearing messages. New messages will disappear from this chat after __number__ seconds. Click to change.",687:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ days. Click to change.",688:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ hours. Click to change.",689:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ minutes. Click to change.",690:"__name__ turned on disappearing messages. New messages will disappear from this chat after __number__ seconds. Click to change.",693:"New messages will disappear from this chat after __number__ days.",694:"New messages will disappear from this chat after __number__ hours.",695:"New messages will disappear from this chat after __number__ minutes.",696:"New messages will disappear from this chat after __number__ seconds.",700:"This message will disappear from this chat after __number__ days.",701:"This message will disappear from this chat after __number__ hours.",702:"This message will disappear from this chat after __number__ minutes.",703:"This message will disappear from this chat after __number__ seconds.",715:"__number__ days",716:"__number__ hours",717:"__number__ minutes",718:"__number__ seconds",728:"Wait until the messages finish sending and displays a checkmark before forwarding.",738:"__number__ files you tried adding have no content.",739:"__count__ files failed to be downloaded because they are no longer on your phone.",740:"__number__ files could not be added.",741:"__number__ files you tried adding are not supported.",742:"__number__ files you tried adding are larger than the __maxSize__ limit.",749:"You can only share with up to __count__ chats",750:"Forwarded many times. You can only share with up to __count__ chats.",751:"Messages forwarded many times can only be shared with up to __count__ chats at a time.",752:"Forward messages",753:"Forward messages to",755:"Forwarded __count__ times",760:"Found contact cards for this number. View contact cards?",802:"__count__ contacts",807:"__count__ participants",831:"__count__ more",836:"Couldn't add __participant__. You can invite them privately to join this group.",872:"__unreadCount__ New Messages",875:"__number__ images you tried adding have no content.",883:"__number__ images you tried adding are larger than the __maxSize__ limit.",901:"Expires in __number__ days",908:"__count__ items",924:"__count__ Links",925:"Accurate to __accuracy__ M",926:"__count__ people",933:"Live until __time__",940:"__hours__h left",942:"__minutes__m left",943:"__sharers__ are sharing live location",945:"__count__ people are sharing live location",948:"You and __count__ others are sharing live location",953:"Updated __hours__h ago",956:"Updated __minutes__m ago",1043:"__count__ remaining",1082:"__contactName__ and __count__ other contacts",1084:"__count__ contacts",1085:"You can only send up to __count__ contacts",1276:"__count__ Products",1277:"This photo is too small. Please select a photo with height and width of at least __size__ pixels.",1287:'Remove label "__labelName__" from __count__ items',1321:"Retrying in __number__ seconds…",1358:"See __count__ archived chats",1361:"__count__ selected",1381:"__count__ Screenshots Maximum",1400:"Star messages",1445:"__count__ suspicious links",1461:"Maximum number of files uploaded. __number__ files have been ignored.",1473:"__count__ unread messages",1479:"Unstar messages",1501:"__participants__ joined using your invite",1502:"You invited __participants__",1525:"__number__ videos you tried adding have no content.",1527:"__number__ videos you tried adding are larger than the __maxSize__ limit.",1529:"View Contact Cards",1591:"Call cannot be placed for more than __count__ participants",1593:"You can only call up to __count__ contacts",1594:"__callee__ couldn't be added to the call, because they are using an old version of WhatsApp or an incompatible device.",1595:"__count__ others",1687:"__count__ pages",1750:"__participants__ are no longer admins",1756:"__participants__ are now admins",1779:"__num__ invites sent",1786:"__name__ were added to the list",1787:"__name__ were removed from the list",1814:"Missed group video call at __time__",1816:"Missed group voice call at __time__",1818:"Missed video call at __time__",1820:"Missed voice call at __time__",1828:"__count__ participants",1830:"__contactName__ canceled their payment request for __currencyAndAmount__",1831:"You canceled your payment request to __contactName__ for __currencyAndAmount__",1832:"__contactName__ declined your payment request for __currencyAndAmount__.",1833:"You declined __contactName__'s payment request for __currencyAndAmount__.",1834:"__senderName__'s payment request for __currencyAndAmount__ to you expired.",1835:"Your payment request to __receiverName__ for __currencyAndAmount__ expired.",1842:"Requested __amount__ from You",1843:"__senderName__ requested __amount__ from You",1844:"__senderName__ requested __amount__ from __receiverName__",1845:"Sent __amount__ to You",1846:"__senderName__ sent __amount__ to You",1847:"__senderName__ sent __amount__ to __receiverName__",1859:"__senderName__ sent you __currencyAndAmount__. Use WhatsApp on your phone to accept this transaction.",1965:"You created a broadcast list with __count__ recipients"}]},92052:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.ParsableWapNode=t.XmppParsingFailure=void 0;var a=r(n(44422)),i=r(n(79484)),o=r(n(89372)),s=r(n(5816)),u=n(31564),l=n(18712),c=n(72687),d=n(17643),f=n(90066),p=n(20290),h=n(28045),_=function(){function e(t,n){(0,o.default)(this,e),this.parser=t,this.reason=n}return(0,s.default)(e,[{key:"toString",value:function(){return`XmppParsingFailure: ${this.parser}: ${this.reason}`}}]),e}();t.XmppParsingFailure=_;var v=function(e){(0,a.default)(n,e);var t=(0,i.default)(n);function n(e,r){return(0,o.default)(this,n),t.call(this,e,r)}return(0,s.default)(n,[{key:"assertFromServer",value:function(){var e=this.attrString("from");"s.whatsapp.net"!==e&&this.throw(`to have "from"="s.whatsapp.net", but instead has "${e}"`)}},{key:"attrUserJid",value:function(e){var t=this.attrString(e);return(0,c.interpretAndValidateJid)(t).userJid||this.throw(`to have "${e}"={UserJid}, but instead has "${t}"`)}},{key:"maybeAttrUserJid",value:function(e){return this.hasAttr(e)?this.attrUserJid(e):null}},{key:"attrGroupJid",value:function(e){var t=this.attrString(e);return(0,c.interpretAndValidateJid)(t).groupJid||this.throw(`to have "${e}"={GroupJid}, but instead has "${t}"`)}},{key:"attrChatJid",value:function(e){var t=this.attrString(e),n=(0,c.interpretAndValidateJid)(t);return n.userJid||n.groupJid||this.throw(`to have "${e}"={ChatJid}, but instead has "${t}"`)}},{key:"attrDeviceJid",value:function(e){var t=this.attrString(e),n=(0,c.interpretAndValidateJid)(t);return n.deviceJid?n.deviceJid:n.userJid?(0,c.defaultDeviceJidForUser)(n.userJid):this.throw(`to have "${e}"={DeviceJid}, but instead has "${t}"`)}},{key:"attrDeviceId",value:function(e){var t=this.attrInt(e);return(0,c.interpretAsDeviceId)(t)}},{key:"attrFromJid",value:function(){var e=this.attrJidWithType(),t=this.hasAttr("participant")?this.attrDeviceJid("participant"):null;switch(e.jidType){case"user":var n=e.userJid,r=(0,c.defaultDeviceJidForUser)(n);return{type:"device",deviceJid:r,chat:n,author:r};case"device":var a=e.deviceJid;return{type:"device",deviceJid:a,chat:(0,c.extractUserJid)(a),author:a};case"broadcast":return t?{type:"broadcast",broadcastJid:e.broadcastJid,chat:(0,c.extractUserJid)(t),author:t}:this.throw("to have participant for broadcast msg");case"group":if(!t)return this.throw("to have participant for group msg");var i=e.groupJid;return{type:"group",groupJid:i,chat:i,author:t};default:return e.jidType,t?{type:"status",author:t}:this.throw("to have participant for status msg")}}},{key:"attrJidWithType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from",t=this.attrString(e),n=(0,c.interpretAndValidateJid)(t);return"unknown"===n.jidType?this.throw(`to have "${e}"={Jid}, but instead has "${t}"`):n}},{key:"attrWapJid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from",t=this.attrString(e),n=(0,c.interpretAndValidateJid)(t);return"unknown"===n.jidType?u.WapJid.create(null,t):(0,l.JID)((0,c.extractFromJid)(n))}},{key:"attrLongInt",value:function(e){var t=this.attrString(e);return(0,p.decimalStringToLongInt)(t)}},{key:"attrTime",value:function(e){return(0,f.castToUnixTime)(this.attrInt(e))}},{key:"attrFutureTime",value:function(e){var t=this.attrInt(e);return(0,f.futureUnixTime)(t)}},{key:"contentString",value:function(){if(this.hasChildren())return this.throw("to have string content, but has children instead");if(this.hasContent()){var e=new d.Binary(this.contentBytes());return e.readString(e.size())}return this.throw("to have content")}},{key:"decodeAsString",value:function(e){return(0,l.decodeAsString)(e)}},{key:"throw",value:function(e){throw new _(this.name(),`expected <${this.tag()}> ${e}`)}}]),n}(h.ParsableXmlNode);t.ParsableWapNode=v},31564:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.WapJid=t.WAP_JID_SUBTYPE=void 0;var a=r(n(89372)),i=r(n(5816)),o=n(62265),s={JID:0,JID_AD:1};t.WAP_JID_SUBTYPE=s;var u=function(){function e(t){(0,a.default)(this,e),this._jid=t}return(0,i.default)(e,[{key:"toString",value:function(){if(this._jid.type===s.JID_AD){var e=this._jid,t=e.user,n=e.agent,r=e.device,a=o.USER_JID_SUFFIX;return 0===n&&0===r?`${t}@${a}`:0!==n&&0===r?`${t}.${n}@${a}`:0===n&&0!==r?`${t}:${r}@${a}`:`${t}.${n}:${r}@${a}`}this._jid.type;var i=this._jid,u=i.user,l=i.server;return null!=u?`${u}@${l}`:l}},{key:"getInnerJid",value:function(){return this._jid}}],[{key:"createAD",value:function(t,n,r){return new e({type:s.JID_AD,user:t,device:null==r?0:r,agent:null==n?0:n})}},{key:"create",value:function(t,n){return new e({type:s.JID,user:t,server:n})}}]),e}();t.WapJid=u},80206:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.WapParser=void 0;var a=r(n(89372)),i=r(n(5816)),o=n(92052),s=function(){function e(t,n){(0,a.default)(this,e),this._name=t,this._parser=n}return(0,i.default)(e,[{key:"parse",value:function(e){var t=new o.ParsableWapNode(this._name,e);try{return{success:this._parser(t)}}catch(e){if(e instanceof o.XmppParsingFailure)return{error:e};throw e}}},{key:"parseOrThrow",value:function(e){var t=this.parse(e);if(t.error)throw new Error(String(t.error));return t.success}}]),e}();t.WapParser=s},62265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_JID_FB_SUFFIX=t.USER_JID_SUFFIX=void 0;t.USER_JID_SUFFIX="s.whatsapp.net";t.USER_JID_FB_SUFFIX="msgr"},18712:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.makeWapNode=O,t.decodeAsString=function(e){if(e instanceof d.WapJid)return e.toString();return e},t.makeStanza=k,t.encodeStanza=function(e){var t=e instanceof C?e:k(e),n=new u.Binary;P(t,n);var r=n.readByteArray(),a=new Uint8Array(1+r.length);return a[0]=0,a.set(r,1),a},t.decodeStanza=function(e,t){var n=new u.Binary(e);if(2&n.readUint8())return __LOG__(2)`Decoding compressed stanza`,t(n.readByteArray()).then((function(e){return B(new u.Binary(e))}));return r.resolve(B(n))},t.generateId=function(){if(!E){var e=new Uint16Array(2);self.crypto.getRandomValues(e),E=`${String(e[0])}.${String(e[1])}-`}return`${E}${S++}`},t.extractToJid=W,t.extractParticipantJid=function(e){switch(e.type){case"group":case"status":case"broadcast":return e.author;default:return e.type,null}},t.PARTICIPANT_JID=function(e){return"status"===e.type||"group"===e.type||"broadcast"===e.type?V(e.author):b},t.TO_JID=function(e){return V(W(e))},t.JID=V,t.CUSTOM_STRING=function(e){return e},t.MAYBE_CUSTOM_STRING=function(e){if(null==e)return b;return e},t.INT=function(e){return e.toString()},t.LONG_INT=function(e){return(0,h.longIntToDecimalString)(e)},t.BIG_ENDIAN_CONTENT=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e,r=new Uint8Array(t),a=t-1;a>=0;a--)r[a]=255&n,n>>>=8;return r},t.wap=t.WapNode=t.S_WHATSAPP_NET=t.G_US=t.DROP_ATTR=void 0;var i=a(n(37613)),o=a(n(89372)),s=a(n(5816)),u=n(17643),l=n(58094),c=n(62265),d=n(31564),f=n(71023),p=n(72687),h=n(20290),_=(a(n(76859)),[236,237,238,239]),v=248,m=249,g=["0","1","2","3","4","5","6","7","8","9","-",".","�","�","�","�"],y=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],E="",S=1,b={sentinel:"DROP_ATTR"};t.DROP_ATTR=b;var T=d.WapJid.create(null,"g.us");t.G_US=T;var w=d.WapJid.create(null,"s.whatsapp.net");t.S_WHATSAPP_NET=w;var A={},C=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,o.default)(this,e),this.tag=t,this.attrs=n,this.content=r}return(0,s.default)(e,[{key:"toString",value:function(){var e="<"+this.tag;e+=(0,l.attrsToString)(this.attrs);var t=this.content;return Array.isArray(t)?e+=`>${t.map(String).join("")}</${this.tag}>`:e+=t?`>${(0,l.uint8ArrayToDebugString)(t)}</${this.tag}>`:" />",e}}]),e}();function O(e,t,n){var r=null;if(t&&null!=t.children)throw new Error('Children should not be passed via props (see eslint check "react/no-children-props")');if(Array.isArray(n))r=n.filter(Boolean);else if("string"==typeof n)r=u.Binary.build(n).readByteArray();else if(n instanceof ArrayBuffer)r=new Uint8Array(n);else if(n instanceof Uint8Array)r=n;else{for(var a=[],i=2;i<arguments.length;i++){var o=arguments[i];o&&a.push(o)}r=a}Array.isArray(r)&&0===r.length&&(r=null);var s={};if(t){var l=t;Object.keys(l).forEach((function(t){var n=l[t];if(null==n)throw new Error(`Attr ${t} in <${e}> is null`);n!==b&&(s[t]=n)}))}return new C(e,s,r)}t.WapNode=C;var M,I=O;function k(e){var t=e.content;return Array.isArray(t)?t=t.map(k):"string"==typeof t&&(t=u.Binary.build(t).readByteArray()),new C(e.tag,e.attrs||A,t)}function P(e,t){if(null==e)t.writeUint8(0);else if(e instanceof C)R(e,t);else if(e instanceof d.WapJid)!function(e,t){var n=e.getInnerJid();if(n.type===d.WAP_JID_SUBTYPE.JID_AD){var r=n.user,a=n.agent,i=n.device;t.writeUint8(247),t.writeUint8(a),t.writeUint8(i),P(r,t)}else{var o=n.user,s=n.server;t.writeUint8(250),null!=o?P(o,t):t.writeUint8(0),P(s,t)}}(e,t);else if("string"==typeof e)L(e,t);else{if(!(e instanceof Uint8Array))throw new Error("Invalid payload type "+typeof e);!function(e,t){U(e.length,t),t.writeByteArray(e)}(e,t)}}function R(e,t){if(void 0===e.tag)return t.writeUint8(v),void t.writeUint8(0);var n=1;e.attrs&&(n+=2*Object.keys(e.attrs).length),e.content&&n++,n<256?(t.writeUint8(v),t.writeUint8(n)):n<65536&&(t.writeUint8(m),t.writeUint16(n)),P(e.tag,t),e.attrs&&Object.keys(e.attrs).forEach((function(n){L(n,t),P(e.attrs[n],t)}));var r=e.content;if(Array.isArray(r)){r.length<256?(t.writeUint8(v),t.writeUint8(r.length)):r.length<65536&&(t.writeUint8(m),t.writeUint16(r.length));for(var a=0;a<r.length;a++)R(r[a],t)}else r&&P(r,t)}t.wap=I;var D=null;function N(e){for(var t=new Map,n=0;n<e.length;n++)t.set(e[n],n);return t}function L(e,t){if(""===e)return t.writeUint8(252),void t.writeUint8(0);null==M&&(M=N(f.SINGLE_BYTE_TOKEN));var n=M.get(e);if(null==n){if(null==D){D=[];for(var r=0;r<f.DICTIONARIES.length;++r)D.push(N(f.DICTIONARIES[r]))}for(var a=0;a<D.length;++a){var i=D[a].get(e);if(null!=i)return t.writeUint8(_[a]),void t.writeUint8(i)}var o=(0,u.numUtf8Bytes)(e);if(o<128){if(!/[^0-9.-]+?/.exec(e))return void x(e,255,t);if(!/[^0-9A-F]+?/.exec(e))return void x(e,251,t)}U(o,t),t.writeString(e)}else t.writeUint8(n+1)}function x(e,t,n){var r=e.length%2==1;n.writeUint8(t);var a=Math.ceil(e.length/2);r&&(a|=128),n.writeUint8(a);for(var i=0,o=0;o<e.length;o++){var s=e.charCodeAt(o),u=null;if(48<=s&&s<=57?u=s-48:255===t?45===s?u=10:46===s&&(u=11):251===t&&65<=s&&s<=70&&(u=s-55),null==u)throw new Error(`Cannot nibble encode ${s}`);o%2==0?(i=u<<4,o===e.length-1&&(i|=15,n.writeUint8(i))):(i|=u,n.writeUint8(i))}}function U(e,t){if(e<256)t.writeUint8(252),t.writeUint8(e);else if(e<1048576)t.writeUint8(253),t.writeUint8(e>>>16&255),t.writeUint8(e>>>8&255),t.writeUint8(255&e);else{if(!(e<4294967296))throw new Error(`Binary with length ${e} is too big for WAP protocol`);t.writeUint8(254),t.writeUint32(e)}}function F(e,t){var n,r,a,i=e.readUint8();if(0===i)return null;if(i===v)return G(e,e.readUint8());if(i===m)return G(e,e.readUint16());if(252===i){var o=e.readUint8();return Y(e,o,t)}if(253===i){var s=e.readUint8(),u=e.readUint8(),l=e.readUint8();return Y(e,((15&s)<<16)+(u<<8)+l,t)}if(254===i){var c=e.readUint32();return Y(e,c,t)}if(250===i)return r=function(e){var t=F(e,!0);if(null!=t&&"string"!=typeof t)throw new Error(`Decode string got invalid value ${String(t)}, string expected`);return t}(n=e),a=j(n),d.WapJid.create(r,a);if(247===i)return function(e){var t=e.readUint8(),n=e.readUint8(),r=j(e);return d.WapJid.createAD(r,t,n)}(e);if(255===i){var p=e.readUint8();return K(e,g,p>>>7,127&p)}if(251===i){var h=e.readUint8();return K(e,y,h>>>7,127&h)}if(i<=0||i>=240)throw new Error("Unable to decode WAP buffer");if(i>=236&&i<=239){var _=i-236,E=f.DICTIONARIES[_];if(void 0===E)throw new Error(`Missing WAP dictionary ${_}`);var S=e.readUint8(),b=E[S];if(void 0===b)throw new Error(`Invalid value index ${S} in dict ${_}`);return b}var T=f.SINGLE_BYTE_TOKEN[i-1];if(void 0===T)throw new Error(`Undefined token with index ${i}`);return T}function G(e,t){for(var n=[],r=0;r<t;r++)n.push(B(e));return n}function B(e){var t,n=e.readUint8();if(n===v)t=e.readUint8();else{if(n!==m)throw new Error(`Failed to decode node since type byte ${String(n)} is invalid`);t=e.readUint16()}var r=void 0,a=null;if(0===t)throw new Error("Failed to decode node, list cannot be empty");var i=j(e);for(t-=1;t>1;){r||(r={});var o=j(e),s=F(e,!0);r[o]=s,t-=2}return 1===t&&(a=F(e,!1))instanceof d.WapJid&&(a=String(a)),new C(i,r,a)}function j(e){var t=F(e,!0);if("string"!=typeof t)throw new Error(`Decode string got invalid value ${String(t)}, string expected`);return t}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e.readString(t):e.readByteArray(t)}function K(e,t,n,r){for(var a=new Array(2*r-n),i=0;i<a.length-1;i+=2){var o=e.readUint8();a[i]=t[o>>>4],a[i+1]=t[15&o]}if(n){var s=e.readUint8();a[a.length-1]=t[s>>>4]}return a.join("")}function W(e){switch(e.type){case"group":return e.groupJid;case"status":return p.STATUS_JID;case"device":return e.deviceJid;default:return e.type,e.broadcastJid}}function V(e){var t=e.split("@"),n=(0,i.default)(t,2),r=n[0],a=n[1],o=null,s=null;if(a===c.USER_JID_SUFFIX){if(-1!==r.indexOf(":")){var u=r.split(":"),l=(0,i.default)(u,2);r=l[0],s=l[1],s=parseInt(s,10)}if(-1!==r.indexOf(".")){var f=r.split("."),p=(0,i.default)(f,2);r=p[0],o=p[1],o=parseInt(o,10)}}return null!=s&&0!==s||null!=o&&0!==o?d.WapJid.createAD(r,o,s):d.WapJid.create(r,a)}},71023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DICTIONARIES=t.DICTIONARY_3_TOKEN=t.DICTIONARY_2_TOKEN=t.DICTIONARY_1_TOKEN=t.DICTIONARY_0_TOKEN=t.SINGLE_BYTE_TOKEN=t.DICT_VERSION=void 0;t.DICT_VERSION=2;t.SINGLE_BYTE_TOKEN=["xmlstreamstart","xmlstreamend","s.whatsapp.net","type","participant","from","receipt","id","broadcast","status","message","notification","notify","to","jid","user","class","offline","g.us","result","mediatype","enc","skmsg","off_cnt","xmlns","presence","participants","ack","t","iq","device_hash","read","value","media","picture","chatstate","unavailable","text","urn:xmpp:whatsapp:push","devices","verified_name","contact","composing","edge_routing","routing_info","item","image","verified_level","get","fallback_hostname","2","media_conn","1","v","handshake","fallback_class","count","config","offline_preview","download_buckets","w:profile:picture","set","creation","location","fallback_ip4","msg","urn:xmpp:ping","fallback_ip6","call-creator","relaylatency","success","subscribe","video","business_hours_config","platform","hostname","version","unknown","0","ping","hash","edit","subject","max_buckets","download","delivery","props","sticker","name","last","contacts","business","primary","preview","w:p","pkmsg","call-id","retry","prop","call","auth_ttl","available","relay_id","last_id","day_of_week","w","host","seen","bits","list","atn","upload","is_new","w:stats","key","paused","specific_hours","multicast","stream:error","mmg.whatsapp.net","code","deny","played","profile","fna","device-list","close_time","latency","gcm","pop","audio","26","w:web","open_time","error","auth","ip4","update","profile_options","config_value","category","catalog_not_created","00","config_code","mode","catalog_status","ip6","blocklist","registration","7","web","fail","w:m","cart_enabled","ttl","gif","300","device_orientation","identity","query","401","media-gig2-1.cdn.whatsapp.net","in","3","te2","add","fallback","categories","ptt","encrypt","notice","thumbnail-document","item-not-found","12","thumbnail-image","stage","thumbnail-link","usync","out","thumbnail-video","8","01","context","sidelist","thumbnail-gif","terminate","not-authorized","orientation","dhash","capability","side_list","md-app-state","description","serial","readreceipts","te","business_hours","md-msg-hist","tag","attribute_padding","document","open_24h","delete","expiration","active","prev_v_id","true","passive","index","4","conflict","remove","w:gp2","config_expo_key","screen_height","replaced","02","screen_width","uploadfieldstat","2:47DEQpj8","media-bog1-1.cdn.whatsapp.net","encopt","url","catalog_exists","keygen","rate","offer","opus","media-mia3-1.cdn.whatsapp.net","privacy","media-mia3-2.cdn.whatsapp.net","signature","preaccept","token_id","media-eze1-1.cdn.whatsapp.net"];var n=["media-for1-1.cdn.whatsapp.net","relay","media-gru2-2.cdn.whatsapp.net","uncompressed","medium","voip_settings","device","reason","media-lim1-1.cdn.whatsapp.net","media-qro1-2.cdn.whatsapp.net","media-gru1-2.cdn.whatsapp.net","action","features","media-gru2-1.cdn.whatsapp.net","media-gru1-1.cdn.whatsapp.net","media-otp1-1.cdn.whatsapp.net","kyc-id","priority","phash","mute","token","100","media-qro1-1.cdn.whatsapp.net","none","media-mrs2-2.cdn.whatsapp.net","sign_credential","03","media-mrs2-1.cdn.whatsapp.net","protocol","timezone","transport","eph_setting","1080","original_dimensions","media-frx5-1.cdn.whatsapp.net","background","disable","original_image_url","5","transaction-id","direct_path","103","appointment_only","request_image_url","peer_pid","address","105","104","102","media-cdt1-1.cdn.whatsapp.net","101","109","110","106","background_location","v_id","sync","status-old","111","107","ppic","media-scl2-1.cdn.whatsapp.net","business_profile","108","invite","04","audio_duration","media-mct1-1.cdn.whatsapp.net","media-cdg2-1.cdn.whatsapp.net","media-los2-1.cdn.whatsapp.net","invis","net","voip_payload_type","status-revoke-delay","404","state","use_correct_order_for_hmac_sha1","ver","media-mad1-1.cdn.whatsapp.net","order","540","skey","blinded_credential","android","contact_remove","enable_downlink_relay_latency_only","duration","enable_vid_one_way_codec_nego","6","media-sof1-1.cdn.whatsapp.net","accept","all","signed_credential","media-atl3-1.cdn.whatsapp.net","media-lhr8-1.cdn.whatsapp.net","website","05","latitude","media-dfw5-1.cdn.whatsapp.net","forbidden","enable_audio_piggyback_network_mtu_fix","media-dfw5-2.cdn.whatsapp.net","note.m4r","media-atl3-2.cdn.whatsapp.net","jb_nack_discard_count_fix","longitude","Opening.m4r","media-arn2-1.cdn.whatsapp.net","email","timestamp","admin","media-pmo1-1.cdn.whatsapp.net","America/Sao_Paulo","contact_add","media-sin6-1.cdn.whatsapp.net","interactive","8000","acs_public_key","sigquit_anr_detector_release_rollover_percent","media.fmed1-2.fna.whatsapp.net","groupadd","enabled_for_video_upgrade","latency_update_threshold","media-frt3-2.cdn.whatsapp.net","calls_row_constraint_layout","media.fgbb2-1.fna.whatsapp.net","mms4_media_retry_notification_encryption_enabled","timeout","media-sin6-3.cdn.whatsapp.net","audio_nack_jitter_multiplier","jb_discard_count_adjust_pct_rc","audio_reserve_bps","delta","account_sync","default","media.fjed4-6.fna.whatsapp.net","06","lock_video_orientation","media-frt3-1.cdn.whatsapp.net","w:g2","media-sin6-2.cdn.whatsapp.net","audio_nack_algo_mask","media.fgbb2-2.fna.whatsapp.net","media.fmed1-1.fna.whatsapp.net","cond_range_target_bitrate","mms4_server_error_receipt_encryption_enabled","vid_rc_dyn","fri","cart_v1_1_order_message_changes_enabled","reg_push","jb_hist_deposit_value","privatestats","media.fist7-2.fna.whatsapp.net","thu","jb_discard_count_adjust_pct","mon","group_call_video_maximization_enabled","mms_cat_v1_forward_hot_override_enabled","audio_nack_new_rtt","media.fsub2-3.fna.whatsapp.net","media_upload_aggressive_retry_exponential_backoff_enabled","tue","wed","media.fruh4-2.fna.whatsapp.net","audio_nack_max_seq_req","max_rtp_audio_packet_resends","jb_hist_max_cdf_value","07","audio_nack_max_jb_delay","mms_forward_partially_downloaded_video","media-lcy1-1.cdn.whatsapp.net","resume","jb_inband_fec_aware","new_commerce_entry_point_enabled","480","payments_upi_generate_qr_amount_limit","sigquit_anr_detector_rollover_percent","media.fsdu2-1.fna.whatsapp.net","fbns","aud_pkt_reorder_pct","dec","stop_probing_before_accept_send","media_upload_max_aggressive_retries","edit_business_profile_new_mode_enabled","media.fhex4-1.fna.whatsapp.net","media.fjed4-3.fna.whatsapp.net","sigquit_anr_detector_64bit_rollover_percent","cond_range_ema_jb_last_delay","watls_enable_early_data_http_get","media.fsdu2-2.fna.whatsapp.net","message_qr_disambiguation_enabled","media-mxp1-1.cdn.whatsapp.net","sat","vertical","media.fruh4-5.fna.whatsapp.net","200","media-sof1-2.cdn.whatsapp.net","-1","height","product_catalog_hide_show_items_enabled","deep_copy_frm_last","tsoffline","vp8/h.264","media.fgye5-3.fna.whatsapp.net","media.ftuc1-2.fna.whatsapp.net","smb_upsell_chat_banner_enabled","canonical","08","9",".","media.fgyd4-4.fna.whatsapp.net","media.fsti4-1.fna.whatsapp.net","mms_vcache_aggregation_enabled","mms_hot_content_timespan_in_seconds","nse_ver","rte","third_party_sticker_web_sync","cond_range_target_total_bitrate","media_upload_aggressive_retry_enabled","instrument_spam_report_enabled","disable_reconnect_tone","move_media_folder_from_sister_app","one_tap_calling_in_group_chat_size","10","storage_mgmt_banner_threshold_mb","enable_backup_passive_mode","sharechat_inline_player_enabled","media.fcnq2-1.fna.whatsapp.net","media.fhex4-2.fna.whatsapp.net","media.fist6-3.fna.whatsapp.net","ephemeral_drop_column_stage","reconnecting_after_network_change_threshold_ms","media-lhr8-2.cdn.whatsapp.net","cond_jb_last_delay_ema_alpha","entry_point_block_logging_enabled","critical_event_upload_log_config","respect_initial_bitrate_estimate","smaller_image_thumbs_status_enabled","media.fbtz1-4.fna.whatsapp.net","media.fjed4-1.fna.whatsapp.net","width","720","enable_frame_dropper","enable_one_side_mode","urn:xmpp:whatsapp:dirty","new_sticker_animation_behavior_v2","media.flim3-2.fna.whatsapp.net","media.fuio6-2.fna.whatsapp.net","skip_forced_signaling","dleq_proof","status_video_max_bitrate","lazy_send_probing_req","enhanced_storage_management","android_privatestats_endpoint_dit_enabled","media.fscl13-2.fna.whatsapp.net","video_duration"];t.DICTIONARY_0_TOKEN=n;var r=["group_call_discoverability_enabled","media.faep9-2.fna.whatsapp.net","msgr","bloks_loggedin_access_app_id","db_status_migration_step","watls_prefer_ip6","jabber:iq:privacy","68","media.fsaw1-11.fna.whatsapp.net","mms4_media_conn_persist_enabled","animated_stickers_thread_clean_up","media.fcgk3-2.fna.whatsapp.net","media.fcgk4-6.fna.whatsapp.net","media.fgye5-2.fna.whatsapp.net","media.flpb1-1.fna.whatsapp.net","media.fsub2-1.fna.whatsapp.net","media.fuio6-3.fna.whatsapp.net","not-allowed","partial_pjpeg_bw_threshold","cap_estimated_bitrate","mms_chatd_resume_check_over_thrift","smb_upsell_business_profile_enabled","product_catalog_webclient","groups","sigquit_anr_detector_release_updated_rollout","syncd_key_rotation_enabled","media.fdmm2-1.fna.whatsapp.net","media-hou1-1.cdn.whatsapp.net","remove_old_chat_notifications","smb_biztools_deeplink_enabled","use_downloadable_filters_int","group_qr_codes_enabled","max_receipt_processing_time","optimistic_image_processing_enabled","smaller_video_thumbs_status_enabled","watls_early_data","reconnecting_before_relay_failover_threshold_ms","cond_range_packet_loss_pct","groups_privacy_blacklist","status-revoke-drop","stickers_animated_thumbnail_download","dedupe_transcode_shared_images","dedupe_transcode_shared_videos","media.fcnq2-2.fna.whatsapp.net","media.fgyd4-1.fna.whatsapp.net","media.fist7-1.fna.whatsapp.net","media.flim3-3.fna.whatsapp.net","add_contact_by_qr_enabled","https://faq.whatsapp.com/payments","multicast_limit_global","sticker_notification_preview","smb_better_catalog_list_adapters_enabled","bloks_use_minscript_android","pen_smoothing_enabled","media.fcgk4-5.fna.whatsapp.net","media.fevn1-3.fna.whatsapp.net","media.fpoj7-1.fna.whatsapp.net","media-arn2-2.cdn.whatsapp.net","reconnecting_before_network_change_threshold_ms","android_media_use_fresco_for_gifs","cond_in_congestion","status_image_max_edge","sticker_search_enabled","starred_stickers_web_sync","db_blank_me_jid_migration_step","media.fist6-2.fna.whatsapp.net","media.ftuc1-1.fna.whatsapp.net","09","anr_fast_logs_upload_rollout","camera_core_integration_enabled","11","third_party_sticker_caching","thread_dump_contact_support","wam_privatestats_enabled","vcard_as_document_size_kb","maxfpp","fbip","ephemeral_allow_group_members","media-bom1-2.cdn.whatsapp.net","media-xsp1-1.cdn.whatsapp.net","disable_prewarm","frequently_forwarded_max","media.fbtz1-5.fna.whatsapp.net","media.fevn7-1.fna.whatsapp.net","media.fgyd4-2.fna.whatsapp.net","sticker_tray_animation_fully_visible_items","green_alert_banner_duration","reconnecting_after_p2p_failover_threshold_ms","connected","share_biz_vcard_enabled","stickers_animation","0a","1200","WhatsApp","group_description_length","p_v_id","payments_upi_intent_transaction_limit","frequently_forwarded_messages","media-xsp1-2.cdn.whatsapp.net","media.faep8-1.fna.whatsapp.net","media.faep8-2.fna.whatsapp.net","media.faep9-1.fna.whatsapp.net","media.fdmm2-2.fna.whatsapp.net","media.fgzt3-1.fna.whatsapp.net","media.flim4-2.fna.whatsapp.net","media.frao1-1.fna.whatsapp.net","media.fscl9-2.fna.whatsapp.net","media.fsub2-2.fna.whatsapp.net","superadmin","media.fbog10-1.fna.whatsapp.net","media.fcgh28-1.fna.whatsapp.net","media.fjdo10-1.fna.whatsapp.net","third_party_animated_sticker_import","delay_fec","attachment_picker_refresh","android_linked_devices_re_auth_enabled","rc_dyn","green_alert_block_jitter","add_contact_logging_enabled","biz_message_logging_enabled","conversation_media_preview_v2","media-jnb1-1.cdn.whatsapp.net","ab_key","media.fcgk4-2.fna.whatsapp.net","media.fevn1-1.fna.whatsapp.net","media.fist6-1.fna.whatsapp.net","media.fruh4-4.fna.whatsapp.net","media.fsti4-2.fna.whatsapp.net","mms_vcard_autodownload_size_kb","watls_enabled","notif_ch_override_off","media.fsaw1-14.fna.whatsapp.net","media.fscl13-1.fna.whatsapp.net","db_group_participant_migration_step","1020","cond_range_sterm_rtt","invites_logging_enabled","triggered_block_enabled","group_call_max_participants","media-iad3-1.cdn.whatsapp.net","product_catalog_open_deeplink","shops_required_tos_version","image_max_kbytes","cond_low_quality_vid_mode","db_receipt_migration_step","jb_early_prob_hist_shrink","media.fdmm2-3.fna.whatsapp.net","media.fdmm2-4.fna.whatsapp.net","media.fruh4-1.fna.whatsapp.net","media.fsaw2-2.fna.whatsapp.net","remove_geolocation_videos","new_animation_behavior","fieldstats_beacon_chance","403","authkey_reset_on_ban","continuous_ptt_playback","reconnecting_after_relay_failover_threshold_ms","false","group","sun","conversation_swipe_to_reply","ephemeral_messages_setting","smaller_video_thumbs_enabled","md_device_sync_enabled","bloks_shops_pdp_url_regex","lasso_integration_enabled","media-bom1-1.cdn.whatsapp.net","new_backup_format_enabled","256","media.faep6-1.fna.whatsapp.net","media.fasr1-1.fna.whatsapp.net","media.fbtz1-7.fna.whatsapp.net","media.fesb4-1.fna.whatsapp.net","media.fjdo1-2.fna.whatsapp.net","media.frba2-1.fna.whatsapp.net","watls_no_dns","600","db_broadcast_me_jid_migration_step","new_wam_runtime_enabled","group_update","enhanced_block_enabled","sync_wifi_threshold_kb","mms_download_nc_cat","bloks_minification_enabled","ephemeral_messages_enabled","reject","voip_outgoing_xml_signaling","creator","dl_bw","payments_request_messages","target_bitrate","bloks_rendercore_enabled","media-hbe1-1.cdn.whatsapp.net","media-hel3-1.cdn.whatsapp.net","media-kut2-2.cdn.whatsapp.net","media-lax3-1.cdn.whatsapp.net","media-lax3-2.cdn.whatsapp.net","sticker_pack_deeplink_enabled","hq_image_bw_threshold","status_info","voip","dedupe_transcode_videos","grp_uii_cleanup","linked_device_max_count","media.flim1-1.fna.whatsapp.net","media.fsaw2-1.fna.whatsapp.net","reconnecting_after_call_active_threshold_ms","1140","catalog_pdp_new_design","media.fbtz1-10.fna.whatsapp.net","media.fsaw1-15.fna.whatsapp.net","0b","consumer_rc_provider","mms_async_fast_forward_ttl","jb_eff_size_fix","voip_incoming_xml_signaling","media_provider_share_by_uuid","suspicious_links","dedupe_transcode_images","green_alert_modal_start","media-cgk1-1.cdn.whatsapp.net","media-lga3-1.cdn.whatsapp.net","template_doc_mime_types","important_messages","user_add","vcard_max_size_kb","media.fada2-1.fna.whatsapp.net","media.fbog2-5.fna.whatsapp.net","media.fbtz1-3.fna.whatsapp.net","media.fcgk3-1.fna.whatsapp.net","media.fcgk7-1.fna.whatsapp.net","media.flim1-3.fna.whatsapp.net","media.fscl9-1.fna.whatsapp.net","ctwa_context_enterprise_enabled","media.fsaw1-13.fna.whatsapp.net","media.fuio11-2.fna.whatsapp.net","status_collapse_muted","db_migration_level_force","recent_stickers_web_sync","bloks_session_state","bloks_shops_enabled","green_alert_setting_deep_links_enabled","restrict_groups","battery","green_alert_block_start","refresh","ctwa_context_enabled","md_messaging_enabled","status_image_quality","md_blocklist_v2_server","media-del1-1.cdn.whatsapp.net","13","userrate","a_v_id","cond_rtt_ema_alpha","invalid"];t.DICTIONARY_1_TOKEN=r;var a=["media.fada1-1.fna.whatsapp.net","media.fadb3-2.fna.whatsapp.net","media.fbhz2-1.fna.whatsapp.net","media.fcor2-1.fna.whatsapp.net","media.fjed4-2.fna.whatsapp.net","media.flhe4-1.fna.whatsapp.net","media.frak1-2.fna.whatsapp.net","media.fsub6-3.fna.whatsapp.net","media.fsub6-7.fna.whatsapp.net","media.fvvi1-1.fna.whatsapp.net","search_v5_eligible","wam_real_time_enabled","report_disk_event","max_tx_rott_based_bitrate","product","media.fjdo10-2.fna.whatsapp.net","video_frame_crc_sample_interval","media_max_autodownload","15","h.264","wam_privatestats_buffer_count","md_phash_v2_enabled","account_transfer_enabled","business_product_catalog","enable_non_dyn_codec_param_fix","is_user_under_epd_jurisdiction","media.fbog2-4.fna.whatsapp.net","media.fbtz1-2.fna.whatsapp.net","media.fcfc1-1.fna.whatsapp.net","media.fjed4-5.fna.whatsapp.net","media.flhe4-2.fna.whatsapp.net","media.flim1-2.fna.whatsapp.net","media.flos5-1.fna.whatsapp.net","android_key_store_auth_ver","010","anr_process_monitor","delete_old_auth_key","media.fcor10-3.fna.whatsapp.net","storage_usage_enabled","android_camera2_support_level","dirty","consumer_content_provider","status_video_max_duration","0c","bloks_cache_enabled","media.fadb2-2.fna.whatsapp.net","media.fbko1-1.fna.whatsapp.net","media.fbtz1-9.fna.whatsapp.net","media.fcgk4-4.fna.whatsapp.net","media.fesb4-2.fna.whatsapp.net","media.fevn1-2.fna.whatsapp.net","media.fist2-4.fna.whatsapp.net","media.fjdo1-1.fna.whatsapp.net","media.fruh4-6.fna.whatsapp.net","media.fsrg5-1.fna.whatsapp.net","media.fsub6-6.fna.whatsapp.net","minfpp","5000","locales","video_max_bitrate","use_new_auth_key","bloks_http_enabled","heartbeat_interval","media.fbog11-1.fna.whatsapp.net","ephemeral_group_query_ts","fec_nack","search_in_storage_usage","c","media-amt2-1.cdn.whatsapp.net","linked_devices_ui_enabled","14","async_data_load_on_startup","voip_incoming_xml_ack","16","db_migration_step","init_bwe","max_participants","wam_buffer_count","media.fada2-2.fna.whatsapp.net","media.fadb3-1.fna.whatsapp.net","media.fcor2-2.fna.whatsapp.net","media.fdiy1-2.fna.whatsapp.net","media.frba3-2.fna.whatsapp.net","media.fsaw2-3.fna.whatsapp.net","1280","status_grid_enabled","w:biz","product_catalog_deeplink","media.fgye10-2.fna.whatsapp.net","media.fuio11-1.fna.whatsapp.net","optimistic_upload","work_manager_init","lc","catalog_message","cond_net_medium","enable_periodical_aud_rr_processing","cond_range_ema_rtt","media-tir2-1.cdn.whatsapp.net","frame_ms","group_invite_sending","payments_web_enabled","wallpapers_v2","0d","browser","hq_image_max_edge","image_edit_zoom","linked_devices_re_auth_enabled","media.faly3-2.fna.whatsapp.net","media.fdoh5-3.fna.whatsapp.net","media.fesb3-1.fna.whatsapp.net","media.fknu1-1.fna.whatsapp.net","media.fmex3-1.fna.whatsapp.net","media.fruh4-3.fna.whatsapp.net","255","web_upgrade_to_md_modal","audio_piggyback_timeout_msec","enable_audio_oob_fec_feature","from_ip","image_max_edge","message_qr_enabled","powersave","receipt_pre_acking","video_max_edge","full","011","012","enable_audio_oob_fec_for_sender","md_voip_enabled","enable_privatestats","max_fec_ratio","payments_cs_faq_url","media-xsp1-3.cdn.whatsapp.net","hq_image_quality","media.fasr1-2.fna.whatsapp.net","media.fbog3-1.fna.whatsapp.net","media.ffjr1-6.fna.whatsapp.net","media.fist2-3.fna.whatsapp.net","media.flim4-3.fna.whatsapp.net","media.fpbc2-4.fna.whatsapp.net","media.fpku1-1.fna.whatsapp.net","media.frba1-1.fna.whatsapp.net","media.fudi1-1.fna.whatsapp.net","media.fvvi1-2.fna.whatsapp.net","gcm_fg_service","enable_dec_ltr_size_check","clear","lg","media.fgru11-1.fna.whatsapp.net","18","media-lga3-2.cdn.whatsapp.net","pkey","0e","max_subject","cond_range_lterm_rtt","announcement_groups","biz_profile_options","s_t","media.fabv2-1.fna.whatsapp.net","media.fcai3-1.fna.whatsapp.net","media.fcgh1-1.fna.whatsapp.net","media.fctg1-4.fna.whatsapp.net","media.fdiy1-1.fna.whatsapp.net","media.fisb4-1.fna.whatsapp.net","media.fpku1-2.fna.whatsapp.net","media.fros9-1.fna.whatsapp.net","status_v3_text","usync_sidelist","17","announcement","...","md_group_notification","0f","animated_pack_in_store","013","America/Mexico_City","1260","media-ams4-1.cdn.whatsapp.net","media-cgk1-2.cdn.whatsapp.net","media-cpt1-1.cdn.whatsapp.net","media-maa2-1.cdn.whatsapp.net","media.fgye10-1.fna.whatsapp.net","e","catalog_cart","hfm_string_changes","init_bitrate","packless_hsm","group_info","America/Belem","50","960","cond_range_bwe","decode","encode","media.fada1-8.fna.whatsapp.net","media.fadb1-2.fna.whatsapp.net","media.fasu6-1.fna.whatsapp.net","media.fbog4-1.fna.whatsapp.net","media.fcgk9-2.fna.whatsapp.net","media.fdoh5-2.fna.whatsapp.net","media.ffjr1-2.fna.whatsapp.net","media.fgua1-1.fna.whatsapp.net","media.fgye1-1.fna.whatsapp.net","media.fist1-4.fna.whatsapp.net","media.fpbc2-2.fna.whatsapp.net","media.fres2-1.fna.whatsapp.net","media.fsdq1-2.fna.whatsapp.net","media.fsub6-5.fna.whatsapp.net","profilo_enabled","template_hsm","use_disorder_prefetching_timer","video_codec_priority","vpx_max_qp","ptt_reduce_recording_delay","25","iphone","Windows","s_o","Africa/Lagos","abt","media-kut2-1.cdn.whatsapp.net","media-mba1-1.cdn.whatsapp.net","media-mxp1-2.cdn.whatsapp.net","md_blocklist_v2","url_text","enable_short_offset","group_join_permissions","enable_audio_piggyback_feature","image_quality","media.fcgk7-2.fna.whatsapp.net","media.fcgk8-2.fna.whatsapp.net","media.fclo7-1.fna.whatsapp.net","media.fcmn1-1.fna.whatsapp.net","media.feoh1-1.fna.whatsapp.net","media.fgyd4-3.fna.whatsapp.net","media.fjed4-4.fna.whatsapp.net","media.flim1-4.fna.whatsapp.net","media.flim2-4.fna.whatsapp.net","media.fplu6-1.fna.whatsapp.net","media.frak1-1.fna.whatsapp.net","media.fsdq1-1.fna.whatsapp.net","to_ip","015","vp8","19","21","1320","auth_key_ver","message_processing_dedup","server-error","wap4_enabled","420","014","cond_range_rtt","ptt_fast_lock_enabled","media-ort2-1.cdn.whatsapp.net","fwd_ui_start_ts"];t.DICTIONARY_2_TOKEN=a;var i=["contact_blacklist","Asia/Jakarta","media.fepa10-1.fna.whatsapp.net","media.fmex10-3.fna.whatsapp.net","disorder_prefetching_start_when_empty","America/Bogota","use_local_probing_rx_bitrate","America/Argentina/Buenos_Aires","cross_post","media.fabb1-1.fna.whatsapp.net","media.fbog4-2.fna.whatsapp.net","media.fcgk9-1.fna.whatsapp.net","media.fcmn2-1.fna.whatsapp.net","media.fdel3-1.fna.whatsapp.net","media.ffjr1-1.fna.whatsapp.net","media.fgdl5-1.fna.whatsapp.net","media.flpb1-2.fna.whatsapp.net","media.fmex2-1.fna.whatsapp.net","media.frba2-2.fna.whatsapp.net","media.fros2-2.fna.whatsapp.net","media.fruh2-1.fna.whatsapp.net","media.fybz2-2.fna.whatsapp.net","options","20","a","017","018","mute_always","user_notice","Asia/Kolkata","gif_provider","locked","media-gua1-1.cdn.whatsapp.net","piggyback_exclude_force_flush","24","media.frec39-1.fna.whatsapp.net","user_remove","file_max_size","cond_packet_loss_pct_ema_alpha","media.facc1-1.fna.whatsapp.net","media.fadb2-1.fna.whatsapp.net","media.faly3-1.fna.whatsapp.net","media.fbdo6-2.fna.whatsapp.net","media.fcmn2-2.fna.whatsapp.net","media.fctg1-3.fna.whatsapp.net","media.ffez1-2.fna.whatsapp.net","media.fist1-3.fna.whatsapp.net","media.fist2-2.fna.whatsapp.net","media.flim2-2.fna.whatsapp.net","media.fmct2-3.fna.whatsapp.net","media.fpei3-1.fna.whatsapp.net","media.frba3-1.fna.whatsapp.net","media.fsdu8-2.fna.whatsapp.net","media.fstu2-1.fna.whatsapp.net","media_type","receipt_agg","016","enable_pli_for_crc_mismatch","live","enc_rekey","frskmsg","d","media.fdel11-2.fna.whatsapp.net","proto","2250","audio_piggyback_enable_cache","skip_nack_if_ltrp_sent","mark_dtx_jb_frames","web_service_delay","7282","catalog_send_all","outgoing","360","30","LIMITED","019","audio_picker","bpv2_phase","media.fada1-7.fna.whatsapp.net","media.faep7-1.fna.whatsapp.net","media.fbko1-2.fna.whatsapp.net","media.fbni1-2.fna.whatsapp.net","media.fbtz1-1.fna.whatsapp.net","media.fbtz1-8.fna.whatsapp.net","media.fcjs3-1.fna.whatsapp.net","media.fesb3-2.fna.whatsapp.net","media.fgdl5-4.fna.whatsapp.net","media.fist2-1.fna.whatsapp.net","media.flhe2-2.fna.whatsapp.net","media.flim2-1.fna.whatsapp.net","media.fmex1-1.fna.whatsapp.net","media.fpat3-2.fna.whatsapp.net","media.fpat3-3.fna.whatsapp.net","media.fros2-1.fna.whatsapp.net","media.fsdu8-1.fna.whatsapp.net","media.fsub3-2.fna.whatsapp.net","payments_chat_plugin","cond_congestion_no_rtcp_thr","green_alert","not-a-biz","..","shops_pdp_urls_config","source","media-dus1-1.cdn.whatsapp.net","mute_video","01b","currency","max_keys","resume_check","contact_array","qr_scanning","23","b","media.fbfh15-1.fna.whatsapp.net","media.flim22-1.fna.whatsapp.net","media.fsdu11-1.fna.whatsapp.net","media.fsdu15-1.fna.whatsapp.net","Chrome","fts_version","60","media.fada1-6.fna.whatsapp.net","media.faep4-2.fna.whatsapp.net","media.fbaq5-1.fna.whatsapp.net","media.fbni1-1.fna.whatsapp.net","media.fcai3-2.fna.whatsapp.net","media.fdel3-2.fna.whatsapp.net","media.fdmm3-2.fna.whatsapp.net","media.fhex3-1.fna.whatsapp.net","media.fisb4-2.fna.whatsapp.net","media.fkhi5-2.fna.whatsapp.net","media.flos2-1.fna.whatsapp.net","media.fmct2-1.fna.whatsapp.net","media.fntr7-1.fna.whatsapp.net","media.frak3-1.fna.whatsapp.net","media.fruh5-2.fna.whatsapp.net","media.fsub6-1.fna.whatsapp.net","media.fuab1-2.fna.whatsapp.net","media.fuio1-1.fna.whatsapp.net","media.fver1-1.fna.whatsapp.net","media.fymy1-1.fna.whatsapp.net","product_catalog","1380","audio_oob_fec_max_pkts","22","254","media-ort2-2.cdn.whatsapp.net","media-sjc3-1.cdn.whatsapp.net","1600","01a","01c","405","key_frame_interval","body","media.fcgh20-1.fna.whatsapp.net","media.fesb10-2.fna.whatsapp.net","125","2000","media.fbsb1-1.fna.whatsapp.net","media.fcmn3-2.fna.whatsapp.net","media.fcpq1-1.fna.whatsapp.net","media.fdel1-2.fna.whatsapp.net","media.ffor2-1.fna.whatsapp.net","media.fgdl1-4.fna.whatsapp.net","media.fhex2-1.fna.whatsapp.net","media.fist1-2.fna.whatsapp.net","media.fjed5-2.fna.whatsapp.net","media.flim6-4.fna.whatsapp.net","media.flos2-2.fna.whatsapp.net","media.fntr6-2.fna.whatsapp.net","media.fpku3-2.fna.whatsapp.net","media.fros8-1.fna.whatsapp.net","media.fymy1-2.fna.whatsapp.net","ul_bw","ltrp_qp_offset","request","nack","dtx_delay_state_reset","timeoffline","28","01f","32","enable_ltr_pool","wa_msys_crypto","01d","58","dtx_freeze_hg_update","nack_if_rpsi_throttled","253","840","media.famd15-1.fna.whatsapp.net","media.fbog17-2.fna.whatsapp.net","media.fcai19-2.fna.whatsapp.net","media.fcai21-4.fna.whatsapp.net","media.fesb10-4.fna.whatsapp.net","media.fesb10-5.fna.whatsapp.net","media.fmaa12-1.fna.whatsapp.net","media.fmex11-3.fna.whatsapp.net","media.fpoa33-1.fna.whatsapp.net","1050","021","clean","cond_range_ema_packet_loss_pct","media.fadb6-5.fna.whatsapp.net","media.faqp4-1.fna.whatsapp.net","media.fbaq3-1.fna.whatsapp.net","media.fbel2-1.fna.whatsapp.net","media.fblr4-2.fna.whatsapp.net","media.fclo8-1.fna.whatsapp.net","media.fcoo1-2.fna.whatsapp.net","media.ffjr1-4.fna.whatsapp.net","media.ffor9-1.fna.whatsapp.net","media.fisb3-1.fna.whatsapp.net","media.fkhi2-2.fna.whatsapp.net","media.fkhi4-1.fna.whatsapp.net","media.fpbc1-2.fna.whatsapp.net","media.fruh2-2.fna.whatsapp.net","media.fruh5-1.fna.whatsapp.net","media.fsub3-1.fna.whatsapp.net","payments_transaction_limit","252","27","29","tintagel","01e","237","780","callee_updated_payload","020","257","price","025","239","payments_cs_phone_number","mediaretry","w:auth:backup:token","Glass.caf","max_bitrate","240","251","660","media.fbog16-1.fna.whatsapp.net","media.fcgh21-1.fna.whatsapp.net","media.fkul19-2.fna.whatsapp.net","media.flim21-2.fna.whatsapp.net","media.fmex10-4.fna.whatsapp.net","64","33","34","35","interruption","media.fabv3-1.fna.whatsapp.net","media.fadb6-1.fna.whatsapp.net","media.fagr1-1.fna.whatsapp.net","media.famd1-1.fna.whatsapp.net","media.famm6-1.fna.whatsapp.net","media.faqp2-3.fna.whatsapp.net"];t.DICTIONARY_3_TOKEN=i;var o=[n,r,a,i];t.DICTIONARIES=o},40602:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Offline=t.Disconnected=void 0;var r=n(1838),a=(0,r.customError)("Disconnected",!1);t.Disconnected=a;var i=(0,r.customError)("Offline",!1,a);t.Offline=i},830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.castToServerMediaType=function(e){switch(e){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"novi-video":case"novi-image":case"template":case"product":case"product-catalog-image":return e;default:return null}},t.SERVER_MEDIA=void 0;t.SERVER_MEDIA=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","novi-video","novi-image","product","product-catalog-image"]},65984:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.FrameSocket=t.SocketClosed=void 0;var a=r(n(5816)),i=r(n(89372)),o=r(n(44422)),s=r(n(79484)),u=r(n(64885)),l=n(17643),c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;(0,i.default)(this,n);var a="SocketClosed";return(r=t.call(this,null!=e?e:a)).name=a,r}return n}((0,u.default)(Error));t.SocketClosed=c;var d=function(){function e(t,n){var r=this;(0,i.default)(this,e),this._incoming=new l.Binary,this.closed=!1,this._draining=!1,this.onFrame=null,this.onClose=null,this._handleData=function(e){r._incoming.writeByteArray(e),r.convertBufferedToFrames()},this._handleClose=function(){if(r._incoming.peek(f))return __LOG__(2)`FrameSocket closed, waiting for pending processing`,void(r._draining=!0);r._doClose()},this._doClose=function(){if(!r.closed){__LOG__(2)`FrameSocket closed`,r._draining=!1,r.closed=!0;var e=r.onClose;e&&e()}},this._handleError=function(e){__LOG__(4,void 0,new Error)`FrameSocket error ${e}`},this._introToSend=n,this._socket=t,t.onData=this._handleData,t.onClose=this._handleClose,t.onError=this._handleError}return(0,a.default)(e,[{key:"sendFrame",value:function(e){if(!this._draining){this.throwIfClosed();var t=this._introToSend,n=e.byteLength,r=this._socket.dataToSend;t?(this._introToSend=null,r.ensureAdditionalCapacity(t.length+3+n),r.writeByteArray(t)):r.ensureAdditionalCapacity(3+n),r.writeUint8(n>>16),r.writeUint16(65535&n),r.write(e),this._socket.requestSend()}}},{key:"convertBufferedToFrames",value:function(){for(var e=this._incoming,t=this.onFrame;t&&e.peek(f);){var n=p(e);__LOG__(2)`FrameSocket.onFrame(${n} bytes)`,t(e.readByteArray(n)),t=this.onFrame}this._draining&&!e.peek(f)&&this._doClose(),t&&e.size()&&__LOG__(2)`FrameSocket: queueing partial frame of ${e.size()} bytes`}},{key:"throwIfClosed",value:function(){if(this.closed)throw new c}},{key:"close",value:function(){this._socket.close()}}]),e}();function f(e){return!(e.size()<3)&&p(e)<=e.size()}function p(e){return e.readUint8()<<16|e.readUint16()}t.FrameSocket=d},33742:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(71954),i=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.NoiseHandshake=void 0;var o=i(n(37613)),s=i(n(89372)),u=i(n(5816)),l=n(17643),c=a(n(60164)),d=n(40602),f=n(61653),p=n(11365),h=r.reject("UNINITIALIZED HANDSHAKE"),_=new Uint8Array(0);h.catch((function(){}));var v=function(){function e(t){var n=this;(0,s.default)(this,e),this._hash=h,this._salt=h,this._cryptoKey=h,this._counter=0,this._socket=t,this._rejectOnClose=new p.Resolvable,t.onClose=function(){n._rejectOnClose.reject(new d.Disconnected("NoiseHandshake: SocketClosed"))},E(this._rejectOnClose.promise)}return(0,u.default)(e,[{key:"start",value:function(e,t){var n=l.Binary.build(e).readBuffer(),a=32===n.byteLength?r.resolve(n):self.crypto.subtle.digest("SHA-256",n);this._hash=a,this._salt=a,this._cryptoKey=a.then(g),this.authenticate(t)}},{key:"sendAndReceive",value:function(e){var t=this._socket,n=new r((function(n){t.onFrame=function(e){t.onFrame=null,n(e)},t.sendFrame(e)}));return this._orRejectOnClose(n)}},{key:"send",value:function(e){this._socket.sendFrame(e)}},{key:"authenticate",value:function(e){this._hash=r.all([this._hash,e]).then((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1],a=l.Binary.build(n,r).readByteArray();return self.crypto.subtle.digest("SHA-256",a)}))}},{key:"encrypt",value:function(e){var t=this._counter++,n=r.all([this._cryptoKey,this._hash,e]).then((function(e){var n=(0,o.default)(e,3),r=n[0],a=n[1],i=n[2];return function(e,t,n,r){return self.crypto.subtle.encrypt({name:"AES-GCM",iv:m(t),additionalData:n?new Uint8Array(n):_},e,r)}(r,t,a,i)}));return this.authenticate(n),this._orRejectOnClose(n)}},{key:"decrypt",value:function(e){var t=this._counter++,n=r.all([this._cryptoKey,this._hash]).then((function(n){var r=(0,o.default)(n,2),a=r[0],i=r[1];return function(e,t,n,r){return self.crypto.subtle.decrypt({name:"AES-GCM",iv:m(t),additionalData:n?new Uint8Array(n):_},e,r)}(a,t,i,e)}));return this.authenticate(e),this._orRejectOnClose(n)}},{key:"finish",value:function(){var e=this,t=this._salt.then((function(e){return y(e,new Uint8Array(0))})).then((function(e){var t=(0,o.default)(e,2),n=t[0],a=t[1];return r.all([g(n,["encrypt"]),g(a,["decrypt"])])})).then((function(t){var n=(0,o.default)(t,2),r=n[0],a=n[1];return new f.NoiseSocket(e._socket,r,a)}));return this._orRejectOnClose(t)}},{key:"mixIntoKey",value:function(e){this._counter=0;var t=r.all([this._salt,e]).then((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];return y(n,new Uint8Array(r))}));this._salt=t.then((function(e){return e[0]})),this._cryptoKey=t.then((function(e){return g(e[1])})),E(this._salt),E(this._cryptoKey)}},{key:"_orRejectOnClose",value:function(e){var t=this;return r.race([e,this._rejectOnClose.promise]).then((function(e){return t._rejectOnClose.resolveWasCalled()?t._rejectOnClose.promise:e}))}}]),e}();function m(e){var t=new ArrayBuffer(12);return new DataView(t).setUint32(8,e),new Uint8Array(t)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["encrypt","decrypt"];return self.crypto.subtle.importKey("raw",new Uint8Array(e),"AES-GCM",!1,t)}function y(e,t){return c.extract(new Uint8Array(e),t).then((function(e){return c.expand(new Uint8Array(e),"",64)})).then((function(e){return[e.slice(0,32),e.slice(32)]}))}function E(e){e.catch((function(){}))}t.NoiseHandshake=v},61653:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.NoiseSocket=void 0;var i=a(n(89372)),o=a(n(5816)),s=n(19087),u=r.reject("UNINITIALIZED HANDSHAKE"),l=new Uint8Array(0);u.catch((function(){}));var c=function(){function e(t,n,r){var a=this;(0,i.default)(this,e),this._incoming=[],this._readQueue=new s.PromiseQueue,this._sendQueue=new s.PromiseQueue,this._readCounter=0,this._writeCounter=0,this._draining=!1,this._sendCiphertextFrame=function(e){a._socket.closed?__LOG__(2)`NoiseSocket socket closed while encrypting frame`:a._socket.sendFrame(e)},this._handleCiphertext=function(e){var t=a._readCounter++;a._readQueue.enqueueHandlers(function(e,t,n,r){return self.crypto.subtle.decrypt({name:"AES-GCM",iv:d(t),additionalData:n?new Uint8Array(n):l},e,r)}(a._readKey,t,void 0,e),a._handlePlaintext)},this._handleOnClose=function(){a._draining=!0,a._readQueue.wait().then((function(){a._draining=!1;var e=a._onClose;e&&e()}))},this._handlePlaintext=function(e){a._onFrame?a._onFrame(e):a._incoming.push(e)},this._socket=t,this._writeKey=n,this._readKey=r,t.onFrame=this._handleCiphertext,this._socket.onClose=this._handleOnClose,t.convertBufferedToFrames()}return(0,o.default)(e,[{key:"sendFrame",value:function(e){if(!this._draining){this._socket.throwIfClosed();var t,n,r,a,i=this._writeCounter++;this._sendQueue.enqueueHandlers((t=this._writeKey,n=i,r=void 0,a=e,self.crypto.subtle.encrypt({name:"AES-GCM",iv:d(n),additionalData:r?new Uint8Array(r):l},t,a)),this._sendCiphertextFrame)}}},{key:"setOnFrame",value:function(e){this._onFrame=e}},{key:"setOnClose",value:function(e){this._onClose=e}},{key:"close",value:function(){this._socket.close()}}]),e}();function d(e){var t=new ArrayBuffer(12);return new DataView(t).setUint32(8,e),new Uint8Array(t)}t.NoiseSocket=c},85716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abPropsParser=void 0;var r=new(n(80206).WapParser)("abProps",(function(e){e.assertTag("iq"),e.assertAttr("from","s.whatsapp.net");var t=e.child("props"),n=t.attrInt("protocol");if(1!==n)throw new Error(`Unsupported protocol version ${n}`);var r=[];return t.forEachChildWithTag("prop",(function(e){var t=e.attrInt("config_code"),n=e.attrString("config_value"),a=e.maybeAttrString("config_expo_key");r.push({configCode:t,configValue:n,configExpoKey:a})})),{abKey:t.maybeAttrString("ab_key"),hash:t.maybeAttrString("hash"),refresh:t.maybeAttrInt("refresh"),props:r}}));t.abPropsParser=r},30191:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=function(e){return i.parse(e),"NO_ACK"};var r=n(80206),a=479,i=new r.WapParser("errorParser",(function(e){e.assertTag("error");var t=e.attrInt("code");switch(t){case a:return __LOG__(4,void 0,new Error,!0)`Invalid stanza sent (smax-invalid)`,void SEND_LOGS("smax-invalid");default:return function(e){__LOG__(4,void 0,new Error,!0)`Unknown error code: ${e}`,SEND_LOGS("unknown-error-code")}(t)}}))},45582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mediaConnParser=void 0;var r=n(80206),a=n(830),i=new r.WapParser("mediaConnParser",(function(e){var t,n,r=e.child("media_conn");return{hosts:r.mapChildrenWithTag("host",(function(e){var t=e.maybeChild("download_buckets"),n=t?t.mapChildren((function(e){return parseInt(e.tag(),10)})):[];return{domain:e.attrString("hostname"),uploadable:o(e,"upload"),downloadable:o(e,"download"),isFallback:"fallback"===e.maybeAttrString("type"),downloadBuckets:n,class:e.maybeAttrString("class"),ip4:e.hasAttr("ip4")?e.attrString("ip4"):void 0,ip6:e.hasAttr("ip6")?e.attrString("ip6"):void 0}})),authToken:r.attrString("auth"),authTTL:r.hasAttr("auth_ttl")?r.attrFutureTime("auth_ttl"):null,authExpires:r.attrFutureTime("ttl"),maxBuckets:r.hasAttr("max_buckets")?r.attrInt("max_buckets"):null,maxManualRetry:null!==(t=r.maybeAttrInt("max_manual_retry",0,4))&&void 0!==t?t:3,maxAutoDownloadRetry:null!==(n=r.maybeAttrInt("max_auto_download_retry",0,4))&&void 0!==n?n:3}}));function o(e,t){return e.hasChild(t)?e.child(t).mapChildren((function(e){var t=e.tag();return(0,a.castToServerMediaType)(t)})).filter(Boolean):a.SERVER_MEDIA}t.mediaConnParser=i},64056:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicRouter=t.NOT_HANDLED=void 0;var i=a(n(89372)),o=a(n(5816)),s={sentinel:"RESPONSE_NAMESPACE"},u={sentinel:"NOT_HANDLED"};t.NOT_HANDLED=u;var l=function(){function e(){var t=this;(0,i.default)(this,e),this._basePromise=r.resolve(),this._handlers=new Map,this._handlerChangeCount=0,this._firstRoute=null,this._nextRoute=null,this._lastRoute=null,this._run=function(){var e=t._nextRoute;if(e){for(var n,r=t._handlers;e&&!(n=c(r,e));)t._nextRoute=e=e.nextRoute;if(e&&n){var a=t._runHandler(n,e),i=!0;if(a!==u){var o=e.prevRoute,s=e.nextRoute;t._nextRoute===e&&(t._nextRoute=s),o?o.nextRoute=s:t._firstRoute=s,s?s.prevRoute=o:(i=!1,t._lastRoute=o)}return i&&t._basePromise.then(t._run),a}}}}return(0,o.default)(e,[{key:"hasHandlerForNamespace",value:function(e){return this._handlers.has(e)}},{key:"getHandledNamespaces",value:function(){return Array.from(this._handlers.keys())}},{key:"setNamespaceHandler",value:function(e,t){var n=this._handlers,r=n.get(e);if(r!==t&&(++this._handlerChangeCount,n.set(e,t),!r)){var a=this._firstRoute;a&&(this._nextRoute||this._basePromise.then(this._run),this._nextRoute=a)}}},{key:"setHandlers",value:function(e,t){this.setNamespaceHandler(e,(function(e,n,r){var a=t[e](n);r&&r(a)}))}},{key:"fireAndForget",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._schedule(e,t,n,null,r)}},{key:"sendAndReceive",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new r((function(r,o){a._schedule(e,t,n,(function(e){try{var t=f(e);t?t.call(e,(function(e){a._schedule(s,"",e,r,i)}),(function(e){a._schedule(s,"",e,o,!1)})):a._schedule(s,"",e,r,i)}catch(e){a._schedule(s,"",e,o,!1)}}),i)}))}},{key:"_schedule",value:function(e,t,n,r,a){var i=this._lastRoute,o={namespace:e,route:t,arg:n,resolver:r,prevRoute:i,nextRoute:null,silentLog:a};this._lastRoute=o;var s=!0;i?(i.nextRoute=o,s=!this._nextRoute):this._firstRoute=o,s&&c(this._handlers,o)&&(this._nextRoute=o,this._basePromise.then(this._run))}},{key:"_runHandler",value:function(e,t){var n=t.route,a=t.arg,i=t.resolver,o=t.silentLog,s=this._handlerChangeCount,l=null,c=null;try{l=e(n,a,i,o)}catch(e){c=r.reject(e)}if(l===u){if(s!==this._handlerChangeCount)return u;c=r.reject(new Error("DynamicRouter: NOT_HANDLED can only be used when updating handlers"))}if(!i)return c;c&&i(c)}}]),e}();function c(e,t){var n=t.namespace;return n===s?d:e.get(n)}function d(e,t,n){n(t)}function f(e){if(null!=e&&("object"==typeof e||"function"==typeof e)){var t=e.then;return"function"==typeof t?t:null}return null}t.DynamicRouter=l},60164:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.hmacSha256=function(e,t){return s(e).then((function(e){return u(e,t)}))},t.extract=l,t.expand=c,t.extractAndExpand=function(e,t,n){return l(null,e).then((function(e){return c(new Uint8Array(e),t,n)}))},t.extractWithSaltAndExpand=function(e,t,n,r){return l(t,e).then((function(e){return c(new Uint8Array(e),n,r)}))};var a=n(17643),i=new Uint8Array(32),o={name:"HMAC",hash:"SHA-256"};function s(e){return self.crypto.subtle.importKey("raw",e,o,!1,["sign"])}function u(e,t){return self.crypto.subtle.sign(o,e,t)}function l(e,t){return s(e||i).then((function(e){return u(e,t)}))}function c(e,t,n){if(n<0||n>8160)return r.reject(new Error(`HKDF::expand given bad length ${n}`));for(var i,o=Math.ceil(n/32),l=a.Binary.build(t).readByteArray(),c=new a.Binary,d=s(e).then((function(e){return i=e,new Uint8Array(0)})),f=function(e){d=d.then((function(t){return u(i,a.Binary.build(t,l,e).readByteArray())})).then((function(e){var t=new Uint8Array(e);return c.writeByteArray(t),t}))},p=1;p<=o;p++)f(p);return d.then((function(){return c.readBuffer(n)}))}},17664:(e,t)=>{"use strict";function n(e,t){if(e.length!==t.length)return!1;for(var n=1,r=e.length,a=0;a<r;a++)n&=e[a]===t[a]?1:0;return 0!==n}Object.defineProperty(t,"__esModule",{value:!0}),t.areBuffersEqual=function(e,t){return n(new Uint8Array(e),new Uint8Array(t))},t.areBytesEqual=n,t.bytesMod=function(e,t){if(t>8388607)throw new Error("Divisor is too big");for(var n=0,r=0;r<e.length;++r)n=((n<<8)+e[r])%t;return n},t.randomNumberLessThan=function(e){if(e!==(0|e))throw new Error("bound must be int32");if(e<=0)throw new Error("bound must not be positive");var t=new Int32Array(1),n=e*Math.floor((-1>>>1)/e),r=-1;for(;-1===r;){self.crypto.getRandomValues(t);var a=t[0]>>>1;a<n&&(r=a%e)}return r}},60047:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.buildEntry=function(e,t){if(!e||0===e.length)throw new Error("FtsIndexEntry: Expected non-empty blindIndices in constructor");return{ids:(0,a.default)(t,"ids"),prefixes:e,token:e[e.length-1]}},t.addMessageIds=function(e,t){if(null!=t){var n=new Set;[e.ids,t].forEach((function(e){return e.forEach((function(e){n.has(e)||n.add(e)}))})),e.ids=Array.from(n.values())}};var a=r(n(91080))},50210:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.definePersistedJob=function(e){return new c(e,[])},t.JobBuilder=void 0;var i=a(n(46292)),o=a(n(89372)),s=a(n(5816)),u=n(90066),l=n(66127),c=function(){function e(t,n){(0,o.default)(this,e),this.type=t,this.steps=n}return(0,s.default)(e,[{key:"step",value:function(e,t){return this._stepWithOptions(e,"function"==typeof t?{code:t}:t)}},{key:"_stepWithOptions",value:function(t,n){var a=n.stopRetryIf,o=f(n.requirements,n.code,a);if(a){var s=a.timePassedSeconds,c=a.appCrashed,p=f(null,function(e){return function(t,n,a){return r.resolve(e(t,n,a)).then((function(e){return e instanceof l.InterruptJob?e:new l.InterruptJob(e)}))}}(a.onStopRetry),a);null!=s&&(o=d((function(e,t,n){var r=n.jobStartTime;return(0,u.happenedWithin)(r,s)}),o,p)),c&&(o=d((function(e,t,n){return!n.afterCrash}),o,p))}return new e(this.type,[].concat((0,i.default)(this.steps),[{stepName:t,info:o}]))}},{key:"finalStep",value:function(e,t){var n=this.step(e,t),r={name:n.type,steps:n.steps};return{end:function(){return r}}}}]),e}();function d(e,t,n){return function(r,a,i){return e(r,a,i)?t(r,a,i):n(r,a,i)}}function f(e,t,n){var r={requirements:e,code:t,stopRetryIf:n};return function(){return r}}t.JobBuilder=c},73791:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.joinRequirements=function(e,t){var n=e.filter((function(e){return!e.isSatisfiable()}));if(n.length>0){var a=n.map((function(e){return e.name}));return function(e){return null==t||t("unsatisfiable",a,e),n[0].waitUntilSatisfied()}}var i=e.map((function(){return r.resolve()})),o=r.resolve(),s=null,u=function(){if(!i.every((function(t,n){return t===e[n].waitUntilSatisfied()}))){var t=[],n=e.map((function(e){var n=e.waitUntilSatisfied();return e.isSatisfied()||(t.push(e.name),n.then((function(){var n=t.indexOf(e.name);t.splice(n,1)}))),n}));return i=n,s=t,r.all(n).then(u)}s=null};return function(e){if(null==s){var n=u();null!=n&&(o=o.then((function(){return n})))}return null==t||t(null==s?"satisfied":"unsatisfied",s,e),o}},t.UnsatisfiableJobRequirement=t.JobRequirement=void 0;var i=a(n(94647)),o=a(n(44422)),s=a(n(79484)),u=a(n(33854)),l=a(n(38620)),c=a(n(89372)),d=a(n(5816)),f=function(){function e(t){var n=this;(0,c.default)(this,e),this._waitingOn=r.resolve(),this._satisfied=!0,this._newBlockers=null,this._blockersFinished=function(){var e=n._newBlockers;if(null!=e)return n._newBlockers=null,r.all(e).then(n._blockersFinished);n._satisfied=!0},this.name=t}return(0,d.default)(e,[{key:"addBlocker",value:function(e){var t=this,n=e.catch((function(e){__LOG__(4,void 0,new Error,!0)`JobRequirement[${t.name}] blocker errored ${e}`,SEND_LOGS("job-blocker-rejected")}));if(this._satisfied)this._satisfied=!1,this._waitingOn=r.all([this._waitingOn,n]).then(this._blockersFinished);else{var a=this._newBlockers;null!=a?a.push(n):this._newBlockers=[n]}}},{key:"waitUntilSatisfied",value:function(){return this._waitingOn}},{key:"isSatisfied",value:function(){return this._satisfied}},{key:"isSatisfiable",value:function(){return!0}}]),e}();t.JobRequirement=f;var p=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var a,o;return(0,c.default)(this,n),o=t.call(this,e),(0,u.default)((a=(0,i.default)(o),(0,l.default)(n.prototype)),"addBlocker",a).call(a,new r((function(){}))),o}return(0,d.default)(n,[{key:"addBlocker",value:function(){}},{key:"isSatisfiable",value:function(){return!1}}]),n}(f);t.UnsatisfiableJobRequirement=p},66127:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.startPersistedJobManager=function(e){if(g)return;var t=y?y(e):e,n=t.isRestartAfterCrash,a=t.accessors,i=new Map,o=t.unfinishedJobEntries.then((function(e){var t=[],o=[];return e.forEach((function(e){e.stepHardStartCountAfterTimeout>=5?t.push(e):o.push(e)})),r.all(t.map((function(e){return __LOG__(4,void 0,new Error,!0)`${S(e)}: stuck on the step ${e.step}, aborting the job`,SEND_LOGS(`job-stuck-${e.type}`),a.deletePersistedJob(e.jobId)}))).then((function(){o.forEach((function(e){i.has(e.jobId)||(__LOG__(2)`${S(e)}: restarting`,i.set(e.jobId,w(e,n)))}))}))}));g={implementationLoaders:m||new Map,implementations:new Map,stepBlockers:new WeakMap,accessors:a,activeJobs:i,initialJobsPromise:o,onJobStarted:t.onJobStarted,onJobFinished:t.onJobFinished,deprecatedJobs:t.deprecatedJobs},m=null},t.addPersistedJobImplementation=function(e,t){var n,r;g?(n=g.implementationLoaders,r=g.deprecatedJobs):n=m||(m=new Map);if(n.has(e))return __LOG__(4,void 0,new Error,!0)`addPersistedJobImplementation called twice for ${e}`,void SEND_LOGS("repeat-job-loader");r&&r.includes(e);n.set(e,t)},t.loadAndRunJobFromId=function(e){var t=M("loadAndRunJobFromId").activeJobs,n=t.get(e);if(null!=n)return n;var r=function(){return T.apply(this,arguments)}(e);return t.set(e,r),r},t.internalTestingResetSingleton=function(e){g&&(m=g.implementationLoaders);g=null,y=e},t.jestResetJob=function(e){M("jestResetJob").activeJobs.delete(e)},t.FINISHED_JOB=t.UNSTARTED_JOB=t.InterruptJob=t.RetryOnBackoff=t.RequiresPage=void 0;var i=a(n(57135)),o=a(n(11504)),s=a(n(89372)),u=a(n(5816)),l=n(90066),c=n(98591),d=n(73791),f=function(){function e(t){(0,s.default)(this,e),this.feature=t}return(0,u.default)(e,[{key:"toString",value:function(){return`RequiresPage: ${this.feature}`}}]),e}();t.RequiresPage=f;var p=function(){function e(t){(0,s.default)(this,e),this.backoffOptions=t}return(0,u.default)(e,[{key:"toString",value:function(){return"RetryOnBackoff"}}]),e}();t.RetryOnBackoff=p;var h=function e(t){(0,s.default)(this,e),this.result=t};t.InterruptJob=h;var _="$unstarted";t.UNSTARTED_JOB=_;var v="$finished";t.FINISHED_JOB=v;var m,g=null,y=null;function E(e){return new h(e)}function S(e){return`Job[${e.jobId}] (${e.type})`}function b(e){return`Job[${e.jobId}] (${e.implementation.name}.${e.currentStepName})`}function T(){return(T=(0,o.default)(i.default.mark((function e(t){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M("_loadAndRunJobFromId"),e.next=3,n.initialJobsPromise;case 3:return r=n.accessors.readPersistedJob,e.next=6,r(t);case 6:if(a=e.sent){e.next=10;break}return __LOG__(4,void 0,new Error,!0)`No entry for job ${t}`,SEND_LOGS("missing-job-entry"),e.abrupt("return",null);case 10:return e.abrupt("return",w(a,!1));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return A.apply(this,arguments)}function A(){return(A=(0,o.default)(i.default.mark((function e(t,n){var a,s,u,d,h,m,g,y,T,w,A,k,P,R,D,N;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=M("runJob"),u=s.accessors,d=s.activeJobs,h=s.deprecatedJobs,m=s.onJobFinished,g=s.onJobStarted,e.next=3,O(t.type);case 3:if(y=e.sent){e.next=9;break}return h.includes(t.type)?__LOG__(3)`No implementation for deprecated ${t.type}, job deleted`:(__LOG__(4,void 0,new Error,!0)`No implementation for ${t.type}. Maybe it should have been put to the deprecated list?`,SEND_LOGS("missing-job-implementation")),e.next=8,u.deletePersistedJob(t.jobId);case 8:return e.abrupt("return",null);case 9:if(h.includes(t.type),T=t.step!==_?y.steps.find((function(e){return e.stepName===t.step})):y.steps[0]){e.next=16;break}return __LOG__(4,void 0,new Error,!0)`No implementation for ${t.type}.${t.step}`,SEND_LOGS("missing-job-step"),e.next=15,u.deletePersistedJob(t.jobId);case 15:return e.abrupt("return",null);case 16:if(w={jobStartTime:t.startTime,afterCrash:n,interruptJob:E},(A={jobId:t.jobId,uniqKey:t.uniqKey,implementation:y,currentStepName:T.stepName,originalArgs:t.original,currentStepArgs:t.current,jobInfo:w,numberOfAttemptsAfterTimeout:t.stepHardStartCountAfterTimeout,stepFirstStartTime:null!==(a=t.stepFirstStartTime)&&void 0!==a?a:(0,l.unixTime)(),backedOffCount:t.backedOffCount||0,waitUntil:t.waitUntil,version:t.version}).currentStepName!==v){e.next=35;break}if(k=A.waitUntil,P=(0,l.secondsUntil)(A.stepFirstStartTime),!(null!=k&&(0,l.isInFuture)(k)&&P>0)){e.next=29;break}if(__LOG__(2)`${S(t)}: skew detected, adjusting accordingly`,k=(0,l.castToUnixTime)(k-P),!(0,l.isInFuture)(k)){e.next=29;break}return A.stepFirstStartTime=(0,l.castToUnixTime)(A.stepFirstStartTime-P),A.waitUntil=k,e.next=29,I(A);case 29:if(null!=k&&(0,l.isInFuture)(k)){e.next=34;break}return __LOG__(2)`${S(t)}: removing completed, expired job from db`,e.next=33,u.deletePersistedJob(t.jobId);case 33:d.delete(t.jobId);case 34:return e.abrupt("return",A.currentStepArgs);case 35:D=(R=function(){var e=A.waitUntil,t=r.resolve();if(null!=e){var n=(0,l.futureUnixTime)(l.DAY_SECONDS);e>n?(__LOG__(2)`${b(A)}: trim wait from ${e} to ${n}`,A.waitUntil=n,t=I(A).then((function(){return(0,l.delayUntil)(n)}))):(__LOG__(2)`${b(A)}: delaying until ${e}`,t=(0,l.delayUntil)(e))}return t.then((function(){return C(A,(function(){return A.waitUntil=null,(0,l.happenedWithin)(A.stepFirstStartTime,l.DAY_SECONDS)||A.numberOfAttemptsAfterTimeout++,I(A)})).catch((function(e){if(e instanceof f)return __LOG__(2)`${b(A)}: requires page`,A.numberOfAttemptsAfterTimeout>0&&(--A.numberOfAttemptsAfterTimeout,I(A)),new r((function(){}));if(e instanceof p){__LOG__(2)`${b(A)}: RetryOnBackoff`;var t=(0,c.getDelay)(++A.backedOffCount,e.backoffOptions);return A.waitUntil=(0,l.futureUnixTime)(Math.ceil(t/1e3)),A.numberOfAttemptsAfterTimeout>0&&--A.numberOfAttemptsAfterTimeout,I(A).then(R)}throw e}))}))})(),N=D.then(function(){var e=(0,o.default)(i.default.mark((function e(n){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:__LOG__(2)`${b(A)}: finished job`,r=null;try{r=m(A.jobId,A.implementation.name,A.originalArgs,n)}catch(e){__LOG__(4,void 0,new Error,!0)`onJobFinished for ${t.type} threw exception ${e}`,SEND_LOGS("onJobFinished-threw")}if(!(null!=r&&r>0)){e.next=12;break}return A.waitUntil=(0,l.futureUnixTime)(Math.ceil(r/1e3)),A.currentStepName=v,A.currentStepArgs=n,A.stepFirstStartTime=(0,l.unixTime)(),e.next=10,I(A);case 10:e.next=15;break;case 12:return e.next=14,u.deletePersistedJob(t.jobId);case 14:d.delete(t.jobId);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,o.default)(i.default.mark((function e(n){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(__LOG__(4,void 0,new Error,!0)`${t.type} failed with error ${n}`,SEND_LOGS(`job-threw-exception-${t.type}`),null==(r=T.info(A.currentStepArgs,A.originalArgs,A.jobInfo)).stopRetryIf){e.next=5;break}return e.next=5,r.stopRetryIf.onStopRetry(A.currentStepArgs,A.originalArgs,A.jobInfo);case 5:return e.next=7,u.deletePersistedJob(t.jobId);case 7:d.delete(t.jobId);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());try{g(t.jobId,t.type,t.original)}catch(e){__LOG__(4,void 0,new Error,!0)`onJobStarted for ${t.type} threw exception ${e}`,SEND_LOGS("onJobStarted-threw")}return e.abrupt("return",N.then((function(){return D})));case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){var n=e.currentStepName,a=e.implementation.steps,i=a.findIndex((function(e){return e.stepName===n})),o=a[i].info(e.currentStepArgs,e.originalArgs,e.jobInfo),s=o.requirements,u=o.code,c=function(e,t){if(null==t||0===t.length)return r.resolve();var n=M("waitForBlockers").stepBlockers,a=n.get(t);null==a&&(a=(0,d.joinRequirements)(t.map((function(e){return e()})),k),n.set(t,a));return a(e)}(e,s);return t&&(c=c.then(t)),c.then((function(){return __LOG__(2)`${b(e)}: running step`,u(e.currentStepArgs,e.originalArgs,e.jobInfo)})).then((function(t){if(t instanceof h)return __LOG__(2)`${b(e)}: InterruptJob`,t.result;var n=i+1;if(n>=a.length)return t;var r=a[n];return e.currentStepName=r.stepName,e.currentStepArgs=t,e.numberOfAttemptsAfterTimeout=0,e.stepFirstStartTime=(0,l.unixTime)(),e.waitUntil=null,e.backedOffCount=0,I(e).then((function(){return C(e)}))}))}function O(e){var t=M("getJobImplementation"),n=t.implementations,r=t.implementationLoaders,a=n.get(e);if(a)return a;var i=r.get(e);if(!i)return null;var o=i().then((function(t){return t.name!==e?(__LOG__(4,void 0,new Error,!0)`addPersistedJobImplementation called for ${e} with object for ${t.name}`,SEND_LOGS("different-job-loader"),null):t}));return n.set(e,o),o}function M(e){if(g)return g;throw new Error(`Jobs::${e} called before startManagingJobs`)}function I(e){return M("updateEntryForJob").accessors.updatePersistedJob({jobId:e.jobId,type:e.implementation.name,uniqKey:e.uniqKey,step:e.currentStepName,original:e.originalArgs,current:e.currentStepArgs,startTime:e.jobInfo.jobStartTime,stepHardStartCountAfterTimeout:e.numberOfAttemptsAfterTimeout,stepFirstStartTime:e.stepFirstStartTime,waitUntil:e.waitUntil,backedOffCount:e.backedOffCount,version:e.version,endTime:e.currentStepName===v?e.stepFirstStartTime:void 0})}function k(e,t,n){"unsatisfiable"===e?__LOG__(2)`${b(n)} halting because of ${t}`:"unsatisfied"===e&&__LOG__(2)`${b(n)} waiting on ${t}`}},19087:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseQueueMap=t.PromiseQueue=void 0;var i=a(n(89372)),o=a(n(5816)),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;(0,i.default)(this,e),this._promise=r.resolve(),this._maxDelay=t}return(0,o.default)(e,[{key:"wait",value:function(){return this._promise}},{key:"enqueueHandlers",value:function(e,t,n){var r=this._promise.then((function(){return e})).then(t,n),a=r.then();return this._promise=l(r,this._maxDelay),a}},{key:"enqueue",value:function(e){var t=this._promise.then(e),n=t.then();return this._promise=l(t,this._maxDelay),n}}]),e}();t.PromiseQueue=s;var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;(0,i.default)(this,e),this._map=new Map,this._maxDelay=t}return(0,o.default)(e,[{key:"waitIfPending",value:function(e){return this._map.get(e)}},{key:"wait",value:function(e){return this._map.get(e)||r.resolve()}},{key:"enqueueHandlers",value:function(e,t,n,r){var a=this.wait(e).then((function(){return t})).then(n,r);return this._addToMap(e,a)}},{key:"enqueue",value:function(e,t){var n=this.wait(e).then(t);return this._addToMap(e,n)}},{key:"_addToMap",value:function(e,t){var n,r=this,a=t.then(),i=function(){r._map.get(e)===n&&r._map.delete(e)};return n=l(t,this._maxDelay).then(i,i),this._map.set(e,n),a}}]),e}();function l(e,t){return t>=0?new r((function(n){var r=function(){n()};e.then(r,r),setTimeout(r,t)})):e.then(c,c)}function c(){}t.PromiseQueueMap=u},45877:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseRetryLoop=void 0;var i=a(n(89372)),o=a(n(5816)),s=n(11365),u=n(98591),l=n(53615),c=function(){function e(t){var n=this;(0,i.default)(this,e),this._resolvable=new s.Resolvable,this._promise=null,this._resetTime=null,this.endWithValue=function(e){n._currentLoop.resolve(),n._resolvable.resolve(e)},this._options=t}return(0,o.default)(e,[{key:"resetTimeoutAfter",value:function(e){this._resetTime=Date.now()+e}},{key:"cancelReset",value:function(){this._resetTime=null}},{key:"reset",value:function(){this._resolvable.resolveWasCalled()||(__LOG__(2)`PromiseRetryLoop: resetting ${this._options.name}`,this._currentLoop.resolve(),this._currentLoop=new s.Resolvable,this._runLoop())}},{key:"start",value:function(){this._resolvable.resolveWasCalled()||(__LOG__(2)`PromiseRetryLoop: starting ${this._options.name}`,null!=this._currentLoop&&__LOG__(4,void 0,new Error)`PromiseRetryLoop was called several times. You may have race conditions`,this._currentLoop=new s.Resolvable,this._runLoop())}},{key:"_runLoop",value:function(){var e=this,t=this._options,n=this._currentLoop,a=(0,u.createTimer)(this._options.timer);a();var i=function(){if(!e._resolvable.resolveWasCalled()&&!n.resolveWasCalled()){var r=Date.now();e._promise=(0,t.code)(e.endWithValue).then((function(){if(!e._resolvable.resolveWasCalled()){var n=t.resetDelay;(void 0!==n&&Date.now()>=r+n||null!=e._resetTime&&e._resetTime<=Date.now())&&(__LOG__(2)`PromiseRetryLoop: resetting ${t.name}`,a=(0,u.createTimer)(e._options.timer)),e._resetTime=null;var o=a();return __LOG__(2)`PromiseRetryLoop: retrying ${t.name} in ${o}ms`,(0,l.delayMs)(o).then(i)}}))}};this._promise=r.resolve().then(i)}},{key:"promise",value:function(){var e=this;return this._promise?r.race([this._resolvable.promise,this._promise.then((function(){return e._resolvable.promise}))]):r.reject(new Error(`PromiseRetryLoop ${this._options.name} had promise() called before start()`))}}]),e}();t.PromiseRetryLoop=c},11365:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.Resolvable=void 0;var i=a(n(89372)),o=a(n(5816)),s=function(){function e(){var t;(0,i.default)(this,e),this._isResolved=!1,this.promise=new r((function(e){t=e})),this._resolve=t}return(0,o.default)(e,[{key:"resolve",value:function(e){this._isResolved=!0,this._resolve(e)}},{key:"reject",value:function(e){this.resolve(r.reject(e))}},{key:"resolveWasCalled",value:function(){return this._isResolved}}]),e}();t.Resolvable=s},35613:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;var i=a(n(37613)),o=a(n(89372)),s=a(n(5816)),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,o.default)(this,e),this._count=0,this._queue=[],this._size=t}return(0,s.default)(e,[{key:"acquire",value:function(){var e=this;return new r((function(t,n){e._performAcquisition(t,n)}))}},{key:"availablePermits",value:function(){return this._size-this._count}},{key:"_performRelease",value:function(){this._count--,this._dequeue()}},{key:"_performAcquisition",value:function(e,t){var n=this;this._count<this._size?(this._count++,e({release:function(){n._performRelease()}})):this._enqueue(e,t)}},{key:"_enqueue",value:function(e,t){this._queue.push([e,t])}},{key:"_dequeue",value:function(){if(0!==this._queue.length){var e=this._queue.shift(),t=(0,i.default)(e,2),n=t[0],r=t[1];this._performAcquisition(n,r)}}}]),e}();t.Semaphore=u},60077:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var a,i=void 0!==r?r:null,o=0,s=[],u=[],l=[],c={sentinel:"CONTINUE_AS_IF_NO_HANDLER"},d={sentinel:"RETRY_ASYNCHRONOUSLY"},f={sentinel:"TO_STRING"},p={sentinel:"DID_ERROR"},h=null,_=[],v=16,m=64,g=128,y=512;function E(e,t){var n=this;this._flags=0,this._value=void 0,this._onFulfilled=void 0,this._onRejected=void 0,this._context=void 0,this._resolveLevel=0,this._control=void 0,this.x=void 0,this._thenableParent=null,this._parent=void 0,this._child=void 0,this._children=void 0,this.control=void 0,t&&(this._context=t.this),"function"==typeof e&&(this._onFulfilled=e,this._flags|=4,this._flags|=256,z(e,this._context,(function(e){return G(n,0,!0,!1,e)}),(function(e){return G(n,0,!1,!1,e)})))}function S(e){if(void 0===e)return a;if(U(e))return e;var t=new E;return G(t,0,!0,!1,e),Q(t,y),t}function b(e){var t=new E;return t._value=e,Q(t,514),_.push(t),t}function T(e){var t=arguments.length-1;if(0===t)return this.then(void 0,e);for(var n=new Array(t),r=0;r<t;r++)n[r]=Y(arguments[r]);var a=K(n,arguments[t]),i=F(this,void 0,a);return i._onRejected&&Q(i,g),i}function w(e,t){this.errors=e||[],this.message=t||`${this.errors.length} errors`}function A(e){var t="";if(e._flags&g)t=(e._onFulfilled||e._onRejected).call(e._context,f);else if(e._control)t=`.addRawControl(${e._control.name}, ${e._control.foo})`;else if(e._flags&v)t=`.endWithControls(${Object.keys(e.control)})`;else if(e._flags&y)t=1&e._flags?`Promise.resolve(${void 0===e._value?"":e._value})`:`Promise.reject(${void 0===e._value?"":e._value})`;else if(256&e._flags)switch(3&e._flags){case 2:case 0:case 1:t=`new Promise(${e._onFulfilled})`}else e._onFulfilled&&e._onRejected?t=`.then(${e._onFulfilled}, ${e._onRejected})`:e._onFulfilled?t=`.then(${e._onFulfilled})`:e._onRejected&&(t=`.catch(${e._onRejected})`);return t}function C(e){this.message=e||"StackPromise timed out"}function O(e,t,n,r){this.name=e,this.foo=t,this.lightning=!!n,this.canRunMultipleTimes=!!r}function M(e,t){return function(){for(var n,r,a=e._parent;a&&!(3&a._flags)&&!(a._flags&v);a=a._parent)!a._control||a._control.name!==t||4&a._flags||(n=a);if(!n)return E.NO_ACTIVE_CONTROL;if(n._control.canRunMultipleTimes||Q(n,4),arguments.length>0){r=new Array(arguments.length);for(var i=0;i<arguments.length;i++)r[i]=arguments[i]}return n._control.foo.call(n._context,(function(e){return B(n,n._resolveLevel,!0,!1,e)}),(function(e){return B(n,n._resolveLevel,!1,!1,e)}),n._parent,r)}}function I(e){this.message=e,this.stack=new Error(e||this.name).stack}E.resolve=S,E.reject=b,E.prototype.then=function(e,t){"function"!=typeof e&&(e=void 0),"function"!=typeof t&&(t=void 0);var n=new E;n._onFulfilled=e,n._onRejected=t,n._context=this._context,this._flags&m&&Q(n,m);var r=3&this._flags;return 0===r?N(this,n):(Q(this,8),(1===r?e:t)?(n._parent=this,u.push(n),R()):(n._parent=this,Q(n,r),n._value=this._value,2===r&&_.push(n))),n},E.prototype.catch=T,E.prototype.catchType=T,E.prototype.catchTypes=T,E.prototype.catchTypes3=T,E.prototype.catchEqualTo=T,E.prototype.catchConditional=T,E.prototype.end=function(e){var t=this.then();if(Q(t,v),t.control={},t._context=void 0,e){var n=e.controls;if(n)for(var r=0;r<n.length;r++){var a=n[r];t.control[a]=M(t,a)}return t}},E.prototype.endWithControls=function(){var e=this.then();Q(e,v),e.control={},e._context=void 0;for(var t=0;t<arguments.length;t++){var n=arguments[t];e.control[n]=M(e,n)}return e},E.all=function(e){return new E((function(t,n){var r=e.length;if(0!==r)for(var a=new Array(e.length),i=0;i<e.length;i++)a[i]=F(e[i],o,n);else t([]);function o(e){if(0==--r){for(var n=[],i=0;i<a.length;i++){var o=a[i];n.push(o&&3&o._flags?o._value:e)}t(n)}return e}}))},E.allSettled=function(e){return new E((function(t){var n=Array.from(e),r=n.length;if(0!==r)for(var a=new Array(n.length),i=u(!1),o=u(!0),s=0;s<n.length;s++)a[s]=F(n[s],i,o);else t([]);function u(e){return function(n){var i=e?{status:"rejected",reason:n}:{status:"fulfilled",value:n};if(0==--r){for(var o=[],s=0;s<a.length;s++){var u=a[s];o.push(u&&3&u._flags?u._value:i)}t(o)}return i}}}))},E.race=function(e){var t=x(e);if(U(t)){var n=t.then((function(e){return E.race(e)}));return n._context=void 0,n._flags&=-65,n}return new E((function(e,n){for(var r=0;r<t.length;r++){var a=x(t[r]);if(!U(a)||3&a._flags)for(e(a),r++;r<t.length;r++){var i=t[r];U(i)&&Q(i,8)}else a.then(e,n)}}))},w.prototype=Object.create(Error.prototype,{name:{value:"AggregateError"}}),E.AggregateError=w,E.onPossiblyUnhandledRejection=function(e,t){console.error(`StackPromise did not catch ${e}`,t,e)},E.prototype.toString=function(){for(var e,t=[],n=this,r=!1;n;n=n._parent){e=n,!r&&3&n._flags&&(r=!0,n._flags&y||(1&n._flags?t.push(`[resolved value: ${n._value}]`):t.push(`[rejected reason: ${n._value}]`)));var a=A(n);1024&n._flags&&(a=`~${a}`),t.push(a)}return t.reverse(),768&e._flags||(t[0]=`[Promise]${t[0]}`),t.join("\n")},E.prototype.timeout=function(e,t){if(0!=(3&this._flags))return this.then();var n;function r(r){return r===f?`.timeout(${e}, ${t})`:(clearTimeout(n),c)}var a=this.then(r,r);return Q(a,160),n=setTimeout((function(e,t){3&e._flags||B(e,0,!1,!1,t instanceof Error?t:new C(t))}),e,a,t),a},C.prototype=Object.create(Error.prototype,{name:{value:"TimeoutError"}}),E.TimeoutError=C,E.prototype.isFulfilled=function(){return!!(1&this._flags)},E.prototype.isRejected=function(){return!!(2&this._flags)},E.prototype.isPending=function(){return!(3&this._flags)},E.prototype.value=function(){if(1&this._flags)return this._value;throw new Error(2&this._flags?"value() called on StackPromise that was rejected":"value() called on StackPromise that is pending")},E.prototype.reason=function(){if(2&this._flags)return this._value;throw new Error(1&this._flags?"reason() called on StackPromise that was fulfilled, not rejected":"reason() called on StackPromise that is pending")},E.prototype.checkpoint=function(e){function t(t){return t===f?`.checkpoint(${e})`:2&e._flags?e:c}e=S(e);var n=this.then(t,t);return Q(n,g),n},E.prototype.finally=function(e){function t(t){return t===f?`.finally(${e})`:(e.call(this,t),c)}return Q(this.then(t,t),g)},E.prototype.tap=function(e){return Q("function"!=typeof e?this.then(D):this.then((function(t){return t===f?`.tap(${e})`:(e.call(this,t),c)})),g)},E.prototype.spread=function(e){var t=this.then((function(t){return t===f?`.spread(${e})`:e.apply(this,t)}));return Q(t,g),t},E.prototype.throw=function(e){return this.then((function(){return b(e)}))},E.Control=O,E.NO_ACTIVE_CONTROL=new Error("No active control was found."),E.prototype.addControl=function(e){if(!(e instanceof O))throw new Error(`addControl must be given Control, but got ${e}`);var t=this.then(e.lightning?void 0:D);return t._control=e,t},E.prototype.addRawControl=function(e,t,n,r){return this.addControl(new O(e,t,n,r))},E.prototype.addResolveControl=function(e,t,n,r){return this.addControl(new O(e,(function(e,n,r,a){try{e(t.apply(this,a))}catch(e){n(e)}}),n,r))},E.prototype.addRejectControl=function(e,t,n,r){return this.addControl(new O(e,(function(e,n,r,a){try{n(t.apply(this,a))}catch(e){n(e)}}),n,r))},I.prototype=Object.create(Error.prototype,{name:{value:"CancellationError"}}),E.CancellationError=I;var k,P=new O("cancel",(function(e,t,n,r){t(new I(r&&r[0]))}),!1,!1);function R(){var e,t;0===o&&(u.length||_.length)&&(o=1,k||(t=0,k="undefined"==typeof MutationObserver||self&&self.navigator&&self.navigator.standalone?i?function(){i.resolve().then($)}:"function"==typeof setImmediate?function(){setImmediate($)}:function(){setTimeout($,0)}:(e=document.createTextNode(""),new MutationObserver($).observe(e,{characterData:!0}),function(){e.data=t=1-t})),k())}function D(e){return e===f?".tap()":c}function N(e,t){Q(e,8),t._parent=e,e._children?e._children.push(t):e._child?(e._children=[e._child,t],e._child=void 0):e._child=t}function L(e){if(e&&("object"==typeof e||"function"==typeof e)){var t;try{t=e.then}catch(e){return h=e,p}if("function"==typeof t)return t}}function x(e){if(!e||U(e))return e;var t=L(e);if(t===p)return b(h);if(t){var n=new E((function(n,r){t.call(e,n,r)}));return n._thenableParent=e,n}return e}function U(e){return e instanceof E}function F(e,t,n){var r,a,i,o,s=U(e=x(e)),u=!1;if(s){if(!(3&e._flags))return Q(e.then(t,n),32);Q(e,8),u=!!(e._flags&m),i=e._context,r=1&e._flags?t:n,a=e._value}else r=t,a=e;if(!r)return S(e).then();if((a=J(r,i,a,!0))===p)o=b(h);else{if(a===d)return S(e).then(t,n);if(a===c)return s?e.then():S(e);o=S(a)}return u&&(o=o.cancellable()),void 0!==i&&((o=o.then())._context=i),o}function G(e,t,n,r,a){if(t===e._resolveLevel){var i=++e._resolveLevel;if(Q(e,4),e._thenableParent=null,n)if(a===e)e._parent=void 0,W(e,!1,r,new TypeError("promise resolved to itself"));else if(U(a)){var o=3&a._flags;0===o?N(a,e):(e._parent=a,Q(e,1024),Q(a,8),W(e,1===o,r,a._value))}else{var s=L(a);s===p?(e._parent=void 0,W(e,!1,r,h)):s?(e._parent=void 0,e._thenableParent=a,z(s,a,(function(t){return G(e,i,!0,!1,t)}),(function(t){return G(e,i,!1,!1,t)}))):W(e,!0,r,a)}else W(e,!1,r,a)}}function B(e,t,n,r,a){t===e._resolveLevel&&(j(e),G(e,t,n,r,a))}function j(e){if(e._parent){var t=e._parent;if(e._parent=void 0,t._child===e)t._child=void 0;else if(t._children){for(var n=t._children,r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1);break}0===n.length&&(t._children=void 0)}}}function Y(e){if(null==e)throw new Error(`Invalid .catch guard ${e}`);if("function"==typeof e)return e;if("object"==typeof e)throw new Error("Object guards in .catch are currently unsupported");return function(t){return t===e}}function K(e,t){return function(n,r){return n===f?`.catch(..., ${t})`:e&&!function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r===Error||r.prototype instanceof Error){if(t instanceof r)return!0}else if(r(t))return!0}return!1}(e,n)?c:r?d:t.call(this,n)}}function W(e,t,n,r){if(Q(e,4|(t?1:2)),e._value=r,e._child)V(e._child,t,n,r),e._child=void 0;else if(e._children){var a=e._children;e._children=void 0;for(var i=0;i<a.length;i++)V(a[i],t,n,r)}else t||8&e._flags||_.push(e)}function V(e,t,n,r){e._resolveLevel++;var a=q(e,t);if(a&&32&e._flags){Q(e,4);var i=J(a,e._context,r,!0);if(i!==d)return void(i===p?(e._parent=void 0,W(e,!1,n,h)):i===c?W(e,t,n,r):(e._parent=void 0,G(e,e._resolveLevel,!0,n,i)));e._flags&=-5}a?((n?l:u).push(e),R()):W(e,t,n,r)}function H(e,t){for(;0!==e.length;)t.push(e.pop())}function $(){for(;0!==s.length||0!==u.length;){0===s.length&&H(u,s);var e=s.pop(),t=e._parent,n=!!(t&&1&t._flags),r=t&&t._value,a=q(e,n);if(Q(e,4),a){var i=void 0;do{i=J(a,e._context,r,!1)}while(i===d);i===p?(r=h,n=!1,e._parent=void 0):i!==c&&(r=i,n=!0,e._parent=void 0)}3&e._flags||(G(e,e._resolveLevel,n,!0,r),H(l,s))}for(o--;0!==_.length;){var f=_.pop();8&f._flags||E.onPossiblyUnhandledRejection(f._value,f)}}function z(e,t,n,r){try{e.call(t,n,r)}catch(e){r(e)}}function q(e,t){if(!(4&e._flags))return t?e._onFulfilled:e._onRejected}function J(e,t,n,r){try{return r?e.call(t,n,!0):e.call(t,n)}catch(e){return h=e,p}}function Q(e,t){return e._flags|=t,e}E.prototype.addCancelControl=function(){return Q(this.addControl(P),m)},E.prototype.cancellable=function(){return Q(this.then(),m)},E.prototype.uncancellable=function(){var e=this.then();return e._flags&=-65,e},E.prototype.cancel=function(e){for(var t,n=this;n&&!(3&n._flags);n=n._parent)n._flags&m&&(t=n);if(t)if(void 0===e&&(e=new I),q(t,!1)){var r=new E;j(t),N(r,t),B(r,0,!1,!1,e)}else B(t,t._resolveLevel,!1,!1,e)},G(a=new E,0,!0,!1,void 0)},98591:(e,t,n)=>{"use strict";var r=n(60077).default;function a(e){var t=e.relativeDelay,n=void 0!==t&&t,r=null,a=o(e.algo);return function(){if(null==r)return r=n?Date.now():0,0;var t=i(e,a());if(n){var o=Date.now(),s=o-r;s>0&&(t=Math.max(0,t-s)),r=o}return t}}function i(e,t){var n=e.max,r=e.min,a=e.jitter,i=void 0===a?.1:a,o=t;return null!=n&&o>n&&(o=n),null!=r&&o<r&&(o=r),0!==i&&(o=Math.ceil(o*(1+i*Math.random()))),o}function o(e){switch(e.type){case"fibonacci":return function(e){var t=e.second-e.first,n=e.first-t;return function(){var e=t+n;return n=t,t=e,e}}(e);case"exponential":return function(e){var t=e.base,n=void 0===t?2:t,r=e.first;return function(){var e=r;return r*=n,e}}(e);case"constant":return function(e){var t=e.delay;return function(){return t}}(e);case"adjust":return function(e){var t=e.toMs,n=o(e.backoff);return function(){return t(n())}}(e);default:throw new Error(`makeTimeFunc unrecognized backoff ${e.type}`)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDelay=function(e,t){if(0===e)return 0;for(var n=o(t.algo),r=1;r<e;r++)n();return i(t,n())},t.createTimer=a,t.createPromiseTimer=function(e){var t=a(e);return function(e){return new r((function(n){var r=t();r>0?setTimeout(n,r,e):n(e)}))}}},53615:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.delayMs=function(e,t){return new r((function(n){setTimeout(n,e,t)}))},t.withTimeout=function(e,t,n){return new r((function(r,a){var i=setTimeout((function(){try{r(n())}catch(e){a(e)}}),t);e.then((function(e){clearTimeout(i),r(e)}),(function(e){clearTimeout(i),a(e)}))}))}},49963:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.promiseAny=function(e){if(0===e.length)return r.reject(new a.AggregateError([]));return r.all(e.map(i)).then((function(e){throw new a.AggregateError(e)}),(function(e){return e}))};var a=n(1838);function i(e){return new r((function(t,n){return r.resolve(e).then(n,t)}))}},39951:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.promiseCallSync=function(e,t){try{for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return r.resolve(e.apply(t,a))}catch(e){return r.reject(e)}}},80835:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.promiseLoop=function(){return o.apply(this,arguments)};var a=r(n(57135)),i=r(n(11504));function o(){return(o=(0,i.default)(a.default.mark((function e(t,n){var r,i,o,s,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,o=function(e){r=!0,i=e},s=0,u=n;case 4:if(r){e.next=11;break}return e.next=7,t(o,u,s);case 7:u=e.sent,s++,e.next=4;break;case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},46154:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.promiseProps=function(e){var t=Object.keys(e);return r.all(t.map((function(t){return e[t]}))).then((function(e){for(var n={},r=0;r<e.length;r++)n[t[r]]=e[r];return n}))}},49219:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.promiseReduce=void 0;var a=r(n(57135)),i=r(n(11504)),o=function(){var e=(0,i.default)(a.default.mark((function e(t,n,r){var i,o,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r,o=t.length,s=0;case 3:if(!(s<o)){e.next=10;break}return e.next=6,n(i,t[s],s);case 6:i=e.sent;case 7:s++,e.next=3;break;case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.promiseReduce=o},65279:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.promiseTimeout=t.TimeoutError=void 0;var i=a(n(89372)),o=a(n(44422)),s=a(n(79484)),u=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).name="TimeoutError",r.name="TimeoutError",r}return n}((0,a(n(64885)).default)(Error));t.TimeoutError=u;t.promiseTimeout=function(e,t,n){var a=null,i=null,o=new r((function(e,r){i=r,a=setTimeout((function(){r(new u(n)),clearTimeout(a)}),t)}));return r.race([e,o]).finally((function(){i&&i(new Error),clearTimeout(a)}))}},75988:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.promiseWrapSync=function(e){return function(){try{return r.resolve(e.apply(this,arguments))}catch(e){return r.reject(e)}}}},66938:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.compileSpec=function(e){if(e.internalCompiledSpec)return e.internalCompiledSpec;var t=e.internalSpec;if(!t)throw new Error(`Message Class ${String(e)} does not have internalSpec`);var n=e.internalDefaults||{},r=Object.keys(t).filter((function(e){return e!==i.KEYS.ONEOF})),a=new Array(r.length),u=[],l=[],c=new Array(r.length),d=t[i.KEYS.ONEOF]||{};r.sort((function(e,n){var r=s(t,e),a=s(t,n);return r[0]-a[0]}));for(var f=0;f<r.length;f++){var p=r[f],h=s(t,p);c[f]=n[p];var _=h[1],v=h[0];if(u.push(v),l.push(_),(_&i.TYPE_MASK)===i.TYPES.MESSAGE)a[f]=h[2];else if((_&i.TYPE_MASK)===i.TYPES.ENUM){var m=h[2];if("function"==typeof m.cast)a[f]=m;else{var g=!0,y=0;for(var E in m)g&&E!==y++&&(g=!1);var S=void 0;if(g){S=[];for(var b=0;b<y;b++)S.push(!0)}else for(var T in S={},m)S[m[T]]=!0;a[f]=S}}else a[f]=null}var w={},A=function(e){d[e].forEach((function(t){w[t]||(w[t]=[]),w[t].push(e)}))};for(var C in d)A(C);var O=t[i.KEYS.RESERVED]&&t[i.KEYS.RESERVED][i.KEYS.RESERVED_TAGS],M=t[i.KEYS.RESERVED]&&t[i.KEYS.RESERVED][i.KEYS.RESERVED_FIELDS],I=new o(r,u,l,c,a,d,w,O,M);return e.internalCompiledSpec=I,I},t.Spec=void 0;var a=r(n(89372)),i=n(22236),o=function e(t,n,r,i,o,s,u,l,c){(0,a.default)(this,e),this.names=t,this.fields=n,this.types=r,this.defaults=i,this.meta=o,this.oneofToFields=s,this.fieldToOneof=u,this.reservedTags=l?l.reduce((function(e,t){return e[t]=!0,e}),{}):{},this.reservedFields=c?c.reduce((function(e,t){return e[t]=!0,e}),{}):{}};function s(e,t){var n=e[t];if(null==n)throw new Error(`fieldData of ${t} is missing`);return n}t.Spec=o},22236:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEYS=t.ENC=t.TYPES=t.TYPE_MASK=t.FLAGS=void 0;t.FLAGS={REPEATED:64,PACKED:128,REQUIRED:256};t.TYPE_MASK=31;t.TYPES={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17};t.ENC={VARINT:0,BIT64:1,BINARY:2,BIT32:5};t.KEYS={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"}},53939:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProto=function(e,t){var n=new i.Binary(t),r=m(e,n,void 0,!1);return(0,l.checkRequirements)(e,r),r},t.decodeProtoWithUnknowns=function(e,t){var n=new i.Binary(t),r=m(e,n,void 0,!0);return(0,l.checkRequirements)(e,r),r},t.getUnknownFields=function(e){return Object.prototype.hasOwnProperty.call(e,"unsafeUnknownFields")?e.unsafeUnknownFields:null};var a=r(n(73982)),i=n(17643),o=n(66938),s=n(22236),u=n(13457),l=n(16429),c=n(98426);function d(e,t,n){if(e!==(0,u.typeToEncType)(t))throw new Error(`FormatError: ${n} encoded with wire type ${e}`)}function f(e,t,n){switch(t){case s.TYPES.INT32:return p(n,-2147483648,2147483648,e,i.parseInt64OrThrow);case s.TYPES.INT64:return n.readVarInt(h);case s.TYPES.UINT32:return p(n,0,4294967296,e,i.parseUint64OrThrow);case s.TYPES.UINT64:return n.readVarInt(_);case s.TYPES.SINT32:var r=p(n,0,4294967296,e,i.parseInt64OrThrow);return 1&r?~(r>>>1):r>>>1;case s.TYPES.SINT64:return n.readVarInt(v);case s.TYPES.BOOL:return!!p(n,0,2,e,i.parseUint64OrThrow);case s.TYPES.ENUM:return n.readVarInt(i.parseInt64OrThrow);case s.TYPES.FIXED64:return n.readLong(_,!0);case s.TYPES.SFIXED64:return n.readLong(h,!0);case s.TYPES.DOUBLE:return n.readFloat64(!0);case s.TYPES.STRING:return n.readString(n.readVarInt(i.parseUint64OrThrow));case s.TYPES.BYTES:return n.readBuffer(n.readVarInt(i.parseUint64OrThrow));case s.TYPES.FIXED32:return n.readUint32(!0);case s.TYPES.SFIXED32:return n.readInt32(!0);case s.TYPES.FLOAT:return n.readFloat32(!0)}}function p(e,t,n,r,a){var i=e.readVarInt(a);if(i<t||i>=n)throw new Error(`FormatError: ${r} encoded with out-of-range value ${i}`);return i}function h(e,t){if((0,i.longFitsInDouble)(!0,e,t))return 4294967296*e+g(t);var n,r=e<0;n=r?0===t?-e:~e:e;var a=r?-t:t;return(0,c.createHexLongFrom32Bits)(n,a,r)}function _(e,t){return(0,i.longFitsInDouble)(!1,e,t)?4294967296*g(e)+g(t):(0,c.createHexLongFrom32Bits)(e,t)}function v(e,t){var n=e>>>1,r=e<<31|t>>>1;return 1&t&&(n=~n,r=~r),h(n,r)}function m(e,t,n,r){for(var u=(0,o.compileSpec)(e),l=u.names,c=u.fields,h=u.types,_=u.meta,v=u.oneofToFields,g=u.fieldToOneof,y=u.reservedTags,E=u.reservedFields,S=e.internalDefaults,b=n||(0,a.default)({},S)||{},T=0;T<l.length;T++)h[T]&s.FLAGS.REPEATED&&(b[l[T]]=[]);for(var w=0,A=c[0];t.size();){var C=p(t,0,4294967296,"field and enc type",i.parseInt64OrThrow),O=7&C,M=C>>>3;if(M!==A){var I=w;do{++w===c.length&&(w=0),A=c[w]}while(M!==A&&w!==I)}if(M===A)!function(){var e=l[w],n=h[w];d(O,n,e);var a=n&s.TYPE_MASK,o=_[w];if(n&s.FLAGS.PACKED)for(var u=t.readVarInt(i.parseUint64OrThrow),c=t.readBinary(u);c.size();){var p=f(e,a,c);(a!==s.TYPES.ENUM||o[p]||void 0!==o.cast(p))&&b[e].push(p)}else if(a===s.TYPES.MESSAGE){var S=t.readVarInt(i.parseUint64OrThrow),T=t.readBinary(S);if(n&s.FLAGS.REPEATED)b[e].push(m(o,T,void 0,r));else{var A=b[e];b[e]=m(o,T,A,r)}}else{var C=f(e,a,t);(a!==s.TYPES.ENUM||o[C]||void 0!==o.cast(C))&&(n&s.FLAGS.REPEATED?b[e].push(C):b[e]=C)}var I=g[e];I&&void 0!==b[e]&&I.forEach((function(t){v[t].filter((function(t){return t!==e})).forEach((function(e){delete b[e]}))})),(y[M]||E[e])&&delete b[e]}();else if(r){b.unsafeUnknownFields||(b.unsafeUnknownFields={});var k=void 0;switch(O){case s.ENC.VARINT:k=t.readVarInt(i.parseInt64OrThrow);break;case s.ENC.BIT64:k=t.readBinary(8);break;case s.ENC.BINARY:k=t.readBinary(t.readVarInt(i.parseUint64OrThrow));break;case s.ENC.BIT32:k=t.readBinary(4)}b.unsafeUnknownFields[M]=k}else O===s.ENC.VARINT?t.readVarInt(i.parseInt64OrThrow):O===s.ENC.BIT64?t.advance(8):O===s.ENC.BINARY?t.advance(t.readVarInt(i.parseUint64OrThrow)):O===s.ENC.BIT32&&t.advance(4)}return b}function g(e){return e>=0?e:4294967296+e}},46042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeProto=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Binary;return(0,s.checkValid)(e,t),_(n,t,e),l=void 0,n},t.encodeErrorInfo=function(){return void 0!==l?`Last encoded value for ${l}`:"No information known"};var r=n(17643),a=n(66938),i=n(22236),o=n(13457),s=n(16429),u=n(98426),l=void 0;function c(e,t){e.writeVarInt(t)}function d(e,t){if("number"==typeof t&&t<4503599627370496&&t>=-4503599627370496)e.writeVarInt(t>=0?2*t:2*-t-1);else{var n,a=new r.Binary;"number"==typeof t?(n=t<0,a.writeVarInt(n?-t:t)):(n=(0,u.hexLongIsNegative)(t),a.writeVarIntFromHexLong(n?(0,u.negateHexLong)(t):t));var i=a.peek((function(){return a.readByteArray()})),o=i.byteLength;if(n){var s,l=0;do{s=i[l],i[l]=128&s|(127&s)-1&127,l++}while(255===i[l-1])}for(var c=n?1:0,d=0;d<o;d++){var f=i[d],p=128&f|(63&f)<<1|c;c=(64&f)>>6,i[d]=p}1===c&&(i[o-1]|=128,a.writeInt8(1)),e.writeBinary(a)}}function f(e,t){"number"==typeof t?e.writeVarInt(t):e.writeVarIntFromHexLong(t)}var p=[void 0,c,f,c,f,d,d,function(e,t){e.writeVarInt(t?1:0)},c,function(e,t){"number"==typeof t?e.writeUint64(t,!0):e.writeHexLong(t,!0)},function(e,t){"number"==typeof t?e.writeInt64(t,!0):e.writeHexLong(t,!0)},function(e,t){e.writeFloat64(t,!0)},function(e,t){e.writeVarInt((0,r.numUtf8Bytes)(t)),e.writeString(t)},function(e,t){e.writeVarInt(t.byteLength),e.writeBuffer(t)},function(e,t,n){e.writeWithVarIntLength((function(e,t){return _(e,t,n)}),t)},function(e,t){e.writeUint32(t,!0)},function(e,t){e.writeInt32(t,!0)},function(e,t){e.writeFloat32(t,!0)}],h=p.map((function(e){if(null!=e)return function(e,n){e.writeWithVarIntLength(t,n)};function t(t,n){for(var r=0;r<n.length;r++)e(t,n[r])}}));function _(e,t,n){for(var r=(0,a.compileSpec)(n),s=r.names,u=r.fields,c=r.types,d=r.meta,f=n.internalDefaults,_=0;_<s.length;_++){var v=s[_],m=t[v];if(void 0===m&&f&&(m=f[v]),void 0!==m){l=v;var g=u[_],y=c[_],E=y&i.TYPE_MASK,S=d[_],b=8*g|(0,o.typeToEncType)(y);if(y&i.FLAGS.PACKED){if(m.length>0)e.writeVarInt(b),(0,h[E])(e,m,S)}else if(y&i.FLAGS.REPEATED)for(var T=0;T<m.length;T++){e.writeVarInt(b),(0,p[E])(e,m[T],S)}else{e.writeVarInt(b),(0,p[E])(e,m,S)}}}}},20290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberOrThrowIfTooLarge=a,t.longIntToDecimalString=function(e){if("number"==typeof e)return e.toString(10);for(var t=(0,r.hexLongToHex)(e),n=[0],a=0,i=0;i<t.length;i++){a=(0,r.hexAt)(t,i);for(var o=0;o<n.length;o++)n[o]=16*n[o]+a,a=n[o]/10|0,n[o]%=10;for(;a>0;)n.push(a%10),a=a/10|0}var s=n.reverse().join("");return(0,r.hexLongIsNegative)(e)?"-"+s:s},t.decimalStringToLongInt=function(e){if(!/^-?\d+$/.test(e))throw __LOG__(2)`"${e}" is not a valid decimal string`,new Error("decimalStringToLongInt is given an invalid decimal string");var t="-"===e[0],n=e.replace(/^-?0*/,""),a=n.length;if(a<16||16===a&&n<="9007199254740991")return t?-Number(n):Number(n);if(a>20||20===a&&n>"18446744073709551615"||t&&(a>19||19===a&&n>"9223372036854775807"))throw __LOG__(2)`"${e}" is over 64 bits`,new Error("decimalStringToHexLong is given value over 64 bits");for(var i=0,o=0,s=0;s<a;s++)i=10*i+Number(n[s]),o=10*o+Math.floor(i/4294967296),i%=4294967296;return(0,r.createHexLongFrom32Bits)(o,i,t)},t.maybeNumberOrThrowIfTooLarge=void 0;var r=n(98426);function a(e){if("number"!=typeof e)throw __LOG__(2)`${e} is not a safe integer`,new Error("numberOrThrowIfTooLarge is given a non-safe integer");return e}t.maybeNumberOrThrowIfTooLarge=function(e){return null==e?e:a(e)}},13457:(e,t,n)=>{"use strict";var r=n(71954);Object.defineProperty(t,"__esModule",{value:!0}),t.typeToEncType=function(e){if(e&i.PACKED)return u.BINARY;var t=e&s;return t<=o.ENUM?u.VARINT:t<=o.DOUBLE?u.BIT64:t<=o.MESSAGE?u.BINARY:u.BIT32};var a=r(n(22236)),i=a.FLAGS,o=a.TYPES,s=a.TYPE_MASK,u=a.ENC},16429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkRequirements=o,t.checkValid=function(e,t){o(e,t);var n=p(t,e);if(n)throw n.path.reverse(),new TypeError(`Invalid value at ${n.path.join(".")}: ${n.error}`)};var r=n(66938),a=n(22236),i=Number.MAX_SAFE_INTEGER;function o(e,t){var n=s(e,t);if(n)throw n.reverse(),new TypeError(`Message missing required value ${n.join(".")}`)}function s(e,t){for(var n=(0,r.compileSpec)(e),i=n.names,o=n.types,u=n.meta,l=void 0,c=0;c<o.length&&!l;c++){var d=o[c],f=i[c],p=Object.prototype.hasOwnProperty.call(t,f)?t[f]:void 0;if(d&a.FLAGS.REQUIRED&&void 0===p)l=[f];else if((d&a.TYPE_MASK)===a.TYPES.MESSAGE&&d&a.FLAGS.REPEATED&&void 0!==p){var h=u[c],_=void 0;for(_=0;_<p.length&&!l;_++)l=s(h,p[_]);l&&l.push(`${f}[${_}]`)}else(d&a.TYPE_MASK)===a.TYPES.MESSAGE&&void 0!==p&&(l=s(u[c],p))&&l.push(f)}return l}function u(e,t,n){return"string"==typeof e?!/^-?0x[0-9a-f]{16}$/i.test(e)&&(__LOG__(2)`"${d(e)}" is not a valid long`,{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}):l(e,t,n)}function l(e,t,n){return"number"!=typeof e||e!=e||Math.floor(e)!==e?(__LOG__(2)`"${d(e)}" is not a valid int`,{path:[],error:"value must be an int"}):(e<t||e>=n)&&(__LOG__(2)`"${d(e)}" is out of range`,{path:[],error:"value is out of range"})}function c(e,t,n){return e?void 0:(__LOG__(2)`"${d(n)}" is not ${t}`,{path:[],error:"value is invalid"})}function d(e){return"string"==typeof e?`"${e}"`:Array.isArray(e)?`[${e.join(", ")}]`:`${e}`}var f=[void 0,function(e){return l(e,-2147483648,2147483648)},function(e){return u(e,-i,i+1)},function(e){return l(e,0,4294967296)},function(e){return u(e,0,i+1)},function(e){return l(e,-2147483648,2147483648)},function(e){return u(e,-i,i+1)},function(e){return c("boolean"==typeof e,"boolean",e)},function(e,t){return c("number"==typeof e&&(t[e]||void 0!==t.cast(e)),"in enum",e)},function(e){return u(e,0,i+1)},function(e){return u(e,-i,i+1)},function(e){return c("number"==typeof e,"number",e)},function(e){return c("string"==typeof e,"string",e)},function(e){return c(e instanceof ArrayBuffer||e instanceof Uint8Array,"ArrayBuffer or Uint8Array",e)},p,function(e){return l(e,0,4294967296)},function(e){return l(e,-2147483648,2147483648)},function(e){return c("number"==typeof e,"number",e)}];function p(e,t){for(var n=(0,r.compileSpec)(t),i=n.names,o=n.fields,s=n.types,u=n.meta,l=n.oneofToFields,c=n.fieldToOneof,p=n.reservedTags,h=n.reservedFields,_=void 0,v=function(t){var n=i[t],r=s[t],v=e[n],m=r&a.TYPE_MASK,g=f[m];if(void 0===g)throw new Error(`Can not find the validator for type ${m}`);if(r&(a.FLAGS.PACKED|a.FLAGS.REPEATED)&&void 0!==v)if(Array.isArray(v))for(var y=u[t],E=0;E<v.length&&!_;E++)(_=g(v[E],y))&&_.path.push(`${n}[${E}]`);else __LOG__(2)`"${d(v)}" is not an array`,_={path:[n],error:"repeated field must be array"};else if(void 0!==v){(_=g(v,u[t]))&&_.path.push(n);var S=c[n];S&&S.forEach((function(t){l[t].filter((function(e){return e!==n})).forEach((function(r){void 0!==e[r]&&(_={path:[t],error:`oneof has fields '${n}' and '${r}' set`})}))})),p[o[t]]&&(_={path:[n],error:`tag ${o[t]} is reserved`}),h[n]&&(_={path:[n],error:"field name is reserved"})}},m=0;m<i.length&&!_;m++)v(m);return _}},20996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureSize=l,t.toBytes=function(e,t){return l(new Uint8Array(e),t)},t.toBuffer=function(e){var t=e.buffer,n=e.byteOffset,r=e.length;return 0===n&&r===t.byteLength?t:t.slice(n,n+r)},t.readBytes=function(e,t){return e.readByteArray(t)},t.makeBytes=function(e){return new Uint8Array(e)},t.sliceBytes=function(e,t,n){if(e.length-t<n)throw new Error(`Can not split off ${n} bytes from index ${t} of ${e.length} bytes`);return e.slice(t,t+n)},t.makeRegistrationId=function(e){var t="extendedRange"===e?2147483646:16380;return(0,o.randomNumberLessThan)(t)+1},t.castRegistrationId=function(e){return c(e)},t.makeSenderKeyId=function(){return(0,o.randomNumberLessThan)(-1>>>1)+1},t.castSenderKeyId=function(e){return c(e)},t.ensureIntInRange=c,t.encodeSignalProto=function(e,t){return(0,r.encodeProto)(e,t).readByteArray()},t.decodeSignalProto=function(e,t,n){return n((0,a.decodeProto)(e,t))},t.hkdf=function(e,t,n,r){return(0,i.extractWithSaltAndExpand)(e,t,n,r).then((function(e){return new Uint8Array(e)}))},t.makeCryptoKey=function(e,t){var n,r;"hmac-sha256"===t?(n=u,r=["sign"]):(n=s,r=["encrypt","decrypt"]);return self.crypto.subtle.importKey("raw",e,n,!1,r)},t.HMAC_SHA256=t.AES_CBC=void 0;var r=n(46042),a=n(53939),i=n(60164),o=n(17664),s={name:"AES-CBC"};t.AES_CBC=s;var u={name:"HMAC",hash:"SHA-256"};function l(e,t){if(e.length!==t)throw new Error(`Signal expected ${t} bytes, given ${e.length}`);return e}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4294967296;if("number"==typeof e&&t<=e&&e<n&&Math.floor(e)===e)return e;throw new Error(`Expected integer in range [${t}, ${n}), given ${String(e)}`)}t.HMAC_SHA256=u},17643:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.numUtf8Bytes=p,t.longFitsInDouble=h,t.parseInt64OrThrow=H,t.parseUint64OrThrow=$,t.Binary=void 0;var a=r(n(89372)),i=r(n(5816)),o=n(98426),s=65533,u=new Uint8Array(10),l=new Uint8Array(0),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,a.default)(this,e),t instanceof ArrayBuffer?(this._buffer=new Uint8Array(t),this._readEndIndex=this._writeIndex=t.byteLength):t instanceof Uint8Array&&(this._buffer=t,this._readEndIndex=this._writeIndex=t.length),this._bytesTrashed=0,this._earliestIndex=this._readIndex=0,this._view=null,this._littleEndian=n,this._hiddenReads=0,this._hiddenWrites=0}return(0,i.default)(e,[{key:"size",value:function(){return this._readEndIndex-this._readIndex}},{key:"peek",value:function(e,t){this._hiddenReads++;var n=this._readIndex,r=this._bytesTrashed;try{return e(this,t)}finally{this._hiddenReads--,this._readIndex=n-(this._bytesTrashed-r)}}},{key:"advance",value:function(e){this._shiftReadOrThrow(e)}},{key:"readWithViewParser",value:function(e,t,n,r){return t(this._getView(),this._shiftReadOrThrow(e),e,n,r)}},{key:"readWithBytesParser",value:function(e,t,n,r){return t(this._buffer,this._shiftReadOrThrow(e),e,n,r)}},{key:"readUint8",value:function(){return _(this,1,m,!1)}},{key:"readInt8",value:function(){return _(this,1,m,!0)}},{key:"readUint16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian;return _(this,2,g,e)}},{key:"readInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian;return _(this,4,y,e)}},{key:"readUint32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian;return _(this,4,E,e)}},{key:"readInt64",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian;return _(this,8,S,H,e)}},{key:"readUint64",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian;return _(this,8,S,$,e)}},{key:"readLong",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;return _(this,8,S,e,t)}},{key:"readFloat32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian;return _(this,4,b,e)}},{key:"readFloat64",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._littleEndian;return _(this,8,T,e)}},{key:"readVarInt",value:function(e){var t=v(this,0,w,this.size());return v(this,t,A,e)}},{key:"readBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size();return 0===e?new ArrayBuffer(0):v(this,e,C)}},{key:"readByteArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size();return 0===e?new Uint8Array(0):v(this,e,O)}},{key:"readBinary",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;if(0===t)return new e(void 0,n);var r=v(this,t,O);return new e(r,n)}},{key:"indexOf",value:function(e){if(0===e.length)return 0;for(var t=this._buffer,n=this._readEndIndex,r=this._readIndex,a=0,i=r,o=r;o<n;o++)if(t[o]===e[a]){if(0===a&&(i=o),++a===e.byteLength)return o-r-e.byteLength+1}else a>0&&(a=0,o=i);return-1}},{key:"readString",value:function(e){return v(this,e,M)}},{key:"ensureCapacity",value:function(e){this._maybeReallocate(this._readIndex+e)}},{key:"ensureAdditionalCapacity",value:function(e){this._maybeReallocate(this._writeIndex+e)}},{key:"writeToView",value:function(e,t,n,r){var a=this._shiftWriteMaybeReallocate(e);return t(this._getView(),a,e,n,r)}},{key:"writeToBytes",value:function(e,t,n,r){var a=this._shiftWriteMaybeReallocate(e);return t(this._buffer,a,e,n,r)}},{key:"write",value:function(){for(var t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];"string"==typeof n?this.writeString(n):"number"==typeof n?this.writeUint8(n):n instanceof e?this.writeBinary(n):n instanceof ArrayBuffer?this.writeBuffer(n):n instanceof Uint8Array&&this.writeByteArray(n)}}},{key:"writeUint8",value:function(e){W(e,0,256,"uint8"),k(this,1,P,e,!1)}},{key:"writeInt8",value:function(e){W(e,-128,128,"signed int8"),k(this,1,P,e,!0)}},{key:"writeUint16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;W(e,0,65536,"uint16"),I(this,2,R,e,t)}},{key:"writeInt16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;W(e,-32768,32768,"signed int16"),I(this,2,D,e,t)}},{key:"writeUint32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;W(e,0,4294967296,"uint32"),I(this,4,N,e,t)}},{key:"writeInt32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;W(e,-2147483648,2147483648,"signed int32"),I(this,4,L,e,t)}},{key:"writeUint64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;W(e,0,0x10000000000000000,"uint64"),I(this,8,x,e,t)}},{key:"writeInt64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;W(e,-0x8000000000000000,0x8000000000000000,"signed int64"),I(this,8,x,e,t)}},{key:"writeFloat32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;I(this,4,U,e,t)}},{key:"writeFloat64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;I(this,8,F,e,t)}},{key:"writeVarInt",value:function(e){W(e,-0x8000000000000000,0x8000000000000000,"varint (signed int64)");var t=e<0,n=t?-e:e,r=Math.floor(n/4294967296),a=n-4294967296*r;t&&(r=~r,0===a?r++:a=-a),k(this,K(r,a),G,r,a)}},{key:"writeVarIntFromHexLong",value:function(e){for(var t=(0,o.hexLongIsNegative)(e),n=t?(0,o.negateHexLong)(e):e,r=(0,o.hexLongToHex)(n),a=0,i=0,s=0;s<o.NUM_HEX_IN_LONG;s++)a=a<<4|i>>>28,i=i<<4|(0,o.hexAt)(r,s);t&&(a=~a,0===i?a++:i=-i),k(this,K(a,i),G,a,i)}},{key:"writeBinary",value:function(e){var t=e.peek((function(e){return e.readByteArray()}));if(t.length){var n=this._shiftWriteMaybeReallocate(t.length);this._buffer.set(t,n)}}},{key:"writeBuffer",value:function(e){this.writeByteArray(new Uint8Array(e))}},{key:"writeByteArray",value:function(e){var t=this._shiftWriteMaybeReallocate(e.length);this._buffer.set(e,t)}},{key:"writeBufferView",value:function(e){this.writeByteArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}},{key:"writeString",value:function(e){k(this,p(e),B,e)}},{key:"writeHexLong",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._littleEndian;I(this,8,j,e,t)}},{key:"writeBytes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)W(t[r],0,256,"byte");k(this,t.length,Y,t)}},{key:"writeAtomically",value:function(e,t){this._hiddenWrites++;var n=this._writeIndex,r=this._bytesTrashed;try{var a=e(this,t);return n=this._writeIndex,r=this._bytesTrashed,a}finally{this._hiddenWrites--,this._writeIndex=n-(this._bytesTrashed-r)}}},{key:"writeWithVarIntLength",value:function(e,t){var n=this._writeIndex,r=this.writeAtomically(e,t),a=this._writeIndex;this.writeVarInt(a-n);for(var i=this._writeIndex-a,o=this._buffer,s=0;s<i;s++)u[s]=o[a+s];for(var l=a-1;l>=n;l--)o[l+i]=o[l];for(var c=0;c<i;c++)o[n+c]=u[c];return r}},{key:"_getView",value:function(){return this._view||(this._view=new DataView(this._buffer.buffer,this._buffer.byteOffset))}},{key:"_shiftReadOrThrow",value:function(e){if(e<0)throw new Error("ReadError: given negative number of bytes to read");var t=this._readIndex,n=t+e;if(n>this._readEndIndex)throw new Error(t===this._readEndIndex?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");return this._readIndex=n,this._hiddenReads||(this._earliestIndex=n),t}},{key:"_maybeReallocate",value:function(e){var t=this._buffer;if(e<=t.length)return e;var n=this._earliestIndex,r=e-n,a=Math.max(r,2*(t.length-n),64),i=new Uint8Array(a);return n?(i.set(t.subarray(n)),this._bytesTrashed+=n,this._readIndex-=n,this._readEndIndex-=n,this._writeIndex-=n,this._earliestIndex=0):i.set(t),this._buffer=i,this._view=null,r}},{key:"_shiftWriteMaybeReallocate",value:function(e){var t=this._maybeReallocate(this._writeIndex+e),n=this._writeIndex;return this._writeIndex=t,this._hiddenWrites||(this._readEndIndex=t),n}}],[{key:"build",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=0;i<n.length;i++){var o=n[i];"string"==typeof o?a+=p(o):"number"==typeof o?a++:o instanceof e?a+=o.size():o instanceof ArrayBuffer?a+=o.byteLength:o instanceof Uint8Array&&(a+=o.length)}var s=new e;return s.ensureCapacity(a),s.write.apply(s,arguments),s}}]),e}();t.Binary=c;var d="",f=0;function p(e){if(e===d)return f;for(var t=e.length,n=0,r=0;r<t;r++){var a=e.charCodeAt(r);if(a<128)n++;else if(a<2048)n+=2;else if(a<55296||57344<=a&&a<=65535)n+=3;else if(55296<=a&&a<56320&&r+1!==t){var i=e.charCodeAt(r+1);56320<=i&&i<57344?(r++,n+=4):n+=3}else n+=3}return d=e,f=n}function h(e,t,n){var r=t>>21;if(e){var a=Boolean(2097151&t||n);return 0===r||-1===r&&a}return 0===r}function _(e,t,n,r,a){return e.readWithViewParser(t,n,r,a)}function v(e,t,n,r,a){return e.readWithBytesParser(t,n,r,a)}function m(e,t,n,r){return r?e.getInt8(t):e.getUint8(t)}function g(e,t,n,r){return e.getUint16(t,r)}function y(e,t,n,r){return e.getInt32(t,r)}function E(e,t,n,r){return e.getUint32(t,r)}function S(e,t,n,r,a){return r(e.getInt32(a?t+4:t,a),e.getInt32(a?t:t+4,a))}function b(e,t,n,r){return e.getFloat32(t,r)}function T(e,t,n,r){return e.getFloat64(t,r)}function w(e,t,n,r){for(var a=Math.min(r,10),i=0,o=128;i<a&&128&o;)o=e[t+i++];if(10===i&&o>1)throw new Error("ParseError: varint exceeds 64 bits");return 128&o?i+1:i}function A(e,t,n,r){var a=0,i=0,o=n;10===n&&(i=1&e[t+--o]);for(var s=o-1;s>=0;s--)a=a<<7|i>>>25,i=i<<7|127&e[t+s];return r(a,i)}function C(e,t,n){var r=t+e.byteOffset,a=e.buffer;return 0===r&&n===a.byteLength?a:a.slice(r,r+n)}function O(e,t,n){return e.subarray(t,t+n)}function M(e,t,n){for(var r=t+n,a=[],i=null,o=t;o<r;o++){a.length>5e3&&(i||(i=[]),i.push(String.fromCharCode.apply(String,a)),a=[]);var u=0|e[o];if(0==(128&u))a.push(u);else if(192==(224&u)){var l=z(e,o+1,r);if(l){o++;var c=(31&u)<<6|63&l;c>=128?a.push(c):a.push(s)}else a.push(s)}else if(224==(240&u)){var d=z(e,o+1,r),f=z(e,o+2,r);if(d&&f){o+=2;var p=(15&u)<<12|(63&d)<<6|63&f;p>=2048&&!(55296<=p&&p<57344)?a.push(p):a.push(s)}else d?(o++,a.push(s)):a.push(s)}else if(240==(248&u)){var h=z(e,o+1,r),_=z(e,o+2,r),v=z(e,o+3,r);if(h&&_&&v){o+=3;var m=(7&u)<<18|(63&h)<<12|(63&_)<<6|63&v;if(m>=65536&&m<=1114111){var g=m-65536;a.push(55296|g>>10,56320|1023&g)}else a.push(s)}else h&&_?(o+=2,a.push(s)):h?(o++,a.push(s)):a.push(s)}else a.push(s)}var y=String.fromCharCode.apply(String,a);return i?(i.push(y),i.join("")):y}function I(e,t,n,r,a){return e.writeToView(t,n,r,a)}function k(e,t,n,r,a){return e.writeToBytes(t,n,r,a)}function P(e,t,n,r){e[t]=r}function R(e,t,n,r,a){e.setUint16(t,r,a)}function D(e,t,n,r,a){e.setInt16(t,r,a)}function N(e,t,n,r,a){e.setUint32(t,r,a)}function L(e,t,n,r,a){e.setInt32(t,r,a)}function x(e,t,n,r,a){var i=r<0,o=i?-r:r,s=Math.floor(o/4294967296),u=o-4294967296*s;i&&(s=~s,0===u?s++:u=-u),e.setUint32(a?t+4:t,s,a),e.setUint32(a?t:t+4,u,a)}function U(e,t,n,r,a){e.setFloat32(t,r,a)}function F(e,t,n,r,a){e.setFloat64(t,r,a)}function G(e,t,n,r,a){for(var i=r,o=a,s=t+n-1,u=t;u<s;u++)e[u]=128|127&o,o=i<<25|o>>>7,i>>>=7;e[s]=o}function B(e,t,n,r){for(var a=t,i=r.length,o=0;o<i;o++){var s=r.charCodeAt(o);if(s<128)e[a++]=s;else if(s<2048)e[a++]=192|s>>6,e[a++]=128|63&s;else if(s<55296||57344<=s)e[a++]=224|s>>12,e[a++]=128|s>>6&63,e[a++]=128|63&s;else if(55296<=s&&s<56320&&o+1!==i){var u=r.charCodeAt(o+1);if(56320<=u&&u<57344){o++;var l=65536+((1023&s)<<10|1023&u);e[a++]=240|l>>18,e[a++]=128|l>>12&63,e[a++]=128|l>>6&63,e[a++]=128|63&l}else e[a++]=239,e[a++]=191,e[a++]=189}else e[a++]=239,e[a++]=191,e[a++]=189}}function j(e,t,n,r,a){for(var i=(0,o.hexLongIsNegative)(r),s=(0,o.hexLongToHex)(r),u=0,l=0,c=0;c<16;c++)u=u<<4|l>>>28,l=l<<4|(0,o.hexAt)(s,c);i&&(u=~u,0===l?u++:l=-l),e.setUint32(a?t+4:t,u,a),e.setUint32(a?t:t+4,l,a)}function Y(e,t,n,r){for(var a=0;a<n;a++)e[t+a]=r[a]}function K(e,t){var n,r;for(e?(n=5,r=e>>>3):(n=1,r=t>>>7);r;)n++,r>>>=7;return n}function W(e,t,n,r){if("number"!=typeof e||e!=e||Math.floor(e)!==e||e<t||e>=n)throw new TypeError("string"==typeof e?`WriteError: string "${e}" is not a valid ${r}`:`WriteError: ${String(e)} is not a valid ${r}`)}function V(e,t,n){var r=4294967296*(t>=0||e?t:4294967296+t)+(n>=0?n:4294967296+n);if(!h(e,t,n))throw new Error(`ReadError: integer exceeded 53 bits (${r})`);return r}function H(e,t){return V(!0,e,t)}function $(e,t){return V(!1,e,t)}function z(e,t,n){if(t>=n)return 0;var r=0|e[t];return 128==(192&r)?r:0}},1838:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.customError=l,t.supressQuotaExceededError=function(e){if(null==e||"QuotaExceededError"!==e.name)throw e;p=!0},t.hasSupressedQuotaExceededError=function(){return p},t.obtainErrorSummary=function(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))},t.WrappedError=t.UnimplementedMethod=t.HttpError=t.AggregateError=void 0;var a=r(n(64885)),i=r(n(89372)),o=r(n(44422)),s=r(n(79484)),u=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;function r(n){var r=Error.call(this,n);this.message=n,r.name=e,this.name=e,t&&(this.stack=r.stack)}return r.prototype=Object.create(n?n.prototype:u),r.prototype.constructor=r,r}var c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var a;(0,i.default)(this,n);var o=null!=r&&r.length>0?r:function(e){return 0===e.length?"No errors":1===e.length?e[0].message:e.map((function(e){return"- "+e.message})).join("\n")}(e);return(a=t.call(this,o)).errors=e,a}return n}(l("AggregateError",!0));t.AggregateError=c;var d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this,e)).code=r,a}return n}(l("HttpError",!1));t.HttpError=d;var f=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return n}(l("UnimplementedMethod"));t.UnimplementedMethod=f;var p=!1;var h=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this,e)).inner=r,a}return n}((0,a.default)(Error));t.WrappedError=h},12035:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.ShiftTimer=void 0;var a=r(n(89372)),i=r(n(5816)),o=function(){function e(t){var n=this;(0,a.default)(this,e),this._timer=0,this._rafId=0,this.ts=0,this._timerTs=0,this._upperBound=0,this._lowerBound=0,this._arg=void 0,this._run=function(){var e=n._arg,t=n._foo;n._rafId=0,n._timer=0,n.ts=0,n._timerTs=0,n._upperBound=0,n._lowerBound=0,n._arg=void 0,t(e)},this.onOrBefore=function(e,t){s(e);var r=Date.now()+e,a=n._upperBound;if(!(0!==a&&a<r)){var i=n._lowerBound;0!==i&&r<i||(n._upperBound=r,n._rafId||n._timer&&!(r<n.ts)||n._setDelay(r,e,t))}},this.forceRunNow=function(e){n._timer&&clearTimeout(n._timer),n._rafId&&cancelAnimationFrame(n._rafId),n._arg=e,n._run()},this.cancel=function(){n._timer&&clearTimeout(n._timer),n._rafId&&cancelAnimationFrame(n._rafId),n._timer=0,n._rafId=0,n.ts=0,n._timerTs=0,n._upperBound=0,n._lowerBound=0,n._arg=void 0},this._foo=t}return(0,i.default)(e,[{key:"onOrBeforeRepaint",value:function(e){if(!this._rafId){var t=Date.now(),n=this._lowerBound;if(!(0!==n&&t<n)){var r=this._upperBound;(0===r||t<r)&&(this._upperBound=t),this._timer&&(clearTimeout(this._timer),this._timer=0),(!this.ts||this.ts>t)&&(this.ts=t),this._arg=e,this._rafId=requestAnimationFrame(this._run)}}}},{key:"onOrAfter",value:function(e,t){s(e);var n=Date.now()+e,r=this._lowerBound;if(!(0!==r&&n<r)){var a=this._upperBound;0!==a&&a<n||(this._lowerBound=n,(!this._timer||this.ts<n)&&this._setDelay(n,e,t))}}},{key:"debounce",value:function(e,t){s(e),this._debounce(Date.now(),e,t)}},{key:"debounceAndCap",value:function(e,t,n){s(e),s(t);var r=Date.now(),a=r+t,i=this._lowerBound,o=this._upperBound;(0===i||i<=a)&&(0===o||a<o)&&(this._upperBound=a),this._debounce(r,e,n)}},{key:"forceRunNowIfScheduled",value:function(){this._timer?(clearTimeout(this._timer),this._run()):this._rafId&&(cancelAnimationFrame(this._rafId),this._run())}},{key:"isScheduled",value:function(){return 0!==this._timer||0!==this._rafId}},{key:"_debounce",value:function(e,t,n){var r=e+t,a=this._lowerBound;if(!(0!==a&&r<a)){var i=this.ts,o=this._upperBound;0!==o&&o<r?i<o&&this._setDelay(o,o-e,n):i<r&&this._setDelay(r,t,n)}}},{key:"_setDelay",value:function(e,t,n){if(this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._arg=n,this.ts=e,this._timer){var r=e-this._timerTs;if(-16<r&&r<16)return;clearTimeout(this._timer)}this._timer=setTimeout(this._run,t),this._timerTs=e}}]),e}();function s(e){if(!(e>=0))throw new Error("ShiftTimer must be given delay >= 0")}t.ShiftTimer=o},52828:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.startScheduler=function(e){__LOG__(2)`startScheduler invoked`,c||(c=new l(e))},t.awaitTaskPromise=function(e){return f("awaitTaskPromise").awaitTaskPromise(e)},t.reschedule=d,t.rescheduleNow=function(e){d(e,(0,s.unixTime)())},t.deactivate=function(e){d(e,s.DUMMY_UNIXTIME)},t.getScheduledTime=function(e){return f("getScheduledTime").getScheduledTime(e)},t.registerTask=function(e,t){f("registerTask").registerTask(e,t)},t.DO_NOT_RESCHEDULE=void 0;var i=a(n(89372)),o=a(n(5816)),s=n(90066),u=n(98591);t.DO_NOT_RESCHEDULE="no_reschedule";var l=function(){function e(t){(0,i.default)(this,e),this._started=!1,this._resolvers={},this._timers={},this._timeoutIDs={},this._taskImplementations=new Map,this._scheduledTimeResolver=t.scheduledTimeResolver}return(0,o.default)(e,[{key:"_startTask",value:function(e){var t=this,n=this._taskImplementations.get(e);null!=n?this._scheduledTimeResolver.get(e).then((function(a){var i=null==a;if(i||a!==s.DUMMY_UNIXTIME){var o=null==a?0:1e3*a-(0,s.unixTimeMs)();o=Math.max(0,o),o=Math.min(o,~(1<<31)),__LOG__(2)`Scheduling task ${e} in ${o}ms`,t._timeoutIDs[e]=setTimeout((function(){delete t._timeoutIDs[e],__LOG__(2)`Firing task ${e}`,n(i).then((function(n){return"no_reschedule"===n?new r((function(){})):(n===s.DUMMY_UNIXTIME?(__LOG__(2)`Task ${e} complete, deactivating`,delete t._timers[e],a=s.DUMMY_UNIXTIME):n>=0?(__LOG__(2)`Task ${e} complete, waiting ${n}`,delete t._timers[e],a=(0,s.futureUnixTime)(n)):(__LOG__(2)`Task ${e} will try again later`,a=t._getNextRun(e)),t._scheduledTimeResolver.set(e,a));var a})).then((function(){t._startTask(e),t._resolvers[e]&&(t._resolvers[e].forEach((function(e){return e()})),delete t._resolvers[e])})).catch((function(n){return __LOG__(2)`Task ${e} failed, try again later: ${n}`,t._scheduledTimeResolver.set(e,t._getNextRun(e)).then((function(){t._startTask(e)}))}))}),o)}else __LOG__(2)`Task ${e} deactivated`})):__LOG__(4,void 0,new Error)`Tried to start task ${e} before registering its implementation`}},{key:"_getNextRun",value:function(e){return this._timers[e]||(this._timers[e]=(0,u.createTimer)({jitter:.1,max:1e3*s.HOUR_SECONDS,algo:{type:"fibonacci",first:1e3,second:2e3}})),(0,s.futureUnixTime)(Math.round(this._timers[e]()/1e3))}},{key:"_registerResolver",value:function(e,t){this._resolvers[e]||(this._resolvers[e]=[]),this._resolvers[e].push(t)}},{key:"awaitTaskPromise",value:function(e){var t=this;return new r((function(n){t._registerResolver(e,n)}))}},{key:"reschedule",value:function(e,t){this._started?(this._scheduledTimeResolver.set(e,t),null!=this._timeoutIDs[e]&&clearTimeout(this._timeoutIDs[e]),this._startTask(e)):this._scheduledTimeResolver.set(e,t)}},{key:"registerTask",value:function(e,t){this._started||(this._started=!0),this._taskImplementations.set(e,t),this._startTask(e)}},{key:"getScheduledTime",value:function(e){return this._scheduledTimeResolver.get(e)}}]),e}(),c=null;function d(e,t){f("reschedule").reschedule(e,t)}function f(e){if(c)return c;throw new Error(`TaskScheduler::${e} called before startScheduler`)}},9762:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeIndexWithoutPreservingOrder=function(e,t){var n=e.pop();t<e.length&&(e[t]=n)}},17108:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=function(e){var t,n,r=new ArrayBuffer(e.length),a=new Uint8Array(r);for(t=0,n=e.length;t<n;t++)a[t]=e.charCodeAt(t);return a.buffer},t.arrayBufferToString=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},28231:e=>{e.exports=function(e){throw new Error(`Impossible value, the default statement should never be reached for value: ${e}`)}},92827:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.encodeB64=function(e){return o(e,43,47,!0)},t.encodeB64UrlSafe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(e,45,95,t)},t.decodeB64=function(e){var t=u(e,43,47,61);if(t)return t.buffer;throw new Error("Base64.decode given invalid string")},t.decodeB64UrlSafe=function(e){var t=u(e,45,95,-1);if(t)return t.buffer;throw new Error("Base64.decode given invalid string")},t.decodeB64ToJsArray=function(e){var t=e instanceof ArrayBuffer?new Uint8Array(e):u(e,43,47,61);return t&&(0,a.default)(t)},t.sizeWhenB64Decoded=function(e){return Math.floor(3*e.length/4)},t.BASE64_DATA_URL_SCHEME=void 0;var a=r(n(46292)),i=3e3;function o(e,t,n,r){var a=Array.isArray(e)||e instanceof ArrayBuffer?new Uint8Array(e):e;if(a.length<=i)return s(a,t,n,r);for(var o=[],u=0;u<a.length;u+=i)o.push(s(a.subarray(u,u+i),t,n,r));return o.join("")}function s(e,t,n,r){for(var a=Math.ceil(4*e.length/3),i=4*Math.ceil(e.length/3),o=new Array(i),s=0,u=0;s<i;s+=4,u+=3){var l=e[u]<<16|e[u+1]<<8|e[u+2];o[s]=l>>18,o[s+1]=l>>12&63,o[s+2]=l>>6&63,o[s+3]=63&l}for(var c=0;c<a;c++){var d=o[c];o[c]=d<26?65+d:d<52?71+d:d<62?d-4:62===d?t:n}for(var f=a;f<i;f++)o[f]=61;var p=String.fromCharCode.apply(String,o);return r?p:p.substring(0,a)}function u(e,t,n,r){for(var a=e.length,i=new Int32Array(a+a%4),o=0;o<a;o++){var s=e.charCodeAt(o);if(65<=s&&s<=90)i[o]=s-65;else if(97<=s&&s<=122)i[o]=s-71;else if(48<=s&&s<=57)i[o]=s+4;else if(s===t)i[o]=62;else{if(s!==n){if(s===r){a=o;break}return null!=self.ERROR&&__LOG__(4,void 0,new Error)`Found unexpected character code while decoding B64 at index ${o}, length ${a}: ${s}`,null}i[o]=63}}for(var u=i.length/4,l=0,c=0;l<u;l++,c+=4)i[l]=i[c]<<18|i[c+1]<<12|i[c+2]<<6|i[c+3];for(var d=Math.floor(3*a/4),f=new Uint8Array(d),p=0,h=0;h+3<=d;p++,h+=3){var _=i[p];f[h]=_>>16,f[h+1]=_>>8&255,f[h+2]=255&_}switch(d-h){case 2:f[h]=i[p]>>16,f[h+1]=i[p]>>8&255;break;case 1:f[h]=i[p]>>16}return f}t.BASE64_DATA_URL_SCHEME="data:image/jpeg;base64,"},56678:(e,t,n)=>{"use strict";var r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.dir=function(e){!function(){if(r)return;var e=n(75825),t=e.length/2;r=new Int32Array(t),a=new Int32Array(t);for(var i=0,o=0;i<t;i++,o+=2)r[i]=e[o]+(0===i?0:r[i-1]),a[i]=e[o+1]}();for(var t=0;t<e.length;t++){var i=0|e.charCodeAt(t);if(55296<=i&&i<56320){if(++t===e.length)break;var o=e.charCodeAt(t);if(!(56320<=o&&o<57344))continue;i=65536+((1023&i)<<10|1023&o)}else if(56320<=i&&i<57344)continue;if(!(i<r[0])){for(var s=0|r.length,u=0,l=s-1|0;u<l;){var c=l+u>>1;if(r[c]>i)l=c-1|0;else{if(r[c+1]>i){l=c;break}u=c+1|0}}var d=a[l],f=r[l]+Math.abs(d)|0;if(i<f)return d<0?"rtl":"ltr"}}return}},34857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[];n[34]="ES",n[49]="DE",n[52]="MX",n[44]="GB",n[966]="SA",n[39]="IT",n[93]="AF",n[355]="AL",n[213]="DZ",n[376]="AD",n[244]="AO",n[54]="AR",n[374]="AM",n[297]="AW",n[61]="AU",n[43]="AT",n[994]="AZ",n[973]="BH",n[880]="BD",n[375]="BY",n[32]="BE",n[501]="BZ",n[229]="BJ",n[975]="BT",n[591]="BO",n[387]="BA",n[267]="BW",n[55]="BR",n[246]="IO",n[673]="BN",n[359]="BG",n[226]="BF",n[257]="BI",n[225]="CI",n[855]="KH",n[237]="CM",n[238]="CV",n[236]="CF",n[235]="TD",n[56]="CL",n[86]="CN",n[57]="CO",n[269]="KM",n[242]="CG",n[243]="CD",n[682]="CK",n[506]="CR",n[385]="HR",n[53]="CU",n[599]="CW",n[357]="CY",n[420]="CZ",n[45]="DK",n[253]="DJ",n[593]="EC",n[20]="EG",n[503]="SV",n[240]="GQ",n[291]="ER",n[372]="EE",n[251]="ET",n[298]="FO",n[679]="FJ",n[358]="FI",n[33]="FR",n[594]="GF",n[689]="PF",n[241]="GA",n[220]="GM",n[995]="GE",n[233]="GH",n[350]="GI",n[30]="GR",n[299]="GL",n[590]="GP",n[502]="GT",n[224]="GN",n[245]="GW",n[592]="GY",n[509]="HT",n[504]="HN",n[852]="HK",n[36]="HU",n[354]="IS",n[91]="IN",n[62]="ID",n[98]="IR",n[964]="IQ",n[353]="IE",n[972]="IL",n[81]="JP",n[962]="JO",n[254]="KE",n[965]="KW",n[996]="KG",n[856]="LA",n[371]="LV",n[961]="LB",n[266]="LS",n[231]="LR",n[218]="LY",n[423]="LI",n[370]="LT",n[352]="LU",n[853]="MO",n[389]="MK",n[261]="MG",n[265]="MW",n[60]="MY",n[960]="MV",n[223]="ML",n[356]="MT",n[692]="MH",n[596]="MQ",n[222]="MR",n[230]="MU",n[691]="FM",n[373]="MD",n[377]="MC",n[976]="MN",n[382]="ME",n[212]="MA",n[258]="MZ",n[95]="MM",n[264]="NA",n[674]="NR",n[977]="NP",n[31]="NL",n[687]="NC",n[64]="NZ",n[505]="NI",n[227]="NE",n[234]="NG",n[672]="NF",n[850]="KP",n[47]="NO",n[968]="OM",n[92]="PK",n[680]="PW",n[970]="PS",n[507]="PA",n[675]="PG",n[595]="PY",n[51]="PE",n[63]="PH",n[48]="PL",n[351]="PT",n[974]="QA",n[40]="RO",n[7]="RU",n[250]="RW",n[262]="RE",n[508]="PM",n[685]="WS",n[378]="SM",n[221]="SN",n[381]="RS",n[248]="SC",n[232]="SL",n[65]="SG",n[421]="SK",n[386]="SI",n[677]="SB",n[252]="SO",n[27]="ZA",n[82]="KR",n[211]="SS",n[94]="LK",n[249]="SD",n[597]="SR",n[268]="SZ",n[46]="SE",n[41]="CH",n[963]="SY",n[239]="ST",n[886]="TW",n[992]="TJ",n[255]="TZ",n[66]="TH",n[670]="TL",n[228]="TG",n[676]="TO",n[216]="TN",n[90]="TR",n[993]="TM",n[256]="UG",n[380]="UA",n[971]="AE",n[1]="US",n[598]="UY",n[998]="UZ",n[678]="VU",n[58]="VE",n[84]="VN",n[681]="WF",n[967]="YE",n[260]="ZM",n[263]="ZW",n[383]="XK";var r=n;t.default=r},36416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={1:'[334,-1,"($1) $2-$3"],10',20:'["Ah","[23]"],[334,"1[0125]|[89]00"],["Bg","1[35]|[4-6]|[89][2-9]"],[9,10]',211:"333,9",212:'["[5-7]BF","5(2[015-7]|3[0-4])|[67]",1],["[58]CE",["5(2[2-489]|3[5-9]|92)|892","5(2([2-48]|9[0-7])|3([5-79]|8[0-7])|924)|892"],1],["5DD",["5(29|38)","5(29|38)[89]"],1],["[5]BBBB","5(4[067]|5[03])"],["8[09];G","8(0|9[013-9])",1],9',213:'["[5-8]BBBB","[5-8]"],["9ACBB",9],9',216:"233,8",218:'[27,"[25-79]",1],9',220:"34,7",221:'[2322,"[379]"],[3222,8],9',222:'"[2-48]ABBB",8',223:'[2222,"[246-9]"],8',224:'[2222,3],[3222,"[67]"],[8,9]',225:"2222,8",226:'[2222,"[025-7]"],8',227:'[233,"08"],[2222,"[0289]"],8',228:'[2222,"[279]"],8',229:"2222,8",230:'[34,"[2-46]|8[013]"],[44,5],[7,8]',231:'[133,"[45]"],[233,2],[234,"[23578]"],[7,8,9]',232:"26,8",233:'[234,"[235]"],9',234:'["CCd","[7-9]"],["CDe","[78]"],["CEf","[78]"],10',235:"2222,8",236:"2222,8",237:'[2222,88],[12222,"[26]"],[8,9]',238:"322,7",239:"34,7",240:'[333,"[235]"],[36,"[89]"],9',241:"[2222,0],8",242:'[234,"[02]"],[144,8],9',243:'[234,1],[333,"[89]"],9',244:'[333,"[29]"],9',245:'[333,"44|9[567]"],[34,40],[7,9]',246:"[34,3],7",247:"5",248:'[133,"[246]"],7',249:'[234,"[19]"],9',250:'["2BCC",2],["[7-9]BCC","[7-9]"],9',251:'"[1-59]ACD",9',252:'[17,"24|[67]"],["BA{5,7}","15|28|6[1-35-9]|799|9[2-9]"],[333,"3[59]|4[89]|6[24-6]|79|8[08]|90"],[8,9]',253:"2222,8",254:'["BA{5,7}","[24-6]"],[36,7],["CCd","[89]"],9',255:'["[24]ACD","[24]"],["[67]BCC","[67]"],["[89]BBD","[89]"],9',256:'[45,[202,2024]],[36,"[27-9]|4(6[45]|[7-9])"],[27,"[34]"],9',257:"2222,8",258:'["[28]ACd","2|8[2-7]"],["80ACC",80],9',260:'["[29]AG","[29]"],["800;CC",8],9',261:'[2232,"[23]"],9',262:'"[268]BBBB",9',263:'["7ACd",7],["86BCC","86[24]"],["CCd","2(1[39]|2[0157]|6[14]|7[35]|84)|329"],["[235]ACd","[23]9|54"],["[25]CA{3,5}",["(25|54)8","258[23]|5483"]],["8CF",86],["80ACD",80],[9,10]',264:'["8ACD","8[1235]"],["6ACd",6],["870;CC",870],9',265:'["2BCC",2],[3222,"[1789]"],9',266:"44,8",267:'["7ACC",7],8',268:'[44,"[027]"],8',269:"322,7",27:'[333,860],[234,"[1-9]"],9',290:"[4,5]",291:"133,7",297:"34,7",298:"6,6",299:"222,6",30:'[244,"21|7"],[46,"2(2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])"],[334,"[2689]"],10',31:'["[1-578]ACD","1[035]|2[0346]|3[03568]|4[0356]|5[0358]|7|8[4578]"],["[1-5]BCC","1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],["6;H","6[0-57-9]"],["66;G",66],["[89]0AA{4,7}","80|9"],[9,11]',32:"[3222,4],9",33:'[3222,8],[12222,"[1-79]"],9',34:'["[89]00;CC","[89]00"],["[5-9]BBBB","[568]|[79][0-8]"],9',350:"[35,2],8",351:'["2ACD","2[12]"],["[2-46-9]BCC","2[3-9]|[346-9]"],9',352:'[2223,20],[333,6],["BBBBb","2([0367]|4[3-8])"],["BBBA{1,5}","[3-57]|8[13-9]|9(0[89]|[2-579])|(2|80)[2-9]"],9',353:'["AdD",1],["BCd","[2569]|4[1-69]|7[14]"],[333,70],[333,81],[234,"[78]"],[433,1],[2134,8],[244,4],9',354:'[34,"[4-9]"],["3BCC",3],[7,8,9]',355:'["6[6-9];CD",6],9',356:'[44,"[2357-9]"],8',357:"26,8",358:'["CA{3,7}","([1-3]00|[6-8]0)"],["116C",116],["BA{4,10}","[14]|2[09]|50|7[135]"],["AA{4,11}","[25689][1-8]|3"],[6,7,8,9,10,11]',359:'[333,999],["BCd","48|8[7-9]|9[08]"],9',36:'["BCd","[2-9]"],9',370:'[134,"52[0-79]"],[323,"[7-9]"],[26,"37|4([15]|6[1-8])"],[35,"[3-6]"],8',371:'[233,"[269]|8[01]"],8',372:'["[3-79]BD",["[369]|4[3-8]|5([0-2]|5[0-478]|6[45])|7[1-9]","[369]|4[3-8]|5([02]|1([0-8]|95)|5[0-478]|6(4[0-4]|5[1-589]))|7[1-9]"]],["70;BD",70],["8000;CC",[800,8000]],["[458]Cd",["40|5|8(00|[1-5])","40|5|8(00[1-9]|[1-5])"]],[7,8]',373:'[233,"22|3"],["[25-7]BBC","2[13-9]|[5-7]"],["[89]BE","[89]"],8',374:'[26,"1|47"],[26,"4[1349]|[5-7]|9[1-9]"],[35,"[23]"],[323,"8|90"],8',375:'[2322,["17[0-3589]|2[4-9]|[34]","17([02358]|1[0-2]|9[0189])|2[4-9]|[34]"],"$1 $2-$3-$4"],[3222,["1(5[24]|6[235]|7[467])|2(1[246]|2[25]|3[26])","1(5[24]|6(2|3[04-9]|5[0346-9])|7([46]|7[37-9]))|2(1[246]|2[25]|3[26])"],"$1 $2-$3-$4"],[423,["1(5[169]|6[3-5]|7[179])|2(1[35]|2[34]|3[3-5])","1(5[169]|6(3[1-3]|4|5[125])|7(1[3-9]|7[0-24-6]|9[2-7]))|2(1[35]|2[34]|3[3-5])"],"$1 $2-$3"],["[89]BCD","8[01]|9"],["82ADD",82],["800;BA{2,4}",800],9',376:'[33,"[135-9]"],[44,1],[333,6],[6,9]',377:'[2222,"[39]"],[233,4],["6;BBBB",6],[332,8],[8,9]',378:'[2222,"[5-7]"],["0549;F",0,"($1) $2"],8',379:"10",380:'[333,["6[12][29]|(3[1-8]|4[136-8]|5[12457]|6[49])2|(56|65)[24]","6[12][29]|(35|4[1378]|5[12457]|6[49])2|(56|65)[24]|(3[1-46-8]|46)2[013-9]"]],[234,["4[45][0-5]|5(0|6[37])|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]","4[45][0-5]|5(0|6(3[14-7]|7))|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]"]],[45,"[3-6]"],["CCd","[89]"],9',381:'["[23]BA{4,9}","(2[389]|39)0"],["[1-3]AA{5,10}","1|2([0-24-7]|[389][1-9])|3([0-8]|9[1-9])"],["6AA{6,8}",6],["[89]BA{3,9}","[89]"],["7[26];A{4,9}","7[26]"],["7[08]AA{4,9}","7[08]"],[8,9,10]',382:'[233,"[2-57-9]|6[036-9]"],[8,9]',383:'[233,"[23][89]|4[3-79]"],[35,"[89]00"],333,8',385:'["1;DC",1],["[2-5]ACd","[2-5]"],["9ACd",9],["[67]ACd","[67]"],["80[01];Bc",8],["80[01];CC",8],[8,9]',386:'[1322,"[12]|3[24-8]|4[24-8]|5[2-8]|7[3-8]"],["[3-7]ACC","[37][01]|4[0139]|51|6"],["[89][09];A{3,6}","[89][09]"],["[58]BE","59|8[1-3]"],8',387:'[233,"6[1-356]|[7-9]"],[233,"[3-5]","$1 $2-$3"],[2223,6],[8,9]',389:'["2;CD",2],["[347]ACC","[347]"],["[58]BABB","[58]"],8',39:'["BdD","0[26]|55"],["0[26];DE","0[26]"],["0BdD","0[13-57-9][0159]"],["CA{3,6}",["0[13-57-9][0159]|8(03|4[17]|9[245])","0[13-57-9][0159]|8(03|4[17]|9(2|[45][0-4]))"]],["0CCD","0[13-57-9][2-46-8]"],["0CA{2,6}","0[13-57-9][2-46-8]"],["CCd",["[13]|8(00|4[08]|9[59])","[13]|8(00|4[08]|9(5[5-9]|9))"]],[344,3],[9,10]',40:'[234,"[23]1"],[333,"[23][3-7]|[7-9]"],9',41:'["[2-9]ACBB","[2-7]|[89]1"],["[89]BCC","8[047]|90"],[32322,860],9',420:'["[2-9]BCC","[2-8]|9[015-7]"],["96ACCC",96],["9ACCC","9[36]"],9',421:'["2;CCB",2,"$1/$2 $3 $4"],["[3-5]ACBB","[3-5]","$1/$2 $3 $4"],["[689]BCC","[689]"],9',423:'[322,"[237-9]"],[234,69],[333,6],7',43:'["1;A{3,12}",1],["5ADA{4,7}","5[079]"],["CA{3,10}","316|46|51|732|6(5[0-3579]|[6-9])|7([28]0)|[89]"],["DA{3,9}","2|3(1[1-578]|[3-8])|4[2378]|5[2-6]|6([12]|4[1-9]|5[468])|7(2[1-8]|35|4[1-8]|[5-79])"],[10,11,12,13]',44:'["Ee",["1(38|5[23]|69|76|94)","1((38|69)7|5(24|39)|768|946)","1(3873|5(242|39[4-6])|(697|768)[347]|9467)"]],["Df","1([2-69][02-9]|[78])"],[244,["[25]|7(0|6[024-9])","[25]|7(0|6([04-9]|2[356]))"]],[46,7],[334,"[1389]"],10',45:"2222,8",46:'["8;ccB",8],["[1-69]AcBB","1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90"],[3222,"1[2457]|2([247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6([124-689]|7[0-2])|9([125-8]|3[0-5]|4[0-3])"],["7ACBB",7],["9[034]ABBC","9[034]"],[32322,"25[245]|67[3-6]"],9',47:'["[489]BBC","[489]"],["[235-7]ABBB","[235-7]"],8',48:'[2322,"[14]|2[0-57-9]|3[2-4]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145]"],[333,"26|39|5[0137]|6[0469]|7[02389]|8[08]"],9',49:'["BA{3,13}","3[02]|40|[68]9"],["CA{3,12}",["2(0[1-389]|1[124]|2[18]|3[14])|3([35-9][15]|4[015])|906|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(0[1-389]|12[0-8])|3([35-9][15]|4[015])|906|2([13][14]|2[18])|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"]],["DA{2,11}",["[24-6]|3([3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(3(0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(2[135]|4[13578]|9[1346])|5(0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(2[1-7]|4[145]|6[1-5]|7[1-4])|8(21|3[1468]|6|7[1467]|8[136])|9(0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(47|60)[1356]|3(3[46]|46|5[49])[1246]|3[4579]3[1357]"]],[34,138],["EA{2,10}",3],["CA{5,11}",181],["CAA{4,10}","1(3|80)|9"],["Ch","1[67]"],["CA{7,12}",8],[56,[185,1850,18500]],[344,7],[47,"18[68]"],[56,"15[0568]"],[47,"15[1279]"],[38,18],["CBh","1(6[023]|7)"],[427,"15[279]"],[328,15],[7,8,9,10,11,12]',500:"5",501:'[34,"[2-8]",1],["0;800;DC",0,1],7',502:'[44,"[2-7]"],[434,1],8',503:'[44,"[267]"],[344,"[89]"],8',504:'[44,"[237-9]",1],8',505:"44,8",506:'[44,"[24-7]|8[3-9]"],[334,"[89]0",1],8',507:"[44,6,1],8",508:'"[45]ABB",6',509:"224,8",51:"[333,9],9",52:'[244,"33|5[56]|81"],[334,"[2-9]"],[1244,"1(33|5[56]|81)"],[1334,1],[10,11]',53:'["Ag",7],["BA{4,6}","[2-4]"],[17,5],8',54:'[424,["2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(2[24-9]|3[1-59]|47)","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5[56][46]|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(4[35][56]|58[45]|8([38]5|54|76))[4-6]","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|58|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|54(4|5[13-7]|6[89])|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(454|85[56])[46]|3(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2-$3"],[244,1,"$1 $2-$3"],[334,"[23]","$1 $2-$3"],[334,"[68]",1],[1424,["9(2[2-469]|3[3-578])","9(2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(2[24-9]|3[1-59]|47)","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5([56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4[35][56]|58[45]|8([38]5|54|76))[4-6]","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|5(4[46]|8)|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|5(4(4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2 $3-$4"],[1244,91,"$1 $2 $3-$4"],[1334,9,"$1 $2 $3-$4"],[10,11]',55:'[244,"[1-9][1-9]","$1 $2-$3"],[254,"([14689][1-9]|2[12478]|3[1-578]|5[1-5]|7[13-579])9","$1 $2-$3"],["[3589]00;cD","[3589]00"],[10,11]',56:'[144,"2[23]"],[234,"[357]|4[1-35]|6[13-57]"],["9;DD",9],["44;CD",44],["[68]00;Cd","60|8"],["600;CBC",60],["1230;CD",1],[54,219],9',57:'[17,["1(8[2-9]|9[0-3]|[2-7])|[24-8]","1(8[2-9]|9(09|[1-3])|[2-7])|[24-8]"]],[37,3],["1;CG",["1(80|9[04])","1(800|9(0[01]|4[78]))"]],[8,10]',58:"[37,-1,1],10",590:'["[56]90;BD",-1,"$1 $2-$3"],9',591:'[17,"[23]|4[46]"],[8,"[67]"],[324,8],8',592:"34,7",593:'[134,"[247]|[356][2-8]",1],[234,9],["1800;Cd",1],[8,9]',594:"3222,9",595:'["BCd","([26]1|3[289]|4[124678]|7[123]|8[1236])"],["CA{3,6}","[2-9]0"],[36,"9[1-9]"],[234,8700],[333,"[2-8][1-9]"],9',596:"3222,9",597:'[34,"[6-8]",1],7',598:'[233,9],[44,"[24]"],8',599:'[34,"[13-7]"],["9;CD",9],[7,8]',60:'["3;DD",3,"$1-$2 $3"],["[18]ACd","1[02-46-9][1-9]|8","$1-$2 $3"],["1;[36-8]00;BD","1[36-8]0",1],["11;DD",11,"$1-$2 $3"],["15[49];CD",15,"$1-$2 $3"],[9,10]',61:'["BCA{2,4}",16],[333,"14|[45]"],[144,"[2378]"],[433,"1(30|[89])"],9',62:'["BA{5,9}","2[124]|[36]1"],["CA{5,7}",800],["CA{5,8}","[2-79]"],["CdC","8[1-35-9]",1],["CA{6,8}",1],[334,804],[3133,80],["CDe",8,1],[2434,0],[9,10,11,12]',63:'["DA{4,6}",["3(23|39|46)|4(2[3-6]|[35]9|4[26]|76)|544|88[245]|(52|64|86)2","3(230|397|461)|4(2(35|[46]4|51)|396|4(22|63)|59[347]|76[15])|5(221|446)|642[23]|8(622|8([24]2|5[13]))"]],[334,"[89]"],[434,1],["DbCD",1],10',64:'[323,"[89]0"],[134,"24|[346]|7[2-57-9]|9[2-9]","$1-$2 $3"],["CCd","2(10|74)|[59]|80"],["BdD","2[028]"],["BCA{3,5}","2([169]|7[0-35-9])|7|86"],[8,9,10]',65:'["[3689]CD","[369]|8[1-9]"],["1[89]00;CD","1[89]"],["7000;DC",70],["800;CD",80],8',66:'["BCd","14|[3-9]"],[433,1],9',670:"[44,7],8",672:"[24,1],[15,3],[5,6]",673:'"[2-578]BD",7',674:"34,7",675:'[34,"[13-689]|27"],[44,"20|7"],[7,8]',676:'[34,"7[5-9]|8[47-9]"],[43,0],7',677:'[25,"[7-9]"],7',678:'[34,"[579]"],7',679:'[34,"[35-9]"],[434,0],7',680:"34,7",681:"222,6",682:"23,5",683:"4",685:'["8Bd",8],["7AE",7],[6,7]',686:"8",687:'[222,"[2-46-9]|5[0-4]","$1.$2.$3"],6',688:"[6,7]",689:'[2222,"4[09]|8[79]"],[222,44],[6,8]',690:"[4,5,6,7]",691:"34,7",692:"[34,-1,1],7",7:'[4222,["7(1[0-8]|2[1-9])","7(1([0-6]2|7|8[27])|2(1[23]|[2-9]2))","7(1([0-6]2|7|8[27])|2(13[03-69]|62[013-9]))|72[1-57-9]2"]],[5122,["7(1[0-68]|2[1-9])","7(1([06][3-6]|[18]|2[35]|[3-5][3-5])|2([13][3-5]|[24-689]|7[457]))","7(1(0([356]|4[023])|[18]|2(3[013-9]|5)|3[45]|43[013-79]|5(3[1-8]|4[1-7]|5)|6(3[0-35-9]|[4-6]))|2(1(3[178]|[45])|[24-689]|3[35]|7[457]))|7(14|23)4[0-8]|71(33|45)[1-79]"]],[334,7],[3322,"[3489]","$1 $2-$3-$4"],10',81:'[334,800,1],["DBd","0077",1],[424,"0088",1],["DCd","00(37|66)",1],["DDe","00(37|66)",1],["DEf","00(37|66)",1],["DFg","00(37|66)",1],[244,"[2579]0|80[1-9]",1],10',82:'["AdD",2,1],[234,"60|8",1],["BdD","[1346]|5[1-5]",1],[244,"[57]",1],[533,["003","0030"]],[254,5,1],["EdD",0],[5234,0],[9,10]',84:'[244,"2[48]"],[343,"2[0-35-79]"],["[89]ACBB","8(8|9[89])|9"],["1[2689]ACD","1([26]|8[68]|99)"],["[3578]ACD","[357]|8[1-5]"],["86[89];CC","86[89]"],["1[89]00;A{4,6}",["1[89]0","1[89]00"]],[9,10]',850:"[334,1],10",852:'[44,"[235-7]|[89](0[1-9]|[1-9])"],["800;CC",800],["900;BCC",900],["900;A{2,5}",900],8',853:'"[268]CD",8',855:'["BCd","[1-9]"],[433,1],[8,9]',856:"[2233,2],10",86:'["21;DA{4,6}",21],[344,"3(11|7[179])|4([15]1|3[1-35])|5(1|2[37]|3[12]|51|7[13-79]|9[15])|7(31|5[457]|6[09]|91)|8([57]1|98)"],[434,[807,8078]],[344,"1[3-578]"],["10800;CD",[108,1080,10800]],["Ch",950],11',880:'["CA{3,7}","3([67]|8[013-9])|4(6[168]|7|[89][18])|5(6[128]|9)|6(28|4[14]|5)|7[2-589]|8(0[014-9]|[12])|9[358]|(3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(44|66)[01346-9]",1],["DA{3,6}","[13-9]",1],10',886:'["AdD","[25][2-8]|[346]|7[1-9]|8[237-9]"],[234,"[258]"],[333,9],[244,7],9',90:'[334,"512|8[0589]|90"],[3322,["5([0-59]|61)","5([0-59]|616)","5([0-59]|6161)"]],[3322,"[24][1-8]|3[1-9]"],10',91:'[55,["600|7([02-8]|19|9[037-9])|8(0[015-9]|[1-9]|20)|9","600|7([078]|19[0-5]|2([02356-9]|[14][017-9]|9[389])|3([025-9]|1[07-9]|[34][017-9])|4([0-35689]|[47][017-9])|5([02346-9]|1[017-9]|5[017-9])|6([02-9]|1[0-257-9])|9([089]|31|7[02-9]))|8(0([01589]|6[67]|7[02-9])|1([0-57-9]|6[07-9])|2(0[078]|[14][07-9]|[235-9])|3([0357-9]|[126][07-9]|4[1-9])|[45]|6([02457-9]|[136][07-9])|7([078][07-9]|[1-69])|8([0-25-9]|3[07-9]|4[047-9])|9([02-9]|1[027-9]))|9","600|7(0|19[0-5]|2([0235679]|[14][017-9]|8([0-569]|[78][089])|9[389])|3([05-8]|1([089]|7[5-9])|2([5-8]|[0-49][089])|3[017-9]|4([07-9]|11)|9([01689]|[2345][089]|40|7[0189]))|4([056]|1([0135-9]|[23][089]|2[089]|4[089])|2(0[089]|[1-7][089]|[89])|3([0-8][089]|9)|4([089]|11|7[02-8])|7([089]|11|7[02-8])|8([0-24-7][089]|[389])|9([0-7][089]|[89]))|5([0346-9]|1[017-9]|2([03-9]|[12][089])|5[017-9])|6([0346-9]|1[0-257-9]|2([0-4].|[5-9][089])|5([0-367][089]|[4589]))|7(0([02-9]|1[089])|[1-9])|8([0-79]|8(0[0189]|11|8[013-9]|9))|9([089]|313|7([02-8]|9[07-9])))|8(0([01589]|6[67]|7([02-8]|9[05-9]))|1([02-57-9]|1([0-35-9]|4[0-46-9])|6([089]|7[02-8]))|2(0([08]|7[02])|[14]([089]|7[02-8])|[235-9])|3([0357-9]|1([089]|7[02-6])|2([09]|77|8[0-689])|4[1-9]|6([089]|7[02-7]))|[45]|6([02457-9]|1([089]|7[02-8])|3([089]|7[02358])|6([08]|7[02-8]|9[01]))|7(0[07-9]|[1-69]|7([089]|7[02-8])|8([089]|7[02-8]))|8([0-25-9]|3([089]|7[02-8])|4([0489]|7[02-68]))|9([02-9]|1([0289]|7[2-6])))|9"]],[244,"11|2[02]|33|4[04]|79[1-9]|80[2-46]"],[334,"1(2[0-249]|3[0-25]|4[145]|[569][14]|7[1257]|8[1346]|[68][1-9])|2(1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|[36][25]|22|4[28]|5[12]|[78]1|9[15])|6(12|[2345]1|57|6[13]|7[14]|80)|7(12|2[14]|3[134]|4[47]|5[15]|[67]1|88)|8(16|2[014]|3[126]|6[136]|7[078]|8[34]|91)"],[433,"1([23579]|[468][1-9])|[2-8]"],[2343,"008"],[334,140],[424,[160,1600]],["DA{2,4};D",[180,1800]],["DdD",[186,1860]],[4333,"18[06]"],10',92:'["Bh","(2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],["Cg",["2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(2[3-8]|98)|(2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"]],[55,58],[37,3],[2333,"2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],[3333,"[24-9]"],10',93:'["[2-7]ACD","[2-7]"],9',94:'[234,7],[333,"[1-689]"],9',95:'["ACd","[12]"],["BCd","[4-7]|8[1-35]"],["ACA{4,6}","9(2[0-4]|[35-9]|4[137-9])"],[144,2],[334,8],[1333,92],[154,9],[8,9,10]',960:'[34,"[3467]|9([1-9]|0[1-9])",1],[334,"[89]00"],7',961:'[133,"[13-69]|7([2-57]|62|8[0-7]|9[04-9])|8[02-9]"],[233,"[7-9]"],[7,8]',962:'["7;DD","7[457-9]"],["Cf","70|8[0158]|9"],9',963:'["BCd","[1-5]"],["9BCC",9],9',964:'["BCd","[2-6]"],[334,7],[9,10]',965:'["Dd","[169]|2([235]|4[1-35-9])|52"],[35,"[25]"],8',966:'[45,9],[234,1],[234,5],["CCd",81],[334,8],9',967:'["7BCC","7[0137]"],9',968:'["CA{4,6}","[58]"],[26,2],[44,"[79]"],8',970:'["5[69]ACC",5],["1[78]00;CC","1[78]"],9',971:'["CA{2,9}","60|8"],[315,"[479]"],[234,5],9',972:'[234,"[57]",1],[433,12,1],[46,159,1],[1333,"1[7-9]",1],["CbCD",15,"$1-$2 $3-$4"],9',973:"44,8",974:'["[3-7]CD","[3-7]"],8',975:'[2222,"1|77"],8',976:'["[12]ABD","[12]1"],["[12]2Af","[12]2[1-3]"],["[12]CE",["[12](27|[3-5])","[12](27|[3-5].)2"]],[44,"[57-9]"],["[12]De",["[12](27|[3-5])","[12](27|[3-5].)[4-9]"]],8',977:'["9BG","9(6[013]|7[245]|8)",1],10',98:'[244,"[1-8]"],["CCd",9],10',992:'[612,[331,3317]],[324,"[34]7|91[78]"],[414,3],[234,"[457-9]"],9',993:'[2222,12,"$1 $2-$3-$4"],[26,6],[3122,"13|[2-5]","$1 $2-$3-$4"],8',994:'[3222,9],[2322,["[12]|365","[12]|365","[12]|365([0-46-9]|5[0-35-9])"]],[2322,"[3-8]"],9',995:'[3222,"[348]"],[333,7],[3222,5],9',996:'[45,"3(1[346]|[24-79])"],[333,"[235-79]"],["CCAc",8],9',998:'[2322,"[679]"],[7,8,9]'}},13471:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.LruCache=void 0;var a=r(n(5816)),i=r(n(89372)),o=r(n(3996)),s=r(n(98784)),u=function e(t,n){(0,i.default)(this,e),this.key=t,this.value=n,this.prev=null,this.next=null},l=function(){function e(t){var n,r=this;(0,i.default)(this,e),this._keyToNode=new Map,this.schedulePurge=s.default.throttle((function(){r.purgeNow()}),1e3,{leading:!1}),this._sizeLimit=t.sizeLimit,this._getSize=t.getSize,this._onPurge=t.onPurge,this._shouldEvict=null!==(n=t.shouldEvict)&&void 0!==n?n:function(){return!0},this._onEvict=t.onEvict,this._onAdd=t.onAdd,this._onDelete=t.onDelete,this._currentSize=0,this._dummyHead=new u("dummy-head",null),this._dummyTail=new u("dummy-tail",null),this._dummyHead.next=this._dummyTail,this._dummyTail.prev=this._dummyHead}return(0,a.default)(e,[{key:"get",value:function(e){if(!this._keyToNode.has(e))return null;var t=this._keyToNode.get(e);if(null==t)return null;var n=t.prev,r=t.next;n&&(n.next=r),r&&(r.prev=n);var a=this._dummyHead.next;if(null==a)throw new Error("The linked list is not constructed properly.");return this._dummyHead.next=t,a.prev=t,t.prev=this._dummyHead,t.next=a,t.value}},{key:"has",value:function(e){return this._keyToNode.has(e)}},{key:"touch",value:function(e){this.get(e)}},{key:"put",value:function(e,t){0!==this._sizeLimit&&(this._getSize(t)>this._sizeLimit?__LOG__(3)`Blob size is larger than the limit of the whole store.`:(this.delete(e),this._add(e,t),this.schedulePurge()))}},{key:"_add",value:function(e,t){var n=new u(e,t);this._keyToNode.set(e,n);var r=this._dummyHead.next;if(null==r)throw new Error("The linked list is not constructed properly.");this._dummyHead.next=n,r.prev=n,n.prev=this._dummyHead,n.next=r,this._currentSize+=this._getSize(t),this._onAdd&&this._onAdd(e,t)}},{key:"delete",value:function(e){if(this._keyToNode.has(e)){var t=this._keyToNode.get(e);if(null!=t){this._currentSize-=this._getSize(t.value);var n=t.prev,r=t.next;n&&(n.next=r),r&&(r.prev=n),this._keyToNode.delete(e),this._onDelete&&this._onDelete(e,t.value)}}}},{key:"clear",value:function(){this._keyToNode.clear(),this._currentSize=0,this._dummyHead.next=this._dummyTail,this._dummyTail.prev=this._dummyHead,this._onClear&&this._onClear()}},{key:"purgeNow",value:function(){for(var e=this._dummyTail.prev;this._currentSize>this._sizeLimit&&e!==this._dummyHead;e=e?e.prev:null){(0,o.default)(null!=e,"The linked list is not constructed properly.");var t=e,n=t.key,r=t.value;this._shouldEvict(n,r)&&(this.delete(n),this._onEvict&&this._onEvict(n,r))}this._onPurge&&this._onPurge(this._keyToNode)}}]),e}();t.LruCache=l},21037:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.createDeflate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new d(e)},t.inflate=function(e){return(0,c.decompressSync)(e)},t.GzipWrapper=void 0;var a=r(n(89372)),i=r(n(5816)),o=r(n(33854)),s=r(n(38620)),u=r(n(44422)),l=r(n(79484)),c=n(56856),d=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,e))._chunks=[],r.ondata=function(e,t){if(r._chunks.push(e),t){var n=0;r._chunks.forEach((function(e){n+=e.length}));var a=new Uint8Array(n),i=0;r._chunks.forEach((function(e){a.set(e,i),i+=e.length})),r._result=a}},r}return(0,i.default)(n,[{key:"push",value:function(e,t){if(null!=this._result)throw new Error("Tried to push chunk to compressor after final block");e instanceof Uint8Array?(0,o.default)((0,s.default)(n.prototype),"push",this).call(this,e,t):e instanceof ArrayBuffer?(0,o.default)((0,s.default)(n.prototype),"push",this).call(this,new Uint8Array(e),t):(0,o.default)((0,s.default)(n.prototype),"push",this).call(this,(0,c.strToU8)(e),t)}},{key:"result",value:function(){if(null==this._result)throw new Error("Tried to access result before adding final block");return this._result}}]),n}(c.Gzip);t.GzipWrapper=d},98426:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomHex=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),a(t)},t.toHex=a,t.toLowerCaseHex=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];t.push(r[a>>4],r[15&a])}return String.fromCharCode.apply(String,t)},t.parseHex=function(e){var t=o(e);if(t.length%2!=0)throw new Error(`parseHex given hex "${t}" which is not a multiple of 8-bits.`);for(var n=new Uint8Array(t.length>>1),r=0,a=0;r<t.length;r+=2,a++)n[a]=i(t,r)<<4|i(t,r+1);return n.buffer},t.hexAt=i,t.hexOrThrow=o,t.bytesToBuffer=function(e){var t=e.buffer;return 0===e.byteOffset&&e.length===t.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.length)},t.bytesToDebugString=function(e){var t=!0,n=e.length;for(;t&&n;){var r=e[--n];t=32<=r&&r<127}return t?JSON.stringify(String.fromCharCode.apply(String,e)):a(e)},t.createHexLong=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o(e);return l(n,16),`${t?"-":""}0x${s(n,16)}`},t.createHexLongFrom32Bits=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=c(e),a=c(t);return`${n?"-":""}0x${r}${a}`},t.hexLongToHex=function(e){return e.substring(e.indexOf("0x")+2)},t.hexLongIsNegative=u,t.negateHexLong=function(e){return u(e)?e.slice(1):"-"+e},t.HEX_LOWER=t.NUM_HEX_IN_LONG=void 0;t.NUM_HEX_IN_LONG=16;var n=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],r=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function a(e){for(var t=[],r=0;r<e.length;r++){var a=e[r];t.push(n[a>>4],n[15&a])}return String.fromCharCode.apply(String,t)}function i(e,t){var n=e.charCodeAt(t);return n<=57?n-48:n<=70?10+n-65:10+n-97}function o(e){if(/[^0-9a-fA-F]/.test(e))throw new Error(`"${e}" is not a valid hex`);return e}function s(e,t){for(var n=t-e.length,r=e,a=0;a<n;a++)r="0"+r;return r}function u(e){return"-"===e[0]}function l(e,t){if(e.length>t)throw new Error(`"${e}" is longer than ${4*t} bits.`)}function c(e){if(e>4294967295||e<-4294967296)throw new Error("uint32ToLowerCaseHex given number over 32 bits");return s((e>=0?e:4294967296+e).toString(16),8)}t.HEX_LOWER=r},40098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inflatePhoneRegex=function(e){var t;t="number"==typeof e?String(e).split("").map((function(e){return".".repeat(Number(e))})).join(")("):e.replace(/;|[a-zA-Z]+/g,(function(e){return";"===e?")(":e.split("").map((function(e){var t=e.charCodeAt(0);return t>=97?".".repeat(t-96)+"?":".".repeat(t-64)})).join(")(")}));return`(${t})`}},72687:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.toJid=function(e){return`${e}${s}`},t.toGroupJid=function(e){return`${e}@g.us`},t.toBroadcastJid=function(e){return`${e}@broadcast`},t.groupIdFromJid=function(e){if(!e.endsWith(u))throw new Error(`groupId called with non-group jid "${e}"`);return e.slice(0,-u.length)},t.phoneNumberFromJid=l,t.interpretAsUserJid=c,t.interpretAsGroupJid=function(e){return e.endsWith(u)?e:null},t.extractUserJid=function(e){var t=e.split("@"),n=(0,a.default)(t,2),r=n[0],i=n[1];return`${r=(r=r.split(":")[0]).split(".")[0]}@${i}`},t.extractDeviceId=d,t.toDeviceJid=f,t.defaultDeviceJidForUser=function(e){return f(e,0)},t.isPrimaryDevice=function(e){return 0===d(e)},t.interpretAsDeviceId=function(e){return e},t.parseJidParts=p,t.fullFormDeviceJidString=function(e){var t=p(e),n=t.user,r=t.agent,a=void 0===r?"0":r,i=t.device,o=void 0===i?"0":i,s=t.server;return`${n}.${a}:${o}@${s}`},t.stripAgentIdFromDeviceJid=function(e){var t=p(e),n=t.user,r=t.device,a=void 0===r?"0":r,i=t.server;return`${n}:${a}@${i}`},t.extractFromJid=function(e){switch(e.jidType){case"user":return e.userJid;case"group":return e.groupJid;case"status":return e.statusJid;case"device":return e.deviceJid;case"broadcast":return e.broadcastJid;default:return(0,i.default)(e.jidType)}},t.interpretAndValidateJid=function(e){return e===o?{jidType:"status",statusJid:o}:h.test(e)?{jidType:"user",userJid:e}:m.test(e)?{jidType:"device",deviceJid:e}:_.test(e)?{jidType:"group",groupJid:e}:v.test(e)?{jidType:"broadcast",broadcastJid:e}:{jidType:"unknown"}},t.asChatJid=function(e){return e===o?null:e},t.switchOnMulticastJidType=function(e,t){if(e===o)return t.multicast(e);return g(e,{user:t.user,group:t.multicast})},t.switchOnJidType=function(e,t){if(e===o)return t.status();return g(e,{user:t.user,group:t.group})},t.switchOnChatJidType=g,t.asStatusJid=function(e){return e===o?o:null},t.asMulticastJid=function(e){return null==c(e)?e:null},t.DEFAULT_DEVICE_ID=t.GROUP_CALL_DOMAIN=t.GROUP_DOMAIN=t.USER_DOMAIN=t.STATUS_JID=void 0;var a=r(n(37613)),i=r(n(28231)),o="status@broadcast";t.STATUS_JID=o;var s="@s.whatsapp.net";t.USER_DOMAIN=s;var u="@g.us";t.GROUP_DOMAIN=u;t.GROUP_CALL_DOMAIN="@call";function l(e){if(!e.endsWith(s))throw new Error(`phoneNumberFromJid called with non-user jid "${e}"`);return e.slice(0,-s.length)}function c(e){return e.endsWith(s)?e:null}function d(e){return parseInt(e.split(":")[1],10)}function f(e,t){return`${l(e)}:${t}${s}`}function p(e){var t=e.split("@"),n=(0,a.default)(t,2),r=n[0],i=n[1],o=r.split(":"),s=(0,a.default)(o,2),u=s[0],l=s[1],c=u.split("."),d=(0,a.default)(c,2);return{user:d[0],device:l,agent:d[1],server:i}}t.DEFAULT_DEVICE_ID=0;var h=/^(0|(?!10)[1-9][0-9]{4,19})@s.whatsapp.net$/,_=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,v=/^[0-9]+@broadcast$/,m=/^(0|(?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2}))@s.whatsapp.net$/;function g(e,t){var n;if(e.endsWith(s)?n=t.user:e.endsWith(u)&&(n=t.group),!n)throw new Error(`Can not switch on chat jid ${e}`);return n(e)}},91080:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";if(null==e)throw new Error(`Unexpected null or undefined: ${t}`);return e}},31988:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.findCC=h,t.formatPhone=_,t.extractDigits=function(e){var t=e.match(/\d+/g);return null!=t?t.join(""):""},t.isPotentiallyPhoneNumber=function(e){return v.test(e)},t.isPotentiallyValid=function(e,t){if(!/^\d+$/.test(t))return!1;var n=f[e]||p(e);if(!n)return!1;return"number"==typeof n.lengths?n.lengths===t.length:n.lengths.includes(t.length)},t.formattedPhoneNumber=function(e){return _((0,u.phoneNumberFromJid)(e))},t.phoneCC=function(e){return h(e)};var a=r(n(89372)),i=r(n(5816)),o=r(n(36416)),s=n(40098),u=n(72687),l=/^(1|2[07]|3[0-469]|4[013-9]|5[1-8]|6[0-6]|7|8[1246]|9[0-58])/,c=new Map,d=function(){function e(t){var n;if((0,a.default)(this,e),Array.isArray(t)){n=t[0];var r=t[1];null!=r&&-1!==r&&(Array.isArray(r)||(r=[r]),this._leadins=r.map((function(e){return new RegExp("^("+e+")")}))),this._formatString=t[2]}else n=t;this._regex=new RegExp(`^${(0,s.inflatePhoneRegex)(n)}$`)}return(0,i.default)(e,[{key:"_testAndFormat",value:function(e){if(!this._regex.test(e)||!this._checkLeadins(e))return!1;if("string"==typeof this._formatString)return e.replace(this._regex,this._formatString);var t=this._regex.exec(e);return null!=t?t.slice(1).join(null!=this._formatString?"-":" "):void 0}},{key:"_checkLeadins",value:function(e){return!this._leadins||this._leadins.some((function(t){return t.test(e)}))}}]),e}(),f={};function p(e){var t=null!=o.default[e]?JSON.parse(`[${o.default[e]}]`):null;if(null==t)return null;var n=t.pop();return f[e]={lengths:n,formats:t.map((function(e){return new d(e)}))}}function h(e){var t=e.match(l);return t?t[0]:e.length>=3?e.substring(0,3):e}function _(e){var t=c.get(e);return null==t&&(t=function(e){var t=e.length>0&&"+"===e[0]?e.substring(1):e,n=h(t);if(!n)return t;var r=t.substring(n.length),a=f[n]||p(n);if(!a)return"+"+n+" "+r;for(var i=a.formats,o=0;o<i.length;o++){var s=i[o]._testAndFormat(r);if(null!=s&&!1!==s&&""!==s)return"+"+n+" "+s}return"+"+n+" "+r}(e),c.set(e,t)),t}var v=/^\+*[\d ()]+$/},61199:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.nullaryCacheWhilePending=function(e){var t=null,n=function(){return t||(t=(0,a.promiseCallSync)(e).finally((function(){t=null}))),t};return n.isPending=function(){return!!t},n},t.cacheWhilePending=function(e,t){var n=new Map;return function(a){var i,o=e(a),s=n.get(o);if(s)return s;try{i=r.resolve(t(a))}catch(e){i=r.reject(e)}var u=i.finally((function(){n.delete(o)}));return n.set(o,u),u}},t.preventGarbageCollection=function(e){i.add(e),e.finally((function(){i.delete(e)}))};var a=n(39951);var i=new Set},33473:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.length=function(e){var t=e.match(n);return t?t.length:0},t.substring=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=e.match(n);if(!a)return"";return a.slice(Math.max(0,t),Math.max(0,r)).join("")},t.toArray=function(e){return e.match(n)||[]},t.astralRange=void 0;var n=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;t.astralRange=n},15134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSuspiciousCharacters=function(e,t,n,s){var u,f=e.split("."),p=!1;if(f.forEach((function(e){if(p=!e.match(d)){if(u)return null;u=e}})),null==u||p)return null;for(var h=[],_=!0,v=(0,r.toArray)(u),m=0;m<v.length;m++){var g=v[m];if(!(_=_&&c(g))&&i[g]){if(h.length>=2)return null;h.push(g)}}if(_)return l(n)||l(t)||s.some((function(e){return function(e){return o.has(e)}(e)}))?null:new Set(v);if(!h.length)return null;var y=h.filter((function(e){var r=i[e];if(null==r)return!1;if(s.some((function(e){return r.includes(e)})))return!1;for(var o=new Set,u=0;u<r.length;u++){var l=a.LANGUAGE_TO_REGIONS[r[u]];if(null!=l)for(var c=0;c<l.length;c++)o.add(l[c])}return!o.has(n)&&!o.has(t)}));return y.length?new Set(y):null};var r=n(33473),a=n(91711),i={í:["ast","ksf","bas","ca","cs","dua","nl","ee","ewo","fo","fr","gl","kl","hu","is","ga","dyo","kea","kkj","nmg","lkt","lag","ln","lu","mas","nnh","jgo","pt","qu","seh","sk","es","to","vai","vi","wae","cy","fy","yav","yo"],î:["af","agq","bss","bfd","bas","bkv","btt","nl","igb","ewo","fr","fur","gaj","gby","kl","jab","atg","jbu","kkj","naq","ksh","ku","nmb","lmp","ln","mda","mg","mas","mzm","jgo","nin","ann","ro","sg","scn","srn","yer","tr","wa","cy","yav","yle"],ü:["agg","ast","az","br","ca","co","cs","nl","etr","et","fr","gl","de","tof","god","hu","tbd","geb","ksh","kup","nds","lb","arn","oc","sg","sk","es","gsw","dts","tr","tk","vo","wa","wae","fy","yll"],ċ:["mt"],ī:["agq","bss","bfd","bas","bkv","btt","ddn","igb","kjy","ich","gux","haw","jab","iby","idu","jbu","kub","nmg","lv","mda","mi","mas","mql","nin","prg","gd","to","yba","yav"],ı:["az","crh","tr"],ļ:["lv"],ł:["dsb","nv","pl","hsb"],š:["bs","hr","cs","dzg","et","fi","smn","geb","khq","ses","kun","lkt","lv","lt","dsb","se","nso","prg","sr","sh","sms","sk","sl","taq","twq","tuq","hsb","wqe","dje"],ƙ:["ckl","ank","ha","ikx","kai","hia","mbu","anc","nin","pip","tal","tan","wja","wji"],ǀ:["naq"],ǁ:["naq"],ȯ:["liv"],ɑ:["fmp","dud","tmh"],ɓ:["fub","yay","bkc","bjt","bcn","bas","bsq","bmq","fue","bys","bwr","cky","fuq","ckl","asg","dbq","dnj","dgh","dow","dua","enn","ff","gby","gba","gmm","ank","gde","gkp","jgk","ha","hbb","ikx","kkj","hig","kzr","kai","kpe","nmg","hia","ffm","mbo","mbu","mif","mzm","mua","sur","anc","fuv","nin","dgi","pbi","pip","fuf","cla","sav","srr","sld","sok","tal","tan","yer","ttr","tik","kdl","tsw","vai","vut","wja","wji","fuh","gnd"],ḍ:["tzm","kab","okr","shi","tmh","taq"],ṛ:["tzm","kab","shi"],ṭ:["tzm","kab","shi","tmh","taq"],ẉ:[],ạ:["izi","yaz","blt","vi"],ẹ:["yay","bom","bin","mfn","dzg","igb","enn","gkn","iby","ikk","ikw","izi","okr","yaz","blt","tan","tuq","vi","yo"],ị:["avu","mfn","igb","enn","iby","ig","ige","ikk","ikw","izi","okr","blt","tan","vi"]},o=new Set(["abq","ab","ady","av","az","ba","be","bs","bg","bua","ce","ckt","cu","cv","crh","dar","dng","myv","evn","gag","inh","kbd","xal","krc","kaa","kk","kjh","kca","ky","kv","koi","kpy","kum","lbe","lez","mk","mns","chm","mdf","mn","ttt","gld","yrk","nog","os","ru","rue","sr","sh","cjs","alt","tab","tg","tt","tkr","tk","tyv","ude","udm","uk","uz","mrj","sah"]),s=new Set(["374","994","375","387","359","995","7","383","996","389","373","976","382","381","992","993","380","998"]),u="авгекмнорстухшщьѕіјѡѵүһӏԁԛԝԧꚙ";function l(e){return s.has(e)}function c(e){return u.includes(e)}var d=new RegExp("^[a-z0-9-]+$")},91711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LANGUAGE_TO_REGIONS=void 0;t.LANGUAGE_TO_REGIONS={fub:["237","235","234"],af:["237","27"],agq:["237"],yay:["234"],bss:["237"],agg:["675"],ast:["34"],avu:["243","211"],az:["994"],bkc:["237","241"],ksf:["237"],bfd:["237"],bjt:["221"],bcn:["234"],bas:["237"],bsq:["231"],bkv:["234"],bom:["234"],btt:["234"],bin:["234"],bmq:["226","223"],bs:["387","385","383","382","381"],fue:["229","228"],br:["33"],bys:["234"],bwr:["234"],cky:["234"],ca:["376","33","39","34"],tzm:["212"],fuq:["234"],ckl:["234"],asg:["234"],co:["33","39"],crh:["7"],hr:["387","385","383","382","381"],mfn:["234"],cs:["420","421"],dbq:["237","234"],dnj:["225","231"],dzg:["235","227"],ddn:["229"],dgh:["234"],dow:["237"],dua:["229"],nl:["297","32","599","31","1","597"],igb:["234"],etr:["675"],enn:["234"],kgy:["675"],et:["372"],ich:["234"],ee:["229","233","228"],ewo:["237"],fo:["298"],fmp:["237"],fi:["358","46"],fr:["32","229","226","257","237","1","236","242","243","235","269","253","240","33","241","509","225","352","261","223","377","227","250","221","248","41","228","678"],fur:["39"],ff:["237","224","222","221"],gaj:["675"],gl:["34"],gby:["234"],gba:["236"],gmm:["237"],de:["43","32","49","423","352","41"],tof:["675"],god:["225"],ank:["234"],gkn:["234"],gux:["229","226","227","228"],gde:["237","234"],gkp:["224"],kl:["299"],jgk:["234"],ha:["229","237","235","233","225","227","234","249","228"],haw:["1"],hbb:["234"],hu:["36"],dud:["234"],jab:["234"],iby:["234"],is:["354"],idu:["234"],ig:["240"],ige:["234"],ikx:["256"],ikk:["234"],ikq:["234"],smn:["358"],ga:["353","44"],atg:["234"],izi:["234"],dyo:["220","221"],jbu:["237","234"],kab:["213"],kea:["238"],tbd:["675"],hig:["234"],kai:["234"],kkj:["237","236","242"],kzr:["237","235"],naq:["264"],geb:["675"],okr:["234"],ksh:["49"],ses:["223"],khq:["223"],kun:["291","251"],kup:["675"],kub:["237","234"],kpe:["224","231"],nmg:["237","240"],ku:["963","90"],lkt:["1"],hia:["234"],lag:["255"],lv:["371"],lmp:["237"],ln:["242","243"],liv:[],lt:["370"],yaz:["234"],nds:["55","49","31"],dsb:["49"],lu:["243"],lb:["32","33","49","352"],mda:["234"],mb:["261"],mt:["356"],mi:["64"],arn:["56"],mas:["254","255"],ffm:["223"],mql:["229","228"],mbo:["237"],mbu:["234"],mif:["237"],mzm:["234"],mua:["237","235"],sur:["234"],nv:["1"],anc:["234"],nnh:["237"],jgo:["237"],fuv:["237","234"],nin:["234"],dgi:["226"],se:["358","46","47"],nso:["27"],ann:["234"],oc:["33","39","377","34"],pbi:["237"],pip:["234"],pl:["48"],pt:["244","55","238","240","245","853","258","351","239","670"],prg:[],fuf:["224","223","221","232"],qu:["54","591","57","593","51"],ro:["373","40"],cla:["234"],sav:["221"],sg:["236","235","243"],gd:["44"],seh:["258"],sr:["387","385","383","382","381"],sh:["387","385","383","382","381"],srr:["220","221"],sch:["39"],sld:["226"],sms:["358"],sk:["420","421"],sl:["386"],sok:["235"],es:["54","501","591","56","57","506","53","593","503","240","502","504","52","505","507","595","51","34","1","598","58"],srn:["597"],gsw:["43","33","49","423","41"],shi:["212"],tal:["234"],tmh:["223"],taq:["226","223"],tan:["234"],twq:["227"],blt:["856","84"],yer:["234"],tuq:["235","218","227","234"],ttr:["234"],tik:["237"],to:["676"],dts:["223"],kdl:["234"],tsw:["234"],tr:["90"],tk:["993"],hsb:["49"],vai:["231","232"],vi:["855","84"],vo:[],vut:["237","234"],wja:["234"],wa:["32"],wae:["43","39","423","41"],wji:["234"],cy:["44"],fy:["31"],fuh:["229","226","227"],yba:["234"],yav:["237"],yle:["675"],yll:["675"],yo:["229","234"],dje:["227"],gnd:["237"]}},34151:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSuspiciousCharacters=function(e,t,n,o){var s=e.match(i),u=s&&s[1];if(null==u)return null;var l=(0,a.phoneCC)(n),c="whatsapp"===t?"":(0,a.phoneCC)(t),d=o.map((function(e){return e.toLowerCase()}));return(0,r.findSuspiciousCharacters)(u,c,l,d)};var r=n(15134),a=n(31988),i=/^(?:https?:\/\/)?([^/?#]+)(?:[/?#]|$)/i},90066:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.getClockSkew=function(){return v},t.setClockSkew=function(e){v=e},t.toHttpHeaderDate=function(e){return A(e).toUTCString()},t.castToUnixTime=m,t.castLongIntToUnixTime=function(e){return"number"!=typeof e?(0,s.hexLongIsNegative)(e)?h:p:m(e)},t.isOverflowTime=function(e){return e<h||e>p},t.timeoutFor=function(e,t){var n=y(),r=Math.max(e+t-n,0);return Math.min(1e3*r,~(1<<31))},t.futureUnixTime=function(e,t){var n=null!=t?t:y();return m(Math.ceil(n+Math.max(e,0)))},t.pastUnixTime=function(e,t){var n=null!=t?t:y();return m(Math.ceil(n-Math.max(e,0)))},t.cappedMillisecondsUntil=g,t.delayUntil=function(e){var t=g(e);return new r((function(e){setTimeout(e,t)}))},t.unixTime=y,t.midnight=function(){return m((new Date).setHours(0,0,0,0)/1e3-v)},t.midnightOn=function(e){return m(A(e).setHours(0,0,0,0)/1e3-v)},t.unixTimeMs=function(){return Date.now()-1e3*v},t.secondsUntil=E,t.isInFuture=function(e){return E(e)>0},t.monotonicTime=S,t.monotonicTimeSince=b,t.oldest=function(e,t){return e<t?e:t},t.timeSince_USE_ONLY_IF_APPROVED=function(e){return Math.max(y()-e,0)},t.unskewedDate_USE_ONLY_IF_APPROVED=function(){return new Date},t.happenedWithinAt=w,t.happenedWithin=function(e,t){return w(y(),e,t)},t.toDate=A,t.sameDay=function(e,t){if(Math.abs(e-t)>l)return!1;var n=_.time===e?_.day:A(e+v).getDay(),r=_.time===t?_.day:A(t+v).getDay();return _.time=t,_.day=r,n===r},t.isWithinNext24h=function(e){return e-y()<=l},t.MonotonicTimer=t.MAX_INT=t.DUMMY_UNIXTIME=t.WEEK_MILLISECONDS=t.DAY_MILLISECONDS=t.HOUR_MILLISECONDS=t.YEAR_SECONDS=t.WEEK_SECONDS=t.DAY_SECONDS=t.HOUR_SECONDS=void 0;var i=a(n(89372)),o=a(n(5816)),s=n(98426),u=3600;t.HOUR_SECONDS=u;var l=86400;t.DAY_SECONDS=l;t.WEEK_SECONDS=604800;t.YEAR_SECONDS=31536e3;var c=36e5;t.HOUR_MILLISECONDS=c;var d=864e5;t.DAY_MILLISECONDS=d;t.WEEK_MILLISECONDS=6048e5;var f=1<<31;t.DUMMY_UNIXTIME=f;var p=2147483647;t.MAX_INT=p;var h=-2147483647,_={time:0,day:-4},v=0;function m(e){return Math.max(h,Math.min(0|e,p))}function g(e){var t=Math.max(e-y(),0);return Math.min(1e3*t,~(1<<31))}function y(){return m(Date.now()/1e3-v)}function E(e){return Math.max(e-y(),0)}function S(){return performance.now()}function b(e){return Math.floor(performance.now()-e)}var T=function(){function e(){(0,i.default)(this,e);var t=S();this._initTime=t,this._startTime=t}return(0,o.default)(e,[{key:"reset",value:function(){this._startTime=S()}},{key:"elapsed",value:function(){return b(this._startTime)}},{key:"cumulative",value:function(){return b(this._initTime)}}]),e}();function w(e,t,n){return Math.abs(e-t)<=n}function A(e){return new Date(1e3*e)}t.MonotonicTimer=T},28045:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.ParsableXmlNode=void 0;var a=r(n(89372)),i=r(n(5816)),o=n(57808),s=function(){function e(t,n){var r=this;(0,a.default)(this,e),this._name=t,this._node=n,this._children=Array.isArray(n.content)?n.content.map((function(e){return new r.constructor(t,e)})):null}return(0,i.default)(e,[{key:"name",value:function(){return this._name}},{key:"hasAttr",value:function(e){return Object.prototype.hasOwnProperty.call(this._node.attrs,e)}},{key:"assertTag",value:function(e){this._node.tag!==e&&this.throw(`to be <${e}>`)}},{key:"tag",value:function(){return this._node.tag}},{key:"maybeChild",value:function(e){var t=this._children;if(!t)return null;for(var n=0;n<t.length;n++)if(t[n].tag()===e)return t[n];return null}},{key:"hasChild",value:function(e){return!!this.maybeChild(e)}},{key:"child",value:function(e){var t=this.maybeChild(e);return t||this.throw(`to have child <${e}>`)}},{key:"assertAttr",value:function(e,t){var n=this.attrString(e);n!==t&&this.throw(`to have "${e}"="${t}", but instead has "${n}"`)}},{key:"attrString",value:function(e){return Object.prototype.hasOwnProperty.call(this._node.attrs,e)?this.decodeAsString(this._node.attrs[e]):this.throw(`to have attribute "${e}"`)}},{key:"forEachAttributeKey",value:function(e){var t=this._node.attrs;Object.keys(t).forEach((function(t){return e(t)}))}},{key:"maybeAttrString",value:function(e){return this.hasAttr(e)?this.decodeAsString(this._node.attrs[e]):null}},{key:"maybeAttrInt",value:function(e,t,n){return this.hasAttr(e)?this.attrInt(e,t,n):null}},{key:"attrEnumValues",value:function(e,t){var n=new Set(t),r=this.attrString(e);if(!n.has(r)){var a=Array.from(n).join("|");return this.throw(`to have "${e}"={${a}} but has value "${r}"`)}return r}},{key:"attrEnum",value:function(e,t){var n=this.attrString(e);if(!Object.prototype.hasOwnProperty.call(t,n)){var r=Object.keys(t).join("|");return this.throw(`to have "${e}"={${r}} but has value "${n}"`)}return t[n]}},{key:"attrEnumOrDefault",value:function(e,t,n){return this.hasAttr(e)?this.attrEnum(e,t):n}},{key:"attrInt",value:function(e,t,n){var r=this.attrString(e),a=parseInt(r,10);return Number.isNaN(a)?this.throw(`to have "${e}"={integer} but has value "${r}"`):void 0!==t&&a<t?this.throw(`to have "${e}"={at least ${t}} but has value ${a}`):void 0!==n&&a>=n?this.throw(`to have "${e}"={below ${n}} but has value ${a}`):a}},{key:"forEachChild",value:function(e){var t=this._children;if(t)t.forEach(e);else if(null!=this._node.content)return this.throw("to have children")}},{key:"forEachChildWithTag",value:function(e,t){this.forEachChild((function(n){n.tag()===e&&t(n)}))}},{key:"mapChildren",value:function(e){var t=this._children;return t||null==this._node.content?t?t.map(e):[]:this.throw("to have children")}},{key:"mapChildrenWithTag",value:function(e,t){var n=this._children;return n||null==this._node.content?n?n.filter((function(t){return t.tag()===e})).map(t):[]:this.throw("to have children")}},{key:"mapFirstChild",value:function(e){var t=this._children;return t&&0!==t.length?e(t[0]):this.throw("to have children")}},{key:"hasContent",value:function(){return!this._children&&!!this._node.content}},{key:"hasChildren",value:function(){return null!=this._children}},{key:"contentUint",value:function(e){for(var t=this.contentBytes(e),n=0,r=0;r<e;r++)n=256*n+t[r];return n}},{key:"contentBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this._children)return this.throw("to have binary content, but has children instead");if(null!=this._node.content){var t=this._node.content;return-1!==e&&t.length!==e?this.throw(`to be ${e} bytes, but got ${t.length} instead`):t}return this.throw("to have content")}},{key:"contentString",value:function(){return this._children?this.throw("to have string content, but has children instead"):null!=this._node.content?this._node.content:this.throw("to have content")}},{key:"contentEnum",value:function(e){var t=this.contentString();if(!Object.prototype.hasOwnProperty.call(e,t)){var n=Object.keys(e).join("|");return this.throw(`to have content {${n}} but has value "${t}"`)}return e[t]}},{key:"decodeAsString",value:function(e){if("string"!=typeof e)throw new Error(`decodeAsString: attribute is ${typeof e} not a string: ${e}`);return e}},{key:"throw",value:function(e){throw new o.XmlParsingFailure(this._name,`expected <${this._node.tag}> ${e}`)}},{key:"toString",value:function(){return this._node.toString()}}]),e}();t.ParsableXmlNode=s},58094:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.attrsToString=l,t.uint8ArrayToDebugString=c,t.XmlNode=void 0;var a=r(n(89372)),i=r(n(5816)),o=n(98426),s={},u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,a.default)(this,e),this.tag=t,this.attrs=n,this.content=r}return(0,i.default)(e,[{key:"toString",value:function(){var e="<"+this.tag;e+=l(this.attrs);var t=this.content;return Array.isArray(t)?e+=`>${t.map(String).join("")}</${this.tag}>`:t instanceof Uint8Array?e+=`>${c(t)}</${this.tag}>`:e+=null!=t?`>${String(t)}</${this.tag}>`:" />",e}}]),e}();function l(e){for(var t=Object.keys(e),n="",r=0;r<t.length;r++){var a=t[r];n+=` ${a}="${e[a].toString()}"`}return n}function c(e){return 0===e.length?"\x3c!-- empty binary --\x3e":e.length<50?(0,o.bytesToDebugString)(e):`\x3c!-- ${e.length} bytes --\x3e`}t.XmlNode=u},57808:(e,t,n)=>{"use strict";var r=n(7914);Object.defineProperty(t,"__esModule",{value:!0}),t.XmlParsingFailure=void 0;var a=r(n(89372)),i=r(n(5816)),o=function(){function e(t,n){(0,a.default)(this,e),this.parser=t,this.reason=n}return(0,i.default)(e,[{key:"toString",value:function(){return`XmlParsingFailure: ${this.parser}: ${this.reason}`}}]),e}();t.XmlParsingFailure=o},76859:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns:/g,"~::~xmlns:").replace(/\s*xmlns=/g,"~::~xmlns=").split("~::~"),n=t.length,r=!1,a=0,i="",o=0,s=["\n"];for(o=0;o<100;o++)s.push(s[o]+"    ");var u=function(e,t){var n=/^<[\w:\-.,]+/.exec(e[t-1]),r=/^<\/[\w:\-.,]+/.exec(e[t]);return null!=n&&null!=r&&n[0]===r[0]};for(o=0;o<n;o++)t[o].search(/<!/)>-1?(i+=s[a]+t[o],r=!0,(t[o].search(/-->/)>-1||t[o].search(/\]>/)>-1||t[o].search(/!DOCTYPE/)>-1)&&(r=!1)):t[o].search(/-->/)>-1||t[o].search(/\]>/)>-1?(i+=t[o],r=!1):u(t,o)?(i+=t[o],r||a--):t[o].search(/<\w/)>-1&&-1===t[o].search(/<\//)&&-1===t[o].search(/\/>/)?i=i+=r?t[o]:s[a++]+t[o]:t[o].search(/<\w/)>-1&&t[o].search(/<\//)>-1?i=i+=r?t[o]:s[a]+t[o]:t[o].search(/<\//)>-1?i=i+=r?t[o]:s[--a]+t[o]:t[o].search(/\/>/)>-1?i=i+=r?t[o]:s[a]+t[o]:t[o].search(/<\?/)>-1||t[o].search(/xmlns:/)>-1||t[o].search(/xmlns=/)>-1?i+=s[a]+t[o]:i+=t[o];return"\n"===i[0]?i.slice(1):i}},14011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryBusinessProfile=function(e){return(0,a.queryBusinessProfile)(e)},t.queryBusinessCategories=function(e){return e===r.BUSINESS_CATEGORY_EMPTY_STR_ID?(0,i.queryBusinessCategories)(""):(0,i.queryBusinessCategories)(e)},t.updateCartEnabled=function(e){var t=n(93250).default;return(0,a.updateCartEnabled)(e).then((function(e){var n=t.getValid((0,o.getMeUser)()),r=null==n?void 0:n.profileOptions;n&&r&&(r.cartEnabled=e,t.add(n,{merge:!0}))}))};var r=n(4781),a=n(19396),i=n(35359),o=n(71701)},43179:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateEphemeralSettingTimestamp=v,t.changeEphemeralDuration=function(e,t){if(e.isGroup)return __LOG__(4,void 0,new Error,!0)`chat.changeEphemeralDuration should not be called for group ${e.id.toString()}`,SEND_LOGS("change-ephemeral-duration"),r.resolve();var n=e.contact;if(n.isUser&&n.isContactBlocked)return r.reject(new s.default("changing ephemeral setting for contact is blocked",n));var a={id:new d.default({id:(0,f.default)(),remote:e.id,fromMe:!0}),from:(0,u.getMaybeMeUser)(),to:e.id,t:i.default.globalUnixTime(),type:o.default.MSG_TYPE.PROTOCOL,subtype:"ephemeral_setting",ephemeralDuration:t,local:!0,isNewMsg:!0,self:"out"},l=null==e.ephemeralSettingTimestamp?1:e.ephemeralSettingTimestamp+1;return v(e,l),(0,p.addAndSendMsgToChat)(e,a)[1].then((function(){return(0,_.updateLocal)(e.id,{ephemeralDuration:t}).then((function(){e.ephemeralDuration=t,__LOG__(2)`chat.changeEphemeralDuration chatId=${e.id.toString()} ephemeralDuration=${t}`}))}))},t.maybeUpdateEphemeralSetting=function(e,t,n){var r,a,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.isGroup)return __LOG__(4,void 0,new Error,!0)`chat.maybeUpdateEphemeralSetting should not be called for group ${e.id.toString()}`,SEND_LOGS("handle-ephemeral-sync-response"),!1;if(!(0,c.isEphemeralDurationAllowed)(t))return __LOG__(2)`chat.maybeUpdateEphemeralSetting called with invalid setting ${t} seconds for chat ${e.id.toString()}`,!1;var o=null!==(r=e.ephemeralSettingTimestamp)&&void 0!==r?r:0,s=null!==(a=e.ephemeralDuration)&&void 0!==a?a:0,u=e.id,d=(0,h.shouldUpdateEphemeralSetting)({oldDuration:s,oldSettingTimestamp:o,newDuration:t,newSettingTimestamp:n,chatId:u});d&&(0,_.updateLocal)(e.id,{ephemeralDuration:t,ephemeralSettingTimestamp:n}).then((function(){s!==t&&i&&(0,l.generateEphemeralSystemMessage)(e,t),e.ephemeralDuration=t,e.ephemeralSettingTimestamp=n,__LOG__(2)`chat.maybeUpdateEphemeralSetting updated chatId=${e.id.toString()} ephemeralDuration=${t} ephemeralSettingTimestamp=${n}`}));return d};var i=a(n(79140)),o=a(n(34263)),s=a(n(70167)),u=n(71701),l=n(54168),c=n(53020),d=a(n(5315)),f=a(n(75554)),p=n(83537),h=n(62828),_=n(55182);function v(e,t){if(e.isGroup)return __LOG__(4,void 0,new Error,!0)`chat.updateEphemeralSettingTimestamp should not be called for group ${e.id.toString()}`,void SEND_LOGS("update-ephemeral-setting-timestamp");(0,_.updateLocal)(e.id,{ephemeralSettingTimestamp:t}).then((function(){e.ephemeralSettingTimestamp=t,__LOG__(2)`chat.updateEphemeralSettingTimestamp chatId=${e.id.toString()} ephemeralSettingTimestamp=${t}`}))}},29843:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markComposing=function(e){return function(e){if((e.presence.isOnline||e.isGroup)&&!e.typing){var t=e.id;(0,i.sendChatStateComposing)(t).catchType(s.ServerStatusCodeError,(function(e){e.status>=400&&__LOG__(3)`models:chat send presence composing error ${t.toString()}`})).catchTypes(s.WebdDrop,u.ProtoVersionUndefined,(function(){})),e.presenceResendTimerId=setTimeout((function(){return f(e)}),o.default.PRESENCE_RESEND_WAIT)}e.typing=!0,e.pausedTimerId&&clearTimeout(e.pausedTimerId);e.pausedTimerId=setTimeout((function(){return d(e)}),o.default.SEND_PAUSED_WAIT)}((0,c.unproxy)(e))},t.markPaused=function(e){return d((0,c.unproxy)(e))},t.markRecording=function(e){return function(e){if((e.presence.isOnline||e.isGroup)&&!e.recording){var t=e.id;(0,i.sendChatStateRecording)(t).catchType(s.ServerStatusCodeError,(function(e){e.status>=400&&__LOG__(3)`models:chat send presence recording error ${t.toString()}`})).catchTypes(s.WebdDrop,u.ProtoVersionUndefined,(function(){})),e.presenceResendTimerId=setTimeout((function(){return f(e)}),o.default.PRESENCE_RESEND_WAIT)}e.pausedTimerId&&(clearTimeout(e.pausedTimerId),e.unset("pausedTimerId"));e.recording=!0,e.typing=!1}((0,c.unproxy)(e))},t.sendPresenceAvailable=function(){(0,l.setPresenceAvailable)()},t.sendPresenceUnavailable=function(){(0,l.setPresenceUnavailable)()},t.presenceOnlineChanged=function(e){e.presence.isOnline?f(e):e.presenceResendTimerId&&(clearTimeout(e.presenceResendTimerId),e.unset("presenceResendTimerId"))},t.clearPresence=function(e){e.presenceResendTimerId&&(clearTimeout(e.presenceResendTimerId),e.unset("presenceResendTimerId"));e.pausedTimerId&&(clearTimeout(e.pausedTimerId),e.unset("pausedTimerId"));e.typing=!1};var i=n(98811),o=a(n(34263)),s=n(14650),u=r(n(98569)),l=n(67910),c=n(89305);function d(e){if((e.presence.isOnline||e.isGroup)&&(e.typing||e.recording)){var t=e.id;(0,i.sendChatStatePaused)(t).catchType(s.ServerStatusCodeError,(function(e){e.status>=400&&__LOG__(3)`models:chat send presence paused error ${t.toString()}`})).catchTypes(s.WebdDrop,u.ProtoVersionUndefined,(function(){}))}e.presenceResendTimerId&&(clearTimeout(e.presenceResendTimerId),e.unset("presenceResendTimerId")),e.pausedTimerId&&(clearTimeout(e.pausedTimerId),e.unset("pausedTimerId")),e.typing=e.recording=!1}function f(e){var t=e.id;if(e.recording)(0,i.sendChatStateRecording)(t).catchType(s.ServerStatusCodeError,(function(e){e.status>=400&&__LOG__(3)`models:chat send presence resend recording error ${t.toString()}`})).catchTypes(s.WebdDrop,u.ProtoVersionUndefined,(function(){}));else{if(!e.typing)return void e.unset("presenceResendTimerId");(0,i.sendChatStateComposing)(t).catchType(s.ServerStatusCodeError,(function(e){e.status>=400&&__LOG__(3)`models:chat send presence resend composing error ${t.toString()}`})).catchTypes(s.WebdDrop,u.ProtoVersionUndefined,(function(){}))}e.presenceResendTimerId=setTimeout((function(){return f(e)}),o.default.PRESENCE_RESEND_WAIT)}},46823:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendClear=function(e,t){return _((0,p.unproxy)(e),t)},t.clearChat=v;var a=r(n(87757)),i=r(n(48926)),o=r(n(67294)),s=n(83180),u=n(33589),l=r(n(34541)),c=n(14650),d=r(n(22021)),f=r(n(89115)),p=n(89305),h=n(55182);function _(e,t){var r=e.promises;if(r.sendClear)return r.sendClear;var p=e.getLastMsgKeyForAction(),m=r.sendClear=(0,u.sendClear)(e,p,t),g=new s.ActionType(f.default.t(61)),y=m.then(function(){var t=(0,i.default)(a.default.mark((function t(){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(54654).ConversationEndOfHistoryTransferModelPropType,e.endOfHistoryTransferType=r.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY,t.next=4,(0,h.updateLocal)(e.id,{endOfHistoryTransferType:r.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY});case 4:return t.abrupt("return",d.default.supportsFeature(d.default.F.MD_BACKEND)?new s.ActionType(f.default.t(60)):new s.ActionType(f.default.t(59)));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()).catchType(c.ServerStatusCodeError,(function(e){if(e.status>=400)return new s.ActionType(f.default.t(58))})).catch((function(){return __LOG__(3)`models:chat:sendClear dropped`,new s.ActionType(f.default.t(58),{actionText:f.default.t(201),actionHandler:function(){return _(e,t)}})}));return l.default.openToast(o.default.createElement(s.ActionToast,{id:(0,s.genId)(),initialAction:g,pendingAction:y})),m.then((function(n){n._duplicate||v(e,t)})).catchType(c.ServerStatusCodeError,(function(){})).finally((function(){r.sendClear=null}))}function v(e,t){if(e){var n=e.getLastMsgKeyForAction(),r=n?e.msgs.get(n):void 0;e.deleteMsgsBeforeMsgInclusive(r,t)}}},83537:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addAndSendMsgToChat=function(e,t,a){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=r.resolve(t).then((function(t){var a=n(66312).default,i=(0,o.default)({},t);if(h.default.bspSystemMessageEnabled){var p=(0,f.getContactPrivacyMode)(e.id);null!=p&&(i.privacyModeWhenSent=p)}var _=a.add(i)[0];if(_)return(0,d.storeMessages)([i],e.id).then((function(){return _.type===u.default.MSG_TYPE.GROUPS_V4_INVITE?(0,c.persistGroupInviteV4Msg)(_.id.toString(),{id:_.id.toString(),from:_.from.toString(),to:_.to.toString(),groupId:_.inviteGrp,expiration:parseInt(_.inviteCodeExp,10),expired:s.default.globalUnixTime()>=parseInt(_.inviteCodeExp,10)}):r.resolve()})).then((function(){return _.waitForPrep().then((function(){return _}))}));throw new l.ModelCreateError("Msg",i)})),p=e.addQueue.enqueue(i).then((function(t){return e.msgs.add(t)[0]})),_=a?p.then(a).then((function(){return p})):p,m=v(e,_);return[p,m]}((0,_.unproxy)(e),t,a)},t.resendMsgToChat=function(e,t){return v((0,_.unproxy)(e),t)};var o=i(n(81109)),s=i(n(79140)),u=i(n(34263)),l=a(n(98569)),c=n(29364),d=n(69449),f=n(6603),p=n(79603),h=(n(67298),i(n(63056))),_=n(89305);function v(e,t){return e.sendQueue.enqueue(t).then((function(e){return(0,p.sendMsgRecord)(e)}))}},82565:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSpamReport=function(e,t){return y((0,m.unproxy)(e),t)},t.sendNotSpam=function(e,t){return E((0,m.unproxy)(e),t)},t.sendSpamBlockClear=function(e){return function(e){var t=e.promises,n=e.isGroup,a=e.contact;if(t.reportSpamBlockClear)return t.reportSpamBlockClear;if(n)return r.reject(new d.ActionError);var i=y(e,v.SpamFlow.Block);return t.reportSpamBlockClear=i.then((function(){return(0,u.blockContact)(a)})).then((function(){return(0,h.sendClear)(e,!1)})).catch((function(){})).finally((function(){t.reportSpamBlockClear=null})),t.reportSpamBlockClear}((0,m.unproxy)(e))},t.sendSpamExitClear=function(e){return function(e){var t,n=e.promises,a=e.isGroup,i=e.isReadOnly,o=e.msgs;if(n.reportSpamExitClear)return n.reportSpamExitClear;if(!a)return r.reject(new d.ActionError);var s=y(e,v.SpamFlow.Block);if(i)t=s;else{var u=(0,f.sendExitGroup)(e),l=(0,g.default)(o,"change:last",(function(e){return e.isGroupLeave()}));t=r.all([s,u,l])}return n.reportSpamExitClear=t.then((function(){return(0,h.sendClear)(e,!1)})).catch((function(){})).finally((function(){n.reportSpamExitClear=null})),n.reportSpamExitClear}((0,m.unproxy)(e))};var o=i(n(67294)),s=n(83180),u=n(99703),l=i(n(34541)),c=n(14650),d=a(n(98569)),f=n(22383),p=i(n(89115)),h=n(46823),_=n(13622),v=n(97849),m=n(89305),g=i(n(61110));function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,s.genId)(),r=e.promises;if(r.sendSpamReport)return r.sendSpamReport;var a=r.sendSpamReport=(0,_.sendSpamReport)(e,t),i=new s.ActionType(p.default.t(194)),u=a.then((function(){return new s.ActionType(p.default.t(196))})).catchType(c.ServerStatusCodeError,(function(){return new s.ActionType(p.default.t(195))})).catch((function(){return __LOG__(3)`models:chat:sendSpamReport dropped`,new s.ActionType(p.default.t(195),{actionText:p.default.t(201),actionHandler:function(){return y(e,t,n)}})}));return l.default.openToast(o.default.createElement(s.ActionToast,{id:n,initialAction:i,pendingAction:u})),a.finally((function(){r.sendSpamReport=null}))}function E(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,s.genId)(),a=e.promises,i=e.notSpam;if(i)return r.resolve();if(a.sendNotSpam)return a.sendNotSpam;var u=a.sendNotSpam=(0,_.sendNotSpam)(e);if(t){var d=new s.ActionType(p.default.t(141)),f=u.then((function(){return new s.ActionType(p.default.t(143))})).catchType(c.ServerStatusCodeError,(function(){return new s.ActionType(p.default.t(142))})).catch((function(){return __LOG__(3)`models:chat:sendNotSpam dropped`,new s.ActionType(p.default.t(142),{actionText:p.default.t(201),actionHandler:function(){return E(e,t,n)}})}));l.default.openToast(o.default.createElement(s.ActionToast,{id:n,initialAction:d,pendingAction:f}))}return u.then((function(){e.set({notSpam:!0})})).finally((function(){e.isTrusted(),a.sendNotSpam=null}))}},45909:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.unstarAllMessages=function(e,t){return h(e,t?(0,p.unproxy)(t):t)};var i=a(n(67294)),o=n(83180),s=a(n(34541)),u=n(14650),l=a(n(89115)),c=n(86729),d=a(n(20243)),f=r(n(76408)),p=n(89305);function h(e,t){var r=n(26671).default,a=t?t.promises:r.promises,p=t?t.id:void 0;if(a.sendUnstarAll)return a.sendUnstarAll;var _=a.sendUnstarAll=(0,c.sendUnstarAll)(e,p),v=new o.ActionType(l.default.t(158)),m=_.then((function(){return new o.ActionType(l.default.t(156))})).catchType(u.ServerStatusCodeError,(function(e){if(e.statusCode>=400)return new o.ActionType(l.default.t(152))})).catch((function(){return __LOG__(3)`models:chat:sendUnstarAll dropped`,new o.ActionType(l.default.t(152),{actionText:l.default.t(201),actionHandler:function(){return h(e,t)}})}));return s.default.openToast(i.default.createElement(o.ActionToast,{id:(0,o.genId)(),initialAction:v,pendingAction:m})),_.then((function(){e.forEach((function(e){e.set("star",!1)})),t?(0,f.removeStarredMsgs)(e):(f.default.reset(),d.default.reset(),r.forEach((function(e){e.starredMsgs&&e.starredMsgs.reset()})))})).finally((function(){a.sendUnstarAll=null}))}},54865:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markUnread=function(e,t){return T((0,m.unproxy)(e),t)},t.sendSeen=E,t.markSeen=S,t.markUnseen=b,t.updateUnreadCountMD=C;var o=i(n(87757)),s=i(n(48926)),u=i(n(67294)),l=n(83180),c=i(n(34541)),d=i(n(34263)),f=n(14650),p=a(n(98569)),h=i(n(22021)),_=i(n(89115)),v=n(67616),m=n(89305),g=i(n(14094)),y=n(48399);function E(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return w((0,m.unproxy)(e),t).catchType(f.ServerStatusCodeError,(function(e){__LOG__(3)`sendSeen: got status ${e.status}`}))}function S(e,t,n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];String(t);var a=null;null!=t?t>0&&t<=e.unreadCount?(a=e.unreadCount-t,String(a)):-1===t&&e.unreadCount<=0&&(a=0,String(a)):(a=0,String(a));return(null==a?r.resolve():(0,v.markConversationSeen)(e.id,a)).then((function(){if(null!=t&&n){var r=e.pendingSeenCount-t;e.pendingSeenCount=Math.max(0,r)}null!=a&&(e.unreadCount=a),e.unreadMsgAnchor=void 0,e.markedUnread=!1}))}((0,m.unproxy)(e),t,n)}function b(e){!function(e){0===e.unreadCount&&(e.active&&(e.markedUnread=!0),(0,v.markConversationUnseen)(e.id).then((function(){e.unreadCount=d.default.MARKED_AS_UNREAD})))}((0,m.unproxy)(e))}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.genId)();t?e.active&&(e.markedUnread=!0):e.markedUnread=!1;var r=e.promises;if(r.markUnread)return r.markUnread;var a=r.markUnread=t?A(e):w(e),i=t?new l.ActionType(_.default.t(74)):new l.ActionType(_.default.t(73)),o=a.then((function(){var r=t?_.default.t(72):_.default.t(71);return new l.ActionType(r,{actionText:_.default.t(205),actionHandler:function(){return T(e,!t,n)}})})).catchType(f.ServerStatusCodeError,(function(e){if(e.status>=400)return t?new l.ActionType(_.default.t(70)):new l.ActionType(_.default.t(69));throw new Error("invalid response status")})).catch((function(){var r=t?_.default.t(70):_.default.t(69);return new l.ActionType(r,{actionText:_.default.t(201),actionHandler:function(){return T(e,t,n)}})}));return c.default.openToast(u.default.createElement(l.ActionToast,{id:n,initialAction:i,pendingAction:o})),a.then((function(){})).catchType(f.ServerStatusCodeError,(function(e){__LOG__(3)`markUnread: got status ${e.status}`})).finally((function(){r.markUnread=null}))}function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.markedUnread||0===e.unreadCount)return String(e.markedUnread),e.unreadCount,r.resolve();if(!g.default.available&&t)return e.listenToOnce(g.default,"change:available",(function(){return E(e)})),r.resolve();e.unreadCount,e.pendingSeenCount;var n=e.unreadCount-e.pendingSeenCount,a=-1===e.unreadCount&&-1===n;if(n<=0&&!a)return r.resolve();e.disableUnreadAnchor=!0,e.pendingSeenCount=e.unreadCount,e.pendingSeenCount;var i=function(){e.pendingSeenCount=e.pendingSeenCount-n,e.pendingSeenCount,e.pendingSeenCount<0&&(__LOG__(3)`models:chat:sendSeen unread ${e.unreadCount} pending: ${e.pendingSeenCount} delta: ${n}`,e.pendingSeenCount=0)},o=e.getLastMsgKeyForAction();return(0,v.sendConversationSeen)(e,o,n).then((function(t){h.default.supportsFeature(h.default.F.MD_BACKEND)?C(e,n):t._duplicate?i():S(e,n,!0)})).catchType(f.ServerStatusCodeError,(function(e){return i(),r.reject(e)})).catchTypes(f.WebdDrop,p.ProtoVersionUndefined,(function(){i(),__LOG__(3)`models:chat:sendConversationSeen dropped`}))}function A(e){var t=e.getLastMsgKeyForAction();return(0,v.sendConversationUnseen)(e.id,t).then((function(){b(e)})).catchType(f.ServerStatusCodeError,(function(t){return e.markedUnread=!1,r.reject(t)}))}function C(){return O.apply(this,arguments)}function O(){return(O=(0,s.default)(o.default.mark((function e(t,n){var r,a,i,s,u=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(u.length>2&&void 0!==u[2])||u[2],e.next=3,(0,y.getChatMeta)(t.id);case 3:a=e.sent,i=a.unreadCount,t.unreadCount,t.unreadCount=i,t.unreadMsgAnchor=void 0,t.markedUnread=!1,r&&(s=t.pendingSeenCount-n,t.pendingSeenCount=Math.max(0,s));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},57222:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setPushnameLocally=function(e){a.default.pushname=e,(0,i.setPushname)(e)};var a=r(n(93743)),i=n(71701)},54872:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateDeviceNotifications=p,t.createAndStoreDeviceNotifications=function(){return _.apply(this,arguments)},t.bulkGenerateDeviceNotifications=function(){return v.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(43883),u=n(52300),l=n(75793),c=n(71701),d=n(69841),f=a(n(34263));function p(){return h.apply(this,arguments)}function h(){return(h=(0,o.default)(i.default.mark((function e(t,n,r){var a,o,d,p,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={notifications:[],chatIds:[]},(0,c.getGlobalSecurityNotifications)()){e.next=3;break}return e.abrupt("return",a);case 3:if(n.length>0||r.length>0){e.next=5;break}return e.abrupt("return",a);case 5:if(o=[],!t.equals((0,c.getMeUser)())){e.next=20;break}return e.prev=7,e.next=10,(0,s.getChatTable)().all();case 10:e.sent.forEach((function(e){e.id!==f.default.STATUS_WID&&o.push((0,l.createWid)(e.id))})),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(7),__LOG__(4,!0,new Error,!0)`get all from chat table failed`,SEND_LOGS("get all from chat table failed when creating device notification"),new Error("get all from chat table failed");case 18:e.next=35;break;case 20:return e.prev=20,e.next=23,(0,s.getChatTable)().get(String(t));case 23:return d=e.sent,e.next=26,(0,s.getParticipantTable)().equals(["participants"],String(t));case 26:p=e.sent,o=p.map((function(e){return(0,l.createWid)(e.groupId)})),d&&o.push((0,l.createWid)(d.id)),e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(20),__LOG__(4,!0,new Error,!0)`get chats failed`,SEND_LOGS("get chats failed when creating device notification"),new Error("get chays failed");case 35:return h=o.map((function(e){return(0,u.genDeviceNotificationMsg)(e,t,n,r)})),a.notifications=h,a.chatIds=o.map(String),e.abrupt("return",a);case 39:case"end":return e.stop()}}),e,null,[[7,14],[20,31]])})))).apply(this,arguments)}function _(){return(_=(0,o.default)(i.default.mark((function e(t,n,a){var o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t,n,a);case 2:return o=e.sent,s=o.notifications,e.next=6,r.all(s.map((function(e){return(0,d.storeMessageInTransaction)([e])})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,o.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=new Set,!(0,c.getGlobalSecurityNotifications)()){e.next=7;break}return e.next=5,r.all(t.map((function(e){var t=e.wid,n=e.added,a=e.removed;return e.isNewRecord?r.resolve(null):p(t,n,a)})));case 5:e.sent.forEach((function(e){e&&(n=n.concat(e.notifications),e.chatIds.forEach((function(e){return a.add(e)})))}));case 7:if(!(n.length>0)){e.next=11;break}return e.abrupt("return",{notifications:n,chatIds:Array.from(a)});case 11:return e.abrupt("return",{notifications:[],chatIds:[]});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},11360:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleADVDeviceUpdateForMessage=function(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(l.default.supportsFeature(l.default.F.MD_BACKEND))return T(e,t,n,a,i,o);return r.reject(new Error("This call is only supported in MD mode"))},t.handleADVDeviceUpdate=function(e){var t=e.wid,n=e.devices,a=e.type,i=void 0===a?"update":a;if(l.default.supportsFeature(l.default.F.MD_BACKEND))return function(){return b.apply(this,arguments)}(t,n,i);return r.reject(new Error("This call is only supported in MD mode"))},t.handleADVDeviceSyncResult=function(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return function(){return A.apply(this,arguments)}(e);return r.reject(new Error("This call is only supported in MD mode"))};var i=a(n(87757)),o=a(n(63038)),s=a(n(81109)),u=a(n(48926)),l=a(n(22021)),c=n(43883),d=n(1018),f=n(47065),p=n(98492),h=n(53939),_=n(20290),v=n(91157),m=n(68691),g=a(n(34263)),y=n(48935),E=n(75793),S=a(n(46797));function b(){return(b=(0,u.default)(i.default.mark((function e(t,n,r){var a,u,l,E,S,b,T,w,A,C,O,M,I,k,P,R,D,N,L;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.waSignalStore.getIdentity((0,f.createSignalAddress)(t).toString());case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(u=(0,y.toCurveKeyPubKey)((0,f.strToBuffer)(a)),l=n.deviceList,E=n.keyIndex,null!=l&&null!=E){e.next=9;break}return e.abrupt("return");case 9:return S=E.ts,b=E.signedKeyIndexBytes,e.next=12,(0,c.getDeviceListTable)().get(t.user);case 12:if(!((T=e.sent)&&!T.deleted&&(0,_.numberOrThrowIfTooLarge)(T.timestamp)>E.ts)){e.next=16;break}return __LOG__(2)`getADVDeviceSignedKeyIndexList: timestamp older than stored data`,e.abrupt("return");case 16:if("remove"!==r||!T||T.deleted){e.next=20;break}return w=T.devices.filter((function(e){return e.keyIndex!==l[0].keyIndex&&e.id!==l[0].id})),A=(0,s.default)((0,s.default)({},T),{},{devices:w,deleted:!1}),e.abrupt("return",(0,p.bulkApplyDeviceUpdate)([{wid:t,update:A,currentRecord:T}]));case 20:if(C=(0,h.decodeProto)(v.ADVSignedKeyIndexListSpec,b),(0,m.verifyKeyIndexListAccountSignature)(C,u)){e.next=24;break}throw new Error("handleADVDeviceUpdate: validate device failed");case 24:if(null!=(O=(0,h.decodeProto)(v.ADVKeyIndexListSpec,C.details)).timestamp&&null!=O.rawId){e.next=27;break}throw new Error("handleADVDeviceUpdate: missing timestamp or rawId");case 27:if(M=(0,_.numberOrThrowIfTooLarge)(O.timestamp),null!=(I=O.rawId)&&null!=M){e.next=31;break}throw new Error("handleADVDeviceUpdate: missing incming timestamp or rawId");case 31:if(M===S){e.next=33;break}throw new Error("handleADVDeviceUpdate: ts mismatch device failed");case 33:if(!T||T.deleted||T.rawId===I){e.next=37;break}return e.next=36,(0,p.clearDeviceRecord)(t,T.devices);case 36:T={id:t.user,deleted:!0};case 37:return k=O.currentIndex||0,P=new Map,(R=new Set(O.validIndexes)).add(0),l.forEach((function(e){null!=e.keyIndex&&R.has(e.keyIndex)&&P.set(e.id,e.keyIndex)})),T&&!T.deleted&&("add"===r?T.devices.forEach((function(e){(R.has(e.keyIndex)||e.keyIndex>k)&&P.set(e.id,e.keyIndex)})):T.devices.forEach((function(e){var t=P.get(e.id);null!=t?t<e.keyIndex&&R.has(e.keyIndex)&&P.set(e.id,e.keyIndex):e.keyIndex>k&&P.set(e.id,e.keyIndex)}))),P.set(g.default.DEVICE.PRIMARY_DEVICE,0),D=Array.from(P.entries()).map((function(e){var t=(0,o.default)(e,2);return{id:t[0],keyIndex:t[1]}})),N="add"===r&&T&&!T.deleted?T.timestamp:M,L={id:t.user,rawId:I,timestamp:N,validIndexes:Array.from(R),devices:D,currentIndex:O.currentIndex,deleted:!1},e.abrupt("return",(0,p.bulkApplyDeviceUpdate)([{wid:t,update:L,currentRecord:T}]));case 48:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return w.apply(this,arguments)}function w(){return(w=(0,u.default)(i.default.mark((function e(t,n,r,a,u){var l,d,h,v,m,b,T,w,A,C,O,M,I=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=I.length>5&&void 0!==I[5]&&I[5],d=n.rawId,h=n.timestamp,v=n.keyIndex,null!=d&&null!=h&&null!=v){e.next=4;break}throw new Error("handleADVDeviceIdentity: rawId, keyIndex, timestamp inside deviceIdentity should not be null");case 4:if(null!=(m=t.device)&&m!==g.default.DEVICE.PRIMARY_DEVICE){e.next=7;break}throw new Error("handleADVDeviceIdentity: called for primary device");case 7:return b=(0,E.toUserWid)(t),e.next=10,(0,c.getDeviceListTable)().get(b.user);case 10:if(!(T=e.sent)||T.deleted){e.next=18;break}if(T.rawId===d&&null!=r&&(null==a||(0,f.bufferEqual)(r,a))){e.next=18;break}if(!(T.timestamp>(0,_.numberOrThrowIfTooLarge)(h))){e.next=15;break}throw new Error("handleADVDeviceIdentity: out-of-order timestamp detected");case 15:return e.next=17,(0,p.clearDeviceRecord)(b,T.devices,l);case 17:T={id:b.user,deleted:!0};case 18:if(w=(0,S.default)(),T&&!T.deleted){e.next=28;break}if(!a){e.next=23;break}return e.next=23,w.saveIdentity((0,f.createSignalAddress)(b).toString(),(0,y.toSignalCurvePubKey)(a));case 23:return A={id:t.user,rawId:d,timestamp:(0,_.numberOrThrowIfTooLarge)(h),devices:[{id:m,keyIndex:v},{id:g.default.DEVICE.PRIMARY_DEVICE,keyIndex:0}],validIndexes:null,currentIndex:null,deleted:!1},e.next=26,(0,p.bulkApplyDeviceUpdate)([{wid:b,update:A,currentRecord:T}],l);case 26:e.next=38;break;case 28:if(!(T.timestamp>=(0,_.numberOrThrowIfTooLarge)(h)&&T.validIndexes)||T.validIndexes.includes(v)){e.next=30;break}throw new Error("handleADVDeviceIdentity: out-of-order timestamp detected");case 30:if(C=new Map,T.devices.forEach((function(e){C.set(e.id,e.keyIndex)})),C.has(m)&&!C.get(m)!==v){e.next=38;break}return C.set(m,v),O=Array.from(C.entries()).map((function(e){var t=(0,o.default)(e,2);return{id:t[0],keyIndex:t[1]}})),M=(0,s.default)((0,s.default)({},T),{},{devices:O,deleted:!1}),e.next=38,(0,p.bulkApplyDeviceUpdate)([{wid:b,update:M,currentRecord:T}],l);case 38:return e.next=40,(0,S.default)().saveIdentity((0,f.createSignalAddress)(t).toString(),(0,y.toSignalCurvePubKey)(u));case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=(0,u.default)(i.default.mark((function e(t){var n,a,s,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2)`_handleADVDeviceSyncResult: start to handling ${t.length} updates`,n=[],a=t.map((function(e){return e.wid})),e.next=5,d.waSignalStore.bulkGetIdentity(a.map((function(e){return(0,f.createSignalAddress)(e).toString()})));case 5:return s=e.sent,e.next=8,(0,c.getDeviceListTable)().bulkGet(a.map((function(e){return e.user})));case 8:return u=e.sent,l=[],t.forEach((function(e,t){var r=e.wid,a=e.devices,i=s[t];if(i){var c=u[t],d=(0,y.toCurveKeyPubKey)((0,f.strToBuffer)(i)),p=a.deviceList,E=a.keyIndex;if(null!=p){if(null==E)return 1!==p.length||p[0].id!==g.default.DEVICE.PRIMARY_DEVICE?void __LOG__(2)`_handleADVDeviceSyncResult: Received empty key-index with non-empty device list for matched device hash`:void(c&&!c.deleted&&(l.push({wid:r,currentList:c.devices}),c={id:r.user,deleted:!0}));var S=E.ts,b=E.signedKeyIndexBytes;if(c&&!c.deleted&&(0,_.numberOrThrowIfTooLarge)(c.timestamp)>E.ts)__LOG__(2)`getADVDeviceSignedKeyIndexList: timestamp older than stored data for ${String(r)}`;else{var T=(0,h.decodeProto)(v.ADVSignedKeyIndexListSpec,b);if((0,m.verifyKeyIndexListAccountSignature)(T,d)){var w=(0,h.decodeProto)(v.ADVKeyIndexListSpec,T.details);if(null!=w.timestamp&&null!=w.rawId){var A=(0,_.numberOrThrowIfTooLarge)(w.timestamp),C=w.rawId;if(null!=C&&null!=A)if(A===S){c&&!c.deleted&&c.rawId!==C&&(l.push({wid:r,currentList:c.devices}),c={id:r.user,deleted:!0});var O=w.currentIndex||0,M=new Map,I=new Set(w.validIndexes);I.add(0),p.forEach((function(e){null!=e.keyIndex&&I.has(e.keyIndex)&&M.set(e.id,e.keyIndex)})),c&&!c.deleted&&c.devices.forEach((function(e){var t=M.get(e.id);null!=t?t<e.keyIndex&&I.has(e.keyIndex)&&M.set(e.id,e.keyIndex):e.keyIndex>O&&M.set(e.id,e.keyIndex)})),M.set(g.default.DEVICE.PRIMARY_DEVICE,0);var k=Array.from(M.entries()).map((function(e){var t=(0,o.default)(e,2);return{id:t[0],keyIndex:t[1]}})),P={id:r.user,rawId:C,timestamp:A,validIndexes:Array.from(I),devices:k,currentIndex:w.currentIndex,deleted:!1};n.push({wid:r,update:P,currentRecord:c})}else __LOG__(4,void 0,new Error)`handleADVDeviceUpdate: ts mismatch device failed for ${String(r)}`;else __LOG__(4,void 0,new Error)`handleADVDeviceUpdate: missing incming timestamp or rawId for ${String(r)}`}else __LOG__(4,void 0,new Error)`handleADVDeviceUpdate: missing timestamp or rawId for ${String(r)}`}else __LOG__(4,void 0,new Error)`handleADVDeviceUpdate: validate device failed for ${String(r)}`}}}else __LOG__(2)`_handleADVDeviceSyncResult: missing primarykey for ${String(r)}`})),e.next=13,r.all(l.map((function(e){var t=e.wid,n=e.currentList;return(0,p.clearDeviceRecord)(t,n)})));case 13:return e.next=15,(0,p.bulkApplyDeviceUpdate)(n);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},98492:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearDeviceRecord=function(){return E.apply(this,arguments)},t.bulkApplyDeviceUpdate=function(){return S.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(96486)),u=a(n(34263)),l=n(64920),c=n(45601),d=n(43883),f=n(97223),p=n(44638),h=n(75793),_=n(54872),v=n(71701),m=n(12467),g=n(69841),y=a(n(99908));function E(){return(E=(0,o.default)(i.default.mark((function e(t,n){var a,s,f,_,v,m,y=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.length>2&&void 0!==y[2]&&y[2],e.next=3,r.all(n.filter((function(e){return e.id!==u.default.DEVICE.PRIMARY_DEVICE})).map((function(e){return(0,l.deleteIdentity)((0,h.createDeviceWidFromUserAndDevice)(t.user,e.id))})));case 3:return s=[],f=n.map((function(e){return e.id})).filter((function(e){return e!==u.default.DEVICE.PRIMARY_DEVICE})),e.next=7,b([{wid:t,added:s,removed:f,isNewRecord:!1}],a);case 7:return _=e.sent,v=_.encryptedNotifications,m=_.chatIds,e.next=12,(0,c.getDeviceUpdateLock)((0,o.default)(i.default.mark((function e(){var n,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>0?(0,g.storeEncryptedMessage)(v,m,!1):r.resolve(),a=(0,p.updateGroupParticipantsInTransaction)(t,s,f),o=(0,d.getDeviceListTable)().createOrReplace({id:t.user,deleted:!0}).catch((function(){throw __LOG__(4,!0,new Error,!0)`remove from device list table failed`,SEND_LOGS("remove from device list table failed when clearing device record"),new Error("remove from device list table failed")})),e.next=5,r.all([n,a,o]);case 5:case"end":return e.stop()}}),e)}))),v.length>0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=(0,o.default)(i.default.mark((function e(t){var n,a,f,_,y,E,S=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.length>1&&void 0!==S[1]&&S[1],a=[],f=[],t.forEach((function(e){var t=e.wid,n=e.update,r=e.currentRecord,i=n.devices;t.user===(0,v.getMeUser)().user&&(0,m.updateMissingKeyDevices)();var o=i.map((function(e){return e.id})),l=r&&!r.deleted?r.devices.map((function(e){return e.id})):[],c=s.default.difference(o,l).filter((function(e){return e!==u.default.DEVICE.PRIMARY_DEVICE})),d=s.default.difference(l,o).filter((function(e){return e!==u.default.DEVICE.PRIMARY_DEVICE}));a.push({wid:t,added:c,removed:d,isNewRecord:null==r}),d.forEach((function(e){f.push((0,h.createDeviceWidFromUserAndDevice)(t.user,e))}))})),e.next=6,b(a,n);case 6:return _=e.sent,y=_.encryptedNotifications,E=_.chatIds,r.all(f.map((function(e){return(0,l.deleteIdentity)(e)}))),e.next=12,(0,c.getDeviceUpdateLock)((0,o.default)(i.default.mark((function e(){var n,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.length>0?(0,g.storeEncryptedMessage)(y,E,!1):r.resolve(),o=(0,p.bulkUpdateGroupParticipantsInTransaction)(a),s=(0,d.getDeviceListTable)().bulkCreateOrReplace(t.map((function(e){return e.update}))).catch((function(){throw __LOG__(4,!0,new Error,!0)`bulkCreateOrReplace into device list table failed`,SEND_LOGS("bulkCreateOrReplace into device list table failed when applying device update"),new Error("bulkCreateOrReplace into device list table failed")})),e.next=5,r.all([n,o,s]);case 5:case"end":return e.stop()}}),e)}))),y.length>0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return T.apply(this,arguments)}function T(){return(T=(0,o.default)(i.default.mark((function e(t,n){var r,a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.bulkGenerateDeviceNotifications)(t);case 2:if(r=e.sent,a=r.notifications,o=r.chatIds,n){e.next=13;break}return e.next=8,(0,g.encryptMultipleMsgs)(a);case 8:return s=e.sent,w(a),e.abrupt("return",{chatIds:o,encryptedNotifications:s});case 13:return y.default.addOfflineMessage(a.map((function(e){return{msg:e}}))),e.abrupt("return",{chatIds:[],encryptedNotifications:[]});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return r.all(e.map((function(e){return e.recvFresh=!0,e.isNewMsg=!0,(0,f.getBridge)().sendAndReceive("msg_collection","processMultipleMessages",{chatId:e.from,msgObjs:[e],meta:{add:"after",isHistory:!1}})})))}},44638:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateGroupParticipantsInTransaction=function(){return l.apply(this,arguments)},t.bulkUpdateGroupParticipantsInTransaction=function(){return c.apply(this,arguments)};var a=r(n(87757)),i=r(n(81109)),o=r(n(48926)),s=n(43883),u=n(75793);function l(){return(l=(0,o.default)(a.default.mark((function e(t,n,r){var o,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.getParticipantTable)().equals(["participants"],String(t));case 2:return o=e.sent,l=o.map((function(e){var a=e.rotateKey,o=new Map(e.senderKey);return r.forEach((function(e){o.delete(String((0,u.createDeviceWidFromUserAndDevice)(t.user,e)))})),n.forEach((function(e){o.set(String((0,u.createDeviceWidFromUserAndDevice)(t.user,e)),!1)})),r.length>0&&(a=!0),(0,i.default)((0,i.default)({},e),{},{senderKey:o,rotateKey:a})})),e.abrupt("return",(0,s.getParticipantTable)().bulkCreateOrReplace(l));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,o.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,s.getParticipantTable)().anyOf(["participants"],t.map((function(e){return String(e.wid)})));case 4:if(0!==(n=e.sent).length){e.next=7;break}return e.abrupt("return");case 7:return r=new Map,t.forEach((function(e){r.set(String(e.wid),e)})),o=n.map((function(e){var t=e.rotateKey,n=new Map(e.senderKey);return e.participants.forEach((function(e){var a=r.get(e);if(a){var i=a.added,o=a.removed;o.forEach((function(e){n.delete(String((0,u.createDeviceWidFromUserAndDevice)(a.wid.user,e)))})),i.forEach((function(e){n.set(String((0,u.createDeviceWidFromUserAndDevice)(a.wid.user,e)),!1)})),o.length>0&&(t=!0)}})),(0,i.default)((0,i.default)({},e),{},{senderKey:n,rotateKey:t})})),e.abrupt("return",(0,s.getParticipantTable)().bulkCreateOrReplace(o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},99703:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.blockContact=function(e){return p((0,f.unproxy)(e),!0)},t.unblockContact=function(e){return p((0,f.unproxy)(e),!1)};var i=a(n(67294)),o=n(83180),s=n(40029),u=a(n(76088)),l=a(n(34541)),c=n(14650),d=a(n(89115)),f=n(89305);function p(e,t,n){var a=e.id,f=e.isBlocked();if(t&&f||!t&&!f)return r.resolve();var h=(0,s.sendSetBlock)(t,a).then((function(e){e&&(t?u.default.add({id:a}):u.default.remove(a))}));return function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,o.genId)(),s={participant:e.formattedName},u=n?new o.ActionType(d.default.t(49,s)):new o.ActionType(d.default.t(204,s)),f=t.then((function(){var t=n?d.default.t(48,s):d.default.t(203,s);return new o.ActionType(t,{actionText:d.default.t(205),actionHandler:function(){return p(e,!n,a)}})})).catch((function(t){if(!(t instanceof c.ServerStatusCodeError)){__LOG__(3)`action:setBlock dropped`;var i=n?d.default.t(47,s):d.default.t(202,s),u=new o.ActionType(i,{actionText:d.default.t(201),actionHandler:function(){return p(e,n,a)}});return r.reject(u)}if(t.statusCode>=400){var l=n?new o.ActionType(d.default.t(47,s)):new o.ActionType(d.default.t(202,s));return r.reject(l)}}));l.default.openToast(i.default.createElement(o.ActionToast,{id:a,initialAction:u,pendingAction:f}))}(e,h,t,n),h}},89761:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.onIsBusinessChange=function(e){var t=(0,i.unproxy)(e),r=t.businessProfile,o=t.id,s=t.isBusiness||t.isMe&&a.default.isSMB;s&&!r?t.addChild("businessProfile",n(93250).default.gadd(o)):!s&&r&&(t.stopListening(r),t.businessProfile=void 0,r.delete())};var a=r(n(93743)),i=n(89305)},78843:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.contactFindQuery=function(e){var t=performance.now(),a={};return s.default.contactFindQuery(e.retry,(function(e){a.binarySize=e.binarySize})).then((function(e){var s=e;if("preempted"===s.data)return r.reject("contacts preempted");a.count=s.data&&s.data.length,a.timing=Math.ceil(performance.now()-t);var u=n(48629).default;return u.trigger(i.default.COLLECTION_HAS_SYNCED,a),(0,o.mungePSAContact)(s.data),s.checksum&&(u.setChecksum(s.checksum),__LOG__(2)`Store:Contact:query update checksum ${s.checksum}`),r.resolve(s.data)}))};var i=a(n(34263)),o=n(30713),s=a(n(23306))},27454:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryIdentity=function(e){var t=(0,i.unproxy)(e),n=t.verificationBinary,a=t.verificationString,u=t.id;if(n&&a)return r.resolve();if(t.promises.queryIdentity)return t.promises.queryIdentity;t.promises.queryIdentity=o.default.queryIdentity(u).then((function(t){s(e,t)})).catch((function(e){__LOG__(3)`models:contact:queryIdentity error: ${String(e)}`})).finally((function(){t.promises.queryIdentity=null}))},t.updateIdentity=s;var i=n(89305),o=a(n(23306));function s(e,t){var n=(0,i.unproxy)(e);null!=t.status&&t.status>=400?(n.unset("verificationBinary"),n.unset("verificationString")):(n.verificationBinary=t.binary,n.verificationString=t.string)}},71030:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleNewIdentity=function(){return y.apply(this,arguments)},t.clearDeviceRecordForIdentityChange=E;var i=a(n(87757)),o=a(n(48926)),s=a(n(22021)),u=n(72687),l=n(90038),c=n(75793),d=n(28367),f=a(n(34263)),p=a(n(78919)),h=n(54872),_=n(44638),v=n(43883),m=n(61572),g=a(n(8132));function y(){return(y=(0,o.default)(i.default.mark((function e(t){var n,a,o,d,_,v;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=2;break}return e.abrupt("return",r.reject(new Error("This call is only supported in MD mode")));case 2:if(n=r.resolve(),o=window.libsignal.SignalProtocolAddress.fromString(t).getName(),d=(0,c.createWid)((0,u.toJid)(o)),_=null!==(a=d.device)&&void 0!==a?a:f.default.DEVICE.PRIMARY_DEVICE,v=(0,c.toUserWid)(d),_!==f.default.DEVICE.PRIMARY_DEVICE){e.next=15;break}return p.default.notifyDeviceIdentityChangedOrDeleted(d,!0),e.next=11,E(v);case 11:return e.next=13,(0,l.addSecurityCodeChangedNotifications)(v);case 13:e.next=17;break;case 15:return e.next=17,(0,h.createAndStoreDeviceNotifications)(v,[_],[_]);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=(0,o.default)(i.default.mark((function e(t){var n,a,o,u,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]&&l[1],s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=3;break}return e.abrupt("return",r.reject(new Error("clearDeviceRecordForIdentityChange: This call is only supported in MD mode")));case 3:if(a=[f.default.DEVICE.PRIMARY_DEVICE],o=[f.default.DEVICE.PRIMARY_DEVICE],!n){e.next=11;break}return g.default.addOfflinePendingDevice(String(t),null),e.next=9,(0,d.getStorage)().lock(["participant"],(function(){return(0,_.updateGroupParticipantsInTransaction)(t,o,a)}));case 9:e.next=18;break;case 11:return e.next=13,(0,v.getDeviceListTable)().get(t.user);case 13:return(u=e.sent)&&!u.deleted&&u.devices.forEach((function(e){e.id!==f.default.DEVICE.PRIMARY_DEVICE&&a.push(e.id)})),r.all(a.map((function(e){return e===f.default.DEVICE.PRIMARY_DEVICE?r.resolve():m.Session.deleteRemoteInfo((0,c.createDeviceWidFromUserAndDevice)(t.user,e))}))),e.next=18,r.all([(0,d.getStorage)().lock(["participant"],(function(){return(0,_.updateGroupParticipantsInTransaction)(t,o,a)})),(0,v.getDeviceListTable)().createOrReplace({id:t.user,deleted:!0})]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},33258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLiveLocation=function(e,t){var n=(0,r.unproxy)(e);n.liveLocations||(n.liveLocations=[]);n.liveLocations.push(t)},t.removeLiveLocation=function(e,t){var n=(0,r.unproxy)(e),a=n.liveLocations;if(!a)return;for(var i=a.length-1;i>=0;i--)if(a[i]===t){a.splice(i,1);break}0===a.length&&(n.liveLocations=null)};var r=n(89305)},46711:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePushname=function(e,t){var n=(0,o.toUserWid)(e);return s.enqueue((function(){(0,a.getBridge)().sendAndReceive("contact_collection","updatePushname",{contactId:n,pushname:t}).then((function(e){if(e||void 0===e)return __LOG__(2)`updatePushName: set pushname for ${String(n)}`,(0,i.updateLocal)(n,{pushname:t})}))}))};var r=n(19087),a=n(97223),i=n(29846),o=n(75793),s=new r.PromiseQueue},30941:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.resyncContacts=function(e){void 0!==i.default.checksum&&void 0!==e&&(i.default.checksum!==e?i.default.findQuery({retry:!0}).then((function(e){if(Array.isArray(e)){(0,l.mungePSAContact)(e),__LOG__(2)`Store:Contact:resync success`;var t=(0,u.getContactsToRemove)(e),n=r.resolve();if(s.default.supportsFeature(s.default.F.MD_BACKEND)&&t.length){var a=t.map((function(e){return e.id.toString()}));n=(0,c.getContactTable)().bulkRemove(a).catch((function(){throw __LOG__(4,!0,new Error,!0)`bulkRemove from contact table failed`,SEND_LOGS("bulkRemove from contact table failed when resyncing contacts"),new Error("bulkRemove from contact table failed")}))}n.then((function(){t.forEach((function(e){e.unset("name"),e.unset("shortName")}))}))}else __LOG__(3)`Store:Contact.resync error ${JSON.stringify(e)}`})).catchType(o.WebdDrop,(function(){})):__LOG__(2)`Store:Contact:resync checksum match`)};var i=a(n(48629)),o=n(14650),s=a(n(22021)),u=n(10550),l=n(30713),c=n(43883)},90038:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addSecurityCodeChangedNotifications=function(){return _.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(22021)),u=n(52300),l=n(43883),c=n(75793),d=n(69841),f=n(97223),p=a(n(99908)),h=n(71701);function _(){return(_=(0,o.default)(i.default.mark((function e(t){var n,a,o,u,l,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]&&c[1],!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=18;break}return e.next=4,v(t);case 4:if(a=e.sent,o=a.notifications,u=a.chatIds,0!==o.length){e.next=9;break}return e.abrupt("return");case 9:if(n){e.next=17;break}return r.all(o.map((function(e){return e.recvFresh=!0,e.isNewMsg=!0,(0,f.getBridge)().sendAndReceive("msg_collection","processMultipleMessages",{chatId:e.from,msgObjs:[e],meta:{add:"after",isHistory:!1}})}))),e.next=13,(0,d.encryptMultipleMsgs)(o);case 13:return l=e.sent,e.abrupt("return",(0,d.storeEncryptedMessage)(l,u,!1));case 17:p.default.addOfflineMessage(o.map((function(e){return{msg:e}})));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={notifications:[],chatIds:[]},(0,h.getGlobalSecurityNotifications)()){e.next=3;break}return e.abrupt("return",n);case 3:return r=[],e.prev=4,e.next=7,(0,l.getChatTable)().get(String(t));case 7:return a=e.sent,e.next=10,(0,l.getParticipantTable)().equals(["participants"],String(t));case 10:o=e.sent,r=o.map((function(e){return(0,c.createWid)(e.groupId)})),a&&r.push((0,c.createWid)(a.id)),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(4),__LOG__(4,!0,new Error,!0)`get chats failed`,SEND_LOGS("get chats failed when creating device notification"),new Error("get chats failed");case 19:return s=r.map((function(e){return(0,u.genSecurityCodeNotificationMsg)(e,t)})),n.notifications=s,n.chatIds=r.map(String),e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}},30713:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mungePSAContact=function(e){if(Array.isArray(e)){var t=e.findIndex((function(e){return e&&i.default.isPSA(e.id)})),n=e[t];t>-1&&n&&(n.name=a.default.t(1975),n.shortName=a.default.t(1975))}};var a=r(n(89115)),i=r(n(12717))},16913:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=n(52300),l=n(39888),c=n(6603),d=a(n(63056));function f(){return(f=(0,s.default)(i.default.mark((function e(t,n,a){var o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[_(t,n,a),v(t,n,a)],e.next=3,r.all(o.map((function(e){return e?(0,l.handleSingleMsgMD)(t,e):null})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p={CONSUMER:{CONSUMER:null,BIZ_NOT_HIGH:["biz_intro_bottom",null],BIZ_HIGH:["biz_intro_top","CURRENT"]},BIZ_NOT_HIGH:{CONSUMER:["biz_move_to_consumer_app",null],BIZ_NOT_HIGH:null,BIZ_HIGH:["biz_verified_transition_bottom_to_top","CURRENT"]},BIZ_HIGH:{CONSUMER:["biz_move_to_consumer_app",null],BIZ_NOT_HIGH:["biz_verified_transition_top_to_bottom","PREVIOUS"],BIZ_HIGH:null}};function h(e){return e.isBusiness?e.isVerifiedHigh?"BIZ_HIGH":"BIZ_NOT_HIGH":"CONSUMER"}function _(e,t,n){if(!d.default.bspSystemMessageEnabled){if(t.isVerifiedHigh&&n.isVerifiedHigh&&null!=t.verifiedName&&null!=n.verifiedName&&t.verifiedName!==n.verifiedName)return(0,u.genTealNotificationTemplateMsg)(e,"biz_name_change",[n.verifiedName]);var r=p[h(t)][h(n)];if(null!=r){var a=(0,o.default)(r,2),i=a[0],s=a[1],l=[];return"PREVIOUS"===s&&t.verifiedName?l.push(t.verifiedName):"CURRENT"===s&&n.verifiedName&&l.push(n.verifiedName),(0,u.genTealNotificationTemplateMsg)(e,i,l)}}}function v(e,t,n){if(d.default.bspSystemMessageEnabled){var r=(0,c.getReducedPrivacyMode)(t.isBusiness&&t.isEnterprise?t.privacyMode:null),a=(0,c.getReducedPrivacyMode)(n.isBusiness&&n.isEnterprise?n.privacyMode:null);if(r!==a)switch(a){case c.ReducedPrivacyMode.E2EE:return(0,u.genEncryptNotificationMsg)(e,"encrypt_now");case c.ReducedPrivacyMode.BSP:return(0,u.genTealNotificationTemplateMsg)(e,"biz_privacy_mode_to_bsp");case c.ReducedPrivacyMode.FB:return(0,u.genTealNotificationTemplateMsg)(e,"biz_privacy_mode_to_fb")}}}},10504:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFirstPartyStickers=function(){return h.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=r(n(98569)),u=a(n(88430)),l=a(n(89115)),c=a(n(8643)),d=a(n(69267)),f=a(n(20997)),p="https://static.whatsapp.net/sticker";function h(){return(h=(0,o.default)(i.default.mark((function e(t,n){var r,a,o,h,_;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t,lg:l.default.getLocale()},a=d.default.build(p,r),e.next=4,(0,u.default)(a,{signal:null==n?void 0:n.signal});case 4:if(o=e.sent,(h=new c.default.StickerCommonQueryToStaticServer).set({httpResponseCode:o.status,params:new f.default(r).toString(),queryType:c.default.QUERY_TYPE.STICKER_PACK_DATA}),h.commit(),o.ok){e.next=10;break}throw new s.InvalidServerResponseError(a,o.status.toString(),"Invalid response from WhatsApp stickers endpoint");case 10:return e.next=12,o.json();case 12:if(null!=(_=e.sent)&&0!==_.length){e.next=15;break}throw new s.InvalidServerResponseError(a,o.status.toString(),`Invalid response from WhatsApp stickers endpoint: ${JSON.stringify(_)}`);case 15:return e.abrupt("return",_[0].stickers.map((function(e,t){return{mimetype:e.mimetype,width:e.width,height:e.height,index:t,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],deprecatedMms3Url:e.url,encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0}})));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},35315:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return y(e,t,n,r,void 0,a)},t.sendForNeededAddRequest=E;var a=r(n(81109)),i=r(n(319)),o=r(n(67294)),s=n(83180),u=r(n(26671)),l=r(n(34541)),c=r(n(48629)),d=n(54035),f=n(14650),p=r(n(22021)),h=r(n(89115)),_=n(95373),v=r(n(99838)),m=r(n(75554)),g=n(75793);function y(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,s.genId)(),i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=r.map((function(e){return e.id})),p=void 0,g=(0,d.sendCreateGroup)(e,c,p,(0,m.default)(),!1,!1,i),S=new s.ActionType(h.default.t(100)),b=g.then((function(t){return E(t,e,p),new s.ActionType(h.default.t(99))})).catchType(f.ServerStatusCodeError,(function(e){return 406===e.status?new s.ActionType(h.default.t(95)+" "+h.default.t(96)):429===e.status?new s.ActionType(h.default.t(95)+" "+h.default.t(97)):void 0})).catch((function(){return __LOG__(3)`models:chatCollection:createGroup dropped`,new s.ActionType(h.default.t(95),{actionText:h.default.t(201),actionHandler:function(){return y(e,t,n,r,a)}})}));return l.default.openToast(o.default.createElement(s.ActionToast,{id:a,initialAction:S,pendingAction:b})),g.then((function(e){if(e.gid&&u.default.find(e.gid).then((function(e){l.default.openChatBottom(e).then((function(t){t&&l.default.focusChatTextInput(e)}))})),!e._duplicate&&t&&n){var r=v.default.gadd(e.gid);return(0,_.setProfilePic)(r,t,n)}e._duplicate&&__LOG__(3)`createGroup failed to set picture.`})).catchType(f.ServerStatusCodeError,(function(){}))}function E(e,t,n,r){if(p.default.supportsFeature(p.default.F.GROUPS_V_4_JOIN_PERMISSION)&&e.participants){var o=r||e.gid;o||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Group add request was provided with undefined gid"));var s=e.participants.reduce((function(e,t){var n=Object.keys(t)[0];if("403"!==t[n].code)return e;var r=(0,g.createWid)(n),o=c.default.gadd(r,{silent:!0});return[].concat((0,i.default)(e),[(0,a.default)((0,a.default)({},t[n]),{},{contact:o})])}),[]);s.length>0&&o&&l.default.openGroupV4InviteRequestFlow(s,o,t,n)}}},22383:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendExitGroup=function(e){return _((0,h.unproxy)(e))},t.localExitGroup=v;var o=i(n(67294)),s=n(83180),u=i(n(34541)),l=n(14650),c=a(n(98569)),d=n(73525),f=n(71701),p=i(n(89115)),h=n(89305);function _(e){var t=e.isGroup,n=e.promises;if(!t)return r.reject(new c.ActionError);if(n.sendExit)return n.sendExit;var a=n.sendExit=(0,d.sendExitGroup)(e.id),i=new s.ActionType(p.default.t(110)),f=a.then((function(){return new s.ActionType(p.default.t(109))})).catchType(l.ServerStatusCodeError,(function(e){if(e.status>=400)return new s.ActionType(p.default.t(108))})).catch((function(){return __LOG__(3)`actions:chat:sendExit dropped`,new s.ActionType(p.default.t(108),{actionText:p.default.t(201),actionHandler:function(){return _(e)}})}));return u.default.openToast(o.default.createElement(s.ActionToast,{id:(0,s.genId)(),initialAction:i,pendingAction:f})),a.then((function(t){t._duplicate||v(e)})).finally((function(){n.sendExit=null})).catchType(l.ServerStatusCodeError,(function(){}))}function v(e){e.isGroup&&(e.groupMetadata.participants.remove((0,f.getMaybeMeUser)()),(0,d.markExited)(e.id).then((function(){e.isReadOnly=!0})).catch((function(){throw __LOG__(4,!0,new Error,!0)`failed to merge chat table`,SEND_LOGS("failed to merge chat table when exiting group"),new Error("failed to merge chat table")})))}},91438:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupAction=function(e,t,n){return function(e,t,n){var a=n.action;switch(n.action){case u.SUBJECT:var s={name:n.subject};return e.contact.set(s),(0,i.persistGroupMetadata)(e.groupMetadata.id,{subject:n.subject});case u.ADD:case u.PROMOTE:case u.DEMOTE:var l=n.participants.map((function(e){return{id:e,isAdmin:"promote"===a}}));e.groupMetadata.participants.add(l,{merge:!0}),"add"===a&&n.participants.forEach((function(t){o.default.trigger(`group_participant_change_${t.toString()}`,e.id)}));break;case u.REMOVE:var c=e.groupMetadata;n.participants.forEach((function(e){c.participants.remove(e)})),n.participants.forEach((function(t){o.default.trigger(`group_participant_change_${t.toString()}`,e.id)}));break;case u.MODIFY:if(t&&n.participants&&n.participants.length>0){var d=n.participants[0],f=e.groupMetadata.participants.remove(t),p=!1,h=!1;f&&f.length&&f[0]&&(p=f[0].isAdmin,h=f[0].isSuperAdmin);var _={id:d,isAdmin:p,isSuperAdmin:h};e.groupMetadata.participants.add(_)}break;case u.INVITE_CODE:n.code?e.groupMetadata.inviteCode=n.code:__LOG__(3)`model:chat:handleGroupAction:invalid invite code: ${n.code} for ${e.id.toString()}`;break;case u.DESC_ADD:return e.groupMetadata.set({desc:n.desc,descId:n.descId,descTime:n.descTime,descOwner:null==t?void 0:t.toString()}),(0,i.persistGroupMetadata)(e.groupMetadata.id,{desc:n.desc,descId:n.descId,descTime:n.descTime,descOwner:null==t?void 0:t.toString()});case u.DESC_REMOVE:if(e.groupMetadata.descId===n.descId)return e.groupMetadata.set({desc:void 0,descId:void 0,descTime:void 0,descOwner:void 0}),(0,i.persistGroupMetadata)(e.groupMetadata.id,{desc:void 0,descId:void 0,descTime:void 0,descOwner:void 0});break;case u.RESTRICT:return e.groupMetadata.restrict=!!n.value,(0,i.persistGroupMetadata)(e.groupMetadata.id,{restrict:!!n.value});case u.ANNOUNCE:return e.groupMetadata.announce=!!n.value,(0,i.persistGroupMetadata)(e.groupMetadata.id,{announce:!!n.value});case u.NO_FORWARD:return e.groupMetadata.noFrequentlyForwarded=!!n.value,(0,i.persistGroupMetadata)(e.groupMetadata.id,{noFrequentlyForwarded:!!n.value});case u.EPHEMERAL:return e.groupMetadata.ephemeralDuration=n.duration,(0,i.persistGroupMetadata)(e.groupMetadata.id,{ephemeralDuration:n.duration})}return r.resolve()}((0,s.unproxy)(e),t,n)},t.GROUP_ACTIONS=void 0;var i=n(75040),o=a(n(13361)),s=n(89305),u=Object.freeze({SUBJECT:"subject",ADD:"add",PROMOTE:"promote",DEMOTE:"demote",REMOVE:"remove",MODIFY:"modify",INVITE_CODE:"invite",DESC_ADD:"desc_add",DESC_REMOVE:"desc_remove",RESTRICT:"restrict",ANNOUNCE:"announce",NO_FORWARD:"no_frequently_forwarded",EPHEMERAL:"ephemeral",REVOKE:"revoke"});t.GROUP_ACTIONS=u},61827:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupActionWap=function(){return w.apply(this,arguments)},t.handleGroupActionMD=function(e,t){if(u.default.supportsFeature(u.default.F.MD_BACKEND))return function(){return C.apply(this,arguments)}(e,t);return r.reject(new Error("handleGroupActionMD: only supported on MD"))},t.handleGroupCreation=function(e,t){if(u.default.supportsFeature(u.default.F.MD_BACKEND))return function(){return A.apply(this,arguments)}(e,t);return r.reject(new Error("handleGroupCreation: should not be called in wap mode"))};var i=a(n(81109)),o=a(n(87757)),s=a(n(48926)),u=a(n(22021)),l=n(91438),c=n(29846),d=a(n(54654)),f=a(n(48629)),p=n(43883),h=n(29364),_=n(71701),v=n(46711),m=n(38271),g=n(22350),y=a(n(66312)),E=n(65105),S=n(69449),b=n(10566),T=a(n(91080));function w(){return(w=(0,s.default)(o.default.mark((function e(t,r){var a,i,s,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.chatId,i=t.author,s=n(26671).default.get(a)){e.next=5;break}return __LOG__(3)`model:chat: unknown chat for ${a.toString()}, action ${JSON.stringify(r)}`,e.abrupt("return");case 5:if(r.action!==l.GROUP_ACTIONS.SUBJECT){e.next=9;break}return u={name:r.subject},e.next=9,(0,c.updateLocal)(s.contact.id,u);case 9:(0,l.handleGroupAction)(s,i,r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=(0,s.default)(o.default.mark((function e(t,a){var s,u,l,c,h,_,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2,void 0,void 0,void 0,["groups"])`inside handleGroupCreationMD`,s=t.chatId,u=t.author,l=t.pushname,u&&l&&(0,v.updatePushname)(u,l),e.next=5,r.all([(0,g.updateParticipants)(a.id,a.participants,a.pvId),(0,m.updateGroupMetadataTable)([a])]);case 5:if(__LOG__(2,void 0,void 0,void 0,["groups"])`updated GroupMetadata and participants tables`,c=n(26671).default,!(h=c.get(s))){e.next=11;break}return h.groupMetadata.set(a),e.abrupt("return",r.resolve());case 11:return(_=new d.default({id:s,t:a.creation,pendingInitialLoading:!1})).groupMetadata.set(a),f.default.gadd(a.id).set({name:a.subject}),__LOG__(2,void 0,void 0,void 0,["groups"])`updated contact name`,y=(0,i.default)((0,i.default)({},_.toJSON()),{},{id:s.toString()}),c.add(_),e.next=20,(0,p.getChatTable)().create(y);case 20:__LOG__(2,void 0,void 0,void 0,["groups"])`updated chat model and table`;case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=(0,s.default)(o.default.mark((function e(t,a){var i,s,u,c,d,f,p,m,w,A,C,O,M,I;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:__LOG__(2,void 0,void 0,void 0,["groups"])`inside _handleGroupActionMD`,c=t.chatId,d=t.author,f=t.pushname,d&&f&&(0,v.updatePushname)(d,f),p=[],m=n(26671).default.get(c),e.t0=a.action,e.next=e.t0===l.GROUP_ACTIONS.ADD?8:e.t0===l.GROUP_ACTIONS.REMOVE?10:e.t0===l.GROUP_ACTIONS.DEMOTE?12:e.t0===l.GROUP_ACTIONS.PROMOTE?14:e.t0===l.GROUP_ACTIONS.REVOKE?16:e.t0===l.GROUP_ACTIONS.MODIFY?44:49;break;case 8:return p.push((0,g.addParticipants)(c,a.participants,a.version,a.prevVersion)),e.abrupt("break",50);case 10:return p.push((0,g.removeParticipants)(c,a.participants,a.version,a.prevVersion)),e.abrupt("break",50);case 12:return p.push((0,g.demoteParticipants)(c,a.participants,a.version,a.prevVersion)),e.abrupt("break",50);case 14:return p.push((0,g.promoteParticipants)(c,a.participants,a.version,a.prevVersion)),e.abrupt("break",50);case 16:if(w=null===(i=(0,_.getMaybeMeUser)())||void 0===i?void 0:i.toString()){e.next=20;break}return __LOG__(3)`getMaybeMeUser returned null, can't process action ${a}`,e.abrupt("return");case 20:if(A=null==d?void 0:d.toString(),C=[],null!=A){e.next=25;break}return __LOG__(3)`Received revoke without an admin jid ${a}`,e.abrupt("return");case 25:if(A!==w){e.next=29;break}C=a.participants.map((function(e){return{from:w,to:e.id.toString(),groupId:c.toString(),expiration:e.expiration}})),e.next=34;break;case 29:if(O=a.participants.find((function(e){return e.id.toString()===w}))){e.next=33;break}return __LOG__(4,void 0,new Error,!0)`Received group invite revokation from ${A}, but user not in participants list`,SEND_LOGS("bad-revoke"),e.abrupt("return");case 33:C=[{from:A,to:w,groupId:c.toString(),expiration:O.expiration}];case 34:return e.next=36,r.all(C.map((function(e){return(0,h.revokeGroupInvites)(e.from,e.to,e.groupId,e.expiration)})));case 36:return M=e.sent,I=[],M.flat().map((function(e){e&&e.id&&I.push(e.id)})),e.next=41,(0,E.msgFindByIds)(I).then((function(e){return e.map((function(e){return e.inviteCodeExp="0",e}))}));case 41:return e.sent.map((function(e){var t;null===(t=y.default.get(e.id))||void 0===t||t.set({inviteCodeExp:"0"}),(0,S.storeMessages)([e],e.to,!1)})),e.abrupt("break",50);case 44:if(1===a.participants.length){e.next=47;break}return __LOG__(3)`_handleGroupActionMD: participants length should be 1, but is ${a.participants.length}`,e.abrupt("break",50);case 47:return p.push((0,b.modifyGroupParticipant)(c,(0,T.default)(d,"author"),a.participants[0],null!==(s=a.prevVersion)&&void 0!==s?s:-1,null!==(u=a.version)&&void 0!==u?u:-1)),e.abrupt("break",50);case 49:return e.abrupt("break",50);case 50:return e.next=52,r.all(p);case 52:__LOG__(2,void 0,void 0,void 0,["groups"])`finished all storageTasks`,m&&(0,l.handleGroupAction)(m,d,a);case 54:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},41379:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryGroupFromPhone=function(e){return(0,l.groupMetadataFindFromPhone)(e).then((function(t){return"ok"===t.status?t.data:"missing"!==t.status?"error"===t.status?(__LOG__(3)`model:GroupMetadata:find error ${t.info}`,r.reject(new Error("model:GroupMetadata:find error"))):void 0:void o.default.defer((function(){n(26671).default.assertGet(e).delete()}))}))},t.queryGroupInviteInfo=function(e){return(0,l.sendQueryGroupInvite)(e).then((function(e){var t=e.status,r=e.subject,a=(0,i.default)(e,["status","subject"]),o=new u.default(a);s.default.gadd(o.id);var l=n(26671).default.get(o.id);return{status:t,subject:r,groupMetadata:o,inGroup:!!l&&!l.isReadOnly}}))};var i=a(n(6479)),o=a(n(96486)),s=a(n(48629)),u=a(n(59982)),l=n(69056)},38271:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAndUpdateAllGroupMetadata=function(){return(0,p.queryAllGroups)().then(function(){var e=(0,u.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return t.forEach((function(e){b(e),E(e)})),e.next=5,T(t);case 5:return e.next=7,A(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},t.queryAndUpdateGroupMetadataById=function(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return(0,p.queryGroup)(e).then(function(){var e=(0,u.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T([t]);case 2:return e.next=4,A([t]);case 4:b(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.resolve()},t.updateGroupMetadataTable=T;var i=a(n(81109)),o=a(n(63038)),s=a(n(87757)),u=a(n(48926)),l=a(n(22021)),c=a(n(79140)),d=a(n(13361)),f=n(43883),p=n(86804),h=n(69056),_=n(28367),v=n(45975),m=n(48466),g=n(39888),y=n(38419);function E(){return S.apply(this,arguments)}function S(){return(S=(0,u.default)(s.default.mark((function e(t){var n,r,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,m.getInitialGroupPhash)(t.id.toString()),e.next=3,(0,v.phashV1)(t.participants.map((function(e){return e.id})));case 3:r=e.sent,a=r.substring(2),n!==r&&n!==a&&(0,g.handleSingleMsgMD)(t.id,(0,y.genIntialPhashMismatchMsg)(t.id,c.default.globalUnixTime()));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var t;(0,h.updateSubject)(e.id,e.subject),d.default.gadd(e.id).set({id:e.id,owner:e.owner,creation:e.creation,desc:e.desc,descId:e.descId,descOwner:e.descOwner,descTime:e.descTime,restrict:e.restrict||!1,announce:e.announce||!1,noFrequentlyForwarded:e.noFrequentlyForwarded||!1,ephemeralDuration:e.ephemeralDuration||0,participants:e.participants,support:null!==(t=e.support)&&void 0!==t&&t})}function T(){return w.apply(this,arguments)}function w(){return(w=(0,u.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=5;break}return n=[],e.next=4,(0,_.getStorage)().lock(["group-metadata"],function(){var e=(0,u.default)(s.default.mark((function e(r){var a,u,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o.default)(r,1),u=a[0],e.next=3,u.bulkGet(t.map((function(e){return e.id.toString()})));case 3:l=e.sent,n=t.map((function(e,t){var n,r,a,o=l[t],s={subject:e.subject,subjectTime:e.subjectTime||0},u={announce:e.announce,a_v_id:e.a_v_id||0},c={desc:e.desc,descId:e.descId,descOwner:null===(n=e.descOwner)||void 0===n?void 0:n.toString(),descTime:e.descTime||0};if(o){var d=o.subjectTime||0,f=o.a_v_id||0,p=o.descTime||0;d>s.subjectTime&&(s={subject:o.subject,subjectTime:d}),f>u.a_v_id&&(u={announce:o.announce,a_v_id:f}),p>c.descTime&&(c={desc:o.desc,descId:o.descId,descOwner:o.descOwner,descTime:p})}return(0,i.default)((0,i.default)((0,i.default)({id:e.id.toString(),creation:e.creation,owner:null===(r=e.owner)||void 0===r?void 0:r.toString(),restrict:e.restrict,noFrequentlyForwarded:e.noFrequentlyForwarded,ephemeralDuration:e.ephemeralDuration||0,size:e.size||0,support:null!==(a=e.support)&&void 0!==a&&a},s),c),u)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",(0,f.getGroupMetadataTable)().bulkCreateOrMerge(n));case 5:return e.next=7,r.resolve();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return C.apply(this,arguments)}function C(){return(C=(0,u.default)(s.default.mark((function e(t){var n,a,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=8;break}return e.next=3,(0,f.getParticipantTable)().bulkGet(t.map((function(e){return e.id.toString()})));case 3:return n=e.sent,a=new Map,n.forEach((function(e){return e&&a.set(e.groupId,e.senderKey)})),i=t.map((function(e){var t,n=[],r=[],i=e.id.toString(),o=a.get(i)||new Map;return null===(t=e.participants)||void 0===t||t.forEach((function(e){e.isAdmin&&r.push(e.id),n.push(e.id),o.set(String(e.id),!1)})),{groupId:i,participants:n.map(String),admins:r.map(String),senderKey:o,rotateKey:!1,deviceSyncComplete:!1}})),e.abrupt("return",(0,f.getParticipantTable)().bulkCreateOrReplace(i));case 8:return e.next=10,r.resolve();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},22350:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateParticipants=function(){return d.apply(this,arguments)},t.addParticipants=function(){return f.apply(this,arguments)},t.removeParticipants=function(e,t,a,i){if(s.default.supportsFeature(s.default.F.MD_BACKEND))return null==a?r.reject(new Error("removeParticipants: incoming change missing version id")):(0,l.updateParticipants)(e,{action:l.PARTICIPANT_OPERATION.REMOVE,participants:t,version:a,prevVersion:i}).catchType(l.GroupUnSyncedError,(function(){__LOG__(3)`removeParticipants: out-of-sync group notification`,(0,n(69056).sendQueryGroup)(e)}));return r.resolve()},t.demoteParticipants=function(){return p.apply(this,arguments)},t.promoteParticipants=function(){return h.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(22021)),u=n(24963),l=n(10566),c=n(75793);function d(){return(d=(0,o.default)(i.default.mark((function e(t,n,a){var o,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=8;break}return o=[],u=[],n.forEach((function(e){e.isAdmin&&u.push(e.id),o.push(e.id)})),e.next=6,_(o);case 6:return c=e.sent,e.abrupt("return",(0,l.replaceParticipants)(t,o,u,c,a));case 8:return e.next=10,r.resolve();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,o.default)(i.default.mark((function e(t,a,o,u){var c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=7;break}if(null!=o){e.next=3;break}throw new Error("addParticipants: incoming change missing version id");case 3:return e.next=5,_(a);case 5:return c=e.sent,e.abrupt("return",(0,l.updateParticipants)(t,{action:l.PARTICIPANT_OPERATION.ADD,participants:a,deviceIds:c,version:o,prevVersion:u}).catchType(l.GroupUnSyncedError,(function(){__LOG__(3)`addParticipants: out-of-sync group notification`,(0,n(69056).sendQueryGroup)(t)})));case 7:return e.next=9,r.resolve();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,o.default)(i.default.mark((function e(t,a,o,u){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=4;break}if(null!=o){e.next=3;break}throw new Error("demoteParticipants: incoming change missing version id");case 3:return e.abrupt("return",(0,l.updateParticipants)(t,{action:l.PARTICIPANT_OPERATION.DEMOTE,participants:a,version:o,prevVersion:u}).catchType(l.GroupUnSyncedError,(function(){__LOG__(3)`demoteParticipants: out-of-sync group notification`,(0,n(69056).sendQueryGroup)(t)})));case 4:return e.next=6,r.resolve();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,o.default)(i.default.mark((function e(t,a,o,u){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=4;break}if(null!=o){e.next=3;break}throw new Error("promoteParticipants: incoming change missing version id");case 3:return e.abrupt("return",(0,l.updateParticipants)(t,{action:l.PARTICIPANT_OPERATION.PROMOTE,participants:a,version:o,prevVersion:u}).catchType(l.GroupUnSyncedError,(function(){__LOG__(3)`promoteParticipants: out-of-sync group notification`,(0,n(69056).sendQueryGroup)(t)})));case 4:return e.next=6,r.resolve();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return v.apply(this,arguments)}function v(){return(v=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.syncAndGetDeviceList)(t);case 2:return n=e.sent,r=[],n.forEach((function(e,n){if(e){var a=e.devices,i=e.id;r=r.concat(a.map((function(e){return(0,c.createDeviceWidFromUserAndDevice)(i,e)})))}else r.push(t[n])})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6333:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(0,o.getMaybeMeUser)().equals(e.id)){var n=s.default.get(e.id);n&&("unsubscribe"===e.type?n.set({isSubscribed:!1,stale:!0}):(u(n,e),t&&n.set({stale:!1})))}return r.resolve()};var i=a(n(34263)),o=n(71701),s=a(n(34254));function u(e,t){var n,r=!1;if(void 0===t.type?t.type=e.chatstate.type||"unavailable":"paused"===t.type&&(r=!0,t.type="available"),e.isGroup&&"available"!==t.type&&(t.updateTime=Date.now()),e.isGroup){if(!t.participant)return;t.id=t.participant,t.participant=void 0,n=e.chatstates.gadd(t.id)}else n=e.chatstate;r&&"composing"!==n.type&&"recording"!==n.type||n.set(t),n.expireTimerId&&clearTimeout(n.expireTimerId),"composing"===n.type||"recording"===n.type?n.expireTimerId=setTimeout((function(){return function(e){var t=e.type;"composing"!==t&&"recording"!==t||(e.type="available")}(n)}),i.default.PRESENCE_COMPOSING_TIMEOUT):n.expireTimerId=void 0;var a=e.forceDisplay||e.isOnline||e.isUser&&!e.chatstate.deny;e.set({hasData:!0,forceDisplay:a})}},3131:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.changeProfilePicThumb=function(e,t){return i.default.imageChanged(e,t),r.resolve()};var i=a(n(99838))},79594:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMsgAck=_,t.processOrphanAck=function(e,t){var n=s.default.get(e);if(!n)return r.reject(`processOrphanAck: no msg found for id ${e.toString()}`);return(0,i.getHighestAck)(n).then((function(e){if(e&&e.ack!==n.ack)return _(n,t,e)})).catch((function(){__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("processOrphanAck failed")}))};var i=n(17251),o=n(97223),s=a(n(66312)),u=a(n(12717)),l=n(75793),c=a(n(15657)),d=a(n(22021)),f=a(n(34263)),p=a(n(63056)),h=n(91356);function _(e,t,n){var r=n.ack,a=n.t,i=n.from,s=n.to,_=e.id,v=_.remote,m=_.id;if(e.updateAck(r,a),d.default.supportsFeature(d.default.F.MD_BACKEND)){var g=n.deliveryPrivacyMode;p.default.bspSystemMessageEnabled&&r===f.default.ACK.RECEIVED&&null!=g&&e.isSentByMe&&(0,h.updateBizPrivacyMode)(e.id.remote,g).then((function(){return(0,c.default)(e,g)}))}var y=(0,o.getBridge)();return y.sendAndReceive("msg_collection","updateLastReceipt",{wid:v,t:a}).then((function(){return u.default.isUser(v)?y.sendAndReceive("msg_info_collection","updateInfo",{id:m,from:i,to:s,ack:r,participant:v,t:a}).then((function(){if(t&&u.default.isBroadcast(t)){var e=t instanceof u.default?t:(0,l.createWid)(t);return y.sendAndReceive("msg_info_collection","updateInfo",{id:m,from:i,to:e,ack:r,participant:v,t:a})}})):u.default.isStatusV3(v)?y.sendAndReceive("msg_info_collection","updateInfo",{id:m,from:i,to:v,ack:r,participant:s,t:a}):void 0}))}},90388:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleForActiveMessageRange=b,t._rangeContainsMessage=w,t.handleOfflineForMessageRange=function(){return A.apply(this,arguments)},t.ActiveRangeHandlerAction=t.RangeContain=void 0;var o=i(n(63038)),s=i(n(87757)),u=i(n(43269)),l=i(n(48926)),c=i(n(319)),d=i(n(34263)),f=n(20290),p=a(n(55757)),h=n(75793),_=n(22252),v=new Set,m=n(54302).Mirrored(["DOES_NOT_CONTAIN","CONTAINS_BY_TIMESTAMP","CONTAINS_BY_ADDITIONAL"]);t.RangeContain=m;var g=n(54302).Mirrored(["DropMessage","SkipUI"]);t.ActiveRangeHandlerAction=g;var y=function(e){return e.reduce((function(e,t){return new Set([].concat((0,c.default)(e),(0,c.default)(t)))}),new Set)};function E(){return S.apply(this,arguments)}function S(){return(S=(0,l.default)(s.default.mark((function e(t,n,r){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.action,e.next="archive"===e.t0?3:"markChatAsRead"===e.t0?11:14;break;case 3:if(!t.actionValue.archived){e.next=8;break}return e.next=6,p.handleForArchive(t,r);case 6:e.next=10;break;case 8:return e.next=10,p.handleForUnarchive(t,r);case 10:return e.abrupt("return",v);case 11:return e.next=13,p.handleForMarkAsReadUnread(t,r,!!t.actionValue.read);case 13:case 14:return e.abrupt("return",v);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return T.apply(this,arguments)}function T(){return(T=(0,l.default)(s.default.mark((function e(t,n){var a,i,u,l,c;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.default.SYSTEM_MESSAGE_TYPES.includes(n.type)){e.next=2;break}return e.abrupt("return",v);case 2:return e.next=4,(0,_.getActiveMessageRanges)(t.toString());case 4:return a=e.sent,i=a.map((function(e){return[e,w(e.actionValue.messageRange,n)]})),(u=i.filter((function(e){return(0,o.default)(e,2)[1]===m.CONTAINS_BY_ADDITIONAL})).map((function(e){return(0,o.default)(e,1)[0]}))).forEach((function(e){e.remainingMessages--})),e.next=10,(0,_.bulkUpdateActiveMessageRanges)(u);case 10:return l=i.map((function(e){var t=(0,o.default)(e,2),r=t[0],a=t[1];return E(r,n,a)})),e.next=13,r.all(l);case 13:return c=e.sent,e.abrupt("return",y(c));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){if(null==e)return __LOG__(3)`syncd: missing message range from row.`,m.DOES_NOT_CONTAIN;var n=e.messages,r=e.lastMessageTimestamp;if(null!=t.t&&null!=r&&t.t<(0,f.numberOrThrowIfTooLarge)(r))return m.CONTAINS_BY_TIMESTAMP;var a,i=t.id,o=(0,u.default)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value.key;if(null!=s&&null!=i&&s.id===i.id)return m.CONTAINS_BY_ADDITIONAL}}catch(e){o.e(e)}finally{o.f()}return m.DOES_NOT_CONTAIN}function A(){return(A=(0,l.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,t.forEach((function(e){if(!d.default.SYSTEM_MESSAGE_TYPES.includes(e.type)){var t=n.get(e.id.remote.toString());(null==t||t.t<e.t)&&n.set(e.id.remote.toString(),e)}})),e.next=4,r.all((0,c.default)(n.entries()).map((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];return b((0,h.createWid)(n),r)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},55757:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleForArchive=function(){return c.apply(this,arguments)},t.handleForUnarchive=function(){return d.apply(this,arguments)},t.handleForMarkAsReadUnread=function(){return f.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(22252),s=n(90388),u=r(n(26671)),l=n(75793);function c(){return(c=(0,i.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==s.RangeContain.DOES_NOT_CONTAIN){e.next=5;break}return n(10369).default.setArchive([{id:t.chatId,archive:!1}]),e.next=5,(0,o.removeActiveMessageRange)(t.chatId,t.action);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,i.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==s.RangeContain.DOES_NOT_CONTAIN&&0!==t.remainingMessages){e.next=3;break}return e.next=3,(0,o.removeActiveMessageRange)(t.chatId,t.action);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,i.default)(a.default.mark((function e(t,r,i){var c,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==s.RangeContain.DOES_NOT_CONTAIN){e.next=5;break}return e.next=3,(0,o.removeActiveMessageRange)(t.chatId,t.action);case 3:e.next=10;break;case 5:if(0!==t.remainingMessages){e.next=10;break}return(c=u.default.get((0,l.createWid)(t.chatId)))&&(d=n(54865),i?d.markSeen(c):d.markUnseen(c)),e.next=10,(0,o.removeActiveMessageRange)(t.chatId,t.action);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},39888:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleSingleMsgMD=function(){return b.apply(this,arguments)},t.handleMsgsMD=function(e,t){var n=t.length;if(!n)return r.resolve();if(!(e instanceof g.default))return r.resolve();for(var a={add:"before",isHistory:!0},i=0;i<n;i++){t[i].invis=!0}var o=(0,h.getBridge)();return o.fireAndForget("msg_collection","trigger",{name:"handle:msg_history",args:{count:t.length}}),(0,v.storeMessages)(t,e,!0).then((function(){(0,S.checkOrphanMutations)(t.map((function(e){return e.id.toString()})),[e.toString()])})).then((function(){return o.sendAndReceive("msg_collection","processMultipleMessages",{chatId:e,msgObjs:t,meta:a,chatMsgsCollection:null})})).catchType(p.LogoutDrop,(function(){})).catch((function(t){__LOG__(4,void 0,new Error,!0)`Msgs count: ${n} Chat: ${String(e)} Error: ${t.name}, message: ${t.message}, stack: ${t.stack}`,SEND_LOGS("msg_handler for MD: error storing/processing multiple messages")}))},t.handleInitialSyncMsgs=function(e){var t={add:"last",isHistory:!0},n=Object.keys(e).map((function(n){return(0,h.getBridge)().sendAndReceive("msg_collection","processMultipleMessages",{chatId:(0,y.createWid)(n),msgObjs:e[n].msgs,meta:t,chatMsgsCollection:null})}));return r.all([].concat((0,s.default)(n),[(0,v.storeInitialSyncMessages)(e)])).then((function(){var t,n=(t=Array.prototype).concat.apply(t,(0,s.default)(Object.keys(e).map((function(t){return e[t].msgs.map((function(e){return e.id.toString()}))}))));return(0,S.checkOrphanMutations)(n,Object.keys(e))})).then((function(){})).catchType(p.LogoutDrop,(function(){})).catch((function(e){__LOG__(4,void 0,new Error,!0)`Error: ${e.name}, message: ${e.message}, stack: ${e.stack}`,SEND_LOGS("msg_handler for MD: error storing/processing multiple messages")}))},t.handleProgressiveHistorySyncMsgs=function(e,t){return r.resolve().then((function(){return(0,v.storeRecentAndFullHistSyncMessages)(e,t,!0,!0).then((function(){var n=t.map((function(e){return e})),r=e.map((function(e){return e.id.toString()}));return(0,S.checkOrphanMutations)(r,n)})).then((function(){})).catchType(p.LogoutDrop,(function(){})).catch((function(e){__LOG__(4,void 0,new Error,!0)`Error: ${e.name}, message: ${e.message}, stack: ${e.stack}`,SEND_LOGS("handleProgressiveHistorySyncMsgs: error storing/processing multiple messages")}))}))};var o=i(n(87757)),s=i(n(319)),u=i(n(48926)),l=n(53615),c=n(80835),d=i(n(79140)),f=i(n(34263)),p=n(14650),h=n(97223),_=n(29364),v=n(69449),m=a(n(59502)),g=i(n(12717)),y=n(75793),E=n(90388),S=n(67669);function b(){return(b=(0,u.default)(o.default.mark((function e(t,n){var a,i,s,y,b,T=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T.length>2&&void 0!==T[2]&&T[2],i={add:"after",update:!1,isHistory:!1},s=(0,h.getBridge)(),y=!1,e.next=6,(0,E.handleForActiveMessageRange)(t,n);case 6:if(!(b=e.sent).has(E.ActiveRangeHandlerAction.DropMessage)){e.next=9;break}return e.abrupt("return");case 9:if(y=b.has(E.ActiveRangeHandlerAction.SkipUI),e.prev=10,!g.default.isStatusV3(t)){e.next=14;break}return e.next=14,s.sendAndReceive("status_v3_collection","handleUpdate",{rawMsg:n,checksum:null,isMsgUpdate:!1});case 14:if(!a){e.next=19;break}return e.next=17,(0,v.updateMessage)(n);case 17:e.next=21;break;case 19:return e.next=21,(0,c.promiseLoop)(function(){var e=(0,u.default)(o.default.mark((function e(a,i,s){var u,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,l.delayMs)(m.expBackoff(s,12e4,1e3,.1)),e.prev=1,e.next=4,(0,v.storeMessages)([n],t);case 4:if(n.type!==f.default.MSG_TYPE.GROUPS_V4_INVITE){e.next=8;break}return c=n.id.toString(),e.next=8,(0,_.persistGroupInviteV4Msg)(c,{id:c,from:n.from.toString(),to:n.to.toString(),groupId:n.inviteGrp,expiration:parseInt(n.inviteCodeExp,10),expired:d.default.globalUnixTime()>=parseInt(n.inviteCodeExp,10)});case 8:__LOG__(2,void 0,void 0,void 0,["handleSingleMsgMD"])`storeMessages loop`,a(),e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(1),__LOG__(2,void 0,void 0,void 0,["handleSingleMsgMD"])`storeMessages loop: failed with error ${e.t0}.`,!(s>3)){e.next=18;break}return __LOG__(3)`storeMessages loop: Gave up after ${s} tries`,e.abrupt("return",r.reject(e.t0));case 18:return e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}());case 21:return __LOG__(2,void 0,void 0,void 0,["messaging"])`handleSingleMsgMD: msgId::${n.id.id}, write message to db done, overwrite: ${a}`,e.prev=22,e.next=25,(0,S.checkOrphanMutations)([n.id.toString()],[t.toString()]);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(22),__LOG__(4,void 0,new Error)`handleSingleMsgMD: checkOrphanMutations failed during handleSingleMsgMD for: ${String(n.id)} chat: ${String(t)} Error: ${e.t0.name}, message: ${e.t0.message}, stack: ${e.t0.stack}`;case 30:if(y){e.next=35;break}return n.recvFresh=!0,n.isNewMsg=!0,e.next=35,s.sendAndReceive("msg_collection","processMultipleMessages",{chatId:t,msgObjs:[n],meta:i});case 35:e.next=42;break;case 37:if(e.prev=37,e.t1=e.catch(10),!(e.t1 instanceof p.LogoutDrop)){e.next=41;break}return e.abrupt("return");case 41:__LOG__(4,void 0,new Error,!0,["messaging"])`Msg: ${String(n.id)} chat: ${String(t)} Error: ${e.t1.name}, message: ${e.t1.message}, stack: ${e.t1.stack}`,SEND_LOGS("msg_handler for MD: error storing/processing single message");case 42:case"end":return e.stop()}}),e,null,[[10,37],[22,27]])})))).apply(this,arguments)}},19761:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMsgInfo=function(e,t,n,r){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return function(e,t,n,r){var a=e.id;s.default.isUser(a.remote)?function(e,t,n,r){t===u.PLAYED?(e.played.get(n)||(e.playedRemaining-=1),e.played.add({id:n,t:r})):t===u.READ?(e.read.get(n)||(e.readRemaining-=1),e.read.add({id:n,t:r})):t===u.RECEIVED&&(e.delivery.get(n)||(e.deliveryRemaining-=1),e.delivery.add({id:n,t:r}))}(e,t,n,r):function(e,t,n,r){var a=u.CLOCK;e.played.get(n)?a=u.PLAYED:e.read.get(n)?a=u.READ:e.delivery.get(n)&&(a=u.RECEIVED);if(t<=a)return;if(t>u.RECEIVED){var i=e.delivery.get(n);i?e.delivery.remove(i):e.deliveryRemaining-=1}if(t>u.READ){var o=e.read.get(n);o?e.read.remove(o):e.readRemaining-=1}t===u.PLAYED?(e.played.get(n)||(e.playedRemaining-=1),e.played.add({id:n,t:r})):t===u.READ?(e.read.get(n)||(e.readRemaining-=1),e.read.add({id:n,t:r})):t===u.RECEIVED&&(e.delivery.get(n)||(e.deliveryRemaining-=1),e.delivery.add({id:n,t:r}))}(e,t,n,r)}((0,o.unproxy)(e),t,n,r);return function(e,t,n,r){var a=e.id;if(!s.default.isUser(a.remote)){if(t!==u.RECEIVED){var i=e.delivery.get(n);i&&e.delivery.remove(i)}if(t!==u.READ){var o=e.read.get(n);o&&e.read.remove(o)}if(t!==u.PLAYED){var l=e.played.get(n);l&&e.played.remove(l)}}t===u.PLAYED?(e.played.get(n)||(e.playedRemaining-=1),e.played.add({id:n,t:r})):t===u.READ?(e.read.get(n)||(e.readRemaining-=1),e.read.add({id:n,t:r})):t===u.RECEIVED&&(e.delivery.get(n)||(e.deliveryRemaining-=1),e.delivery.add({id:n,t:r}))}((0,o.unproxy)(e),t,n,r)};var a=r(n(34263)),i=r(n(22021)),o=n(89305),s=r(n(12717)),u=a.default.ACK},58645:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cancelOrDeclinePaymentRequest=function(){return u.apply(this,arguments)},t.fulfillPaymentRequest=function(){return l.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(69841),s=n(24003);function u(){return(u=(0,i.default)(a.default.mark((function e(t){var r,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(66312).default,i=new r.constructor.model(t),e.next=4,(0,o.processPaymentMessages)([i]);case 4:(u=e.sent)&&u.forEach((function(e){var n=r.get(e.id);n?n.set((0,s.hydrateMessage)(e),{merge:!0}):e.id===t.id.toString()&&(t.type=e.type,t.templateParams=e.templateParams)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,i.default)(a.default.mark((function e(t){var r,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(66312).default,i=new r.constructor.model(t),e.next=4,(0,o.processPaymentMessages)([i]);case 4:(u=e.sent)&&u.forEach((function(e){var t=r.get(e.id);t&&t.set((0,s.hydrateMessage)(e),{merge:!0})}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},77576:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t._processMultipleMessages=function(){return A.apply(this,arguments)};var o=i(n(87757)),s=i(n(43269)),u=i(n(48926)),l=i(n(2298)),c=i(n(10212)),d=i(n(79140)),f=i(n(34263)),p=i(n(48198)),h=n(71701),_=i(n(50184)),v=i(n(22021)),m=n(16952),g=n(87261),y=a(n(81452)),E=i(n(25506)),S=i(n(50785)),b=i(n(63056)),T=n(24003),w=i(n(12717));function A(){return(A=(0,u.default)(o.default.mark((function e(t,a,i,u){var A,O,M,I,k,P,R,D,N,L,x,U,F,G,B,j,Y,K,W,V,H,$,z,q,J,Q;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A=(0,_.default)(t,a,i,u),O=A.filteredRecs,M=A.reorderRecs,I=A.updates,e.next=3,r.all(I);case 3:if(k=n(26671).default,P=n(66312).default,0!==O.length||0!==M.length){e.next=8;break}return t&&i.pendingMsgsDone&&(R=k.get(t))&&(R.pendingMsgs=!1),e.abrupt("return",a.map((function(e){return P.get(e.id)})).filter((function(e){return e})));case 8:if(t){e.next=10;break}return e.abrupt("return",C(O).then((function(){return a.map((function(e){return P.get(e.id)})).filter((function(e){return e&&!!e.chat}))})));case 10:if(!w.default.isStatusV3(t)){e.next=16;break}N=a[0],L=N.id.fromMe?(0,h.getMaybeMeUser)():N.author,D=n(66005).default.find(L),e.next=25;break;case 16:if(!(0,T.shouldCreateChatWithMsgs)(a)){e.next=21;break}D=k.find(t),e.next=25;break;case 21:if(null!=(x=k.get(t))){e.next=24;break}return e.abrupt("return",[]);case 24:D=r.resolve(x);case 25:return e.next=27,D;case 27:return U=e.sent,e.next=30,C(O);case 30:if(F=e.sent,G="after"===i.add||"last"===i.add,B=!i.isHistory,K=!1,"unread"===i.add?(j=u,U.msgChunks.push(j),Y=i.firstUnreadKey):"last"===i.add&&i.resume?(j=u,K=!0):j="function"==typeof u?u():u,(0,l.default)(a,F,M,U,G,j||U.msgs,Y,K),i.pendingMsgsDone&&(U.pendingMsgs=!1),v.default.supportsFeature(v.default.F.MEDIA_AUTO_DOWNLOAD)){W=(0,s.default)(F);try{for(W.s();!(V=W.n()).done;)H=V.value,c.default.enqueue(H.safe())}catch(e){W.e(e)}finally{W.f()}}if(B&&w.default.isBroadcast(t)&&!w.default.isStatusV3(t)&&F.forEach((function(e){e&&e.recvFresh&&!e.isNotification&&y.broadcastFanout(e)})),!v.default.supportsFeature(v.default.F.RECENT_EMOJI_SYNC)){e.next=49;break}$=0;case 41:if(!($<F.length)){e.next=49;break}if(!((z=F[$])&&z.isNewMsg&&z.isSentByMe&&z.containsEmoji)){e.next=46;break}return E.default.throttledSync(),e.abrupt("break",49);case 46:$++,e.next=41;break;case 49:return v.default.supportsFeature(v.default.F.MD_BACKEND)&&b.default.webServerStickerPanel&&(q=F.map((function(e){if(e&&e.isSentByMe&&e.type===f.default.MSG_TYPE.STICKER){var t=e.mediaData,n=e.mediaObject,r=e.id.toString(),a=null==n?void 0:n.entries.entries[0];return[{id:t.filehash,directPath:t.directPath,filehash:t.filehash,encFilehash:(null==a?void 0:a.encFilehash)||t.encFilehash,mediaKey:(null==a?void 0:a.mediaKey)||t.mediaKey,mediaKeyTimestamp:null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:d.default.globalUnixTime(),width:t.fullWidth,height:t.fullHeight,size:t.size,mimetype:t.mimetype,type:g.OUTWARD_TYPES.STICKER,index:0},e.t,r]}})).filter(Boolean),n(77943).default.enqueue(q)),v.default.isRecentStickersEnabled()&&(J=F.map((function(e){if(e&&e.isNewMsg&&e.isSentByMe&&e.type===f.default.MSG_TYPE.STICKER){var t=e.mediaData;return{id:t.filehash,directPath:t.directPath,filehash:t.filehash,encFilehash:t.encFilehash,mediaKey:t.mediaKey,mediaKeyTimestamp:null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:d.default.globalUnixTime(),width:t.fullWidth,height:t.fullHeight,size:t.size,mimetype:t.mimetype,type:g.OUTWARD_TYPES.STICKER,index:0}}})).filter(Boolean),S.default.enqueue(J)),b.default.webDownloadDocumentThumbMmsEnabled&&F.map((function(e){return e.asDoc})).filter(Boolean).forEach((function(e){(0,p.default)({msg:e,isPreload:!0})})),v.default.supportsFeature(v.default.F.HIGH_QUALITY_LINK_PREVIEWS)&&b.default.webDownloadLinkThumbMmsEnabled&&F.map((function(e){return e.asUrl})).filter(Boolean).forEach((function(e){(0,p.default)({msg:e,isPreload:!0})})),v.default.supportsFeature(v.default.F.DOWNLOAD_STATUS_THUMB_MMS)&&w.default.isStatusV3(t)&&(Q=(0,h.getLastStatusUsage)(),864e5,(null==Q||Date.now()-Q<12096e5)&&F.map((function(e){return e.asImage||e.asVideo})).filter(Boolean).forEach((function(e){(0,m.downloadStatusV3Thumbnail)({msg:e,isPreload:!0})}))),e.abrupt("return",a.map((function(e){return P.get(e.id)})).filter((function(e){return e})));case 55:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){var t=n(66312).default.add(e,{merge:!0});return v.default.supportsFeature(v.default.F.MD_BACKEND)&&(t=t.filter((function(t,n){return null==t&&(__LOG__(4,void 0,new Error,!0)`Get empty message with id ${e[n].id}.`,SEND_LOGS("msgPrepWork-empty-message")),null!=t}))),r.all(t.map((function(e){return e.waitForPrep().catch((function(e){__LOG__(4,void 0,new Error,!0)`Assertion failed! ${String(e)}`,SEND_LOGS("bad-msg-prep")}))}))).then((function(){return t}))}},2298:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i,o,s,u){var l=function(e,t,n,r,a){var i,o,s,u={},l={},c=n.length,d=a;if(0===c)return{msgs:t,collection:d};for(i=0;i<c;i++)o=n[i],l[o.id]=o;for(c=t.length,i=0;i<c;i++)(o=t[i])&&(u[o.id]=o);var f=[];for(c=e.length,i=0;i<c;i++)if((o=e[i])&&((s=u[o.id])&&f.push(s),s=l[o.id]))if(s.recvFresh)f.push(s),r.removeMsg(s),s.unset("recvFresh");else{var p=r.getAllCMCs().find((function(e){return e.get(s.id)}));a&&p===a||(p?(p.forEach((function(e){f.push(e),delete l[e.id]})),p===r.msgs?(r.replaceMsgsCollection(a),d=r.msgs):(r.notifyMsgCollectionMerge(a,p,a),r.removeMsgsCollection(p))):(__LOG__(3)`models:Msg:reorder trying to merge CMC of orphaned message ${o.id}`,f.push(l[o.id])))}return{msgs:f,collection:d}}(e,t,n,r,o);a.addRecordsToChat(l.msgs,r,i,l.collection,s,u)};var a=r(n(81452))},50184:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,a){var b=[],T=[],w=[],A=n(26671).default,C=n(66312).default;return t.forEach((function(t){var O;t.id instanceof p.default||(__LOG__(3)`_processMultipleMessages: el.id is not a MsgKey ${(new Error).stack}`,u.upload({reason:"forgot-to-create-msgkey"}),t.id=new p.default({from:t.from,to:t.to,id:t.id,participant:t.participant,selfDir:t.self})),(0,y.isString)(e)&&S.default.isBroadcast(e)&&delete t.broadcast,"ptt"===t.type&&!t.id.fromMe&&t.ack<l.default.ACK.CLOCK&&(t.ack=l.default.ACK.CLOCK),null!=t.hydratedButtons&&((O=t).buttons=new g.default,O.buttons.add(O.hydratedButtons.map((function(e,t){var n,r,a=`${null!=e.index?e.index:t}`;return e.quickReplyButton?new m.default({id:a,displayText:e.quickReplyButton.displayText,selectionId:e.quickReplyButton.id,subtype:"quick_reply"}):e.callButton?new m.default({id:a,displayText:e.callButton.displayText,phoneNumber:e.callButton.phoneNumber,subtype:"call"}):new m.default({id:a,displayText:null===(n=e.urlButton)||void 0===n?void 0:n.displayText,url:null===(r=e.urlButton)||void 0===r?void 0:r.url,subtype:"url"})})))),null!=t.dynamicReplyButtons&&function(e){e.replyButtons=new s.default,e.replyButtons.add(e.dynamicReplyButtons.map((function(e){var t=e.buttonId,n=e.buttonText;return new o.default({id:t,displayText:null==n?void 0:n.displayText})})))}(t);var M=C.get(t.id);if(t.type===l.default.MSG_TYPE.PROTOCOL&&"ephemeral_setting"!==t.subtype)switch(t.subtype){case"revoke":if(M=C.get(t.protocolMessageKey)){var I=new C.constructor.model(t);S.default.equals(M.sender,I.sender)?(S.default.isStatusV3(e)&&M.msgChunk&&M.msgChunk.remove(M),(0,v.revoke)(M,I.id),S.default.isStatusV3(e)&&n(66005).default.find(M.sender).then((function(e){d.default.supportsFeature(d.default.F.QUERY_STATUS_V_3_THUMBNAIL)&&M&&M.msgChunk&&M.msgChunk.length!==e.totalCount&&E.default.statusQueryThumbnail(e.id)}))):__LOG__(3)`model:Msg:processMM revoke sender mismatch ${I.id.toString()}, ${M.id.toString()}`}else t.protocolMessageKey.remote.equals(t.id.remote)&&(null==t.protocolMessageKey.participant&&null==t.id.participant||t.protocolMessageKey.participant.equals(t.id.participant))&&(0,f.processRevokeMsgs)([t.protocolMessageKey.toString()],[t.id.toString()]);break;case"ephemeral_sync_response":var k=A.get(t.id.remote);k&&(0,c.maybeUpdateEphemeralSetting)(k,t.ephemeralDuration,t.ephemeralSettingTimestamp);break;default:__LOG__(2)`unknown protocolMessage ${t.id.toString()}`}else if(M&&!M.asRevoked){for(var P in t.ack<M.ack&&delete t.ack,t)t.hasOwnProperty(P)&&void 0===t[P]&&delete t[P];t.id.fromMe&&!M.deprecatedMms3Url&&t.deprecatedMms3Url&&(t.phoneUploading=!1),r.isHistory&&(t.isNewMsg=!1);var R=M.t?i.default.omit(t,["t","id","from","to"]):t,D=M.applyUpdate(R).then((function(){return M}));if(w.push(D),S.default.isBroadcast(M.id.remote)){var N=h.getBroadcastFanoutKeys(M);N&&N.forEach((function(e){var t=C.get(e);t&&w.push(t.applyUpdate(R).then((function(){return M})))}))}r.isHistory&&(M.recvFresh||a)&&!M.search?(__LOG__(3)`model:Msg:handle:processMM:${M.recvFresh?"dup:":"overlap:"}${String(M.id)}`,T.push(M)):r.isHistory&&M.search?(M.search=!1,__LOG__(3)`model:Msg:handle:processMM load search as history ${String(M.id)}`,b.push({id:M.id})):"search"===r.add&&b.push({id:M.id})}else{"payment_action_request_declined"===t.subtype||"payment_transaction_request_cancelled"===t.subtype?w.push((0,_.cancelOrDeclinePaymentRequest)(t)):t.type===l.default.MSG_TYPE.PAYMENT&&"send"===t.subtype&&w.push((0,_.fulfillPaymentRequest)(t)),h.typeIsMms(t)&&!t.deprecatedMms3Url&&(t.phoneUploading=t.id.fromMe&&t.ack===l.default.ACK.CLOCK);var L=A.get(t.id.remote);"search"===r.add&&(t.search=!0),r.update||b.push(t),!r.isHistory&&"search"!==r.add&&L&&function(e,t){if(!e.isNewMsg||!e.recvFresh)return __LOG__(3,void 0,void 0,!0)`processLiveMessage should not be called with history message id ${e.id.toString()}`,void SEND_LOGS("bad-process-live-message-call");e.type===l.default.MSG_TYPE.GP2&&"delete"===e.subtype&&(t.isReadOnly=!0);if(t.isUser){var n,r,a=null!==(n=e.ephemeralDuration)&&void 0!==n?n:0,i=!1;e.type===l.default.MSG_TYPE.PROTOCOL&&"ephemeral_setting"===e.subtype?r=e.t:e.ephemeralSettingTimestamp&&(r=e.ephemeralSettingTimestamp,i=!0);var o=!0;if(null!=r&&(o=(0,c.maybeUpdateEphemeralSetting)(t,a,r,i)),d.default.supportsFeature(d.default.F.MD_BACKEND)&&!h.isNotification(e.type,e.subtype)){var s,u,f=null!==(s=e.ephemeralDuration)&&void 0!==s?s:0,p=null!==(u=t.getEphemeralSetting())&&void 0!==u?u:0;e.ephemeralOutOfSync=f!==p&&!o}}}(t,L),t.ephemeralOutOfSync&&__LOG__(2)`ephemeralOutOfSync msgId=${t.id.toString()} chatId=${null==L?void 0:L.id.toString()}`}})),{filteredRecs:b,reorderRecs:T,updates:w}};var i=a(n(96486)),o=a(n(83662)),s=a(n(23280)),u=r(n(70371)),l=a(n(34263)),c=n(43179),d=a(n(22021)),f=n(69449),p=a(n(5315)),h=r(n(81452)),_=n(58645),v=n(20643),m=a(n(47633)),g=a(n(70391)),y=n(88828),E=a(n(23306)),S=a(n(12717))},20643:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendRevoke=function(e,t){return function(e,t){var n=e.id,a=e.t;if(!n.fromMe)return r.reject("revoking received message");var i=void 0;u.default.supportsFeature(u.default.F.MD_BACKEND)&&n.remote.isGroup()&&(i=(0,S.getMeUser)());var o=new h.default({id:(0,v.default)(),remote:e.id.remote,fromMe:!0,participant:i}),l={id:o,to:n.remote,t:a,type:s.default.MSG_TYPE.PROTOCOL,subtype:"revoke",protocolMessageKey:n,clearMedia:!!t,local:!0};return(0,d.storeMessages)([l],e.chat.id).catch((function(e){throw __LOG__(4,!0,new Error,!0)`_sendRevoke: failed to storeMessages into storage`,SEND_LOGS("storeMessages failed"),e})).then((function(){return(0,m.sendMsgRecord)(new p.default(l))})).then((function(t){if(t===g.SendMsgResult.OK){var n=Math.trunc(Date.now()/1e3-e.t);return new f.default.SendRevokeMessage({messageType:e.getWamMessageType(),messageMediaType:e.getWamMediaType(),revokeSendDelay:n}).commit(),T(e,o).then((function(){return g.SendMsgResult.OK}))}return r.resolve(g.SendMsgResult.ERROR_UNKNOWN)}))}((0,y.unproxy)(e),t)},t.revoke=T;var o=i(n(96486)),s=i(n(34263)),u=i(n(22021)),l=n(42810),c=a(n(16952)),d=n(69449),f=i(n(8643)),p=i(n(16551)),h=i(n(5315)),_=a(n(81452)),v=i(n(75554)),m=n(79603),g=n(67298),y=n(89305),E=i(n(12717)),S=n(71701),b=i(n(45684));function T(e,t){return function(e,t){return(0,d.processRevokeMsgs)([e.id.toString()],[t.toString()]).catch((function(e){throw __LOG__(4,!0,new Error,!0)`_revoke: failed to process revoke message`,SEND_LOGS("removeMessagesFromHistory failed"),e})).then((function(){n(6705).default.removeAllLabelsMD(e),_.typeIsMms(e)&&c.deregisterMsg(e),e.chat&&e.chat.removeFromCollection(e),e.trigger("revoked");var r=e.getCollection(),a=e.id;e.msgChunk&&e.msgChunk.replaceId(a,t),r.replaceId(a,t);var i={id:t,type:s.default.MSG_TYPE.REVOKED,body:void 0,caption:void 0,clientUrl:void 0,deprecatedMms3Url:void 0,loc:void 0,lat:void 0,lng:void 0,isLive:void 0,accuracy:void 0,speed:void 0,degrees:void 0,comment:void 0,sequence:void 0,shareDuration:void 0,finalLat:void 0,finalLng:void 0,finalAccuracy:void 0,finalThumbnail:void 0,finalSpeed:void 0,finalDegrees:void 0,finalTimeOffset:void 0,title:void 0,description:void 0,canonicalUrl:void 0,matchedText:void 0,thumbnail:void 0,richPreviewType:void 0,doNotPlayInline:void 0,quotedMsg:void 0,quotedStanzaID:void 0,quotedRemoteJid:void 0,quotedParticipant:void 0,mediaData:void 0,mentionedJidList:void 0,vcardList:void 0,star:!1};if(e.set(i),e.trigger("change:msgKey",{newKey:t,oldKey:a}),e.chat&&(e.chat.updateMediasCountOnMsg(e,!0),a.equals(e.chat.lastReceivedKey)&&(0,l.setLastReceivedKey)(e.chat.id,t).then((function(){e.chat.lastReceivedKey=t})),e.chat.composeQuotedMsg===e&&(e.chat.composeQuotedMsg=null)),e.isLive&&n(90481).default.removeMsg(e),E.default.isBroadcast(a.remote)){var d=_.getBroadcastFanoutKeys(a),f=_.getBroadcastFanoutKeys(t);if(!d||!f||d.length!==f.length)return void __LOG__(2)`cannot fanout revoke: ${String(d)} ${String(f)}`;o.default.zip(d,f).forEach((function(e){var t=r.get(e[0]);t&&T(t,e[1])})),u.default.supportsFeature(u.default.F.MD_BACKEND)&&b.default.purge([String(e.rowId)])}}))}((0,y.unproxy)(e),t)}},79603:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendMsgRecord=function(e){return(0,i.promiseCallSync)((function(){var t,a=e.id,i=n(26671).default;i.find(a.remote).then((function(e){e.isTrusted()||(0,y.sendNotSpam)(e).catch((function(){}))})),S.default.isBroadcast(e.to)&&(t=(0,v.broadcastFanout)(e)),e.isNewMsg=!0;var b,T=e.type===u.default.MSG_TYPE.PROTOCOL&&"revoke"===e.subtype;if(!e.isGroupMsg&&!T&&s.default.get(e.to))return r.reject(new l.default("Contact is blocked",c.default.assertGet(e.to)));T||(b=new h.default.WebcMessageSend({messageType:e.getWamMessageType(),messageMediaType:e.getWamMediaType(),messageIsForward:Boolean(e.isForwarded)}));var w=n(66312).default;return i.find(e.id.remote).then((function(t){return(0,E.sendSeen)(t),w.trigger(u.default.NEW_MSG_SENT),(0,o.promiseProps)({reply:(0,m.sendMsgRecord)(e),chat:t})})).then((function(n){var r=n.reply,o=n.chat,s=a.remote,l=(0,f.getMaybeMeUser)(),c=a.fromMe&&S.default.equals(a.remote,l)?3:r.data?r.data.ack:1;return e.updateAck(c,r.t),b&&(b.markMessageSendT(),b.commit()),e.type!==u.default.MSG_TYPE.PROTOCOL&&(0,p.setLastReceivedKey)(o.id,a).then((function(){o.lastReceivedKey=a})),w.updateLastReceipt(s,r.t),S.default.isBroadcast(s)&&(t?t.forEach((function(e){var t=new _.default({from:l,to:e,id:a.id}),n=w.get(t);n&&(n.ack=u.default.ACK.SENT,w.updateLastReceipt(e,n.t),null==n.ephemeralStartTimestamp&&n.updateEphemeralStartTimestamp(n.t),i.find(e).then((function(e){(0,p.setLastReceivedKey)(e.id,t).then((function(){e.lastReceivedKey=t}))})))})):__LOG__(2)`model:msg:createRecord bclist server ack, no recipients`),g.SendMsgResult.OK})).catchType(d.ServerStatusCodeError,(function(t){if(408!==t.status){var n=e.toJSON();__LOG__(2)`json.body: ${JSON.stringify(n.body)}`,n.body=void 0,__LOG__(2,!0)`Json: ${JSON.stringify(n)}`,__LOG__(4,void 0,new Error,!0)`Phone responded ${t.status}`,SEND_LOGS("send-not-200")}return g.SendMsgResult.ERROR_NETWORK})).catch((function(t){return __LOG__(3)`model:msg:createRecord dropped msg: ${e.id.toString()}`,__LOG__(4,void 0,new Error,!0)`Got error ${String(t)}`,SEND_LOGS("send-msg-error"),g.SendMsgResult.ERROR_UNKNOWN}))})).finally((function(){e.sendDeferred&&e.sendDeferred.resolve()}))};var i=n(39951),o=n(46154),s=a(n(76088)),u=a(n(34263)),l=a(n(70167)),c=a(n(48629)),d=n(14650),f=n(71701),p=n(42810),h=a(n(8643)),_=a(n(5315)),v=n(81452),m=n(92793),g=n(67298),y=n(82565),E=n(54865),S=a(n(12717))},67298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendMsgResult=void 0;var r=n(54302).Mirrored(["OK","ERROR_NETWORK","ERROR_EXPIRED","ERROR_CANCELLED","ERROR_UPLOAD","ERROR_UNKNOWN"]);t.SendMsgResult=r},15657:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return d.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=r(n(63056)),s=r(n(12717)),u=n(6603),l=n(76007),c=n(322);function d(){return(d=(0,i.default)(a.default.mark((function e(t,n){var r,i,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.default.bspSystemMessageEnabled){e.next=2;break}return e.abrupt("return");case 2:if(s.default.isUser(t.id.remote)){e.next=4;break}return e.abrupt("return");case 4:if(!(null!=(r=t.privacyModeWhenSent)&&r.privacyModeTs>n.privacyModeTs)){e.next=7;break}return e.abrupt("return");case 7:if(i=(0,u.getReducedPrivacyMode)(n),l=(0,u.getReducedPrivacyMode)(r),i!==l){e.next=11;break}return e.abrupt("return");case 11:if(null==t.bizPrivacyStatus){e.next=14;break}return __LOG__(3)`msg.bizPrivacyStatus exist already, we can not assign a new value anymore`,e.abrupt("return");case 14:return d=f(i),t.bizPrivacyStatus=d,e.next=18,(0,c.getTable)().merge(t.id.toString(),{bizPrivacyStatus:d});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){switch(e){case u.ReducedPrivacyMode.E2EE:return l.WebMessageInfoBizPrivacyStatus.E2EE;case u.ReducedPrivacyMode.BSP:return l.WebMessageInfoBizPrivacyStatus.BSP;case u.ReducedPrivacyMode.FB:return l.WebMessageInfoBizPrivacyStatus.FB}}},21301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,n,a){return(0,r.queryOrder)(e,t,n,a)},t.createOrder=function(e,t){return(0,r.createOrder)(e,t)};var r=n(21821)},59078:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryProduct=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return(0,u.queryProduct)(e,t,n,r)},t.queryCatalog=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,i=arguments.length>5?arguments[5]:void 0;return(0,u.queryCatalog)(e,t,n,r,a,i)},t.queryProductList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;return(0,u.queryProductList)(e,t,n,r)},t.appealProduct=function(e,t){return(0,u.appealProduct)(e,t)},t.reportProduct=function(e,t,n){return(0,u.reportProduct)(e,t,n)},t.createBusinessCatalog=function(){return(0,u.createCatalog)()},t.addProduct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return(0,u.addProduct)(e,t,n)},t.editProduct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return(0,u.editProduct)(e,t,n)},t.deleteProducts=function(e){return(0,u.deleteProducts)(e)},t.sendProductToChat=function(e,t,n){var r=e.catalogWid;if(!t)return;var u=t.productCollection.get(e.id),c=u?(0,l.unproxy)(u):(0,l.unproxy)(e);if(!c)return;var d=c.productImageCollection.head(),f=d&&d.mediaData;if(!f)return;a.default.find(r).then((function(e){i.default.openChatFromUnread(e).then((function(t){if(t){var a=(0,l.unproxy)((0,s.createProductInquiry)(c,r,f,null==n?void 0:n.session.toString()));e.composeQuotedMsg=a,i.default.focusChatTextInput(e),window.innerWidth<=o.default.LAYOUT_2COLUMNS_MAX_WIDTH&&i.default.closeDrawerRight()}}))}))},Object.defineProperty(t,"createProductCatalog",{enumerable:!0,get:function(){return c.default}});var a=r(n(26671)),i=r(n(34541)),o=r(n(34263)),s=n(16551),u=n(86763),l=n(89305),c=r(n(50973))},98105:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateProductListHeaderImageRejected=function(e,t){var n,r,i,o=a.default.get(t),s=null==o||null===(n=o.list)||void 0===n||null===(r=n.productListInfo)||void 0===r||null===(i=r.headerImage)||void 0===i?void 0:i.productId;e.id===s&&null!=o&&(o.productHeaderImageRejected=!0)};var a=r(n(66312))},95373:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setProfilePic=function(e,t,n){return _((0,h.unproxy)(e),t,n)},t.deleteProfilePic=function(e){return v((0,h.unproxy)(e))};var o=i(n(67294)),s=n(83180),u=i(n(34541)),l=n(14650),c=a(n(98569)),d=n(71701),f=i(n(89115)),p=n(95872),h=n(89305);function _(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,s.genId)(),i=e.id;if(!e.canSet())return r.reject(new c.ActionError);var h=(0,p.sendSetPicture)(i,t,n);e.pendingPic=t;var v=(0,d.getMaybeMeUser)(),m=i.equals(v)?new s.ActionType(f.default.t(188)):new s.ActionType(f.default.t(119)),g=h.catch((function(){throw __LOG__(3)`models:ProfilePicThumb:setPicture dropped`,i.equals(v)?new s.ActionType(f.default.t(187)):new s.ActionType(f.default.t(118))})).catchType(l.ServerStatusCodeError,(function(r){if(r.status>=400){var o=i.equals(v)?f.default.t(187):f.default.t(118);return new s.ActionType(o,{actionText:f.default.t(201),actionHandler:function(){return _(e,t,n,a)}})}})).then((function(){return i.equals(v)?new s.ActionType(f.default.t(186)):new s.ActionType(f.default.t(117))}));return u.default.openToast(o.default.createElement(s.ActionToast,{id:a,initialAction:m,pendingAction:g})),h.then((function(t){t._duplicate||e.set({tag:t.tag,eurl:t.eurl,token:t.token})})).finally((function(){e.pendingPic=void 0}))}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.genId)(),n=e.id;if(!e.canDelete())return r.reject(new c.ActionError);var a=(0,p.requestDeletePicture)(n);e.pendingPic=e.fallbackType;var i=(0,d.getMaybeMeUser)(),h=n.equals(i)?new s.ActionType(f.default.t(185)):new s.ActionType(f.default.t(116)),_=a.catch((function(){throw __LOG__(3)`models:ProfilePicThumb:deletePicture dropped`,n.equals(i)?new s.ActionType(f.default.t(183)):new s.ActionType(f.default.t(114))})).catchType(l.ServerStatusCodeError,(function(r){if(r.status>=400){var a=n.equals(i)?f.default.t(183):f.default.t(114);return new s.ActionType(a,{actionText:f.default.t(201),actionHandler:function(){return v(e,t)}})}})).then((function(){return n.equals(i)?new s.ActionType(f.default.t(184)):new s.ActionType(f.default.t(115))}));return u.default.openToast(o.default.createElement(s.ActionToast,{id:t,initialAction:h,pendingAction:_})),a.then((function(t){t._duplicate||e.set({tag:void 0,eurl:void 0})})).finally((function(){e.pendingPic=void 0}))}},93587:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryServerProps=function(){return a||(a=(0,o.queryServerProps)().then((function(e){s.default.updateProps(e)})).catchType(i.ServerStatusCodeError,(function(){})).catchType(i.WebdDrop,(function(){})).finally((function(){a=null})))};var a,i=n(14650),o=n(87843),s=r(n(63056))},53470:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.searchFirstPartyStickers=function(){return m.apply(this,arguments)};var i=a(n(87757)),o=a(n(81109)),s=a(n(48926)),u=n(93860),l=r(n(98569)),c=a(n(88430)),d=n(71701),f=a(n(8643)),p=a(n(4362)),h=a(n(69267)),_=a(n(20997)),v="https://static.whatsapp.net/sticker";function m(){return(m=(0,s.default)(i.default.mark((function e(t,n){var r,a,s,m,g,y,E,S,b,T;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=(0,u.getCountryShortcodeByPhone)(null===(r=(0,d.getMaybeMeUser)())||void 0===r?void 0:r.user)||"default",s=0,m=0;s<=250;)s+=3+encodeURIComponent(t[m++]).length;return g=t.slice(0,m-1).join(","),y={country:a,ver:"2"},E=h.default.build(v,(0,o.default)((0,o.default)({},y),{},{search:g})),e.next=9,(0,c.default)(E,{signal:null==n?void 0:n.signal});case 9:if(S=e.sent,(b=new f.default.StickerCommonQueryToStaticServer).set({httpResponseCode:S.status,params:new _.default(y).toString(),queryType:f.default.QUERY_TYPE.STICKER_SEARCH}),b.commit(),S.ok){e.next=15;break}throw new l.InvalidServerResponseError(E,S.status.toString(),"Invalid response from WhatsApp stickers endpoint");case 15:return e.next=17,S.json();case 17:if(null!=(T=e.sent)){e.next=20;break}throw new l.InvalidServerResponseError(E,S.status.toString(),`Invalid response from WhatsApp stickers endpoint: ${JSON.stringify(T)}`);case 20:return e.abrupt("return",T.map((function(e,t){return new p.default({mimetype:e.mimetype,width:e.width,height:e.height,filehash:e["file-hash"],directPath:e["direct-path"],mediaKey:e["media-key"],id:e["file-hash"],encFilehash:e["enc-file-hash"],mediaKeyTimestamp:0,index:t})})));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},37475:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setArchiveClassicSetting=function(e){return h(e)},t.setArchiveEnabledSetting=function(e){return function(e){return __LOG__(2)`Settings:setArchiveEnabledSetting value to ${e}`,r.resolve().then((function(){f.default.archive.enabled!==e&&(f.default.archive=(0,i.default)((0,i.default)({},f.default.archive),{},{enabled:e}))}))}(e)};var i=a(n(81109)),o=a(n(67294)),s=n(83180),u=a(n(34541)),l=n(14650),c=a(n(89115)),d=a(n(8643)),f=a(n(58695)),p=a(n(9942));function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.genId)();__LOG__(2)`Settings:setArchiveClassicSetting value to ${e}`;var n=(0,p.default)(e),r=new s.ActionType(c.default.t(45)),a=Boolean(f.default.archive.classic),_=n.then((function(){__LOG__(2)`Settings:setArchiveClassicSetting:success value sucessfully set to ${e}`;var n=e?c.default.t(43):c.default.t(46);return new s.ActionType(n,{actionText:c.default.t(205),actionHandler:function(){return h(a,t)}})})).catchType(l.ServerStatusCodeError,(function(e){if(__LOG__(3)`models:settings:setArchiveClassicSetting failed with server error`,e.status>=400)return new s.ActionType(c.default.t(44))})).catch((function(){throw __LOG__(3)`models:settings:setArchiveClassicSetting dropped`,new s.ActionType(c.default.t(44),{actionText:c.default.t(201),actionHandler:function(){return h(e,t)}})}));return u.default.openToast(o.default.createElement(s.ActionToast,{id:t,initialAction:r,pendingAction:_})),n.then((function(){f.default.archive.classic!==e&&(new d.default.ArchiveSettings({keepChatsArchived:e}).commit(),f.default.archive=(0,i.default)((0,i.default)({},f.default.archive),{},{classic:e}))}))}},96303:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getStatus=function(e){return(0,f.getStatus)(e).then((function(t){var r={id:e};if((0,p.isNumber)(t.status))switch(t.status){case 429:case 401:case 403:case 404:case 304:r.stale=!0;var a=n(43454).default.get(e);a&&!(0,p.isString)(a.status)&&(r.status="");break;default:r.status=""}else{var i=t.status;if(t.stale){var o=n(43454).default.get(e);o&&(i=o.status)}r.status=i}return r}))},t.setMyStatus=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.genId)(),i=t.trim();if(!i)return r.reject(new l.ActionError);var p=(0,f.setMyStatus)(i),h=new s.ActionType(d.default.t(200)),_=(0,c.getMaybeMeUser)(),v=n(43454).default,m=v.assertGet(_).status,g=p.then((function(t){return 200===t.status?new s.ActionType(d.default.t(198),{actionText:d.default.t(205),actionHandler:function(){return e(m,a)}}):t.status>=400?new s.ActionType(d.default.t(199)):void 0})).catch((function(){throw __LOG__(3)`models:statusCollection:setMyStatus dropped`,new s.ActionType(d.default.t(199),{actionText:d.default.t(201),actionHandler:function(){return e(t,a)}})}));return u.default.openToast(o.default.createElement(s.ActionToast,{id:a,initialAction:h,pendingAction:g})),p.then((function(e){200!==e.status||e._duplicate||(v.assertGet(_).status=t)}))};var o=i(n(67294)),s=n(83180),u=i(n(34541)),l=a(n(98569)),c=n(71701),d=i(n(89115)),f=n(83591),p=n(88828)},55943:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.applyContactBusinessProps=t.updateContactBusinessProperties=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(43269)),s=r(n(34263)),u=r(n(48629)),l=r(n(22021)),c=n(89992),d=n(75793),f=function(e,t){var n,r={},a=(0,o.default)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;r[i.id.user]=i}}catch(e){a.e(e)}finally{a.f()}var s,u=(0,o.default)(t);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=r[l.id.user],d=Boolean(c),f=c||{},p=f.level,_=f.name,v=f.isApi,m=f.privacyMode,g={isBusiness:d,isEnterprise:Boolean(v),verifiedLevel:h(p),verifiedName:_,privacyMode:m};l.set(g)}}catch(e){u.e(e)}finally{u.f()}};t.updateContactBusinessProperties=f;var p=function(){var e=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,c.getAllVerifiedNames)();case 4:t=e.sent.map((function(e){var t=e.id,n=e.name,r=e.level,a=e.isApi,i=e.privacyMode;return{id:(0,d.createUserWid)(t),name:n,level:r,isApi:a,privacyMode:i}})),f(t,u.default.toArray());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function h(e){if(null!=e){switch(e){case"unknown":return s.default.VERIFIED_LEVEL.UNKNOWN;case"low":return s.default.VERIFIED_LEVEL.LOW;case"high":return s.default.VERIFIED_LEVEL.HIGH}return s.default.VERIFIED_LEVEL.UNKNOWN}}t.applyContactBusinessProps=p},91356:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateVerifiedInfo=h,t.queryAndUpdateContactPropertiesOnNewChat=function(){return _.apply(this,arguments)},t.updateBizPrivacyMode=function(){return v.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(34263)),u=a(n(48629)),l=a(n(16913)),c=a(n(22021)),d=a(n(94584)),f=n(55943),p=n(89992);function h(e,t){var n=e.id,r=t.name,a=t.level,i=t.isApi,o=t.serial,s=t.privacyMode;return(0,f.updateContactBusinessProperties)([{id:n,name:r,level:a,isApi:i,privacyMode:s}],[e]),(0,p.createOrUpdateVerifiedBusinessName)(void 0,n,a,o,r,i,s)}function _(){return(_=(0,o.default)(i.default.mark((function e(t){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.default.supportsFeature(c.default.F.MD_BACKEND)){e.next=13;break}return e.next=3,(0,d.default)(t);case 3:if(null!=(n=e.sent)){e.next=6;break}return e.abrupt("return");case 6:if(!(r=n.bizInfo)){e.next=13;break}if(null!=(a=u.default.get(t))){e.next=12;break}return __LOG__(4,void 0,new Error,!0)`queryAndUpdateContactPropertiesOnNewChat contact does not exist ${""}`,SEND_LOGS("queryAndUpdateContactPropertiesOnNewChat contact does not exist"),e.abrupt("return");case 12:return e.abrupt("return",h(a,r.verifiedName));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,o.default)(i.default.mark((function e(t,a){var o,c,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a){e.next=2;break}return e.abrupt("return");case 2:if(o=u.default.get(t)){e.next=5;break}return e.abrupt("return");case 5:if(!(null!=o.privacyMode&&o.privacyMode.privacyModeTs>=a.privacyModeTs)){e.next=7;break}return e.abrupt("return");case 7:return c={verifiedName:o.verifiedName,isVerifiedHigh:o.verifiedLevel===s.default.VERIFIED_LEVEL.HIGH,isBusiness:o.isBusiness,isEnterprise:o.isEnterprise,privacyMode:o.privacyMode},o.set({isBusiness:!0,isEnterprise:!0,privacyMode:a}),d=n(26671).default,e.next=12,r.all([(0,p.createOrUpdateVerifiedBusinessName)(null,t,null,null,null,!0,a),null==d.get(t)?null:(0,l.default)(t,c,{verifiedName:o.verifiedName,isVerifiedHigh:o.verifiedLevel===s.default.VERIFIED_LEVEL.HIGH,isBusiness:!0,isEnterprise:!0,privacyMode:a})]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},89229:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleVerifiedNameSync=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(22021)),u=n(55943),l=n(89992),c=function(){var e=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.default.supportsFeature(s.default.F.MD_BACKEND)&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.all(t.map((function(e){var t=e.id,n=e.verifiedName,r=n.level,a=n.serial,i=n.name,o=n.isApi,s=n.privacyMode;return(0,l.createOrUpdateVerifiedBusinessName)(void 0,t,r,a,i,o,s)})));case 4:return e.next=6,(0,u.applyContactBusinessProps)();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.handleVerifiedNameSync=c},15943:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingCallOffer=function(e,t){var n=e.call_id;if(!m.default.isInitialized())return void E(e,t,null);c.default.pendingOffers[n]=new l.Resolvable,c.default.pendingOffers[n].resolve(r.all([(0,m.checkVoipCapability)(e),(0,f.default)(),(0,v.default)(e,t),m.default.getNumParticipantsFromCallOffer(t)]).then((function(r){var a=(0,u.default)(r,4),i=a[0],o=a[1],s=a[2],l=s.result,c=s.retryCount,d=a[3],f=i&&o;switch(d>0&&(g.default.isGroupCallEnabled()?f=f&&d<=p.default.groupCallMaxParticipants:(__LOG__(4,void 0,new Error)`voip:incoming: Ignoring call offer since group calling is disabled`,f=!1)),f=e.isVideoCall?f&&g.default.isVideoCallEnabled():f&&g.default.isVoiceCallEnabled(),l){case _.E2EProcessResult.SUCCESS:E(e,t,f);break;case _.E2EProcessResult.RETRY:__LOG__(2)`voip:handleIncomingCallOffer reject call because of enc retry`,function(){T.apply(this,arguments)}(e,c);break;case _.E2EProcessResult.PARSE_ERROR:__LOG__(2)`voip:handleIncomingCallOffer ending call because of enc parse error`,m.default.endCall(n);break;default:throw new Error("invalid e2e result type")}})).finally((function(){delete c.default.pendingOffers[n]})))},t.handleIncomingSignalingMsg=S,t.handleIncomingEncRekey=function(){return b.apply(this,arguments)};var o=i(n(87757)),s=i(n(48926)),u=i(n(63038)),l=n(11365),c=i(n(68950)),d=i(n(34263)),f=i(n(43968)),p=i(n(63056)),h=n(1018),_=n(87442),v=i(n(63503)),m=a(n(78919)),g=i(n(63805)),y=n(66279);function E(e,t,n){var r=e.call_id;c.default.processIncomingCall(r,e.peer_jid,{isVideo:e.isVideoCall,canHandleLocally:null!=n&&n,offerTime:e.t}),!1===n&&c.default.cleanupPendingOffer(r),m.default.isInitialized()&&m.default.handleIncomingSignalingMessage(e,t)}function S(e,t){if(!e.peer_jid.isGroupCall()||g.default.isGroupCallEnabled()){var n=e.call_id;(c.default.pendingOffers[n]?c.default.pendingOffers[n].promise:r.resolve()).then((function(){return m.default.isInitialized()&&m.default.handleIncomingSignalingMessage(e,t)}))}else __LOG__(4,void 0,new Error)`voip:incoming: Dropping signaling message since group calling is disabled`}function b(){return(b=(0,s.default)(o.default.mark((function e(t,n){var r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.default.isGroupCallEnabled()){e.next=3;break}return __LOG__(4,void 0,new Error)`voip:incoming: Dropping enc-rekey since group calling is disabled`,e.abrupt("return",{shouldRetry:!1});case 3:return e.next=5,(0,v.default)(t,n);case 5:r=e.sent,a=r.result,i=r.retryCount,e.t0=a,e.next=e.t0===_.E2EProcessResult.SUCCESS?11:e.t0===_.E2EProcessResult.PARSE_ERROR?13:e.t0===_.E2EProcessResult.RETRY?16:17;break;case 11:return S(t,n),e.abrupt("break",18);case 13:return __LOG__(2)`voip:handleIncomingEncRekey ending call because of enc parse error`,m.default.endCall(t.call_id),e.abrupt("break",18);case 16:return e.abrupt("break",18);case 17:throw new Error("invalid e2e result type");case 18:return e.abrupt("return",{shouldRetry:a===_.E2EProcessResult.RETRY,retryCount:i});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,s.default)(o.default.mark((function e(t){var n,r,a,i,s,u,l=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:0,e.next=3,h.waSignalStore.getRegistrationInfo();case 3:if(i=e.sent){e.next=6;break}throw Error("No registration info found");case 6:s=i.registrationId,u=a+1,m.default.isInitialized()&&m.default.rejectCallWithoutCallCtx(t.call_id,null===(n=t.peer_jid)||void 0===n?void 0:n.toString({legacy:!0}),null===(r=t.call_creator)||void 0===r?void 0:r.toString({legacy:!0}),y.ENC_RETRY_RECEIPT_ATTRS.SINGLE_PARTICIPANT,u,s),u===d.default.RETRY.MAX_RETRY&&(__LOG__(2)`voip:rejectCallWithReasonEnc max retry reached, uploading fieldstats`,m.default.processMissedIncomingCall(t));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},37499:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,u){if(__LOG__(2)`voip:handleIncomingCallOfferNotice: callId ${t}`,i.default.globalUnixTime()-n>45)return void __LOG__(2)`voip:handleIncomingCallOfferNotice: Ignoring stale offer_notice`;a.default.add({id:t,isVideo:r,isGroup:u,offerTime:n,canHandleLocally:!1,peerJid:e},{merge:!0}),o.default.alertCall((0,s.toUserWid)(e),t,r,u,!1),setTimeout((function(){o.default.cancelCall(e);var n=a.default.get(t);n&&a.default.remove(n)}),45e3)};var a=r(n(68950)),i=r(n(79140)),o=r(n(34541)),s=n(75793)},82500:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendCallOffer=function(e){return(0,r.sendCallOfferBridge)(e)},t.sendCallSignalingMsg=function(e,t){return(0,r.sendCallSignalingMsgBridge)(e,t)},t.sendCallEnd=function(e,t){return(0,r.sendCallEndBridge)(e,t)},t.sendEncRekey=function(e){return(0,r.sendEncRekeyBridge)(e)},t.queryCall=function(e,t){return(0,r.sendQueryCallBridge)(e,t)},t.prepareRetryReceipt=function(e){return(0,r.prepareRetryReceiptBridge)(e)};var r=n(69635)},37268:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ackMatchesTemplate=function(e,t){var n=t.type,r=t.from,a=t.participant,i=t.ts;if(e.id!==t.id)return!1;if(null!=t.class&&e.class!==t.class)return!1;if(null!=n&&e.type!==n)return!1;if(null!=r&&!r.equals(e.from))return!1;if(null!=a&&!a.equals(e.participant))return!1;if(null!=i&&e.ts!==i)return!1;return!0},t.default=void 0;var a=new(r(n(98112)).default)("ack",(function(e){return e.assertTag("ack"),{id:e.attrString("id"),ts:e.hasAttr("t")?e.attrString("t"):null,class:e.attrString("class"),type:e.hasAttr("type")?e.attrString("type"):null,from:e.attrWid("from"),participant:e.hasAttr("participant")?e.attrDeviceWid("participant"):null}}));t.default=a},69400:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return r.resolve(function(e,t){var n=e.attrs;n.offline&&I.default.refreshOfflineCompleteTimer();switch(e.tag){case"iq":return function(e){var t=e.attrs,n=e.content;if("urn:xmpp:ping"===t.xmlns)return(0,D.wap)("iq",{type:"result",to:t.from});if("md"!==t.xmlns)throw new Error(`handleIq unrecognized ${e.toString()}`);if(!Array.isArray(n)||!n.length)return;switch(n[0].tag){case"pair-device":return(0,E.default)(e);case"pair-success":return(0,S.default)(e)}}(e);case"receipt":return"retry"===n.type?(0,C.handleMessageRetryRequest)(e):"enc_rekey_retry"===n.type?(0,l.handleEncRekeyRetryRequest)(e):(0,y.default)(e);case"notification":switch(n.type){case"server_sync":return(0,M.default)(e);case"w:gp2":return(0,_.default)(e);case"picture":return(0,A.default)(e);case"business":return(0,u.handleBusinessNotification)(e);case"contacts":return(0,d.default)(e);case"devices":return(0,f.default)(e);case"mediaretry":return(0,m.default)(e);case"encrypt":var r=e.content;if(!Array.isArray(r)||!r.length)break;switch(r[0].tag){case"count":return(0,T.default)(e,t);case"identity":return(0,R.handleE2eIdentityChange)(e);case"digest":return(0,p.default)(e)}break;case"server":return(0,O.default)(e);case"status":return(0,o.default)(e);case"account_sync":return(0,s.default)(e);case"pay":return(0,b.default)(e)}if(__LOG__(3)`Comms.handleStanza unrecognized notification stanza ${e.toString()}`,n.hasOwnProperty("id"))return(0,D.wap)("ack",{id:n.id,class:"notification",from:n.to||D.DROP_ATTR,to:n.from||D.DROP_ATTR,type:n.type||D.DROP_ATTR,participant:n.participant||D.DROP_ATTR});break;case"chatstate":return(0,c.default)(e);case"presence":return(0,w.default)(e);case"message":return(0,g.default)(e);case"ib":return(0,v.default)(e);case"stream:error":return(0,k.default)(e);case"failure":return(0,h.default)(e);case"success":return(0,P.default)(e);case"call":return(0,l.handleCall)(e);case"error":return(0,i.handleError)(e)}__LOG__(3)`Comms.handleStanza unrecognized stanza ${e.toString()}`}(e,t)).then((function(e){return null==e?"NO_ACK":e}))};var i=n(30191),o=a(n(48106)),s=a(n(43860)),u=n(80410),l=n(93175),c=a(n(16980)),d=a(n(68970)),f=a(n(48643)),p=a(n(6462)),h=a(n(51787)),_=a(n(37558)),v=a(n(75812)),m=a(n(77388)),g=a(n(33765)),y=a(n(28684)),E=a(n(50909)),S=a(n(38754)),b=a(n(22766)),T=a(n(88762)),w=a(n(27428)),A=a(n(65972)),C=n(28734),O=a(n(77631)),M=a(n(64906)),I=a(n(66028)),k=a(n(60505)),P=a(n(90122)),R=n(72655),D=n(18712)},4746:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.startComms=function(e,t,n){if(A)return;A=new w(e,t,n),setTimeout(C,0)},t.stopComms=function(e){e&&_.default.onStartingLogout();var t=k("stopComms");t.socketLoop.endWithValue(),t.socket&&t.socket.close();A=null},t.openSocketLoop=C,t.openSocket=O,t.closeSocket=function(){var e=k("closeSocket").socket;e&&(__LOG__(2)`closeSocket called`,e.close())},t.onStreamErrorReceived=function(){k("onStreamErrorReceived").socketLoop.cancelReset()},t.waitForConnection=function(){k("waitForConnection").sendPing(),b||(b=new c.Resolvable);return b.promise},t.sendStanzaAndWaitForAck=function(e,t){return M(e,t).then((function(){}))},t.sendStanzaAndReturnAck=M,t.castStanza=function(e){var t=k("castStanza");t.socket?t.castStanza(e):__LOG__(2)`Comms has no open socket`},t.sendIq=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return I(e,t,!1,n)},t.sendIqWithoutRetry=function(e,t){return I(e,t,!0)},t.sendPing=function(e,t){var n=k("sendPing"),a=e.attrs.id;if(!a||"string"!=typeof a)return r.reject(new Error(`Comms:sendPing given iq without id: ${String(e)}`));if(!n.socketId)return __LOG__(2)`sendPing when socket dead`,r.resolve();if(n.activePing&&n.activePing.socketId===n.socketId)return __LOG__(2)`sendPing ping still pending`,r.resolve();n.activePing&&n.activePing.handler.resolve();var i=new c.Resolvable;return n.activePing={socketId:n.socketId,stanzaId:a,handler:i},n.callStanza(e),i.promise.then((function(e){return e&&(0,S.parseIqResponse)(t,e)}))},t.startHandlingRequests=function(){return k("startHandlingRequests").startHandlingRequests()},t.singletonOrThrowIfUninitialized=k;var o=i(n(34575)),s=i(n(93913)),u=n(18712),l=n(45877),c=n(11365),d=n(12035),f=n(9762),p=n(21037),h=a(n(37268)),_=i(n(34541)),v=i(n(34263)),m=n(98569),g=n(79583),y=i(n(25769)),E=i(n(61859)),S=n(20724),b=(n(97223),null),T=1,w=function(){function e(t,n,r){var a=this;(0,o.default)(this,e),this.nextSocketId=1,this.pendingIqs=new Map,this.ackHandlers=[],this._recvBlocker=new c.Resolvable,this.activePing=null,this._pending=new Set,this.socketId=0,this.socket=null,this.softCloseSocket=null,this.socketLoop=new l.PromiseRetryLoop({name:"MainSocketLoop",code:O,timer:{jitter:.1,max:6e4,algo:{type:"fibonacci",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4}),this.parseAndHandleStanza=function(e,t){e===a.socketId&&(a.deadSocketTimer.cancel(),b&&(b.resolve(),b=null));var n=(0,u.decodeStanza)(t,R).then((function(t){if(t){var n=a.activePing;return n&&n.socketId===e&&n.stanzaId===P(t)?(a.activePing=null,n.handler.resolve(t),a.maybeScheduleHealthCheck(),"NO_ACK"):a.handleStanza(t,e)}__LOG__(3)`Failure parsing stanza!`})).then((function(t){if(e===a.socketId)if("CLOSE_SOCKET"===t){__LOG__(2)`Comms: job response is CLOSE_SOCKET`;var n=a.socket;n&&n.close()}else"NO_ACK"===t?__LOG__(2)`Comms: job response is NO_ACK`:t&&a.castStanza(t)}));a._pending.add(n),n.finally((function(){a._pending.delete(n)}))},this.handleStanza=function(e,t){var n=P(e);if(null!=n){var r=a.pendingIqs.get(n);r?(a.pendingIqs.delete(n),r.resolve(e),a.maybeScheduleHealthCheck()):__LOG__(4,void 0,new Error)`handleIq no handler for iq with id ${n}`}else{if("ack"!==e.tag)return"failure"===e.tag?a._handleStanza(e,t):a._recvBlocker.promise.then((function(){return a._handleStanza(e,t)}));a.handleAck(e)}return"NO_ACK"},this.healthCheckTimer=new d.ShiftTimer((function(){__LOG__(2)`Comms: testing socket`,a.socketId&&a.sendPing()})),this.deadSocketTimer=new d.ShiftTimer((function(e){__LOG__(2)`Comms: Socket ${e} expired`,e===a.socketId&&a.softCloseSocket&&a.softCloseSocket()})),this._handleStanza=t,this.sendPing=n,this.socketStartOptions=r}return(0,s.default)(e,[{key:"filterPending",value:function(e){var t=[];function n(n){e(n)&&t.push(n)}return this.pendingIqs.forEach(n),this.ackHandlers.forEach(n),t}},{key:"callStanza",value:function(e){this.castStanza(e),this.deadSocketTimer.onOrBefore(2e4,this.socketId),this.healthCheckTimer.cancel()}},{key:"castStanza",value:function(e){var t=this.socketOrThrow("castStanza");try{t.sendFrame((0,u.encodeStanza)(e))}catch(e){__LOG__(3)`castStanza error ${e}`}}},{key:"socketOrThrow",value:function(e){var t=this.socket;if(t)return t;throw new Error(`Comms.${e} called while no socket`)}},{key:"startHandlingRequests",value:function(){return __LOG__(2)`Comms.startHandlingRequests`,this._recvBlocker.resolve(),this._recvBlocker.promise.then((function(){}))}},{key:"handleAck",value:function(e){for(var t=this.ackHandlers,n=-1,r=null;!r&&++n<t.length;)r=t[n].parseAndTest(e);if(r){var a=t[n];(0,f.removeIndexWithoutPreservingOrder)(t,n),(0,E.default)(e),a.resolve(r),this.maybeScheduleHealthCheck()}else __LOG__(3)`handleAck: unrecognized ${e}`}},{key:"removeHandler",value:function(e){if("iq"===e.type){var t=e.stanza.attrs.id;if(!t||"string"!=typeof t)return;if(!this.pendingIqs.delete(t))return}else{e.type;var n=this.ackHandlers.indexOf(e);if(-1===n)return;(0,f.removeIndexWithoutPreservingOrder)(this.ackHandlers,n)}e.resolve(r.reject(new m.Disconnected))}},{key:"maybeScheduleHealthCheck",value:function(){if(!this.healthCheckTimer.isScheduled()&&!(this.activePing||this.ackHandlers.length||this.pendingIqs.size)){var e=1e4*Math.random()+2e4;this.healthCheckTimer.onOrBefore(e)}}}]),e}(),A=null;function C(){k("openSocketLoop").socketLoop.start()}function O(){var e,t=k("openSocket"),n=t.nextSocketId++;return __LOG__(2)`Comms: Socket ${n} opening, passive mode: ${!!(null===(e=t.socketStartOptions)||void 0===e?void 0:e.passive)}`,_.default.setSocketState(v.default.SOCKET_STATE.OPENING),(0,y.default)(t.socketStartOptions).then((function(e){t.socketStartOptions=null,_.default.setSocketState(v.default.SOCKET_STATE.PAIRING);var r=new c.Resolvable;return __LOG__(2)`Comms: Socket ${n} opened`,t.socketId=n,t.socket=e,t.softCloseSocket=function(){t.softCloseSocket=null,t.socket&&(t.socket.close(),t.socket=null),r.resolve()},t.socketLoop.resetTimeoutAfter(1e4),t.deadSocketTimer.cancel(),t.maybeScheduleHealthCheck(),e.setOnFrame((function(e){return t.parseAndHandleStanza(n,e)})),e.setOnClose((function(){__LOG__(2)`Comms: Socket ${n} closed`,t.activePing&&n===t.activePing.socketId&&(t.activePing.handler.resolve(),t.activePing=null),t.filterPending((function(e){return e.attachedToSocketId===n})).forEach((function(e){t.removeHandler(e)})),n===t.socketId&&(t.socketId=0,t.socket=null,_.default.socketStreamDisconnected(),r.resolve())})),(0,g.isRegistered)()&&(_.default.setSocketState(v.default.SOCKET_STATE.CONNECTED),_.default.openSocketStream()),t.filterPending((function(e){return!e.attachedToSocketId})).sort((function(e,t){return e.orderedId-t.orderedId})).forEach((function(e){t.callStanza(e.stanza)})),r.promise})).catchType(m.Disconnected,(function(){__LOG__(2)`openSocket socket closed while in noise handshake`})).catch((function(e){__LOG__(3)`openSocket failed ${e}`}))}function M(e,t){return new r((function(n){var r=k("sendStanzaAndWaitForAck");r.ackHandlers.push({type:"ack",parseAndTest:function(e){var n=h.default.parse(e);return!n.error&&(0,h.ackMatchesTemplate)(n.success,t)?e:null},resolve:n,stanza:e,attachedToSocketId:0,orderedId:T++}),r.socket?r.callStanza(e):__LOG__(2)`Comms has no open socket, will send stanza when socket opens`}))}function I(e,t,n,a){return new r((function(t){var a=k("sendIq"),i=e.attrs.id;if(!i||"string"!=typeof i)throw new Error(`Comms:sendIq given iq without id: ${String(e)}`);var o=a.socketId;!n||o?(a.pendingIqs.set(i,{type:"iq",resolve:t,stanza:e,attachedToSocketId:n?o:0,orderedId:T++}),a.socket?a.callStanza(e):__LOG__(2)`Comms has no open socket, will resend iq when socket opens`):t(r.reject(new m.Offline))})).then((function(e){return(0,S.parseIqResponse)(t,e,a)}))}function k(e){if(A)return A;throw new Error(`Comms::${e} called before startComms`)}function P(e){if("iq"===e.tag){var t=e.attrs.type;if("result"===t||"error"===t)return(0,u.decodeAsString)(e.attrs.id)||null}return null}function R(e){return r.resolve((0,p.inflate)(e))}},98112:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=r(n(69017)),u=function(){function e(t,n){(0,i.default)(this,e),this._name=t,this._parser=n}return(0,o.default)(e,[{key:"parseParsableWap",value:function(e){try{return{success:this._parser(e)}}catch(e){if(e instanceof s.XmppParsingFailure)return{error:e};throw e}}},{key:"parse",value:function(e){var t=new s.default(this._name,e);return this.parseParsableWap(t)}},{key:"parseOrThrow",value:function(e){var t=this.parse(e);if(t.error)throw new Error(String(t.error));return t.success}}]),e}();t.default=u},69017:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.convertBytesToUint=f,t.default=t.XmppParsingFailure=t.AUTHOR_SYSTEM=t.AUTHOR_ME=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(18712),s=n(17643),u=n(90066),l=n(71701),c=n(75793);t.AUTHOR_ME="@me";var d="@system";function f(e,t){for(var n=0,r=0;r<t;r++)n=256*n+e[r];return n}t.AUTHOR_SYSTEM=d;var p=function(){function e(t,n){(0,a.default)(this,e),this.parser=t,this.reason=n}return(0,i.default)(e,[{key:"toString",value:function(){return`XmppParsingFailure: ${this.parser}: ${this.reason}`}}]),e}();t.XmppParsingFailure=p;var h=function(){function e(t,n){(0,a.default)(this,e),this._name=t,this._node=n,this._children=Array.isArray(n.content)?n.content.map((function(n){return new e(t,n)})):null}return(0,i.default)(e,[{key:"hasAttr",value:function(e){return this._node.attrs.hasOwnProperty(e)}},{key:"assertTag",value:function(e){this._node.tag!==e&&this.throw(`to be <${e}>`)}},{key:"tag",value:function(){return this._node.tag}},{key:"maybeChild",value:function(e){var t=this._children;if(!t)return null;for(var n=0;n<t.length;n++)if(t[n]._node.tag===e)return t[n];return null}},{key:"hasChild",value:function(e){return!!this.maybeChild(e)}},{key:"child",value:function(e){var t=this.maybeChild(e);return t||this.throw(`to have child <${e}>`)}},{key:"getFirstChild",value:function(){var e=this._children;return e?e[0]:null}},{key:"assertAttr",value:function(e,t){var n=this.attrString(e);n!==t&&this.throw(`to have "${e}"="${t}", but instead has "${n}"`)}},{key:"assertAttrIsMe",value:function(e){var t=this.attrWid(e),n=(0,l.assertGetMe)();t.equals(n)||this.throw(`to have "${e}"=${n.toString()}, but instead has "${t.toString()}"`)}},{key:"assertAttrIsMeUser",value:function(e){var t=this.attrWid(e),n=(0,l.assertGetMeUser)();t.equals(n)||this.throw(`to have "${e}"=${n.toString()}, but instead has "${t.toString()}"`)}},{key:"assertFromServer",value:function(){var e=this.attrString("from");"s.whatsapp.net"!==e&&this.throw(`to have "from"="s.whatsapp.net", but instead has "${e}"`)}},{key:"attrString",value:function(e){return this._node.attrs.hasOwnProperty(e)?(0,o.decodeAsString)(this._node.attrs[e]):this.throw(`to have attribute "${e}"`)}},{key:"attrAuthor",value:function(e){if(!this.hasAttr(e))return d;var t=this.attrUserWid(e);return t.equals((0,l.assertGetMe)())?"@me":t}},{key:"maybeAttrString",value:function(e){return this.hasAttr(e)?(0,o.decodeAsString)(this._node.attrs[e]):null}},{key:"attrDeviceWid",value:function(e){var t,n=this.attrString(e);try{t=(0,c.createDeviceWid)(n)}catch(e){}return t&&t.isUser()?t:this.throw(`to have "${e}"={DeviceJid}, but instead has "${n}"`)}},{key:"attrUserWid",value:function(e){var t,n=this.attrString(e);try{t=(0,c.createWid)(n)}catch(e){}return t&&t.isUser()?(0,c.toUserWid)(t):this.throw(`to have "${e}"={UserJid}, but instead has "${n}"`)}},{key:"attrChatWid",value:function(e){var t,n=this.attrString(e);try{t=(0,c.createWid)(n)}catch(e){}return t?(0,c.toChatWid)(t):this.throw(`to have "${e}"={ChatJid}, but instead has "${n}"`)}},{key:"attrGroupWid",value:function(e){var t,n=this.attrString(e);try{t=(0,c.createWid)(n)}catch(e){}return t&&t.isGroup()?t:this.throw(`to have "${e}"={GroupJid}, but instead has "${n}"`)}},{key:"attrWid",value:function(e){var t,n=this.attrString(e);try{t=(0,c.createWid)(n)}catch(e){}return t||this.throw(`to have "${e}"={JID}, but instead has "${n}"`)}},{key:"maybeAttrEnum",value:function(e,t){if(!this.hasAttr(e))return null;try{return this.attrEnum(e,t)}catch(e){return __LOG__(3)`maybeAttrEnum: value does not exist in enum`,null}}},{key:"attrEnum",value:function(e,t){var n=this.attrString(e);if(!t.hasOwnProperty(n)){var r=Object.keys(t).join("|");return this.throw(`to have "${e}"={${r}} but has value "${n}"`)}return t[n]}},{key:"attrEnumOrDefault",value:function(e,t,n){return this.hasAttr(e)?this.attrEnum(e,t):n}},{key:"attrFlowEnum",value:function(e,t){var n=t(this.attrString(e));return null==n?this.throw("to have enum value"):n}},{key:"attrFlowEnumOrDefault",value:function(e,t,n){try{return this.attrFlowEnum(e,t)}catch(e){return n}}},{key:"attrInt",value:function(e,t,n){var r=this.attrString(e),a=parseInt(r,10);return Number.isNaN(a)?this.throw(`to have "${e}"={integer} but has value "${r}"`):void 0!==t&&a<t?this.throw(`to have "${e}"={at least ${t}} but has value ${a}`):void 0!==n&&a>=n?this.throw(`to have "${e}"={below ${n}} but has value ${a}`):a}},{key:"maybeAttrInt",value:function(e,t,n){return this.hasAttr(e)?this.attrInt(e,t,n):null}},{key:"attrTime",value:function(e){return(0,u.castToUnixTime)(this.attrInt(e))}},{key:"attrFutureTime",value:function(e){var t=this.attrInt(e);return(0,u.futureUnixTime)(t)}},{key:"forEachChild",value:function(e){var t=this._children;if(t)t.forEach(e);else if(this._node.content)return this.throw("to have children")}},{key:"forEachChildWithTag",value:function(e,t){this.forEachChild((function(n){n._node.tag===e&&t(n)}))}},{key:"mapChildren",value:function(e){var t=this._children;return!t&&this._node.content?this.throw("to have children"):t?t.map(e):[]}},{key:"mapChildrenWithTag",value:function(e,t){var n=this._children;return!n&&this._node.content?this.throw("to have children"):n?n.filter((function(t){return t._node.tag===e})).map(t):[]}},{key:"hasContent",value:function(){return!this._children&&!!this._node.content}},{key:"contentUint",value:function(e){return f(this.contentBytes(e),e)}},{key:"contentBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this._children)return this.throw("to have binary content, but has children instead");if(this._node.content){var t=this._node.content;return-1!==e&&t.length!==e?this.throw(`to be ${e} bytes, but got ${t.length} instead`):t}return this.throw("to have content")}},{key:"contentString",value:function(){if(this._children)return this.throw("to have string content, but has children instead");if(this._node.content){var e=new s.Binary(this._node.content);return e.readString(e.size())}return this.throw("to have content")}},{key:"contentEnum",value:function(e){var t=this.contentString();if(!e.hasOwnProperty(t)){var n=Object.keys(e).join("|");return this.throw(`to have content {${n}} but has value "${t}"`)}return e[t]}},{key:"throw",value:function(e){throw new p(this._name,`expected <${this._node.tag}> ${e}`)}}]),e}();t.default=h},61859:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.attrs,n=t.id,r=t.from,u=t.t;"message"===e.attrs.class&&function(e,t,n){var r=new i.default({fromMe:!0,remote:t,id:e});(0,a.getTable)().merge(String(r),{messageRangeIndex:(0,o.craftMessageRangeIndex)(t.toString(),!1,!1,n)}).catch((function(e){throw __LOG__(4,!0,new Error,!0)`processAckForOutgoingMessage: failed to update in storage`,SEND_LOGS("message processAckForOutgoingMessage failed"),e}))}(String(n),(0,s.createWid)(String(r)),parseInt(u,10))};var a=n(322),i=r(n(5315)),o=n(24003),s=n(75793)},237:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendPing=function(){var e=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"w:p",type:"get",id:(0,a.generateId)()},(0,a.wap)("ping",null));(0,o.sendPing)(e,s).then((function(e){e&&e.success&&u(e.result)}))},t.blockSendPing=function(){var e=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"w:p",type:"get",id:(0,a.generateId)()},(0,a.wap)("ping",null));return(0,o.sendPing)(e,s).then((function(e){e&&e.success&&u(e.result)}))};var a=n(18712),i=n(90066),o=n(4746),s=new(r(n(98112)).default)("ping",(function(e){return e.attrTime("t")}));function u(e){var t=Math.round(Date.now()/1e3-e);(0,i.setClockSkew)(t)}},20724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIqResponse=function(e,t,n){var i=t.content;if(i&&Array.isArray(i)&&i[0]){var o=i[0];if("error"===o.tag){var s=o.attrs||{};return{success:!1,errorCode:parseInt(s.code,10),errorText:(0,r.decodeAsString)(s.text)||"",errorType:(0,r.decodeAsString)(s.type)||"",errorBackoff:parseInt(s.backoff,10),customError:n?n.parseOrThrow(o):void 0,toString:a}}}return{success:!0,result:e.parseOrThrow(t)}},t.errorToString=a;var r=n(18712);function a(){return`IqError ${this.errorCode}: ${this.errorText}`}},19325:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DEVICE_JID=function(e){if(!(e instanceof s.default&&e.isUser()))throw Error(`DEVICE_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return a.WapJid.createAD(e.user,e.agent,e.device)},t.USER_JID=function(e){if(!(e instanceof s.default&&e.isUser()))throw Error(`USER_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return a.WapJid.create(e.user,i.USER_JID_SUFFIX)},t.CHAT_JID=function(e){if(!(e instanceof s.default&&(e.isUser()||e.isGroup()||e.isBroadcast())))throw Error(`CHAT_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return a.WapJid.create(e.user,"c.us"===e.server?i.USER_JID_SUFFIX:e.server)},t.GROUP_JID=function(e){if(!(e instanceof s.default&&e.isGroup()))throw Error(`GROUP_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return a.WapJid.create(e.user,e.server)},t.GROUP_CALL_JID=function(e){if(!(e instanceof s.default&&e.isGroupCall()))throw Error(`GROUP_CALL_JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return a.WapJid.create(e.user,e.server)},t.JID=function(e){if(!(e instanceof s.default))throw Error(`JID: invalid jid type: ${e instanceof s.default?e.toString():"Not an instance of WID"}`);return null!=e.device&&0!==e.device||null!=e.agent&&0!==e.agent?a.WapJid.createAD(e.user,e.agent,e.device):a.WapJid.create(e.user,e.server)},t.wapNodeToVoipXml=t.voipXmlToWapNode=void 0;var a=n(31564),i=n(62265),o=n(18712),s=r(n(12717));t.voipXmlToWapNode=function(e){if(!e||!Array.isArray(e)||3!==e.length)throw Error("Invalid VOIP xml node");return function e(t){if(!t)return null;if(Array.isArray(t)){var n=t[0],r=t[1],i=void 0;r&&Object.keys(r).map((function(e){i||(i={});var t=r[e];if(!t)throw Error("Attribute value is null");if("object"==typeof t){if(t.type!==a.WAP_JID_SUBTYPE.JID&&!a.WAP_JID_SUBTYPE.JID_AD)throw Error("Invalid attribute value type");t=new a.WapJid(t)}i[e]=t}));var s=t[2],u=null;Array.isArray(s)&&s.length>0&&(u="number"==typeof s[0]?new Uint8Array(s):s.map(e).filter((function(e){return e})));var l=u;return new o.WapNode(n,i,l)}return t}(e)};t.wapNodeToVoipXml=function(e){return function e(t){var n=[];return n.push(t.tag),n.push(t.attrs||{}),Array.isArray(t.content)&&0===t.content.filter((function(e){return!Array.isArray(e)}))?n.push(t.content):Array.isArray(t.content)?n.push(t.content.map((function(t){return e(t)}))):null!=t.content?t.content instanceof Uint8Array?n.push(Array.from(t.content)):n.push(t.content):n.push(null),n}(e)}},87128:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptServerErrorReceipt=function(e,t,n){return function(){return p.apply(this,arguments)}(e,t,function(e){__LOG__(2)`encodeServerErrorReceipt`;var t=new l.Binary;return(0,u.encodeProto)(d.ServerErrorReceiptSpec,e,t),t.readByteArray()}({stanzaId:t}),n)},t.decryptMediaRetryNotification=function(e,t,n,r){return function(){return h.apply(this,arguments)}(e,t,n,r).then((function(e){return(0,s.decodeProto)(d.MediaRetryNotificationSpec,e)}))},t.ENC_IV_SIZE=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(53939),u=n(46042),l=n(17643),c=r(n(67819)),d=n(26594),f=a(n(29826));function p(){return(p=(0,o.default)(i.default.mark((function e(t,n,r,a){var o,s,u,l,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(null==a?void 0:a.slice())||g(),e.next=3,v(t,n,o);case 3:return s=e.sent,u=s.key,l=s.params,e.next=8,f.default.encrypt(l,u,r);case 8:return c=e.sent,e.abrupt("return",{ciphertext:c,iv:o});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,o.default)(i.default.mark((function e(t,n,r,a){var o,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,n,r);case 2:return o=e.sent,s=o.key,u=o.params,e.abrupt("return",f.default.decrypt(u,s,a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _="WhatsApp Media Retry Notification";function v(){return m.apply(this,arguments)}function m(){return(m=(0,o.default)(i.default.mark((function e(t,n,r){var a,o,s,u,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.extractAndExpand(t,_,32);case 2:return a=e.sent,(o=new l.Binary).write(n),s=o.readByteArray(),u={name:"AES-GCM",iv:r,additionalData:s},e.next=9,f.default.importKey("raw",new Uint8Array(a),"AES-GCM",!1,["encrypt","decrypt"]);case 9:return d=e.sent,e.abrupt("return",{key:d,params:u});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e=new Uint8Array(12);return self.crypto.getRandomValues(e),e}t.ENC_IV_SIZE=12},31623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseABProps=function(e){var t=new Map;e.forEach((function(e){var n=e.configCode,r=e.configValue,a=e.configExpoKey;t.set(n,{configValue:r,configExpoKey:a})}));var n=new Map;return Object.keys(r.ABPropConfigs).map((function(e){var a=r.ABPropConfigs[e][0],i=t.get(a),o=null==i?void 0:i.configValue,s=null==i?void 0:i.configExpoKey;n.set(a,{configValue:o,configExpoKey:s})})),n};var r=n(2459)},68065:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncABProps=h,t.syncABPropsTask=function(){return _.apply(this,arguments)},t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=n(18712),s=n(85716),u=n(53615),l=n(61199),c=n(82808),d=n(34670),f=n(31623),p=n(4746);function h(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(e=(0,d.getHash)());var n=(0,o.wap)("iq",{xmlns:"abt",id:(0,o.generateId)(),type:"get",to:o.S_WHATSAPP_NET},(0,o.wap)("props",{protocol:"1",hash:t&&null!=e?(0,o.CUSTOM_STRING)(e):o.DROP_ATTR}));return(0,p.sendIq)(n,s.abPropsParser).then((function(e){if(e.success&&null!=e.result){var t=Date.now();if((0,d.updateAttributesLocalStorage)(e.result.abKey,e.result.hash,e.result.refresh,t),null!=e.result.hash)return(0,c.updateABPropConfigs)((0,f.parseABProps)(e.result.props)).catch((function(){__LOG__(4,!0,new Error,!0)`update ABProps config table failed`,SEND_LOGS("update ABProps config table failed when syncing ABProps")}))}}))}function _(){return(_=(0,i.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,d.isABPropsAfterFirstSync)(),n=3;case 2:if(!(n-- >0)){e.next=16;break}return e.prev=3,e.next=6,h(t);case 6:n=0,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),0===n&&(__LOG__(4,!0,new Error,!0)`failed to sync ABProps`,SEND_LOGS("failed to sync ABProps")),e.next=14,(0,u.delayMs)(1e4*Math.random());case 14:e.next=2;break;case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}var v=(0,l.cacheWhilePending)((function(){return"abProps"}),h);t.default=v},10619:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDevices=function(e){return(0,s.syncDeviceList)([(0,l.assertGetMe)()],e)},t.getAndUpdateProfilePicture=function(){var e=(0,o.default)(c.default.get((0,l.getMeUser)()),"// $FlowFixMe[incompatible-call] (T93382826) Upgrade to flow 0.153.0\nProfilePicThumbCollection.get(getMeUser())");return c.default.resyncPictures([e])},t.updatePrivacySettings=function(){return(0,f.getPrivacy)().then(function(){var e=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.groupAdd!==f.GROUP_ADD.contact_blacklist){e.next=11;break}return e.prev=1,e.next=4,(0,f.getBlockedContacts)();case 4:"mismatch"===(n=e.sent).status&&(t.blackList=n.users),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),__LOG__(3,void 0,void 0,!0)`failed to get disallowed contact list for groupadd`,SEND_LOGS("failed to get disallowed contact list for groupadd");case 11:(0,l.setUserPrivacySettings)(t);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}())},t.updateBlocklist=function(){return(0,d.fetchAndUpdateBlocklist)().then((function(e){e.dhash&&(u.default.toArray().forEach((function(e){return u.default.remove(e)})),e.wids&&e.wids.forEach((function(e){u.default.gadd(e)})))}))},t.ACCOUNT_SYNC_TYPE=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(91080)),s=n(24963),u=r(n(76088)),l=n(71701),c=r(n(99838)),d=n(27797),f=n(21093),p=Object.freeze({BLOCKLIST:"blocklist",DEVICES:"devices",PICTURE:"picture",PRIVACY:"privacy",STATUS:"status"});t.ACCOUNT_SYNC_TYPE=p},24963:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncDeviceList=m,t.syncAndGetDeviceList=function(){return y.apply(this,arguments)};var i=a(n(319)),o=a(n(87757)),s=a(n(48926)),u=a(n(96486)),l=n(38812),c=n(61098),d=n(11360),f=n(45975),p=n(36545),h=n(31435),_=n(75793),v=new Map;function m(){return g.apply(this,arguments)}function g(){return(g=(0,s.default)(o.default.mark((function e(t,n,a,c){var d,p,h,m,g,y,S,b,T;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a){e.next=12;break}return d=t.map((function(e){return e.user})),e.next=4,(0,l.getDeviceIds)(d);case 4:return p=e.sent,h=p.map((function(e){return e?e.devices.map((function(t){return(0,_.createDeviceWidFromUserAndDevice)(e.id,t)})):[]})),m=u.default.flatMap(h,(function(e){return e})),e.next=9,(0,f.phashV2)(m);case 9:if(g=e.sent,a!==g){e.next=12;break}return e.abrupt("return");case 12:if(y=new Set,S=[],t.forEach((function(e){var t=v.get(e.user);t?y.add(t):S.push(e)})),0!==S.length){e.next=17;break}return e.abrupt("return");case 17:return b=S.map((function(e){return e.user})),T=(0,l.getDeviceIds)(b).then(function(){var e=(0,s.default)(o.default.mark((function e(t){var a,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map((function(e){return e?e.devices.map((function(t){return(0,_.createDeviceWidFromUserAndDevice)(e.id,t)})):[]})),e.next=3,r.all(a.map((function(e){return 0===e.length?"":(0,f.phashV2)(e)})));case 3:return i=e.sent,s=S.map((function(e,t){return{id:e,hash:i[t]}})),e.abrupt("return",E(s,n,c));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).catch((function(e){__LOG__(4,void 0,new Error)`Failed to sync device list with error: ${e}`})).finally((function(){S.map((function(e){v.delete(e.user)}))})),S.map((function(e){v.set(e.user,T)})),e.next=22,r.all([T].concat((0,i.default)(y)));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,s.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.user})),e.next=3,m(t);case 3:return e.abrupt("return",(0,l.getDeviceIds)(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=(0,s.default)(o.default.mark((function e(t,n,r){var a,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return a=(new h.USyncQuery).withContext(n||"interactive").withDeviceProtocol(),t.forEach((function(e){a.withUser((new p.USyncUser).withId(e.id).withDeviceHash(String(e.hash)))})),e.next=6,a.execute();case 6:if(!(i=e.sent).error.all){e.next=9;break}throw new Error(`syncDeviceList: error ${i.error.all.errorCode}: ${i.error.all.errorText}`);case 9:return i.error.devices&&__LOG__(3)`syncDeviceList: error ${i.error.devices.errorCode}: ${i.error.devices.errorText}`,s=i.list.filter((function(e){return!("errorCode"in e.devices)})),r&&(s=s.filter((function(e){return null!=e.devices.deviceList&&null!=e.devices.keyIndex}))),s=s.map((function(e){return{wid:e.id,devices:e.devices}})),__LOG__(2)`syncDeviceList: skipping ${i.list.length-s.length} out of ${i.list.length} records`,e.next=16,(0,c.getAndStoreIdentityKeys)(s.map((function(e){return e.wid})));case 16:return e.abrupt("return",(0,d.handleADVDeviceSyncResult)(s));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},82735:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.blockUser=function(e){return c.default.mdBlocklistV2?function(e){return v(e,!0)}(e):function(e){var t=s.default.map((function(e){return e.id}));return t.push(e),h(o.default.uniq(t))}(e)},t.unblockUser=function(e){return c.default.mdBlocklistV2?function(e){return v(e,!1)}(e):function(e){var t=s.default.map((function(e){return e.id}));return t.splice(t.indexOf(e),1),h(o.default.uniq(t))}(e)};var a=n(80206),i=n(18712),o=r(n(96486)),s=r(n(76088)),u=n(4746),l=n(71701),c=r(n(63056)),d=n(19325),f=n(75793),p=new a.WapParser("blockUser",(function(e){if(e.hasChild("error")){var t=e.child("error"),n=t.attrInt("code"),r=t.attrString("text");return __LOG__(3)`sendBlocklist: sever response with ${n}, ${r}`,{errorCode:n,errorText:r}}__LOG__(2)`sendBlocklist: success`}));function h(e){var t=0===e.length?(0,i.wap)("list",{name:"default"}):(0,i.wap)("list",{name:"default"},e.map((function(e){return(0,i.wap)("item",{action:"deny",type:"jid",value:(0,d.JID)(e),order:"1"})}))),n=(0,i.wap)("iq",{xmlns:"jabber:iq:privacy",from:(0,d.JID)((0,l.assertGetMe)()),type:"set",id:(0,i.generateId)()},(0,i.wap)("query",null,t));return(0,u.sendIq)(n,p).then((function(e){if(e.success)return e.result;var t=e.errorCode,n=e.errorText;return __LOG__(3)`sendBlocklist: server response with ${t}, ${n}`,{errorCode:t,errorText:n}}))}var _=new a.WapParser("blockUserV2ResponseParser",(function(e){var t;if(e.hasChild("error")){var n=e.child("error"),r=n.attrInt("code"),a=n.attrString("text");return __LOG__(3)`blockUserV2ResponseParser: server response with ${r}, ${a}`,{errorCode:r,errorText:a}}return __LOG__(2)`block/unblock user: success`,{blockedUsers:null===(t=e.child("list"))||void 0===t?void 0:t.mapChildrenWithTag("item",(function(e){return(0,f.userJidToUserWid)(e.attrUserJid("jid"))}))}}));function v(e,t){var n=(0,i.wap)("iq",{xmlns:"blocklist",to:i.S_WHATSAPP_NET,type:"set",id:(0,i.generateId)()},(0,i.wap)("item",{action:(0,i.CUSTOM_STRING)(t?"block":"unblock"),jid:(0,d.JID)(e)}));return(0,u.sendIq)(n,_).then((function(e){if(!e.success){var t=e.errorCode,n=e.errorText;return __LOG__(3)`blockUnblockUserV2: server response with ${t}, ${n}`,{errorCode:t,errorText:n}}}))}},83239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateCartEnabled=function(e){var t=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,smax_id:"25",xmlns:"fb:thrift_iq",id:(0,s.generateId)(),type:"set"},(0,s.wap)("commerce_settings",null,(0,s.wap)("cart",{enabled:(0,s.CUSTOM_STRING)(e.toString())})));return(0,u.sendIq)(t,f).then((function(e){if(e.success)return e.result;throw new l.ServerStatusCodeError(e.errorCode)}))},t.editBusinessProfile=function(e){var t=e.address,n=e.description,r=e.categories,c=e.email,f=e.website,p=e.businessHours,h=(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,xmlns:"w:biz",id:(0,s.generateId)(),type:"set"},(0,s.wap)("business_profile",{v:"3",mutation_type:"delta"},void 0!==t?(0,s.wap)("address",null,t):null,void 0!==n?(0,s.wap)("description",null,n):null,void 0!==c?(0,s.wap)("email",null,c):null,f&&0===f.length?(0,s.wap)("website",null):null,f&&f.length>0?(0,s.wap)("website",null,f[0]):null,f&&f.length>1?(0,s.wap)("website",null,f[1]):null,r?(0,s.wap)("categories",null,r.map((function(e){return(0,s.wap)("category",{id:(0,s.CUSTOM_STRING)(e.id)})}))):null,p?function(e){var t=e.note,n=e.timezone,r=e.config,u=[];for(var l in r){var c=r[l],d=c.mode,f=c.hours;if(f){var p,h=(0,o.default)(f);try{for(h.s();!(p=h.n()).done;){var _=(0,i.default)(p.value,2),v=_[0],m=_[1];u.push({day_of_week:l,mode:d,open_time:v,close_time:m})}}catch(e){h.e(e)}finally{h.f()}}else u.push({day_of_week:l,mode:d})}var g=[];t&&g.push((0,s.wap)("business_hours_note",null,t));return g.push.apply(g,(0,a.default)(u.map((function(e){return(0,s.wap)("business_hours_config",{day_of_week:(0,s.CUSTOM_STRING)(e.day_of_week),mode:e.mode,open_time:e.open_time?(0,s.CUSTOM_STRING)(e.open_time.toString()):s.DROP_ATTR,close_time:e.close_time?(0,s.CUSTOM_STRING)(e.close_time.toString()):s.DROP_ATTR})})))),(0,s.wap)("business_hours",{timezone:n?(0,s.CUSTOM_STRING)(n):s.DROP_ATTR},g)}(p):null));return(0,u.sendIq)(h,d).then((function(e){if(!e.success)throw new l.ServerStatusCodeError(e.errorCode)}))};var a=r(n(319)),i=r(n(63038)),o=r(n(43269)),s=n(18712),u=n(4746),l=n(14650),c=r(n(98112)),d=new c.default("businessProfileResponse",(function(e){e.assertTag("iq"),e.assertFromServer()})),f=new c.default("commerceSettingsResponse",(function(e){return e.assertTag("iq"),e.assertFromServer(),"true"===e.child("commerce_settings").child("cart").attrString("enabled")}))},46961:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearDirtyBits=function(e){if(0===e.length)return r.resolve();var t=e.map((function(e){return(0,i.wap)("clean",{type:(0,i.CUSTOM_STRING)(e.type),timestamp:(0,i.INT)(e.timestamp)})})),n=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"set",xmlns:"urn:xmpp:whatsapp:dirty",id:(0,i.generateId)()},t);return(0,o.sendIq)(n,s).then((function(){__LOG__(2)`clearDirtyBits: success for type: ${e.map((function(e){return e.type})).join(",")}`})).catch((function(){__LOG__(3)`clearDirtyBits: failed with error`}))};var i=n(18712),o=n(4746),s=new(a(n(98112)).default)("cleanDirtyReplyParser",(function(e){return e.assertAttr("type","result"),{}}))},256:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.metricsCiphertextType=function(e){switch(e){case o.CiphertextType.Skmsg:return i.default.E2E_CIPHERTEXT_TYPE.SENDER_KEY_MESSAGE;case o.CiphertextType.Pkmsg:return i.default.E2E_CIPHERTEXT_TYPE.PREKEY_MESSAGE;case o.CiphertextType.Msg:return i.default.E2E_CIPHERTEXT_TYPE.MESSAGE}},t.metricsMediaType=function(e){switch(e){case o.MediaType.Photo:return i.default.MEDIA_TYPE.PHOTO;case o.MediaType.Video:return i.default.MEDIA_TYPE.VIDEO;case o.MediaType.Audio:return i.default.MEDIA_TYPE.AUDIO;case o.MediaType.Ptt:return i.default.MEDIA_TYPE.PTT;case o.MediaType.Location:return i.default.MEDIA_TYPE.LOCATION;case o.MediaType.Contact:return i.default.MEDIA_TYPE.CONTACT;case o.MediaType.Document:return i.default.MEDIA_TYPE.DOCUMENT;case o.MediaType.Url:return i.default.MEDIA_TYPE.URL;case o.MediaType.Call:return i.default.MEDIA_TYPE.CALL;case o.MediaType.Gif:return i.default.MEDIA_TYPE.GIF;case o.MediaType.Future:return i.default.MEDIA_TYPE.FUTURE;case o.MediaType.ContactArray:return i.default.MEDIA_TYPE.CONTACT_ARRAY;case o.MediaType.LiveLocation:return i.default.MEDIA_TYPE.LIVE_LOCATION;case o.MediaType.ProfilePic:return i.default.MEDIA_TYPE.PROFILE_PIC;case o.MediaType.Sticker:return i.default.MEDIA_TYPE.STICKER;case o.MediaType.Hsm:return i.default.MEDIA_TYPE.HSM;case o.MediaType.ProductImage:return i.default.MEDIA_TYPE.PRODUCT_IMAGE;case o.MediaType.Template:return i.default.MEDIA_TYPE.TEMPLATE;case o.MediaType.MdAppState:return i.default.MEDIA_TYPE.MD_APP_STATE;case o.MediaType.MdHistorySync:return i.default.MEDIA_TYPE.MD_HISTORY_SYNC;case o.MediaType.List:return i.default.MEDIA_TYPE.LIST;case o.MediaType.ListResponse:return i.default.MEDIA_TYPE.LIST_REPLY;case o.MediaType.Button:return i.default.MEDIA_TYPE.BUTTON_MESSAGE;case o.MediaType.ButtonResponse:return i.default.MEDIA_TYPE.BUTTON_RESPONSE_MESSAGE;case o.MediaType.Order:return i.default.MEDIA_TYPE.ORDER;case o.MediaType.Product:return i.default.MEDIA_TYPE.PRODUCT_IMAGE}},t.mediaTypeFromProtobuf=function e(t){if(t.deviceSentMessage){var n=t.deviceSentMessage.message;return n?e(n):null}if(t.ephemeralMessage){var r=t.ephemeralMessage.message;return r?e(r):null}if(t.viewOnceMessage){var a=t.viewOnceMessage.message;return a?e(a):null}return t.imageMessage?o.MediaType.Photo:t.stickerMessage?o.MediaType.Sticker:t.locationMessage?o.MediaType.LiveLocation:t.contactMessage?o.MediaType.Contact:t.contactsArrayMessage?o.MediaType.ContactArray:t.documentMessage?o.MediaType.Document:t.audioMessage?t.audioMessage.ptt?o.MediaType.Ptt:o.MediaType.Audio:t.videoMessage?t.videoMessage.gifPlayback?o.MediaType.Gif:o.MediaType.Video:t.buttonsMessage?o.MediaType.Button:t.buttonsResponseMessage?o.MediaType.ButtonResponse:t.listMessage?o.MediaType.List:t.listResponseMessage?o.MediaType.ListResponse:t.orderMessage?o.MediaType.Order:t.productMessage?o.MediaType.Product:t.groupInviteMessage?o.MediaType.Url:null},t.encodeMediaType=s,t.maybeEncoder=u,t.metricsDestinationType=function(e){if(e.isUser())return i.default.E2E_DESTINATION.INDIVIDUAL;if(e.isGroup())return i.default.E2E_DESTINATION.GROUP;if(e.isStatusV3())return i.default.E2E_DESTINATION.STATUS;if(e.isBroadcast())return i.default.E2E_DESTINATION.LIST;throw new Error},t.encodeMaybeMediaType=t.CIPHERTEXT_VERSION=void 0;var a=n(18712),i=r(n(8643)),o=n(77565);function s(e){var t=function(){switch(e){case o.MediaType.Photo:return"image";case o.MediaType.Video:return"video";case o.MediaType.Audio:return"audio";case o.MediaType.Ptt:return"ptt";case o.MediaType.Contact:return"vcard";case o.MediaType.Document:return"document";case o.MediaType.Gif:return"gif";case o.MediaType.ContactArray:return"contact_array";case o.MediaType.LiveLocation:return"livelocation";case o.MediaType.Sticker:return"sticker";case o.MediaType.List:return"list";case o.MediaType.ListResponse:return"list_response";case o.MediaType.ButtonResponse:return"buttons_response";case o.MediaType.Order:return"order";case o.MediaType.Product:return"product";case o.MediaType.Url:return"url";default:return null}}();if(t)return(0,a.CUSTOM_STRING)(t);throw new Error("Unsupported type")}function u(e){return function(t){return null==t?a.DROP_ATTR:e(t)}}t.CIPHERTEXT_VERSION=2;var l=u(s);t.encodeMaybeMediaType=l},33724:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.parseParsableWap(e);if(t.error)throw __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,t.error;return t.success};var a=n(58435),i=r(n(98112)),o=r(n(64032)),s=new i.default("businessProfile",(function(e){var t,n=e.maybeChild("address"),r=n?n.contentString():void 0,i=e.maybeChild("description"),s=i?i.contentString():void 0,u=e.maybeChild("email"),l=u?u.contentString():void 0,c=e.maybeChild("latitude"),d=c?parseFloat(c.contentString()):void 0,f=e.maybeChild("longitude"),p=f?parseFloat(f.contentString()):void 0,h=e.maybeChild("vertical");if(h){var _=h.maybeAttrString("canonical");t={name:h.hasContent()?h.contentString():void 0,canonical:_}}var v=[];e.forEachChildWithTag("website",(function(e){v.push(e.contentString())}));var m,g=[],y=e.maybeChild("categories");y&&y.forEachChildWithTag("category",(function(e){var t=e.attrString("id");g.push({id:t,localized_display_name:e.contentString()})}));var E,S=e.maybeChild("business_hours");if(S){var b=S.maybeAttrString("timezone"),T=[];S.forEachChildWithTag("business_hours_config",(function(e){T.push({day_of_week:e.attrString("day_of_week"),mode:e.attrString("mode"),open_time:e.hasAttr("open_time")?parseInt(e.attrString("open_time"),10):0,close_time:e.hasAttr("close_time")?parseInt(e.attrString("close_time"),10):0})})),m={config:T,timezone:b}}var w=e.maybeChild("profile_options");if(w){E={};var A,C=w.maybeChild("commerce_experience");if(C)E.commerce_experience=null!==(A=a.COMMERCE_EXPERIENCE_TYPES.cast(C.contentString()))&&void 0!==A?A:a.COMMERCE_EXPERIENCE_TYPES.NONE;var O=w.maybeChild("cart_enabled");O&&(E.cart_enabled="true"===O.contentString());var M=w.maybeChild("shop_url");M&&(E.shop_url=M.contentString());var I=w.maybeChild("commerce_manager_url");I&&(E.commerce_manager_url=I.contentString())}var k=e.maybeChild("catalog_status"),P=k?k.attrString("status"):void 0,R={address:r,description:s,email:l,latitude:d,longitude:p,vertical:t,website:v,categories:g,business_hours:m,catalog_status:P,profile_options:E};return(0,o.default)(R)}))},67927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseErrorFields=void 0;var r=new(n(80206).WapParser)("parseErrorFields",(function(e){var t=[];return e.forEachChildWithTag("field",(function(e){var n=e.hasAttr("detail")?e.maybeAttrString("detail"):null;t.push({name:e.attrString("name"),reason:e.attrString("reason"),detail:n})})),t}));t.parseErrorFields=r},18771:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.parseParsableWap(e);if(t.error)throw __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,t.error;return t.success};var a=n(28617),i=r(n(98112)),o=n(11968);var s=new i.default("verifiedName",(function(e){var t=e.attrEnum("verified_level",a.VERIFIED_LEVEL),n=e.hasContent()?e.contentBytes():null,r=e.maybeAttrString("serial"),i=n&&function(e){var t=(0,o.getParsedProtoObjects)(e);if(t&&t.details){var n=(0,o.extractCertificateDetailsParams)(t.details),r=n.name,a=n.serial,i=n.isApi;return{name:r,serial:String(a),isApi:i}}}(n)||{},s=i.serial,u=i.name,l=i.isApi,c=e.attrFlowEnumOrDefault("actual_actors",a.castToActualActorsEnum,null),d=e.attrFlowEnumOrDefault("host_storage",a.castToHostStorageEnum,null),f=e.maybeAttrInt("privacy_mode_ts");return{level:t,serial:r||s,name:u,isApi:!0===l,privacyMode:null!=c&&null!=d&&null!=f?{actualActors:c,hostStorage:d,privacyModeTs:f}:null}}))},98093:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncNewContact=function(e){C.push(e),A?A.debounce(1e3):(A=new u.ShiftTimer((function(){if((0,_.isRegistered)()){var e=C;C=[],A=null,__LOG__(2,void 0,void 0,void 0,["contact-sync"])`start new contact sync for ${e.length} contacts`,I(e).catch((function(e){__LOG__(4,!0,new Error,!0)`contact sync failed`,SEND_LOGS("contact sync failed: "+e)}))}}))).onOrBefore(2e4)},t.syncContactListInChunks=O,t.syncContactList=I,t.runSyncDirtyContactsJob=function(){(0,_.getShouldCheckContactSyncStatus)()&&setTimeout((function(){(0,p.getContactTable)().equals(["isContactSyncCompleted"],0).then((function(e){var t=e.map((function(e){return(0,T.createWid)(e.id)}));return __LOG__(2,void 0,void 0,void 0,["contact-sync"])`sync dirty contacts, found ${t.length} contacts to sync`,O(t)}))}),6e4);(0,_.setShouldCheckContactSyncStatus)()},t.getContactSyncRefreshSeconds=function(){var e,t=null!==(e=(0,m.default)(h.default,"localStorage").getItem(v.default.KEY_CONTACT_SYNC_REFRESH))&&void 0!==e?e:86400;return parseInt(t,10)};var i=a(n(87757)),o=a(n(48926)),s=n(53615),u=n(12035),l=n(72687),c=n(38812),d=n(61098),f=n(11360),p=n(43883),h=a(n(2977)),_=n(79583),v=a(n(62015)),m=a(n(91080)),g=n(45975),y=a(n(43454)),E=n(36545),S=n(31435),b=n(89229),T=n(75793),w=500,A=null,C=[];function O(){return M.apply(this,arguments)}function M(){return(M=(0,o.default)(i.default.mark((function e(t){var n,r,a,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:w,__LOG__(2,void 0,void 0,void 0,["contact-sync"])`start contact sync for ${t.length} contacts in ${Math.ceil(t.length/n)} chunks, each chunk size: ${n}`,r=0;case 3:if(!(r<t.length)){e.next=12;break}return a=t.slice(r,r+n),e.next=7,(0,s.delayMs)(2e4);case 7:return e.next=9,I(a);case 9:r+=n,e.next=3;break;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return k.apply(this,arguments)}function k(){return(k=(0,o.default)(i.default.mark((function e(t){var n,a,o,u,l,c,d,f,p,h,_,v,m,g=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(g.length>1&&void 0!==g[1])||g[1],0!==t.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,P(t);case 5:a=e.sent,o=(new S.USyncQuery).withContext("background").withMode("full").withBusinessProtocol().withStatusProtocol().withPictureProtocol(),n&&o.withDeviceProtocol(),a.forEach((function(e){o.withUser((new E.USyncUser).withId(e.id).withDeviceHash(String(e.hash)))})),u=null,l=3,c=10*Math.random();case 12:if(!(l-- >0)){e.next=33;break}return e.prev=13,e.next=16,o.execute();case 16:if(u=e.sent,!(d=u.error.all)){e.next=23;break}throw c=null!==(f=d.errorBackoff)&&void 0!==f?f:10*Math.random(),new Error(`syncContactList: error ${d.errorCode}: ${d.errorText}`);case 23:l=0;case 24:e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(13),0===l&&(__LOG__(4,!0,new Error,!0)`failed to execute usync query`,SEND_LOGS("failed to execute usync query: "+e.t0)),e.next=31,(0,s.delayMs)(1e3*c);case 31:e.next=12;break;case 33:if(null!=u&&!u.error.all){e.next=35;break}return e.abrupt("return");case 35:for(p=u.refresh,h=[],_=0,v=Object.keys(p);_<v.length;_++)m=v[_],h.push(p[m]);return h.length>0&&B(Math.min.apply(Math,h)),e.next=41,r.all([n?x(u):r.resolve(),D(u),N(u),F(u)]);case 41:return e.next=43,G(t);case 43:case"end":return e.stop()}}),e,null,[[13,26]])})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=(0,o.default)(i.default.mark((function e(t){var n,a,o,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.user})),e.next=3,(0,c.getDeviceIds)(n);case 3:return a=e.sent,o=a.map((function(e){return e?e.devices.map((function(t){return(0,T.createDeviceWidFromUserAndDevice)(e.id,t)})):[]})),e.next=7,r.all(o.map((function(e){return 0===e.length?"":(0,g.phashV2)(e)})));case 7:return s=e.sent,u=t.map((function(e,t){return{id:e,hash:s[t]}})),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){var t=e.error.status;t?__LOG__(3)`handleSyncStatus: failed ${t.errorCode} : ${t.errorText}`:e.list.map((function(e){var t=y.default.get(e.id);t&&e.status&&t.set({status:e.status})}))}function N(){return L.apply(this,arguments)}function L(){return(L=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.list.filter((function(e){var t=e.business;return Boolean(t)})),e.next=3,(0,b.handleVerifiedNameSync)(n.map((function(e){return{id:e.id,verifiedName:e.business.verifiedName}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return U.apply(this,arguments)}function U(){return(U=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.error.devices)&&__LOG__(3)`handleSyncDevice: error ${n.errorCode}: ${n.errorText}`,r=t.list.filter((function(e){return e.devices&&null!=e.devices.deviceList&&null!=e.devices.keyIndex&&!("errorCode"in e.devices)})).map((function(e){return{wid:e.id,devices:e.devices}})),__LOG__(2)`handleSyncDevice: skipping ${t.list.length-r.length} out of ${t.list.length} records`,e.next=6,(0,d.getAndStoreIdentityKeys)(r.map((function(e){return e.wid})));case 6:return e.abrupt("return",(0,f.handleADVDeviceSyncResult)(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=e.error.pictures;t&&__LOG__(3)`handleSyncProfilePictures: failed ${t.errorCode} : ${t.errorText}`}function G(e){var t=e.map((function(e){return{id:(0,l.toJid)(e.user),isContactSyncCompleted:1}}));return __LOG__(2,void 0,void 0,void 0,["contact-sync"])`mark ${t.length} contacts completed for contact sync`,(0,p.getContactTable)().bulkCreateOrMerge(t)}function B(e){isNaN(e)||e<=3600?__LOG__(3,void 0,void 0,void 0,["contact-sync"])`invalid contact sync refresh period: ${e}`:(__LOG__(2,void 0,void 0,void 0,["contact-sync"])`set contact sync refresh period: ${e}`,(0,m.default)(h.default,"localStorage").setItem(v.default.KEY_CONTACT_SYNC_REFRESH,String(e)))}},5043:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.digestKey=function(){var e=(0,o.wap)("iq",{xmlns:"encrypt",type:"get",to:o.S_WHATSAPP_NET,id:(0,o.generateId)()},(0,o.wap)("digest",null));return(0,u.sendIq)(e,p).then((function(e){if(e.success)return(t=e.result,r.all([c.waSignalStore.getRegistrationInfo(),c.waSignalStore.getSignedPreKey()]).then((function(e){var n=(0,i.default)(e,2),a=n[0],o=n[1];if(!a||!o)throw new Error("validateLocalKeyBundle: No registration info is available");if(t.regId!==a.registrationId)throw new Error("validateLocalKeyBundle: registation id mismatch");var u=a.identityKeyPair.pubKey,l=o.keyPair.pubKey,f=u.byteLength+l.byteLength+o.signature.byteLength+32*t.keys.length,p=new Uint8Array(f),h=0;[u,l,o.signature].forEach((function(e){p.set(new Uint8Array(e),h),h+=e.byteLength}));var _=t.keys.map((function(e){return c.waSignalStore.getPreKeyById(e).then((function(t){if(!t)throw Error(`validateLocalKeyBundle: missing prekey record for id ${e}`);return t.keyPair.pubKey}))}));return r.all(_).then((function(e){return e.forEach((function(e){p.set(new Uint8Array(e),h),h+=e.byteLength})),p})).then((function(e){d.default.digest("SHA-1",e).then((function(e){var n=(0,s.encodeB64)(e),r=(0,s.encodeB64)(t.hash);if(n!==r)throw Error(`validateLocalKeyBundle: hash mismatch remote:${r} local:${n}`);__LOG__(2)`validateLocalKeyBundle: success`}))}))}))).then((function(){return{shouldUploadAll:!1}})).catch((function(){return{shouldUploadAll:!1}}));var t,n=e.errorCode;return 404===n?(__LOG__(3)`digestKey: no record found for current user`,r.resolve({shouldUploadAll:!0})):(406===n?__LOG__(3)`digestKey: malformed request`:503===n?__LOG__(3)`digestKey: service unavailable`:__LOG__(3)`digestKey: server error ${n}`,r.resolve({shouldUploadAll:!1}))})).then((function(e){if(e.shouldUploadAll)return __LOG__(2)`digestKey: validate key bundle failed, upload prekeys again`,(0,f.uploadPreKeys)()}))};var i=a(n(63038)),o=n(18712),s=n(92827),u=n(4746),l=a(n(98112)),c=n(1018),d=a(n(29826)),f=n(11535),p=new l.default("digestResponseParser",(function(e){var t=e.child("digest"),n=t.child("skey");return{regId:t.child("registration").contentUint(4),type:t.child("type").contentUint(1),identity:t.child("identity").contentBytes(32),skey:{id:n.child("id").contentUint(3),pubkey:n.child("value").contentBytes(32),signature:n.child("signature").contentBytes(64)},keys:t.child("list").mapChildren((function(e){return e.contentUint(3)})),hash:t.child("hash").contentBytes(20)}}))},40651:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!s.default.isWid(e)||!e.isUser())return __LOG__(3)`getAbout: this method should only take user wid, instead it received: ${e}`,r.resolve({id:e});return(new o.USyncQuery).withContext("interactive").withMode("query").withStatusProtocol().withUser((new i.USyncUser).withId(e)).execute().then((function(t){if(t.error.all||t.error.status){var n=t.error.all||t.error.status;return __LOG__(3)`getAbout: failed ${n.errorCode} : ${n.errorText}`,{id:e,error:n}}var a=t.list;return a.length||r.reject(new Error("no status data returned for user")),{id:e,status:a[0].status}}))};var i=n(36545),o=n(31435),s=a(n(12717))},2796:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBlocklist=function(){return(0,i.sendIq)((0,a.wap)("iq",{xmlns:"jabber:iq:privacy",from:(0,u.JID)((0,o.assertGetMe)()),type:"get",id:(0,a.generateId)()},(0,a.wap)("query",null,(0,a.wap)("list",{name:"default"}))),l).then((function(e){if(e.success)return __LOG__(2)`getBlocklist from server`,e.result;var t=e.errorCode,n=e.errorText;return __LOG__(3)`getBlocklist: failed ${t}, ${n}`,{errorCode:t,errorText:n}}))};var a=n(18712),i=n(4746),o=n(71701),s=r(n(98112)),u=n(19325),l=new s.default("getBlocklistParser",(function(e){return e.hasChild("error")&&404===e.child("error").attrInt("code")?{wids:[]}:{wids:c(e)}}));function c(e){return e.child("query").child("list").mapChildrenWithTag("item",(function(e){return e.attrUserWid("value")}))}},61098:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAndStoreIdentityKeys=function(){return h.apply(this,arguments)},t.default=_;var a=r(n(87757)),i=r(n(48926)),o=n(18712),s=n(4746),u=n(48935),l=r(n(98112)),c=r(n(46005)),d=n(47065),f=n(19325),p=new l.default("identityKeysParser",(function(e){return e.child("list").mapChildren((function(e){if(e.hasChild("error")){var t=e.child("error"),n=t.attrInt("code"),r=t.attrString("text");throw new Error(`identityKeysParser bad response: ${n} ${r}`)}return{type:e.child("type").contentBytes(1),identity:e.child("identity").contentBytes(32),user:e.attrUserWid("jid")}}))}));function h(){return(h=(0,i.default)(a.default.mark((function e(t){var n,r,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.bulkLoadIdentityKey(t.map((function(e){return String((0,d.createSignalAddress)(e))})));case 2:if(n=e.sent,0!==(r=t.filter((function(e,t){return null==n[t]}))).length){e.next=7;break}return __LOG__(2)`getAndStoreIdentityKeys: got 0 missing keys`,e.abrupt("return");case 7:return __LOG__(2)`getAndStoreIdentityKeys: query ${r.length} missing keys for ${t.length} contacts`,e.next=10,_(r);case 10:return i=e.sent,o=i.map((function(e){var t=e.identity,n=(0,u.toSignalCurvePubKey)(t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset));return{identityKey:(0,d.bufferToStr)(n),identifier:(0,d.createSignalAddress)(e.user).toString()}})),e.abrupt("return",c.default.bulkCreateIdentity(o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){var t=e.map((function(e){return(0,o.wap)("user",{jid:(0,f.DEVICE_JID)(e)})})),n=(0,o.wap)("iq",{xmlns:"encrypt",type:"get",to:o.S_WHATSAPP_NET,id:(0,o.generateId)()},(0,o.wap)("identity",null,t));return(0,s.sendIq)(n,p).then((function(e){if(!e.success)throw new Error(`getIdentityKeys bad response ${String(e)}`);return e.result}))}},50843:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProfilePicPreview=function(e,t){return f(e,{preview:!0,invite:t})},t.getProfilePicFull=function(e){return f(e,{preview:!1})};var i=n(18712),o=n(4746),s=n(14650),u=a(n(98112)),l=n(19325),c={preview:"preview",image:"image"},d=new u.default("profilePicParser",(function(e){var t=e.child("picture");return{id:t.attrInt("id"),type:t.attrEnum("type",c),url:t.attrString("url")}}));function f(e,t){var n=t.preview,a=t.invite,u=t.photoId,c=(0,i.wap)("iq",{to:(0,l.CHAT_JID)(e),type:"get",xmlns:"w:profile:picture",id:(0,i.generateId)()},(0,i.wap)("picture",{invite:(0,i.MAYBE_CUSTOM_STRING)(a),type:n?"preview":i.DROP_ATTR,id:null!=u?(0,i.INT)(u):i.DROP_ATTR,query:"url"}));return(0,o.sendIq)(c,d).then((function(t){if(t.success){var n=t.result,a=n.id,i=n.url,o=n.type;return __LOG__(2)`getProfilePic: ${e.toString()} ${a}, ${o}, ${i}`,{tag:a.toString(),eurl:i,type:o}}return r.reject(new s.ServerStatusCodeError(t.errorCode,t.errorText))}))}},82290:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(0,o.randomHex)(8),c=(0,s.getABPropConfigValue)("groups_dogfooding_ui"),d=t.map((function(e){return(0,i.wap)("participant",{jid:(0,f.USER_JID)(e)})}));c&&n&&d.unshift((0,i.wap)("dogfooding",null));var p=(0,i.wap)("iq",{to:i.G_US,type:"set",xmlns:"w:g2",id:(0,i.generateId)()},(0,i.wap)("create",{subject:(0,i.CUSTOM_STRING)(e),key:(0,i.CUSTOM_STRING)(a)},d));return(0,u.sendIq)(p,h).then((function(e){return e.success?e.result:r.reject(new l.ServerStatusCodeError(e.errorCode,e.errorText))}))};var i=n(18712),o=n(98426),s=n(4976),u=n(4746),l=n(14650),c=a(n(98112)),d=n(67275),f=n(19325),p=n(75793),h=new c.default("createGroupReplyParser",(function(e){var t,n=e.child("group");try{t=(0,p.createWid)(`${n.attrString("id")}@g.us`)}catch(e){}if(!t||!t.isGroup)throw Error("createGroupReplyParser: invalid group id");return{wid:t,subject:n.attrString("subject"),creator:n.attrUserWid("creator"),ts:n.attrTime("creation"),participants:n.mapChildrenWithTag("participant",(function(e){var t=e.getFirstChild();return{wid:e.attrUserWid("jid"),error:e.hasAttr("error")?e.attrInt("error"):null,invite_code:t&&t.attrString("code"),invite_code_exp:t&&t.attrString("expiration"),type:e.attrEnumOrDefault("type",d.GROUP_PARTICIPANT_TYPES,"participant")}}))}}))},66044:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.leaveGroups=function(e){var t=e.map((function(e){return(0,i.wap)("group",{id:(0,l.GROUP_JID)(e)})})),n=(0,i.wap)("iq",{to:i.G_US,type:"set",xmlns:"w:g2",id:(0,i.generateId)()},(0,i.wap)("leave",null,t));return(0,o.sendIq)(n,c).then((function(e){return e.success?e.result:r.reject(new s.ServerStatusCodeError(e.errorCode,e.errorText))}))};var i=n(18712),o=n(4746),s=n(14650),u=a(n(98112)),l=n(19325),c=new u.default("leaveGroupResultParser",(function(e){return e.assertAttr("type","result"),{groups:e.child("leave").mapChildren((function(e){return e.attrGroupWid("id")}))}}))},86804:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryAllGroups=function(){var e=(0,o.wap)("iq",{to:o.G_US,type:"get",xmlns:"w:g2",id:(0,o.generateId)()},(0,o.wap)("participating",null,(0,o.wap)("participants",null),(0,o.wap)("description",null)));return(0,s.sendIq)(e,_).then((function(e){return e.success?e.result:(__LOG__(2)`queryAllGroups failed: ${e.errorCode}:${e.errorType}`,r.reject(new u.ServerStatusCodeError(e.errorCode,e.errorText)))}))},t.queryGroup=function(e,t,n){var a=(0,o.wap)("iq",{to:(0,d.GROUP_JID)(e),type:"get",xmlns:"w:g2",id:(0,o.generateId)()},(0,o.wap)("query",{request:t||o.DROP_ATTR,phash:(0,o.MAYBE_CUSTOM_STRING)(n)}));return(0,s.sendIq)(a,h).then((function(e){if(e.success){var t=e.result;return t.phashMatch?r.reject(new Error("queryGroup: phash match case is not implemented!")):t}return __LOG__(2)`queryGroup failed: ${e.errorCode}:${e.errorType}`,r.reject(new u.ServerStatusCodeError(e.errorCode,e.errorText))}))},t.queryGroupInvite=function(e){var t=(0,o.wap)("iq",{to:o.G_US,type:"get",xmlns:"w:g2",id:(0,o.generateId)()},(0,o.wap)("invite",{code:(0,o.CUSTOM_STRING)(e)}));return(0,s.sendIq)(t,h).then((function(e){return e.success?e.result:(__LOG__(2)`queryGroupInvite failed: ${e.errorCode}:${e.errorType}`,r.reject(new u.ServerStatusCodeError(e.errorCode,e.errorText)))}))};var i=a(n(81109)),o=n(18712),s=n(4746),u=n(14650),l=a(n(98112)),c=n(67275),d=n(19325),f=n(75793);function p(e){var t,n=function(e){if(e.hasChild("description")){var t=e.child("description");if(t.hasChild("body")){var n=t.child("body");if(n.hasContent()){var r={desc:n.contentString(),descId:t.attrString("id")};return t.hasAttr("participant")&&(r.descOwner=t.attrUserWid("participant")),t.hasAttr("t")&&(r.descTime=t.attrTime("t")),r}}}return null}(e),r=function(e){var t={subject:e.attrString("subject")};return e.hasAttr("s_o")&&(t.subjectOwner=e.attrUserWid("s_o")),e.hasAttr("s_t")&&(t.subjectTime=e.attrTime("s_t")),t}(e),a=function(e){if(e.hasChild("ephemeral")){var t=e.child("ephemeral");if(t.hasAttr("expiration"))return{ephemeralDuration:t.attrInt("expiration")}}return null}(e);try{t=(0,f.createWid)(`${e.attrString("id")}@g.us`)}catch(e){}if(!t||!t.isGroup)throw Error("createGroupReplyParser: invalid group id");var o=e.mapChildrenWithTag("participant",(function(e){var t=e.attrEnumOrDefault("type",c.GROUP_PARTICIPANT_TYPES,c.GROUP_PARTICIPANT_TYPES.participant);return{id:e.attrUserWid("jid"),isSuperAdmin:t===c.GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:t===c.GROUP_PARTICIPANT_TYPES.admin||t===c.GROUP_PARTICIPANT_TYPES.superadmin}})),s={id:t,owner:e.hasAttr("creator")?e.attrUserWid("creator"):void 0,creation:e.attrTime("creation"),restrict:e.hasChild("locked"),announce:e.hasChild("announcement"),noFrequentlyForwarded:e.hasChild("no_frequently_forwarded"),participants:o,pvId:e.hasAttr("p_v_id")?e.attrInt("p_v_id"):void 0,support:e.hasChild("support")};return(0,i.default)((0,i.default)((0,i.default)((0,i.default)({},s),n),a),r)}var h=new l.default("queryGroupParser",(function(e){return e.hasChild("group")?p(e.child("group")):{phashMatch:!0}})),_=new l.default("queryAllGroupParser",(function(e){return e.child("groups").mapChildren(p)}))},67275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GROUP_PARTICIPANT_TYPES=void 0;t.GROUP_PARTICIPANT_TYPES={superadmin:"superadmin",admin:"admin",participant:"participant"}},48106:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=d.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);return function(e){switch(__LOG__(2)`handleAboutNotification: received ${e.type}
for ${e.from.toString()}`,e.type){case c.SIDE_LIST_CHANGE:break;case c.CHANGE:var t=u.default.get(e.from);t?t.status=e.content:__LOG__(3)`handleAboutNotification: get status update for unknown contact ${e.from}`;break;default:__LOG__(3)`handleAboutNotification: unhandled notification of
type ${e.type}`}return(0,o.wap)("ack",{id:(0,o.CUSTOM_STRING)(e.stanzaId),to:"change"===e.type?(0,l.JID)(e.from):(0,o.CUSTOM_STRING)(e.from),class:"notification",type:"status"})}(t.success)},t.NOTIFICATION_TYPE=void 0;var i=a(n(81109)),o=n(18712),s=a(n(98112)),u=a(n(43454)),l=n(19325),c=Object.freeze({CHANGE:"change",SIDE_LIST_CHANGE:"sideListChange",UNKNOWN:"unknown"});t.NOTIFICATION_TYPE=c;var d=new s.default("incomingAboutNotification",(function(e){e.assertTag("notification");var t={stanzaId:e.attrString("id")},n=e.hasChild("set")&&e.child("set");if(n&&!n.hasAttr("hash"))return(0,i.default)({type:c.CHANGE,from:e.attrUserWid("from"),pushname:e.attrString("notify"),content:n.contentString(),ts:e.attrTime("t")},t);var r=c.UNKNOWN;return n&&n.hasAttr("hash")&&(r=c.SIDE_LIST_CHANGE),(0,i.default)({type:r,from:e.attrString("from")},t)}))},43860:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAndUpdateStatus=E,t.default=function(){return S.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(81109)),u=n(18712),l=n(10619),c=n(71701),d=a(n(40651)),f=a(n(22021)),p=a(n(98112)),h=a(n(43454)),_=n(19325),v=a(n(8132)),m=a(n(66028)),g=n(71802),y=new p.default("incomingAccountSyncNotification",(function(e){e.assertTag("notification");var t,n,r,a,i={stanzaId:e.attrString("id"),ts:e.attrTime("t"),from:e.attrUserWid("from")};if(e.hasChild("status")){var o;null===(o=e.getFirstChild())||void 0===o||o.assertTag("status");var u=e.getFirstChild(),c=(null==u?void 0:u.hasAttr("action"))?null==u?void 0:u.attrString("action"):void 0;return(0,s.default)({type:l.ACCOUNT_SYNC_TYPE.STATUS,action:c},i)}if(e.hasChild("privacy"))return null===(t=e.getFirstChild())||void 0===t||t.assertTag("privacy"),(0,s.default)({type:l.ACCOUNT_SYNC_TYPE.PRIVACY},i);if(e.hasChild("devices"))return null===(n=e.getFirstChild())||void 0===n||n.assertTag("devices"),(0,s.default)({type:l.ACCOUNT_SYNC_TYPE.DEVICES},i);if(e.hasChild("blocklist"))return null===(r=e.getFirstChild())||void 0===r||r.assertTag("blocklist"),(0,s.default)({type:l.ACCOUNT_SYNC_TYPE.BLOCKLIST},i);if(e.hasChild("picture"))return null===(a=e.getFirstChild())||void 0===a||a.assertTag("picture"),(0,s.default)({type:l.ACCOUNT_SYNC_TYPE.PICTURE},i);throw new Error("notification type not supported")}));function E(){var e=(0,c.assertGetMe)();return(0,d.default)(e).then((function(t){if(t.error)return __LOG__(3)`getStatus failed for ${e}: failed ${t.error.errorCode} : ${t.error.errorText}`,r.reject(t.error.errorText);var n=t.status;n&&(h.default.assertGet((0,c.getMaybeMeUser)()).status=n)}))}function S(){return(S=(0,o.default)(i.default.mark((function e(t){var n,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=y.parse(t)).error){e.next=5;break}return __LOG__(2)`error while parsing: ${t.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,e.abrupt("return",r.reject(n.error));case 5:a=n.success,o=(0,u.wap)("ack",{id:(0,u.CUSTOM_STRING)(a.stanzaId),to:(0,_.JID)(a.from),class:"notification",type:"status"}),e.t0=a.type,e.next=e.t0===l.ACCOUNT_SYNC_TYPE.STATUS?10:e.t0===l.ACCOUNT_SYNC_TYPE.DEVICES?13:e.t0===l.ACCOUNT_SYNC_TYPE.PICTURE?26:e.t0===l.ACCOUNT_SYNC_TYPE.PRIVACY?29:e.t0===l.ACCOUNT_SYNC_TYPE.BLOCKLIST?31:33;break;case 10:return e.next=12,E();case 12:return e.abrupt("break",34);case 13:if(!f.default.supportsFeature(f.default.F.MD_BACKEND)){e.next=23;break}if(m.default.isResumeFromRestartComplete()){e.next=19;break}return v.default.addOfflinePendingDevice(a.from.toString(),o),e.abrupt("return","NO_ACK");case 19:if(!m.default.isResumeOnSocketDisconnectInProgress()){e.next=23;break}return e.next=22,(0,g.addUserToPendingDeviceSync)([a.from.toString()]);case 22:return e.abrupt("return",o);case 23:return e.next=25,(0,l.getDevices)("notification");case 25:return e.abrupt("break",34);case 26:return e.next=28,(0,l.getAndUpdateProfilePicture)();case 28:return e.abrupt("break",34);case 29:return(0,l.updatePrivacySettings)(),e.abrupt("break",34);case 31:return(0,l.updateBlocklist)(),e.abrupt("break",34);case 33:__LOG__(2)`account sync notification of type ${a.type} not supported`;case 34:return e.abrupt("return",o);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},77952:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleVerifiedBusinessNameNotificationHash=function(){return w.apply(this,arguments)},t.handleVerifiedBusinessNameNotificationContact=function(){return A.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(63038)),u=n(18712),l=n(4746),c=a(n(34263)),d=a(n(48629)),f=a(n(16913)),p=n(30306),h=a(n(98112)),_=n(28367),v=n(55943),m=n(89992),g=a(n(18771)),y=n(19325);function E(e,t,n,r,a,i,o){return(0,m.createOrUpdateVerifiedBusinessName)(e,t,n,parseInt(a||"0",10),r,i,o)}function S(e){return(0,_.getStorage)().lock(["verified-business-name"],(function(t){var n=[E((0,s.default)(t,1)[0],e.wid,e.level,e.verifiedName,e.serial,e.isApi,e.privacyMode)];return r.all(n)})).then((function(){var t=[],n=d.default.get(e.wid);return null!=n&&t.push((0,f.default)(e.wid,{verifiedName:n.verifiedName,isVerifiedHigh:n.verifiedLevel===c.default.VERIFIED_LEVEL.HIGH,isBusiness:n.isBusiness,isEnterprise:n.isEnterprise,privacyMode:n.privacyMode},{verifiedName:e.verifiedName,isVerifiedHigh:"high"===e.level,isBusiness:!0,isEnterprise:e.isApi,privacyMode:e.privacyMode})),t.push(function(e,t,n,a,i){var o=d.default.get(e);return null!=o&&(0,v.updateContactBusinessProperties)([{id:e,name:n,level:t,isApi:a,privacyMode:i}],[o]),r.resolve()}(e.wid,e.level,e.verifiedName,e.isApi,e.privacyMode)),r.all(t).then((function(){}))}))}var b=new h.default("verifiedNameParser",(function(e){return(0,g.default)(e.child("verified_name"))}));function T(e){var t=(0,u.wap)("iq",{to:u.S_WHATSAPP_NET,type:"get",xmlns:"w:biz",id:(0,u.generateId)()},(0,u.wap)("verified_name",{jid:(0,y.DEVICE_JID)(e)}));return(0,l.sendIq)(t,b).then((function(e){if(!e.success){if(404===e.errorCode)return void __LOG__(3)`verified name notification not found`;throw new Error("Could not send IQ in retrieveBusinessDetails")}return e.result}))}function w(){return(w=(0,o.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("verified_name_hash"===t.type){e.next=2;break}throw Error("Invalid notification type");case 2:if(n=d.default.resolveWidsFromHash(t.hash)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,r.all(n.map((function(e){return T(e).then((function(t){return{wid:e,verifiedName:t}}))})));case 7:if(!(a=e.sent).length){e.next=11;break}return e.next=11,r.all(a.map((function(e){var n=e.wid,r=e.verifiedName;if(r){var a=r.name,i=r.level,o=r.serial,s=r.isApi,u=r.privacyMode;return S({wid:n,verifiedName:a,level:i,stanzaId:t.stanzaId,ts:t.ts,serial:o,isApi:s,privacyMode:u})}if(void 0===r)return(0,p.handleBusinessRemoval)(n,t.stanzaId,t.ts)})));case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s,u,l,c,f,p,h,_,v;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.jid,r=t.stanzaId,a=t.ts,o=t.verifiedName,s=o.serial,u=void 0===s?"":s,l=o.level,c=o.isApi,f=o.privacyMode,p=o.name){e.next=14;break}if(null==(null===(h=d.default.get(n))||void 0===h?void 0:h.verifiedName)){e.next=8;break}p=(null===(_=d.default.get(n))||void 0===_?void 0:_.verifiedName)||"",e.next=14;break;case 8:return e.next=10,T(n);case 10:if(v=e.sent){e.next=13;break}return e.abrupt("return");case 13:p=v.name;case 14:return e.abrupt("return",S({verifiedName:p,level:l,stanzaId:r,ts:a,wid:n,serial:u,isApi:c,privacyMode:f}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},80410:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleBusinessNotification=function(e){__LOG__(2)`business notification received, node: ${e}`;var t=h.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);var n=t.success;switch(n.type){case"verified_name_hash":return(0,u.handleVerifiedBusinessNameNotificationHash)(n).then((function(e){return _(n.stanzaId,n.from,!e)}));case"verified_name_jid":return(0,u.handleVerifiedBusinessNameNotificationContact)(n).then((function(){return _(n.stanzaId,n.from,!1)}));case"remove_hash":return(0,c.handleBusinessRemovalNotificationHash)(n).then((function(e){return _(n.stanzaId,n.from,!e)}));case"remove_jid":return(0,c.handleBusinessRemovalNotificationContact)(n).then((function(){return _(n.stanzaId,n.from,!1)}));case"profile":return(0,l.handleBusinessProfile)(n),r.resolve(_(n.stanzaId,n.from,!1));case"profile_hash":return(0,l.handleBusinessProfileHash)(n).then((function(e){return _(n.stanzaId,n.from,!e)}));default:return r.resolve(_(n.stanzaId,n.from,!1))}};var i=a(n(81109)),o=n(18712),s=a(n(33724)),u=n(77952),l=n(38256),c=n(30306),d=a(n(98112)),f=a(n(18771)),p=n(19325),h=new d.default("businessNotificationParser",(function(e){e.assertTag("notification");var t,n={stanzaId:e.attrString("id"),from:e.attrChatWid("from"),ts:e.attrTime("t")};if(e.hasChild("remove"))return(t=e.child("remove")).hasAttr("jid")?(0,i.default)({type:"remove_jid",jid:t.attrChatWid("jid")},n):(0,i.default)({type:"remove_hash",hash:t.attrString("hash")},n);if(e.hasChild("verified_name"))return(t=e.child("verified_name")).hasAttr("jid")?(0,i.default)({type:"verified_name_jid",jid:t.attrChatWid("jid"),verifiedName:(0,f.default)(t)},n):(0,i.default)({type:"verified_name_hash",hash:t.attrString("hash")},n);if(e.hasChild("profile")){var r=e.child("profile"),a=r.maybeAttrString("hash");if(a)return(0,i.default)({type:"profile_hash",hash:a},n);var o=(0,s.default)(r);return(0,i.default)({type:"profile",profile:o},n)}return e.throw("Expected child type to be one of: remove | verified_name | profile")}));function _(e,t,n){return n?(0,o.wap)("ack",{id:(0,o.CUSTOM_STRING)(e),to:(0,p.JID)(t),class:"notification",type:"business"},(0,o.wap)("user",{side_list:"out"})):(0,o.wap)("ack",{id:(0,o.CUSTOM_STRING)(e),to:(0,p.JID)(t),class:"notification",type:"business"})}},38256:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleBusinessProfileHash=t.handleBusinessProfile=void 0;var i=a(n(87757)),o=a(n(43269)),s=a(n(48926)),u=a(n(93250)),l=n(79984),c=a(n(48629));t.handleBusinessProfile=function(e){var t=e.from,n=e.profile,r=Boolean(u.default.getValid(t)),a=(0,l.parseBusinessProfile)({id:t,profile:n,queryCatalog:!1}),i=u.default.gaddUp(a);r||(i.stale=!0)};var d=function(){var e=(0,s.default)(i.default.mark((function e(t){var n,a,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.from,a=t.hash,l=c.default.resolveWidsFromHash(a)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,r.all(l.map(function(){var e=(0,s.default)(i.default.mark((function e(t){var r,a,s,l,c,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Boolean(u.default.getValid(n)),e.next=3,u.default.update(t);case 3:a=e.sent,s=Array.isArray(a)?a:[a],l=(0,o.default)(s);try{for(l.s();!(c=l.n()).done;)d=c.value,r||(d.stale=!0)}catch(e){l.e(e)}finally{l.f()}case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.handleBusinessProfileHash=d},30306:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleBusinessRemoval=_,t.handleBusinessRemovalNotificationHash=function(){return v.apply(this,arguments)},t.handleBusinessRemovalNotificationContact=function(){return m.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(63038)),u=a(n(34263)),l=a(n(48629)),c=a(n(16913)),d=n(28367);function f(e,t){return e.get(t.user).then((function(n){return n?(n.isBusiness=!1,n.verifiedLevel=0,n.verifiedName="",e.merge(t.user,n)):r.resolve()}))}function p(e,t){return e.remove(t.user)}var h={isVerifiedHigh:!1,isBusiness:!1,isEnterprise:!1};function _(e){var t=l.default.get(e),n=t?{verifiedName:t.verifiedName,isVerifiedHigh:t.verifiedLevel===u.default.VERIFIED_LEVEL.HIGH,isBusiness:t.isBusiness,isEnterprise:t.isEnterprise,privacyMode:t.privacyMode}:h;return(0,d.getStorage)().lock(["contact","verified-business-name"],(function(t){var n=(0,s.default)(t,2),a=n[0],i=n[1];return r.all([f(a,e),p(i,e)])})).then((function(){var t=l.default.get(e);return null!=t&&t.set({isBusiness:!1,verifiedLevel:null,verifiedName:null}),(0,c.default)(e,n,h)})).then((function(){}))}function v(){return(v=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("remove_hash"===t.type){e.next=2;break}throw Error("Invalid notification type");case 2:if(n=l.default.resolveWidsFromHash(t.hash)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,r.all(n.map((function(e){return _(e,t.stanzaId,t.ts)})));case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("remove_jid"===t.type){e.next=2;break}throw Error("Invalid notification type");case 2:return e.next=4,_(t.jid,t.stanzaId,t.ts);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},16980:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=o.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);return(0,i.default)(t.success)};var i=a(n(6333)),o=new(a(n(98112)).default)("incomingChatStateParser",(function(e){var t;if(e.assertTag("chatstate"),e.hasChild("paused"))t="paused";else{if(!e.hasChild("composing"))return e.throw("Expected child of type paused or composing");t=e.child("composing").hasAttr("media")?"recording":"composing"}return{id:e.attrChatWid("from"),type:t,participant:e.hasAttr("participant")?e.attrUserWid("participant"):void 0}}))},68970:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return M.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(81109)),u=n(18712),l=a(n(91080)),c=a(n(26671)),d=n(94909),f=n(71701),p=n(39888),h=a(n(5315)),_=a(n(98112)),v=a(n(34254)),m=n(56395),g=n(3131),y=a(n(75554)),E=n(96303),S=a(n(43454)),b=n(75793),T=n(8985),w=new _.default("incomingContactsNotification",(function(e){e.assertTag("notification");var t=e.attrString("id"),n={from:e.attrString("from"),ts:e.attrTime("t"),rawTs:e.attrString("t"),stanzaId:t};if(e.hasChild("update")){var r=e.child("update");return r.hasAttr("jid")?(0,s.default)({type:"update",jid:r.attrUserWid("jid")},n):(0,s.default)({type:"empty",jid:null},n)}if(e.hasChild("add")){var a=e.child("add");return(0,s.default)({type:"add",hash:a.hasContent()?a.contentBytes():null,jid:null},n)}if(e.hasChild("remove")){var i=e.child("remove");return(0,s.default)({type:"remove",jid:i.attrUserWid("jid")},n)}if(e.hasChild("modify")){var o=e.child("modify");return(0,s.default)({type:"modify",jid:o.attrUserWid("new"),oldJid:o.attrUserWid("old")},n)}if(e.hasChild("sync")){var u=e.child("sync");return(0,s.default)({type:"sync",after:u.attrTime("after"),jid:null},n)}return __LOG__(3)`Unexpected "contacts" notification`,(0,s.default)({type:"empty",jid:null},n)}));function A(e,t){var n=function(e,t){if("modify"!==t.type)throw new Error("Error: genContactChangeNotificationMsg invalid type");var n=(0,f.getMeUser)(),r=(0,l.default)(t.oldJid,"notification.oldJid"),a=(0,l.default)(t.jid,"notification.jid");return{id:new h.default({remote:e,fromMe:!1,id:(0,y.default)()}),from:e,subtype:"change_number",t:t.ts,to:n,type:"notification_template",templateParams:[r,a]}}(e,t);return(0,p.handleSingleMsgMD)(e,n)}function C(){return O.apply(this,arguments)}function O(){return(O=(0,o.default)(i.default.mark((function e(t){var n,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.oldJid){e.next=13;break}return n=t.oldJid,a=t.jid,o=[],c.default.get(n)&&o.push({id:n.toString(),changeNumberNewJid:a.toString(),changeNumberOldJid:void 0}),c.default.get(a)&&o.push({id:a.toString(),changeNumberNewJid:void 0,changeNumberOldJid:n.toString()}),(0,T.getTable)().bulkCreateOrMerge(o).then((function(){o.forEach((function(e){var t=c.default.get(e.id);t&&(t.changeNumberNewJid=e.changeNumberNewJid?(0,b.createWid)(e.changeNumberNewJid):void 0,t.changeNumberOldJid=e.changeNumberOldJid?(0,b.createWid)(e.changeNumberOldJid):void 0)}))})),e.next=11,r.all([A(n,t),A(a,t)]);case 11:e.next=14;break;case 13:__LOG__(2)`notification.oldJid is null`;case 14:return e.abrupt("return",r.resolve());case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=(0,o.default)(i.default.mark((function e(t){var n,a,o,s,l,c,f,p;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(e,t){return(0,u.wap)("ack",{id:(0,u.CUSTOM_STRING)(e.stanzaId),to:(0,u.CUSTOM_STRING)(e.from),class:"notification",type:"contacts"},t)},!(n=w.parse(t)).error){e.next=6;break}return __LOG__(2)`error while parsing: ${t.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,e.abrupt("return",r.reject(n.error));case 6:a=n.success,o=a.jid,e.t0=a.type,e.next="update"===e.t0?11:"modify"===e.t0?21:"sync"===e.t0?24:28;break;case 11:if(o){e.next=14;break}return __LOG__(3)`handleContactsNotification: an update command does not include jid`,e.abrupt("return",p(a));case 14:return(s=v.default.get(o))&&s.reset(),l=r.resolve(),(c=S.default.get(o))&&(c.set({status:""}),l=(0,E.getStatus)(o).then((function(e){c.set({status:e.status})}))),f=(0,g.changeProfilePicThumb)(a.jid,m.PROFILE_PIC_COMMAND.REMOVE),e.abrupt("return",r.all([f,l]).then((function(){return p(a)})));case 21:return e.next=23,C(a);case 23:return e.abrupt("return",p(a));case 24:return __LOG__(2,void 0,void 0,void 0,["contact-sync"])`received contact sync notification`,e.next=27,(0,d.contactSync)();case 27:return e.abrupt("return",p(a));case 28:return __LOG__(2)`handleContactsNotification: unhandled notification of type ${a.type}`,e.abrupt("return",p(a));case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},48643:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return E.apply(this,arguments)},t.DEVICE_NOTIFICATION_TYPES=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(18712),u=n(24963),l=a(n(22021)),c=n(11360),d=a(n(98112)),f=a(n(78919)),p=n(19325),h=n(75793),_=a(n(8132)),v=a(n(66028)),m=n(71802),g={add:"add",remove:"remove",update:"update"};t.DEVICE_NOTIFICATION_TYPES=g;var y=new d.default("incomingDevicesNotification",(function(e){e.assertTag("notification"),e.assertTag("notification"),e.assertAttr("type","devices");var t,n,r,a=[];if(e.hasChild("remove"))n=g.remove,t=e.child("remove");else if(e.hasChild("add"))n=g.add,t=e.child("add");else{if(!e.hasChild("update"))throw __LOG__(3)`Unknown Devices Notification: Devices notification without "remove" and "add" nodes`,new Error("Failed to parse devices notification");n=g.update,t=e.child("update")}if(n===g.add||n===g.remove){var i=t.maybeChild("key-index-list");if(!i)throw new Error("key index node is required to handle device add or remove notification");var o=i.attrTime("ts");if(n===g.remove&&!o)throw new Error("timestamp is required to handle device remove notification");r={ts:o,signedKeyIndexBytes:n===g.add?i.contentBytes():null};var s=t.maybeChild("device"),u=null==s?void 0:s.attrWid("jid").device;if(!s||null==u)throw new Error("device node or device id is null");a=[{id:u,keyIndex:s.hasAttr("key-index")?s.attrInt("key-index"):null}]}return{type:n,stanzaId:e.attrString("id"),hash:t.attrString(n===g.update?"hash":"device_hash"),user:e.attrUserWid("from"),deviceList:a,keyIndex:r}}));function E(){return(E=(0,o.default)(i.default.mark((function e(t){var n,a,o,d,E,S,b;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=y.parse(t)).error){e.next=5;break}return __LOG__(2)`error while parsing: ${t.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,e.abrupt("return",r.reject(n.error));case 5:if(a=n.success,o=a.user,d=(0,s.wap)("ack",{to:(0,p.USER_JID)(a.user),id:(0,s.CUSTOM_STRING)(a.stanzaId),class:"notification"}),!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=16;break}if(v.default.isResumeFromRestartComplete()){e.next=12;break}return _.default.addOfflinePendingDevice(o.toString(),d),e.abrupt("return","NO_ACK");case 12:if(!v.default.isResumeOnSocketDisconnectInProgress()){e.next=16;break}return e.next=15,(0,m.addUserToPendingDeviceSync)([o.toString()]);case 15:return e.abrupt("return",d);case 16:if(E={wid:o,devices:{deviceList:a.deviceList,keyIndex:a.keyIndex},type:a.type},a.type!==g.add){e.next=29;break}return e.prev=18,e.next=21,(0,c.handleADVDeviceUpdate)(E);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(18),__LOG__(3)`handleDevicesNotification - add error: ${e.t0}`;case 26:return e.abrupt("return",d);case 29:if(a.type!==g.remove){e.next=44;break}return e.prev=30,e.next=33,(0,c.handleADVDeviceUpdate)(E);case 33:return b=(null===(S=a.deviceList)||void 0===S?void 0:S.map((function(e){return e.id})))||[],e.next=36,r.all(b.map((function(e){var t=(0,h.createDeviceWidFromUserAndDevice)(o.user,e);f.default.notifyDeviceIdentityChangedOrDeleted(t,!0)})));case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(30),__LOG__(3)`handleDevicesNotification - remove error: ${e.t1}`;case 41:return e.abrupt("return",d);case 44:return e.prev=44,e.next=47,(0,u.syncDeviceList)([o],"notification",a.hash);case 47:e.next=52;break;case 49:e.prev=49,e.t2=e.catch(44),__LOG__(3)`handleDevicesNotification - update error: ${e.t2}`;case 52:return e.abrupt("return",d);case 53:case"end":return e.stop()}}),e,null,[[18,23],[30,38],[44,49]])})))).apply(this,arguments)}},6462:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=s.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);var n=t.success,a=(0,i.wap)("ack",{to:i.S_WHATSAPP_NET,id:(0,i.CUSTOM_STRING)(n.stanzaId),class:"notification"});return(0,o.digestKey)().then((function(){return a}))};var i=n(18712),o=n(5043),s=new(a(n(98112)).default)("digestKeyParser",(function(e){return e.assertTag("notification"),e.assertAttr("type","encrypt"),e.assertFromServer(),e.child("digest").assertTag("digest"),{stanzaId:e.attrString("id")}}))},51787:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return _.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(34541)),u=n(4746),l=a(n(34263)),c=a(n(98112)),d=n(17291),f=a(n(6497)),p=a(n(7860)),h=new c.default("failureParser",(function(e){return e.assertTag("failure"),{reason:e.attrInt("reason",400,599),location:e.attrString("location"),code:e.hasAttr("code")?e.attrInt("code"):null,expire:e.hasAttr("expire")?e.attrInt("expire"):null}}));function _(){return(_=(0,o.default)(i.default.mark((function e(t){var n,a,o,c,_;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=h.parse(t)).error){e.next=4;break}return __LOG__(4,void 0,new Error)`${n.error.toString()} parsing ${t.toString()}`,e.abrupt("return",r.reject(n.error));case 4:e.t0=n.success.reason,e.next=401===e.t0||403===e.t0||406===e.t0?7:405===e.t0||409===e.t0?12:402===e.t0?18:400===e.t0||500===e.t0||501===e.t0?26:28;break;case 7:return __LOG__(2)`received failure stanza, reason: ${n.success.reason}, logging out`,e.next=10,p.default.clearCredentialsAndStoredData();case 10:return s.default.logout(),e.abrupt("break",30);case 12:return __LOG__(2)`Client too old or bad user agent, attempting to update the app`,a=l.default.VERSION_STR.replace(/\.[di]$/,""),"web"===d.PLATFORMS[l.default.WAM_PLATFORM]?f.default.update(a,!1,0):f.default.update(void 0,!1,0,!1),(0,u.stopComms)(),e.abrupt("break",30);case 18:if(o=n.success,c=o.code,_=o.expire,null==c||null==_){e.next=23;break}s.default.onTemporaryBan({banned:!0,code:c,expire:_}),e.next=25;break;case 23:throw __LOG__(4,void 0,new Error)`Incorrect temporary ban data ${c} ${_}`,new Error("handleFailure: wrong temp ban data");case 25:return e.abrupt("break",30);case 26:return __LOG__(3)`handleFailure: got failure code ${n.success.reason}`,e.abrupt("break",30);case 28:return __LOG__(3)`failure reason ${n.success.reason} not implemented yet`,e.abrupt("return",r.reject(`failure reason ${n.success.reason} not implemented yet`));case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},37558:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.doesGroupExistInStorage=C,t.default=function(e){var t=A.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);var n=t.success,a=n.chatId,i=n.author,o=n.ts,s=n.pushname,c=n.externalId,d=n.actions,f=!!n.offline&&!b.default.isResumeFromRestartComplete(),p=(0,u.default)({chatId:a,author:i,ts:o,externalId:c},s?{pushname:s}:null);return(0,h.onMsgProcessingThread)(a.toString(),f,(function(){return r.all(d.map((function(e){return function(){return M.apply(this,arguments)}(p,e,f)}))).then((function(){return(0,l.wap)("ack",{to:(0,y.GROUP_JID)(n.chatId),id:(0,l.CUSTOM_STRING)(n.externalId),class:"notification",participant:i?(0,y.JID)(i):l.DROP_ATTR})}))}))};var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=a(n(81109)),l=n(18712),c=n(71701),d=n(38419),f=n(91438),p=n(61827),h=n(8160),_=a(n(99908)),v=n(39888),m=a(n(98112)),g=n(67275),y=n(19325),E=n(38215),S=n(8985),b=a(n(66028)),T=n(52300),w=Object.freeze({REMOVE:"remove",ADD:"add",DEMOTE:"demote",PROMOTE:"promote",MODIFY:"modify",CREATE:"create",SUBJECT:"subject",DESC:"description",LOCKED:"locked",UNLOCKED:"unlocked",ANNOUNCE:"announcement",NOT_ANNOUNCE:"not_announcement",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",FREQUENTLY_FORWARDED_OK:"frequently_forwarded_ok",INVITE:"invite",EPHEMERAL:"ephemeral",NOT_EPHEMERAL:"not_ephemeral",REVOKE:"revoke"});var A=new m.default("groupNotificationParser",(function(e){e.assertTag("notification"),e.hasAttr("to")&&e.assertAttrIsMe("to");var t=e.attrGroupWid("from"),n=e.hasAttr("participant")?e.attrUserWid("participant"):null,r=e.attrTime("t");function a(e){return{participants:e.mapChildrenWithTag("participant",(function(e){return e.attrUserWid("jid")})),prevVersion:e.hasAttr("prev_v_id")?e.attrInt("prev_v_id"):void 0,version:e.hasAttr("v_id")?e.attrInt("v_id"):void 0}}var i=e.mapChildren((function(e){var t=e.tag();switch(t){case w.CREATE:return function(e){var t=e.child("group"),n=t.mapChildrenWithTag("participant",(function(e){var t=e.attrEnumOrDefault("type",g.GROUP_PARTICIPANT_TYPES,"participant");return{id:e.attrUserWid("jid"),isSuperAdmin:t===g.GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:t===g.GROUP_PARTICIPANT_TYPES.admin||t===g.GROUP_PARTICIPANT_TYPES.superadmin}})),r=function(e){if(e.hasChild("description")){var t=e.child("description");if(t.hasChild("body")){var n=t.child("body");if(n.hasContent())return{content:n.contentString(),id:t.attrString("id")}}}return null}(t),a=function(e){if(e.hasChild("ephemeral")){var t=e.child("ephemeral");if(t.hasAttr("expiration"))return{ephemeralDuration:t.attrInt("expiration")}}return null}(t),i={subject:t.attrString("subject"),restrict:t.hasChild("locked"),announce:t.hasChild("announcement"),noFrequentlyForwarded:t.hasChild("no_frequently_forwarded"),ephemeralDuration:a?a.ephemeralDuration:void 0,owner:t.hasAttr("creator")?t.attrUserWid("creator"):void 0,creation:t.attrTime("creation"),participants:n,desc:r?r.content:void 0,descId:r?r.id:void 0,subjectOwner:t.hasAttr("s_o")?t.attrUserWid("s_o"):void 0,subjectTime:t.hasAttr("s_t")?t.attrTime("s_t"):void 0,support:t.hasChild("support"),pvId:t.attrInt("p_v_id")};return{action:w.CREATE,isInvite:e.hasAttr("reason")&&"invite"===e.attrString("reason"),groupInfo:i}}(e);case w.ADD:return(0,u.default)((0,u.default)({action:f.GROUP_ACTIONS.ADD},a(e)),{},{isInvite:e.hasAttr("reason")&&"invite"===e.attrString("reason")});case w.REMOVE:return(0,u.default)({action:w.REMOVE},a(e));case w.PROMOTE:return(0,u.default)({action:w.PROMOTE},a(e));case w.DEMOTE:return(0,u.default)({action:w.DEMOTE},a(e));case w.MODIFY:return(0,u.default)({action:f.GROUP_ACTIONS.MODIFY},a(e));case w.SUBJECT:return{action:f.GROUP_ACTIONS.SUBJECT,subject:e.attrString("subject"),s_o:e.hasAttr("s_o")?e.attrUserWid("s_o"):null,s_t:e.hasAttr("s_t")?e.attrTime("s_t"):null};case w.DESC:return e.hasChild("delete")?{action:f.GROUP_ACTIONS.DESC_REMOVE,descId:e.attrString("id")}:{action:f.GROUP_ACTIONS.DESC_ADD,descId:e.attrString("id"),desc:e.hasChild("body")?e.child("body").contentString():null,descTime:r};case w.LOCKED:return{action:f.GROUP_ACTIONS.RESTRICT,value:!0};case w.UNLOCKED:return{action:f.GROUP_ACTIONS.RESTRICT,value:!1};case w.ANNOUNCE:return{action:f.GROUP_ACTIONS.ANNOUNCE,value:!0};case w.NOT_ANNOUNCE:return{action:f.GROUP_ACTIONS.ANNOUNCE,value:!1};case w.NO_FREQUENTLY_FORWARDED:return{action:f.GROUP_ACTIONS.NO_FORWARD,value:!0};case w.FREQUENTLY_FORWARDED_OK:return{action:f.GROUP_ACTIONS.NO_FORWARD,value:!1};case w.INVITE:return{action:f.GROUP_ACTIONS.INVITE_CODE,code:e.attrString("code")};case w.EPHEMERAL:return{action:f.GROUP_ACTIONS.EPHEMERAL,duration:e.attrInt("expiration")};case w.NOT_EPHEMERAL:return{action:f.GROUP_ACTIONS.EPHEMERAL,duration:0};case w.REVOKE:return{action:f.GROUP_ACTIONS.REVOKE,participants:e.mapChildrenWithTag("participant",(function(e){return{id:e.attrUserWid("jid"),expiration:e.attrInt("expiration")}}))};default:throw new Error(`Unrecognized group action ${t}`)}}));return{externalId:e.attrString("id"),chatId:t,author:n,ts:e.attrTime("t"),pushname:e.hasAttr("notify")?e.attrString("notify"):null,offline:e.hasAttr("offline")?e.attrString("offline"):null,actions:i}}));function C(){return O.apply(this,arguments)}function O(){return(O=(0,s.default)(i.default.mark((function e(t){var n,a,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.all([(0,E.getTable)().get(t.toString()),(0,S.getTable)().get(t.toString())]);case 2:return n=e.sent,a=(0,o.default)(n,2),s=a[0],u=a[1],e.abrupt("return",!!s||!!u&&!!u.t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=(0,s.default)(i.default.mark((function e(t,n){var a,o,s,l,h,m,g,y=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=y.length>2&&void 0!==y[2]&&y[2],n){e.next=3;break}return e.abrupt("return");case 3:if(__LOG__(2,void 0,void 0,void 0,["groups"])`handle action ${n.action}`,o=[],e.prev=5,n.action!==w.CREATE){e.next=26;break}return s=(0,u.default)((0,u.default)({},n.groupInfo),{},{id:t.chatId}),e.next=10,C(s.id);case 10:return l=e.sent,__LOG__(2,void 0,void 0,void 0,["groups"])`group id ${s.id} exists in storage = ${l}`,e.next=14,(0,p.handleGroupCreation)(t,s);case 14:if(__LOG__(2,void 0,void 0,void 0,["groups"])`handleGroupCreation done for group id ${s.id}`,l||(o.push((0,T.genEncryptNotificationMsg)(t.chatId)),o.push((0,d.genGroupCreationMsg)(t,s))),(h=(0,c.getMaybeMeUser)()).equals(t.author)){e.next=24;break}return m={action:f.GROUP_ACTIONS.ADD,version:s.pvId,participants:[h],isInvite:n.isInvite},e.next=21,(0,p.handleGroupActionMD)(t,m);case 21:o.push((0,d.genGroupNotificationMsg)(t,m)),g=s.ephemeralDuration,t.author&&null!=t.ts&&null!=g&&g>0&&o.push((0,d.genGroupEphemeralSettingMsg)(t.chatId,t.ts,t.author,g));case 24:e.next=30;break;case 26:return e.next=28,(0,p.handleGroupActionMD)(t,n);case 28:__LOG__(2,void 0,void 0,void 0,["groups"])`handleGroupActionMD done for ${n}`,o.push((0,d.genGroupNotificationMsg)(t,n));case 30:if(!a){e.next=34;break}_.default.addOfflineMessage(o.map((function(e){return{msg:e}}))),e.next=36;break;case 34:return e.next=36,r.all(o.map((function(e){return(0,v.handleSingleMsgMD)(e.from,e)})));case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(5),__LOG__(2)`handleGroupNotification: failed with ${e.t0}`;case 41:case"end":return e.stop()}}),e,null,[[5,38]])})))).apply(this,arguments)}},70238:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return W.apply(this,arguments)},t.handleHistorySyncChunk=V;var o=i(n(87757)),s=i(n(81109)),u=i(n(48926)),l=n(53939),c=n(20290),d=n(17643),f=n(21037),p=n(90066),h=(n(4976),i(n(35340))),_=i(n(83219)),v=n(8985),m=n(54654),g=i(n(4685)),y=i(n(34541)),E=n(23051),S=i(n(34263)),b=n(52300),T=i(n(48629)),w=n(41150),A=i(n(75214)),C=n(676),O=n(71701),M=n(97223),I=n(72702),k=n(83738),P=a(n(21813)),R=i(n(8643)),D=n(43883),N=n(48466),L=n(39888),x=i(n(5315)),U=n(79583),F=i(n(91080)),G=n(87442),B=n(43468),j=i(n(23306)),Y=n(75793),K=n(35504);function W(){return(W=(0,u.default)(o.default.mark((function e(t,n,r){var a,i,u,l,c,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a=t.downloadOptions){e.next=5;break}return e.abrupt("return");case 5:i=!!t.historySyncNotification.originalMessageId,u=i?t.historySyncNotification.originalMessageId:r,l=new x.default({remote:n,fromMe:!0,id:u}).toString(),c={msgKey:l,processed:0,downloadOptions:a,isReupload:1,historySyncStepStartedTs:(0,p.unixTimeMs)(),reuploadPending:!1,historySyncPayloadSize:t.historySyncNotification.fileLength},i||(c.syncType=t.historySyncNotification.syncType,c.chunkOrder=t.historySyncNotification.chunkOrder||0,c.isReupload=0),d=c,e.t0=d.syncType,e.next=e.t0===k.HistorySyncHistorySyncType.INITIAL_BOOTSTRAP||e.t0===k.HistorySyncHistorySyncType.INITIAL_STATUS_V3?14:e.t0===k.HistorySyncHistorySyncType.PUSH_NAME?17:22;break;case 14:return __LOG__(2)`[History sync initial sync received] ${q(d)}`,V(d),e.abrupt("break",25);case 17:return __LOG__(2)`[History sync initial pushname received] ${q(d)}`,e.next=20,(0,I.enqueueNotification)((0,s.default)((0,s.default)({},d),{},{downloadOptions:(0,s.default)({},d.downloadOptions)}),!0);case 20:return V(d),e.abrupt("return");case 22:return __LOG__(2)`[History sync recent or full chunk received] adding chunk info to db: ${q(d)}`,e.next=25,(0,I.enqueueNotification)(d);case 25:_.default.continueProgressiveHistorySyncProcessing();case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return H.apply(this,arguments)}function H(){return(H=(0,u.default)(o.default.mark((function e(t){var a,i,v,M,j,W,V,H,z,X,Z,ee,te,ne,re,ae,ie,oe,se,ue,le,ce,de,fe,pe,he,_e,ve,me,ge,ye,Ee,Se,be,Te,we,Ae,Ce,Oe,Me,Ie;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2,void 0,void 0,void 0,["History sync"])`handleHistorySyncChunk started for ${q(t)}`,a=t.syncType===k.HistorySyncHistorySyncType.INITIAL_BOOTSTRAP?R.default.MD_BOOTSTRAP_PAYLOAD_TYPE.CRITICAL:R.default.MD_BOOTSTRAP_PAYLOAD_TYPE.NON_CRITICAL,i=new R.default.MdBootstrapHistoryDataDownloaded({mdBootstrapPayloadType:a,mdBootstrapPayloadSize:t.historySyncPayloadSize}),v=t.syncType!==k.HistorySyncHistorySyncType.PUSH_NAME&&!a,e.next=6,P.default.getMdSessionId();case 6:return i.mdSessionId=e.sent,e.next=9,P.default.getStorageEstimation();case 9:return(M=e.sent).mdStorageQuotaBytes!==P.STORAGE_QUOTA_UNAVAILABLE&&(i.mdStorageQuotaUsedBytes=M.mdStorageQuotaUsedBytes,i.mdStorageQuotaBytes=M.mdStorageQuotaBytes),j=null,e.prev=12,e.next=15,A.default.downloadAndDecrypt((0,s.default)({signal:(new h.default).signal},t.downloadOptions));case 15:j=e.sent,e.next=29;break;case 18:return e.prev=18,e.t0=e.catch(12),__LOG__(3)`history sync download failed`,W=x.default.fromString(t.msgKey),(V=new Map).set(W.remote,[W.id]),J(i,t.historySyncStepStartedTs,!1),(0,E.sendAggregateReceipts)(W.remote,E.RECEIPT_TYPE.SERVER_ERROR,Date.now().toString(),V,void 0,E.RECEIPT_MSG_TYPE.PEER),e.next=28,(0,I.markChunkForReuploadPending)(t.msgKey);case 28:return e.abrupt("return");case 29:if(!v){e.next=32;break}return e.next=32,new r((function(e){return setTimeout(e,1e3)}));case 32:return i.mdBootstrapStepResult=R.default.MD_BOOTSTRAP_STEP_RESULT.SUCCESS,H=new d.Binary(j),e.next=36,(0,f.inflate)(H.readByteArray());case 36:if(z=e.sent,!v){e.next=40;break}return e.next=40,new r((function(e){return setTimeout(e,1e3)}));case 40:if(X=(0,l.decodeProto)(k.HistorySyncSpec,z),__LOG__(2)`[History sync chunk downloaded], ${q(t)}`,!v){e.next=45;break}return e.next=45,new r((function(e){return setTimeout(e,1e3)}));case 45:return Z=new R.default.MdBootstrapDataApplied({mdBootstrapPayloadType:a,mdBootstrapSource:R.default.MD_BOOTSTRAP_SOURCE.HISTORY}),e.next=48,P.default.getMdSessionId();case 48:if(Z.mdSessionId=e.sent,ee=function(e){t.syncType===k.HistorySyncHistorySyncType.INITIAL_BOOTSTRAP?((0,U.setInitialHistorySyncComplete)(),(0,U.setHistorySyncStatus)({initialCompleted:!0}),y.default.onInitialChatHistorySynced()):t.syncType===k.HistorySyncHistorySyncType.RECENT&&100===e?(__LOG__(2,void 0,void 0,void 0,["History sync"])`Recent history sync coomplete`,(0,U.setHistorySyncStatus)({recentCompleted:!0}),y.default.onRecentChatHistorySynced()):t.syncType===k.HistorySyncHistorySyncType.FULL&&100===e&&(__LOG__(2,void 0,void 0,void 0,["History sync"])`Full history sync coomplete`,(0,N.setHistoryInitialSyncBoundry)({}),(0,U.setHistorySyncStatus)({fullCompleted:!0}),y.default.onFullChatHistorySynced())},!(t.syncType===k.HistorySyncHistorySyncType.INITIAL_STATUS_V3&&X.statusV3Messages&&X.statusV3Messages.length>0)){e.next=62;break}return i.mdBootstrapMessagesCount=X.statusV3Messages.length,J(i,t.historySyncStepStartedTs,!0),e.next=55,r.all(X.statusV3Messages.map(function(){var e=(0,u.default)(o.default.mark((function e(t){var n,a,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0@s.whatsapp.net"!==t.participant){e.next=2;break}return e.abrupt("return",r.resolve());case 2:return n={type:G.MESSAGE_TYPE.OTHER_STATUS,externalId:(0,F.default)(t.key.id,"msg.key.id"),ts:(0,p.castToUnixTime)(parseInt(t.messageTimestamp,10)),edit:-1,isHsm:!1,count:null,chat:(0,Y.createWid)(S.default.STATUS_WID),author:!0===t.key.fromMe?(0,O.getMeUser)():(0,Y.createWid)((0,F.default)(t.participant,"msg.participant")),pushname:null,isDirect:!1},e.next=5,(0,B.parseMessage)(n,"skmsg",(0,F.default)(t.message,"msg.message"),void 0);case 5:if(a=e.sent,(i=a.renderableMsgs&&a.renderableMsgs)&&1===i.length){e.next=9;break}return e.abrupt("return",r.resolve());case 9:return s=i[0],e.abrupt("return",(0,L.handleSingleMsgMD)(s.id.remote,s,!1));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 55:return e.next=57,(0,I.updateCurrentlyProcessed)(t.msgKey);case 57:Z.mdTimestamp=(0,p.unixTimeMs)(),Z.commit(),__LOG__(2)`[History sync storing Status V3 complete], ${q(t,X.statusV3Messages.length)}`,e.next=63;break;case 62:t.syncType!==k.HistorySyncHistorySyncType.PUSH_NAME&&(X.conversations=X.conversations.reduce((function(e,t){var n=null;try{n=(0,Y.createWid)(t.id)}catch(e){__LOG__(3,void 0,void 0,void 0,["History sync"])`history_sync_notification_handler: invalid wid`}return n?e.concat(t):e}),[]));case 63:if(t.syncType!==k.HistorySyncHistorySyncType.INITIAL_BOOTSTRAP){e.next=91;break}return te={},ne=(0,O.assertGetMe)(),re=(0,Y.toUserWid)(ne),ae=ne.getDeviceId(),ie={},oe={},se=[],ue=0,X.conversations.forEach((function(e){var n,r,a;ue+=e.messages.length;var i=[];e.messages.forEach((function(n,r){r===e.messages.length-1&&(te[e.id]=n.msgOrderId),i.push(Q(t,n.message))})),i=i.filter(Boolean).reverse(),e.pHash&&(oe[e.id]=e.pHash);var o,s=(0,Y.createWid)(e.id),u=(0,O.getGlobalSecurityNotifications)();if(!s.isStatusV3()&&u){var l=(0,b.genDeviceNotificationMsg)((0,Y.createWid)(e.id),re,[ae],[]);i.push(l)}if(null!=(null===(n=e.disappearingMode)||void 0===n?void 0:n.initiator))switch(e.disappearingMode.initiator){case C.DisappearingModeInitiator.CHANGED_IN_CHAT:o=w.DisappearingModeInitiator.ChangedInChat;break;case C.DisappearingModeInitiator.INITIATED_BY_ME:o=w.DisappearingModeInitiator.InitiatedByMe;break;case C.DisappearingModeInitiator.INITIATED_BY_OTHER:o=w.DisappearingModeInitiator.InitiatedByOther}var d={t:(0,c.maybeNumberOrThrowIfTooLarge)(null!==(r=e.conversationTimestamp)&&void 0!==r?r:e.lastMsgTimestamp),id:(0,Y.createWid)(e.id),unreadCount:e.unreadCount,ephemeralDuration:e.ephemeralExpiration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp,disappearingModeInitiator:o,endOfHistoryTransferType:null!==(a=e.endOfHistoryTransferType)&&void 0!==a?a:m.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE,name:e.name,notSpam:e.notSpam,pendingInitialLoading:!1};se.push(d),ie[e.id]={chatInfo:d,msgs:i}})),i.mdBootstrapMessagesCount=ue,i.mdBootstrapChatsCount=X.conversations.length,J(i,t.historySyncStepStartedTs,!0),_.default.markInitialHistorySyncCountDebugStats(ue,se.length),le=function(){return(0,g.default)([{cmd:"preempt",response:se,binarySize:10}])||r.resolve()},e.next=80,le();case 80:return e.next=82,(0,L.handleInitialSyncMsgs)(ie);case 82:return e.next=84,(0,I.updateCurrentlyProcessed)(t.msgKey);case 84:Z.mdTimestamp=(0,p.unixTimeMs)(),Z.commit(),__LOG__(2)`[History sync storing initial sync complete] ${q(t,ue,se.length)}`,(0,N.setHistoryInitialSyncBoundry)(te),(0,N.setInitialGroupPhash)(oe),e.next=156;break;case 91:if(t.syncType!==k.HistorySyncHistorySyncType.PUSH_NAME){e.next=105;break}return J(i,t.historySyncStepStartedTs,!0),ce=X.pushnames.map((function(e){return{id:e.id||"",pushname:e.pushname||""}})),e.next=96,(0,D.getContactTable)().bulkCreateOrMerge(ce);case 96:return e.next=98,(0,I.updateCurrentlyProcessed)(t.msgKey);case 98:de=X.pushnames.map((function(e){var t=(0,Y.createWid)(e.id||""),n=T.default.get(t);return{id:t,pushname:e.pushname||"",type:(null==n?void 0:n.type)||"out",name:null==n?void 0:n.name}})),T.default.add(de,{merge:!0}),Z.mdTimestamp=(0,p.unixTimeMs)(),Z.commit(),__LOG__(2)`[History sync storing initial pushname complete] with ${X.pushnames.length} records`,e.next=156;break;case 105:if(t.syncType===k.HistorySyncHistorySyncType.INITIAL_STATUS_V3){e.next=156;break}return e.next=108,new r((function(e){return setTimeout(e,0)}));case 108:fe=[],pe=new Set,he=(0,N.getHistoryInitialSyncBoundry)(),_e=0,ve=0,me=0;case 114:if(!(me<X.conversations.length)){e.next=141;break}ge=X.conversations[me],ye=he&&he[ge.id],Ee=0;case 118:if(!(Ee<ge.messages.length)){e.next=138;break}if(Se=n(26671).default,be=Se.get((0,Y.createWid)(ge.id)),Te=(null==be?void 0:be.endOfHistoryTransferType)===m.ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY,!(!be&&null!=ye||be&&null==be.endOfHistoryTransferType||Te)){e.next=125;break}return __LOG__(2,void 0,void 0,void 0,["History sync"])`One chat in sync payload ${q(t)} is already marked as complete locally`,e.abrupt("break",138);case 125:if(_e++,we=ge.messages[Ee],Ae=(0,c.maybeNumberOrThrowIfTooLarge)(we.msgOrderId),!(null!=ye&&null!=Ae&&Ae>=ye)){e.next=130;break}return e.abrupt("continue",135);case 130:return pe.add(ge.id),(Ce=Q(t,we.message))&&fe.push(Ce),e.next=135,(0,K.asyncSleepAfterGivenLoopIteration)(ve++,100);case 135:Ee++,e.next=118;break;case 138:me++,e.next=114;break;case 141:if(i.mdBootstrapMessagesCount=_e,i.mdBootstrapChatsCount=X.conversations.length,J(i,t.historySyncStepStartedTs,!0),0===fe.length){e.next=147;break}return e.next=147,(0,L.handleProgressiveHistorySyncMsgs)(fe,Array.from(pe));case 147:return(0,U.setLastHistorySycnedChunk)(t.syncType,t.chunkOrder),e.next=150,(0,I.updateCurrentlyProcessed)(t.msgKey);case 150:Oe=new Set,X.conversations.forEach((function(e){Oe.add(e.id);var t=e.endOfHistoryTransferType;if(null!=t)return $((0,Y.createWid)(e.id),t)})),y.default.onHistorySyncChunkProcessed(Oe),Z.mdTimestamp=(0,p.unixTimeMs)(),Z.commit(),__LOG__(2)`[History sync chunk storing recent or full chunk complete,  ${q(t,_e)}`;case 156:return Me=x.default.fromString(t.msgKey),(Ie=new Map).set(Me.remote,[Me.id]),(0,E.sendAggregateReceipts)(Me.remote,E.RECEIPT_TYPE.HISTORY_SYNC_COMPLETION,void 0,Ie),e.next=162,(0,I.updateCurrentlyProcessed)(t.msgKey);case 162:ee(X.progress);case 163:case"end":return e.stop()}}),e,null,[[12,18]])})))).apply(this,arguments)}function $(){return z.apply(this,arguments)}function z(){return(z=(0,u.default)(o.default.mark((function e(t,n){var r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,a=(0,M.getBridge)(),e.next=4,a.sendAndReceive("chat_collection","add",{things:[{id:t,endOfHistoryTransferType:r}],options:{merge:!0}});case 4:return e.next=6,(0,v.getTable)().merge(t.toString(),{endOfHistoryTransferType:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(e.msgKey||"").split("_")[2];return` type_${e.syncType}_order_${null!=e.chunkOrder?e.chunkOrder:"none"}_isReupload_${e.isReupload||0}}, id: ${r} ## msgCount: ${t}, chatCount: ${n}`}function J(e,t,n){e.mdTimestamp=(0,p.unixTimeMs)(),e.mdBootstrapStepDuration=(0,p.unixTimeMs)()-t,e.mdBootstrapStepResult=n?R.default.MD_BOOTSTRAP_STEP_RESULT.SUCCESS:R.default.MD_BOOTSTRAP_STEP_RESULT.FAILURE,e.commit()}function Q(e,t){var n=null;try{n=j.default.parseWebMessageInfo(t,"after")}catch(e){__LOG__(4,void 0,new Error)`[history sync] parseWebMessageInfo failed with error ${null==e?void 0:e.name} and stack ${null==e?void 0:e.stack}`}return n}},72655:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleE2eIdentityChange=function(e){var t=y.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);var n=t.success,a=n.wid,f=n.stanzaId,E=n.delay,S=n.offline,b=(0,s.wap)("ack",{to:(0,m.DEVICE_JID)(a),id:(0,s.CUSTOM_STRING)(f),class:"notification"});if(a.equals((0,g.getMeUser)()))return __LOG__(4,void 0,new Error,!0)`handleNewIdentity: ignore identity change for your own primary device`,SEND_LOGS("self-identity-change"),r.resolve(b);var T=!!S&&!u.default.isResumeFromRestartComplete();return(0,d.onMsgProcessingThread)(String(a),T,(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.clearDeviceRecordForIdentityChange)(a,T);case 2:return e.next=4,(0,p.default)().loadIdentityKey((0,v.createSignalAddress)(a).toString());case 4:if(!e.sent){e.next=11;break}return __LOG__(2)`handleE2eIdentityChange: ${a.toString()} has old identity, establishing new session`,e.next=9,_.Session.deleteRemoteInfo(a);case 9:(0,h.addSecurityCodeChangedNotifications)(a,T),T||(null!=E?(0,c.ensureE2ESessionsWithDelay)([a],E):(0,c.ensureE2ESessions)([a]));case 11:return e.abrupt("return",b);case 12:case"end":return e.stop()}}),e)}))))};var i=a(n(87757)),o=a(n(48926)),s=n(18712),u=a(n(66028)),l=n(71030),c=n(7991),d=n(8160),f=a(n(98112)),p=a(n(46797)),h=n(90038),_=n(61572),v=n(47065),m=n(19325),g=n(71701),y=new f.default("identityChange",(function(e){e.assertTag("notification"),e.assertAttr("type","encrypt"),e.child("identity");var t=parseInt(e.maybeAttrString("delay"),10);return{wid:e.attrUserWid("from"),stanzaId:e.attrString("id"),delay:isFinite(t)&&t>0?t:null,offline:e.hasAttr("offline")?e.attrString("offline"):null}}))},57293:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleDirtyBits=function(e){var t=e.supported,n=e.unsupported,a=e.protocols;__LOG__(2)`handleDirtyBits: handle dirty bits, supported: ${t.map((function(e){return e.type})).join(",")}, unsupported: ${n.map((function(e){return e.type})).join(",")}`;var i=[].concat((0,o.default)(n),(0,o.default)(t));return r.all(t.map((function(e){var t=e.type;return t===h.groups?(0,c.queryAndUpdateAllGroupMetadata)():t===h.account_sync?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length||(e=Object.keys(s.ACCOUNT_SYNC_TYPE).map((function(e){return s.ACCOUNT_SYNC_TYPE[e]})));return r.all(e.map((function(e){return"devices"===e?(0,s.getDevices)("notification"):"picture"===e?(0,s.getAndUpdateProfilePicture)():void("privacy"===e?(0,s.updatePrivacySettings)():"blocklist"===e&&(0,s.updateBlocklist)())})))}(a):t===h.syncd_app_state?(p.default.once(p.APP_STATE_SYNC_COMPLETED,(function(e){var t=e.some((function(e){return null!=e.patches&&e.patches.length>0||null!=e.snapshot}));new f.default.MdAppStateDirtyBits({dirtyBitsFalsePositive:!t}).commit()})),(0,d.markCollectionsForSync)((0,o.default)(l.CollectionName.members()))):void 0}))).then((function(){return(0,u.clearDirtyBits)(i)}))},t.SUPPORTED_DIRTY_PROTOCOLS=t.SUPPORTED_DIRTY_TYPE=void 0;var o=i(n(319)),s=n(10619),u=n(46961),l=n(27291),c=n(38271),d=n(50773),f=i(n(8643)),p=a(n(34541)),h={groups:"groups",account_sync:"account_sync",syncd_app_state:"syncd_app_state"};t.SUPPORTED_DIRTY_TYPE=h;t.SUPPORTED_DIRTY_PROTOCOLS={devices:"devices",picture:"picture",privacy:"privacy",blocklist:"blocklist"}},17221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleRoutingInfo=function(e){var t=e.domain;if(!t){var n=(0,a.getRoutingInfo)();t=n?n.domain:i.fb}var o=(0,r.bytesToBuffer)(e.edgeRouting);(0,a.setRoutingInfo)({domain:t,edgeRouting:o}),__LOG__(2)`handleInfoBulletin setting and domain: ${t} and edgeRouting:`},t.DOMAINS=void 0;var r=n(98426),a=n(79583),i={fb:"fb",sl:"sl"};t.DOMAINS=i},75812:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return _.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(34541)),u=n(57293),l=n(17221),c=a(n(66028)),d=n(6230),f=a(n(98112)),p=n(64906),h=new f.default("infoBulletinParser",(function(e){if(e.assertTag("ib"),e.assertFromServer(),e.hasChild(d.INFO_TYPE.DIRTY)){var t=[],n=[],r=[];return e.forEachChildWithTag(d.INFO_TYPE.DIRTY,(function(e){var a={type:e.attrString("type"),timestamp:e.attrInt("timestamp")};"account_sync"===a.type?(e.mapChildren((function(e){return e.tag()})).forEach((function(e){u.SUPPORTED_DIRTY_PROTOCOLS.hasOwnProperty(e)&&r.push(e)})),n.push(a)):u.SUPPORTED_DIRTY_TYPE.hasOwnProperty(a.type)?n.push(a):t.push(a)})),{type:d.INFO_TYPE.DIRTY,supported:n,unsupported:t,protocols:r}}if(e.hasChild(d.INFO_TYPE.ROUTING)){var a=e.child(d.INFO_TYPE.ROUTING);return{type:d.INFO_TYPE.ROUTING,edgeRouting:a.child("routing_info").contentBytes(),domain:a.hasChild("dns_domain")?a.child("dns_domain").contentEnum(l.DOMAINS):null}}return e.hasChild(d.INFO_TYPE.DOWNGRADE)?{type:d.INFO_TYPE.DOWNGRADE}:e.hasChild(d.INFO_TYPE.OFFLINE)?{count:e.child(d.INFO_TYPE.OFFLINE).attrInt("count"),type:d.INFO_TYPE.OFFLINE}:e.hasChild(d.INFO_TYPE.OFFLINE_PREVIEW)?{count:{message:e.child(d.INFO_TYPE.OFFLINE_PREVIEW).attrInt("message"),receipt:e.child(d.INFO_TYPE.OFFLINE_PREVIEW).attrInt("receipt")},type:d.INFO_TYPE.OFFLINE_PREVIEW}:null}));function _(){return(_=(0,o.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=h.parse(t)).error){e.next=5;break}return __LOG__(2)`error while parsing: ${t.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,e.abrupt("return",r.reject(n.error));case 5:if(a=n.success){e.next=10;break}__LOG__(3)`handleInfoBulletin unrecognized info bulletin`,e.next=34;break;case 10:if(a.type!==d.INFO_TYPE.DIRTY){e.next=14;break}return e.abrupt("return",(0,u.handleDirtyBits)(a).then((function(){return"NO_ACK"})));case 14:if(a.type!==d.INFO_TYPE.ROUTING){e.next=19;break}return(0,l.handleRoutingInfo)(a),e.abrupt("return",r.resolve("NO_ACK"));case 19:if(a.type!==d.INFO_TYPE.DOWNGRADE){e.next=24;break}return s.default.downgradeWebclient(),e.abrupt("return",r.resolve("NO_ACK"));case 24:if(a.type!==d.INFO_TYPE.OFFLINE){e.next=30;break}return c.default.setOfflineSessionComplete(a.count),(0,p.reportOfflineNotifications)(),e.abrupt("return",r.resolve("NO_ACK"));case 30:if(a.type!==d.INFO_TYPE.OFFLINE_PREVIEW){e.next=34;break}return e.next=33,c.default.setOfflineMessagePreviewCounter(a.count);case 33:return e.abrupt("return",r.resolve("NO_ACK"));case 34:return e.abrupt("return",r.resolve());case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INFO_TYPE=void 0;var n=Object.freeze({DIRTY:"dirty",DOWNGRADE:"downgrade_webclient",ROUTING:"edge_routing",OFFLINE:"offline",OFFLINE_PREVIEW:"offline_preview"});t.INFO_TYPE=n},77388:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return v.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(18712),s=n(92827),u=r(n(91080)),l=n(71701),c=n(87128),d=n(26594),f=r(n(98112)),p=r(n(58688)),h=n(19325),_=new f.default("mediaRetryNotification",(function(e){e.assertTag("notification");var t=e.maybeChild("error");if(t)return{msgId:e.attrString("id"),ciphertext:null,iv:null,errorCode:d.MediaRetryNotificationResultType.cast(t.attrInt("code"))};var n=e.child("encrypt");return{msgId:e.attrString("id"),ciphertext:n.child("enc_p").contentBytes(),iv:n.child("enc_iv").contentBytes(c.ENC_IV_SIZE),errorCode:null}}));function v(){return(v=(0,i.default)(a.default.mark((function e(t){var n,r,i,d,f,v,m,g,y,E,S,b,T;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=_.parse(t)).error){e.next=5;break}throw __LOG__(2)`error while parsing: ${t.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,n.error;case 5:if(r=n.success,i=r.msgId,d=r.errorCode,f=(0,o.wap)("ack",{id:(0,o.CUSTOM_STRING)(i),class:"notification",type:"mediaretry",to:(0,h.USER_JID)((0,l.getMeUser)())}),null==d){e.next=10;break}return p.default.resolveMediaReupload({msgId:i,result:d}),e.abrupt("return",f);case 10:if(v=n.success,m=v.ciphertext,g=v.iv,y=p.default.getMediaKey(i)){e.next=15;break}return __LOG__(3)`handleMediaRetryNotification: mediaKey is not found for msgId ${i}`,e.abrupt("return",f);case 15:return e.next=17,(0,c.decryptMediaRetryNotification)((0,s.decodeB64)(y),i,(0,u.default)(g,"iv"),(0,u.default)(m,"ciphertext"));case 17:if(E=e.sent,S=E.stanzaId,b=E.directPath,T=E.result,S===i){e.next=23;break}throw new Error("handleMediaRetryNotification: msg id does not match");case 23:return p.default.resolveMediaReupload({msgId:i,result:T,directPath:b}),e.abrupt("return",f);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},28617:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.castToActualActorsEnum=function(e){var t=parseInt(e,10);return isNaN(t)?null:u.ActualActorsEnumType.cast(t)},t.castToHostStorageEnum=function(e){var t=parseInt(e,10);return isNaN(t)?null:u.HostStorageEnumType.cast(t)},t.PAY_NODE_TYPES=t.HsmMismatchError=t.CATEGORY_PEER=t.VERIFIED_LEVEL=t.MSG_TYPES=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(1838),u=n(87442);t.MSG_TYPES={text:"text",media:"media",pay:"pay"};t.VERIFIED_LEVEL={high:"high",low:"low",unknown:"unknown"};t.CATEGORY_PEER="peer";var l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("HSMMismatchError"));t.HsmMismatchError=l;t.PAY_NODE_TYPES={send:"send",request:"request",futureproof:"futureproof","request-decline":"request-decline","request-cancel":"request-cancel",invite:"invite"}},24677:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptE2EPayload=function(){return A.apply(this,arguments)};var o=i(n(87757)),s=i(n(48926)),u=n(68691),l=n(256),c=n(28617),d=n(18079),f=n(84393),p=n(69449),h=n(43468),_=i(n(8643)),v=n(73496),m=a(n(61572)),g=n(77565),y=n(87442),E=i(n(34263)),S=n(49219),b=i(n(46797)),T=i(n(99908));function w(e,t,n){var a=e.e2eType,i=e.ciphertext;switch(a){case g.CiphertextType.Skmsg:return t.isGroup()||t.isBroadcast()?n?m.Cipher.decryptGroupSignalProto(t,n,i):r.reject(new Error(`['messaging'] decryptEnc: receive msg from ${t.toString()} without participant`)):r.reject(new Error(`['messaging'] decryptEnc: Can not do skmsg for non group ${t.toString()}`));case g.CiphertextType.Pkmsg:case g.CiphertextType.Msg:var o=t.isUser()?t:n;return o?m.Cipher.decryptSignalProto(o,a,i):r.reject(new Error(`['messaging'] decryptEnc: receive msg from ${t.toString()} without participant`))}}function A(){return(A=(0,s.default)(o.default.mark((function e(t){var n,a,i,m,g,A;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.bizInfo,a=t.msgInfo,i=t.paymentInfo,m=t.deviceIdentity,g=t.encs,null==a.author.device||0===a.author.device){e.next=8;break}return e.next=4,(0,u.validateADVwithEncs)(a.author,m,g,!!a.offline);case 4:if(e.sent){e.next=8;break}return __LOG__(3,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, validateADVIdentity failed`,e.abrupt("return",{result:y.E2EProcessResult.RETRY,retryCount:g[0].retryCount});case 8:return A=function(e,t){if(e.result!==y.E2EProcessResult.SUCCESS)return r.resolve(e);var u=(0,h.getFrom)(a),m=new _.default.E2eMessageRecv({e2eCiphertextType:(0,l.metricsCiphertextType)(t.e2eType),e2eCiphertextVersion:l.CIPHERTEXT_VERSION,e2eDestination:(0,l.metricsDestinationType)(u),e2eSuccessful:!1,messageMediaType:t.mediaType?(0,l.metricsMediaType)(t.mediaType):_.default.MEDIA_TYPE.NONE,retryCount:t.retryCount});return w(t,u,a.author).then(function(){var e=(0,s.default)(o.default.mark((function e(r){var s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.e2eSuccessful=!0,m.weight=1e3,m.commit(),s={retryCount:t.retryCount,e2eType:t.e2eType,mediaType:t.mediaType},__LOG__(2,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${a.externalId} done`,e.next=7,(0,v.processDecryptedProto)(r,a,i,s,n);case 7:return __LOG__(2,void 0,void 0,void 0,["messaging"])`processDecryptedProto: msgId::${a.externalId} done`,e.next=10,(0,b.default)().flushBufferToDiskIfNotMemOnlyMode();case 10:return e.abrupt("return",{result:y.E2EProcessResult.SUCCESS});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).catchTypes(f.SignalDecryptionError,d.UnknownMessageError,(function(e){return __LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, ${e.toString()}`,SEND_LOGS("handleMsg: decryption error"),m.weight=1,m.commit(),(0,v.processPlaceholderMsg)(a,y.PlaceholderType.E2E).then((function(){return{result:y.E2EProcessResult.RETRY,retryCount:t.retryCount}}))})).catchType(f.SignalMessageCounterError,function(){var e=(0,s.default)(o.default.mark((function e(n){var r,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(__LOG__(3,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, signal counter error: ${n}`,null==a.offline){e.next=16;break}return r=(0,h.messageInfoToKey)(a),e.next=5,(0,p.getMsgByMsgKey)(r);case 5:if(null!=(i=e.sent)){e.next=10;break}return __LOG__(4,void 0,new Error,!0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, creating placeholder (upload logs for debugging)`,SEND_LOGS("handleMsg: decryption counter error creating placeholder"),e.next=10,(0,v.processPlaceholderMsg)(a,y.PlaceholderType.E2E);case 10:if(null!=i&&i.type!==E.default.MSG_TYPE.CIPHERTEXT){e.next=15;break}return __LOG__(2,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, missing message for repeated signal counter`,e.abrupt("return",{result:y.E2EProcessResult.RETRY,retryCount:t.retryCount});case 15:T.default.addOfflineMessage([{receiptInfo:{externalId:r.id,from:(0,h.getFrom)(a),author:a.author}}]);case 16:return __LOG__(2,void 0,void 0,void 0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, ignore repeated signal counter`,e.abrupt("return",{result:y.E2EProcessResult.SUCCESS});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).catchType(c.HsmMismatchError,(function(e){return __LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, error: ${e.toString()}`,SEND_LOGS("handleMsg: hsm mismatch error"),m.weight=1,m.commit(),{result:y.E2EProcessResult.HSM_MISMATCH}})).catch((function(e){return __LOG__(3,void 0,void 0,!0,["messaging"])`decryptE2EPayload: msgId::${a.externalId}, error: ${e.toString}`,SEND_LOGS("handleMsg: parse decrypted message error"),m.weight=1,m.commit(),{result:y.E2EProcessResult.PARSE_ERROR}}))},e.abrupt("return",(0,S.promiseReduce)(t.encs,A,{result:y.E2EProcessResult.SUCCESS}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},18079:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownMessageError=t.DeviceSentMessageError=void 0;var a=r(n(34575)),i=r(n(78585)),o=r(n(2205)),s=r(n(99842)),u=n(1838),l=r(n(8643)),c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var o;return(0,a.default)(this,n),o=r===l.default.DSM_ERROR.MISSING_DSM?t.call(this,"parseMessage: message should be deviceSentMessage"):r===l.default.DSM_ERROR.INVALID_SENDER?t.call(this,"parseMessage: message should not be deviceSentMessage"):r===l.default.DSM_ERROR.INVALID_DSM?t.call(this,"parseMessage: invalid deviceSentMessage"):t.call(this,"parseMessage: unknown deviceSentMessage error"),new l.default.MdBadDeviceSentMessage({peerType:e,dsmError:r}).commit(),o.peerType=e,o.dsmError=r,(0,i.default)(o)}return n}((0,u.customError)("DeviceSentMessageError"));t.DeviceSentMessageError=c;var d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,u.customError)("UnknownMessageError"));t.UnknownMessageError=d},33765:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=c.default.parse(e);if(t.error)return r.reject(new Error(`${t.error.toString()} parsing ${e.toString()}`));var n=t.success,a=n.msgMeta,h=n.msgInfo;return null!=h.offline&&u.default.offlineStanzaReceivedAfterCompelete(),u.default.isResumeFromRestartComplete()&&delete n.msgInfo.offline,(0,l.onMsgProcessingThread)(h.chat.toString(),!!n.msgInfo.offline,(0,o.default)(i.default.mark((function e(){var t,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isUnavailable){e.next=5;break}return __LOG__(2,void 0,void 0,void 0,["messaging"])`onMsgProcessingThread: msgId::${h.externalId}, get fanout placeholder`,e.next=4,(0,d.processPlaceholderMsg)(h,f.PlaceholderType.FANOUT);case 4:return e.abrupt("return",(0,p.sendReceipt)(h,a,{result:f.E2EProcessResult.BACKFILL}));case 5:if(null==h.offline){e.next=13;break}return e.next=8,u.default.decryptOfflineMessage(n);case 8:if((t=e.sent).result===f.E2EProcessResult.SUCCESS){e.next=11;break}return e.abrupt("return",(0,p.sendReceipt)(h,a,t));case 11:e.next=18;break;case 13:return __LOG__(2,void 0,void 0,void 0,["messaging"])`onMsgProcessingThread: msgId::${h.externalId}, start processing inline message`,e.next=16,(0,s.decryptE2EPayload)(n);case 16:return r=e.sent,e.abrupt("return",(0,p.sendReceipt)(h,a,r));case 18:case"end":return e.stop()}}),e)}))))};var i=a(n(87757)),o=a(n(48926)),s=n(24677),u=a(n(66028)),l=n(8160),c=a(n(15462)),d=n(73496),f=n(87442),p=n(43468)},15462:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=n(82929),o=n(28617),s=n(71701),u=r(n(98112)),l=n(87790),c=n(49509),d=n(77565),f=n(87442),p=n(43468),h=n(76007),_=n(75793);function v(e,t,n){if(e&&null!=t&&null!=n){var r=(0,s.getMeUser)();if(!r.equals(t)&&!r.equals(n))return!1}return!0}var m=new u.default("incomingMsgParser",(function(e){e.assertTag("message"),e.hasAttr("to")&&e.assertAttrIsMe("to");var t=e.mapChildrenWithTag("enc",(function(e){return{e2eType:e.attrFlowEnum("type",(function(e){return d.CiphertextType.cast(e)})),mediaType:e.attrFlowEnumOrDefault("mediatype",(function(e){return d.MediaType.cast(e)}),null),ciphertext:e.contentBytes(),retryCount:e.hasAttr("count")?e.attrInt("count"):0}})),n=e.maybeChild("device-identity"),r=n?n.contentBytes():null,s=function(e,t){var n,r={externalId:e.attrString("id"),ts:e.attrTime("t"),edit:e.hasAttr("edit")?e.attrInt("edit"):-1,isHsm:e.hasChild("hsm"),count:e.hasAttr("count")?e.attrInt("count"):null,pushname:e.hasAttr("notify")?e.attrString("notify"):null,category:e.hasAttr("category")?e.attrString("category"):null,offline:e.hasAttr("offline")?e.attrString("offline"):null},i=e.attrWid("from"),o=e.hasAttr("participant")?e.attrDeviceWid("participant"):null,s=e.hasAttr("recipient")?e.attrUserWid("recipient"):null,u=t.every((function(e){return e.e2eType!==d.CiphertextType.Skmsg})),l=t.some((function(e){return e.retryCount>0})),c={},h=e.maybeChild("participants");if(h){var v=[];h.forEachChildWithTag("to",(function(e){var t=e.attrUserWid("jid"),n=e.maybeAttrString("eph_setting");v.push(t),null!=n&&(c[t.toString()]=n)})),n=v}if(i.isUser())return null!=s?(0,p.isPeer)(i)?(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.CHAT},r),{},{chat:(0,_.toUserWid)(s),author:i}):e.throw("recipient on non peer chat message"):(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.CHAT},r),{},{chat:(0,_.toUserWid)(i),author:i});if(i.isGroup())return null==o?e.throw("group message with no participant"):(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.GROUP},r),{},{chat:i,author:o,isDirect:u});if(i.isBroadcast()&&!i.isStatusV3()){if(null==o)return e.throw("broadcast message with no participant");if((0,p.isPeer)(o)){if(null==n){if(!l)return e.throw("peer broadcast message with no participants node");n=[]}return(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.PEER_BROADCAST},r),{},{chat:i,author:o,isDirect:u,bclParticipants:n,bclHashValidated:!1,bclEphSettings:c})}return(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.OTHER_BROADCAST},r),{},{chat:i,author:o,isDirect:u,ephSetting:e.maybeAttrString("eph_setting")})}return i.isBroadcast()&&i.isStatusV3()?null==o?e.throw("status message with no participant"):(0,p.isPeer)(o)&&u?null==n?(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.DIRECT_PEER_STATUS},r),{},{chat:i,author:o,isDirect:u}):(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.DIRECT_PEER_STATUS},r),{},{chat:i,author:o,bclParticipants:n,bclHashValidated:!1}):(0,a.default)((0,a.default)({type:f.MESSAGE_TYPE.OTHER_STATUS},r),{},{chat:i,author:o,isDirect:u}):e.throw("Unrecognized message type")}(e,t);return{encs:t,msgInfo:s,msgMeta:function(e,t){var n=e.hasChild("unavailable");n||0!==t.length||e.throw("incomingMsgParser: to have enc node children");return{isUnavailable:n,type:e.attrEnum("type",o.MSG_TYPES),rawTs:e.attrString("t"),urlNumber:e.hasChild("url_number"),urlText:e.hasChild("url_text")}}(e,t),bizInfo:function(e){var t=e.hasChild("verified_name")?e.child("verified_name").contentBytes():null,n=e.attrEnumOrDefault("verified_level",o.VERIFIED_LEVEL,null),r=e.hasAttr("verified_name")?e.attrInt("verified_name"):-1,a=e.maybeChild("biz"),i=null;if(null!=a){var s=a.attrFlowEnumOrDefault("actual_actors",o.castToActualActorsEnum,null),u=a.attrFlowEnumOrDefault("host_storage",o.castToHostStorageEnum,null),l=a.maybeAttrInt("privacy_mode_ts");null!=s&&null!=u&&null!=l&&(i={actualActors:s,hostStorage:u,privacyModeTs:l})}return{verifiedNameCert:t,verifiedLevel:n,verifiedNameSerial:r,privacyMode:i}}(e),paymentInfo:function(e){var t=null,n=e.hasChild("pay")?e.child("pay"):null,r=e.hasChild("transaction")?e.child("transaction"):null,a=e.attrWid("from").isGroup(),s=e.hasAttr("participant")?e.attrWid("participant"):null;if((0,l.isNoviTransaction)(n)||(0,l.isNoviTransaction)(r))t={futureproofed:!0};else if(r){var u=(0,l.parseTransactionNode)(r);u&&(t=v(a,s,(0,_.createWid)(u.receiver.toString()))?{receiverJid:u.receiver.toString(),currency:u.currency,amount1000:u.amount1000,transactionTimestamp:u.ts,txnStatus:(0,c.getPaymentTxnWebStatus)(u.status)}:{receiverJid:u.receiver.toString(),currency:u.currency,amount1000:u.amount1000,transactionTimestamp:u.ts})}else if(n){switch(n.attrEnum("type",o.PAY_NODE_TYPES)){case o.PAY_NODE_TYPES.send:var d=(0,i.getAmount1000AndCurrency)(n),f=d.amount1000,p=d.currency,m=n.hasAttr("receiver")?n.attrString("receiver"):e.attrString("recipient");t=v(a,s,(0,_.createWid)(m))?{receiverJid:m,currency:p,amount1000:f,transactionTimestamp:e.attrInt("t"),txnStatus:h.PaymentInfoTxnStatus.INIT}:{receiverJid:m,currency:p,amount1000:f,transactionTimestamp:e.attrInt("t")};break;case o.PAY_NODE_TYPES.request:break;case o.PAY_NODE_TYPES.invite:t={futureproofed:!0}}}return t}(e),deviceIdentity:r}}));t.default=m},73496:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.processDecryptedProto=function(){return G.apply(this,arguments)},t.processPlaceholderMsg=function(){return K.apply(this,arguments)};var o=i(n(87757)),s=i(n(48926)),u=n(23757),l=n(71701),c=i(n(63056)),d=i(n(12717)),f=i(n(34263)),p=n(53939),h=n(79594),_=n(28617),v=n(676),m=n(18079),g=i(n(70238)),y=n(69449),E=i(n(8643)),S=n(39888),b=n(46711),T=a(n(61572)),w=n(91356),A=n(47065),C=i(n(99908)),O=n(93293),M=n(43468),I=n(16735),k=n(87442),P=n(70239),R=n(73066),D=i(n(15657)),N=i(n(16551)),L=i(n(3376)),x=i(n(8132)),U=n(24963),F=n(75793);function G(){return(G=(0,s.default)(o.default.mark((function e(t,n,a,i,s){var u,c,d,f,h,S,w,C,O;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,A.unpad)(t),c=(0,p.decodeProto)(v.MessageSpec,u),null==n.offline&&__LOG__(2,void 0,void 0,void 0,["messaging"])`processDecryptedProto: msgId::${n.externalId}, message decrypted: `,n.isHsm||!c.highlyStructuredMessage){e.next=5;break}throw new _.HsmMismatchError;case 5:return d=(0,M.getFrom)(n),e.next=8,(0,I.isFromKnownDevice)(n.author);case 8:if(e.sent){e.next=12;break}throw f=(0,F.toUserWid)(n.author),null==n.offline?(0,U.syncDeviceList)([f]):x.default.addOfflinePendingDevice(String(f),null),new m.UnknownMessageError(`[messaging] msgId::${n.externalId}, processDecryptedProto: reject message from unknown device`);case 12:if(!(n.type===k.MESSAGE_TYPE.PEER_BROADCAST&&i.retryCount>0)){e.next=17;break}return e.next=15,(0,y.getMsgByMsgKey)((0,M.messageInfoToKey)(n));case 15:null!=(null==(h=e.sent)?void 0:h.broadcastParticipants)&&(n.bclParticipants=h.broadcastParticipants,null!=h.broadcastEphSettings&&(n.bclEphSettings=h.broadcastEphSettings));case 17:return e.next=19,(0,M.parseMessage)(n,i.e2eType,c,a);case 19:if(S=e.sent,w=[],!S.history){e.next=25;break}(0,g.default)(S.history,d,n.externalId),e.next=62;break;case 25:if(!S.securityNotificationEnabled){e.next=29;break}(0,l.setGlobalSecurityNotifications)(S.securityNotificationEnabled.isEnabled),e.next=62;break;case 29:if(!S.appStateSyncKeyShare){e.next=33;break}(0,P.handleAppStateSyncKeyShare)(S.appStateSyncKeyShare,d),e.next=62;break;case 33:if(!S.appStateSyncKeyRequest){e.next=37;break}(0,R.handleAppStateSyncKeyRequest)(S.appStateSyncKeyRequest,d),e.next=62;break;case 37:if(C=!1,null!=S.deviceSent){e.next=42;break}C=!0,e.next=52;break;case 42:if(!S.deviceSent.phash){e.next=48;break}return e.next=45,(0,I.validateBclHash)(S.deviceSent.phash,S.deviceSent.info);case 45:C=e.sent,e.next=52;break;case 48:if(!S.deviceSent.destination){e.next=52;break}return e.next=51,(0,I.validateMsgDestination)(S.deviceSent.destination,n);case 51:C=e.sent;case 52:if(C){e.next=54;break}throw new m.DeviceSentMessageError((0,M.getDeviceType)(n.author),E.default.DSM_ERROR.INVALID_DSM);case 54:return O=i.retryCount>0,w.push(j(S.renderableMsgs,n,a,s,O)),null!=S.storeMsg&&(0,y.storeMessages)([S.storeMsg],S.storeMsg.id.remote),null!=S.senderKey&&w.push(T.Session.createGroupSignalSession(n.author,S.senderKey.groupId,S.senderKey.key)),n.pushname&&(0,b.updatePushname)(n.author,n.pushname),e.next=61,r.all(w);case 61:B(S.renderableMsgs);case 62:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){e.forEach((function(e){var t=new N.default(e);new E.default.MessageReceive({messageType:t.getWamMessageType(),messageMediaType:t.getWamMediaType(),messageIsInternational:t.isInternational}).commit()}))}function j(){return Y.apply(this,arguments)}function Y(){return(Y=(0,s.default)(o.default.mark((function e(t,a,i,p,_){var v,m,g;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v=(0,L.default)(t,a,p),!a.offline){e.next=5;break}return C.default.addOfflineMessage(v.map((function(e){return{msg:e,receiptInfo:{from:(0,M.getFrom)(a),author:a.author}}}))),e.abrupt("return");case 5:return e.next=7,r.all(v.map(function(){var e=(0,s.default)(o.default.mark((function e(t){var i,s,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id.remote,s=n(26671).default,l=null==s.get(i),e.next=5,r.all([(0,w.updateBizPrivacyMode)(i,p.privacyMode).catch((function(e){__LOG__(4,void 0,new Error,!0)`handle_msg:updateBizPrivacyMode error message: ${e.message}, stack: ${e.stack}`,SEND_LOGS("handle_msg:updateBizPrivacyMode failed")})),(l?(0,u.createChatAndSystemMsgsWithIncommingMsgs)(i,v):r.resolve()).then((function(){return(0,S.handleSingleMsgMD)(i,t,_)}))]);case 5:l&&(0,w.queryAndUpdateContactPropertiesOnNewChat)(i),(0,h.processOrphanAck)(t.id).catch((function(e){__LOG__(3,void 0,void 0,!0,["messaging"])`processOrphanAck: msgId::${a.externalId}, failed with error: ${e}`,SEND_LOGS("processOrphanAck failed")})),t.type===f.default.MSG_TYPE.PAYMENT&&"send"===t.subtype&&(0,O.processOrphanPaymentNotifications)([t]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 7:m=p.privacyMode,c.default.bspSystemMessageEnabled&&a.type===k.MESSAGE_TYPE.CHAT&&!d.default.equals((0,l.getMaybeMeUser)(),a.author)&&null!=m&&(g=n(66312).default,r.all(v.map((function(e){var t=g.get(e.id);if(t)return(0,D.default)(t,m)})))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),__LOG__(4,void 0,new Error,!0,["messaging"])`processRenderableMsg: msgId::${a.externalId}, failed with error: ${e.t0}`,SEND_LOGS("handle_msg: error storing/processing single message");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function K(){return(K=(0,s.default)(o.default.mark((function e(t,n){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.category!==_.CATEGORY_PEER){e.next=3;break}return __LOG__(2,void 0,void 0,void 0,["messaging"])`processPlaceholderMsg: msgId::${t.externalId}, skip placeholder for peer message ${t.externalId}`,e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,M.genPlaceholderMsg)(t,n);case 6:if(a=e.sent,!t.offline){e.next=11;break}C.default.addOfflineMessage(a.map((function(e){return{msg:e}}))),e.next=13;break;case 11:return e.next=13,r.all(a.map(function(){var e=(0,s.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id.remote,e.next=3,(0,S.handleSingleMsgMD)(n,t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),__LOG__(4,void 0,new Error,!0,["messaging"])`processPlaceholderMsg: msgId::${t.externalId}, failed with error: ${e.t0}`,SEND_LOGS("handle_msg: error storing/processing single message");case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}},87442:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE_TYPE=t.PlaceholderType=t.E2EProcessResult=t.HostStorageEnumType=t.ActualActorsEnumType=void 0;var r=n(54302)({Self:1,Bsp:2});t.ActualActorsEnumType=r;var a=n(54302)({OnPremise:1,Facebook:2});t.HostStorageEnumType=a;var i=n(54302).Mirrored(["SUCCESS","RETRY","HSM_MISMATCH","BACKFILL","PARSE_ERROR"]);t.E2EProcessResult=i;var o=n(54302).Mirrored(["E2E","FANOUT"]);t.PlaceholderType=o;var s=Object.freeze({CHAT:"chat",GROUP:"group",PEER_BROADCAST:"peer_broadcast",OTHER_BROADCAST:"other_broadcast",DIRECT_PEER_STATUS:"direct_peer_status",OTHER_STATUS:"other_status"});t.MESSAGE_TYPE=s},43468:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseMessage=function(){return C.apply(this,arguments)},t.genPlaceholderMsg=function(){return x.apply(this,arguments)},t.generateBaseMsg=U,t.sendReceipt=function(e,t,n){var a=e.externalId,i=t.rawTs,o=Y(e),s=e.type===T.MESSAGE_TYPE.CHAT&&G(e.author)?e.chat:null,d=e.type===T.MESSAGE_TYPE.CHAT?null:e.author,f=e.category===l.CATEGORY_PEER;switch(n.result){case T.E2EProcessResult.SUCCESS:return(0,E.sendDeliveryReceiptsAfterDecryption)(a,o,s,d,f);case T.E2EProcessResult.HSM_MISMATCH:return r.resolve();case T.E2EProcessResult.RETRY:var p=null==n.retryCount?1:n.retryCount+1;return(0,S.sendRetryReceipt)(p,o,d,s,a,i,f);default:return r.resolve((0,c.castStanza)((0,u.wap)("ack",{id:(0,u.CUSTOM_STRING)(a),class:"message",from:(0,w.DEVICE_JID)((0,h.assertGetMe)()),to:o?(0,w.JID)(o):u.DROP_ATTR,type:t.type,participant:d?(0,w.USER_JID)(d):u.DROP_ATTR})))}},t.isPeer=G,t.messageInfoToKey=B,t.getDeviceType=j,t.getFrom=Y;var i=a(n(87757)),o=a(n(81109)),s=a(n(48926)),u=n(18712),l=n(28617),c=n(4746),d=a(n(34263)),f=n(52306),p=n(18079),h=n(71701),_=n(69449),v=a(n(8643)),m=n(10229),g=a(n(5315)),y=a(n(78236)),E=n(59993),S=n(33441),b=n(77565),T=n(87442),w=n(19325),A=n(75793);function C(){return(C=(0,s.default)(i.default.mark((function e(t,n,r,a){var o,s,u,l,c,d,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(null===(o=r.protocolMessage)||void 0===o?void 0:o.historySyncNotification)){e.next=5;break}d=y.default.parseMsgProto(r,U(t),"relay",a),c={history:d.historySyncMetaData},e.next=71;break;case 5:if(null==(null===(s=r.protocolMessage)||void 0===s?void 0:s.initialSecurityNotificationSettingSync)){e.next=9;break}c={securityNotificationEnabled:{isEnabled:null===(f=r.protocolMessage.initialSecurityNotificationSettingSync.securityNotificationEnabled)||void 0===f||f}},e.next=71;break;case 9:if(null==(null===(u=r.protocolMessage)||void 0===u?void 0:u.appStateSyncKeyShare)){e.next=13;break}c={appStateSyncKeyShare:r.protocolMessage.appStateSyncKeyShare},e.next=71;break;case 13:if(null==(null===(l=r.protocolMessage)||void 0===l?void 0:l.appStateSyncKeyRequest)){e.next=17;break}c={appStateSyncKeyRequest:r.protocolMessage.appStateSyncKeyRequest},e.next=71;break;case 17:e.t0=t.type,e.next=e.t0===T.MESSAGE_TYPE.CHAT?20:e.t0===T.MESSAGE_TYPE.GROUP?30:e.t0===T.MESSAGE_TYPE.PEER_BROADCAST?40:e.t0===T.MESSAGE_TYPE.OTHER_BROADCAST?52:e.t0===T.MESSAGE_TYPE.DIRECT_PEER_STATUS?56:e.t0===T.MESSAGE_TYPE.OTHER_STATUS?66:70;break;case 20:if(!G(t.author)){e.next=26;break}return e.next=23,O(t,r,a);case 23:c=e.sent,e.next=29;break;case 26:return e.next=28,P(t,r,a);case 28:c=e.sent;case 29:return e.abrupt("break",71);case 30:if(!G(t.author)||!t.isDirect){e.next=36;break}return e.next=33,O(t,r,a);case 33:c=e.sent,e.next=39;break;case 36:return e.next=38,P(t,r,a);case 38:c=e.sent;case 39:return e.abrupt("break",71);case 40:if(n!==b.CiphertextType.Skmsg){e.next=48;break}if(t.bclHashValidated){e.next=43;break}throw new Error("parseMessage: participants for peer broadcast message is not validated");case 43:return e.next=45,P(t,r,a);case 45:c=e.sent,e.next=51;break;case 48:return e.next=50,I(t,r,a);case 50:c=e.sent;case 51:return e.abrupt("break",71);case 52:return e.next=54,P(t,r,a);case 54:return c=e.sent,e.abrupt("break",71);case 56:if(!t.isDirect){e.next=62;break}return e.next=59,O(t,r,a);case 59:c=e.sent,e.next=65;break;case 62:return e.next=64,I(t,r,a);case 64:c=e.sent;case 65:return e.abrupt("break",71);case 66:return e.next=68,P(t,r,a);case 68:return c=e.sent,e.abrupt("break",71);case 70:throw new Error("Unrecognized MESSAGE_TYPE");case 71:return e.abrupt("return",c);case 72:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return M.apply(this,arguments)}function M(){return(M=(0,s.default)(i.default.mark((function e(t,n,r){var a,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(a=n.deviceSentMessage)){e.next=3;break}throw new p.DeviceSentMessageError(j(t.author),v.default.DSM_ERROR.MISSING_DSM);case 3:if(null!=a.destinationJid){e.next=5;break}throw new p.DeviceSentMessageError(j(t.author),v.default.DSM_ERROR.INVALID_DSM);case 5:return s=a.destinationJid,e.next=8,D(t,a.message,r);case 8:return u=e.sent,e.abrupt("return",(0,o.default)({deviceSent:{destination:(0,A.createWid)(s)}},u));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return k.apply(this,arguments)}function k(){return(k=(0,s.default)(i.default.mark((function e(t,n,r){var a,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(a=n.deviceSentMessage)){e.next=3;break}throw new p.DeviceSentMessageError(j(t.author),v.default.DSM_ERROR.MISSING_DSM);case 3:if(null!=a.phash){e.next=5;break}throw new p.DeviceSentMessageError(j(t.author),v.default.DSM_ERROR.INVALID_DSM);case 5:return s=a.phash,e.next=8,D(t,a.message,r);case 8:return u=e.sent,e.abrupt("return",(0,o.default)({deviceSent:{phash:s,info:t}},u));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=(0,s.default)(i.default.mark((function e(t,n,r){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n.deviceSentMessage){e.next=2;break}throw new p.DeviceSentMessageError(j(t.author),v.default.DSM_ERROR.INVALID_SENDER);case 2:return e.next=4,D(t,n,r);case 4:return a=e.sent,e.abrupt("return",(0,o.default)({deviceSent:null},a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return N.apply(this,arguments)}function N(){return(N=(0,s.default)(i.default.mark((function e(t,n,r){var a,o,s,u,l,c,d,p,_;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=2;break}return e.abrupt("return",{senderKey:null,storeMsg:null,renderableMsgs:[]});case 2:if(a=y.default.parseMsgProto(n,U(t),"relay",r),o=null!=n.senderKeyDistributionMessage?L(t,n.senderKeyDistributionMessage):null,s=null,t.type===T.MESSAGE_TYPE.PEER_BROADCAST&&(a.broadcastId=t.chat,a.broadcastParticipants=t.bclParticipants,a.broadcastEphSettings=t.bclEphSettings,s=a),t.type!==T.MESSAGE_TYPE.OTHER_BROADCAST){e.next=18;break}if(a.broadcastId=t.chat,u=t.ephSetting,l=a.ephemeralSharedSecret,null==u||null==l){e.next=18;break}return e.next=13,(0,f.decodeBroadcastEphemeralSetting)(t.chat,(0,h.getMeUser)(),t.author,u,l);case 13:c=e.sent,d=c.ephemeralDuration,p=c.ephemeralSettingTimestamp,a.ephemeralDuration=d,a.ephemeralSettingTimestamp=p;case 18:if(_=[],"unknown"===a.type&&null!=o){e.next=27;break}if(t.type!==T.MESSAGE_TYPE.PEER_BROADCAST){e.next=26;break}return e.next=23,F(a,t.bclParticipants,t.bclEphSettings);case 23:_=e.sent,e.next=27;break;case 26:("payment_transaction_request_cancelled"!==a.subtype&&"payment_action_request_declined"!==a.subtype||null!=a.paymentRequestMessageKey)&&(_=[a]);case 27:return e.abrupt("return",{senderKey:o,storeMsg:s,renderableMsgs:_});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){if(!e.chat.isGroup()&&!e.chat.isBroadcast())throw new Error("should not have senderkey");var n=t.groupId,r=t.axolotlSenderKeyDistributionMessage;if(null==n||e.chat.toString({legacy:!0})!==n)throw new Error(`senderKeyDistributionMessage: from ${e.chat.toString()} mismatched to ${n||"null"}`);if(!r)throw new Error(`senderKeyDistributionMessage: from ${e.author.toString()} has no content`);return{groupId:n,key:r}}function x(){return(x=(0,s.default)(i.default.mark((function e(t,n){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.edit!==d.default.EDIT_ATTR.REVOKE||t.type===T.MESSAGE_TYPE.PEER_BROADCAST){e.next=2;break}return e.abrupt("return",[]);case 2:if(r=U(t),n===T.PlaceholderType.E2E?r.type=d.default.MSG_TYPE.CIPHERTEXT:(r.type=d.default.MSG_TYPE.UNKNOWN,r.subtype="fanout"),(0,m.addPlaceHolderAction)(r,n),t.type!==T.MESSAGE_TYPE.PEER_BROADCAST){e.next=17;break}if(r.broadcastParticipants=t.bclParticipants,r.broadcastEphSettings=t.bclEphSettings,(0,_.storeMessages)([r],r.id.remote),t.edit!==d.default.EDIT_ATTR.REVOKE){e.next=11;break}return e.abrupt("return",[]);case 11:return e.next=13,F(r,t.bclParticipants);case 13:return a=e.sent,e.abrupt("return",a);case 17:return e.abrupt("return",[r]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var t=B(e),n=(0,h.getMeUser)(),r={id:t,from:t.fromMe?n:t.remote,to:t.fromMe?t.remote:n,type:d.default.MSG_TYPE.UNKNOWN,t:e.ts||0,ack:d.default.ACK.SENT,author:t.participant,broadcast:!1,notifyName:e.pushname||""};return null!=e.count&&(r.count=e.count),r}function F(e,t,n){return r.all(t.map(function(){var t=(0,s.default)(i.default.mark((function t(r){var a,s,u,l,c,d,p,_;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=new g.default({remote:r,fromMe:!0,id:e.id.id}),t.next=8;break;case 4:return t.prev=4,t.t0=t.catch(0),__LOG__(3)`drop: cannot create MsgKey: ${t.t0.stack}`,t.abrupt("return",null);case 8:if(l=n?n[r.toString()]:null,c=e.ephemeralSharedSecret,null==(d=e.broadcastId)||null==l||null==c){t.next=17;break}return t.next=14,(0,f.decodeBroadcastEphemeralSetting)(d,r,(0,h.getMeUser)(),l,c);case 14:p=t.sent,s=p.ephemeralDuration,u=p.ephemeralSettingTimestamp;case 17:return _=(0,o.default)((0,o.default)({},e),{},{id:a,from:(0,h.getMeUser)(),to:r,broadcast:!0,ephemeralDuration:s,ephemeralSettingTimestamp:u}),e.protocolMessageKey&&(_.protocolMessageKey=new g.default({remote:r,fromMe:!0,id:e.protocolMessageKey.id})),t.abrupt("return",_);case 20:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(){return t.apply(this,arguments)}}())).then((function(e){return e.filter(Boolean)}))}function G(e){return(0,A.toUserWid)(e).equals((0,h.getMeUser)())}function B(e){return e.type===T.MESSAGE_TYPE.OTHER_BROADCAST?new g.default({remote:(0,A.toUserWid)(e.author),fromMe:!1,id:e.externalId}):e.type===T.MESSAGE_TYPE.CHAT?new g.default({remote:e.chat,fromMe:G(e.author),id:e.externalId}):new g.default({remote:e.chat,fromMe:G(e.author),participant:(0,A.toUserWid)(e.author),id:e.externalId})}function j(e){return null==e.device||e.device===d.default.DEVICE.PRIMARY_DEVICE?v.default.DEVICE_TYPE.PRIMARY:v.default.DEVICE_TYPE.COMPANION}function Y(e){return e.type===T.MESSAGE_TYPE.CHAT?e.author:e.chat}},3376:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!s.default.bspSystemMessageEnabled||t.type!==l.MESSAGE_TYPE.CHAT)return e;if(!o.default.equals((0,i.getMaybeMeUser)(),t.author)){var r=n.privacyMode;return null!=r?e.map((function(e){return(0,a.default)((0,a.default)({},e),{},{privacyModeWhenSent:r})})):e}var c=n.privacyMode,d=(0,u.getContactPrivacyMode)(t.chat),f=(0,u.latestPrivacyMode)(d,c);if(null==f)return e;return e.map((function(e){return(0,a.default)((0,a.default)({},e),{},{privacyModeWhenSent:f})}))};var a=r(n(81109)),i=n(71701),o=r(n(12717)),s=r(n(63056)),u=n(6603),l=n(87442)},16735:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.validateMsgDestination=function(e,t){var n=t.author,a=t.chat;if(!e.equals(a))return __LOG__(4,void 0,new Error,!0)`encDestination: ${String(e)}, destination: ${a.toString()}`,SEND_LOGS("validateMsgDestination: drop due to the deviceSentMessage meta mismatch."),r.resolve(!1);var i=(0,f.toUserWid)(n),o=n.device||0;if(!i.equals((0,c.getMeUser)()))return __LOG__(4,void 0,new Error,!0)`sender: ${n.toString()}`,SEND_LOGS("validateMsgDestination: drop due to msg is not sent from your own device."),r.resolve(!1);return(0,l.hasDevice)(i,o).then((function(e){return e||(__LOG__(4,void 0,new Error,!0)`no record found for sender: ${n.toString()}`,SEND_LOGS("validateMsgDestination:drop due to invalid device")),e}))},t.validateBclHash=function(e,t){var n,r=null!==(n=t.bclParticipants)&&void 0!==n?n:[];return(0,d.phashV2)(r).then((function(n){return n!==e?(__LOG__(4,void 0,new Error,!0)`expected: ${e}, got: ${n}`,SEND_LOGS("validateBclHash: drop due to invalid hash."),!1):(t.bclHashValidated=!0,!0)}))},t.isFromKnownDevice=function(){return p.apply(this,arguments)};var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=a(n(34263)),l=n(38812),c=n(71701),d=n(45975),f=n(75793);function p(){return(p=(0,s.default)(i.default.mark((function e(t){var n,r,a,s,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=null==t.device?u.default.DEVICE.PRIMARY_DEVICE:t.device)!==u.default.DEVICE.PRIMARY_DEVICE){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,(0,l.getDeviceIds)([t.user]);case 5:return r=e.sent,a=(0,o.default)(r,1),s=a[0],c=null!=s&&s.devices.includes(n),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},89209:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleChatSimpleAck=function(){return E.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(26083),u=a(n(34263)),l=n(71701),c=a(n(66028)),d=n(4779),f=a(n(5315)),p=a(n(38847)),h=n(75793),_=n(91356),v=a(n(63056)),m=n(4976),g=u.default.ACK,y=u.default.ACK_STRING;function E(){return(E=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s,u,E,b,T,w,A,C,O,M;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.from,r=t.externalIds,a=t.ts,o=t.recipient,s=t.ackString,u=t.offline,E=t.biz,b=t.ack,T=s===y.SENDER,!(w=!T&&(0,h.toUserWid)(n).equals((0,l.getMeUser)()))&&!T){e.next=10;break}if(o){e.next=7;break}throw new Error("handleChatSimpleAck: invalid sender/peer receipt without recipient");case 7:A=o,e.next=13;break;case 10:A=(0,h.toUserWid)(n),"none"===(null===(C=(0,l.getUserPrivacySettings)())||void 0===C?void 0:C.readReceipts)&&(b===g.READ||b===g.PLAYED&&(0,m.getABPropConfigValue)("played_self_enabled"))&&(b=g.RECEIVED);case 13:if(v.default.bspSystemMessageEnabled&&(0,_.updateBizPrivacyMode)(n,E),O=r.map((function(e){return new f.default({id:e,remote:A,fromMe:!w})})),M=O.map((function(e){return e.toString()})),null!=u&&c.default.offlineStanzaReceivedAfterCompelete(),null==u||c.default.isResumeFromRestartComplete()){e.next=26;break}if(w){e.next=22;break}return e.abrupt("return",p.default.addOfflineReceipt(b,a,n,M));case 22:if(!(null!=o&&s===y.READ&&r.length>0)){e.next=24;break}return e.abrupt("return",p.default.addOfflinePeerReadReceipt(a,M));case 24:e.next=37;break;case 26:if(w){e.next=35;break}return e.prev=27,e.next=30,(0,d.updateReceiptRecords)(b,a,n,M,E);case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(27),__LOG__(4,void 0,new Error,!0)`error: ${e.t0}`,SEND_LOGS("handleChatSimpleAck: failed");case 35:return e.next=37,S(w,T,O,A,b,a,E);case 37:case"end":return e.stop()}}),e,null,[[27,32]])})))).apply(this,arguments)}function S(e,t,n,a,i,o,u){return i<g.RECEIVED?r.resolve():t?(__LOG__(2)`handleChatSimpleAck: sender receipt from peer device ${a.toString()}`,r.resolve()):e?(__LOG__(2)`handleChatSimpleAck: peer receipt from peer device ${a.toString()}`,i===g.READ?(0,s.updateChatPeerRead)(a,n):i===g.PLAYED?(0,s.updateMsgAcks)(n,i,o):r.resolve()):(0,s.updateMsgAcks)(n,i,o,u)}},26083:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateChatPeerRead=g,t.updateMsgAcks=E,t.processOrphanPeerReceipt=function(e){return m.enqueue((0,o.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.getOrphanReceipt)(String(e));case 2:if(n=t.sent){t.next=6;break}return __LOG__(2)`processOrphanPeerReceipt: no orphan ack found for incoming ${e}`,t.abrupt("return");case 6:if(null==n[v.PLAYED]){t.next=10;break}return __LOG__(2)`processOrphanPeerReceipt: orphan played ack found for incoming ${e}`,t.next=10,E([e],_.PLAYED,n[v.PLAYED]);case 10:return null!=n[v.READ]&&(__LOG__(2)`processOrphanPeerReceipt: orphan read ack found for incoming ${e}`,g(e.remote,[e])),t.next=13,(0,f.removeOrphanReceipt)(String(e));case 13:case"end":return t.stop()}}),t)}))))};var i=a(n(87757)),o=a(n(48926)),s=n(19087),u=n(79594),l=n(48399),c=a(n(34263)),d=a(n(66312)),f=n(27690),p=n(54865),h=n(322),_=c.default.ACK,v=c.default.ACK_STRING,m=new s.PromiseQueue;function g(){return y.apply(this,arguments)}function y(){return(y=(0,o.default)(i.default.mark((function e(t,r){var a,o,s,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.map(String),o=[],s=null,e.next=5,(0,h.getTable)().bulkGet(a,!1);case 5:return e.sent.forEach((function(e,t){if(e){if(null==e.pendingReadReceipt)return;null!=e.rowId&&(null==s||e.rowId>s)&&(s=e.rowId)}else o.push(a[t])})),m.enqueue((function(){return __LOG__(2)`updateChatPeerRead: storing ${o.length} orphan acks`,(0,f.createOrUpdateOrphanReceipt)(v.READ,0,o)})),e.next=10,(0,l.markMessageAndChatAsRead)(s,String(t));case 10:u=n(26671).default,(c=u.get(t))&&(0,p.updateUnreadCountMD)(c,0,!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=(0,o.default)(i.default.mark((function e(t,n,a,o){var s,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],l=[],t.forEach((function(e){var t=d.default.get(e);t?l.push((0,u.updateMsgAck)(t,null,{from:t.from,to:t.to,ack:n,t:a,deliveryPrivacyMode:_.RECEIVED===n?o:null})):(__LOG__(2)`updateMsgAcks: no message found for incoming ack, with msgKey: ${e}`,e.fromMe||s.push(e))})),s.length>0&&m.enqueue((function(){__LOG__(2)`updateMsgAcks: store ${s.length} orphan acks`;var e=null;if(n===_.PLAYED?e=v.PLAYED:n===_.READ&&(e=v.READ),e)return(0,f.createOrUpdateOrphanReceipt)(e,a,s.map(String))})),e.next=6,r.all(l);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},39649:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleGroupSimpleAck=function(){return S.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(79594),u=n(26083),l=a(n(34263)),c=n(71701),d=a(n(66028)),f=n(4779),p=a(n(66312)),h=n(19761),_=a(n(44982)),v=a(n(5315)),m=a(n(38847)),g=n(75793),y=l.default.ACK,E=l.default.ACK_STRING;function S(){return(S=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s,u,l,p,h,_,y,S,T,w,A;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ack,r=t.from,a=t.externalIds,o=t.ts,s=t.ackString,u=t.participant,l=t.recipient,p=t.offline,u){e.next=3;break}throw new Error("handleGroupSimpleAck: got group ack without participant.");case 3:if(h=(0,c.getMeUser)(),_=(0,g.toUserWid)(u),y=s===E.SENDER,!(S=!y&&_.equals(h))){e.next=13;break}if(l){e.next=10;break}throw new Error("handleGroupSimpleAck: invalid sender/peer receipt without recipient");case 10:T=l,e.next=14;break;case 13:T=h;case 14:if(w=a.map((function(e){return new v.default({id:e,remote:r,fromMe:!S,participant:T})})),A=w.map((function(e){return e.toString()})),null!=p&&d.default.offlineStanzaReceivedAfterCompelete(),null==p||d.default.isResumeFromRestartComplete()){e.next=26;break}if(S){e.next=22;break}return e.abrupt("return",m.default.addOfflineReceipt(n,o,u,A));case 22:if(!(null!=l&&s===E.READ&&a.length>0)){e.next=24;break}return e.abrupt("return",m.default.addOfflinePeerReadReceipt(o,A));case 24:e.next=35;break;case 26:if(S){e.next=35;break}return e.prev=27,e.next=30,(0,f.updateReceiptRecords)(n,o,u,A);case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(27),__LOG__(4,void 0,new Error,!0)`error: ${e.t0}`,SEND_LOGS("handleGroupSimpleAck: failed");case 35:return e.next=37,b(S,y,w,r,n,_,o);case 37:case"end":return e.stop()}}),e,null,[[27,32]])})))).apply(this,arguments)}function b(e,t,n,a,i,o,l){return i<y.RECEIVED?r.resolve():t?(__LOG__(2)`handleGroupSimpleAck: sender receipt from peer device ${a.toString()}`,r.resolve()):e?(__LOG__(2)`handleGroupSimpleAck: peer receipt from peer device ${a.toString()}`,i===y.READ&&(0,u.updateChatPeerRead)(a,n),i===y.PLAYED?(0,u.updateMsgAcks)(n,i,l):r.resolve()):r.all(n.map((function(e){var t=p.default.get(e);if(t)return _.default.find(e).then((function(n){if(n||(__LOG__(3,void 0,void 0,!0)`Assertion failed! ${e.toString()}`,SEND_LOGS("handleGroupSimpleAck: no msgInfo found for msg:")),(0,h.updateMsgInfo)(n,i,o,l),i===y.RECEIVED&&0===n.deliveryRemaining||i===y.READ&&0===n.readRemaining||i===y.PLAYED&&0===n.playedRemaining)return(0,s.updateMsgAck)(t,null,{from:(0,c.assertGetMe)(),to:a,ack:i,t:l})}));__LOG__(2)`handleGroupSimpleAck: no message found for incoming ack, with msgKey:`}))).then((function(){}))}},28684:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=h.default.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);var n=t.success,a=n.ack,i=n.ackString,u=n.from,_=n.stanzaId;if(n.type===h.RECEIPT_TYPE.SIMPLE){if(a===g.CONTENT_GONE)return r.resolve(y(u,_,i,null));var v=y(u,_,i,n.participant);return function(e){var t=e.from,n=e.ack,a=e.stanzaId,i=e.participant;if(__LOG__(2)`handleSimpleAck: got receipt ${n} for msg ${a}`,n===g.MD_DOWNGRADE){var u=new p.default({id:a,remote:t,fromMe:!0,participant:t.isUser()?void 0:(0,l.getMeUser)()});return(0,f.updateLocalAndModel)(u,{mdDowngrade:!(i&&m.default.isWid(i)&&i.isUser())||i.toString()})}if(n===g.PEER)return r.resolve();if(t.isStatusV3())return(0,d.handleStatusSimpleAck)(e);if(t.isUser())return(0,s.handleChatSimpleAck)(e);if(t.isGroup())return(0,c.handleGroupSimpleAck)(e);if(t.isBroadcast()){if(!e.participant)return r.reject(new Error(`handleSimpleAck: missing participant for broadcast receipt ${t.toString()}`));var h=(0,o.default)((0,o.default)({},e),{},{from:e.participant,participant:null});return(0,s.handleChatSimpleAck)(h)}return r.reject(new Error(`handleSimpleAck: unsupported type for ${t.toString()}`))}(n).then((function(){return v})).catch((function(){return v}))}if(n.type===h.RECEIPT_TYPE.AGGREGATE){var E=y(u,_,i,null);return function(e){var t=e.ack,n=e.from;if(t===g.CONTENT_GONE)return r.reject("handleAggregateAck: reupload receipts cannot be aggregated");if(!n.isGroup())return r.reject("handleAggregateAck: aggregate receipts should come only from group JIDs");return __LOG__(3)`handleAggregateAck: not implemented`,r.resolve()}(n).then((function(){return E})).catch((function(){return E}))}return __LOG__(4,void 0,new Error,!0)`type: ${n.type}`,SEND_LOGS("handleMsgReceipt: Invalid receipt type"),r.resolve(y(u,_,i,null))};var o=i(n(81109)),s=n(89209),u=i(n(34263)),l=n(71701),c=n(39649),d=n(65619),f=n(98593),p=i(n(5315)),h=a(n(82799)),_=n(18712),v=n(19325),m=i(n(12717)),g=u.default.ACK;function y(e,t,n,r){return(0,_.wap)("ack",{to:(0,v.JID)(e),id:(0,_.CUSTOM_STRING)(t),class:"receipt",type:(0,_.MAYBE_CUSTOM_STRING)(n),participant:r&&r!==e?(0,v.DEVICE_JID)(r):_.DROP_ATTR})}},82799:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RECEIPT_TYPE=void 0;var a=r(n(81109)),i=n(28617),o=r(n(34263)),s=r(n(98112)),u=o.default.ACK,l={read:u.READ,played:u.PLAYED,inactive:u.INACTIVE,"server-error":u.CONTENT_GONE,"md-downgrade":u.MD_DOWNGRADE,sender:u.RECEIVED,"read-self":u.READ,"played-self":u.PLAYED,peer_msg:u.PEER},c={SIMPLE:"simple",AGGREGATE:"aggregate"};t.RECEIPT_TYPE=c;var d=new s.default("incomingMsgReceiptParser",(function(e){e.assertTag("receipt"),e.hasAttr("to")&&e.assertAttrIsMe("to");var t={ack:e.attrEnumOrDefault("type",l,u.RECEIVED),stanzaId:e.attrString("id"),from:e.attrWid("from"),ackString:e.hasAttr("type")?e.attrString("type"):null},n=e.maybeChild("participants");return n?function(e,t){var n=t.mapChildrenWithTag("user",(function(e){try{return{participant:e.attrDeviceWid("jid"),ts:e.attrTime("t")}}catch(e){return null}})).filter((function(e){return null!=e}));return(0,a.default)((0,a.default)({},e),{},{type:c.AGGREGATE,externalId:t.attrString("key"),receipts:n})}(t,n):function(e,t){var n,r,o=t.hasAttr("participant")?t.attrDeviceWid("participant"):null,s=t.hasAttr("recipient")?t.attrUserWid("recipient"):null;n=t.hasChild("list")?t.child("list").mapChildrenWithTag("item",(function(e){return e.attrString("id")})):[];if(t.hasChild("biz")){var u=t.child("biz"),l=u.attrFlowEnumOrDefault("actual_actors",i.castToActualActorsEnum,null),c=u.attrFlowEnumOrDefault("host_storage",i.castToHostStorageEnum,null),d=u.maybeAttrInt("privacy_mode_ts");null!=l&&null!=c&&null!=d&&(r={actualActors:l,hostStorage:c,privacyModeTs:d})}return n.push(e.stanzaId),(0,a.default)((0,a.default)({},e),{},{type:"simple",externalIds:n,participant:o,recipient:s,ts:t.attrTime("t"),offline:t.hasAttr("offline")?t.attrString("offline"):null,biz:r})}(t,e)}));t.default=d},65619:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleStatusSimpleAck=function(){return m.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(26083),s=r(n(34263)),u=n(71701),l=n(4779),c=r(n(5315)),d=n(75793),f=r(n(66005)),p=r(n(44982)),h=n(19761),_=s.default.ACK,v=s.default.ACK_STRING;function m(){return(m=(0,i.default)(a.default.mark((function e(t){var n,r,i,o,f,p,h,_,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.externalIds,r=t.ts,i=t.ackString,o=t.ack,f=t.participant,p=t.recipient,i===v.READ){e.next=3;break}return e.abrupt("return");case 3:if(h=!!f&&(0,d.toUserWid)(f).equals((0,u.getMeUser)()),_=new c.default({id:n[0],remote:(0,d.createWid)(s.default.STATUS_WID),fromMe:!h,participant:p||(0,u.getMeUser)()}),m=[_.toString()],h||!f){e.next=15;break}return e.prev=7,e.next=10,(0,l.updateReceiptRecords)(o,r,f,m);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),__LOG__(4,void 0,new Error,!0)`error: ${e.t0}`,SEND_LOGS("handleStatusSimpleAck: failed");case 15:return e.next=17,g(h,_,r);case 17:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)(a.default.mark((function e(t,n,r){var i,s,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.participant){e.next=3;break}return e.abrupt("return");case 3:if(!t){e.next=8;break}(s=f.default.get(i))&&s.handleReadStatus(n),e.next=12;break;case 8:return e.next=10,p.default.find(n);case 10:u=e.sent,(0,h.updateMsgInfo)(u,_.READ,i,r);case 12:return e.next=14,(0,o.updateMsgAcks)([n],_.READ,r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},19588:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAndClearDanglingReceipts=function(){return f.apply(this,arguments)},t.clearDanglingReceipts=p;var i=a(n(87757)),o=a(n(48926)),s=n(90066),u=n(23051),l=n(38075),c=n(237),d=n(75793);function f(){return(f=(0,o.default)(i.default.mark((function e(){var t,n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getTable)().all();case 2:return t=e.sent,n=new Map,t.forEach((function(e){e.receipts.forEach((function(e){var t=(0,d.createWid)(e.from),r=(0,d.createWid)(e.author),a=n.get(t);a||(a=new Map,n.set(t,a));var i=a.get(r);i||(i=[],a.set(r,i)),i.push(e.externalId)}))})),a=String((0,s.unixTime)()),e.next=8,r.all(Array.from(n.keys()).map((function(e){var t=n.get(e);if(t)return(0,u.sendAggregateReceipts)(e,u.RECEIPT_TYPE.DELIVERY,a,t)})));case 8:return e.next=10,p();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.blockSendPing)();case 2:return e.next=4,(0,l.getTable)().clear();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8132:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=n(19087),l=n(12035),c=n(4746),d=n(71802),f=new(function(){function e(){var t=this;(0,o.default)(this,e),this.pendingDeviceCache=new Set,this.pendingAcks=[],this.snapshotTimer=new l.ShiftTimer((function(){t.createSnapshot()})),this.checkpointQueue=new u.PromiseQueue}return(0,s.default)(e,[{key:"addOfflinePendingDevice",value:function(e,t){this.pendingDeviceCache.add(e),t&&this.pendingAcks.push(t),this.snapshotTimer.isScheduled()||(__LOG__(2)`[offline-resume][device-cache]: creating snapshot: schedule in ${3e3} ms`,this.snapshotTimer.onOrAfter(3e3))}},{key:"createSnapshot",value:function(){this.snapshotTimer.isScheduled()&&this.snapshotTimer.cancel();var e=Array.from(this.pendingDeviceCache),t=this.pendingAcks;__LOG__(2)`[offline-resume][device-cache]: creating snapshot for pending devices ${e.join(",")}`,this.checkpointQueue.enqueue((0,i.default)(a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.addUserToPendingDeviceSync)(e);case 2:t.forEach(c.castStanza);case 3:case"end":return n.stop()}}),n)})))),this.pendingDeviceCache=new Set,this.pendingAcks=[]}}]),e}());t.default=f},66028:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OfflineMessageHandler=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(34575)),l=i(n(93913)),c=n(53615),d=n(80835),f=n(19588),p=i(n(34541)),h=n(24677),_=n(25220),v=n(8160),m=i(n(99908)),g=n(46797),y=i(n(38847)),E=n(87442),S=i(n(7860)),b=n(71802),T=i(n(8132)),w=n(12035),A=a(n(59502)),C=i(n(70496)),O=n(29192),M=n(16115),I=n(93293),k=20,P=50,R=200,D=n(54302)({INIT:"INIT",RESUME_ON_RESTART:"RESUME_ON_RESTART",RESUME_WITH_OPEN_TAB:"RESUME_WITH_OPEN_TAB",COMPLETE:"COMPLETE"}),N=function(){function e(){var t=this;(0,u.default)(this,e),this._offlineCompleteTimer=null,this.initState(),p.default.on("logout",(function(){t.initState()}))}var t,a,i;return(0,l.default)(e,[{key:"initState",value:function(){this._offlineMessagePreviewCounter=-1,this._decryptedMessageCount=0,this._decryptionErrorCount=0,this._finishedDownloading=!1,this._hasMessagesToDownload=null,this._status=D.INIT}},{key:"setStatus",value:function(e){e===D.RESUME_WITH_OPEN_TAB?__LOG__(2)`[resume-resume] begin RESUME_WITH_OPEN_TAB`:e===D.RESUME_ON_RESTART?__LOG__(2)`[offline-resume][handler] begin RESUME_ON_RESTART`:e===D.COMPLETE&&(this._status===D.RESUME_WITH_OPEN_TAB?__LOG__(2)`[resume-resume] finished RESUME_WITH_OPEN_TAB`:__LOG__(2)`[offline-resume][handler] finished RESUME_ON_RESTART`),this._status=e}},{key:"setOfflineMessagePreviewCounter",value:(i=(0,s.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isResumeFromRestartComplete()){e.next=11;break}__LOG__(2)`[offline-resume][handler] Offline session is complete when receiving offline preview ib.`,this._exceedResumeWithOpenTabLimit(t.message,t.receipt)&&(__LOG__(2)`[offline-resume][handler] restart client due to exceed the LIMIT, message: ${t.message}, receipt: ${t.receipt}`,G()),C.default.restartDetection(),this.setStatus(D.RESUME_WITH_OPEN_TAB),(r=n(26671).default).disableSortListener(),setTimeout((function(){r.enableSortListener(!0)}),7e3),this._startOfflineCompleteTimer(t.message,t.receipt),e.next=24;break;case 11:if(this._status!==D.INIT){e.next=23;break}return O.OfflineResumeReporter.logOfflinePreviewT(),O.OfflineResumeReporter.logOfflineCount(t),this._offlineMessagePreviewCounter=t.message,this._decryptedMessageCount=0,C.default.restartDetection(),this.setStatus(D.RESUME_ON_RESTART),e.next=20,(0,g.enableMemSignalStore)();case 20:this._startOfflineCompleteTimer(t.message,t.receipt),e.next=24;break;case 23:__LOG__(2)`[offline-resume][handler] Received multiple offline preview ib during offline resume.`;case 24:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getOfflineDeliveryProgress",value:function(){return this._finishedDownloading?100:-1===this._offlineMessagePreviewCounter?0:0===this._offlineMessagePreviewCounter?100:Math.min(Math.ceil(100*this._decryptedMessageCount/this._offlineMessagePreviewCounter),100)}},{key:"isResumeOnSocketDisconnectInProgress",value:function(){return this._status===D.RESUME_WITH_OPEN_TAB}},{key:"isResumeFromRestartComplete",value:function(){return this._status!==D.RESUME_ON_RESTART&&this._status!==D.INIT}},{key:"getHasMessagesToDownload",value:function(){return this._hasMessagesToDownload}},{key:"getFinishedDownloading",value:function(){return 100===this.getOfflineDeliveryProgress()}},{key:"setOfflineSessionComplete",value:(a=(0,s.default)(o.default.mark((function e(t){var a,i=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(setTimeout((function(){n(26671).default.enableSortListener(!0)}),3e3),null===(a=this._offlineCompleteTimer)||void 0===a||a.cancel(),this._offlineCompleteTimer=null,this._status!==D.COMPLETE){e.next=7;break}return e.abrupt("return",r.resolve());case 7:if(this._status!==D.RESUME_WITH_OPEN_TAB){e.next=16;break}return e.next=10,(0,v.waitForOnlineMsgThread)();case 10:return e.next=12,(0,b.doPendingDeviceSync)();case 12:return this.setStatus(D.COMPLETE),e.abrupt("return",r.resolve());case 16:return this._hasMessagesToDownload=t>0,this._finishedDownloading=0===t,this.setStatus(D.COMPLETE),this._offlineStanzaCountAfterOfflineMarker=0,setTimeout((function(){i._offlineStanzaCountAfterOfflineMarker>100&&(__LOG__(3)`[offline-resume][handler] ${i._offlineStanzaCountAfterOfflineMarker} received after offline completion marker. Refreshing window due to potential server issue.`,G())}),2e4),p.default.onOfflineProgressUpdate(),e.abrupt("return",this._onOfflineComplete());case 23:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"shouldUseOfflineResumeScreen",value:function(){return this._offlineMessagePreviewCounter>this._decryptedMessageCount}},{key:"decryptOfflineMessage",value:function(e){var t=this;return(0,h.decryptE2EPayload)(e).then((function(e){return t._decryptedMessageCount=t._decryptedMessageCount+1,e.result===E.E2EProcessResult.RETRY&&(t._decryptionErrorCount=t._decryptionErrorCount+1),e}))}},{key:"offlineStanzaReceivedAfterCompelete",value:function(){this.isResumeFromRestartComplete()&&(this._offlineStanzaCountAfterOfflineMarker=this._offlineStanzaCountAfterOfflineMarker+1)}},{key:"refreshOfflineCompleteTimer",value:function(){this._offlineCompleteTimer&&this._offlineCompleteTimer.onOrAfter(6e4)}},{key:"_startOfflineCompleteTimer",value:function(e,t){var n,r=this;null===(n=this._offlineCompleteTimer)||void 0===n||n.cancel(),this._offlineCompleteTimer=new w.ShiftTimer((function(){r._status!==D.COMPLETE&&(__LOG__(2)`[offline-resume][handler]: offline session completed by timeout`,r.setOfflineSessionComplete(e+t),r._offlineCompleteTimer=null)})),this._offlineCompleteTimer.onOrAfter(6e4)}},{key:"_onOfflineComplete",value:(t=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.waitForOfflineMsgThread)();case 2:return this._finishedDownloading=!0,p.default.onOfflineProgressUpdate(),O.OfflineResumeReporter.logOfflineDecryptionErrorCount(this._decryptionErrorCount),__LOG__(2)`[offline-resume][handler] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ${this._decryptionErrorCount}`,this._decryptionErrorCount=0,e.next=9,x();case 9:return __LOG__(2)`[offline-resume][handler] _onOfflineComplete: clearOfflineSnapShot done.`,(0,g.enablePersistSignalStore)(),(0,d.promiseLoop)(function(){var e=(0,s.default)(o.default.mark((function e(t,n,r){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.delayMs)(A.expBackoff(r,12e4,1e3,.1)),e.prev=1,e.next=4,(0,f.clearDanglingReceipts)();case 4:return __LOG__(2)`[offline-resume][handler] runReceiptCleanUpLoop: done.`,e.abrupt("return",t());case 8:if(e.prev=8,e.t0=e.catch(1),__LOG__(2)`[offline-resume][handler] runReceiptCleanUpLoop: failed with error ${e.t0}.`,!(r>3)){e.next=14;break}return __LOG__(3)`[offline-resume][handler] runReceiptCleanUpLoop: Gave up clean up receipts ${r} tries`,e.abrupt("return",t());case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()),e.prev=12,e.next=15,(0,M.pruneExpiredMessages)();case 15:t=e.sent,__LOG__(2)`[offline-resume][handler] setOfflineSessionComplete: pruneExpiredMessages pruned ${t} msg(s)`,e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(12),__LOG__(4,void 0,new Error)`[offline-resume][handler] _onOfflineComplete: pruneExpiredMessages message failed with error: ${e.t0}`,e.t0;case 23:return e.prev=23,__LOG__(2)`[offline-resume][handler] _onOfflineComplete: restoreChatsAndMessages.`,e.next=27,(0,_.restoreChatsAndMessages)();case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(23),__LOG__(4,!0,new Error,!0)`[offline-resume][handler] _onOfflineComplete: restoreChatsAndMessages failed with error ${e.t1}.`,SEND_LOGS("offline-resume-fatal-error"),S.default.logout();case 33:F(),(0,I.processAllOrphanPaymentNotifications)(),setTimeout((function(){(0,b.doPendingDeviceSync)()}),2e3);case 36:case"end":return e.stop()}}),e,this,[[12,19],[23,29]])}))),function(){return t.apply(this,arguments)})},{key:"_exceedResumeWithOpenTabLimit",value:function(e,t){return e+t>R||e>k&&e+t>P}}]),e}();t.OfflineMessageHandler=N;var L=new N;function x(){return U.apply(this,arguments)}function U(){return(U=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.default.createSnapshot(),y.default.createSnapshot(),T.default.createSnapshot(),e.next=5,r.all([m.default.checkpointQueue.wait(),y.default.checkpointQueue.wait(),T.default.checkpointQueue.wait()]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){p.default.readyForMainStreamMode(),O.OfflineResumeReporter.logMainScreenLoadT(),O.OfflineResumeReporter.commit()}function G(){window.Native.ipcRenderer.invoke("refresh-electron-window-for-refresh")}t.default=L},99908:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(319)),u=a(n(34575)),l=a(n(93913)),c=n(19087),d=n(12035),f=n(90066),p=a(n(34541)),h=n(23051),_=n(38075),v=a(n(81980)),m=n(1018),g=n(54133),y=n(93069),E=new(function(){function e(){var t=this;(0,u.default)(this,e),this.cache=[],this.checkpointQueue=new c.PromiseQueue,this.lastCheckpointIndex=0,this.snapshotTimer=new d.ShiftTimer((function(){t.createSnapshot()}))}var t,n;return(0,l.default)(e,[{key:"addOfflineMessage",value:function(e){var t;(t=this.cache).push.apply(t,(0,s.default)(e)),this.snapshotTimer.isScheduled()||(__LOG__(2)`[offline-resume][msg-cache]: snapshot schedule in ${1e3} ms`,this.snapshotTimer.onOrAfter(1e3))}},{key:"_addToMessageTable",value:(n=(0,o.default)(i.default.mark((function e(t,n){var r,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=t;a<n;a++)null!=(o=this.cache[a].msg)&&r.push(o);return e.next=4,(0,y.storeOfflineMsgs)(r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_sendAggregateReceipts",value:(t=(0,o.default)(i.default.mark((function e(t,n){var a,o,s,u,l,c,d,p,v,m,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Map,o=[],s=t;case 3:if(!(s<n)){e.next=21;break}if(u=this.cache[s].msg,l=this.cache[s].receiptInfo){e.next=8;break}return e.abrupt("continue",18);case 8:if(c=l.externalId||(null==u?void 0:u.id.id)){e.next=11;break}return e.abrupt("continue",18);case 11:d=l.from,p=l.author,(v=a.get(d))||(v=new Map,a.set(d,v)),(m=v.get(p))||(m=[],v.set(p,m)),m.push(c),o.push({from:String(d),author:String(p),externalId:c});case 18:s++,e.next=3;break;case 21:return g=String((0,f.unixTime)()),r.all(Array.from(a.keys()).map((function(e){var t=a.get(e);if(t)return(0,h.sendAggregateReceipts)(e,h.RECEIPT_TYPE.DELIVERY,g,t)}))),e.next=25,(0,_.getTable)().createOrReplace({receipts:o});case 25:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"createSnapshot",value:function(){var e=this;this.snapshotTimer.isScheduled()&&this.snapshotTimer.cancel();var t=this.lastCheckpointIndex,n=this.cache.length;if(this.lastCheckpointIndex=n,__LOG__(2)`[offline-resume][msg-cache]: creating snapshot for offline ${t} to ${n}`,t!==n){var a=v.default.generateSnapshot();this.checkpointQueue.enqueue((0,o.default)(i.default.mark((function s(){return i.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e._addToMessageTable(t,n);case 2:return __LOG__(2)`[offline-resume][msg-cache]: creating snapshot: messages done for ${t} - ${n}`,s.next=5,(0,g.getStorage)().lock(["session-store","identity-store","prekey-store","senderkey-store"],(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.all([m.waSignalStore.bulkPutSession(a.sessionUpdate),m.waSignalStore.bulkPutIdentityKeyWithRowId(a.identityUpdate),m.waSignalStore.bulkPutSenderKey(a.senderKeyUpdate),m.waSignalStore.bulkRmovePreKey(a.preKeyRemove),m.waSignalStore.bulkRemoveSession(a.sessionRemove),m.waSignalStore.bulkRemoveIdentity(a.identityRemove)]);case 2:case"end":return e.stop()}}),e)}))));case 5:return __LOG__(2)`[offline-resume][msg-cache]: creating snapshot: signal done for ${t} - ${n}`,s.next=8,e._sendAggregateReceipts(t,n);case 8:__LOG__(2)`[offline-resume][msg-cache]: creating snapshot: sending receipt done for ${t} - ${n}`,p.default.onOfflineProgressUpdate();case 10:case"end":return s.stop()}}),s)}))))}}}]),e}());t.default=E},38847:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(63038)),s=a(n(87757)),u=a(n(48926)),l=a(n(34575)),c=a(n(93913)),d=a(n(59713)),f=n(19087),p=n(12035),h=a(n(34263)),_=n(93898),v=n(28367),m=n(75793),g=h.default.ACK,y=h.default.ACK_STRING,E=Object.freeze((i={},(0,d.default)(i,g.RECEIVED,y.DELIVERY),(0,d.default)(i,g.READ,y.READ),(0,d.default)(i,g.PLAYED,y.PLAYED),(0,d.default)(i,g.INACTIVE,y.INACTIVE),i)),S=1e3;function b(e){return(0,_.getTable)().bulkCreate(e)}function T(e){return(0,v.getStorage)().lock(["message-info"],function(){var t=(0,u.default)(s.default.mark((function t(n){var r,a,i,u;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,o.default)(n,1),a=r[0],t.next=3,a.bulkGet(e.map((function(e){return e[0].split(",")})));case 3:return i=t.sent,u=i.map((function(t,n){var r=(0,o.default)(e[n],2),a=r[0],i=r[1];if(!i)return null;if(t){var s=i.deviceDelivered;return t.deviceDelivered.forEach((function(e){return s.add(e)})),{delivery:w(t.delivery,i.delivery),read:w(t.read,i.read),played:w(t.played,i.played),msgKey:t.msgKey,receiverUserJid:t.receiverUserJid,deviceDelivered:Array.from(s),deviceNotDelivered:t.deviceNotDelivered.filter((function(e){return!s.has(e)}))}}var u=a.split(","),l=(0,o.default)(u,2),c=l[0],d=l[1];return{delivery:i.delivery,read:i.read,played:i.played,msgKey:c,receiverUserJid:d,deviceDelivered:Array.from(i.deviceDelivered),deviceNotDelivered:[]}})),t.abrupt("return",a.bulkCreateOrReplace(u));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())}function w(e,t){if(null!=e&&null!=t)return Math.min(e,t);var n=null!=e?e:t;return null!=n?n:void 0}var A=new(function(){function e(){var t=this;(0,l.default)(this,e),this.peerReadCache=[],this.otherReceiptCache=new Map,this.snapshotTimer=new p.ShiftTimer((function(){t.createSnapshot()})),this.checkpointQueue=new f.PromiseQueue}return(0,c.default)(e,[{key:"addOfflinePeerReadReceipt",value:function(e,t){this.peerReadCache.push({ts:e,msgKeys:t}),this.snapshotTimer.isScheduled()||(__LOG__(2)`[offline-resume][receipt-cache]: creating snapshot: schedule in ${S} ms`,this.snapshotTimer.onOrAfter(S))}},{key:"addOfflineReceipt",value:function(e,t,n,r){var a,i=this,o=(0,m.toUserWid)(n).toString(),s=null!==(a=n.device)&&void 0!==a?a:h.default.DEVICE.PRIMARY_DEVICE;r.forEach((function(n){var r=E[e];if(r){var a,u=`${n},${o}`,l=i.otherReceiptCache.get(u);if(l)r!==E[g.INACTIVE]&&(l[r]=w(l[r],t)),l.deviceDelivered.add(s);else i.otherReceiptCache.set(u,(a={},(0,d.default)(a,r,t),(0,d.default)(a,"deviceDelivered",new Set([s])),a))}else __LOG__(3)`[offline-resume][receipt-cache]: not supported ack type ${e}`})),this.snapshotTimer.isScheduled()||(__LOG__(2)`[offline-resume][receipt-cache]: creating snapshot: schedule in ${S} ms`,this.snapshotTimer.onOrAfter(S))}},{key:"createSnapshot",value:function(){this.snapshotTimer.isScheduled()&&this.snapshotTimer.cancel();var e=Array.from(this.otherReceiptCache),t=this.peerReadCache;__LOG__(2)`[offline-resume][receipt-cache]: creating snapshot for ${e.length} other, ${t.length} peer`,this.checkpointQueue.enqueue((0,u.default)(s.default.mark((function n(){return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.all([T(e),b(t)]);case 2:__LOG__(2)`[offline-resume][receipt-cache]: creating snapshot done`;case 3:case"end":return n.stop()}}),n)})))),this.otherReceiptCache=new Map,this.peerReadCache=[]}}]),e}());t.default=A},93069:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.storeOfflineMsgs=function(){return g.apply(this,arguments)};var a=r(n(87757)),i=r(n(63038)),o=r(n(48926)),s=r(n(22021)),u=n(67669),l=n(69841),c=n(24003),d=n(28367),f=n(8985),p=n(322),h=r(n(34263)),_=n(4976),v=n(81452),m=n(90388);function g(){return(g=(0,o.default)(a.default.mark((function e(t){var n,r,c,f,h,_,v,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=34;break}return e.prev=1,e.next=4,b(t);case 4:return n=e.sent,r=n.newMsgs,c=n.replaceMsgs,f=n.revokeMsgs,h=n.paymentMessages,_=n.chatsWithNewOfflineMsg,__LOG__(2)`[offline-resume][msg-cache] storeOfflineMsgs: newMsgs: ${r.length}, replaceMsgs: ${c.length}, revokeMsgs: ${f.length}, paymentMessages: ${h.length}`,e.next=13,y(r);case 13:return v=e.sent,e.next=16,(0,l.encryptMultipleMsgs)(r,!1);case 16:return g=e.sent,e.next=19,(0,p.getTable)().bulkCreateOrReplace(c);case 19:return e.next=21,(0,d.getStorage)().lock(["chat","message","fts-indexing-queue"],function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.default)(t,3),r=n[0],n[1],n[2],e.next=3,r.bulkCreateOrMerge(v);case 3:return e.next=5,(0,l.storeEncryptedMessage)(g,_,!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());case 21:return e.next=23,S(f);case 23:return e.next=25,(0,l.processPaymentMessages)(h);case 25:return e.next=27,(0,m.handleOfflineForMessageRange)(t);case 27:return e.next=29,(0,u.checkOrphanMutations)(t.map((function(e){return e.id.toString()})),_);case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(1),__LOG__(4,void 0,new Error,!0)`[offline-resume] Error: ${e.t0.name}, message: ${e.t0.message}, stack: ${e.t0.stack}`,SEND_LOGS("storeOfflineMsgs-error");case 34:case"end":return e.stop()}}),e,null,[[1,31]])})))).apply(this,arguments)}function y(){return E.apply(this,arguments)}function E(){return(E=(0,o.default)(a.default.mark((function e(t){var n,r,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,t.forEach((function(e){var t=e.id,r=t.remote.toString();if(r!==h.default.STATUS_WID&&(0,c.isUnreadTypeMsg)(e)){var a=n.get(r)||{unread:0,t:0,unreadMentionsOfMe:[]};if(!t.fromMe&&(a.unread+=1,(0,_.getABPropConfigValue)("group_catch_up")&&(0,v.hasMentionOfMe)(e))){var i={id:e.id.toString(),timestamp:e.t};a.unreadMentionsOfMe?a.unreadMentionsOfMe.push(i):a.unreadMentionsOfMe=[i]}e.t>a.t&&(a.t=Math.max(e.t,a.t)),n.set(r,a)}})),r=Array.from(n.keys()),e.next=5,(0,f.getTable)().bulkGet(r);case 5:return i=e.sent,o=i.map((function(e,t){var a=r[t],i=n.get(a),o=(null==i?void 0:i.unread)||0,s=Math.max(0,e?e.unreadCount:0),u=(null==i?void 0:i.t)||void 0;e&&null!=e.t&&(null==u||e.t>u)&&(u=e.t);var l=[];if((0,_.getABPropConfigValue)("group_catch_up")){var c,d,f=null!==(c=null==i?void 0:i.unreadMentionsOfMe)&&void 0!==c?c:[],p=null!==(d=null==e?void 0:e.unreadMentionsOfMe)&&void 0!==d?d:[];l=f.concat(p)}return{id:a,unreadCount:s+o,t:u,unreadMentionsOfMe:l}})),__LOG__(2)`[offline-resume][msg-cache]: storing chat updates: ${JSON.stringify(o)}`,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var t=[],n=[];return e.forEach((function(e){e.protocolMessageKey&&(t.push(String(e.protocolMessageKey)),n.push(String(e.id)))})),(0,l.processRevokeMsgs)(t,n)}function b(){return T.apply(this,arguments)}function T(){return(T=(0,o.default)(a.default.mark((function e(t){var n,r,i,o,s,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getTable)().bulkGet(t.map((function(e){return String(e.id)})),!1);case 2:return n=e.sent,r=[],i=[],o=[],s=[],u=new Set,l=new Map,t.forEach((function(e,t){var a=String(e.id),d=n[t];if(d)if(w(d)){var f=(0,c.convertToMessageRowType)(e);f.t=d.t,f.internalId=d.internalId,f.rowId=d.rowId,i.push(f)}else r.push(e.id.id);else{var p=l.get(a);p&&!w(p)?r.push(e.id.id):"revoke"===e.subtype?o.push(e):e.type===h.default.MSG_TYPE.PAYMENT&&"send"===e.subtype||"payment_action_request_declined"===e.subtype||"payment_transaction_request_cancelled"===e.subtype?(s.push(e),l.set(a,e),u.add(String(e.id.remote))):(l.set(a,e),u.add(String(e.id.remote)))}})),r.length>0&&__LOG__(2)`[offline-resume] classifyOfflineMsgs: skip for ${r.length} duplicate messages, with id ${r}`,e.abrupt("return",{newMsgs:Array.from(l.values()),chatsWithNewOfflineMsg:Array.from(u),replaceMsgs:i,revokeMsgs:o,paymentMessages:s});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return e.type===h.default.MSG_TYPE.UNKNOWN&&"fanout"===e.subtype||e.type===h.default.MSG_TYPE.CIPHERTEXT}},50909:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=g.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);var n=t.success;if(n&&n.refs&&Array.isArray(n.refs)&&6===n.refs.length){var a=n.refs,i=n.id;(0,l.castStanza)((0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"result",id:(0,o.CUSTOM_STRING)(i)})),(0,u.generateADVSecretKey)(),v=a,m||(m=new s.ShiftTimer((function(){if(!(0,f.isRegistered)()&&p.default.online&&d.default.supportsFeature(d.default.F.MD_BACKEND))if(v&&v.length){var e=6===v.length?6e4:2e4,t=v.shift();c.default.set({ref:t,refTTL:e}),_.default.state=_.STATE.UNPAIRED,m&&m.onOrAfter(e)}else m&&m.cancel(),m=null,_.default.state=_.STATE.UNPAIRED_IDLE;else m&&m.cancel(),m=null}))),m.forceRunNow()}else __LOG__(3)`handlePairDevice: wrong pair device result received from server`};var o=n(18712),s=n(12035),u=n(68691),l=n(4746),c=i(n(93743)),d=i(n(22021)),f=n(79583),p=i(n(67890)),h=i(n(98112)),_=a(n(7860)),v=[],m=null,g=new h.default("pairDeviceParser",(function(e){e.assertTag("iq"),e.assertFromServer();var t=[];return e.child("pair-device").forEachChild((function(e){e.assertTag("ref"),t.push(e.contentString())})),{refs:t,id:e.attrString("id")}}))},38754:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return R.apply(this,arguments)};var o=i(n(87757)),s=i(n(48926)),u=n(18712),l=n(53939),c=n(46042),d=n(92827),f=n(90066),p=i(n(41143)),h=n(91157),_=n(68691),v=n(4746),m=n(28297),g=i(n(93743)),y=n(48935),E=a(n(38831)),S=n(71701),b=i(n(44338)),T=i(n(8643)),w=n(79583),A=i(n(98112)),C=n(1018),O=n(47065),M=n(75793),I=i(n(7860)),k=!1,P=new A.default("pairSuccessParser",(function(e){var t;e.assertTag("iq"),e.assertFromServer();var n=e.attrString("id"),r=e.child("pair-success"),a=null===(t=r.maybeChild("platform"))||void 0===t?void 0:t.maybeAttrString("name"),i=r.child("device"),o=r.child("device-identity").contentBytes(),s=r.maybeChild("biz"),u=s?s.attrString("name"):"";return{wid:i.attrDeviceWid("jid"),id:n,deviceIdentityBytes:o,businessName:u,platform:a}}));function R(){return(R=(0,s.default)(o.default.mark((function e(t){var n,a,i,s,A,R,D,N,L,x,U,F,G,B,j,Y,K,W,V,H,$;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k&&!(0,w.isRegistered)()){e.next=2;break}return e.abrupt("return");case 2:if(k=!0,n=(0,f.unixTime)(),!(a=P.parse(t)).error){e.next=12;break}return __LOG__(2)`error while parsing: ${t.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${a.error.toString()}`,k=!1,e.abrupt("return",r.reject(a.error));case 12:return e.prev=12,(0,m.resetCompanionReg)(),(0,S.setHistorySyncEarliestDate)(n),i=a.success,s=i.id,A=i.wid,R=i.deviceIdentityBytes,D=i.platform,g.default.blockStoreAdds=!1,D&&(g.default.platform=D),N=(0,l.decodeProto)(h.ADVSignedDeviceIdentityHMACSpec,R),L=N.details,x=N.hmac,(0,p.default)(null!=L&&null!=x,"ADVSignedDeviceIdentityHMAC should not have empty details or hmac"),U=(0,_.getADVSecretKey)(),e.next=26,new b.default(U).sign(L);case 26:if(F=e.sent,G=(0,d.encodeB64)(F),B=(0,d.encodeB64)(x),G===B){e.next=34;break}return(0,v.castStanza)((0,u.wap)("iq",{to:u.S_WHATSAPP_NET,type:"error",id:(0,u.CUSTOM_STRING)(s)},(0,u.wap)("error",{code:"401",text:"not-authorized"}))),(0,m.logoutAfterValidationFail)(),k=!1,e.abrupt("return");case 34:return j=(0,l.decodeProto)(h.ADVSignedDeviceIdentitySpec,L),Y=j.accountSignatureKey,(0,p.default)(null!=Y,"accountSignatreKey should not be null"),K=j.accountSignature,(0,p.default)(null!=K,"accountSignature should not be null"),e.next=41,C.waSignalStore.getRegistrationInfo();case 41:if(W=e.sent,(0,p.default)(null!=W,"Empty regInfo"),E.initDeviceLinkEvent(Y,W.identityKeyPair.pubKey,n),E.setDeviceLinkPairStage(T.default.MD_LINK_DEVICE_COMPANION_STAGE.PAIR_SUCCESS_RECEIVED),(0,_.verifyDeviceIdentityAccountSignature)(j,W.identityKeyPair.pubKey)){e.next=52;break}return(0,v.castStanza)((0,u.wap)("iq",{to:u.S_WHATSAPP_NET,type:"error",id:(0,u.CUSTOM_STRING)(s)},(0,u.wap)("error",{code:"401",text:"not-authorized"}))),E.commitDeviceLinkEvent(401),(0,m.logoutAfterValidationFail)(),k=!1,e.abrupt("return");case 52:return j.deviceSignature=(0,_.generateDeviceSignature)(j,W.identityKeyPair,Y),e.next=55,C.waSignalStore.putIdentity((0,O.createSignalAddress)((0,M.toUserWid)(A)).toString(),(0,O.bufferToStr)((0,y.toSignalCurvePubKey)(Y)));case 55:return e.next=57,(0,_.setADVSignedIdentity)(j);case 57:V=(0,l.decodeProto)(h.ADVDeviceIdentitySpec,j.details),H=V.keyIndex,(0,p.default)(null!=H,"keyIndex should not be null"),j.accountSignatureKey=void 0,$=(0,c.encodeProto)(h.ADVSignedDeviceIdentitySpec,j).readByteArray(),(0,v.castStanza)((0,u.wap)("iq",{to:u.S_WHATSAPP_NET,type:"result",id:(0,u.CUSTOM_STRING)(s)},(0,u.wap)("pair-device-sign",null,(0,u.wap)("device-identity",{"key-index":(0,u.INT)(H)},$)))),E.setDeviceLinkPairStage(T.default.MD_LINK_DEVICE_COMPANION_STAGE.PAIR_DEVICE_SIGN_SENT),(0,S.setMdOptedIn)(!0),(0,S.setMe)(A),(0,w.getInitialHistorySyncComplete)()||(0,m.startInitialHistorySyncTimeout)(),k=!1,e.next=75;break;case 70:e.prev=70,e.t0=e.catch(12),__LOG__(4,!0,new Error,!0)`error in handlePairSuccess, ${e.t0}`,SEND_LOGS("error in handlePairSuccess"),(0,E.commitDeviceLinkEvent)(-1),I.default.logout();case 75:case"end":return e.stop()}}),e,null,[[12,70]])})))).apply(this,arguments)}},82929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAmount1000AndCurrency=function(e){return function(e){if(e.hasChild("amount"))return function(e){e.assertTag("money");var t=parseFloat(e.attrString("value")),r=e.attrString("currency"),a=e.maybeAttrInt("offset");return{currency:r,amount1000:t*n/(null!=a&&0!==a?a:n)}}(e.child("amount").child("money"));if(e.hasAttr("amount"))return{amount1000:parseFloat(e.attrString("amount"))*n,currency:e.attrString("currency")};throw __LOG__(3)`Amount missing in pay or transaction node`,new Error("Amount missing in pay or transaction node")}(e)};var n=1e3},93293:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return g.apply(this,arguments)},t.updateReceivedPaymentInfo=y,t.parseNotificationPaymentInfo=S,t.processOrphanPaymentNotifications=function(){return b.apply(this,arguments)},t.processAllOrphanPaymentNotifications=function(){return T.apply(this,arguments)};var i=a(n(87757)),o=a(n(81109)),s=a(n(48926)),u=a(n(91080)),l=n(26370),c=n(69449),d=a(n(16551)),f=a(n(66312)),p=a(n(5315)),h=n(41203),_=a(n(87790)),v=n(89305),m=n(49509);function g(){return(g=(0,s.default)(i.default.mark((function e(t){var n,a,s,c,d,p;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=_.default.parse(t)).error){e.next=6;break}return __LOG__(2)`${n.error.toString()} parsing ${t.toString()}`,e.abrupt("return",r.reject(n.error));case 6:if(n.success){e.next=8;break}return e.abrupt("return",r.resolve());case 8:if(a=n.success,s=(0,u.default)(a.msgKey,"info.msgKey"),!(c=f.default.get(s))){e.next=15;break}e.t0=(0,v.unproxy)(c),e.next=18;break;case 15:return e.next=17,(0,l.getMsgByMsgKey)(s);case 17:e.t0=e.sent;case 18:if(d=e.t0){e.next=23;break}return __LOG__(3)`handlePaymentNotification: no msg found for id ${s.toString()}`,p=(0,o.default)((0,o.default)({},a),{},{msgKey:s.toString()}),e.abrupt("return",(0,h.getTable)().createOrReplace(p));case 23:return e.abrupt("return",y(d,a));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return E.apply(this,arguments)}function E(){return(E=(0,s.default)(i.default.mark((function e(t,n){var r,a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],S(t,n),r.push(t.id.toString()),a=[t instanceof d.default?t.toJSON():t],null==t.paymentRequestMessageKey){e.next=15;break}if(!(o=f.default.get(t.paymentRequestMessageKey))){e.next=10;break}e.t0=(0,v.unproxy)(o),e.next=13;break;case 10:return e.next=12,(0,l.getMsgByMsgKey)(t.paymentRequestMessageKey||"");case 12:e.t0=e.sent;case 13:(s=e.t0)&&(s.paymentStatus=t.paymentStatus,s.paymentTxnStatus=(0,m.determinePaymentRequestFulfilledStatus)(t.paymentTxnStatus),a.push(s instanceof d.default?s.toJSON():s));case 15:return(0,h.getTable)().bulkRemove(r).catch((function(){__LOG__(4,void 0,new Error)`getOrphanPaymentNotificationTable bulkremove of ${r} failed. {e}`})),e.abrupt("return",(0,c.storeMessages)(a));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){t&&(null!=t.status&&(e.paymentStatus=(0,m.getPaymentWebStatus)(t.status,t.type),e.paymentTxnStatus=(0,m.getPaymentTxnWebStatus)(t.status)),e.paymentCurrency=t.currency||"",e.paymentAmount1000=(0,u.default)(t.amount1000,"mdPaymentInfo.amount1000"),e.paymentMessageReceiverJid=t.receiver,e.paymentTransactionTimestamp=(0,u.default)(t.ts,"mdPaymentInfo.ts"))}function b(){return(b=(0,s.default)(i.default.mark((function e(t){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.id.toString()})),e.next=3,(0,h.getTable)().bulkGet(n);case 3:r=e.sent,a=new Map,t.forEach((function(e){a.set(e.id.toString(),e)})),r.forEach((function(e){if(e){var t=a.get(e.msgKey);if(!t)return;y(t,{receiver:e.receiver,currency:e.currency,amount1000:e.amount1000,type:e.type,status:e.status,ts:e.ts,msgKey:p.default.fromString(e.msgKey)})}}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,s.default)(i.default.mark((function e(){var t,n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getTable)().all();case 2:if(t=e.sent,n=new Map,r=[],t.forEach((function(e){var t=f.default.get(e.msgKey);t?y(t,{receiver:e.receiver,currency:e.currency,amount1000:e.amount1000,type:e.type,status:e.status,ts:e.ts,msgKey:p.default.fromString(e.msgKey)}):(n.set(e.msgKey,e),r.push(e.msgKey))})),!(r.length>0)){e.next=12;break}return e.next=9,(0,l.getMsgsByMsgKey)(r);case 9:return(a=e.sent).forEach((function(e){var t=n.get(e.id.toString());t&&(e.paymentTxnStatus=(0,m.getPaymentTxnWebStatus)(t.status),e.paymentCurrency=t.currency||"",e.paymentAmount1000=(0,u.default)(t.amount1000,"notification.amount1000"),e.paymentMessageReceiverJid=t.receiver,e.paymentTransactionTimestamp=(0,u.default)(t.ts,"notification.ts"))})),e.abrupt("return",(0,c.storeMessages)(a));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},22766:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(93293)).default;t.default=a},87790:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isNoviTransaction=l,t.parseTransactionNode=c,t.default=void 0;var a=n(82929),i=n(71701),o=r(n(5315)),s=r(n(98112)),u=n(49509);function l(e){return!(!e||!e.hasAttr("service")||"NOVI"!==e.attrString("service").toUpperCase())}function c(e){if(l(e))return __LOG__(2)`Payment notification from Novi not supported`,null;var t=void 0,n=void 0,r=(0,i.getMeUser)(),s=e.attrWid("sender"),c=e.attrWid("receiver"),d=r.equals(s);e.hasAttr("group")?(t=e.attrWid("group"),n=e.attrWid("sender")):t=d?c:s;var f=new o.default({id:e.attrString("message-id"),fromMe:d,remote:t,participant:n}),p=(0,u.getPaymentTransactionType)(e.attrString("transaction-type"),f.fromMe),h=(0,a.getAmount1000AndCurrency)(e),_=h.amount1000;return{receiver:c,currency:h.currency,amount1000:_,status:(0,u.getNotificationTransactionStatus)(p,e.attrString("status")),ts:e.attrInt("ts"),type:p,msgKey:f}}var d=new s.default("paymentNotificationParser",(function(e){return e.hasChild("transaction")?c(e.child("transaction")):(__LOG__(2)`No transaction node in the payment notification`,null)}));t.default=d},49509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentWebStatus=function(e,t){if(null==e)return r.PaymentInfoStatus.UNKNOWN_STATUS;switch(e){case i.SEND_PAY_INIT:case i.SEND_PAY_PENDING:case i.RECV_PAY_INIT:case i.RECV_PAY_PENDING:case i.RECV_PAY_RETRY_ON_FAILURE:case i.REQUEST_PAY_INIT:return r.PaymentInfoStatus.PROCESSING;case i.SEND_PAY_PENDING_RECEIVER:case i.SEND_PAY_FAILURE_RECEIVER:return r.PaymentInfoStatus.SENT;case i.REQUEST_PAY_SUCCESS:return t===a.TYPE_P2P_REQ_SENT?r.PaymentInfoStatus.WAITING_FOR_PAYER:r.PaymentInfoStatus.WAITING;case i.RECV_PAY_PENDING_SETUP:return r.PaymentInfoStatus.NEED_TO_ACCEPT;case i.SEND_PAY_SUCCESS:case i.RECV_PAY_SUCCESS:case i.REQUEST_PAY_FULFILLED:return r.PaymentInfoStatus.COMPLETE;case i.SEND_PAY_FAILURE:case i.SEND_PAY_FAILURE_RISK:case i.SEND_PAY_PENDING_REFUND:case i.SEND_PAY_REFUND_PENDING:case i.SEND_PAY_REFUND_FAILED:case i.SEND_PAY_REFUND_FAILED_PROCESSING:case i.RECV_PAY_FAILURE:case i.REQUEST_PAY_FAILED:case i.REQUEST_PAY_FAILED_RISK:return r.PaymentInfoStatus.COULD_NOT_COMPLETE;case i.SEND_PAY_REFUNDED:return r.PaymentInfoStatus.REFUNDED;case i.RECV_PAY_EXPIRED:case i.REQUEST_PAY_EXPIRED:case i.SEND_PAY_AUTH_CANCELED:case i.SEND_PAY_AUTH_CANCEL_FAILED:case i.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return r.PaymentInfoStatus.EXPIRED;case i.REQUEST_PAY_REJECTED:return r.PaymentInfoStatus.REJECTED;case i.REQUEST_PAY_CANCELLED:return r.PaymentInfoStatus.CANCELLED;case i.STATUS_UNSET:case i.REQUEST_PAY_CANCELLING:default:return r.PaymentInfoStatus.UNKNOWN_STATUS}},t.getNotificationTransactionStatus=function(e,t){if(!t)return i.STATUS_UNSET;var n=t.toUpperCase();switch(e){case a.TYPE_P2P_SENT:case a.TYPE_P2M_SENT:case a.TYPE_DEPOSIT:switch(n){case s.PENDING_RECEIVER_SETUP:return i.SEND_PAY_PENDING_RECEIVER;case s.FAILED_DA:return i.SEND_PAY_PENDING;case s.REFUND_FAILED_DA:return i.SEND_PAY_REFUND_PENDING;case s.FAILED_RISK:return i.SEND_PAY_FAILURE_RISK;case s.INITIAL:return i.SEND_PAY_INIT;case s.SUCCESS:case s.COMPLETED:return i.SEND_PAY_SUCCESS;case s.FAILURE:case s.FAILED:return i.SEND_PAY_FAILURE;case s.REFUNDED:return i.SEND_PAY_REFUNDED;case s.REFUND_FAILED:return i.SEND_PAY_REFUND_FAILED;case s.FAILED_RECEIVER_PROCESSING:return i.SEND_PAY_FAILURE_RECEIVER;case s.REFUND_FAILED_PROCESSING:return i.SEND_PAY_REFUND_FAILED_PROCESSING;case s.FAILED_DA_FINAL:return i.SEND_PAY_PENDING_REFUND;case s.AUTH_CANCEL_FAILED_PROCESSING:return i.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING;case s.AUTH_CANCEL_FAILED:return i.SEND_PAY_AUTH_CANCEL_FAILED;case s.AUTH_CANCELED:return i.SEND_PAY_AUTH_CANCELED;case s.EXPIRED:return i.SEND_PAY_EXPIRED;case s.IN_REVIEW:return i.SEND_PAY_IN_REVIEW;case s.PENDING:return i.SEND_PAY_PENDING_PROCESSING;case s.CANCELED:return i.SEND_PAY_USER_CANCELED}break;case a.TYPE_P2P_RCVD:case a.TYPE_P2M_RCVD:switch(n){case s.PENDING_SETUP:return i.RECV_PAY_PENDING_SETUP;case s.FAILED_DA:return i.RECV_PAY_PENDING;case s.FAILED_PROCESSING:return i.RECV_PAY_RETRY_ON_FAILURE;case s.SUCCESS:case s.COMPLETED:return i.RECV_PAY_SUCCESS;case s.FAILURE:case s.FAILED:return i.RECV_PAY_FAILURE;case s.EXPIRED:return i.RECV_PAY_EXPIRED;case s.FAILED_RISK:return i.RECV_PAY_FAILURE_RISK;case s.WITHDRAWAL_PROCESSING:return i.RECV_PAY_WITHDRAWAL_PROCESSING;case s.WITHDRAWAL_FAILURE:return i.RECV_PAY_WITHDRAWAL_FAILURE;case s.WITHDRAWAL_PERMANENT_FAILED:return i.RECV_PAY_WITHDRAWAL_PERMANENT_FAILED;case s.CANCELED:return i.RECV_PAY_SENDER_CANCELED}break;case a.TYPE_P2P_REQ_SENT:case a.TYPE_P2P_REQ_RCVD:switch(n){case s.COLLECT_SUCCESS:return i.REQUEST_PAY_SUCCESS;case s.COLLECT_FAILED:return i.REQUEST_PAY_FAILED;case s.COLLECT_FAILED_RISK:return i.REQUEST_PAY_FAILED_RISK;case s.COLLECT_REJECTED:return i.REQUEST_PAY_REJECTED;case s.COLLECT_EXPIRED:return i.REQUEST_PAY_EXPIRED;case s.COLLECT_CANCELED:return i.REQUEST_PAY_CANCELLED}break;case a.TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:switch(n){case s.COLLECT_SUCCESS:return i.REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS;case s.AUTH_SUCCESS:return i.SEND_PAY_AUTH_SUCCESS}break;case a.TYPE_REFUND:switch(n){case s.SUCCESS:case s.COMPLETED:return i.RECV_PAY_SUCCESS}break;case a.TYPE_WITHDRAWAL:switch(n){case s.PENDING:return i.WITHDRAWAL_PENDING;case s.IN_REVIEW:return i.WITHDRAWAL_IN_REVIEW;case s.SUCCESS:case s.COMPLETED:return i.WITHDRAWAL_SUCCESS;case s.FAILED:case s.DECLINED:return i.WITHDRAWAL_FAILED;case s.CANCELED:return i.WITHDRAWAL_USER_CANCELED;case s.EXPIRED:return i.WITHDRAWAL_EXPIRED;case s.WITHDRAWAL_ACTIVE:return i.WITHDRAWAL_ACTIVE}break;default:return i.STATUS_UNSET}return i.STATUS_UNSET},t.getPaymentTxnWebStatus=function(e){if(null==e)return r.PaymentInfoTxnStatus.UNKNOWN;switch(e){case i.RECV_PAY_EXPIRED:case i.SEND_PAY_EXPIRED:return r.PaymentInfoTxnStatus.EXPIRED_TXN;case i.RECV_PAY_FAILURE:case i.SEND_PAY_FAILURE:return r.PaymentInfoTxnStatus.FAILED;case i.RECV_PAY_INIT:case i.SEND_PAY_INIT:return r.PaymentInfoTxnStatus.INIT;case i.RECV_PAY_PENDING_SETUP:return r.PaymentInfoTxnStatus.PENDING_SETUP;case i.RECV_PAY_PENDING:case i.SEND_PAY_PENDING:return r.PaymentInfoTxnStatus.FAILED_DA;case i.RECV_PAY_RETRY_ON_FAILURE:return r.PaymentInfoTxnStatus.FAILED_PROCESSING;case i.RECV_PAY_SUCCESS:case i.SEND_PAY_SUCCESS:case i.REQUEST_PAY_FULFILLED:return r.PaymentInfoTxnStatus.SUCCESS;case i.REQUEST_PAY_CANCELLED:return r.PaymentInfoTxnStatus.COLLECT_CANCELED;case i.REQUEST_PAY_CANCELLING:return r.PaymentInfoTxnStatus.COLLECT_CANCELLING;case i.REQUEST_PAY_EXPIRED:return r.PaymentInfoTxnStatus.COLLECT_EXPIRED;case i.REQUEST_PAY_FAILED_RISK:return r.PaymentInfoTxnStatus.COLLECT_FAILED_RISK;case i.REQUEST_PAY_FAILED:return r.PaymentInfoTxnStatus.COLLECT_FAILED;case i.REQUEST_PAY_INIT:return r.PaymentInfoTxnStatus.COLLECT_INIT;case i.REQUEST_PAY_REJECTED:return r.PaymentInfoTxnStatus.COLLECT_REJECTED;case i.REQUEST_PAY_SUCCESS:return r.PaymentInfoTxnStatus.COLLECT_SUCCESS;case i.SEND_PAY_AUTH_CANCELED:return r.PaymentInfoTxnStatus.AUTH_CANCELED;case i.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return r.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED_PROCESSING;case i.SEND_PAY_AUTH_CANCEL_FAILED:return r.PaymentInfoTxnStatus.AUTH_CANCEL_FAILED;case i.SEND_PAY_FAILURE_RECEIVER:return r.PaymentInfoTxnStatus.FAILED_RECEIVER_PROCESSING;case i.SEND_PAY_FAILURE_RISK:case i.RECV_PAY_FAILURE_RISK:return r.PaymentInfoTxnStatus.FAILED_RISK;case i.SEND_PAY_PENDING_RECEIVER:return r.PaymentInfoTxnStatus.PENDING_RECEIVER_SETUP;case i.SEND_PAY_PENDING_REFUND:return r.PaymentInfoTxnStatus.FAILED_DA_FINAL;case i.SEND_PAY_REFUNDED:return r.PaymentInfoTxnStatus.REFUNDED_TXN;case i.SEND_PAY_REFUND_FAILED_PROCESSING:return r.PaymentInfoTxnStatus.REFUND_FAILED_PROCESSING;case i.SEND_PAY_REFUND_FAILED:return r.PaymentInfoTxnStatus.REFUND_FAILED;case i.SEND_PAY_REFUND_PENDING:return r.PaymentInfoTxnStatus.REFUND_FAILED_DA;case i.SEND_PAY_IN_REVIEW:return r.PaymentInfoTxnStatus.IN_REVIEW;case i.STATUS_UNSET:default:return r.PaymentInfoTxnStatus.UNKNOWN}},t.getPaymentTransactionType=function(e,t){if(e){var n=e.toLowerCase();switch(n){case o.TYPE_P2P:return t?a.TYPE_P2P_SENT:a.TYPE_P2P_RCVD;case o.TYPE_P2M:return t?a.TYPE_P2M_SENT:a.TYPE_P2M_RCVD;case o.TYPE_P2M_PAYOUT:return a.TYPE_P2M_PAYOUT;case o.TYPE_DEPOSIT:return a.TYPE_DEPOSIT;case o.TYPE_REFUND:return a.TYPE_REFUND;case o.TYPE_WITHDRAWAL:return a.TYPE_WITHDRAWAL;default:__LOG__(2)`parsePaymentTransactionType payment transaction string=${n}`}}return t?a.TYPE_P2P_SENT:a.TYPE_P2P_RCVD},t.determinePaymentRequestFulfilledStatus=function(e){if(function(e){return e===r.PaymentInfoTxnStatus.COMPLETED||e===r.PaymentInfoTxnStatus.SUCCESS}(e))return e;return r.PaymentInfoTxnStatus.COLLECT_INIT},t.PaymentTransactionStatusServerString=t.PaymentTransactionTypeServerString=t.NotificationTransactionStatus=t.PaymentTransactionType=void 0;var r=n(76007),a=n(54302)({TYPE_UNSET:0,TYPE_P2P_SENT:1,TYPE_P2P_RCVD:2,TYPE_P2P_GRP:3,TYPE_P2P_NO_INFO:4,TYPE_FUTURE:5,TYPE_P2P_REQ_SENT:10,TYPE_P2P_REQ_RCVD:20,TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:21,TYPE_P2P_REQ_GRP:30,TYPE_P2M_SENT:100,TYPE_P2M_RCVD:200,TYPE_P2M_PAYOUT:300,TYPE_MISSING_DETAILS:400,TYPE_DEPOSIT:500,TYPE_REFUND:600,TYPE_WITHDRAWAL:700});t.PaymentTransactionType=a;var i=n(54302)({STATUS_UNSET:0,REQUEST_PAY_INIT:11,REQUEST_PAY_SUCCESS:12,REQUEST_PAY_FAILED:13,REQUEST_PAY_FAILED_RISK:14,REQUEST_PAY_REJECTED:15,REQUEST_PAY_EXPIRED:16,REQUEST_PAY_FULFILLED:17,REQUEST_PAY_CANCELLED:18,REQUEST_PAY_CANCELLING:19,REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS:20,RECV_PAY_INIT:101,RECV_PAY_PENDING_SETUP:102,RECV_PAY_PENDING:103,RECV_PAY_RETRY_ON_FAILURE:104,RECV_PAY_FAILURE:105,RECV_PAY_SUCCESS:106,RECV_PAY_EXPIRED:107,RECV_PAY_FAILURE_RISK:108,RECV_PAY_WITHDRAWAL_PROCESSING:109,RECV_PAY_WITHDRAWAL_FAILURE:110,RECV_PAY_WITHDRAWAL_PERMANENT_FAILED:111,RECV_PAY_SENDER_CANCELED:112,SEND_PAY_INIT:401,SEND_PAY_PENDING_RECEIVER:402,SEND_PAY_PENDING:403,SEND_PAY_REFUND_PENDING:404,SEND_PAY_SUCCESS:405,SEND_PAY_FAILURE:406,SEND_PAY_FAILURE_RISK:407,SEND_PAY_REFUNDED:408,SEND_PAY_REFUND_FAILED:409,SEND_PAY_FAILURE_RECEIVER:410,SEND_PAY_REFUND_FAILED_PROCESSING:411,SEND_PAY_PENDING_REFUND:412,SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:413,SEND_PAY_AUTH_CANCEL_FAILED:414,SEND_PAY_AUTH_CANCELED:415,SEND_PAY_EXPIRED:416,SEND_PAY_AUTH_SUCCESS:417,SEND_PAY_AUTH_SUCCESS_CANCELING:418,SEND_PAY_IN_REVIEW:419,SEND_PAY_PENDING_PROCESSING:420,SEND_PAY_USER_CANCELED:421,WITHDRAWAL_INIT:601,WITHDRAWAL_PENDING:602,WITHDRAWAL_IN_REVIEW:603,WITHDRAWAL_SUCCESS:604,WITHDRAWAL_FAILED:605,WITHDRAWAL_USER_CANCELED:606,WITHDRAWAL_EXPIRED:607,WITHDRAWAL_ACTIVE:608});t.NotificationTransactionStatus=i;var o={TYPE_P2P:"p2p",TYPE_P2M:"p2m",TYPE_P2M_PAYOUT:"payout",TYPE_WITHDRAWAL:"withdrawal",TYPE_DEPOSIT:"deposit",TYPE_REFUND:"refund"};t.PaymentTransactionTypeServerString=o;var s={PENDING_RECEIVER_SETUP:"PENDING_RECEIVER_SETUP",PENDING_SETUP:"PENDING_SETUP",PENDING:"PENDING",INITIAL:"INITIAL",SUCCESS:"SUCCESS",COMPLETED:"COMPLETED",IN_REVIEW:"IN_REVIEW",FAILED:"FAILED",DECLINED:"DECLINED",FAILURE:"FAILURE",FAILED_RISK:"FAILED_RISK",FAILED_PROCESSING:"FAILED_PROCESSING",FAILED_RECEIVER_PROCESSING:"FAILED_RECEIVER_PROCESSING",REFUND_FAILED_PROCESSING:"REFUND_FAILED_PROCESSING",REFUNDED:"REFUNDED",REFUND_FAILED:"REFUND_FAILED",EXPIRED:"EXPIRED",CANCELED:"CANCELLED",AUTH_SUCCESS:"AUTH_SUCCESS",AUTH_CANCELED:"AUTH_CANCELED",AUTH_CANCEL_FAILED_PROCESSING:"AUTH_CANCEL_FAILED_PROCESSING",AUTH_CANCEL_FAILED:"AUTH_CANCEL_FAILED",COLLECT_SUCCESS:"COLLECT_SUCCESS",COLLECT_FAILED:"COLLECT_FAILED",COLLECT_REJECTED:"COLLECT_REJECTED",COLLECT_EXPIRED:"COLLECT_EXPIRED",COLLECT_CANCELED:"COLLECT_CANCELED",FAILED_DA:"FAILED_DA",FAILED_DA_FINAL:"FAILED_DA_FINAL",REFUND_FAILED_DA:"REFUND_FAILED_DA",COLLECT_FAILED_RISK:"COLLECT_FAILED_RISK",WITHDRAWAL_PROCESSING:"WITHDRAWAL_PROCESSING",WITHDRAWAL_FAILURE:"WITHDRAWAL_FAILURE",WITHDRAWAL_PERMANENT_FAILED:"WITHDRAWAL_PERMANENT_FAILED",WITHDRAWAL_ACTIVE:"WITHDRAWAL_ACTIVE"};t.PaymentTransactionStatusServerString=s},88762:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=c.parse(e);if(n.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,r.reject(n.error);var a=n.success,o=(0,i.wap)("ack",{to:i.S_WHATSAPP_NET,id:(0,i.CUSTOM_STRING)(a.stanzaId),class:"notification"});return l.has(t)?o:(l.add(t),s.waSignalStore.setServerHasPreKeys(!1),(0,u.uploadPreKeys)().then((function(){return o})).finally((function(){l.delete(t)})))};var i=n(18712),o=a(n(98112)),s=n(1018),u=n(11535),l=new Set,c=new o.default("lowKeyParser",(function(e){return e.assertTag("notification"),e.assertAttr("type","encrypt"),e.assertFromServer(),{stanzaId:e.attrString("id"),numRemaining:e.child("count").attrInt("value")}}))},27428:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=o.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);return(0,i.default)(t.success)};var i=a(n(6333)),o=new(a(n(98112)).default)("incomingPresenceParser",(function(e){e.assertTag("presence");var t=e.attrEnumOrDefault("type",{available:"available",unavailable:"unavailable",unsubscribe:"unsubscribe"},"available"),n="deny"===e.maybeAttrString("last")||void 0,r=void 0;return"unavailable"===t&&(e.hasAttr("last")?["deny","none","error"].includes(e.attrString("last"))||(r=e.attrTime("last")):r=Date.now()),{id:e.attrChatWid("from"),type:t,t:r,deny:n}}))},65972:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=p.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);var n=t.success,a=r.resolve();if(n.jid){var l=n.jid;switch(n.type){case"delete":case"set":var h="delete"===n.type?c.PROFILE_PIC_COMMAND.REMOVE:c.PROFILE_PIC_COMMAND.SET;a=(0,d.changeProfilePicThumb)(l,h).then((function(){if(!l.isGroup())return r.resolve();var e=(0,s.genGroupPicChangeNotificationMsg)(n.jid,h,n.ts,n.author||(0,o.getMeUser)(),n.stanzaId);return(0,u.handleSingleMsgMD)(n.jid,e)}));break;case"request":break;default:__LOG__(3)`Invalid type received`}}return a.then((function(){return(0,i.wap)("ack",{id:(0,i.CUSTOM_STRING)(n.stanzaId),to:(0,f.JID)(n.from),class:"notification",type:"picture"})}))};var i=n(18712),o=n(71701),s=n(38419),u=n(39888),l=a(n(98112)),c=n(56395),d=n(3131),f=n(19325),p=new l.default("incomingProfilePicNotificationParser",(function(e){var t,n;if(e.assertTag("notification"),e.hasChild("delete"))t="delete",n=e.child("delete");else if(e.hasChild("set"))t="set",n=e.child("set");else{if(!e.hasChild("request"))return e.throw("Expected child type to be one of: set, delete, request");t="request",(n=e.child("request")).assertAttrIsMe("jid")}var r=e.attrString("id");return n.hasAttr("jid")?{type:t,from:e.attrChatWid("from"),jid:n.attrChatWid("jid"),author:n.hasAttr("author")?n.attrUserWid("author"):null,ts:e.attrTime("t"),rawTs:e.attrString("t"),stanzaId:r,picId:"set"===t?n.attrInt("id",1):0}:{from:e.attrUserWid("from"),jid:null,type:t,hash:n.attrString("hash"),stanzaId:r}}))},28734:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleMessageRetryRequest=function(e){var t=f.default.parse(e);if(t.error)return __LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(new Error(t.error));var n=t.success,a=n.from,u=n.participant,l=n.recipient,c=n.retryCount,d=n.stanzaId;if(null==d)return __LOG__(3)`Received null stanzaID when handling message retry request`,r.reject(new Error("Received null stanzaID when handling message retry request"));var v=(0,s.wap)("ack",{id:(0,s.CUSTOM_STRING)(d),to:(0,_.JID)(a),participant:u?(0,_.DEVICE_JID)(u):s.DROP_ATTR,class:"receipt",type:"retry"}),g=T(a,l);return g?(0,m.onMsgProcessingThread)(String(g),!1,(0,o.default)(i.default.mark((function e(){var t,r,o,s,d,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n);case 2:if(null!=(t=e.sent)){e.next=5;break}return e.abrupt("return",v);case 5:return r=t.originalMsgId,o=t.chat,s=t.requester,d=t.identityRowId,e.prev=6,e.next=9,(0,p.getMsgIfAuthorized)(r,o,s,c,d);case 9:if(f=e.sent){e.next=13;break}return __LOG__(3)`handleMessageRetryRequest msg retry not authorized`,e.abrupt("return",v);case 13:return e.next=15,(0,h.sendRetry)(a,u,l,f,c);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),__LOG__(3)`handleMessageRetryRequest error: ${e.t0}`;case 20:return e.abrupt("return",v);case 21:case"end":return e.stop()}}),e,null,[[6,17]])})))):r.resolve(v)},t.handleVoipRetryRequest=function(e){return S(e).then((function(e){return null!=e}))};var i=a(n(87757)),o=a(n(48926)),s=n(18712),u=a(n(34263)),l=n(38812),c=n(71701),d=a(n(8643)),f=a(n(96376)),p=n(71317),h=n(17259),_=n(19325),v=n(75793),m=n(8160),g=n(7991),y=a(n(46005)),E=n(47065);function S(){return b.apply(this,arguments)}function b(){return(b=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s,c,f,h,_,v;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.originalMsgId,r=t.from,a=t.participant,o=t.recipient,s=t.retryCount,c=t.offline,!(s>=u.default.RETRY.MAX_RETRY)){e.next=4;break}return __LOG__(2)`handleRetryRequest refusing retry attempt #${s}`,e.abrupt("return");case 4:if(f=T(r,o)){e.next=8;break}return __LOG__(3)`handleRetryRequest: no chat found for incoming retry request.`,e.abrupt("return");case 8:if(h=f.isUser()?r:a){e.next=12;break}return __LOG__(3)`handleRetryRequest: no requester found for incoming retry request.`,e.abrupt("return");case 12:return _=h.device||0,e.prev=13,e.next=16,(0,l.hasDevice)(h,_);case 16:if(e.sent){e.next=21;break}return __LOG__(3)`handleRetryRequest: no device ${_} found for ${h.user} for incoming retry request .`,new d.default.MdRetryFromUnknownDevice({offline:c,senderType:_===u.default.DEVICE.PRIMARY_DEVICE?d.default.DEVICE_TYPE.PRIMARY:d.default.DEVICE_TYPE.COMPANION}).commit(),e.abrupt("return");case 21:return e.next=23,(0,p.updateLocalSession)(f,t);case 23:return e.next=25,(0,g.ensureE2ESessions)([h]);case 25:return e.next=27,y.default.getIdentityRowId((0,E.createSignalAddress)(h).toString());case 27:return v=e.sent,e.abrupt("return",{originalMsgId:n,chat:f,requester:h,identityRowId:v});case 31:e.prev=31,e.t0=e.catch(13),__LOG__(3)`handleRetryRequest error: ${e.t0}`;case 34:case"end":return e.stop()}}),e,null,[[13,31]])})))).apply(this,arguments)}function T(e,t){return e.isUser()?(0,v.toUserWid)(e).equals((0,c.getMeUser)())?t||(__LOG__(3)`getActualChatId: from is a peer device, but without recipient`,null):(0,v.toUserWid)(e):e}},96376:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=new(r(n(98112)).default)("retryRequestParser",(function(e){e.assertTag("receipt"),e.assertAttr("type","retry"),e.hasAttr("to")&&e.assertAttrIsMe("to");var t=e.attrWid("from"),n=e.hasAttr("participant")?e.attrDeviceWid("participant"):null,r=e.hasAttr("recipient")?e.attrUserWid("recipient"):null,a=e.child("retry"),i=e.maybeChild("keys"),o=null;if(null!=i){var s,u=i.child("skey"),l=i.child("key");o={identity:i.child("identity").contentBytes(32),deviceIdentity:null===(s=i.maybeChild("device-identity"))||void 0===s?void 0:s.contentBytes(),skey:{id:u.child("id").contentUint(3),pubkey:u.child("value").contentBytes(32),signature:u.child("signature").contentBytes(64)},key:{id:l.child("id").contentUint(3),pubkey:l.child("value").contentBytes(32)}}}return{stanzaId:e.attrString("id"),originalMsgId:a.attrString("id"),ts:e.attrTime("t"),retryCount:a.hasAttr("count")?a.attrInt("count"):0,regId:e.child("registration").contentUint(4),offline:e.hasAttr("offline"),from:t,participant:n,recipient:r,keyBundle:o}}));t.default=a},71317:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMsgIfAuthorized=function(){return g.apply(this,arguments)},t.processKeyBundle=y,t.updateLocalSession=function(){return S.apply(this,arguments)};var a=r(n(81109)),i=r(n(87757)),o=r(n(48926)),s=r(n(34263)),u=n(71701),l=n(322),c=n(4779),d=r(n(8643)),f=r(n(16551)),p=r(n(5315)),h=n(10566),_=n(61572),v=n(24003),m=n(75793);function g(){return(g=(0,o.default)(i.default.mark((function e(t,n,r,a,o){var h,_,m,g,y;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=new p.default({id:t,remote:n,fromMe:!0,participant:n.isUser()?void 0:(0,u.getMeUser)()}),e.next=3,(0,l.getTable)().get(String(h));case 3:if(_=e.sent){e.next=7;break}return __LOG__(3)`getMsgIfAuthorized: can not find msg ${h.toString()}.`,e.abrupt("return",null);case 7:if(null!=(m=_.type===s.default.MSG_TYPE.REVOKED?_.protocolMessageRowId:_.rowId)){e.next=11;break}return __LOG__(3)`getMsgIfAuthorized: msg missing rowId ${h.toString()}.`,e.abrupt("return",null);case 11:return e.next=13,(0,c.isRetryEligible)(h,r,o,m);case 13:return g=e.sent,__LOG__(2,void 0,void 0,void 0,["messaging"])`getMsgIfAuthorized: ${t}, ${String(r)} retry eligibility ${g}`,y=new f.default((0,v.hydrateMessage)(_)),e.next=18,y.waitForPrep();case 18:y.type===s.default.MSG_TYPE.REVOKED&&(y.type="protocol",y.subtype="revoke"),e.t0=g,e.next=e.t0===c.RetryEligibilityResult.ELIGIBLE?22:e.t0===c.RetryEligibilityResult.INELIGIBLE_ALREADY_DELIVERED?23:25;break;case 22:return e.abrupt("return",y);case 23:return new d.default.E2eRetryAfterDelivery({deviceType:r.isCompanion()?d.default.DEVICE_TYPE.COMPANION:d.default.DEVICE_TYPE.PRIMARY,messageType:y.getWamMessageType(),msgRetryCount:a,retryRevoke:"revoke"===y.subtype}).commit(),e.abrupt("break",26);case 25:return e.abrupt("break",26);case 26:return e.abrupt("return",null);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return E.apply(this,arguments)}function E(){return(E=(0,o.default)(i.default.mark((function e(t,n,r,o,s){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&t&&t.key){e.next=3;break}return __LOG__(2)`processKeyBundle: skip due to missing key bundle`,e.abrupt("return",!1);case 3:if(!s){e.next=24;break}if(null!=o){e.next=11;break}return __LOG__(2)`processKeyBundle: missing session for retry`,e.next=8,_.Session.deleteRemoteInfo(n);case 8:return e.abrupt("return",!1);case 11:if(o===r){e.next=18;break}return __LOG__(2)`processKeyBundle: delete session because reg does not match, saved: ${o}, received: ${r}`,e.next=15,_.Session.deleteRemoteInfo(n);case 15:return e.abrupt("return",!1);case 18:return __LOG__(2)`processKeyBundle: update local session with the retry key bundle`,e.next=21,_.Session.createSignalSession((0,a.default)({wid:n,regId:r},t));case 21:return e.abrupt("return",!0);case 22:e.next=28;break;case 24:return __LOG__(2)`processKeyBundle: update local session with the retry key bundle`,e.next=27,_.Session.createSignalSession((0,a.default)({wid:n,regId:r},t));case 27:return e.abrupt("return",!0);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=(0,o.default)(i.default.mark((function e(t,r){var a,o,l,c,d,f,p,v,g,E;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.from,o=r.keyBundle,l=r.offline,c=r.originalMsgId,d=r.participant,f=r.regId,p=r.retryCount,v=d||a,__LOG__(2)`updateLocalSession: retryCount: ${p}, offline: ${l.toString()}, has keyBundle: ${(!!o).toString()}`,t.isGroup()&&(g=n(26671).default.get(t))&&v&&(0,h.markForgetSenderKey)(g.id,[v]),e.next=6,_.Session.getRemoteRegId(v);case 6:if(E=e.sent,!(0,m.toUserWid)(v).equals((0,u.getMeUser)())||E===f){e.next=9;break}throw new Error(`updateLocalSession: detect registration Id change remote: ${f}, local: ${E} for peer device`);case 9:return e.next=11,y(o,v,f,E,l);case 11:if(e.sent){e.next=17;break}if(null==E||E===f){e.next=17;break}return __LOG__(2)`updateLocalSession: delete session because reg does not match, saved: ${E}, received: ${E}`,e.next=17,_.Session.deleteRemoteInfo(v);case 17:if(p!==s.default.RETRY.VALIDATE_OLD_SESSION){e.next=21;break}return e.abrupt("return",_.Session.saveSessionBaseKey(v,c));case 21:if(!(p>s.default.RETRY.VALIDATE_OLD_SESSION)){e.next=28;break}return e.next=24,_.Session.hasSameBaseKey(v,c);case 24:if(!e.sent){e.next=28;break}return __LOG__(2)`updateLocalSession: delete local session due to same base key`,e.abrupt("return",_.Session.deleteRemoteInfo(v));case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},77631:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=f.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);return function(e){var t=(0,o.wap)("ack",{id:(0,o.CUSTOM_STRING)(e.stanzaId),class:"notification",type:"server",to:(0,o.CUSTOM_STRING)(e.from)});switch(e.type){case d.LOG:return u.upload({reason:"Server request",immediate:!0,force:!0,skipSampling:!1}),r.resolve(t);case d.PROPS:return(0,c.queryServerProps)().then((function(){return t}));case d.ABPROPS:return(0,s.syncABProps)(!1).then((function(){return t}));default:return __LOG__(3)`Unsupported notification with type "server",
blindly ack-ing it and doing nothing`,r.resolve(t)}}(t.success)},t.NOTIFICATION_TYPE=void 0;var o=n(18712),s=n(68065),u=i(n(70371)),l=a(n(98112)),c=n(93587),d=Object.freeze({LOG:"log",PROPS:"props",ABPROPS:"abprops"});t.NOTIFICATION_TYPE=d;var f=new l.default("incomingServerNotificationParser",(function(e){e.assertTag("notification");var t=e.attrString("id"),n=e.attrString("from");return e.hasChild(d.LOG)?{type:d.LOG,stanzaId:t,from:n}:e.hasChild(d.PROPS)?{type:d.PROPS,stanzaId:t,from:n}:e.hasChild(d.ABPROPS)?{type:d.ABPROPS,stanzaId:t,from:n}:{type:null,stanzaId:t,from:n}}))},64906:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.reportOfflineNotifications=function(){if(p.size<1)return;var e=0;(0,o.default)(p.entries()).forEach((function(t){var n=(0,i.default)(t,2)[1];e+=n-1})),new c.default.MdAppStateOfflineNotifications({redundantCount:e}).commit(),p.clear()},t.default=function(e){var t=h.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.reject(t.error);return function(e){if(e.changedCollections){var t,n=new Map,a=(0,s.default)(e.changedCollections);try{for(a.s();!(t=a.n()).done;){var c=(0,i.default)(t.value,2),d=c[0],h=c[1],_=l.CollectionName.cast(d);null!=_?n.set(_,h):__LOG__(3)`syncd: unknown collection name in notification: ${d}`}}catch(e){a.e(e)}finally{a.f()}var v=(0,o.default)(n.keys());e.offline&&v.forEach((function(e){var t=p.get(e);null!=t?p.set(e,t+1):p.set(e,1)})),(0,f.markCollectionsForSync)(v,n)}return r.resolve((0,u.wap)("ack",{id:(0,u.CUSTOM_STRING)(e.stanzaId),class:"notification",type:"server_sync",to:u.S_WHATSAPP_NET}))}(t.success)};var i=a(n(63038)),o=a(n(319)),s=a(n(43269)),u=n(18712),l=n(27291),c=a(n(8643)),d=a(n(98112)),f=n(50773),p=new Map,h=new d.default("serverSyncNotification",(function(e){if(e.assertTag("notification"),!e.hasChild("collection"))throw"Server sync notifcation does not contain any collections";var t=e.attrString("id"),n=new Map(e.mapChildrenWithTag("collection",(function(e){return[e.attrString("name"),e.attrInt("version")]}))),r=e.hasAttr("offline");return e.attrString("from")!==u.S_WHATSAPP_NET.toString()&&__LOG__(4,void 0,new Error)`handleServerSyncNotification: "from" is not domain jid "s.whatsapp.net"`,{changedCollections:n,stanzaId:t,offline:r}}))},60505:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return h.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(34541)),u=n(4746),l=n(28297),c=n(38831),d=a(n(98112)),f=a(n(7860)),p=new d.default("streamErrorParser",(function(e){if(e.assertTag("stream:error"),!e.hasChild("conflict"))return e.hasAttr("code")?{type:"code",code:e.attrInt("code")}:e.hasChild("ack")?{type:"ack",id:e.child("ack").hasAttr("id")?e.child("ack").attrString("id"):null}:(__LOG__(3)`Unrecognized stream:error: ${e.toString()}`,{type:"other"});switch(e.child("conflict").attrString("type")){case"replaced":return{type:"replaced"};case"device_removed":default:return{type:"device_removed"}}}));function h(){return(h=(0,o.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=p.parse(t)).error){e.next=7;break}return __LOG__(2)`error while parsing: ${t.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${n.error.toString()}`,e.abrupt("return",r.reject(n.error));case 7:if(!("code"===(a=n.success).type&&a.code>=500&&a.code<600)){e.next=21;break}if(515!==a.code){e.next=14;break}return(0,l.startLogin)(),e.abrupt("return",r.resolve("NO_ACK"));case 14:if(516!==a.code){e.next=18;break}return(0,c.commitDeviceLinkEvent)(516),(0,l.startLogout)(),e.abrupt("return",r.resolve("NO_ACK"));case 18:(0,u.onStreamErrorReceived)(),e.next=33;break;case 21:if("device_removed"!==a.type){e.next=30;break}return(0,u.stopComms)(!0),e.next=25,f.default.clearCredentialsAndStoredData();case 25:return __LOG__(2)`stream error due to device removed, logging out`,s.default.logout(),e.abrupt("return",r.resolve("NO_ACK"));case 30:if("replaced"!==a.type){e.next=33;break}return(0,u.stopComms)(),e.abrupt("return",r.resolve("NO_ACK"));case 33:return e.abrupt("return",r.resolve("CLOSE_SOCKET"));case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},90122:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=p.parse(e);if(t.error)return __LOG__(4,void 0,new Error)`handleSuccess: failed to parse ${t.error}`,r.reject(t.error);var n=t.success;a=n.ts,u=Math.round(Date.now()/1e3-a),(0,i.setClockSkew)(u),o.default.setSkew(u),s.default.onTemporaryBan({banned:!1});var a,u;var h=n.companionEncStatic;if(d.default.generateFinalDbEncryptionAndFtsKey(h),(0,f.generateFinalDbEncryptionAndFtsKeyForInvoker)(h),null==c.default.serverPropsVersion||c.default.serverPropsVersion<n.propsVersion)return(0,l.queryServerProps)()};var i=n(90066),o=a(n(79140)),s=a(n(34541)),u=a(n(98112)),l=n(93587),c=a(n(63056)),d=a(n(17894)),f=n(17533),p=new u.default("successParser",(function(e){return e.assertTag("success"),{ts:e.attrTime("t"),propsVersion:e.attrInt("props"),companionEncStatic:e.maybeAttrString("companion_enc_static")||"NULL"}}))},18627:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=g.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.resolve("NO_ACK");var n=t.success,a=n.callCreator,o=n.from,s=n.message,f=n.payloadTag,m=n.stanzaId,E=(0,_.wapNodeToVoipXml)(e),S={elapsed_msec:s.elapsed_msec,epoch_msec:s.epoch_msec,is_offline:s.is_offline,payload:E[2][0],peer_app_version:s.peer_app_version,peer_platform:s.peer_platform,peer_jid:s.peer_jid?s.peer_jid.toString({legacy:!0}):void 0},b=s.call_id;switch(s.type){case h.TYPE.OFFER:return y(o,m,b,a,s.type),(0,d.getDoNotDisturb)()&&!c.default.isFocused?__LOG__(2)`handleCall: ignoring incoming call offer because do not disturb mode is enabled or screen is locked`:v.default.isMicrophoneAvailable&&v.default.isSpeakerAvailable?(0,l.handleIncomingCallOffer)(s,S):__LOG__(2)`handleCall: ignoring incoming call offer because one of audio devices not detected`,r.resolve("NO_ACK");case h.TYPE.ENC_REKEY:return(0,l.handleIncomingEncRekey)(s,S).then((function(e){var t=e.shouldRetry,n=e.retryCount;t?(0,p.default)(m,s,n):y(o,m,b,a,h.TYPE.ENC_REKEY)})),r.resolve("NO_ACK");case h.TYPE.ACCEPT:case h.TYPE.REJECT:return y(o,m,b,a,s.type),(0,l.handleIncomingSignalingMsg)(s,S),r.resolve("NO_ACK");case h.TYPE.OFFER_NOTICE:return(0,u.default)(e);default:return(0,l.handleIncomingSignalingMsg)(s,S),r.resolve(function(e,t,n){return(0,i.wap)("ack",{to:(0,_.JID)(e),id:(0,i.CUSTOM_STRING)(t),class:"call",type:(0,i.MAYBE_CUSTOM_STRING)(n)})}(o,m,f))}};var i=n(18712),o=n(4746),s=(a(n(34263)),n(71701)),u=a(n(43987)),l=n(15943),c=a(n(87189)),d=n(65249),f=a(n(98112)),p=a(n(68069)),h=n(66279),_=n(19325),v=a(n(79075));function m(e){return h.TYPE[e.tag().toUpperCase()]||h.TYPE.NONE}var g=new f.default("callParser",(function(e){e.assertTag("call");var t=e.attrWid("from"),n=e.getFirstChild();if(n){var r=n.attrString("call-id"),a=n.attrWid("call-creator"),i={call_id:r,call_creator:a,peer_jid:t,peer_platform:e.hasAttr("platform")?e.attrString("platform"):void 0,peer_app_version:e.hasAttr("version")?e.attrString("version"):void 0,epoch_msec:e.hasAttr("t")?String(1e3*e.attrInt("t")):void 0,elapsed_msec:e.hasAttr("e")?String(1e3*e.attrInt("e")):void 0,type:m(n),common:{call_id:r,peer_jid:t.toString(),type:String(m(n))},isVideoCall:n.hasChild("video"),t:e.attrTime("t")};return{from:e.attrWid("from"),stanzaId:e.attrString("id"),payloadTag:n.tag(),message:i,callCreator:a}}throw new Error("Unrecognized call stanza")}));function y(e,t,n,r,a){var u;switch(a){case h.TYPE.OFFER:u=(0,i.wap)("offer",{"call-id":(0,i.CUSTOM_STRING)(n),"call-creator":(0,_.JID)(r)});break;case h.TYPE.ENC_REKEY:u=(0,i.wap)("enc_rekey",{"call-id":(0,i.CUSTOM_STRING)(n),"call-creator":(0,_.JID)(r)});break;case h.TYPE.ACCEPT:u=(0,i.wap)("accept",{"call-id":(0,i.CUSTOM_STRING)(n),"call-creator":(0,_.JID)(r)});break;case h.TYPE.REJECT:u=(0,i.wap)("reject",{"call-id":(0,i.CUSTOM_STRING)(n),"call-creator":(0,_.JID)(r)})}(0,o.castStanza)((0,i.wap)("receipt",{to:(0,_.JID)(e),id:(0,i.CUSTOM_STRING)(t),from:(0,_.JID)((0,s.getMaybeMeUser)())},u))}},23939:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=d.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.resolve();var n=t.success,a=(0,i.wap)("ack",{id:(0,i.CUSTOM_STRING)((0,o.default)(n.stanzaId,"retryInfo.stanzaId")),to:(0,c.JID)(n.from),class:"receipt",type:"enc_rekey_retry"});return(0,s.handleVoipRetryRequest)(n).then((function(e){if(!e)return __LOG__(3)`voip:handle_enc_rekey_retry_receipt: not sending enc_rekey retry`,l.default.endCall(n.originalMsgId),a;l.default.resendEncRekeyRetry(n.from.toString({legacy:!0,formatFull:!0}),n.retryCount)})).catch((function(){return __LOG__(3)`voip:handle_enc_rekey_retry_receipt: error while attempting to send enc_rekey retry`,a}))};var i=n(18712),o=a(n(91080)),s=n(28734),u=a(n(98112)),l=a(n(78919)),c=n(19325),d=new u.default("rekeyRetryReceiptParser",(function(e){e.assertTag("receipt"),e.assertAttr("type","enc_rekey_retry");var t=e.child("enc_rekey");return{from:e.attrWid("from"),originalMsgId:t.attrString("call-id"),stanzaId:e.attrString("id"),retryCount:t.hasAttr("count")?t.attrInt("count"):0,regId:e.child("registration").contentUint(4),ts:null,participant:null,recipient:null,keyBundle:null,offline:!1}}))},43987:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=l.parse(e);if(t.error)return __LOG__(2)`error while parsing: ${e.toString()}`,__LOG__(4,void 0,new Error)`Parsing Error: ${t.error.toString()}`,r.resolve("NO_ACK");var n=t.success,a=n.stanzaId,s=n.fromWid,c=n.callCreator,d=n.callId,f=n.isGroup,p=n.isVideo,h=n.t;return(0,o.default)(c,d,h,p,f),r.resolve((0,i.wap)("ack",{to:(0,u.JID)(s),id:(0,i.CUSTOM_STRING)(a),class:"call",type:(0,i.CUSTOM_STRING)("offer_notice")}))};var i=n(18712),o=a(n(37499)),s=a(n(98112)),u=n(19325),l=new s.default("callOfferNoticeParser",(function(e){e.assertTag("call");var t=e.attrString("id"),n=e.attrWid("from"),r=e.child("offer_notice");return{stanzaId:t,fromWid:n,callCreator:r.attrDeviceWid("call-creator"),callId:r.attrString("call-id"),isGroup:"group"===r.attrString("type"),isVideo:"video"===r.attrString("media"),t:e.attrTime("t")}}))},93175:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleCall",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"handleEncRekeyRetryRequest",{enumerable:!0,get:function(){return i.default}});var a=r(n(18627)),i=r(n(23939))},11968:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractCertificateDetailsParams=function(e){return{serial:e.serial,name:e.verifiedName,isApi:"ent:wa"===e.issuer}},t.getParsedProtoObjects=function(e){if(!e)return null;var t=(0,r.decodeProto)(a.VerifiedNameCertificateSpec,e);if(!t.details)throw new Error("verifyCertificate cert missing details");if(!t.signature)throw new Error("verifyCertificate cert missing signature");var n=(0,r.decodeProto)(a.DetailsSpec,t.details);return{cert:t,details:n}};var r=n(53939),a=n(91928)},92308:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.startWebPersistedJobManager=function(){return h.apply(this,arguments)},t.newJob=function(e){function t(){var t=f.jobSerializers[e],n=t.apply(null,arguments);return v(n)}return{fireAndForget:function(){t.apply(null,arguments).then((function(e){(0,u.loadAndRunJobFromId)(e)}))},waitUntilPersisted:function(){return t.apply(null,arguments).then((function(e){(0,u.loadAndRunJobFromId)(e)}))},waitUntilCompleted:function(){return t.apply(null,arguments).then((function(e){return(0,u.loadAndRunJobFromId)(e)}))}}};var i=a(n(43269)),o=a(n(87757)),s=a(n(48926)),u=n(66127),l=n(98426),c=n(90066),d=a(n(40144)),f=n(39233),p=n(15995);function h(){return(h=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.default)(),e.next=3,(0,p.initialize)();case 3:t=(0,p.getJobsTable)(),(0,u.startPersistedJobManager)({accessors:_(),unfinishedJobEntries:t.all(),isRestartAfterCrash:!1,onJobStarted:function(){},onJobFinished:function(){return null},deprecatedJobs:[]});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return{deletePersistedJob:function(e){return(0,p.getJobsTable)().remove(e)},updatePersistedJob:function(e){return(0,p.getJobsTable)().createOrReplace(e)},readPersistedJob:function(e){return(0,p.getJobsTable)().get(e)}}}function v(){return m.apply(this,arguments)}function m(){return(m=(0,s.default)(o.default.mark((function e(t){var n,a,s,d,f,h,_,v,m,g,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,p.getJobsTable)(),d=JSON.stringify([t.type,null!==(n=t.uniqKey)&&void 0!==n?n:(0,l.randomHex)(32)]),f={type:t.type,uniqKey:d,startTime:(0,c.unixTime)(),version:null!==(a=t.version)&&void 0!==a?a:1,original:t.args,current:t.args,step:u.UNSTARTED_JOB,waitUntil:null,stepFirstStartTime:null,stepHardStartCountAfterTimeout:0},null!=t.uniqKey){e.next=5;break}return e.abrupt("return",s.createOrReplace(f));case 5:return e.next=7,s.equals(["uniqKey"],[t.uniqKey]);case 7:if(0!==(h=e.sent).length){e.next=10;break}return e.abrupt("return",s.createOrReplace(f));case 10:_=[],v=null,m=(0,i.default)(h);try{for(m.s();!(g=m.n()).done;)(y=g.value).step===u.FINISHED_JOB?v=y:_.push(s.remove(y.jobId))}catch(e){m.e(e)}finally{m.f()}return e.next=16,r.all(_);case 16:return e.abrupt("return",null!=v?v.jobId:s.createOrReplace(f));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7991:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ensureE2ESessions=m,t.ensureE2ESessionsWithDelay=function(e,t){var n=new l.ShiftTimer((function(){m(e)}));e.forEach((function(e){_.set(String(e),n)})),n.onOrAfter(1e3*t)};var i=a(n(87757)),o=a(n(48926)),s=n(18712),u=n(19087),l=n(12035),c=n(4746),d=a(n(34263)),f=a(n(98112)),p=n(61572),h=n(19325),_=new Map,v=new u.PromiseQueueMap;function m(e){var t=e.map((function(e){return e.toString()})).join();e.forEach((function(e){var t=_.get(e.toString());t&&(t.cancel(),_.delete(e.toString()))})),__LOG__(2)`ensureE2ESession ${t}`;var n=v.waitIfPending(t);if(n)return __LOG__(2)`ensureE2ESession deduped ${t}`,n;var r=p.Session.hasSignalSessions(e).then((function(t){var n=e.filter((function(e,n){return!t[n]}));if(n.length>0)return function(){return y.apply(this,arguments)}(n)}));return v.enqueueHandlers(t,r)}var g=new f.default("e2eSessionParser",(function(e){return e.child("list").mapChildren((function(e){if(e.hasChild("error")){var t=e.child("error"),n=t.attrInt("code"),r=t.attrString("text");throw new Error(`establishE2ESessionParser bad response: ${n} ${r}`)}var a=e.child("skey"),i=e.hasChild("key")?e.child("key"):null,o=e.hasChild("device-identity")?e.child("device-identity").contentBytes():null;return{wid:e.attrDeviceWid("jid"),regId:e.child("registration").contentUint(4),identity:e.child("identity").contentBytes(32),deviceIdentity:o,skey:{id:a.child("id").contentUint(3),pubkey:a.child("value").contentBytes(32),signature:a.child("signature").contentBytes(64)},key:i&&{id:i.child("id").contentUint(3),pubkey:i.child("value").contentBytes(32)}}}))}));function y(){return(y=(0,o.default)(i.default.mark((function e(t){var n,a,o,u,l,f,_,v,m=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>1&&void 0!==m[1]&&m[1],a=t.map((function(e){return(0,s.wap)("user",{jid:(0,h.DEVICE_JID)(e),reason:n?"identity":s.DROP_ATTR})})),o=(0,s.wap)("iq",{id:(0,s.generateId)(),xmlns:"encrypt",type:"get",to:s.S_WHATSAPP_NET},(0,s.wap)("key",null,a)),e.next=5,(0,c.sendIq)(o,g);case 5:if((u=e.sent).success){e.next=8;break}throw new Error(`establishE2ESession bad response ${String(u)}`);case 8:if((l=u.result)&&!(l.length<=0)){e.next=11;break}throw new Error("establishE2ESession: empty keyInfo");case 11:return f=[],_=[],l.forEach((function(e){null!=e.wid.device&&e.wid.device!==d.default.DEVICE.PRIMARY_DEVICE?_.push(e):f.push(e)})),v=function(e){return p.Session.createSignalSession(e).catch((function(t){__LOG__(4,void 0,new Error,!0)`createSignalSession: failed for device ${e.wid} with error ${t}`,SEND_LOGS("createSignalSession-fail")}))},e.next=17,r.all(f.map((function(e){return v(e)})));case 17:return e.next=19,r.all(_.map((function(e){return v(e)})));case 19:__LOG__(2)`establishE2ESession: successfully established E2E sessions`;case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},10229:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addPlaceHolderAction=function(e,t){new i.default.PlaceholderActivity({placeholderActionInd:i.default.PLACEHOLDER_ACTION.ADD,placeholderChatTypeInd:s.default.isGroup(e.from)||s.default.isGroup(e.to)?i.default.PLACEHOLDER_CHAT_TYPE.GROUP:i.default.PLACEHOLDER_CHAT_TYPE.INDIVIDUAL,placeholderTimePeriod:Math.max((0,a.unixTime)()-e.t,0),placeholderTypeInd:t===o.PlaceholderType.FANOUT?i.default.PLACEHOLDER_TYPE.FANOUT:i.default.PLACEHOLDER_TYPE.CIPHERTEXT}).commit()},t.viewPlaceHolderAction=function(e){new i.default.PlaceholderActivity({placeholderActionInd:i.default.PLACEHOLDER_ACTION.VIEW,placeholderChatTypeInd:s.default.isGroup(e.from)||s.default.isGroup(e.to)?i.default.PLACEHOLDER_CHAT_TYPE.GROUP:i.default.PLACEHOLDER_CHAT_TYPE.INDIVIDUAL,placeholderTimePeriod:Math.max((0,a.unixTime)()-e.t,0),placeholderTypeInd:"fanout"===e.subtype?i.default.PLACEHOLDER_TYPE.FANOUT:i.default.PLACEHOLDER_TYPE.CIPHERTEXT}).commit()};var a=n(90066),i=r(n(8643)),o=n(87442),s=r(n(12717))},62546:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllContactsFromChatCollectionIntoChunks=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=[],r=[],a=new Set,i=new Set,o=(0,s.default)(l.default.toArray());try{for(o.s();!(e=o.n()).done;){var u=e.value;i.size===t&&(n.push(i),i=new Set),u.isBroadcast||(u.isGroup?r.push(u.id):a.has(u.id)||(i.add(u.id),a.add(u.id)))}}catch(e){o.e(e)}finally{o.f()}for(var c=0,d=r;c<d.length;c++){var f,p,h=d[c],_=l.default.get(h)||{},v=(0,s.default)(null===(f=_.groupMetadata)||void 0===f?void 0:f.participants.toArray());try{for(v.s();!(p=v.n()).done;){var m=p.value;i.size===t&&(n.push(i),i=new Set),a.has(m.id)||(i.add(m.id),a.add(m.id))}}catch(e){v.e(e)}finally{v.f()}}0!==i.size&&n.push(i);return __LOG__(2,void 0,void 0,void 0,["contact-sync"])`get ${n.length} chunks of contacts from chat collection, chunk size: ${t}`,n},t.getNonAddressBookContactsAndMarkAllContactsDirty=function(){return m.apply(this,arguments)},t.getAndUpdateNonAddressBookContacts=function(){return g.apply(this,arguments)};var a=r(n(63038)),i=r(n(87757)),o=r(n(48926)),s=r(n(43269)),u=n(72687),l=r(n(26671)),c=n(43883),d=n(28367),f=r(n(12717)),p=n(75793);function h(){return _.apply(this,arguments)}function _(){return(_=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,e.next=3,(0,c.getParticipantTable)().forEach((function(e){e.participants.forEach((function(e){t.add((0,u.toJid)((0,p.createWid)(e).user))}))}));case 3:return e.next=5,(0,c.getChatTable)().forEach((function(e){f.default.isUser(e.id)&&t.add((0,u.toJid)((0,p.createWid)(e.id).user))}));case 5:return __LOG__(2,void 0,void 0,void 0,["contact-sync"])`found ${t.size} contacts from chat and group participant tables`,e.abrupt("return",Array.from(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return e.anyOf(["isAddressBookContact"],[1,0]).then((function(e){var t=new Set(e.map((function(e){return e.id})));return __LOG__(2,void 0,void 0,void 0,["contact-sync"])`found ${t.size} contacts with set isAddressBookContact value from contact table`,t}))}function m(){return(m=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,e.abrupt("return",(0,d.getStorage)().lock(["contact"],function(){var e=(0,o.default)(i.default.mark((function e(n){var r,o,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,a.default)(n,1),o=r[0],e.next=3,v(o);case 3:return s=e.sent,u=Array.from(t).map((function(e){return s.has(e)?{id:e,isContactSyncCompleted:0}:{id:e,isAddressBookContact:0,isContactSyncCompleted:0}})),__LOG__(2,void 0,void 0,void 0,["contact-sync"])`mark ${u.length} contacts dirty during the regular sync`,e.abrupt("return",o.bulkCreateOrMerge(u));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,e.abrupt("return",(0,d.getStorage)().lock(["contact"],function(){var e=(0,o.default)(i.default.mark((function e(n){var r,o,s,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,a.default)(n,1),o=r[0],e.next=3,v(o);case 3:return s=e.sent,u=t.filter((function(e){return!s.has(e)})),l=u.map((function(e){return{id:e,isAddressBookContact:0,isContactSyncCompleted:0}})),__LOG__(2,void 0,void 0,void 0,["contact-sync"])`get ${l.length} non-address book contacts, mark dirty, and update the contact table during the inital sync`,e.abrupt("return",o.bulkCreateOrMerge(l));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},14301:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cartItemToNode=c,t.default=function(e,t){var n=t.map((function(e){return c(e)})),r=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,smax_id:"10",xmlns:"fb:thrift_iq",id:(0,a.generateId)(),type:"set"},(0,a.wap)("order",{op:(0,a.CUSTOM_STRING)("create"),biz_jid:(0,u.USER_JID)(e)},n));return(0,i.sendIq)(r,l).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))},t.createOrderResponse=void 0;var a=n(18712),i=n(4746),o=n(14650),s=r(n(98112)),u=n(19325),l=new s.default("createOrderResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("order"),n=t.attrString("id"),r=t.attrString("token"),a=t.maybeChild("price"),i={},o=null==a?void 0:a.maybeChild("subtotal");o&&(i.subtotal=o.contentString());var s=null==a?void 0:a.maybeChild("total");s&&(i.total=s.contentString());var u=null==a?void 0:a.maybeChild("currency");u&&(i.currency=u.contentString());var l=null==a?void 0:a.maybeChild("price_status");return l&&(i.price_status=l.contentString()),{id:n,token:r,price:i}}));function c(e){var t=null!=e.priceAmount1000?(0,a.wap)("price",null,e.priceAmount1000.toString()):void 0,n=e.currency?(0,a.wap)("currency",null,e.currency):void 0;return(0,a.wap)("product",null,(0,a.wap)("id",null,e.id),(0,a.wap)("name",null,e.name),t,n,(0,a.wap)("quantity",null,e.quantity.toString()))}t.createOrderResponse=l},41608:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var u=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,smax_id:"5",xmlns:"fb:thrift_iq",id:(0,a.generateId)(),type:"get"},(0,a.wap)("order",{op:(0,a.CUSTOM_STRING)("get"),id:(0,a.CUSTOM_STRING)(e)},(0,a.wap)("image_dimensions",null,(0,a.wap)("width",null,t.toString()),(0,a.wap)("height",null,n.toString())),(0,a.wap)("token",null,r)));return(0,i.sendIq)(u,s).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))},t.queryOrderResponse=void 0;var a=n(18712),i=n(4746),o=n(14650),s=new(r(n(98112)).default)("queryOrderResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("order"),n=t.hasAttr("creation_ts")?t.attrTime("creation_ts"):null,r=t.maybeChild("price"),a=null==r?void 0:r.maybeChild("subtotal"),i=a?parseInt(a.contentString(),10):null,o=null==r?void 0:r.maybeChild("currency"),s=o?o.contentString():null,u=null==r?void 0:r.maybeChild("tax"),l=u?parseInt(u.contentString(),10):null,c=null==r?void 0:r.maybeChild("total"),d=c?parseInt(c.contentString(),10):null,f=[];return t.forEachChildWithTag("product",(function(e){var t=e.child("id").contentString(),n=e.child("name").contentString(),r=e.maybeChild("price"),a=r?parseInt(r.contentString(),10):null,i=e.maybeChild("quantity"),o=i?parseInt(i.contentString(),10):null,s=e.maybeChild("currency"),u=s?s.contentString():null,l=null,c=null,d=e.maybeChild("image");if(null!=d){var p=d.maybeChild("url");c=p&&p.hasContent()?p.contentString():null;var h=d.maybeChild("id");l=h&&h.hasContent()?h.contentString():null}f.push({id:t,price:a,thumbnailId:l,thumbnailUrl:c,currency:u,name:n,quantity:o})})),{currency:s,createdAt:n,products:f,subtotal:i,total:d,tax:l}}));t.queryOrderResponse=s},19585:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendPassiveIb=function(e){var t=(0,a.wap)("ib",null,(0,a.wap)("passive",{value:(0,a.CUSTOM_STRING)(String(e))}));(0,i.castStanza)(t)},t.sendPassiveIq=function(e){var t=e?(0,a.wap)("passive",null):(0,a.wap)("active",null),n=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"passive",type:"set",id:(0,a.generateId)()},t);return(0,i.sendIq)(n,o).then((function(t){if(!t.success){var n=t.errorCode,r=t.errorText;return __LOG__(3)`sendPassiveIq: sever response with ${n}, ${r}`,{errorCode:n,errorText:r}}__LOG__(2)`sendPassiveIq: passive mode set to ${String(e)}`}))};var a=n(18712),i=n(4746),o=new(r(n(98112)).default)("passiveIqParser",(function(e){e.assertAttr("type","result")}))},39233:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jobSerializers=void 0;t.jobSerializers={rotateKey:function(){return{type:"rotateKey",args:{},uniqKey:"rotateKey"}},setAbout:function(e){return{type:"setAbout",args:{content:e},uniqKey:"setAbout"}},queryProductList:function(e,t,n,r){return{type:"queryProductList",args:{catalogWid:e.toString(),productIds:t,width:n,height:r},uniqKey:`queryProductList:${t.slice().sort().join(",")}:${n}:${r}`}}}},40144:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){e={rotateKey:function(){return n.e(9644).then(n.bind(n,29644)).then((function(e){return e.default}))},setAbout:function(){return n.e(1767).then(n.bind(n,71767)).then((function(e){return e.default}))},queryProductList:function(){return n.e(9356).then(n.bind(n,79356)).then((function(e){return e.default}))}},Object.keys(e).forEach((function(t){e.hasOwnProperty(t)&&(0,a.addPersistedJobImplementation)(t,e[t])}));var e},t.defineWebPersistedJob=function(e){return(0,r.definePersistedJob)(e)};var r=n(50210),a=n(66127)},84260:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,i.wap)("iq",{id:(0,i.generateId)(),to:i.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},(0,i.wap)("product_catalog_add",{v:"1"},(0,c.productModelToNode)(e),(0,i.wap)("width",null,t.toString()),(0,i.wap)("height",null,n.toString())));return(0,o.sendIq)(r,d,s.parseErrorFields).then((function(e){if(e.success)return e.result;throw null!=e.customError?new u.CatalogEditServerError(e.errorCode,e.customError):new u.ServerStatusCodeError(e.errorCode)}))},t.addProductResponse=void 0;var i=n(18712),o=n(4746),s=n(67927),u=n(14650),l=a(n(98112)),c=r(n(31368)),d=new l.default("addProductResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("product_catalog_add").child("product");return(0,c.default)(t)}));t.addProductResponse=d},47905:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.wap)("iq",{id:(0,a.generateId)(),to:a.S_WHATSAPP_NET,type:"set",xmlns:"fb:thrift_iq"},(0,a.wap)("request",{type:"appeal_product"},(0,a.wap)("reason",null,t),(0,a.wap)("id",null,e)));return(0,i.sendIq)(n,s).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))},t.appealProductResponse=void 0;var a=n(18712),i=n(4746),o=n(14650),s=new(r(n(98112)).default)("appealProductResponse",(function(e){return e.assertTag("iq"),e.assertFromServer(),"true"===e.child("response").child("success").contentString()}));t.appealProductResponse=s},50973:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.wap)("iq",{id:(0,a.generateId)(),to:a.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},(0,a.wap)("product_catalog_create",{version:"1"}));return(0,i.sendIq)(e,s).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))},t.productCatalogCreateResponse=void 0;var a=n(18712),i=n(4746),o=n(14650),s=new(r(n(98112)).default)("productCatalogCreateResponse",(function(e){e.assertTag("iq"),e.assertFromServer(),e.child("product_catalog_create")}));t.productCatalogCreateResponse=s},17939:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.wap)("iq",{id:(0,a.generateId)(),to:a.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},(0,a.wap)("product_catalog_delete",{v:"1"},e.map((function(e){return(0,a.wap)("product",null,(0,a.wap)("id",null,e))}))));return(0,i.sendIq)(t,s).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))},t.productDeleteResponse=void 0;var a=n(18712),i=n(4746),o=n(14650),s=new(r(n(98112)).default)("productDeleteResponse",(function(e){return e.assertTag("iq"),e.assertFromServer(),{deletedCount:e.child("product_catalog_delete").attrInt("deleted_count")}}));t.productDeleteResponse=s},65255:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,i.wap)("iq",{id:(0,i.generateId)(),to:i.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog"},(0,i.wap)("product_catalog_edit",{v:"1"},(0,c.productModelToNode)(e),(0,i.wap)("width",null,t.toString()),(0,i.wap)("height",null,n.toString())));return(0,o.sendIq)(r,d,s.parseErrorFields).then((function(e){if(e.success)return e.result;throw e.customError?new u.CatalogEditServerError(e.errorCode,e.customError):new u.ServerStatusCodeError(e.errorCode)}))};var i=n(18712),o=n(4746),s=n(67927),u=n(14650),l=a(n(98112)),c=r(n(31368)),d=new l.default("editProductResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("product_catalog_edit").child("product");return(0,c.default)(t)}))},31368:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.productModelToNode=function(e){var t,n=e.id?(0,i.wap)("id",null,e.id.toString()):void 0,r=e.description?(0,i.wap)("description",null,e.description):void 0,a=e.url?(0,i.wap)("url",null,e.url):void 0,o=e.retailerId?(0,i.wap)("retailer_id",null,e.retailerId):void 0,s=null!=e.priceAmount1000?(0,i.wap)("currency",null,e.currency):void 0,u=null!=e.priceAmount1000?(0,i.wap)("price",null,e.priceAmount1000.toString()):void 0,l=[(0,i.wap)("image",null,(0,i.wap)("url",null,e.imageCdnUrl))].concat(null===(t=e.additionalImageCdnUrl)||void 0===t?void 0:t.map((function(e){return(0,i.wap)("image",null,(0,i.wap)("url",null,e))})));return(0,i.wap)("product",{is_hidden:e.isHidden?"true":"false"},n,(0,i.wap)("name",null,e.name),r,a,o,(0,i.wap)("media",null,l),u,s)},t.parseLegacyProductErrorReason=function(e){if(null!=e){var t=Object.keys(e)[0];return[{name:t,reason:e[t]||"",detail:e.detail}]}return[]},t.default=void 0;var a=r(n(81109)),i=n(18712),o=n(97098),s=function(e){var t,n,r,i,s,u=e.child("id").contentString(),l=e.maybeChild("url"),c="";l&&l.hasContent()&&(c=l.contentString());var d=e.child("name").contentString(),f=null!==(t=e.maybeAttrString("availability"))&&void 0!==t?t:o.ProductAvailability.UNKNOWN,p=e.maybeChild("description"),h=p?p.contentString():"",_=e.maybeChild("belongs_to"),v="true"===(null==_?void 0:_.contentString())||!1,m=[],g=[],y=[],E=e.child("media"),S=!0;E.forEachChildWithTag("image",(function(e){if(S)S=!1,m.push({key:"requested",value:e.child("request_image_url").contentString()}),m.push({key:"full",value:e.child("original_image_url").contentString()}),y.push(e.child("id").contentString());else{var t=[];t.push({key:"requested",value:e.child("request_image_url").contentString()}),t.push({key:"full",value:e.child("original_image_url").contentString()}),g.push(t),y.push(e.child("id").contentString())}}));var b=e.maybeChild("status_info"),T=(null==b?void 0:b.child("status").contentString())||"APPROVED",w=null==b||null===(n=b.maybeChild("can_appeal"))||void 0===n?void 0:n.contentString(),A=e.maybeChild("currency"),C=A?A.contentString():void 0,O=e.maybeChild("price"),M=null==O?void 0:O.contentString(),I=e.maybeChild("retailer_id"),k=I?I.contentString():"",P=!!e.hasAttr("is_hidden")&&"true"===e.attrString("is_hidden"),R=e.maybeChild("sale_price"),D=R&&(null===(r=R.maybeChild("price"))||void 0===r?void 0:r.contentString())?{sale_price:R.child("price").contentString(),sale_start_date:null===(i=R.maybeChild("start_date"))||void 0===i?void 0:i.contentString(),sale_end_date:null===(s=R.maybeChild("end_date"))||void 0===s?void 0:s.contentString()}:null;return(0,a.default)({id:u,is_hidden:P,url:c,name:d,description:h,availability:f,additional_image_cdn_urls:g,image_cdn_urls:m,capability_to_review_status:[{key:"WHATSAPP",value:T}],whatsapp_product_can_appeal:"true"===w,image_hashes_for_whatsapp:y,currency:C,price:M,retailer_id:k,checkmark:v},D)};t.default=s},61099:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",smax_id:"23",id:(0,a.generateId)()},(0,a.wap)("product_visibility_update",{v:"1"},e.map((function(e){return(0,a.wap)("product",{is_hidden:e.isHidden?"true":"false"},(0,a.wap)("id",null,e.productId))}))));return(0,i.sendIq)(t,s).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))};var a=n(18712),i=n(4746),o=n(14650),s=new(r(n(98112)).default)("visibilitySetResponse",(function(e){e.assertTag("iq"),e.assertFromServer()}))},12989:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryCollections=function(e,t,n,r,a,i,l){var c=t?(0,o.wap)("after",null,t):void 0,f=(0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:(0,o.generateId)(),smax_id:"35"},(0,o.wap)("collections",{biz_jid:(0,d.DEVICE_JID)(e),empty_collection:(0,o.CUSTOM_STRING)(a.toString())},(0,o.wap)("collection_limit",null,n.toString()),(0,o.wap)("item_limit",null,r.toString()),(0,o.wap)("width",null,i.toString()),(0,o.wap)("height",null,l.toString()),c));return(0,s.sendIq)(f,p).then((function(e){if(e.success)return e.result;if(404===e.errorCode)return{collections:[],afterCursor:""};throw new u.ServerStatusCodeError(e.errorCode)}))},t.querySingleCollection=function(e,t,n,r,a,i){var l=n?(0,o.wap)("after",null,n):void 0,c=(0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:(0,o.generateId)(),smax_id:"30"},(0,o.wap)("collection",{biz_jid:(0,d.DEVICE_JID)(e),id:(0,o.CUSTOM_STRING)(t)},(0,o.wap)("limit",null,r.toString()),(0,o.wap)("width",null,a.toString()),(0,o.wap)("height",null,i.toString()),l));return(0,s.sendIq)(c,h).then((function(e){if(e.success)return e.result;throw new u.ServerStatusCodeError(e.errorCode)}))},t.createCollection=function(e,t,n){var r=[];r.push((0,o.wap)("name",null,e)),r.push.apply(r,(0,a.default)(t.map((function(e){return(0,o.wap)("product",null,(0,o.wap)("id",null,e))})))),r.push((0,o.wap)("catalog_session_id",null,n));var i=(0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",id:(0,o.generateId)(),smax_id:"36"},(0,o.wap)("collection",{op:"create"},r));return(0,s.sendIq)(i,_,v).then((function(e){if(e.success)return e.result;throw e.customError}))},t.deleteCollection=function(e,t){var n=(0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",id:(0,o.generateId)(),smax_id:"43"},(0,o.wap)("collections",{op:"delete"},(0,o.wap)("id",null,e),(0,o.wap)("catalog_session_id",null,t)));return(0,s.sendIq)(n,m).then((function(e){if(!e.success)throw new u.ServerStatusCodeError(e.errorCode);if(!e.result)throw new u.ServerStatusCodeError(500)}))},t.editCollection=function(e,t,n,r,a,i){var u=(0,o.wap)("iq",{to:o.S_WHATSAPP_NET,type:"set",xmlns:"w:biz:catalog",id:(0,o.generateId)(),smax_id:"40"},(0,o.wap)("collection",{op:"update"},(0,o.wap)("id",null,e),(0,o.wap)("name",null,t),(0,o.wap)("add",null,r.map((function(e){return(0,o.wap)("id",null,e)}))),(0,o.wap)("remove",null,a.map((function(e){return(0,o.wap)("id",null,e)}))),(0,o.wap)("catalog_session_id",null,i)));return(0,s.sendIq)(u,_,v).then((function(e){if(e.success)return e.result;throw e.customError}))};var a=r(n(319)),i=n(80206),o=n(18712),s=n(4746),u=n(14650),l=r(n(98112)),c=r(n(31368)),d=n(19325),f=function(e){var t,n=e.maybeChild("status_info"),r=n?n.child("status").contentString():"APPROVED",a={id:e.child("id").contentString(),name:e.child("name").contentString(),isHidden:"TRUE"===(null===(t=e.maybeChild("is_hidden"))||void 0===t?void 0:t.contentString()),reviewStatus:r,totalItemsCount:0,products:[]};return e.forEachChildWithTag("product",(function(e){a.products.push((0,c.default)(e))})),a},p=new l.default("collectionsResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("collections"),n=[];t.forEachChildWithTag("collection",(function(e){n.push(f(e))}));var r=t.child("paging").child("after"),a=r.hasContent()?r.contentString():"";return{collections:n,afterCursor:a}}));var h=new l.default("singleCollectionResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("collection"),n=f(t),r=t.child("paging").child("after");return{collections:[n],afterCursor:r.hasContent()?r.contentString():""}}));var _=new l.default("createOrEditCollectionResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("collection"),n=t.child("id").contentString(),r=t.maybeChild("status_info");return{id:n,reviewStatus:r?r.child("status").contentString():"APPROVED"}})),v=new i.WapParser("createOrEditCollectionResponseErrorParser",(function(e){var t=e.attrString("code"),n=e.attrString("text"),r=e.maybeChild("field");return{code:t,text:n,fieldName:null==r?void 0:r.attrString("name"),fieldReason:null==r?void 0:r.attrString("reason")}}));var m=new l.default("deleteCollectionResponse",(function(e){e.assertTag("iq");var t=e.maybeChild("response");return null!=(null==t?void 0:t.maybeChild("success"))}))},27797:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAndUpdateBlocklist=function(){var e=p.default.mdBlocklistV2?_:c.getBlocklist;return __LOG__(2)`[blocklist] fetch blocklist using blocklist ${p.default.mdBlocklistV2?"v2":"v1"}`,e().then(function(){var e=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.errorCode){e.next=4;break}return e.abrupt("return",t);case 4:if(!t.dhash){e.next=11;break}return __LOG__(2)`[blocklist] updating blocklist with ${t.wids.length||0} contact(s)`,(0,d.setBlocklistHash)(t.dhash),e.next=9,(0,u.updateBlocklist)(t.wids);case 9:e.next=12;break;case 11:__LOG__(2)`[blocklist] no change in blocklist, skip update`;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())};var i=a(n(87757)),o=a(n(48926)),s=n(18712),u=n(41032),l=n(4746),c=n(2796),d=n(79583),f=a(n(98112)),p=a(n(63056));var h=new f.default("blocklistParser",(function(e){var t,n,r,a={wids:[]};if(e.hasChild("error"))return t=e.child("error"),n=t&&t.maybeAttrString("code"),r=t&&t.maybeAttrString("text"),__LOG__(3,void 0,void 0,!0)`getBlocklist error: code ${n} text ${r}`,SEND_LOGS("getBlocklist"),a;e.assertAttr("type","result");var i=e.maybeChild("list");if(i){var o=i.maybeAttrString("dhash");o&&(a.dhash=o),i.hasChild("item")&&(a.wids=i.mapChildrenWithTag("item",(function(e){return e.attrUserWid("jid")}))||[])}return a}));function _(){var e=(0,d.getBlocklistHash)(),t=(0,s.wap)("iq",{xmlns:"blocklist",to:s.S_WHATSAPP_NET,type:"get",id:(0,s.generateId)()},e?(0,s.wap)("item",{dhash:(0,s.CUSTOM_STRING)(e)}):null);return(0,l.sendIq)(t,h).then((function(e){if(e.success)return e.result?e.result:r.reject(new Error("response does not have blocked list"));var t=e.errorCode,n=e.errorText;return __LOG__(3)`fetchBlocklist: failed ${t}, ${n}`,{errorCode:t,errorText:n}}))}},44836:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBusinessCategories=function(e){var t=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"fb:thrift_iq",id:(0,a.generateId)(),type:"get"},(0,a.wap)("request",{op:"typeahead",type:"catkit",v:"1"},(0,a.wap)("query",null,e)));return(0,i.sendIq)(t,s).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))};var a=n(18712),i=n(4746),o=n(14650),s=new(r(n(98112)).default)("businessCategoriesResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("response"),n=[];t.child("not_a_biz").forEachChildWithTag("category",(function(e){var t=e.attrString("id"),r=e.contentString();n.push({id:t,localized_display_name:r,not_a_biz:!0})})),n.length=1;var r=n[0].id;return t.child("categories").forEachChildWithTag("category",(function(e){var t=e.attrString("id");if(t!==r){var a=e.contentString();n.push({id:t,localized_display_name:a,not_a_biz:!1})}})),n}))},70818:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"w:biz",id:(0,a.generateId)(),type:"get"},(0,a.wap)("business_profile",{v:(0,a.INT)(t)},e.map((function(e){return(0,a.wap)("profile",{jid:(0,l.USER_JID)(e.wid),tag:null!=e.tag?(0,a.INT)(e.tag):a.DROP_ATTR})}))));return(0,o.sendIq)(n,c).then((function(e){if(e.success)return e.result;throw new s.ServerStatusCodeError(e.errorCode)}))};var a=n(18712),i=r(n(33724)),o=n(4746),s=n(14650),u=r(n(98112)),l=n(19325),c=new u.default("businessProfileResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("business_profile"),n=[];return t.forEachChildWithTag("profile",(function(e){var t=e.attrWid("jid"),r=e.attrString("tag"),a=(0,i.default)(e);Object.keys(a).length?n.push({wid:t,tag:r,profile:a}):n.push({wid:t,tag:r})})),n}))},64750:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,s,u){var d=t?(0,a.wap)("after",null,t):void 0,f=u?(0,a.wap)("belongs_to",null,(0,a.wap)("collection_id",null,u)):void 0,p=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:(0,a.generateId)()},(0,a.wap)("product_catalog",{jid:(0,l.DEVICE_JID)(e)},(0,a.wap)("limit",null,n.toString()),(0,a.wap)("width",null,r.toString()),(0,a.wap)("height",null,s.toString()),d,f));return(0,i.sendIq)(p,c).then((function(e){if(e.success)return e.result;throw new o.ServerStatusCodeError(e.errorCode)}))};var a=n(18712),i=n(4746),o=n(14650),s=r(n(98112)),u=r(n(31368)),l=n(19325),c=new s.default("catalogResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("product_catalog"),n=[];t.forEachChildWithTag("product",(function(e){e.maybeChild("id")&&n.push((0,u.default)(e))}));var r=t.child("paging"),a=r.child("before"),i=a.hasContent()?a.contentString():"",o=r.child("after"),s=o.hasContent()?o.contentString():"";return{data:n,paging:{cursors:{after:s,before:i}}}}))},68682:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var s=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,type:"get",xmlns:"w:biz:catalog",id:(0,a.generateId)()},(0,a.wap)("product",{jid:(0,l.DEVICE_JID)(e)},(0,a.wap)("product_id",null,t),(0,a.wap)("width",null,n.toString()),(0,a.wap)("height",null,r.toString())));return(0,i.sendIq)(s,c).then((function(e){if(e.success)return{data:e.result};if(404===e.errorCode)return{error:"NOT_FOUND"};throw new o.ServerStatusCodeError(e.errorCode)}))};var a=n(18712),i=n(4746),o=n(14650),s=r(n(98112)),u=r(n(31368)),l=n(19325),c=new s.default("productResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=e.child("product_catalog").child("product");return(0,u.default)(t)}))},48800:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.queryExist=function(e){var t=(new o.USyncQuery).withContactProtocol();return t.withUser((new i.USyncUser).withPhone(e)),t.withBusinessProtocol(),t.execute().then((function(e){var t=e.error.all||e.error.contact;if(t)return r.reject(new a.ServerStatusCodeError(t.errorCode,t.errorText));var n=e.list;if(1===n.length){var i=n[0],o=i.id,s=i.contact,u=i.business;if(s&&"in"===s.type)return{wid:o,biz:!!u,bizInfo:u}}return null}))};var a=n(14650),i=n(36545),o=n(31435)},4359:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.mapParsedMediaConn=f,t.queryMediaConn=function(e){var t=new Date,n=(0,s.unixTime)(),r=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,xmlns:"w:m",type:"set",id:(0,i.generateId)()},(0,i.wap)("media_conn",null)),d=(0,u.sendIq)(r,o.mediaConnParser).then((function(e){if(e.success){__LOG__(2)`backend:queryMediaConn: got ${e.result.hosts.length} hosts`;var r=f(e.result),i=r.auth,o=r.authTTL,s=r.ttl,u=r.hosts,c=r.maxBuckets;if(!i||null==s||!u||0===u.length)throw __LOG__(2)`backend:queryMediaConnections: auth exists ${String(!!i)}`,__LOG__(2)`backend:queryMediaConnections: ttl exists ${String(!!s)}`,__LOG__(2)`backend:queryMediaConnections: hosts exists ${String(!!u)}`,u&&__LOG__(2)`backend:queryMediaConnections: hosts.length ${u.length}`,__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("backend:queryMediaConnections unexpected mediaConn"),new Error("Invalid mediaConn");return(0,a.default)({queryStartTime:t,auth:i,hosts:u,ttl:s-n,maxBuckets:c},null!=o?{authTTL:o-n}:null)}throw __LOG__(4,void 0,new Error,!0)`response: ${e.errorCode} ${e.errorText}`,SEND_LOGS("backend:queryMediaConn: fail"),new l.ServerStatusCodeError(e.errorCode,e.errorText)}));return(0,c.default)(d,e)};var a=r(n(81109)),i=n(18712),o=n(45582),s=n(90066),u=n(4746),l=n(14650),c=r(n(69673));function d(e){switch(e){case"kyc-id":case"novi-image":case"novi-video":case"thumbnail-gif":case"ppic":return null;default:return e}}function f(e){var t,n,r=function(e){var t=[],n=e.downloadable.map(d).filter(Boolean);n.length>0&&t.push({download:n});var r=e.uploadable.map(d).filter(Boolean);r.length>0&&t.push({upload:r});var a=e.downloadBuckets.map((function(e){return e.toString()}));return null!=a&&a.length>0&&t.push({downloadBuckets:a}),t};return{hosts:e.hosts.map((function(e){return{hostname:e.domain,class:e.class,type:e.isFallback?"fallback":"primary",ips:[{ip4:e.ip4,ip6:e.ip6}],rules:r(e)}})),auth:e.authToken,authTTL:null!==(t=e.authTTL)&&void 0!==t?t:void 0,ttl:e.authExpires,maxBuckets:null!==(n=e.maxBuckets)&&void 0!==n?n:void 0}}},21093:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBlockedContacts=function(){var e=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"get",id:(0,i.generateId)(),xmlns:"privacy"},(0,i.wap)("privacy",null,(0,i.wap)("list",{name:(0,i.CUSTOM_STRING)("groupadd"),value:(0,i.CUSTOM_STRING)("contact_blacklist")})));return(0,o.sendIq)(e,p).then((function(e){return e.success?e.result:r.reject(new Error("invalid response"))}))},t.getPrivacy=function(){var e=(0,i.wap)("iq",{xmlns:"privacy",to:i.S_WHATSAPP_NET,type:"get",id:(0,i.generateId)()},(0,i.wap)("privacy",null));return(0,o.sendIq)(e,f).then((function(e){return e.success?e.result:r.reject(new Error("invalid response"))}))},t.GROUP_ADD=t.ALL_NONE=void 0;var i=n(18712),o=n(4746),s=a(n(98112)),u={all:"all",contacts:"contacts",none:"none",error:"error"},l={all:"all",none:"none",error:"error"};t.ALL_NONE=l;var c={all:"all",contacts:"contacts",contact_blacklist:"contact_blacklist",none:"none",error:"error"};function d(e,t){var n=t.maybeChild("error"),r=n&&n.maybeAttrString("code"),a=n&&n.maybeAttrString("text");__LOG__(3,void 0,void 0,!0)`getPrivacy error: ${e} code ${r} text ${a}`,SEND_LOGS("getPrivacy")}t.GROUP_ADD=c;var f=new s.default("privacyParser",(function(e){e.assertAttr("type","result");var t={};return e.child("privacy").forEachChildWithTag("category",(function(e){switch(e.attrString("name")){case"readreceipts":var n=e.attrEnum("value",l);"error"!==n?t.readReceipts=n:d("readreceipts",e);break;case"last":var r=e.attrEnum("value",u);"error"!==r?t.lastSeen=r:d("last",e);break;case"profile":var a=e.attrEnum("value",u);"error"!==a?t.profilePicture=a:d("profile",e);break;case"status":var i=e.attrEnum("value",u);"error"!==i?t.about=i:d("status",e);break;case"groupadd":var o=e.attrEnum("value",c);"error"!==o?t.groupAdd=o:d("groupadd",e);break;default:d("unknown type",e)}})),t})),p=new s.default("getContactsBlacklistParser",(function(e){var t=e.child("privacy").maybeChild("list");return null==t?{status:"match"}:{status:"mismatch",users:t.mapChildren((function(e){return e.attrUserWid("jid")}))}}))},39085:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.wap)("iq",{xmlns:"w",id:(0,a.generateId)(),type:"get",to:a.S_WHATSAPP_NET},(0,a.wap)("props",null));return(0,i.sendIq)(e,o)};var a=n(18712),i=n(4746),o=new(r(n(98112)).default)("serverProps",(function(e){e.assertTag("iq"),e.assertAttr("from","s.whatsapp.net");var t=e.child("props"),n={serverPropsVersion:t.attrInt("version")};return t.forEachChildWithTag("prop",(function(e){switch(e.attrString("name")){case"bsp_system_message_enabled":n.bspSystemMessageEnabled=1===e.attrInt("value");break;case"web_ctwa_context_compose_enabled":n.ctwaContextCompose=1===e.attrInt("value");break;case"ctwa_context_enabled":n.ctwaContextRender=1===e.attrInt("value")?1:0;break;case"ephemeral_messages_enabled":n.ephemeralMessages=e.attrInt("value");break;case"ephemeral_messages_setting":n.ephemeralMessagesSetting=e.attrInt("value");break;case"ephemeral_messages_allowed_values":n.ephemeralMessagesAllowedValues=e.attrString("value");break;case"ephemeral_pruning_enabled":n.ephemeralPruning=e.attrInt("value");break;case"frequently_forwarded_group_setting":n.frequentlyForwardedGroupSetting=e.attrInt("value");break;case"frequently_forwarded_max":n.frequentlyForwardedMax=e.attrInt("value");break;case"frequently_forwarded_messages":n.frequentlyForwardedMessages=e.attrInt("value");break;case"frequently_forwarded_threshold":n.frequentlyForwardedThreshold=e.attrInt("value");break;case"web_gif_search":n.gifSearch=e.attrString("value");break;case"group_call_max_participants":n.groupCallMaxParticipants=e.attrInt("value",0);break;case"group_description_length":n.groupDescLength=e.attrInt("value");break;case"image_max_edge":n.imageMaxEdge=e.attrInt("value");break;case"image_max_kbytes":n.imageMaxKbytes=e.attrInt("value");break;case"image_quality":n.imageQuality=e.attrInt("value")/100;break;case"max_participants":n.maxParticipants=e.attrInt("value");break;case"max_subject":n.maxSubject=e.attrInt("value");break;case"max_keys":n.maxKeys=e.attrInt("value");break;case"media":n.media=e.attrInt("value");break;case"multicast_limit_global":n.multicastLimitGlobal=e.attrInt("value");break;case"mute_always":n.muteAlways=e.attrInt("value");break;case"mms_media_key_ttl":n.mmsMediaKeyTTL=e.attrInt("value");break;case"new_commerce_entry_point_enabled":n.newCommerceEntryPointEnabled=e.attrInt("value");break;case"web_shops_chat_header_button_enabled":n.webShopsChatHeaderButtonEnabled=1===e.attrInt("value",0);break;case"shops_profile_drawer_entrypoint":n.shopsProfileDrawerEntrypoint=1===e.attrInt("value",0);break;case"shops_hide_catalog_attachment_entrypoint":n.shopsHideCatalogAttachmentEntrypoint=1===e.attrInt("value",0);break;case"shops_header_dropdown_menu_item":n.shopsHeaderDropdownMenuItem=1===e.attrInt("value",0);break;case"mms_hot_content_timespan_in_seconds":n.mmsHotContentTimespan=e.attrInt("value");break;case"mms_vcache_aggregation_enabled":n.mmsVCacheAggregationEnabled=1===e.attrInt("value");break;case"product_media_attachments":n.productMediaAttachments=e.attrInt("value");break;case"quick_message_search_enabled":n.quickMessageSearch=e.attrInt("value");break;case"syncd_inline_mutations_max_count":n.syncdInlineMutationsMaxCount=e.attrInt("value");break;case"syncd_patch_protobuf_max_size":n.syncdPatchProtobufMaxSize=e.attrInt("value");break;case"syncd_key_max_use_days":n.syncdKeyMaxUseDays=e.attrInt("value");break;case"syncd_wait_for_key_timeout_days":n.syncdWaitForKeyTimeoutDays=e.attrInt("value");break;case"syncd_additional_mutations":n.syncdAdditionalMutations=e.attrInt("value");break;case"syncd_anti_tampering_fatal_exception_enabled":n.syncdAntiTamperingFatalExceptionEnabled=1===e.attrInt("value");break;case"syncd_sentinel_timeout_seconds":n.syncdSentinelTimeoutSeconds=e.attrInt("value");break;case"syncd_patch_device_index_included":n.syncdPatchDeviceIndexIncluded=1===e.attrInt("value");break;case"template_doc_mime_types":n.templateDocMimeTypes=e.attrInt("value");break;case"web_biz_profile_options":n.webBizProfileOptions=e.attrInt("value");break;case"web_biz_profile_v3":n.webBizProfileV3=1===e.attrInt("value");break;case"web_voip_internal_tester":n.webVoipInternalTester=1===e.attrInt("value");break;case"view_once_read":n.viewOnceRead=e.attrInt("value");break;case"view_once_write":n.viewOnceWrite=e.attrInt("value");break;case"vcard_as_document_size_kb":n.vcardAsDocumentSizeKb=e.attrInt("value");break;case"vcard_max_size_kb":n.vcardMaxSizeKb=e.attrInt("value");break;case"md_blocklist_v2":n.mdBlocklistV2=1===e.attrInt("value");break;case"web_download_document_thumb_mms_enabled":n.webDownloadDocumentThumbMmsEnabled=1===e.attrInt("value");break;case"web_download_link_thumb_mms_enabled":n.webDownloadLinkThumbMmsEnabled=1===e.attrInt("value");break;case"web_send_document_thumb_in_message_disabled":n.webSendDocumentThumbInMessageDisabled=1===e.attrInt("value");break;case"web_upload_document_thumb_mms_enabled":n.webUploadDocumentThumbMmsEnabled=1===e.attrInt("value");break;case"web_upload_link_thumb_mms_enabled":n.webUploadLinkThumbMmsEnabled=1===e.attrInt("value");break;case"web_list_message":n.webListMessage=1===e.attrInt("value");break;case"web_voip_mac_os_min_version":n.webVoipMacOsMinVersion=e.attrString("value");break;case"web_voip_windows_os_min_version":n.webVoipWindowsOsMinVersion=e.attrString("value");break;case"web_cart_enabled":n.webCart=1===e.attrInt("value");break;case"web_catalog_products_onoff":n.webCatalogProductsOnOff=1===e.attrInt("value");break;case"web_cart_v1_1_order_message_changes_enabled":n.webCartV11OrderMessageChanges=1===e.attrInt("value");break;case"mms_cat_v1_forward_hot_override_enabled":n.mmsCatV1ForwardHotOverrideEnabled=1===e.attrInt("value");break;case"web_buttons_message_enabled":n.webButtonsMessage=1===e.attrInt("value");break;case"web_product_list_message_fallback":n.webProductListMessageFallback=1===e.attrInt("value");break;case"web_product_list_message_render_kill_switch":n.webProductListMessageRenderKillSwitch=1===e.attrInt("value");break;case"web_smb_upsell_in_biz_profile_enabled":n.webSMBUpsellInBizProfile=1===e.attrInt("value");break;case"ptt_draft_enabled":n.pttDraftEnabled=1===e.attrInt("value");break;case"ptt_playback_speed_enabled":n.pttPlaybackSpeedEnabled=1===e.attrInt("value");break;case"ptt_playback_speed_hide_delay":n.pttPlaybackSpeedHideDelay=e.attrInt("value");break;case"web_product_list_message_page_size":n.webProductListMessagePageSize=e.attrInt("value");break;case"web_biz_profile_edit_enabled":n.webBizProfileEdit=1===e.attrInt("value");break;case"web_youtube_player_enhancements":n.webYouTubePlayerEnhancements=1===e.attrInt("value");break;case"web_server_sticker_panel":n.webServerStickerPanel=e.attrInt("value");break;case"web_collections_display_enabled":n.webCollectionsDisplay=1===e.attrInt("value");break;case"web_cart_on_off":n.webCartOnOffToggle=1===e.attrInt("value");break;case"web_product_list_message_enabled":n.webProductListMessage=1===e.attrInt("value")}})),n}))},23051:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.sendAggregateReceipts=function(e,t,n,u,l,c){var d=t===s.READ||t===s.PLAYED||t===s.READ_SELF||t===s.PLAYED_SELF;return r.all(Array.from(u.keys()).map((function(f){var p=u.get(f);if(p&&0!==p.length){for(var h=e.isUser()?null:f,_=[];p.length>0;){var v=p.splice(0,256),m=null;v.length>1&&(m=(0,a.wap)("list",null,v.slice(1).map((function(e){return(0,a.wap)("item",{id:(0,a.CUSTOM_STRING)(e)})}))));var g=(0,a.wap)("receipt",{to:(0,o.JID)(e),type:t===s.DELIVERY?a.DROP_ATTR:(0,a.CUSTOM_STRING)(t),msgtype:c?(0,a.CUSTOM_STRING)(c):a.DROP_ATTR,id:(0,a.CUSTOM_STRING)(v[0]),t:null!=n?(0,a.CUSTOM_STRING)(n):a.DROP_ATTR,participant:h?(0,o.DEVICE_JID)(h):a.DROP_ATTR,recipient:l?(0,o.USER_JID)(l):a.DROP_ATTR},m);d?_.push((0,i.sendStanzaAndWaitForAck)(g,{id:v[0],from:e,class:"receipt",type:t,participant:h})):_.push((0,i.castStanza)(g))}return r.all(_)}}))).then((function(){}))},t.RECEIPT_MSG_TYPE=t.RECEIPT_TYPE=void 0;var a=n(18712),i=n(4746),o=n(19325),s=Object.freeze({INACTIVE:"inactive",SENDER:"sender",DELIVERY:"delivery",READ:"read",READ_SELF:"read-self",PLAYED:"played",PLAYED_SELF:"played-self",HISTORY_SYNC_COMPLETION:"hist_sync",SERVER_ERROR:"server-error",PEER_MSG:"peer_msg"});t.RECEIPT_TYPE=s;var u=Object.freeze({PEER:"peer"});t.RECEIPT_MSG_TYPE=u},59993:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDeliveryReceiptsAfterPresence=function(){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,u.getInactiveReceiptTable)().all().then((function(e){var t=new Map,n=Date.now().toString();return e.forEach((function(e){var n=e.msgId,r=e.chatId,a=e.participantId,i=(0,d.createWid)(r),o=(a?(0,d.createWid)(a):null)||i,s=t.get(i);s||(s=new Map,t.set(i,s));var u=s.get(o);u||(u=[],s.set(o,u)),u.push(n)})),r.all(Array.from(t.keys()).map((function(e){var r=t.get(e);if(r)return(0,o.sendAggregateReceipts)(e,o.RECEIPT_TYPE.DELIVERY,n,r)}))).then((function(){return(0,u.getInactiveReceiptTable)().bulkRemove(e.map((function(e){return e.msgId})))}))}));return r.resolve()},t.sendDeliveryReceiptsAfterDecryption=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var s=(0,c.default)(),f=(0,l.assertGetMe)(),p=!f.getDeviceId(),_=t.isUser()&&(0,d.toUserWid)(f).equals((0,d.toUserWid)(t))||null!=a&&(0,d.toUserWid)(f).equals((0,d.toUserWid)(a)),v=_||s||p,m=r.resolve();if(!v){var g={msgId:e,chatId:t.toString(),participantId:a?a.toString():null};m=(0,u.getInactiveReceiptTable)().createOrReplace(g)}return m.then((function(){if(h(e,t,n,a,v,_,o),v)return(0,u.getInactiveReceiptTable)().remove(e)}))}return r.resolve()};var i=a(n(22021)),o=n(23051),s=n(4746),u=n(43883),l=n(71701),c=a(n(13839)),d=n(75793),f=n(18712),p=n(19325);function h(e,t,n,r,a,i,u){var l=f.DROP_ATTR;u?l=(0,f.CUSTOM_STRING)(o.RECEIPT_TYPE.PEER_MSG):i?l=(0,f.CUSTOM_STRING)(o.RECEIPT_TYPE.SENDER):a||(l=(0,f.CUSTOM_STRING)(o.RECEIPT_TYPE.INACTIVE));var c=(0,f.wap)("receipt",{id:(0,f.CUSTOM_STRING)(e),to:(0,p.JID)(t),participant:(t.isGroup()||t.isBroadcast())&&r?(0,p.DEVICE_JID)(r):f.DROP_ATTR,recipient:!u&&i&&n?(0,p.USER_JID)(n):f.DROP_ATTR,type:l});(0,s.castStanza)(c)}},54663:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markChatRead=function(){return E.apply(this,arguments)},t.markStatusRead=function(){return b.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(72687),u=n(90066),l=n(23051),c=a(n(34263)),d=n(71701),f=n(322),p=a(n(5315)),h=a(n(91080)),_=n(21093),v=n(75793),m=n(48399),g=n(10229);function y(e){var t;return e.isGroup()?l.RECEIPT_TYPE.READ:(null===(t=(0,d.getUserPrivacySettings)())||void 0===t?void 0:t.readReceipts)===_.ALL_NONE.none?l.RECEIPT_TYPE.READ_SELF:l.RECEIPT_TYPE.READ}function E(){return(E=(0,o.default)(i.default.mark((function e(t,n){var a,o,s,u,d,h,_,E,S,b,T,w,A,C,O,M;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now().toString(),o=String(t.id),e.next=4,(0,f.getTable)().equals(["from","pendingReadReceipt"],[o,1],{shouldDecrypt:!1});case 4:if((s=e.sent).sort((function(e,t){return(e.rowId||0)-(t.rowId||0)})),u=n?String(n):null,d=new Map,h=s.length-1,!u){e.next=19;break}case 12:if(!(h>=0)){e.next=18;break}if(s[h].id!==u){e.next=15;break}return e.abrupt("break",18);case 15:h--,e.next=12;break;case 18:h<0&&(h=s.length-1);case 19:_=null;case 21:if(!(h>=0)){e.next=43;break}if(null!=(E=s[h]).rowId&&(null==_||E.rowId>_)&&(_=E.rowId),S=p.default.fromString(E.id),E.type!==c.default.MSG_TYPE.CIPHERTEXT){e.next=30;break}return(0,g.viewPlaceHolderAction)(E),e.abrupt("continue",40);case 30:E.type===c.default.MSG_TYPE.UNKNOWN&&"fanout"===E.subtype&&(0,g.viewPlaceHolderAction)(E);case 31:b=E.broadcastId||E.from,T=E.author||E.from,w=S.id,A=(0,v.createWidFromWidLike)(T),C=(0,v.createWidFromWidLike)(b),(O=d.get(C))||(O=new Map,d.set(C,O)),(M=O.get(A))?M.push(w):O.set(A,[w]);case 40:h--,e.next=21;break;case 43:return e.next=45,r.all(Array.from(d.keys()).map((function(e){var n=d.get(e);if(n){var r=y(t.id);return(0,l.sendAggregateReceipts)(e,r,a,n)}})));case 45:return e.abrupt("return",(0,m.markMessageAndChatAsRead)(_,o));case 46:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=(0,v.createWid)(s.STATUS_JID);function b(){return(b=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("status"===t.remote.user){e.next=3;break}return __LOG__(3)`markStatusRead: message is not a status.`,e.abrupt("return");case 3:return n=String((0,u.unixTime)()),e.next=6,(0,l.sendAggregateReceipts)(S,y(S),n,new Map([[(0,h.default)(t.participant,"msgKey.participant"),[t.id]]]));case 6:return e.next=8,(0,f.getTable)().merge(t.toString(),{ack:c.default.ACK.READ});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},33441:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendRetryReceipt=function(){return y.apply(this,arguments)},t.prepareKeysForRetry=E;var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=n(18712),l=n(68691),c=n(4746),d=a(n(34263)),f=n(71701),p=a(n(22021)),h=n(91056),_=n(1018),v=n(36918),m=n(19325),g=n(75793);function y(){return(y=(0,s.default)(i.default.mark((function e(t,n,a,o,s,l){var d,p,h,v,y,S,b,T,w,A,C=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=C.length>6&&void 0!==C[6]&&C[6],e.prev=1,e.next=4,_.waSignalStore.getRegistrationInfo();case 4:if(p=e.sent){e.next=7;break}throw Error("No registration info found");case 7:return h=p.registrationId,v=p.identityKeyPair,e.next=10,E(t,v);case 10:if(y=e.sent,S=u.DROP_ATTR,b=u.DROP_ATTR,!n.isUser()){e.next=29;break}if(w=u.DROP_ATTR,T=(0,m.DEVICE_JID)(n),!(0,f.getMeUser)().equals((0,g.toUserWid)(n))){e.next=27;break}if(!d){e.next=22;break}S=(0,u.CUSTOM_STRING)("peer"),b=u.DROP_ATTR,e.next=27;break;case 22:if(o){e.next=26;break}return e.abrupt("return",r.reject("sendRetryReceipt: send retry to peer device without receipient"));case 26:b=(0,m.USER_JID)(o);case 27:e.next=31;break;case 29:T=(0,m.CHAT_JID)(n),w=a?(0,m.DEVICE_JID)(a):u.DROP_ATTR;case 31:return A=(0,u.wap)("receipt",{id:(0,u.CUSTOM_STRING)(s),to:T,participant:w,recipient:b,type:"retry",category:S},(0,u.wap)("retry",{v:"1",count:(0,u.INT)(t),id:(0,u.CUSTOM_STRING)(s),t:(0,u.CUSTOM_STRING)(l)}),(0,u.wap)("registration",null,(0,u.BIG_ENDIAN_CONTENT)(h)),y),e.abrupt("return",(0,c.sendStanzaAndWaitForAck)(A,{id:s,class:"receipt",from:n,participant:a,type:"retry"}));case 35:e.prev=35,e.t0=e.catch(1),__LOG__(4,void 0,new Error,!0)`error: ${e.t0}`,SEND_LOGS("sendRetryReceipt: error while creating or sending the retry message");case 38:case"end":return e.stop()}}),e,null,[[1,35]])})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=(0,s.default)(i.default.mark((function e(t,n){var r,a,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,n);case 2:if(r=e.sent,a=(0,o.default)(r,2),s=a[0],!(u=a[1])){e.next=11;break}return e.next=9,_.waSignalStore.markKeyAsUploaded(u.keyId);case 9:return e.next=11,_.waSignalStore.markPreKeyAsDirectDistribution(u.keyId);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){if(e<2)return r.resolve([null,null]);var n=r.resolve(null);return p.default.supportsFeature(p.default.F.MD_ADV)&&(n=(0,l.getADVEncodedIdentity)().then((function(e){return(0,u.wap)("device-identity",null,e)}))),r.all([_.waSignalStore.getSignedPreKey(),_.waSignalStore.getOrGenSinglePreKey(h.generatePreKeyPair),n]).then((function(e){var n=(0,o.default)(e,3),r=n[0],a=n[1],i=n[2];if(!r)throw new Error("Signed pre key is not available");return[(0,u.wap)("keys",null,(0,u.wap)("type",null,d.default.KEY_BUNDLE_TYPE),(0,u.wap)("identity",null,t.pubKey),(0,v.xmppPreKey)(a),(0,v.xmppSignedPreKey)(r),i),a]})).catch((function(){throw Error("Could not create keys section for retry")}))}},84332:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return f.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(18712),s=n(92827),u=n(4746),l=n(71701),c=n(87128),d=n(19325);function f(){return(f=(0,i.default)(a.default.mark((function e(t){var n,r,i,f,p,h,_,v,m,g;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id.id,r=(0,s.decodeB64)(t.mediaKey),e.next=4,(0,c.encryptServerErrorReceipt)(r,n);case 4:return i=e.sent,f=i.ciphertext,p=i.iv,h=t.chat,_=(0,o.CUSTOM_STRING)(h.id.toString({legacy:!0})),v=h.isGroup||h.isBroadcast?(0,o.CUSTOM_STRING)(t.sender.toString({legacy:!0})):o.DROP_ATTR,m=(0,l.getMeUser)(),g=(0,o.wap)("receipt",{type:"server-error",to:(0,d.USER_JID)(m),id:(0,o.CUSTOM_STRING)(n)},(0,o.wap)("encrypt",null,(0,o.wap)("enc_p",null,f),(0,o.wap)("enc_iv",null,p)),(0,o.wap)("rmr",{jid:_,from_me:(0,o.CUSTOM_STRING)(String(t.isSentByMe)),participant:v})),e.abrupt("return",(0,u.sendStanzaAndWaitForAck)(g,{id:n,class:"receipt",type:"server-error",from:m,participant:null}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},81085:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,xmlns:"fb:thrift_iq",type:"set",id:(0,a.generateId)()},(0,a.wap)("request",{type:"report_product",biz_jid:(0,u.USER_JID)(e)},n?(0,a.wap)("reason",null,n):void 0,(0,a.wap)("id",null,t)));return(0,i.sendIq)(r,l).then((function(e){if(!e.success)throw new o.ServerStatusCodeError(e.errorCode)}))};var a=n(18712),i=n(4746),o=n(14650),s=r(n(98112)),u=n(19325),l=new s.default("reportProductResponse",(function(e){e.assertTag("iq"),e.child("response").assertAttr("type","report_product")}))},47070:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.reportSpam=function(e,t){var n,r=function(e){var t=[],n=e.isGroup?null:e.id;return E(e,g,n).forEach((function(n){var r,u,l,d,p,g=n.t.toString(),y=n.isViewOnce&&!(0,_.isUnviewed)(n.safe());switch(n.type){case m.UNKNOWN:d=null,r=i.DROP_ATTR,l=i.DROP_ATTR,u=(0,i.CUSTOM_STRING)(s.CIPHERTEXT_VERSION.toString());break;case m.CIPHERTEXT:d=null,r=i.DROP_ATTR,l=i.DROP_ATTR,u=i.DROP_ATTR;break;default:var E={};if(n.asMms)E=n.isUnsentPhoneMsg()||y||!n.mediaObject?{type:n.type}:n.avParams();var S=(0,f.createMsgProtobuf)(n,E),b=(0,s.mediaTypeFromProtobuf)(S);d=y?null:(0,o.encodeProto)(c.MessageSpec,S).readByteArray(),r=(0,h.typeAttributeFromProtobuf)(S),l=b?(0,i.CUSTOM_STRING)(b):i.DROP_ATTR,u=(0,i.CUSTOM_STRING)(s.CIPHERTEXT_VERSION.toString())}var T={};if(y&&(T.deleted_reason=(0,_.isViewed)(n.safe())?"view_once_opened":"view_once_expired"),e.isGroup){var w=i.DROP_ATTR;n.author?w=(0,v.USER_JID)(n.author):n.from.isUser()&&(w=(0,v.USER_JID)(n.from)),p=(0,i.wap)("message",(0,a.default)({},T,{t:(0,i.CUSTOM_STRING)(g),from:(0,v.CHAT_JID)(e.id),participant:w,id:(0,i.CUSTOM_STRING)(n.id.id),type:r}),(0,i.wap)("raw",{v:u,mediatype:l},d))}else p=(0,i.wap)("message",(0,a.default)({},T,{t:(0,i.CUSTOM_STRING)(g),from:(0,v.USER_JID)(n.from),to:(0,v.USER_JID)(n.to),type:r,id:(0,i.CUSTOM_STRING)(n.id.id)}),n.multicast?(0,i.wap)("multicast",null):null,n.urlNumber?(0,i.wap)("url_number",null):null,n.urlText?(0,i.wap)("url_text",null):null,(0,i.wap)("raw",{v:u,mediatype:l},d));t.push(p)})),t}(e);if(e.isGroup){var l=e.groupMetadata.owner&&(0,v.USER_JID)(e.groupMetadata.owner);n=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"set",xmlns:"spam",id:(0,i.generateId)()},(0,i.wap)("spam_list",{creator:l||i.DROP_ATTR,subject:(0,i.CUSTOM_STRING)(e.name),jid:(0,v.CHAT_JID)(e.id),spam_flow:(0,i.CUSTOM_STRING)(String(t))},r))}else n=(0,i.wap)("iq",{to:i.S_WHATSAPP_NET,type:"set",xmlns:"spam",id:(0,i.generateId)()},(0,i.wap)("spam_list",{jid:(0,v.CHAT_JID)(e.id),spam_flow:(0,i.CUSTOM_STRING)(String(t))},r));return(0,u.sendIq)(n,S).then((function(e){if(e.success)return e.result;var t=e.errorCode,n=e.errorText;return __LOG__(3)`reportSpam: sever response with ${t}, ${n}`,{errorCode:t,errorText:n}}))};var a=r(n(67154)),i=n(18712),o=n(46042),s=n(256),u=n(4746),l=r(n(34263)),c=n(676),d=n(71701),f=n(38761),p=r(n(98112)),h=n(6357),_=n(77215),v=n(19325),m=l.default.MSG_TYPE,g=5,y=new Set([m.CHAT,m.AUDIO,m.IMAGE,m.PTT,m.VIDEO,m.VCARD,m.UNKNOWN,m.CIPHERTEXT,m.LIST,m.LIST_RESPONSE,m.BUTTONS_RESPONSE]);function E(e,t,n){for(var r=[],a=e.msgs.toArray().reverse(),i=0;i<a.length&&!(r.length>=t);i++){var o=a[i];if(y.has(o.type)&&!o.from.equals((0,d.getMaybeMeUser)())){if(n){if(e.isGroup&&!n.equals(o.author))continue;if(e.isUser&&!n.equals(o.from))continue}r.push(o)}}return r}var S=new p.default("reportUserSpam",(function(e){if(e.hasChild("error")){var t=e.child("error"),n=t.attrInt("code"),r=t.attrString("text");return __LOG__(3)`reportSpam: sever response with ${n}, ${r}`,{errorCode:n,errorText:r}}__LOG__(2)`reportSpam: success`}))},35703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n;switch(t){case"paused":n=(0,r.wap)("paused",null);break;case"composing":n=(0,r.wap)("composing",null);break;case"recording":n=(0,r.wap)("composing",{media:"audio"});break;default:throw new Error(`Impossible value, the default statement should never be reached for value: ${t}`)}return(0,a.castStanza)((0,r.wap)("chatstate",{to:(0,o.CHAT_JID)(e),from:(0,o.JID)((0,i.assertGetMe)())},n))};var r=n(18712),a=n(4746),i=n(71701),o=n(19325)},29671:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndSendKeyMsg=function(){return l.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(4746),s=n(86578),u=n(38761);function l(){return(l=(0,i.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendKeyMsg: sending ${t.id.toString()}`,n=t.to,r=(0,u.createMsgProtobuf)(t),e.next=5,(0,s.createUserDeviceMsgStanza)(n,null,t.id,r,{type:s.MsgType.AppStateSync});case 5:return i=e.sent,e.abrupt("return",(0,o.sendStanzaAndWaitForAck)(i,{id:t.id.id,class:"message",from:n,participant:null}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},81541:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndSendUserMsg=function(){return p.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=r(n(96486)),s=n(24963),u=n(55157),l=n(4746),c=n(73175),d=n(71701),f=r(n(8643));function p(){return(p=(0,i.default)(a.default.mark((function e(t,n,r){var i,o,l,p,_,m=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.length>3&&void 0!==m[3]&&m[3],__LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendUserMsg: sending ${t}`,o=(0,d.assertGetMe)(),e.next=5,(0,u.getFanOutList)([n,o]);case 5:return l=e.sent,e.next=8,v(t,n,r,l,i,{fanoutType:c.FANOUT_TYPE.CHAT});case 8:return p=e.sent,(_=p.phash)&&(__LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendUserMsg: phash mismatch, got server phash ${_}`,new f.default.MdDeviceSyncAck({chatType:f.default.MESSAGE_CHAT_TYPE.INDIVIDUAL,revoke:(0,u.isRevokeMsg)(r)}).commit(),(0,s.syncDeviceList)([n,o],"message",_).then((function(){return h(t,n,r,i,l)}))),e.abrupt("return",p);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return _.apply(this,arguments)}function _(){return(_=(0,i.default)(a.default.mark((function e(t,n,r){var i,l,f,p,h,_,m,g=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=g.length>3&&void 0!==g[3]&&g[3],l=g.length>4?g[4]:void 0,__LOG__(2,void 0,void 0,void 0,["messaging"])`resendUserMsg: resending ${t.id}`,f=(0,d.assertGetMe)(),e.next=6,(0,u.getFanOutList)([n,f]);case 6:if(p=e.sent,0!==(h=o.default.differenceBy(p,l,String)).length){e.next=13;break}return __LOG__(2,void 0,void 0,void 0,["messaging"])`resendUserMsg: skip sending to the empty list`,e.abrupt("return");case 13:__LOG__(2,void 0,void 0,void 0,["messaging"])`resendUserMsg: resending to devices ${h.join(",")}`;case 14:return e.next=16,v(t,n,r,h,i,{fanoutType:c.FANOUT_TYPE.CHAT,disableFanout:!0});case 16:_=e.sent,(m=_.phash)&&(0,s.syncDeviceList)([n,f],"message",m);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)(a.default.mark((function e(t,n,r,i){var o,s,d,f,p=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.length>4&&void 0!==p[4]&&p[4],o=p.length>5?p[5]:void 0,e.next=4,(0,c.createFanoutMsgStanza)(t,n,r,i,o);case 4:return s=e.sent,e.next=7,(0,l.sendStanzaAndReturnAck)(s,{id:t.id,class:"message",from:n,participant:null});case 7:if(d=e.sent,!(f=u.sendMsgAckSyncParser.parse(d)).error){e.next=11;break}throw new Error("[messaging] sendMsgToDeviceList: Invalid ack from server");case 11:return e.abrupt("return",f.success);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},55157:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encodeAndPad=function(e){var t=(0,s.encodeProto)(c.MessageSpec,e);return(0,m.writeRandomPadMax16)(t),t.readByteArray()},t.isRevokeMsg=y,t.editAttribute=function(e){return y(e)?(0,o.CUSTOM_STRING)(String(u.default.EDIT_ATTR.REVOKE)):o.DROP_ATTR},t.getFanOutList=function(){return E.apply(this,arguments)},t.isPrimaryDevice=function(e){return null==e.device||e.device===u.default.DEVICE.PRIMARY_DEVICE},t.populateICDCMeta=function(){return b.apply(this,arguments)},t.updateIdentityRange=function(){return T.apply(this,arguments)},t.sendMsgAckSyncParser=void 0;var a=r(n(87757)),i=r(n(48926)),o=n(18712),s=n(46042),u=r(n(34263)),l=n(38812),c=n(676),d=n(71701),f=n(38761),p=n(80989),h=n(322),_=r(n(98112)),v=r(n(46005)),m=n(47065),g=n(75793);function y(e){return null!=e.protocolMessage&&e.protocolMessage.type===c.ProtocolMessageType.REVOKE}function E(){return(E=(0,i.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getDeviceIds)(t.map((function(e){return e.user})));case 2:return n=e.sent,r=[],i=(0,d.assertGetMe)(),n.forEach((function(e,n){if(e){var a=e.devices,o=e.id;a.forEach((function(e){var t=(0,g.createDeviceWidFromUserAndDevice)(o,e);t.equals(i)||r.push(t)}))}else{__LOG__(2,void 0,void 0,void 0,["messaging"])`getFanOutList: no device is found, just send to the primary device`;var s=(0,g.toUserWid)(t[n]);s.equals(i)||r.push(s)}})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=new _.default("sendMsgAckSyncParser",(function(e){return e.assertTag("ack"),{t:e.attrTime("t"),sync:e.hasAttr("sync")?e.attrString("sync"):null,phash:e.hasAttr("phash")?e.attrString("phash"):null,count:e.hasAttr("count")?e.attrInt("count"):null}}));function b(){return(b=(0,i.default)(a.default.mark((function e(t,n){var r,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,d.getMeUser)(),e.next=3,(0,p.getICDCMeta)(r);case 3:if(i=e.sent,!t.equals(r)){e.next=8;break}e.t0=null,e.next=11;break;case 8:return e.next=10,(0,p.getICDCMeta)(t);case 10:e.t0=e.sent;case 11:o=e.t0,(0,f.populateMessageContextInfo)(n,i,o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,i.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getTable)().get(String(t),!1);case 2:if(null==(null==(r=e.sent)?void 0:r.rowId)){e.next=6;break}return e.next=6,v.default.updateIdentityRangeAfterEncryption(r.rowId,n.map((function(e){return(0,m.createSignalAddress)(e).toString()})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.sendMsgAckSyncParser=S},86578:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createUserDeviceMsgStanza=function(){return T.apply(this,arguments)},t.createGroupDeviceMsgStanza=function(){return w.apply(this,arguments)},t.MsgType=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(18712),u=a(n(41143)),l=n(68691),c=n(256),d=n(55157),f=n(54397),p=n(71701),h=n(38761),_=a(n(22021)),v=n(7991),m=a(n(46797)),g=n(77565),y=n(6357),E=n(19325),S=n(75793),b=n(54302).Mirrored(["Retry","AppStateSync"]);function T(){return(T=(0,o.default)(i.default.mark((function e(t,n,r,a,o){var s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a,e.next=3,(0,v.ensureE2ESessions)([t]);case 3:if(!(0,S.toUserWid)(t).equals((0,p.getMeUser)())||o.type===b.AppStateSync){e.next=10;break}return(0,u.default)(null!=n,"[messaging] createDeviceMsgStanza: no recipient for peer device message"),s=(0,h.createDeviceSentMessage)(a,n),e.next=8,(0,d.populateICDCMeta)((0,S.toUserWid)(n),s);case 8:e.next=12;break;case 10:return e.next=12,(0,d.populateICDCMeta)((0,S.toUserWid)(t),s);case 12:return e.abrupt("return",A(t,null,n,r,s,o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,o.default)(i.default.mark((function e(t,n,a,o,s){var u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.ensureE2ESessions)([n]);case 2:if(s.type!==b.AppStateSync){e.next=4;break}return e.abrupt("return",r.reject(new Error("[messaging] createGroupDeviceMsgStanza: not expect for App State Sync message")));case 4:return u=(0,S.toUserWid)(n).equals((0,p.getMeUser)())?(0,h.createDeviceSentMessage)(o,t):o,e.next=7,(0,d.populateICDCMeta)((0,S.toUserWid)(n),u);case 7:return e.abrupt("return",A(t,n,null,a,u,s));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return C.apply(this,arguments)}function C(){return(C=(0,o.default)(i.default.mark((function e(t,n,r,a,o,u){var p,h,v,S,T,w,A,C,O;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=n||t,v=null!==(p=u.retryCount)&&void 0!==p?p:0,S=(0,c.mediaTypeFromProtobuf)(o),e.next=5,(0,f.encryptMsgProtobuf)(h,v,o);case 5:if(T=e.sent,w=T.type,A=T.ciphertext,C=null,!_.default.supportsFeature(_.default.F.MD_ADV)||w!==g.CiphertextType.Pkmsg){e.next=14;break}return e.next=12,(0,l.getADVEncodedIdentity)();case 12:O=e.sent,C=(0,s.wap)("device-identity",null,O);case 14:if(u.type===b.Retry){e.next=17;break}return e.next=17,(0,d.updateIdentityRange)(a,[h]);case 17:return e.next=19,(0,m.default)().flushBufferToDiskIfNotMemOnlyMode();case 19:return e.abrupt("return",(0,s.wap)("message",{id:(0,s.CUSTOM_STRING)(a.id),to:(0,E.JID)(t),participant:n?(0,E.DEVICE_JID)(n):s.DROP_ATTR,recipient:r?(0,E.USER_JID)(r):s.DROP_ATTR,type:(0,y.typeAttributeFromProtobuf)(o),edit:(0,d.editAttribute)(o),category:u.type===b.AppStateSync?(0,s.CUSTOM_STRING)("peer"):s.DROP_ATTR,push_priority:u.type===b.AppStateSync?(0,s.CUSTOM_STRING)("high"):s.DROP_ATTR},(0,s.wap)("enc",{v:(0,s.CUSTOM_STRING)(c.CIPHERTEXT_VERSION.toString()),type:(0,s.CUSTOM_STRING)(w),count:0===v?s.DROP_ATTR:(0,s.INT)(v),mediatype:(0,c.encodeMaybeMediaType)(S)},A),C));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.MsgType=b},54397:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptMsgProtobuf=function(){return p.apply(this,arguments)},t.encryptMsgSenderKey=function(){return h.apply(this,arguments)};var o=i(n(87757)),s=i(n(48926)),u=n(256),l=n(55157),c=i(n(8643)),d=a(n(61572)),f=n(77565);function p(){return(p=(0,s.default)(o.default.mark((function e(t,n,a){var i,s,f,p,h;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.mediaTypeFromProtobuf)(a),s=new c.default.E2eMessageSend({e2eCiphertextVersion:u.CIPHERTEXT_VERSION,e2eDestination:(0,u.metricsDestinationType)(t),messageMediaType:i?(0,u.metricsMediaType)(i):c.default.MEDIA_TYPE.NONE,retryCount:n}),e.prev=2,e.next=5,d.Cipher.encryptSignalProto(t,(0,l.encodeAndPad)(a));case 5:return f=e.sent,p=f.type,h=f.ciphertext,s.e2eCiphertextType=(0,u.metricsCiphertextType)(p),s.e2eSuccessful=!0,s.commit(),e.abrupt("return",{type:p,ciphertext:h});case 14:return e.prev=14,e.t0=e.catch(2),s.e2eSuccessful=!1,s.weight=1,s.commit(),__LOG__(3,void 0,void 0,void 0,["messaging"])`encryptMsgProtobuf: encryption fail for ${t.toString()}, ${e.t0}`,e.abrupt("return",r.reject(new Error(`[messaging] encryptMsgProtobuf: encryption fail for ${t.toString()}, ${e.t0}`)));case 21:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function h(){return(h=(0,s.default)(o.default.mark((function e(t,n){var a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new c.default.E2eMessageSend({e2eCiphertextType:(0,u.metricsCiphertextType)(f.CiphertextType.Skmsg),e2eCiphertextVersion:u.CIPHERTEXT_VERSION,e2eDestination:c.default.E2E_DESTINATION.GROUP,messageMediaType:c.default.MEDIA_TYPE.NONE,retryCount:0}),e.prev=1,e.next=4,d.Cipher.encryptSenderKeyMsgSignalProto(t,n);case 4:return i=e.sent,a.e2eSuccessful=!0,a.commit(),e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),a.e2eSuccessful=!1,a.weight=1,a.commit(),__LOG__(3,void 0,void 0,void 0,["messaging"])`encryptMsgSenderKey: encryption fail for ${t.toString()}, ${e.t0}`,e.abrupt("return",r.reject(new Error(`[messaging] encryptMsgSenderKey: encryption fail for ${t.toString()}, ${e.t0}`)));case 17:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}},73175:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createFanoutMsgStanza=function(){return O.apply(this,arguments)},t.FANOUT_TYPE=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(18712),u=n(68691),l=n(55157),c=n(256),d=a(n(48629)),f=n(54397),p=n(71701),h=n(38761),_=a(n(22021)),v=n(7991),m=n(4779),g=a(n(46797)),y=a(n(63056)),E=n(77565),S=n(6357),b=n(19325),T=n(75793),w=Object.freeze({CHAT:"chat",GROUP_DIRECT:"groupDirect"});function A(){return C.apply(this,arguments)}function C(){return(C=(0,o.default)(i.default.mark((function e(t,n,a,u){var d,_,v,m,g,y,S,A,C;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=(0,c.mediaTypeFromProtobuf)(a),_=(0,p.getMeUser)(),u.fanoutType!==w.CHAT||1!==n.length||!(0,l.isPrimaryDevice)(n[0])){e.next=11;break}return e.next=5,(0,f.encryptMsgProtobuf)(n[0],0,a);case 5:return v=e.sent,m=v.type,g=v.ciphertext,e.abrupt("return",{shouldHaveIdentity:m===E.CiphertextType.Pkmsg,body:(0,s.wap)("enc",{v:(0,s.CUSTOM_STRING)(c.CIPHERTEXT_VERSION.toString()),type:(0,s.CUSTOM_STRING)(m),mediatype:(0,c.encodeMaybeMediaType)(d)},g)});case 11:return y=!1,S=n.map(function(){var e=(0,o.default)(i.default.mark((function e(n){var r,o,p,v,m;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,T.toUserWid)(n).equals(_)?(0,h.createDeviceSentMessage)(a,t):a,o=u.fanoutType===w.GROUP_DIRECT?(0,T.toUserWid)(n):(0,T.toUserWid)(t),e.next=4,(0,l.populateICDCMeta)(o,r);case 4:return e.prev=4,e.next=7,(0,f.encryptMsgProtobuf)(n,0,r);case 7:return p=e.sent,v=p.type,m=p.ciphertext,v===E.CiphertextType.Pkmsg&&(y=!0),e.abrupt("return",(0,s.wap)("to",{jid:(0,b.DEVICE_JID)(n)},(0,s.wap)("enc",{v:(0,s.CUSTOM_STRING)(c.CIPHERTEXT_VERSION.toString()),type:(0,s.CUSTOM_STRING)(v),mediatype:(0,c.encodeMaybeMediaType)(d)},m)));case 14:return e.prev=14,e.t0=e.catch(4),(0,l.isPrimaryDevice)(n)&&(__LOG__(4,void 0,new Error,!0,["messaging"])`encryptAndSendUserMsg: encryption fail for primary device ${String(n)}`,SEND_LOGS("encryption-fail-for-primary-device")),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}()),e.next=15,r.all(S);case 15:if(A=e.sent,!((C=A.filter((function(e){return null!=e}))).length>0)){e.next=21;break}return e.abrupt("return",{body:(0,s.wap)("participants",null,C),shouldHaveIdentity:y});case 21:return e.abrupt("return",r.reject(new Error("[messaging] encryptAndSendUserMsg: encryption fail for all devices")));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,o.default)(i.default.mark((function e(t,n,r,a,o){var f,p,h,T,C,O,M,I,k;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.ensureE2ESessions)(a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),__LOG__(4,void 0,new Error,void 0,["messaging"])`ensureE2ESessions with error`;case 8:return f=a.map((function(e){return{msgKey:t,receiverId:e}})),e.next=11,(0,m.createOrMergeReceiptRecords)(f);case 11:return e.next=13,A(n,a,r,o);case 13:if(p=e.sent,h=o.fanoutType===w.GROUP_DIRECT?(0,s.wap)("enc",{v:(0,s.CUSTOM_STRING)(c.CIPHERTEXT_VERSION.toString()),type:(0,s.CUSTOM_STRING)(E.CiphertextType.Skmsg)}):null,T=null,!_.default.supportsFeature(_.default.F.MD_ADV)||!p.shouldHaveIdentity){e.next=21;break}return e.next=19,(0,u.getADVEncodedIdentity)();case 19:C=e.sent,T=(0,s.wap)("device-identity",null,C);case 21:return y.default.bspSystemMessageEnabled&&(M=d.default.get(n),null!=(I=null==M?void 0:M.privacyMode)&&(O=(0,s.wap)("biz",{host_storage:(0,s.INT)(I.hostStorage),actual_actors:(0,s.INT)(I.actualActors),privacy_mode_ts:(0,s.INT)(I.privacyModeTs)}))),e.next=24,(0,l.updateIdentityRange)(t,a);case 24:return e.next=26,(0,g.default)().flushBufferToDiskIfNotMemOnlyMode();case 26:return k=t.id,e.abrupt("return",(0,s.wap)("message",{id:(0,s.CUSTOM_STRING)(k),to:(0,b.CHAT_JID)(n),type:(0,S.typeAttributeFromProtobuf)(r),edit:(0,l.editAttribute)(r),device_fanout:o.disableFanout?(0,s.CUSTOM_STRING)("false"):s.DROP_ATTR},p.body,h,T,O));case 28:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}t.FANOUT_TYPE=w},79778:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndSendGroupDirectMsg=function(){return _.apply(this,arguments)},t.resendGroupMsg=v;var i=a(n(87757)),o=a(n(48926)),s=a(n(96486)),u=n(24963),l=n(55157),c=n(4746),d=n(73175),f=a(n(8643)),p=a(n(46797)),h=n(75793);function _(){return(_=(0,o.default)(i.default.mark((function e(t,n,r,a){var o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendGroupDirectMsg: sending ${t} with group ${n.toString()}`,e.next=3,g(t,n,r,a,{fanoutType:d.FANOUT_TYPE.GROUP_DIRECT});case 3:return o=e.sent,(s=o.phash)&&(__LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendGroupDirectMsg: phash mismatch, got server phash ${s}`,new f.default.MdDeviceSyncAck({chatType:f.default.MESSAGE_CHAT_TYPE.GROUP,revoke:(0,l.isRevokeMsg)(r)}).commit(),(0,u.syncDeviceList)(a,"message",s).then((function(){return v(t,n,r,a)}))),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,o.default)(i.default.mark((function e(t,n,r,a){var o,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2,void 0,void 0,void 0,["messaging"])`resendGroupMsg: to ${n.toString()}`,o=Array.from(new Set(a.map((function(e){return e.user})))).map((function(e){return(0,h.createUserWid)(e)})),e.next=4,(0,l.getFanOutList)(o);case 4:if(u=e.sent,0!==(c=s.default.differenceBy(u,a,String)).length){e.next=11;break}return __LOG__(2,void 0,void 0,void 0,["messaging"])`resendGroupMsg: skip sending to the empty list`,e.abrupt("return");case 11:__LOG__(2,void 0,void 0,void 0,["messaging"])`resendGroupMsg: resending to devices ${c.join(",")}`;case 12:return e.next=14,g(t,n,r,c,{fanoutType:d.FANOUT_TYPE.GROUP_DIRECT,disableFanout:!0});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,o.default)(i.default.mark((function e(t,n,a,o,s){var u,f,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.createFanoutMsgStanza)(t,n,a,o,s);case 2:return u=e.sent,e.next=5,(0,p.default)().flushBufferToDiskIfNotMemOnlyMode();case 5:return e.next=7,(0,c.sendStanzaAndReturnAck)(u,{id:t.id,class:"message",from:n,participant:null});case 7:if(f=e.sent,!(h=l.sendMsgAckSyncParser.parse(f)).error){e.next=11;break}return e.abrupt("return",r.reject(new Error("[messaging] encryptAndSendGroupDirectMsg: Invalid ack from server")));case 11:return e.abrupt("return",h.success);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},77089:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndSendGroupMsg=function(){return y.apply(this,arguments)};var a=r(n(87757)),i=r(n(319)),o=r(n(48926)),s=n(79778),u=n(676),l=r(n(22021)),c=r(n(5315)),d=n(10566),f=n(44415),p=n(75793),h=n(55157),_=n(43883),v=Object.freeze({SKMSG:"skmsg",DIRECT:"direct"});function m(){return g.apply(this,arguments)}function g(){return(g=(0,o.default)(a.default.mark((function e(t,n){var r,o,s,u,c,f,m,g,y;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getGroupSenderKeyList)(t);case 2:if(r=e.sent,o={senderKeyList:r,type:v.SKMSG},!n||!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=20;break}return e.next=7,(0,_.getMsgInfoTable)().equals(["msgKey"],String(n));case 7:if(0!==(s=e.sent).length){e.next=10;break}return e.abrupt("return",o);case 10:if(u=r.skDistribList,c=r.skList,f=new Set(u.concat(c).map((function(e){return String((0,p.toUserWid)(e))}))),0!==(m=s.filter((function(e){return!f.has(e.receiverUserJid)})).map((function(e){return(0,p.createWid)(e.receiverUserJid)}))).length){e.next=15;break}return e.abrupt("return",o);case 15:return e.next=17,(0,h.getFanOutList)(m);case 17:return g=e.sent,y=[].concat((0,i.default)(g),(0,i.default)(c),(0,i.default)(u)),e.abrupt("return",{type:v.DIRECT,deviceList:y});case 20:return e.abrupt("return",o);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,o.default)(a.default.mark((function e(t,n,r){var i,o,l,d,h,_,g,y,E;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendGroupMsg: sending ${t}`,i=r.protocolMessage,o=null,(null==i?void 0:i.type)===u.ProtocolMessageType.REVOKE&&(null==i?void 0:i.key)&&(l=i.key,d=l.remoteJid,h=l.id,_=l.participant,d&&h&&_&&(o=new c.default({remote:(0,p.createWid)(d),fromMe:!0,id:h,participant:(0,p.createWid)(_)}))),e.next=6,m(n,o);case 6:if((g=e.sent).type!==v.DIRECT){e.next=12;break}return y=g.deviceList,e.abrupt("return",(0,s.encryptAndSendGroupDirectMsg)(t,n,r,y));case 12:return E=g.senderKeyList,e.abrupt("return",(0,f.encryptAndSendSenderKeyMsg)(t,n,r,E));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},44415:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndSendSenderKeyMsg=function(){return F.apply(this,arguments)};var o=i(n(63038)),s=i(n(319)),u=i(n(87757)),l=i(n(48926)),c=n(18712),d=n(19087),f=n(68691),p=n(256),h=n(55157),_=n(4746),v=n(79778),m=n(54397),g=n(71701),y=i(n(22021)),E=n(7991),S=n(322),b=n(4779),T=i(n(8643)),w=n(10566),A=n(45975),C=i(n(46797)),O=n(69056),M=a(n(61572)),I=n(77565),k=n(6357),P=n(19325),R=n(75793);function D(){return N.apply(this,arguments)}function N(){return(N=(0,l.default)(u.default.mark((function e(t,n){var a,i,o,s;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,(0,E.ensureE2ESessions)(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),__LOG__(4,void 0,new Error,void 0,["messaging"])`ensureE2ESessions with error`;case 10:return e.next=12,M.Session.getGroupSenderKeyInfo(t);case 12:return a=e.sent,i={senderKeyDistributionMessage:{groupId:t.toString({legacy:!0}),axolotlSenderKeyDistributionMessage:a}},o=n.map(function(){var e=(0,l.default)(u.default.mark((function e(t){var n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.populateICDCMeta)((0,R.toUserWid)(t),i);case 3:return e.next=5,(0,m.encryptMsgProtobuf)(t,0,i);case 5:return n=e.sent,e.abrupt("return",{type:n.type,ciphertext:n.ciphertext,participant:t});case 9:if(e.prev=9,e.t0=e.catch(0),__LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendUserMsg: encryption fail for ${t.toString()}, ${e.t0}`,!(0,h.isPrimaryDevice)(t)){e.next=14;break}return e.abrupt("return",r.reject(new Error(`[messaging] encryptAndSendUserMsg: encryption fail for primary device ${String(t)}`)));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()),e.next=17,r.all(o);case 17:return s=e.sent,e.abrupt("return",s.filter(Boolean));case 19:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function L(){return x.apply(this,arguments)}function x(){return(x=(0,l.default)(u.default.mark((function e(t,n,r){var a,i,o,s,l,d,_,v,g;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,h.encodeAndPad)(r),i=(0,p.mediaTypeFromProtobuf)(r),e.next=4,D(t,n,a);case 4:return o=e.sent,e.next=7,(0,m.encryptMsgSenderKey)(t,a);case 7:if(s=e.sent,l=null,d=!1,o&&o.length>0&&(l=(0,c.wap)("participants",null,o.map((function(e){var t=e.type,n=e.ciphertext,r=e.participant;return t===I.CiphertextType.Pkmsg&&(d=!0),(0,c.wap)("to",{jid:(0,P.DEVICE_JID)(r)},(0,c.wap)("enc",{v:(0,c.CUSTOM_STRING)(p.CIPHERTEXT_VERSION.toString()),type:(0,c.CUSTOM_STRING)(t)},n))})))),_=(0,c.wap)("enc",{v:(0,c.CUSTOM_STRING)(p.CIPHERTEXT_VERSION.toString()),type:(0,c.CUSTOM_STRING)(I.CiphertextType.Skmsg),mediatype:(0,p.encodeMaybeMediaType)(i)},s.ciphertext),v=null,!y.default.supportsFeature(y.default.F.MD_ADV)||!d){e.next=18;break}return e.next=16,(0,f.getADVEncodedIdentity)();case 16:g=e.sent,v=(0,c.wap)("device-identity",null,g);case 18:return e.abrupt("return",[l,_,v]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=new d.PromiseQueueMap;function F(){return(F=(0,l.default)(u.default.mark((function e(t,n,a,i){var d,f,p,m,y,E,I,R,D,N,x,F,G,B,j,Y,K;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendSenderKeyMsg: sending ${t}`,d=t.id,f=i.skDistribList,p=i.skList,m=i.rotateKey,y=p.concat(f),e.next=6,(0,A.phashV2)([].concat((0,s.default)(y),[(0,g.assertGetMe)()]));case 6:return E=e.sent,e.next=9,(0,b.createOrMergeReceiptRecords)(y.map((function(e){return{msgKey:t,receiverId:e}})));case 9:return e.next=11,U.enqueue(n.toString(),(0,l.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=3;break}return e.next=3,M.Session.deleteGroupSenderKeyInfo(n);case 3:return e.abrupt("return",L(n,f,a));case 4:case"end":return e.stop()}}),e)}))));case 11:return I=e.sent,R=(0,o.default)(I,3),D=R[0],N=R[1],x=R[2],F=(0,c.wap)("message",{id:(0,c.CUSTOM_STRING)(d),to:(0,P.CHAT_JID)(n),phash:(0,c.CUSTOM_STRING)(E),type:(0,k.typeAttributeFromProtobuf)(a),edit:(0,h.editAttribute)(a)},D,N,x),e.next=19,(0,h.updateIdentityRange)(t,y);case 19:return e.next=21,(0,C.default)().flushBufferToDiskIfNotMemOnlyMode();case 21:return e.next=23,(0,_.sendStanzaAndReturnAck)(F,{id:d,class:"message",from:n,participant:null});case 23:if(G=e.sent,!(B=h.sendMsgAckSyncParser.parse(G)).error){e.next=28;break}return __LOG__(3,void 0,void 0,void 0,["messaging"])`encryptAndSendSenderKeyMsg: Invalid ack from server`,e.abrupt("return",r.reject(new Error("[messaging] encryptAndSendSenderKeyMsg: Invalid ack from server")));case 28:return e.next=30,(0,w.markHasSenderKey)(n,f);case 30:return j=B.success,Y=j.phash,K=j.count,Y&&Y!==E&&(__LOG__(2,void 0,void 0,void 0,["messaging"])`encryptAndSendSenderKeyMsg: phash mismatch, got server phash ${Y}`,new T.default.MdDeviceSyncAck({chatType:T.default.MESSAGE_CHAT_TYPE.GROUP,revoke:(0,h.isRevokeMsg)(a)}).commit(),(0,O.sendQueryGroup)(n).then((function(){(0,v.resendGroupMsg)(t,n,a,y)}))),null!=K&&(0,S.getTable)().merge(String(t),{count:K}),e.abrupt("return",B.success);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},17259:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndSendMsg=function(e){var t,n=e.id,a=e.to;if(!n||!n.id)return r.reject(new Error("[messaging] sending message without an id"));if(!a)return r.reject(new Error("[messaging] sending message without an remote id"));l.default.supportsFeature(l.default.F.MD_BACKEND)&&e.type===c.TYPE.STICKER&&null==e.deprecatedMms3Url&&(e.deprecatedMms3Url=p);if(e.asMms){var d=e.isUnsentPhoneMsg();t=d?{type:e.type}:e.avParams(),l.default.supportsFeature(l.default.F.MD_BACKEND)&&e.type===c.TYPE.STICKER&&!d&&null==t.url&&(t.url=p)}var f=(0,o.createMsgProtobuf)(e,t||{});if(a.isUser())return(0,i.encryptAndSendUserMsg)(n,a,f,e.multicast);if(a.isGroup())return u.default.find(a).then((function(){return(0,s.encryptAndSendGroupMsg)(n,a,f)}));return r.reject(new Error("[messaging] unsupported remote jid type"))},Object.defineProperty(t,"sendRetry",{enumerable:!0,get:function(){return d.sendRetry}}),Object.defineProperty(t,"encodeAndPad",{enumerable:!0,get:function(){return f.encodeAndPad}}),Object.defineProperty(t,"getFanOutList",{enumerable:!0,get:function(){return f.getFanOutList}});var i=n(81541),o=n(38761),s=n(77089),u=a(n(13361)),l=a(n(22021)),c=n(16551),d=n(58972),f=n(55157),p="https://whatsapp.net"},58972:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendRetry=function(){return c.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=r(n(41143)),s=n(4746),u=n(86578),l=n(38761);function c(){return(c=(0,i.default)(a.default.mark((function e(t,n,r,i,c){var d,f,p,h,_,v;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=i.id.id,f=n||t,__LOG__(2,void 0,void 0,void 0,["messaging"])`sendRetry: id ${d} to ${t.toString()}, requester: ${f.toString()}, count: ${c}`,i.asMms&&(p=i.isUnsentPhoneMsg()?{type:i.type}:i.avParams()),h=(0,l.createMsgProtobuf)(i,p||{}),_={type:u.MsgType.Retry,retryCount:c},!t.isUser()){e.next=12;break}return e.next=9,(0,u.createUserDeviceMsgStanza)(t,r,i.id,h,_);case 9:v=e.sent,e.next=16;break;case 12:return(0,o.default)(null!=n,"[messaging] sendRetry: no participant for group retry message"),e.next=15,(0,u.createGroupDeviceMsgStanza)(t,n,i.id,h,_);case 15:v=e.sent;case 16:return __LOG__(2,void 0,void 0,void 0,["messaging"])`sendRetry: sending ${d} to ${t.toString()}`,e.abrupt("return",(0,s.sendStanzaAndWaitForAck)(v,{id:d,class:"message",from:t,participant:n}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},64589:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.castStanza)((0,a.wap)("presence",{type:e,name:(0,a.MAYBE_CUSTOM_STRING)(o.default.pushname)}))};var a=n(18712),i=n(4746),o=r(n(93743))},89312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.castStanza)((0,r.wap)("presence",{id:(0,r.generateId)(),to:(0,i.CHAT_JID)(e),type:"subscribe"}))};var r=n(18712),a=n(4746),i=n(19325)},49991:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.sendIq)((0,i.wap)("iq",{to:(0,l.CHAT_JID)(e),type:"set",xmlns:"w:profile:picture",id:(0,i.generateId)()},t?(0,i.wap)("picture",{type:"image"},t):null),c).then((function(e){return e.success?{id:e.result.id}:r.reject(new s.ServerStatusCodeError(e.errorCode,e.errorText))}))};var i=n(18712),o=n(4746),s=n(14650),u=a(n(98112)),l=n(19325),c=new u.default("photoResponseParser",(function(e){return e.assertAttr("type","result"),e.hasChild("picture")?{id:e.child("picture").attrInt("id")}:{id:null}}))},49327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.castStanza)((0,r.wap)("presence",{name:(0,r.MAYBE_CUSTOM_STRING)(e)}))};var r=n(18712),a=n(4746)},77841:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,type:"set",xmlns:"w:stats",id:(0,a.generateId)()},(0,a.wap)("add",{t:(0,a.INT)(t)},e));return(0,i.sendIq)(n,o).then((function(e){if(!e.success){var t=e.errorCode,n=e.errorText;return __LOG__(3)`fieldStatsUpload: sever response with ${t}, ${n}`,{errorCode:t,errorText:n}}}))};var a=n(18712),i=n(4746),o=new(r(n(98112)).default)("uploadStats",(function(e){if(e.hasChild("error")){var t=e.child("error"),n=t.attrInt("code"),r=t.attrString("text");return __LOG__(3)`fieldStatsUpload: sever response with ${n}, ${r}`,{errorCode:n,errorText:r}}__LOG__(2)`fieldStatsUpload: success`}))},77565:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaType=t.CiphertextType=void 0;var r=n(54302)({Skmsg:"skmsg",Pkmsg:"pkmsg",Msg:"msg"});t.CiphertextType=r;var a=n(54302)({Photo:"photo",Video:"video",Audio:"audio",Ptt:"ptt",Location:"location",Contact:"contact",Document:"document",Url:"url",Call:"call",Gif:"gif",Future:"future",ContactArray:"contact_array",LiveLocation:"live_location",ProfilePic:"profile_pic",Sticker:"sticker",Hsm:"hsm",ProductImage:"product_image",Template:"template",MdAppState:"md_app_state",MdHistorySync:"md_history_sync",List:"list",ListResponse:"list_response",Button:"button",ButtonResponse:"button_response",Order:"order",Product:"product"});t.MediaType=a},54841:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.wap)("iq",{to:a.S_WHATSAPP_NET,type:"set",id:(0,a.generateId)(),xmlns:"md"},(0,a.wap)("remove-companion-device",{jid:(0,u.DEVICE_JID)((0,o.assertGetMe)())}));return(0,i.sendIq)(e,l).then((function(e){return e.success?{status:e.result.status}:{status:e.errorCode}}))};var a=n(18712),i=n(4746),o=n(71701),s=r(n(98112)),u=n(19325),l=new s.default("unpairResponse",(function(e){e.assertTag("iq"),e.assertFromServer();var t=200;return"error"===e.attrString("type")&&(t=e.child("error").attrInt("code")),{status:t}}))},11535:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.uploadPreKeys=function(){var e=new s.PromiseRetryLoop({name:"uploadPreKeys",timer:v,code:function(e){return __LOG__(2)`uploadPreKeys: running`,r.all([f.waSignalStore.getRegistrationInfo(),f.waSignalStore.getSignedPreKey()]).then((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];if(!n||!r)throw new Error("No signal info is available");var a=n.registrationId,s=n.identityKeyPair;return f.waSignalStore.getOrGenPreKeys(30,c.generatePreKeyPair).then((function(e){if(0===e.length)throw new Error("No preKey is available");return[(0,o.wap)("iq",{id:(0,o.generateId)(),xmlns:"encrypt",type:"set",to:o.S_WHATSAPP_NET},(0,o.wap)("registration",null,(0,o.BIG_ENDIAN_CONTENT)(a)),(0,o.wap)("type",null,l.default.KEY_BUNDLE_TYPE),(0,o.wap)("identity",null,s.pubKey),(0,o.wap)("list",null,e.map(p.xmppPreKey)),(0,p.xmppSignedPreKey)(r)),e[e.length-1].keyId]})).then((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return(0,u.waitForConnection)().then((function(){return f.waSignalStore.markKeyAsUploaded(r)})).then((function(){return(0,u.sendIqWithoutRetry)(n,_)})).then((function(e){if(e.success)return f.waSignalStore.setServerHasPreKeys(!0),{success:!0};var t=e.errorCode;return t>=500?__LOG__(3)`_uploadPreKeys: server requested backoff ${t}`:406===t?__LOG__(3)`_uploadPreKeys: uploaded invalid keys`:__LOG__(3)`_uploadPreKeys: unrecognized error ${t}`,{errorCode:e.errorCode,errorText:e.errorText}})).catch((function(){__LOG__(3)`_uploadPreKeys: disconnected, unclear if on server`}))}))})).then((function(t){t&&t.success?e():__LOG__(2)`uploadPreKeys: retrying (after delay)`}))}});return e.start(),e.promise()};var i=a(n(63038)),o=n(18712),s=n(45877),u=n(4746),l=a(n(34263)),c=n(91056),d=a(n(98112)),f=n(1018),p=n(36918),h={error:!1,result:!0},_=new d.default("uploadPreKeyResParser",(function(e){if(e.assertTag("iq"),e.assertFromServer(),e.attrEnum("type",h))return{success:!0};var t=e.child("error");return{errorCode:t.attrInt("code"),errorText:t.hasAttr("text")?t.attrString("text"):""}}));var v={algo:{type:"fibonacci",first:1e3,second:2e3},max:61e4}},8160:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.onMsgProcessingThread=function(){return p.apply(this,arguments)},t.waitForOfflineMsgThread=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?f.chatQueue.wait(e):f.allChatQueue.wait()},t.waitForOnlineMsgThread=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?d.chatQueue.wait(e):d.allChatQueue.wait()},t._online=t._waitForMainStream=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(19087),u=a(n(34541)),l=a(n(66028)),c=new r((function(e){u.default.on("main_stream_mode_ready",(function(){e()}))}));t._waitForMainStream=c;var d={allChatQueue:new s.PromiseQueue(5e3),chatQueue:new s.PromiseQueueMap};t._online=d;var f={allChatQueue:new s.PromiseQueue,chatQueue:new s.PromiseQueueMap};function p(){return(p=(0,o.default)(i.default.mark((function e(t,n,r){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||l.default.isResumeFromRestartComplete()){e.next=4;break}return e.abrupt("return",f.allChatQueue.enqueue((function(){return f.chatQueue.enqueue(t,r)})));case 4:return e.next=6,c;case 6:return e.abrupt("return",d.allChatQueue.enqueue((function(){return d.chatQueue.enqueue(t,r)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},34876:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return w.apply(this,arguments)};var o=i(n(87757)),s=i(n(48926)),u=n(18712),l=n(68691),c=n(256),d=n(4746),f=i(n(34263)),p=i(n(22021)),h=n(7991),_=i(n(46797)),v=i(n(75554)),m=n(17259),g=a(n(61572)),y=n(77565),E=a(n(66279)),S=n(19325),b=i(n(12717)),T=n(75793);f.default.VOIP_LOG_COLOR;function w(){return(w=(0,s.default)(o.default.mark((function e(t,n){var r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.common,a=(0,T.createWid)(r.peer_jid),!b.default.isGroupCall(a)){e.next=6;break}return e.abrupt("return",A((0,u.CUSTOM_STRING)(r.peer_jid),a,t));case 6:return e.prev=6,e.next=9,O(t,a,n);case 9:return i=e.sent,e.abrupt("return",A(i,a,t));case 13:e.prev=13,e.t0=e.catch(6),__LOG__(3)`voip:encryptAndSendSignalingMsg: Failed to encrypt and send msg`;case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function A(){return C.apply(this,arguments)}function C(){return(C=(0,s.default)(o.default.mark((function e(t,n,r){var a,i,s,l,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,S.voipXmlToWapNode)(r.payload),i=(0,v.default)(),s=(0,u.wap)("call",{to:t,id:(0,u.CUSTOM_STRING)(i)},a),e.next=5,(0,_.default)().flushBufferToDiskIfNotMemOnlyMode();case 5:return e.next=7,(0,d.sendStanzaAndReturnAck)(s,{id:i,class:"call",from:n,participant:null});case 7:return l=e.sent,c=(0,S.wapNodeToVoipXml)(l),e.abrupt("return",{payload:c,status:200});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return M.apply(this,arguments)}function M(){return(M=(0,s.default)(o.default.mark((function e(t,n,a){var i,u,l,c,d,p,_,v,m,g,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.payload[2].findIndex((function(e){return"destination"===e[0]})),!(u=t.payload[2][i])){e.next=28;break}return t.payload[0]!==E.TYPE_STR.OFFER&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("call offer check")),l=u[2].map((function(e){return(0,T.createDeviceWidFromUserAndDevice)(e[1].jid.user,e[1].jid.device)})),e.prev=5,e.next=8,(0,h.ensureE2ESessions)(l);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),__LOG__(3)`voip:encryptMsgCallKey: Could not establish E2E session with all deviceWids`;case 13:return c=!1,d=!1,e.next=17,r.all(u[2].map(function(){var e=(0,s.default)(o.default.mark((function e(n,r){var a,i,s,u,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(n[2])){e.next=17;break}return a=D(n[2]),i=l[r],e.prev=3,e.next=6,N(a,i,R(t.payload[2]));case 6:s=e.sent,u=s.encNode,f=s.shouldHaveIdentity,d=d||f,P(n[2],u),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),__LOG__(3)`voip:encryptMsgCallKey: Signal encryption failed for ${i.toString()}, ${e.t0}`,c=!0;case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}()));case 17:if(!c){e.next=22;break}__LOG__(3)`voip:encryptMsgCallKey: Removing all enc nodes due to encryption failure`,u[2].forEach((function(e){return k(e)})),e.next=25;break;case 22:if(!d){e.next=25;break}return e.next=25,x(t.payload[2]);case 25:return e.abrupt("return",(0,S.USER_JID)(n));case 28:if(I(t.payload[2])){e.next=30;break}return e.abrupt("return",(0,S.DEVICE_JID)(n));case 30:return e.prev=30,p=[n],n.isCompanion()&&(_=(0,T.createDeviceWidFromUserAndDevice)(n.user,f.default.DEVICE.PRIMARY_DEVICE),p.unshift(_)),e.next=35,(0,h.ensureE2ESessions)(p);case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(30),__LOG__(3)`voip:encryptAndSendSignalingMsg: Could not establish E2E session with deviceWid`;case 40:return v=D(t.payload[2]),e.prev=41,e.next=44,N(v,n,R(t.payload[2]));case 44:y=e.sent,m=y.encNode,g=y.shouldHaveIdentity,e.next=58;break;case 49:if(e.prev=49,e.t2=e.catch(41),a!==E.TYPE.OFFER){e.next=57;break}m=null,g=!1,__LOG__(3)`voip:encryptAndSendSignalingMsg: Sending offer without enc`,e.next=58;break;case 57:throw e.t2;case 58:if(P(t.payload[2],m),!g){e.next=62;break}return e.next=62,x(t.payload[2]);case 62:return e.abrupt("return",(0,S.DEVICE_JID)(n));case 63:case"end":return e.stop()}}),e,null,[[5,10],[30,37],[41,49]])})))).apply(this,arguments)}function I(e){return null!=e&&e.findIndex((function(e){return"enc"===e[0]}))>=0}function k(e){if(null!=e){var t=e.findIndex((function(e){return"enc"===e[0]}));e.splice(t,1)}}function P(e,t){var n=e.findIndex((function(e){return"enc"===e[0]}));n>=0&&(e[n]=t)}function R(e){var t=e.find((function(e){return"enc"===e[0]})),n=t&&t[1]&&t[1].count;return null!=n?n:0}function D(e){var t=e.find((function(e){return"enc"===e[0]})),n=t&&t[2];return{call:{callKey:new Uint8Array(n)}}}function N(){return L.apply(this,arguments)}function L(){return(L=(0,s.default)(o.default.mark((function e(t,n,r){var a,i,s,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Cipher.encryptSignalProto(n,(0,m.encodeAndPad)(t));case 2:return a=e.sent,i=a.type,s=a.ciphertext,l=(0,u.wap)("enc",{v:(0,u.CUSTOM_STRING)(c.CIPHERTEXT_VERSION.toString()),type:(0,u.CUSTOM_STRING)(i),count:(0,u.INT)(r)},s),e.abrupt("return",{encNode:l,shouldHaveIdentity:i===y.CiphertextType.Pkmsg});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return U.apply(this,arguments)}function U(){return(U=(0,s.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.default.supportsFeature(p.default.F.MD_ADV)){e.next=5;break}return e.next=3,(0,l.getADVEncodedIdentity)();case 3:n=e.sent,t.push((0,u.wap)("device-identity",null,n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},61982:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return u.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(33441),s=n(1018);function u(){return(u=(0,i.default)(a.default.mark((function e(t){var n,r,i,u,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.waSignalStore.getRegistrationInfo();case 2:if(r=e.sent){e.next=5;break}throw Error("No registration info found");case 5:return i=r.identityKeyPair,u=null!==(n=t[1]&&parseInt(t[1].count,10))&&void 0!==n?n:0,e.next=9,(0,o.prepareKeysForRetry)(u,i);case 9:return(l=e.sent)&&t[2]&&Array.isArray(t[2])&&t[2].push(l),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},31676:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return d.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(41143)),u=n(24963),l=n(38812),c=n(75793);function d(){return(d=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.all(t.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user_raw_jid,r=t.phash,a=(0,c.createUserWid)(n),e.next=4,(0,l.doesDeviceHashMatch)(a,r);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",a);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 2:return n=e.sent.filter(Boolean),e.abrupt("return",(0,u.syncDeviceList)(n,"voip").then((function(){})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,s.default)(!0,"This module is MD-only.")},63657:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a=e.common,d=(0,c.createWid)(a.peer_jid);d.isGroupCall()?(t=(0,l.GROUP_CALL_JID)(d),n=r.resolve()):(t=(0,l.DEVICE_JID)(d),n=(0,s.ensureE2ESessions)([d]));return n.then((function(){var n=(0,l.voipXmlToWapNode)(e.payload),r=(0,u.default)(),a=(0,i.wap)("call",{to:t,id:(0,i.CUSTOM_STRING)(r)},n);return(0,o.sendStanzaAndReturnAck)(a,{id:r,class:"call",from:d,participant:null}).then((function(e){return{payload:(0,l.wapNodeToVoipXml)(e),status:200}}))}))};var i=n(18712),o=n(4746),s=n(7991),u=a(n(75554)),l=n(19325),c=n(75793)},68069:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return d.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(18712),s=n(4746),u=n(1018),l=n(66279),c=n(19325);function d(){return(d=(0,i.default)(a.default.mark((function e(t,n){var r,i,d,f=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:0,e.next=3,u.waSignalStore.getRegistrationInfo();case 3:if(i=e.sent){e.next=6;break}throw Error("No registration info found");case 6:d=(0,o.wap)("receipt",{to:(0,c.DEVICE_JID)(n.peer_jid),id:(0,o.CUSTOM_STRING)(t),type:(0,o.CUSTOM_STRING)(l.ENC_RETRY_RECEIPT_ATTRS.GROUP_CALL)},(0,o.wap)("enc_rekey",{"call-creator":(0,c.DEVICE_JID)(n.call_creator),"call-id":(0,o.CUSTOM_STRING)(n.call_id),count:(0,o.INT)(r+1)}),(0,o.wap)("registration",null,(0,o.BIG_ENDIAN_CONTENT)(i.registrationId))),(0,s.castStanza)(d);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},63503:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return g.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(53939),u=a(n(91080)),l=a(n(41143)),c=n(68691),d=a(n(34263)),f=n(676),p=n(84393),h=r(n(61572)),_=n(87442),v=n(77565),m=n(47065);function g(){return(g=(0,o.default)(i.default.mark((function e(t,n){var r,a,o,s,l,f,p,h,m,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.payload[2]&&n.payload[2].find((function(e){return"enc"===e[0]})),o=t.peer_jid,a&&o){e.next=4;break}return e.abrupt("return",{result:_.E2EProcessResult.SUCCESS});case 4:if(s=0,(null===(r=a[1])||void 0===r?void 0:r.count)&&(s=parseInt(a[1].count,10)||0),l={e2eType:a[1].type,mediaType:null,ciphertext:new Uint8Array(a[2]),retryCount:s},e.prev=7,f=n.payload[2].find((function(e){return"device-identity"===e[0]})),null==o.device||o.device===d.default.DEVICE.PRIMARY_DEVICE||l.e2eType!==v.CiphertextType.Pkmsg||f){e.next=12;break}return __LOG__(2)`voip:validateAndDecryptEnc: expected device-identity with pkmsg enc`,e.abrupt("return",{result:_.E2EProcessResult.PARSE_ERROR});case 12:if(!f){e.next=20;break}return p=new Uint8Array(f[2]),e.next=16,(0,c.validateADVwithEncs)(o,p,[l]);case 16:if(e.sent){e.next=19;break}return e.abrupt("return",{result:_.E2EProcessResult.PARSE_ERROR});case 19:__LOG__(2)`voip:validateAndDecryptEnc: successfully validated ADV device-identity`;case 20:return e.next=22,y(l,o);case 22:return h=e.sent,m=h.result,g=h.decrypted,m===_.E2EProcessResult.SUCCESS&&(a[2]=Array.prototype.slice.call(new Uint8Array((0,u.default)(g,"decrypted")))),e.abrupt("return",{result:m,retryCount:s});case 29:return e.prev=29,e.t0=e.catch(7),__LOG__(3)`voip:validateAndDecryptEnc error`,e.abrupt("return",{result:_.E2EProcessResult.PARSE_ERROR});case 33:case"end":return e.stop()}}),e,null,[[7,29]])})))).apply(this,arguments)}function y(e,t){return(0,l.default)(e.e2eType!==v.CiphertextType.Skmsg,"VoIP enc type should not be skmsg"),h.Cipher.decryptSignalProto(t,e.e2eType,e.ciphertext).then((function(e){var t=(0,m.unpad)(e),n=(0,s.decodeProto)(f.MessageSpec,t);return n.call&&n.call.callKey?{result:_.E2EProcessResult.SUCCESS,decrypted:n.call.callKey}:{result:_.E2EProcessResult.PARSE_ERROR}})).catchType(p.SignalDecryptionError,(function(e){return __LOG__(3)`voip:decryptSignalProto failed with decryption error; ${e}`,{result:_.E2EProcessResult.RETRY}})).catch((function(e){return __LOG__(3)`voip:decryptSignalProto failed with unexpected error; ${e}`,{result:_.E2EProcessResult.PARSE_ERROR}}))}},90496:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getClientPayloadForLogin=function(e){var t=(0,d.assertGetMe)(),n=(0,a.default)((0,a.default)({},_(e)),{},{username:parseInt(t.user,10),device:null!=t.device?t.device:0});return(0,i.encodeProto)(h.ClientPayloadSpec,n).readByteArray()},t.getClientPayloadForRegistration=function(e,t,n){var r=v(),o=m(),s=(0,a.default)((0,a.default)({},_(n)),{},{regData:{buildHash:r,companionProps:o,eRegid:(0,u.intToBytes)(4,e.registrationId),eKeytype:(0,u.intToBytes)(1,5),eIdent:e.identityKeyPair.pubKey,eSkeyId:(0,u.intToBytes)(3,t.keyId),eSkeyVal:t.keyPair.pubKey,eSkeySig:t.signature}});return(0,i.encodeProto)(h.ClientPayloadSpec,s).readByteArray()},t.getBuildHash=v,t.getCompanionProps=m,t.getUserAgent=g,t.getPlatformTypeFromName=y,t.getWebSubPlatform=E;var a=r(n(81109)),i=n(46042),o=n(92827),s=r(n(21144)),u=n(21279),l=n(19530),c=r(n(34263)),d=n(71701),f=n(93239),p=r(n(65122)),h=n(24935);function _(e){return{passive:!!e&&e.passive,connectType:h.ClientPayloadConnectType.WIFI_UNKNOWN,connectReason:h.ClientPayloadConnectReason.USER_ACTIVATED,userAgent:g(),webInfo:{webSubPlatform:E()}}}function v(){var e=(0,o.decodeB64)((0,p.default)(c.default.VERSION_BASE));return new Uint8Array(e)}function m(){var e,t=s.default.info();if(t.version&&""!==t.version){var n=t.version.split(".");n.length>0&&t.version&&/^[0-9\.]+$/.test(t.version)&&(e={primary:parseInt(n[0],10),secondary:n.length>1?parseInt(n[1],10):void 0,tertiary:n.length>2?parseInt(n[2],10):void 0})}var r={os:t.os,version:e,platformType:y(t.name),requireFullSync:!0};return(0,i.encodeProto)(l.CompanionPropsSpec,r).readByteArray()}function g(){var e=f.deviceInfo.get(),t=h.UserAgentReleaseChannel.RELEASE;return{appVersion:{primary:c.default.VERSION.p,secondary:c.default.VERSION.s,tertiary:c.default.VERSION.t},platform:h.UserAgentPlatform.WEB,releaseChannel:t,mcc:e.mcc,mnc:e.mnc,osVersion:e.osVersion,manufacturer:e.manufacturer,device:e.device,osBuildNumber:e.osBuild,localeLanguageIso6391:e.lg,localeCountryIso31661Alpha2:e.lc}}function y(e){switch(e){case"Chrome":return l.CompanionPropsPlatformType.CHROME;case"Firefox":return l.CompanionPropsPlatformType.FIREFOX;case"IE":return l.CompanionPropsPlatformType.IE;case"Opera":return l.CompanionPropsPlatformType.OPERA;case"Safari":return l.CompanionPropsPlatformType.SAFARI;case"Edge":return l.CompanionPropsPlatformType.EDGE;case"electron":case"Desktop":return l.CompanionPropsPlatformType.DESKTOP;case"ipad":case"iPad":return l.CompanionPropsPlatformType.IPAD;case"tablet":case"Android tablet":return l.CompanionPropsPlatformType.ANDROID_TABLET;case"Ohana":return l.CompanionPropsPlatformType.OHANA;case"Aloha":return l.CompanionPropsPlatformType.ALOHA;case"Catalina":return l.CompanionPropsPlatformType.CATALINA;default:return l.CompanionPropsPlatformType.UNKNOWN}}function E(){switch(c.default.WAM_PLATFORM){case"WEB":return h.WebInfoWebSubPlatform.WEB_BROWSER;case"DARWIN":case"DARWIN_BETA":return h.WebInfoWebSubPlatform.DARWIN;case"WIN32":case"WIN32_BETA":return h.WebInfoWebSubPlatform.WIN32;case"MACSTORE":return h.WebInfoWebSubPlatform.APP_STORE;case"WINSTORE":return h.WebInfoWebSubPlatform.WIN_STORE;default:return}}},25769:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(0,A.isRegistered)())return t=e,D().then((function(e){return r.all([C.waSignalStore.getRegistrationInfo(),C.waSignalStore.getSignedPreKey(),e])})).then(function(){var e=(0,u.default)(s.default.mark((function e(n){var a,i,u,c,d,f;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,l.default)(n,3),i=a[0],u=a[1],c=a[2],u&&i){e.next=3;break}throw new Error("Invalid signal credentials");case 3:return d=(0,S.getClientPayloadForRegistration)(i,u,t),e.t0=y.default,e.next=7,w.waNoiseInfo.get();case 7:return e.t1=e.sent,f=(0,e.t0)(e.t1,"yield waNoiseInfo.get()").staticKeyPair,e.abrupt("return",r.all([N(f,o,c),o.encrypt(r.resolve(d))]));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).then((function(e){var t=(0,l.default)(e,2),n=t[0],r=t[1];return o.send((0,_.encodeProto)(M.HandshakeMessageSpec,{clientFinish:{static:n,payload:r}}).readByteArray()),o.finish()})).then((function(e){return __LOG__(2)`openChatSocketForRegistration success, resetting round`,e})).catch((function(e){__LOG__(3)`openChatSocketForRegistration error ${e}`}));var t;return function(e){return D().then(function(){var t=(0,u.default)(s.default.mark((function t(n){var a,i;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.default.incrementProgress(),t.t0=y.default,t.next=4,w.waNoiseInfo.get();case 4:return t.t1=t.sent,a=(0,t.t0)(t.t1,"yield waNoiseInfo.get()").staticKeyPair,i=(0,S.getClientPayloadForLogin)(e),t.abrupt("return",r.all([N(a,o,n),o.encrypt(r.resolve(i))]));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()).then((function(e){var t=(0,l.default)(e,2),n=t[0],r=t[1];return b.default.incrementProgress(),o.send((0,_.encodeProto)(M.HandshakeMessageSpec,{clientFinish:{static:n,payload:r}}).readByteArray()),o.finish()})).then((function(e){return b.default.incrementProgress(),__LOG__(2)`openChatSocketForLogin success, resetting round`,e})).catch((function(e){__LOG__(3)`openChatSocketForLogin error ${e}`}))}(e)};var o,s=i(n(87757)),u=i(n(48926)),l=i(n(63038)),c=n(71023),d=n(65984),f=n(33742),p=n(17664),h=n(53939),_=n(46042),v=n(17643),m=n(92827),g=n(98426),y=i(n(91080)),E=n(90066),S=n(90496),b=i(n(34541)),T=a(n(48935)),w=n(93239),A=n(79583),C=n(1018),O=i(n(77466)),M=n(24935),I=i(n(61110)),k=new Uint8Array([87,65,5,c.DICT_VERSION]),P="WhatsAppLongTerm1",R="142375574d0a587166aae71ebe516437c4a28b73e3695c6ce1f7f9545da8ee6b";function D(){var e=(0,A.getRoutingInfo)(),t=e?e.edgeRouting:null,n=t?(0,m.encodeB64UrlSafe)(t):null,a=new O.default({routingToken:n}),i=T.keyPair();return(0,I.default)(a,"change:socket").cancellable().then((function(){return a.socket})).finally((function(){a.deactivate()})).then((function(e){var n=void 0;if(t){var r=new v.Binary;r.write("ED",0,1),r.writeUint8(t.byteLength>>16),r.writeUint16(65535&t.byteLength),r.writeBuffer(t),n=r.readByteArray(),__LOG__(2)`openChatSocket preIntro ${n}`}var a=n?v.Binary.build(n,k).readByteArray():k,s=new d.FrameSocket(e,a);(o=new f.NoiseHandshake(s)).start("Noise_XX_25519_AESGCM_SHA256\0\0\0\0",k),__LOG__(2)`openChatSocket send hello`,o.authenticate(i.pubKey);var u={clientHello:{ephemeral:i.pubKey}};return o.sendAndReceive((0,_.encodeProto)(M.HandshakeMessageSpec,u).readByteArray())})).then((function(e){return function(e,t,n){__LOG__(2)`openChatSocket rcv hello`,__LOG__(2)`server hello content: ${(0,g.toLowerCaseHex)(t)}`;var a=(0,h.decodeProto)(M.HandshakeMessageSpec,t).serverHello;if(!a)throw new Error("ServerHello payload error");var i=a.ephemeral,o=a.static,s=a.payload;if(null==i||null==o||null==s)throw new Error("Missing server Ephemeral");__LOG__(2)`serverEphemeral: ${(0,g.toLowerCaseHex)(new Uint8Array(i))}`,__LOG__(2)`serverStaticCiphertext: ${(0,g.toLowerCaseHex)(new Uint8Array(o))}`,__LOG__(2)`certificateCiphertext: ${(0,g.toLowerCaseHex)(new Uint8Array(s))}`,e.authenticate(i),e.mixIntoKey(T.sharedSecret(i,n.privKey));var u=e.decrypt(o),l=u.then((function(e){return T.sharedSecret(e,n.privKey)}));return e.mixIntoKey(l),r.all([u,e.decrypt(s),i])}(o,e,i)})).then((function(e){var t=(0,l.default)(e,3),n=t[0],r=t[1],a=t[2];return __LOG__(2)`verifying certificate`,function(e,t){var n=(0,h.decodeProto)(M.NoiseCertificateSpec,e);if(!n)throw new Error("Missing server Ephemeral");var r=n.details,a=n.signature;if(!r)throw new Error("verifyCertificate cert missing details");if(!a)throw new Error("verifyCertificate cert missing signature");var i=(0,h.decodeProto)(M.DetailsSpec,r);if(i.issuer!==P)throw new Error(`verifyCertificate unrecognized issuer "${String(i.issuer)}"`);if(null!=i.expires&&(0,E.castLongIntToUnixTime)(i.expires)>(0,E.unixTime)())throw new Error("verifyCertificate cert has expired");if(!i.key)throw new Error("verifyCertificate cert has no key detail");if(!(0,p.areBuffersEqual)(i.key,t))throw new Error("verifySignature cert key does not match issuer");if(!T.verifySignature(new Uint8Array((0,g.parseHex)(R)),new Uint8Array(r),new Uint8Array(a)))throw new Error("verifyCertificate cert poorly signed!")}(r,n),a}))}function N(e,t,n){var a=r.resolve(e.pubKey),i=t.encrypt(a);if(!n)return r.reject(new Error("staticAgreement called before serverKeys"));var o=T.sharedSecret(n,e.privKey);return t.mixIntoKey(o),i}},68973:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decryptSignalProto=function(e,t,n){var a=new window.libsignal.SessionCipher((0,s.default)(),(0,l.createSignalAddress)(e));return r.resolve(a).then((function(e){switch(t){case u.CiphertextType.Pkmsg:return e.decryptPreKeyWhisperMessage(n);case u.CiphertextType.Msg:return e.decryptWhisperMessage(n);default:return r.reject(`decryptSignalProto: Received unsupported msg type ${t}`)}})).catch((function(e){if(e&&"call_failure"===e.reason&&e.value&&"number"==typeof e.value.result)__LOG__(3)`decryptSignalProto error code ${e.value.result}`;else{if(e&&"MessageCounterError"===e.name)return r.reject(new i.SignalMessageCounterError(e));__LOG__(3)`decryptSignalProto js error ${e}`}return r.reject(new i.SignalDecryptionError(e))}))},t.encryptSignalProto=function(e,t){var n=new window.libsignal.SessionCipher((0,s.default)(),(0,l.createSignalAddress)(e));return r.resolve(n).then((function(e){return e.encrypt(t)})).then((function(e){var t=e.type,n=e.body;return __LOG__(2)`encryptSignalProto complete, type=${t}`,{type:3===t?u.CiphertextType.Pkmsg:u.CiphertextType.Msg,ciphertext:(0,l.strToBuffer)(n)}}))},t.decryptGroupSignalProto=function(e,t,n){var a=new window.libsignal.GroupCipher((0,s.default)(),e.toString({legacy:!0}),(0,l.createSignalAddress)(t));return r.resolve(a).then((function(e){return e.decryptSenderKeyMessage(n)})).catch((function(e){return e&&"MessageCounterError"===e.name?r.reject(new i.SignalMessageCounterError(e)):r.reject(new i.SignalDecryptionError(e))}))},t.encryptSenderKeyMsgSignalProto=function(e,t){var n=new window.libsignal.GroupCipher((0,s.default)(),e.toString({legacy:!0}),(0,l.createSignalAddress)((0,o.assertGetMe)()));return r.resolve(n).then((function(e){return e.encrypt(t)})).then((function(e){return{ciphertext:(0,l.strToBuffer)(e)}}))};var i=n(84393),o=n(71701),s=a(n(46797)),u=n(77565),l=n(47065)},84393:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SignalMessageCounterError=t.SignalDecryptionError=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(1838),u=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("SignalDecryptionError"));t.SignalDecryptionError=u;var l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("SignalMessageCounterError"));t.SignalMessageCounterError=l},1018:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.waSignalStore=void 0;var i=a(n(63038)),o=a(n(34575)),s=a(n(93913)),u=a(n(34541)),l=n(40173),c=n(54133),d="signal_reg_id",f="signal_static_pubkey",p="signal_static_privkey",h="signal_next_pk_id",_="signal_last_spk_id",v="signal_first_unupload_pk_id",m="signal_sever_has_pre_keys",g="adv_signed_identity",y={name:"AES-CTR",length:128,counter:new Uint8Array(16)};function E(e){return self.crypto.subtle.generateKey({name:y.name,length:y.length},!1,["encrypt","decrypt"]).then((function(t){return self.crypto.subtle.encrypt(y,t,e).then((function(e){return{encKey:t,value:e}}))}))}function S(e){return self.crypto.subtle.decrypt(y,e.encKey,e.value)}var b=new(function(){function e(){var t=this;(0,o.default)(this,e),this.idToSignedPreKey=new Map,u.default.on("logout",(function(){t.registrationInfo=void 0,t.idToSignedPreKey.clear()}))}return(0,s.default)(e,[{key:"getMeta",value:function(e){return(0,l.getMetaTable)().get(e).then((function(e){return e?e.value:null}))}},{key:"putMeta",value:function(e){var t=(0,l.getMetaTable)(),n=e.map((function(e){return t.createOrReplace(e)}));return r.all(n).then()}},{key:"setServerHasPreKeys",value:function(e){this.putMeta([{key:m,value:e}])}},{key:"getServerHasPreKeys",value:function(){return this.getMeta(m)}},{key:"putADVSignedIdentity",value:function(e){return this.putMeta([{key:g,value:e}])}},{key:"getADVSignedIdentity",value:function(){return this.getMeta(g)}},{key:"getPreKeysByRange",value:function(e,t){return(0,l.getPreKeyTable)().greaterThan(["keyId"],e-1,{limit:t})}},{key:"getPreKeyById",value:function(e){return(0,l.getPreKeyTable)().get(e)}},{key:"removePreKeyById",value:function(e){return(0,l.getPreKeyTable)().remove(e)}},{key:"bulkRmovePreKey",value:function(e){return(0,l.getPreKeyTable)().bulkRemove(e)}},{key:"putPreKeys",value:function(e){var t=(0,l.getPreKeyTable)(),n=e.map((function(e){var n=e.keyId,r=e.keyPair,a=e.isDirectDistribution;return t.get(n).then((function(e){if(e)throw Error(`preKey id ${n} already exists`);return t.create({keyId:n,keyPair:r,isDirectDistribution:a})}))}));return r.all(n).then()}},{key:"markPreKeyAsDirectDistribution",value:function(e){return(0,l.getPreKeyTable)().merge(e,{isDirectDistribution:1})}},{key:"getSignedPreKey",value:function(){var e=this;return this.getMeta(_).then((function(t){return e.getSignedPreKeyById(t)}))}},{key:"getSignedPreKeyById",value:function(e){var t=this;return this.idToSignedPreKey.has(e)?r.resolve(this.idToSignedPreKey.get(e)):(0,l.getSignedPreKeyTable)().get(e).then((function(n){return t.idToSignedPreKey.set(e,n),n}))}},{key:"putSignedPreKeys",value:function(e){var t=(0,l.getSignedPreKeyTable)(),n=e.map((function(e){var n=e.keyId,r=e.keyPair,a=e.signature;return t.get(n).then((function(e){if(e)throw Error(`signed preKey id ${n} already exists`);return t.create({keyId:n,keyPair:r,signature:a})}))}));return r.all(n).then()}},{key:"putSession",value:function(e,t){return(0,l.getSessionTable)().createOrReplace({address:e,session:t})}},{key:"bulkPutSession",value:function(e){return(0,l.getSessionTable)().bulkCreateOrReplace(e)}},{key:"removeSession",value:function(e){return(0,l.getSessionTable)().remove(e)}},{key:"bulkRemoveSession",value:function(e){return(0,l.getSessionTable)().bulkRemove(e)}},{key:"getSession",value:function(e){return(0,l.getSessionTable)().get(e).then((function(e){return e?e.session:null}))}},{key:"bulkGetSession",value:function(e){return(0,l.getSessionTable)().bulkGet(e).then((function(e){return e.map((function(e){return e?e.session:null}))}))}},{key:"putIdentity",value:function(e,t){return(0,l.getIdentityTable)().createOrReplace({identifier:e,identityKey:t})}},{key:"bulkPutIdentity",value:function(e){return(0,l.getIdentityTable)().bulkCreateOrReplace(e)}},{key:"bulkGetIdentity",value:function(e){return(0,l.getIdentityTable)().bulkGet(e).then((function(e){return e.map((function(e){return e?e.identityKey:null}))}))}},{key:"getIdentity",value:function(e){return(0,l.getIdentityTable)().get(e).then((function(e){return e?e.identityKey:null}))}},{key:"removeIdentity",value:function(e){return(0,l.getIdentityTable)().remove(e)}},{key:"bulkRemoveIdentity",value:function(e){return(0,l.getIdentityTable)().bulkRemove(e)}},{key:"getIdentityKeyWithRowId",value:function(e){return(0,l.getIdentityTable)().get(e).then((function(e){return e?{identityKey:e.identityKey,rowId:e.rowId}:null}))}},{key:"bulkGetIdentityKeyWithRowId",value:function(e){return(0,l.getIdentityTable)().bulkGet(e).then((function(e){return e.map((function(e){return e?{identityKey:e.identityKey,rowId:e.rowId}:null}))}))}},{key:"bulkPutIdentityKeyWithRowId",value:function(e){return(0,l.getIdentityTable)().bulkCreateOrReplace(e)}},{key:"saveBaseKey",value:function(e,t,n){return(0,l.getBaseKeyTable)().createOrReplace({address:e,originalMsgId:t,baseKey:n})}},{key:"loadBaseKey",value:function(e,t){return(0,l.getBaseKeyTable)().equals(["address","originalMsgId"],[e,t]).then((function(e){return e&&0!==e.length?e[0].baseKey:null}))}},{key:"deleteBaseKey",value:function(e,t){var n=(0,l.getBaseKeyTable)();return n.equals(["address","originalMsgId"],[e,t]).then((function(e){if(e&&0!==e.length)return n.remove(e[0].id)}))}},{key:"putSenderKey",value:function(e,t,n){return(0,l.getSenderKeyTable)().createOrReplace({senderKeyName:e,senderId:t,senderKey:n})}},{key:"bulkPutSenderKey",value:function(e){return(0,l.getSenderKeyTable)().bulkCreateOrReplace(e)}},{key:"removeSenderKey",value:function(e){return(0,l.getSenderKeyTable)().remove(e)}},{key:"getSenderKey",value:function(e){return(0,l.getSenderKeyTable)().get(e).then((function(e){return e?e.senderKey:null}))}},{key:"removeSenderKeyBySenderId",value:function(e){var t=(0,l.getSenderKeyTable)();return t.equals(["senderId"],e).then((function(e){return t.bulkRemove(e.map((function(e){return e.senderKeyName})))}))}},{key:"clearCredential",value:function(){var e=[(0,l.getIdentityTable)(),(0,l.getMetaTable)(),(0,l.getPreKeyTable)(),(0,l.getSessionTable)(),(0,l.getSignedPreKeyTable)()];return r.all(e.map((function(e){return e.clear()}))).then((function(){}))}},{key:"getRegistrationInfo",value:function(){var e=this;return null!=this.registrationInfo?r.resolve(this.registrationInfo):r.all([this.getMeta(d),this.getMeta(f),this.getMeta(p)]).then((function(t){var n=(0,i.default)(t,3),a=n[0],o=n[1],s=n[2];if(a&&o&&s)return r.all([S(o),S(s)]).then((function(t){var n=(0,i.default)(t,2),r=n[0],o=n[1];return e.registrationInfo={registrationId:a,identityKeyPair:{pubKey:r,privKey:o}},e.registrationInfo}))}))}},{key:"setRegistrationInfo",value:function(e){var t=this;return r.all([E(e.identityKeyPair.pubKey),E(e.identityKeyPair.privKey)]).then((function(n){var a=(0,i.default)(n,2),o=a[0],s=a[1];return r.all([t.putMeta([{key:d,value:e.registrationId},{key:f,value:o},{key:p,value:s}])]).then()}))}},{key:"getOrGenPreKeys",value:function(e,t){var n=this;return(0,c.getStorage)().lock(["signal-meta-store","prekey-store"],(function(){return r.all([n.getMeta(v),n.getMeta(h)]).then((function(a){var o=(0,i.default)(a,2),s=o[0],u=o[1],l=s||1,c=u||1,d=c-l,f=e-d;if(f<=0)return __LOG__(2)`getPreKeys: no prekey needs to be generated, avaliable: ${d}, need: ${e}`,n.getPreKeysByRange(l,e);var p=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(c,c+f).map((function(e){return t(e)}));return r.all(p).then((function(e){return n.savePreKeys(e)})).then((function(){return n.getPreKeysByRange(l,e)}))}))}))}},{key:"getOrGenSinglePreKey",value:function(e){return this.getOrGenPreKeys(1,e).then((function(e){if(1!==e.length)throw Error("Expected to get exactly one key but got ${keys.length}");return e[0]}))}},{key:"savePreKeys",value:function(e){if(0===e.length)return r.resolve();var t=e[e.length-1];return r.all([this.putMeta([{key:h,value:t.keyId+1}]),this.putPreKeys(e)]).then()}},{key:"markKeyAsUploaded",value:function(e){var t=this;return r.all([this.getMeta(v),this.getMeta(h)]).then((function(n){var r=(0,i.default)(n,2),a=r[0],o=r[1];if(e<0||!o||e>=o)throw Error(`markKeyAsUploaded: key ${e} is out of boundary.`);var s=a?Math.max(a,e+1):e+1;return t.putMeta([{key:v,value:s}])}))}},{key:"rotateSignedPreKey",value:function(e,t){var n=this;return(0,c.getStorage)().lock(["signal-meta-store","signed-prekey-store"],(function(){return n.getMeta(_).then((function(r){var a=null==r?1:r+1;return t(e,a).then((function(e){return n.putSignedPreKeys([e]),n.putMeta([{key:_,value:a}]),e}))}))}))}}]),e}());t.waSignalStore=b},47065:(e,t)=>{"use strict";function n(e,t){for(var n=0;n<t;n++)e.writeUint8(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.unpad=function(e){var t=new Uint8Array(e);if(0===t.length)throw new Error("unpadPkcs7 given empty bytes");var n=t[t.length-1];if(n>t.length)throw new Error(`unpad given ${t.length} bytes, but pad is ${n}`);return new Uint8Array(t.buffer,t.byteOffset,t.length-n)},t.writeRandomPadMax16=function(e){var t=new Uint8Array(1);self.crypto.getRandomValues(t),n(e,1+(15&t[0]))},t.writePad=n,t.strToBuffer=function(e){return new window.dcodeIO.ByteBuffer.wrap(e,"binary").toArrayBuffer()},t.bufferToStr=function(e){return new window.dcodeIO.ByteBuffer.wrap(e).toString("binary")},t.bufferEqual=function(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),a=0;a<n.byteLength;a++)if(n.getUint8(a)!==r.getUint8(a))return!1;return!0},t.createSignalAddress=function(e){if(!(e.isUser()||e.isServer()||e.isPSA()))throw new Error(`Jid ${e.toString({legacy:!0})} is not fully qualified, jid.server should be "s.whatsapp.net"`);return new window.libsignal.SignalProtocolAddress(e.getSignalAddress(),0)}},61572:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.Cipher=t.KeyGenerator=void 0;var a=r(n(91056)),i=r(n(68973)),o=r(n(71979)),s=a;t.KeyGenerator=s;var u=i;t.Cipher=u;var l=o;t.Session=l},91056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generatePreKeyPair=function(e){return window.libsignal.KeyHelper.generatePreKey(e).then((function(e){var t=e.keyId,n=e.keyPair;return{keyId:t,keyPair:(0,r.toCurveKeyPair)(n),isDirectDistribution:0}}))},t.generateSignedKeyPair=function(e,t){return window.libsignal.KeyHelper.generateSignedPreKey(e,t).then((function(e){var t=e.keyId,n=e.keyPair,a=e.signature;return{keyId:t,keyPair:(0,r.toCurveKeyPair)(n),signature:a}}))},t.generateIdentityKeyPair=function(){return window.libsignal.KeyHelper.generateIdentityKeyPair().then((function(e){return(0,r.toCurveKeyPair)(e)}))};var r=n(48935)},71715:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyIdentityKey=function(e){return e instanceof ArrayBuffer?(0,r.bufferToStr)(e):e};var r=n(47065)},46797:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o},t.enableMemSignalStore=function(){o=a.default},t.enablePersistSignalStore=function(){o=i.default};var a=r(n(81980)),i=r(n(46005)),o=i.default},81980:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=a(n(96486)),c=a(n(34541)),d=n(71715),f=n(48935),p=n(71701),h=n(1018),_=n(47065),v=new(function(){function e(){var t=this;(0,s.default)(this,e),this.Direction={SENDING:1,RECEIVING:2},this.RegistrationInfo=null,this.SignedPreKeyStore=new Map,this.SessionStore=new Map,this.IdentityStore=new Map,this.PrekeyStore=new Map,this.SenderKeyStore=new Map,c.default.on("logout",(function(){t.cleanStorage()}))}var t,n,a,v,m,g,y,E;return(0,u.default)(e,[{key:"getIdentityKeyPair",value:(E=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.RegistrationInfo){e.next=4;break}return e.next=3,h.waSignalStore.getRegistrationInfo();case 3:this.RegistrationInfo=e.sent;case 4:return e.abrupt("return",(null===(t=this.RegistrationInfo)||void 0===t?void 0:t.identityKeyPair)?(0,f.toSignalCurveKeyPair)(this.RegistrationInfo.identityKeyPair):void 0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"getLocalRegistrationId",value:(y=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.RegistrationInfo){e.next=4;break}return e.next=3,h.waSignalStore.getRegistrationInfo();case 3:this.RegistrationInfo=e.sent;case 4:return e.abrupt("return",(null===(t=this.RegistrationInfo)||void 0===t?void 0:t.registrationId)||void 0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"isTrustedIdentity",value:function(){return r.resolve(!0)}},{key:"loadIdentityKey",value:(g=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Tried to get identity key for undefined/null key");case 2:if(this.IdentityStore.has(t)){e.next=7;break}return e.next=5,h.waSignalStore.getIdentityKeyWithRowId(t);case 5:r=e.sent,this.IdentityStore.set(t,r);case 7:return e.abrupt("return",(null===(n=this.IdentityStore.get(t))||void 0===n?void 0:n.identityKey)||void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"saveIdentity",value:(m=(0,o.default)(i.default.mark((function e(t,n){var a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",r.reject(new Error("Tried to put identity key for undefined/null key")));case 2:return a=(0,d.stringifyIdentityKey)(n),e.next=5,this.loadIdentityKey(t);case 5:if(!(o=e.sent)||o!==a){e.next=10;break}return e.abrupt("return");case 10:if(!o||t!==(0,_.createSignalAddress)((0,p.getMeUser)()).toString()){e.next=15;break}return __LOG__(4,void 0,new Error,!0)`handleNewIdentity: ignore identity change for your own primary device`,SEND_LOGS("self-identity-change"),e.abrupt("return");case 15:this.IdentityStore.set(t,{identityKey:a});case 16:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"removeIdentity",value:function(e){return null==e?r.reject(new Error("Tried to remove identity key for undefined/null key")):(this.IdentityStore.set(e,{deleted:!0}),r.resolve())}},{key:"loadPreKey",value:(v=(0,o.default)(i.default.mark((function e(t){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(this.PrekeyStore.has(t)){e.next=16;break}return e.next=5,h.waSignalStore.getPreKeyById(t);case 5:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=9;break}e.t0=void 0===n;case 9:if(!e.t0){e.next=13;break}e.t2=void 0,e.next=14;break;case 13:e.t2=n.keyPair;case 14:r=e.t2,this.PrekeyStore.set(t,{keyPair:r});case 16:return a=this.PrekeyStore.get(t),e.abrupt("return",(null==a?void 0:a.keyPair)||void 0);case 18:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"removePreKey",value:function(e){return null==e?r.reject(new Error("Tried to remove pre key without keyId")):(this.PrekeyStore.set(e,{deleted:!0}),r.resolve())}},{key:"loadSignedPreKey",value:(a=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(this.SignedPreKeyStore.has(t)){e.next=16;break}return e.next=5,h.waSignalStore.getSignedPreKeyById(t);case 5:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=9;break}e.t0=void 0===n;case 9:if(!e.t0){e.next=13;break}e.t2=void 0,e.next=14;break;case 13:e.t2=n.keyPair;case 14:r=e.t2,this.SignedPreKeyStore.set(t,r);case 16:return e.abrupt("return",this.SignedPreKeyStore.get(t)||void 0);case 17:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"loadSession",value:(n=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(this.SessionStore.has(t)){e.next=7;break}return e.next=5,h.waSignalStore.getSession(t);case 5:r=e.sent,this.SessionStore.set(t,r?{session:r}:void 0);case 7:return e.abrupt("return",(null===(n=this.SessionStore.get(t))||void 0===n?void 0:n.session)||void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"storeSession",value:function(e,t){return null==e?r.reject(new Error("Tried to put session without identifier")):(this.SessionStore.set(e,{session:t}),r.resolve())}},{key:"removeSession",value:function(e){return null==e?r.reject(new Error("Tried to remove session without identifier")):(this.SessionStore.set(e,{deleted:!0}),r.resolve())}},{key:"storeSenderKey",value:function(e,t){return null==e?r.reject(new Error("Tried to put session without identifier")):(this.SenderKeyStore.set(e,t),r.resolve())}},{key:"loadSenderKey",value:(t=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(this.SenderKeyStore.has(t)){e.next=7;break}return e.next=5,h.waSignalStore.getSenderKey(t);case 5:n=e.sent,this.SenderKeyStore.set(t,n);case 7:return e.abrupt("return",this.SenderKeyStore.get(t)||void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cleanStorage",value:function(){this.RegistrationInfo=null,this.SessionStore.clear(),this.IdentityStore.clear(),this.PrekeyStore.clear(),this.SignedPreKeyStore.clear(),this.SenderKeyStore.clear()}},{key:"_generateSessionUpdate",value:function(){var e=this,t=[],n=[];return Array.from(this.SessionStore.keys()).forEach((function(r){var a=e.SessionStore.get(r);a&&(a.deleted?n.push(r):t.push({address:r,session:l.default.cloneDeep(a.session)}))})),{update:t,remove:n}}},{key:"_generateSenderKeyUpdate",value:function(){var e=this,t=[];return Array.from(this.SenderKeyStore.keys()).forEach((function(n){var r=e.SenderKeyStore.get(n);if(r){var a=n.split("::");2===a.length&&t.push({senderKeyName:n,senderId:a[1],senderKey:l.default.cloneDeep(r)})}})),t}},{key:"_generateIdentityUpdate",value:function(){var e=this,t=[],n=[];return Array.from(this.IdentityStore.keys()).forEach((function(r){var a=e.IdentityStore.get(r);a&&(a.deleted?n.push(r):t.push({identifier:r,identityKey:a.identityKey,rowId:a.rowId}))})),{update:t,remove:n}}},{key:"_generatePreKeyUpdate",value:function(){var e=this,t=[];return Array.from(this.PrekeyStore.keys()).forEach((function(n){var r=e.PrekeyStore.get(n);r&&r.deleted&&t.push(parseInt(n,10))})),t}},{key:"generateSnapshot",value:function(){var e=this._generateIdentityUpdate(),t=this._generateSessionUpdate();return{sessionUpdate:t.update,sessionRemove:t.remove,identityUpdate:e.update,identityRemove:e.remove,senderKeyUpdate:this._generateSenderKeyUpdate(),preKeyRemove:this._generatePreKeyUpdate()}}},{key:"flushBufferToDiskIfNotMemOnlyMode",value:function(){return r.resolve()}}]),e}());t.default=v},46005:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=n(35613),c=n(71715),d=n(48935),f=n(71701),p=n(71030),h=n(1018),_=n(54133),v=n(47065),m=new(function(){function e(){(0,s.default)(this,e),this.Direction={SENDING:1,RECEIVING:2},this.RegistrationInfoReadThruCache=null,this.SignedPreKeyStoreReadThruCache=new Map,this.SessionStoreWriteBackCache=new Map,this.IdentityStoreReadThruCache=new Map,this.SessionStoreWriteBackCacheDirtySet=new Set,this._sessionFlushMutex=new l.Semaphore(1)}var t,n,a,m,g,y,E,S,b,T,w,A,C,O,M,I,k;return(0,u.default)(e,[{key:"getIdentityKeyPair",value:(k=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.RegistrationInfoReadThruCache){e.next=4;break}return e.next=3,h.waSignalStore.getRegistrationInfo();case 3:this.RegistrationInfoReadThruCache=e.sent;case 4:return e.abrupt("return",(null===(t=this.RegistrationInfoReadThruCache)||void 0===t?void 0:t.identityKeyPair)?(0,d.toSignalCurveKeyPair)(this.RegistrationInfoReadThruCache.identityKeyPair):void 0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"getLocalRegistrationId",value:(I=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.RegistrationInfoReadThruCache){e.next=4;break}return e.next=3,h.waSignalStore.getRegistrationInfo();case 3:this.RegistrationInfoReadThruCache=e.sent;case 4:return e.abrupt("return",(null===(t=this.RegistrationInfoReadThruCache)||void 0===t?void 0:t.registrationId)||void 0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})},{key:"isTrustedIdentity",value:function(){return r.resolve(!0)}},{key:"saveIdentity",value:(M=(0,o.default)(i.default.mark((function e(t,n){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Tried to put identity key for undefined/null key");case 2:return r=(0,c.stringifyIdentityKey)(n),e.next=5,this.loadIdentityKey(t);case 5:if(!(a=e.sent)||a!==r){e.next=10;break}return e.abrupt("return");case 10:if(!a){e.next=16;break}if(t!==(0,v.createSignalAddress)((0,f.getMeUser)()).toString()){e.next=14;break}return __LOG__(4,void 0,new Error,!0)`handleNewIdentity: ignore identity change for your own primary device`,SEND_LOGS("self-identity-change"),e.abrupt("return");case 14:return e.next=16,(0,p.handleNewIdentity)(t);case 16:return e.next=18,h.waSignalStore.putIdentity(t,r);case 18:this.IdentityStoreReadThruCache.set(t,{identityKey:r});case 19:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"_loadIdentityKeyImpl",value:(O=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Tried to get identity key for undefined/null key");case 2:if(this.IdentityStoreReadThruCache.has(t)){e.next=7;break}return e.next=5,h.waSignalStore.getIdentityKeyWithRowId(t);case 5:r=e.sent,this.IdentityStoreReadThruCache.set(t,r);case 7:return e.abrupt("return",(null===(n=this.IdentityStoreReadThruCache.get(t))||void 0===n?void 0:n.identityKey)||void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"loadIdentityKey",value:function(e){return this._loadIdentityKeyImpl(e)}},{key:"getIdentityRowId",value:(C=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Tried to get identity key for undefined/null key");case 2:return e.next=4,this.loadIdentityKey(t);case 4:return e.abrupt("return",(null===(n=this.IdentityStoreReadThruCache.get(t))||void 0===n?void 0:n.rowId)||void 0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)})},{key:"_bulkLoadIdentityKeyImpl",value:(A=(0,o.default)(i.default.mark((function e(t){var n,r,a=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Tried to get identity key for undefined/null key");case 2:if(0!==t.length){e.next=4;break}return e.abrupt("return",[]);case 4:if(n=new Array(t.length),r=[],t.forEach((function(e,t){a.IdentityStoreReadThruCache.has(e)?n[t]=a.IdentityStoreReadThruCache.get(e):r.push({id:e,pos:t})})),!(r.length>0)){e.next=12;break}return e.next=10,h.waSignalStore.bulkGetIdentityKeyWithRowId(r.map((function(e){return e.id})));case 10:e.sent.forEach((function(e,t){var i=r[t];a.IdentityStoreReadThruCache.set(i.id,e),n[i.pos]=null==e?void 0:e.identityKey}));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)}))),function(){return A.apply(this,arguments)})},{key:"bulkLoadIdentityKey",value:function(e){return this._bulkLoadIdentityKeyImpl(e)}},{key:"_bulkCreateIdentityImpl",value:(w=(0,o.default)(i.default.mark((function e(t){var n=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Tried to bulk put identity key with undefined/null");case 2:return __LOG__(2,void 0,void 0,void 0,["Persist potocol store"])`bulkCreateIdentity store ${t.length} start`,e.next=5,(0,_.getStorage)().lock(["identity-store"],(0,o.default)(i.default.mark((function e(){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.bulkLoadIdentityKey(t.map((function(e){return e.identifier})));case 2:return r=e.sent,a=t.filter((function(e,t){return!r[t]})),e.next=6,h.waSignalStore.bulkPutIdentity(a);case 6:t.forEach((function(e){var t=e.identifier,r=e.identityKey;n.IdentityStoreReadThruCache.set(t,{identityKey:r})})),__LOG__(2,void 0,void 0,void 0,["Persist potocol store"])`bulkCreateIdentity store ${a.length} end, `;case 8:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)}))),function(){return w.apply(this,arguments)})},{key:"bulkCreateIdentity",value:function(e){return this._bulkCreateIdentityImpl(e)}},{key:"_removeIdentityImpl",value:(T=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",r.reject(new Error("Tried to remove identity key for undefined/null key")));case 2:return e.next=4,h.waSignalStore.removeIdentity(t);case 4:this.IdentityStoreReadThruCache.delete(t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"removeIdentity",value:function(e){return this._removeIdentityImpl(e)}},{key:"loadPreKey",value:(b=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",r.resolve(void 0));case 2:return e.next=4,h.waSignalStore.getPreKeyById(t);case 4:return n=e.sent,e.abrupt("return",(null==n?void 0:n.keyPair)||void 0);case 6:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)})},{key:"removePreKey",value:function(e){return null==e?r.reject(new Error("Tried to remove pre key without keyId")):h.waSignalStore.removePreKeyById(e)}},{key:"loadSignedPreKey",value:(S=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(this.SignedPreKeyStoreReadThruCache.has(t)){e.next=16;break}return e.next=5,h.waSignalStore.getSignedPreKeyById(t);case 5:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=9;break}e.t0=void 0===n;case 9:if(!e.t0){e.next=13;break}e.t2=void 0,e.next=14;break;case 13:e.t2=n.keyPair;case 14:r=e.t2,this.SignedPreKeyStoreReadThruCache.set(t,r);case 16:return e.abrupt("return",this.SignedPreKeyStoreReadThruCache.get(t)||void 0);case 17:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"loadSession",value:(E=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(this.SessionStoreWriteBackCache.has(t)){e.next=7;break}return e.next=5,h.waSignalStore.getSession(t);case 5:n=e.sent,this.SessionStoreWriteBackCache.set(t,n);case 7:return e.abrupt("return",this.SessionStoreWriteBackCache.get(t)||void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"_storeSessionImpl",value:function(e,t){if(null==e)throw new Error("Tried to put session without identifier");this.SessionStoreWriteBackCache.set(e,t),this.SessionStoreWriteBackCacheDirtySet.add(e)}},{key:"storeSession",value:(y=(0,o.default)(i.default.mark((function e(t,n){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sessionFlushMutex.acquire();case 2:return a=e.sent,this._storeSessionImpl(t,n),a.release(),e.abrupt("return",r.resolve());case 6:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"removeSession",value:(g=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",r.reject(new Error("Tried to remove session without identifier")));case 2:return e.next=4,h.waSignalStore.removeSession(t);case 4:this.SessionStoreWriteBackCache.delete(t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"containSessions",value:function(e){return h.waSignalStore.bulkGetSession(e).then((function(e){return e.map((function(e){return!!e}))}))}},{key:"storeSenderKey",value:function(e,t){if(null==e)return r.reject(new Error("Tried to put senderKey without senderKeyName"));var n=e.split("::");if(n.length<2)return r.reject(new Error("Tried to put senderKey with invalid senderKeyName"));var a=n[1];return h.waSignalStore.putSenderKey(e,a,t)}},{key:"loadSenderKey",value:(m=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",r.resolve(void 0));case 2:return e.next=4,h.waSignalStore.getSenderKey(t);case 4:return n=e.sent,e.abrupt("return",n||void 0);case 6:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"_getDirtySessionUpdates",value:function(){var e=this;__LOG__(2,void 0,void 0,void 0,["Persist potocol store"])`_getDirtySessionUpdates for ${Array.from(this.SessionStoreWriteBackCacheDirtySet).join(",")}`;var t=[];return this.SessionStoreWriteBackCacheDirtySet.forEach((function(n){var r=e.SessionStoreWriteBackCache.get(n);r&&t.push({address:n,session:r})})),t}},{key:"deleteAllCache",value:function(){__LOG__(2,void 0,void 0,void 0,["Persist potocol store"])`deleteAllCache`,this.RegistrationInfoReadThruCache=null,this.SignedPreKeyStoreReadThruCache.clear(),this.SessionStoreWriteBackCache.clear(),this.IdentityStoreReadThruCache.clear(),this.SessionStoreWriteBackCacheDirtySet.clear()}},{key:"_flushBufferToDiskIfNotMemOnlyModeImpl",value:(a=(0,o.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(__LOG__(2,void 0,void 0,void 0,["Persist potocol store"])`flushBufferToDiskIfNotMemOnlyMode start`,n=[],a=this._getDirtySessionUpdates(),e.t0=a.length>0,!e.t0){e.next=10;break}return e.t1=n,e.next=8,h.waSignalStore.bulkPutSession(a);case 8:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 10:return e.next=12,(0,_.getStorage)().lock(["session-store"],(function(){return r.all(n)}));case 12:t&&this.deleteAllCache(),this.SessionStoreWriteBackCacheDirtySet.clear(),__LOG__(2,void 0,void 0,void 0,["Persist potocol store"])`flushBufferToDiskIfNotMemOnlyMode end`;case 15:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"flushBufferToDiskIfNotMemOnlyMode",value:(n=(0,o.default)(i.default.mark((function e(){var t,n,r=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.next=3,this._sessionFlushMutex.acquire();case 3:return n=e.sent,e.abrupt("return",this._flushBufferToDiskIfNotMemOnlyModeImpl(t).finally(n.release));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updateIdentityRangeAfterEncryption",value:(t=(0,o.default)(i.default.mark((function e(t,n){var a,o=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,this.bulkLoadIdentityKey(n);case 3:if(n.forEach((function(e){var n=o.IdentityStoreReadThruCache.get(e);n&&(null==n.rowId||n.rowId>t)&&(n.rowId=t,a.push({identifier:e,identityKey:n.identityKey,rowId:t}))})),!(a.length>0)){e.next=9;break}return e.abrupt("return",h.waSignalStore.bulkPutIdentityKeyWithRowId(a));case 9:return e.abrupt("return",r.resolve());case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}());t.default=m},71979:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createSignalSession=function(){return m.apply(this,arguments)},t.hasSignalSessions=function(e){return p.default.containSessions(e.map((function(e){return(0,v.createSignalAddress)(e).toString()})))},t.getRemoteRegId=function(e){var t=new window.libsignal.SessionCipher(p.default,(0,v.createSignalAddress)(e));return r.resolve(t).then((function(e){return e.getRemoteRegistrationId()}))},t.deleteRemoteInfo=function(e){var t=(0,v.createSignalAddress)(e).toString();return r.all([(0,h.default)().removeIdentity(t),(0,h.default)().removeSession(t)]).then((function(){}))},t.saveSessionBaseKey=function(e,t){var n=(0,v.createSignalAddress)(e);return new window.libsignal.SessionInfo(p.default,n).getSessionBaseKey().then((function(e){return e?_.waSignalStore.saveBaseKey(n.toString(),t,e):(__LOG__(2)`saveSessionBaseKey: for ${t}, no basekey provided`,r.resolve())}))},t.hasSameBaseKey=function(e,t){var n=(0,v.createSignalAddress)(e),a=new window.libsignal.SessionInfo(p.default,(0,v.createSignalAddress)(e));return r.all([a.getSessionBaseKey(),_.waSignalStore.loadBaseKey(n.toString(),t)]).then((function(e){var n=(0,o.default)(e,2),r=n[0],a=n[1];return a?r?(0,v.bufferEqual)(a,r)?(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, savedBaseKey and sessionBaseKey is same`,!0):(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, savedBaseKey and sessionBaseKey is different `,!1):(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, no session has been saved locally `,!1):(__LOG__(2)`hasSameBaseKey: MsgId: ${t}, no base key has been saved locally `,!1)}))},t.createGroupSignalSession=function(e,t,n){var a=new window.libsignal.GroupCipher((0,h.default)(),t,(0,v.createSignalAddress)(e));return r.resolve(a).then((function(e){return e.decryptSenderKeyDistributionMessage(n)}))},t.getGroupSenderKeyInfo=function(e){return new window.libsignal.GroupCipher(p.default,e.toString({legacy:!0}),(0,v.createSignalAddress)((0,f.assertGetMe)())).createSenderKeyDistributionMsg().then((function(e){return(0,v.strToBuffer)(e)}))},t.deleteGroupSenderKeyInfo=function(e){var t=(0,v.createSignalAddress)((0,f.assertGetMe)()),n=`${e.toString({legacy:!0})}::${t.toString()}`;return _.waSignalStore.removeSenderKey(n)},t.deleteDeviceSenderKey=function(e){var t=String((0,v.createSignalAddress)(e));return _.waSignalStore.removeSenderKeyBySenderId(t)};var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=n(17643),l=n(68691),c=a(n(34263)),d=n(48935),f=n(71701),p=a(n(46005)),h=a(n(46797)),_=n(1018),v=n(47065);function m(){return(m=(0,s.default)(i.default.mark((function e(t){var n,r,a,o,s,f,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wid,r=t.identity,a=t.deviceIdentity,__LOG__(2)`Signal::createSignalSession with `,null==n.device||n.device===c.default.DEVICE.PRIMARY_DEVICE){e.next=10;break}if(a){e.next=5;break}throw new Error("Signal::createSignalSession: expected device-identity in keyBundle for companion device");case 5:return e.next=7,(0,l.validateADVwithIdentityKey)(n,a,r);case 7:if(e.sent){e.next=10;break}throw new Error("Signal::createSignalSession: invalid identityKey fetched");case 10:e.prev=10,o=(0,d.toSignalCurvePubKey)(new u.Binary(t.identity).readBuffer()),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(10),__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Signal::createSignalSession: invalid identityKey fetched"),e.t0;case 18:e.prev=18,s=(0,d.toSignalCurvePubKey)(new u.Binary(t.skey.pubkey).readBuffer()),e.next=26;break;case 22:throw e.prev=22,e.t1=e.catch(18),__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Signal::createSignalSession: invalid signedPreKey fetched"),e.t1;case 26:if(t.key)try{f=(0,d.toSignalCurvePubKey)(new u.Binary(t.key.pubkey).readBuffer())}catch(e){__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Signal::createSignalSession: invalid preKey fetched")}return h={registrationId:t.regId,identityKey:o,signedPreKey:{keyId:t.skey.id,publicKey:s,signature:new u.Binary(t.skey.signature).readBuffer()}},t.key&&f&&(h.preKey={keyId:t.key.id,publicKey:f}),e.abrupt("return",new window.libsignal.SessionBuilder(p.default,(0,v.createSignalAddress)(n)).processPreKey(h));case 30:case"end":return e.stop()}}),e,null,[[10,14],[18,22]])})))).apply(this,arguments)}},36918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xmppSignedPreKey=function(e){return(0,r.wap)("skey",null,(0,r.wap)("id",null,(0,r.BIG_ENDIAN_CONTENT)(e.keyId,3)),(0,r.wap)("value",null,e.keyPair.pubKey),(0,r.wap)("signature",null,e.signature))},t.xmppPreKey=function(e){return(0,r.wap)("key",null,(0,r.wap)("id",null,(0,r.BIG_ENDIAN_CONTENT)(e.keyId,3)),(0,r.wap)("value",null,e.keyPair.pubKey))},t.extractIdentityKey=function(e){var t=window.dcodeIO.ByteBuffer.wrap(e);t.readUint8();try{var n=window.libsignal.Protobuf.PreKeyWhisperMessage.decode(t);return(0,a.toCurveKeyPubKey)(n.identityKey.toArrayBuffer())}catch(e){return __LOG__(3)`extractIdentityKey: parse proto failed`,null}};var r=n(18712),a=n(48935)},4656:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.startBackend=j;var i=a(n(87757)),o=a(n(48926)),s=n(24963),u=n(3646),l=a(n(83219)),c=n(19588),d=a(n(45684)),f=a(n(34541)),p=n(4746),h=n(98093),_=n(38075),v=n(71701),m=a(n(22021)),g=a(n(69400)),y=n(43883),E=n(69016),S=n(34670),b=n(31940),T=n(19585),w=n(237),A=a(n(63056)),C=n(1018),O=n(50773),M=n(50600),I=n(55943),k=n(4976),P=n(11535),R=a(n(7860)),D=n(68065),N=n(92308),L=n(38831),x=a(n(8643)),U=n(29192),F=n(25220),G=n(93587),B=a(n(17894));function j(){return Y.apply(this,arguments)}function Y(){return(Y=(0,o.default)(i.default.mark((function e(){var t,n,a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(__LOG__(2)`startBackend`,C.waSignalStore.getRegistrationInfo()){e.next=5;break}return __LOG__(2)`startBackendRegistered: chatd user not registered`,e.abrupt("return");case 5:return e.prev=5,e.next=8,r.all([(0,y.initialize)()]).timeout(2e4);case 8:return e.next=10,(0,E.initialize)().timeout(2e4);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),f.default.storageInitializationError();case 15:return e.next=17,(0,_.getTable)().count();case 17:return t=e.sent,e.next=20,C.waSignalStore.getServerHasPreKeys();case 20:return n=e.sent,a=!1,o={passive:t>0||!n},e.next=25,V();case 25:return e.next=27,(0,p.startComms)(g.default,w.sendPing,o);case 27:return e.next=29,(0,p.waitForConnection)();case 29:if(U.OfflineResumeReporter.logSocketConnectT(),a){e.next=40;break}return s=[],t>0&&s.push((0,c.sendAndClearDanglingReceipts)()),n||((0,L.setDeviceLinkPairStage)(x.default.MD_LINK_DEVICE_COMPANION_STAGE.UPLOAD_PREKEYS),s.push((0,P.uploadPreKeys)().catch((function(e){__LOG__(4,!0,new Error,!0)`error while uploading prekeys, ${e}`,SEND_LOGS("error while uploading prekeys"),(0,L.commitDeviceLinkEvent)(-1)})))),e.next=36,r.all(s);case 36:return(0,L.setDeviceLinkPairStage)(x.default.MD_LINK_DEVICE_COMPANION_STAGE.COMPLETE),(0,L.commitDeviceLinkEvent)(),e.next=40,(0,T.sendPassiveIq)(!1);case 40:if((0,S.isABPropsAfterFirstSync)()){e.next=43;break}return e.next=43,(0,D.syncABPropsTask)();case 43:return e.next=45,(0,k.updateABPropsFromStorage)();case 45:return e.next=47,(0,O.initialize)();case 47:return e.next=49,(0,p.startHandlingRequests)();case 49:return e.next=51,l.default.syncCriticalDataIfNeeded();case 51:return e.next=53,(0,N.startWebPersistedJobManager)();case 53:return e.next=55,B.default.waitForFinalDbMsgEncKey();case 55:if(null!=A.default.serverPropsVersion){e.next=58;break}return e.next=58,(0,G.queryServerProps)();case 58:(0,b.compareServerPropsAndABProps)(),K();case 60:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}function K(){(0,I.applyContactBusinessProps)(),(0,F.restoreLabels)(),(0,F.restoreQuickReplies)(),(0,F.restoreLabelAssociations)(),(0,F.restoreCarts)()}function W(){return(W=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.default.continueProgressiveHistorySyncProcessing(),d.default.startIndexer(),(0,u.requireStatusV3Collection)().then((function(e){e.sync()})),(0,M.registerTasks)(),(0,h.runSyncDirtyContactsJob)(),e.next=7,(0,s.syncDeviceList)([(0,v.getMeUser)()]);case 7:(0,F.restoreRecentStickers)();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return H.apply(this,arguments)}function H(){return(H=(0,o.default)(i.default.mark((function e(){var t,r,a,o,s,u,l,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(71701),r=n(23306).default,a=n(28115),o=a.loadProtoVersions,s=t.getVersion(),u=10,l=s&&s.protoVersion||[0,17],c="EAEYASACKAEwAjgBQAFIAVgBYAFoAXgBmAEBoAEBqAEBsAECuAEBwAEByAEB0AEA2AEB4AEC8AED+AEDgAIDkAIDmAIAqAIDsAIAuAIDwAIB",e.next=9,o();case 9:m.default.setVersion(l),r.setVersion(l,u,c),A.default.updateSelectiveProps({frequentlyForwardedMessages:1,groupDescLength:512,multicastLimitGlobal:5,frequentlyForwardedMax:5,stickers:1,mdBlocklistV2:1});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.default.on("main_stream_mode_ready",(function(){(function(){return W.apply(this,arguments)})().catch((function(){__LOG__(2)`debug setup failed:`}))})),f.default.on("md_restart_backend",(function(){(0,p.stopComms)(),j()})),f.default.on("storage_initialization_error",(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2)`storage initialization error, logging out`,e.next=3,R.default.clearCredentialsAndStoredData();case 3:f.default.logout();case 4:case"end":return e.stop()}}),e)}))))},10369:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),o=a(n(87757)),s=a(n(48926)),u=a(n(63038)),l=a(n(34575)),c=a(n(93913)),d=a(n(2205)),f=a(n(99842)),p=a(n(26671)),h=n(27291),_=n(4753),v=n(37865),m=n(43883),g=a(n(91080)),y=n(75793),E=n(22252),S=n(82285),b=n(53939),T=n(46042),w=n(29392),A=n(47907),C=new(function(e){(0,d.default)(C,e);var t,n,a,S=(0,f.default)(C);function C(){var e;(0,l.default)(this,C);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=S.call.apply(S,[this].concat(n))).version=3,e}return(0,c.default)(C,[{key:"getChatJidAndMessageKey",value:function(e){var t=(0,u.default)(e.index,2)[1];return t||(0,A.throwInvalidActionIndex)(),{chatJid:t,messageKey:null}}},{key:"setArchive",value:function(e){return(0,m.getChatTable)().bulkCreateOrMerge(e).then((function(){e.forEach((function(e){var t=(0,y.createWid)(e.id),n=p.default.get(t);n&&(n.archive=e.archive)}))}))}},{key:"validateSyncActionValue",value:function(e){var t=e.archiveChatAction;return null!=(null==t?void 0:t.archived)&&(0,v.validateMessageRange)(null==t?void 0:t.messageRange)}},{key:"applyMutations",value:(a=(0,s.default)(o.default.mark((function e(t){var n,a,i,l=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,e.next=3,(0,m.getChatTable)().bulkGet(t.map((function(e){var t=e.indexParts,n=(0,u.default)(t,2)[1];return n||(0,A.throwInvalidActionIndex)(),(0,y.createWid)(n).toString()}))).then((function(e){return e.forEach((function(e){e&&n.set(e.id,e)}))}));case 3:return a=[],e.next=6,r.all(t.map(function(){var e=(0,s.default)(o.default.mark((function e(t){var r,i,s,c,d,f,p,_,v;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=19;break}if(r=t.indexParts,i=t.value,s=(0,u.default)(r,2),(c=s[1])||(0,A.throwInvalidActionIndex)(),d=i.archiveChatAction,l.validateSyncActionValue(i)){e.next=9;break}return __LOG__(3)`archive chat sync: malformed mutation`,e.abrupt("return",{actionState:h.SyncActionState.Malformed});case 9:if(f=(0,g.default)(null==d?void 0:d.archived,"archiveChatAction?.archived"),p=(0,g.default)(null==d?void 0:d.messageRange,"archiveChatAction?.messageRange"),_=(0,y.createWid)(c),n.has(_.toString())){e.next=14;break}return e.abrupt("return",{actionState:h.SyncActionState.Orphan,orphanModel:{modelType:h.SyncModelType.Chat,modelId:_.toString()}});case 14:return e.next=16,l._applyMutation(_,f,p,i);case 16:return(v=e.sent).updates&&a.push(v.updates),e.abrupt("return",v.syncApplyActionResult);case 19:return __LOG__(3)`mute chat sync: REMOVE operation not supported`,e.abrupt("return",{actionState:h.SyncActionState.Unsupported});case 23:return e.prev=23,e.t0=e.catch(0),e.abrupt("return",{actionState:h.SyncActionState.Failed});case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}()));case 6:if(i=e.sent,!(a.length>0)){e.next=10;break}return e.next=10,this.setArchive(a);case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_applyMutation",value:(n=(0,s.default)(o.default.mark((function e(t,n,r,a){var i,s,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.removeActiveMessageRange)(t.toString(),"archive");case 2:return e.next=4,(0,v.constructMessageRange)(t);case 4:i=e.sent,s=(0,v.compareMessageRanges)(i,r),u=(0,T.encodeProto)(w.SyncActionValueSpec,a).readBuffer(),e.t0=s,e.next=e.t0===v.MessageRangeEncloseType.RangesAreEqual?10:e.t0===v.MessageRangeEncloseType.RangesNotEnclosing?13:e.t0===v.MessageRangeEncloseType.RangeBEnclosesRangeA?16:e.t0===v.MessageRangeEncloseType.RangeAEnclosesRangeB?19:21;break;case 10:return(0,E.addActiveMessageRange)(t.toString(),"archive",u),e.abrupt("return",{updates:{id:t.toString(),archive:n},syncApplyActionResult:{actionState:h.SyncActionState.Success}});case 13:return(0,E.addActiveMessageRange)(t.toString(),"archive",u),e.abrupt("return",{syncApplyActionResult:{actionState:h.SyncActionState.Orphan,orphanModel:{modelType:h.SyncModelType.Chat,modelId:t.toString()}}});case 16:return(0,E.addActiveMessageRange)(t.toString(),"archive",u),e.abrupt("return",{updates:n?{id:t.toString(),archive:n}:void 0,syncApplyActionResult:{actionState:h.SyncActionState.Orphan,orphanModel:{modelType:h.SyncModelType.Chat,modelId:t.toString()}}});case 19:return e.abrupt("return",{updates:n?void 0:{id:t.toString(),archive:n},syncApplyActionResult:{actionState:h.SyncActionState.Success}});case 21:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"_constructArchiveChatIndex",value:function(e){return JSON.stringify([h.Actions.Archive,e.toString({legacy:!0})])}},{key:"getArchiveChatMutation",value:(t=(0,s.default)(o.default.mark((function e(t,n,r){var a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=n,e.next=4,(0,v.constructMessageRange)(r);case 4:return e.t2=e.sent,e.t3={archived:e.t1,messageRange:e.t2},a={timestamp:e.t0,archiveChatAction:e.t3},i={collection:h.CollectionName.RegularLow,index:this._constructArchiveChatIndex(r),binarySyncAction:(0,T.encodeProto)(w.SyncActionValueSpec,a).readBuffer(),version:this.version,operation:_.SyncdMutationSyncdOperation.SET,timestamp:t},e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"resolveConflicts",value:function(e,t){var n,r,a=function(e){return(0,b.decodeProto)(w.SyncActionValueSpec,e)},o=a(e.binarySyncAction),s=a(t.binarySyncAction),u=e.timestamp,l=t.timestamp,c=(0,g.default)(o.archiveChatAction,"pendingMutationValue.archiveChatAction"),d=(0,g.default)(s.archiveChatAction,"incomingMutationValue.archiveChatAction");switch((0,v.compareMessageRanges)((0,g.default)(d.messageRange,"incomingArchiveChatAction.messageRange"),(0,g.default)(c.messageRange,"pendingArchiveChatAction.messageRange"))){case v.MessageRangeEncloseType.RangeAEnclosesRangeB:return h.ConflictResolutionState.ApplyRemoteAndDropLocal;case v.MessageRangeEncloseType.RangeBEnclosesRangeA:return h.ConflictResolutionState.SkipRemote;case v.MessageRangeEncloseType.RangesAreEqual:return u<=l?h.ConflictResolutionState.ApplyRemoteAndDropLocal:h.ConflictResolutionState.SkipRemote;case v.MessageRangeEncloseType.RangesNotEnclosing:var f=u<=l?null!==(n=d.archived)&&void 0!==n&&n:null!==(r=c.archived)&&void 0!==r&&r,p=(0,v.mergeMessageRanges)((0,g.default)(d.messageRange,"incomingArchiveChatAction.messageRange"),(0,g.default)(c.messageRange,"pendingArchiveChatAction.messageRange")),_=(0,T.encodeProto)(w.SyncActionValueSpec,(0,i.default)((0,i.default)({},s),{},{archiveChatAction:{archived:f,messageRange:p}})).readBuffer();return(0,v.lockForMessageRangeSync)([],[(0,i.default)((0,i.default)({},e),{},{binarySyncAction:_})],(function(){var t=JSON.parse(e.index);return(0,E.addActiveMessageRange)(t[1],"archive",_)})),h.ConflictResolutionState.SkipRemoteAndDropLocal}}}]),C}(S.SyncActionBase));Object.freeze(C);var O=C;t.default=O},57831:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),o=a(n(87757)),s=a(n(48926)),u=a(n(63038)),l=a(n(34575)),c=a(n(93913)),d=a(n(2205)),f=a(n(99842)),p=a(n(91080)),h=n(27291),_=n(4753),v=n(37865),m=n(43883),g=n(75793),y=n(22252),E=n(46823),S=a(n(26671)),b=n(82285),T=n(53939),w=n(46042),A=n(29392),C=n(47907),O=new(function(e){(0,d.default)(a,e);var t,n=(0,f.default)(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).version=3,e}return(0,c.default)(a,[{key:"getChatJidAndMessageKey",value:function(e){var t=(0,u.default)(e.index,2)[1];return t||(0,C.throwInvalidActionIndex)(),{chatJid:t,messageKey:null}}},{key:"applyMutations",value:function(e){var t=this;return r.all(e.map(function(){var e=(0,s.default)(o.default.mark((function e(n){var r,a,i,s,l,c,d,f,p,_;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==n.operation){e.next=17;break}if(a=n.indexParts,i=n.value,s=(0,u.default)(a,4),l=s[1],c=s[2],d=s[3],l&&c&&d||(0,C.throwInvalidActionIndex)(),f=null===(r=i.clearChatAction)||void 0===r?void 0:r.messageRange){e.next=9;break}return __LOG__(3)`clear chat sync: malformed mutation`,e.abrupt("return",{actionState:h.SyncActionState.Malformed});case 9:return p=(0,g.createWid)(l),_=p.toString(),e.next=13,(0,m.getChatTable)().get(_);case 13:if(e.sent){e.next=16;break}return e.abrupt("return",{actionState:h.SyncActionState.Orphan,orphanModel:{modelType:h.SyncModelType.Chat,modelId:_}});case 16:return e.abrupt("return",t._applyMutation(p,f,"1"===c,"0"===d));case 17:return __LOG__(3)`mute chat sync: REMOVE operation not supported`,e.abrupt("return",{actionState:h.SyncActionState.Unsupported});case 21:return e.prev=21,e.t0=e.catch(0),e.abrupt("return",{actionState:h.SyncActionState.Failed});case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}()))}},{key:"_applyMutation",value:function(e,t,n){var a=S.default.get(e);return(0,E.clearChat)(a,!n),__LOG__(3)`apply mutation for clear chat not implemented yet.`,r.resolve({actionState:h.SyncActionState.Malformed})}},{key:"getClearChatMutation",value:(t=(0,s.default)(o.default.mark((function e(t,n,r,a){var i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,(0,v.constructMessageRange)(n);case 3:return e.t1=e.sent,e.t2={messageRange:e.t1},i={timestamp:e.t0,clearChatAction:e.t2},s={collection:h.CollectionName.RegularLow,index:this._constructClearChatIndex(n,r,a||!1),binarySyncAction:(0,w.encodeProto)(A.SyncActionValueSpec,i).readBuffer(),version:this.version,operation:_.SyncdMutationSyncdOperation.SET,timestamp:t},e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_constructClearChatIndex",value:function(e,t,n){return JSON.stringify([h.Actions.ClearChat,e.toString({legacy:!0}),t?"1":"0",n?"1":"0"])}},{key:"resolveConflicts",value:function(e,t){var n=function(e){return(0,T.decodeProto)(A.SyncActionValueSpec,e)},r=n(e.binarySyncAction),a=n(t.binarySyncAction),o=e.timestamp,s=t.timestamp,u=(0,p.default)(r.clearChatAction,"pendingMutationValue.clearChatAction"),l=(0,p.default)(a.clearChatAction,"incomingMutationValue.clearChatAction");switch((0,v.compareMessageRanges)((0,p.default)(l.messageRange,"incomingClearChatAction.messageRange"),(0,p.default)(u.messageRange,"pendingClearChatAction.messageRange"))){case v.MessageRangeEncloseType.RangeAEnclosesRangeB:return h.ConflictResolutionState.ApplyRemoteAndDropLocal;case v.MessageRangeEncloseType.RangeBEnclosesRangeA:return h.ConflictResolutionState.SkipRemote;case v.MessageRangeEncloseType.RangesAreEqual:return o<=s?h.ConflictResolutionState.ApplyRemoteAndDropLocal:h.ConflictResolutionState.SkipRemote;case v.MessageRangeEncloseType.RangesNotEnclosing:var c=(0,v.mergeMessageRanges)((0,p.default)(l.messageRange,"incomingClearChatAction.messageRange"),(0,p.default)(u.messageRange,"pendingClearChatAction.messageRange")),d=(0,w.encodeProto)(A.SyncActionValueSpec,(0,i.default)((0,i.default)({},a),{},{clearChatAction:{messageRange:c}})).readBuffer();return(0,v.lockForMessageRangeSync)([],[(0,i.default)((0,i.default)({},e),{},{binarySyncAction:d})],(function(){var t=JSON.parse(e.index);return(0,y.addActiveMessageRange)(t[1],"clearChat",d)})),h.ConflictResolutionState.SkipRemoteAndDropLocal}}}]),a}(b.SyncActionBase));Object.freeze(O);var M=O;t.default=M},82827:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(81109)),s=a(n(63038)),u=a(n(48926)),l=a(n(34575)),c=a(n(93913)),d=a(n(2205)),f=a(n(99842)),p=n(27291),h=n(75793),_=a(n(17956)),v=a(n(48629)),m=n(43883),g=n(35444),y=n(1342),E=n(98093),S=n(82285),b=n(72687),T=n(47907),w=new(function(e){(0,d.default)(a,e);var t,n=(0,f.default)(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).version=2,e}return(0,c.default)(a,[{key:"applyMutations",value:(t=(0,u.default)(i.default.mark((function e(t){var n,a,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[],e.next=4,r.all(t.map((function(e){try{var t=e.indexParts,r=(0,s.default)(t,2)[1];r||(0,T.throwInvalidActionIndex)();var i=(0,h.createUserWid)(r);if("set"===e.operation){var u,l=e.value.contactAction;if(!l)return __LOG__(3)`contact sync: malformed mutation`,{actionState:p.SyncActionState.Malformed};var c={id:r,name:l.fullName||"",shortName:l.firstName||(null!==(u=(0,g.getShortName)(l.fullName))&&void 0!==u?u:""),type:"in",isAddressBookContact:1,isContactSyncCompleted:0};return n.push(c),v.default.add((0,o.default)((0,o.default)({},c),{},{id:i}),{merge:!0}),(0,E.syncNewContact)(i),{actionState:p.SyncActionState.Success}}if("remove"===e.operation){var d=v.default.get(i);null!=d&&d.setNotMyContact();var f=new _.default({id:i,type:"in"});return a.push(i),v.default.remove([f]),{actionState:p.SyncActionState.Success}}return __LOG__(3)`contact sync: operation not supported`,{actionState:p.SyncActionState.Unsupported}}catch(e){return{actionState:p.SyncActionState.Failed}}})));case 4:return u=e.sent,e.next=7,(0,m.getContactTable)().bulkCreateOrMerge(n);case 7:if(!(a.length>0)){e.next=11;break}return l=a.map((function(e){return(0,b.toJid)(e.user)})),e.next=11,(0,y.setNotAddressBookContacts)(l);case 11:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),a}(S.SyncActionBase));Object.freeze(w);var A=w;t.default=A},86725:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=a(n(91080)),p=n(27291),h=n(4753),_=n(82285),v=n(90066),m=n(47907),g=n(43883),y=n(69449),E=a(n(66312)),S=n(46042),b=n(29392),T=n(53939),w=new(function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).version=3,e}return(0,l.default)(n,[{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,a,s,u,l,c,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=16;break}return n=(0,o.default)(t.indexParts,5),r=n[1],a=n[2],s=n[3],u=n[4],r&&a&&s&&u||(0,m.throwInvalidActionIndex)(),l=(0,m.syncKeyToMsgKey)(r,a,s,u),e.next=7,(0,g.getMessageTable)().get(l.toString());case 7:if(c=e.sent){e.next=10;break}return e.abrupt("return",{actionState:p.SyncActionState.Orphan,orphanModel:{modelId:l.toString(),modelType:p.SyncModelType.Msg}});case 10:return e.next=12,(0,y.removeMessagesFromHistory)([c.id]);case 12:return(d=E.default.get(l))?d.delete():__LOG__(3)`delete_message_for_me_sync: msg ${l} found in storage but not in collection`,e.abrupt("return",{actionState:p.SyncActionState.Success});case 16:return __LOG__(3)`delete_message_for_me_sync: operation not supported`,e.abrupt("return",{actionState:p.SyncActionState.Unsupported});case 20:return e.prev=20,e.t0=e.catch(0),e.abrupt("return",{actionState:p.SyncActionState.Failed});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}()))}},{key:"resolveConflicts",value:function(e,t){var n,r,a=function(e){return(0,T.decodeProto)(b.SyncActionValueSpec,e)},i=(0,f.default)(null===(n=a(e.binarySyncAction).deleteMessageForMeAction)||void 0===n?void 0:n.deleteMedia,"decodeValue(localMutation.binarySyncAction).deleteMessageForMeAction?.deleteMedia");return!(0,f.default)(null===(r=a(t.binarySyncAction).deleteMessageForMeAction)||void 0===r?void 0:r.deleteMedia,"decodeValue(remoteMutation.binarySyncAction).deleteMessageForMeAction?.deleteMedia")&&i?p.ConflictResolutionState.SkipRemote:p.ConflictResolutionState.SkipRemoteAndDropLocal}},{key:"getDeleteForMeMutations",value:function(e,t){var n=this,r=(0,v.unixTimeMs)();return e.map((function(e){var a={deleteMessageForMeAction:{deleteMedia:t,messageTimestamp:e.t},timestamp:r};return{collection:p.CollectionName.RegularHigh,index:JSON.stringify([p.Actions.DeleteMessageForMe,e.id.remote.toString({legacy:!0}),e.id.id,e.id.fromMe?"1":"0",e.isGroupMsg&&!e.id.fromMe?e.sender.toString({legacy:!0}):"0"]),binarySyncAction:(0,S.encodeProto)(b.SyncActionValueSpec,a).readBuffer(),version:n.version,operation:h.SyncdMutationSyncdOperation.SET,timestamp:r}}))}}]),n}(_.SyncActionBase));Object.freeze(w);var A=w;t.default=A},85842:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(81109)),s=a(n(63038)),u=a(n(48926)),l=a(n(34575)),c=a(n(93913)),d=a(n(2205)),f=a(n(99842)),p=n(81172),h=n(27291),_=n(8498),v=n(8985),m=n(48186),g=n(75793),y=n(28367),E=n(82285),S=n(47907),b=new(function(e){(0,d.default)(a,e);var t=(0,f.default)(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).version=h.LABEL_ASSOCIATION_SYNC_VERSION,e}return(0,c.default)(a,[{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,u.default)(i.default.mark((function e(t){var a,u,l,c,d,f,E,b,T,w,A,C,O;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=28;break}if(u=t.indexParts,l=t.value,c=(0,s.default)(u,3),d=c[1],f=c[2],d&&f||(0,S.throwInvalidActionIndex)(),null!=(E=null===(a=l.labelAssociationAction)||void 0===a?void 0:a.labeled)){e.next=9;break}return __LOG__(3)`label jid sync: malformed mutation`,e.abrupt("return",{actionState:h.SyncActionState.Malformed});case 9:if(b=(0,g.createWid)(f),T=b.toString(),w={labelId:d,associationId:T,type:_.LabelAssociationType.Jid},!E){e.next=24;break}return e.next=15,(0,v.getTable)().get(T);case 15:return A=e.sent,C=n(54654).default,O=A?null:new C({id:b}),e.next=20,(0,y.getStorage)().lock(["chat","label-association"],(function(){return r.all([(0,_.getTable)().createOrReplace(w),O?(0,v.getTable)().create((0,o.default)((0,o.default)({},O.toJSON()),{},{id:T})):null])}));case 20:O&&n(26671).default.add(O),(0,m.addToLabelCollection)(T,[d],p.LabelItemParentType.Chat),e.next=27;break;case 24:return e.next=26,(0,_.getTable)().remove([d,T,_.LabelAssociationType.Jid]);case 26:(0,m.removeLabelFromCollection)(T,d,p.LabelItemParentType.Chat);case 27:return e.abrupt("return",{actionState:h.SyncActionState.Success});case 28:return __LOG__(3)`label jid sync: unsupported operation`,e.abrupt("return",{actionState:h.SyncActionState.Unsupported});case 32:return e.prev=32,e.t0=e.catch(0),e.abrupt("return",{actionState:h.SyncActionState.Failed});case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}()))}}]),a}(E.SyncActionBase));Object.freeze(b);var T=b;t.default=T},83463:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=n(81172),p=n(27291),h=n(8498),_=n(47907),v=n(48186),m=n(69449),g=new(function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).version=p.LABEL_ASSOCIATION_SYNC_VERSION,e}return(0,l.default)(n,[{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,a,s,u,l,c,d,g,y,E,S;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=26;break}if(r=t.indexParts,a=t.value,s=(0,o.default)(r,6),u=s[1],l=s[2],c=s[3],d=s[4],g=s[5],u&&l&&c&&d&&g||(0,_.throwInvalidActionIndex)(),null!=(y=null===(n=a.labelAssociationAction)||void 0===n?void 0:n.labeled)){e.next=9;break}return __LOG__(3)`label message sync: malformed mutation`,e.abrupt("return",{actionState:p.SyncActionState.Malformed});case 9:return E=(0,_.syncKeyToMsgKey)(l,c,d,g).toString(),e.next=12,(0,m.getMsgByMsgKey)(E);case 12:if(e.sent){e.next=15;break}return e.abrupt("return",{actionState:p.SyncActionState.Orphan,orphanModel:{modelId:E,modelType:p.SyncModelType.Msg}});case 15:if(S={labelId:u,associationId:E,type:h.LabelAssociationType.Message},!y){e.next=22;break}return e.next=19,(0,h.getTable)().createOrReplace(S);case 19:(0,v.addToLabelCollection)(E,[u],f.LabelItemParentType.Msg),e.next=25;break;case 22:return e.next=24,(0,h.getTable)().remove([u,E,h.LabelAssociationType.Message]);case 24:(0,v.removeLabelFromCollection)(E,u,f.LabelItemParentType.Msg);case 25:return e.abrupt("return",{actionState:p.SyncActionState.Success});case 26:return __LOG__(3)`label message sync: operation not supported`,e.abrupt("return",{actionState:p.SyncActionState.Unsupported});case 30:return e.prev=30,e.t0=e.catch(0),e.abrupt("return",{actionState:p.SyncActionState.Failed});case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}()))}}]),n}(n(82285).SyncActionBase));Object.freeze(g);var y=g;t.default=y},65065:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(81109)),s=a(n(63038)),u=a(n(48926)),l=a(n(34575)),c=a(n(93913)),d=a(n(2205)),f=a(n(99842)),p=n(27291),h=a(n(6705)),_=n(73916),v=n(82285),m=n(47907),g=new(function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).version=3,e}return(0,c.default)(n,[{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,u.default)(i.default.mark((function e(t){var n,r,a,u,l,c,d,f,v,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=23;break}if(r=t.indexParts,a=t.value,u=(0,s.default)(r,2),(l=u[1])||(0,m.throwInvalidActionIndex)(),c=a.labelEditAction){e.next=9;break}return __LOG__(3)`label sync: malformed mutation`,e.abrupt("return",{actionState:p.SyncActionState.Malformed});case 9:if(!c.deleted){e.next=14;break}return e.next=12,(0,_.getTable)().remove(l);case 12:return h.default.remove(l),e.abrupt("return",{actionState:p.SyncActionState.Success});case 14:return d=c.color,f=c.predefinedId,""===(v=null!==(n=c.name)&&void 0!==n?n:"")&&__LOG__(3)`labelEditAction.name is empty`,null==d&&__LOG__(3)`labelEditAction.color is empty`,g={id:l,name:v,colorIndex:d,predefinedId:f},e.next=21,(0,_.getTable)().createOrReplace(g);case 21:return h.default.add((0,o.default)({},g),{merge:!0}),e.abrupt("return",{actionState:p.SyncActionState.Success});case 23:return __LOG__(3)`label sync: operation not supported`,e.abrupt("return",{actionState:p.SyncActionState.Unsupported});case 27:return e.prev=27,e.t0=e.catch(0),e.abrupt("return",{actionState:p.SyncActionState.Failed});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(){return e.apply(this,arguments)}}()))}}]),n}(v.SyncActionBase));Object.freeze(g);var y=g;t.default=y},58845:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=n(27291),f=a(n(89115)),p=a(n(34263)),h=new(function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).version=3,e}return(0,u.default)(n,[{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=12;break}if(n=t.value,r=n.localeSetting){e.next=7;break}return __LOG__(3)`locale setting sync: malformed mutation`,e.abrupt("return",{actionState:d.SyncActionState.Malformed});case 7:return a=r.locale,e.next=10,f.default.setLocale(a,p.default.L10N_PRIORITY.PHONE);case 10:return e.abrupt("return",{actionState:d.SyncActionState.Success});case 12:return __LOG__(3)`locale setting sync: operation not supported`,e.abrupt("return",{actionState:d.SyncActionState.Unsupported});case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",{actionState:d.SyncActionState.Failed});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}()))}}]),n}(n(82285).SyncActionBase));Object.freeze(h);var _=h;t.default=_},585:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),o=a(n(87757)),s=a(n(63038)),u=a(n(48926)),l=a(n(34575)),c=a(n(93913)),d=a(n(2205)),f=a(n(99842)),p=a(n(26671)),h=n(27291),_=n(4753),v=n(37865),m=n(43883),g=a(n(91080)),y=n(75793),E=n(22252),S=n(82285),b=n(46042),T=n(53939),w=n(29392),A=n(47907),C=new(function(e){(0,d.default)(C,e);var t,a,S=(0,f.default)(C);function C(){var e;(0,l.default)(this,C);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=S.call.apply(S,[this].concat(n))).version=3,e}return(0,c.default)(C,[{key:"_setRead",value:function(e,t){var r=p.default.get(e);if(r){var a=n(54865);t?a.markSeen(r):a.markUnseen(r)}}},{key:"validateSyncActionValue",value:function(e){var t=e.markChatAsReadAction;return null!=(null==t?void 0:t.read)&&(0,v.validateMessageRange)(null==t?void 0:t.messageRange)}},{key:"applyMutations",value:function(e){var t=this;return r.all(e.map(function(){var e=(0,u.default)(o.default.mark((function e(n){var r,a,i,u,l,c,d,f,p,_;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==n.operation){e.next=18;break}if(i=n.indexParts,u=n.value,l=(0,s.default)(i,2),(c=l[1])||(0,A.throwInvalidActionIndex)(),t.validateSyncActionValue(u)){e.next=8;break}return __LOG__(3)`mark chat as read sync: malformed mutation`,e.abrupt("return",{actionState:h.SyncActionState.Malformed});case 8:return d=(0,g.default)(null===(r=u.markChatAsReadAction)||void 0===r?void 0:r.read,"value.markChatAsReadAction?.read"),f=(0,g.default)(null===(a=u.markChatAsReadAction)||void 0===a?void 0:a.messageRange,"value.markChatAsReadAction?.messageRange"),p=(0,y.createWid)(c),_=p.toString(),e.next=14,(0,m.getChatTable)().get(_);case 14:if(e.sent){e.next=17;break}return e.abrupt("return",{actionState:h.SyncActionState.Orphan,orphanModel:{modelType:h.SyncModelType.Chat,modelId:_}});case 17:return e.abrupt("return",t._applyMutation(p,d,f,u));case 18:return __LOG__(3)`mark chat as read sync: operation not supported`,e.abrupt("return",{actionState:h.SyncActionState.Unsupported});case 22:return e.prev=22,e.t0=e.catch(0),e.abrupt("return",{actionState:h.SyncActionState.Failed});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}()))}},{key:"_applyMutation",value:(a=(0,u.default)(o.default.mark((function e(t,n,a,i){var s,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.removeActiveMessageRange)(t.toString(),"markChatAsRead");case 2:return e.next=4,(0,v.constructMessageRange)(t);case 4:s=e.sent,u=(0,v.compareMessageRanges)(s,a),l=(0,b.encodeProto)(w.SyncActionValueSpec,i).readBuffer(),e.t0=u,e.next=e.t0===v.MessageRangeEncloseType.RangesAreEqual?10:e.t0===v.MessageRangeEncloseType.RangesNotEnclosing?14:e.t0===v.MessageRangeEncloseType.RangeBEnclosesRangeA?17:e.t0===v.MessageRangeEncloseType.RangeAEnclosesRangeB?21:23;break;case 10:return(0,E.addActiveMessageRange)(t.toString(),"markChatAsRead",l),this._setRead(t,n),e.abrupt("return",r.resolve({actionState:h.SyncActionState.Success}));case 14:return(0,E.addActiveMessageRange)(t.toString(),"markChatAsRead",l),e.abrupt("return",r.resolve({actionState:h.SyncActionState.Orphan,orphanModel:{modelType:h.SyncModelType.Chat,modelId:t.toString()}}));case 17:return(0,E.addActiveMessageRange)(t.toString(),"markChatAsRead",l),this._setRead(t,n),e.abrupt("return",r.resolve({actionState:h.SyncActionState.Orphan,orphanModel:{modelType:h.SyncModelType.Chat,modelId:t.toString()}}));case 21:return e.abrupt("return",r.resolve({actionState:h.SyncActionState.Success}));case 23:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_constructMarkChatAsReadIndex",value:function(e){return JSON.stringify([h.Actions.MarkChatAsRead,e.toString({legacy:!0})])}},{key:"getMarkChatAsReadMutation",value:(t=(0,u.default)(o.default.mark((function e(t,n,r){var a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=n,e.next=4,(0,v.constructMessageRange)(r);case 4:return e.t2=e.sent,e.t3={read:e.t1,messageRange:e.t2},a={timestamp:e.t0,markChatAsReadAction:e.t3},i={collection:h.CollectionName.RegularLow,index:this._constructMarkChatAsReadIndex(r),binarySyncAction:(0,b.encodeProto)(w.SyncActionValueSpec,a).readBuffer(),version:this.version,operation:_.SyncdMutationSyncdOperation.SET,timestamp:t},e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"resolveConflicts",value:function(e,t){var n,r,a=function(e){return(0,T.decodeProto)(w.SyncActionValueSpec,e)},o=a(e.binarySyncAction),s=a(t.binarySyncAction),u=e.timestamp,l=t.timestamp,c=(0,g.default)(o.markChatAsReadAction,"pendingMutationValue.markChatAsReadAction"),d=(0,g.default)(s.markChatAsReadAction,"incomingMutationValue.markChatAsReadAction");switch((0,v.compareMessageRanges)((0,g.default)(d.messageRange,"incomingMarkChatAsReadAction.messageRange"),(0,g.default)(c.messageRange,"pendingMarkChatAsReadAction.messageRange"))){case v.MessageRangeEncloseType.RangeAEnclosesRangeB:return h.ConflictResolutionState.ApplyRemoteAndDropLocal;case v.MessageRangeEncloseType.RangeBEnclosesRangeA:return h.ConflictResolutionState.SkipRemote;case v.MessageRangeEncloseType.RangesAreEqual:return u<=l?h.ConflictResolutionState.ApplyRemoteAndDropLocal:h.ConflictResolutionState.SkipRemote;case v.MessageRangeEncloseType.RangesNotEnclosing:var f=u<=l?null!==(n=d.read)&&void 0!==n&&n:null!==(r=c.read)&&void 0!==r&&r,p=(0,v.mergeMessageRanges)((0,g.default)(d.messageRange,"incomingMarkChatAsReadAction.messageRange"),(0,g.default)(c.messageRange,"pendingMarkChatAsReadAction.messageRange")),_=(0,b.encodeProto)(w.SyncActionValueSpec,(0,i.default)((0,i.default)({},s),{},{markChatAsReadAction:{read:f,messageRange:p}})).readBuffer();return(0,v.lockForMessageRangeSync)([],[(0,i.default)((0,i.default)({},e),{},{binarySyncAction:_})],(function(){var t=JSON.parse(e.index);return(0,E.addActiveMessageRange)(t[1],"markChatAsRead",_)})),h.ConflictResolutionState.SkipRemoteAndDropLocal}}}]),C}(S.SyncActionBase));Object.freeze(C);var O=C;t.default=O},37865:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.constructMessageRange=function(){return p.apply(this,arguments)},t.compareMessageRanges=function(e,t){var n=f(e,t),r=f(t,e);return n&&r?d.RangesAreEqual:n?d.RangeAEnclosesRangeB:r?d.RangeBEnclosesRangeA:d.RangesNotEnclosing},t.mergeMessageRanges=function(e,t){var n,r,a,i,o=(0,s.numberOrThrowIfTooLarge)(null!==(n=e.lastMessageTimestamp)&&void 0!==n?n:0),u=(0,s.numberOrThrowIfTooLarge)(null!==(r=t.lastMessageTimestamp)&&void 0!==r?r:0),l=Math.max(o,u),c={messages:h(e.messages,t.messages,l)};0!==l&&(c.lastMessageTimestamp=l);null==e.lastSystemMessageTimestamp&&null==t.lastSystemMessageTimestamp||(c.lastSystemMessageTimestamp=Math.max((0,s.numberOrThrowIfTooLarge)(null!==(a=e.lastSystemMessageTimestamp)&&void 0!==a?a:0),(0,s.numberOrThrowIfTooLarge)(null!==(i=t.lastSystemMessageTimestamp)&&void 0!==i?i:0)));return c},t.validateMessageRange=function(e){if(null==e)return!1;if(null!=e.lastMessageTimestamp&&0===e.messages.length)return!1;if(e.messages.filter((function(e){return null!=e.timestamp})).length>1e3)throw new c.SyncdFatalError("syncd: additionalMessages has >1000 messages with timestamp");return!0},t.lockForMessageRangeSync=t.MessageRangeEncloseType=void 0;var a=r(n(87757)),i=r(n(319)),o=r(n(48926)),s=n(20290),u=n(43129),l=n(50773),c=n(84479),d=n(54302).Mirrored(["RangeAEnclosesRangeB","RangeBEnclosesRangeA","RangesAreEqual","RangesNotEnclosing"]);function f(e,t){for(var n=new Set(e.messages.map((function(e){var t;return null===(t=e.key)||void 0===t?void 0:t.id}))),r=0;r<t.messages.length;r++){var a;if(null==t.messages[r].timestamp)if(!n.has(null===(a=t.messages[r].key)||void 0===a?void 0:a.id))return!1}for(var i=0;i<t.messages.length;i++){var o,u,l;if(!n.has(null===(o=t.messages[i].key)||void 0===o?void 0:o.id)&&(0,s.numberOrThrowIfTooLarge)(null!==(u=e.lastMessageTimestamp)&&void 0!==u?u:0)<=(0,s.numberOrThrowIfTooLarge)(null!==(l=t.messages[i].timestamp)&&void 0!==l?l:0))return!1}return!0}function p(){return(p=(0,o.default)(a.default.mark((function e(t){var n,r,i,o,l,c,d,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getLastMessageTimestamp)(t);case 2:return n=e.sent,e.next=5,(0,u.getLastSystemMessageTimestamp)(t);case 5:return r=e.sent,e.next=8,(0,u.getAdditionalMessages)(t,n);case 8:return i=e.sent,o=i.messages,null!=(l=i.newLastMessageTimestamp)&&(n=l),null==n&&(d=o.sort(u.timestampComparison),n=null===(c=d[o.length-1])||void 0===c?void 0:c.timestamp),f={messages:o},null!=n&&(f.lastMessageTimestamp=n),null!=r&&null!=n&&r>(0,s.numberOrThrowIfTooLarge)(n)&&(f.lastSystemMessageTimestamp=r),e.abrupt("return",f);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n){var r=new Map;return e.concat(t).forEach((function(e){var t,a,i,o=null!==(t=null===(a=e.key)||void 0===a?void 0:a.id)&&void 0!==t?t:"";if((0,s.numberOrThrowIfTooLarge)(null!==(i=e.timestamp)&&void 0!==i?i:0)>=n){var u,l,c=r.get(o);if(c)r.set(o,(0,s.numberOrThrowIfTooLarge)(null!==(u=c.timestamp)&&void 0!==u?u:0)<(0,s.numberOrThrowIfTooLarge)(null!==(l=e.timestamp)&&void 0!==l?l:0)?e:c);else r.set(o,e)}})),Array.from(r.values())}t.MessageRangeEncloseType=d;t.lockForMessageRangeSync=function(e,t,n){return(0,l.lockForSync)([].concat((0,i.default)(e),["message","active-message-ranges"]),t,n)}},7849:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(63038)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=n(27291),p=n(4753),h=n(43883),_=a(n(30608)),v=n(75793),m=n(20290),g=n(82285),y=n(90066),E=n(29392),S=n(46042),b=n(47907),T=new(function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).version=2,e}return(0,l.default)(n,[{key:"getChatJidAndMessageKey",value:function(e){return{chatJid:(0,s.default)(e.index,2)[1],messageKey:null}}},{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,u,l,c,d,p,g,E;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=24;break}if(r=t.indexParts,a=t.value,o=(0,s.default)(r,2),(u=o[1])||(0,b.throwInvalidActionIndex)(),l=a.muteAction,c=null===(n=a.muteAction)||void 0===n?void 0:n.muted,d=(0,m.maybeNumberOrThrowIfTooLarge)(null==l?void 0:l.muteEndTimestamp),!(null==c||c&&null==d)){e.next=11;break}return __LOG__(3)`mute chat sync: malformed mutation`,e.abrupt("return",{actionState:f.SyncActionState.Malformed});case 11:return p=(0,v.createWid)(u).toString(),e.next=14,(0,h.getChatTable)().get(p);case 14:if(e.sent){e.next=17;break}return e.abrupt("return",{actionState:f.SyncActionState.Orphan,orphanModel:{modelType:f.SyncModelType.Chat,modelId:p}});case 17:return E=(g=null!=d?d:0)>0&&g<(0,y.unixTimeMs)()?0:Math.floor(g/1e3),e.next=21,(0,h.getChatTable)().merge((0,v.createWid)(u).toString(),{muteExpiration:E});case 21:return _.default.add({id:(0,v.createWid)(u),expiration:E},{merge:!0}),e.abrupt("return",{actionState:f.SyncActionState.Success});case 24:return __LOG__(3)`mute chat sync: operation not supported`,e.abrupt("return",{actionState:f.SyncActionState.Unsupported});case 28:return e.prev=28,e.t0=e.catch(0),e.abrupt("return",{actionState:f.SyncActionState.Failed});case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}()))}},{key:"generateMuteMutation",value:function(e,t){var n=void 0!==t&&0!==t,r=(0,y.unixTimeMs)(),a=t;-1!==a&&(a*=1e3);var i={timestamp:r,muteAction:{muted:n,muteEndTimestamp:a}};return{collection:f.CollectionName.RegularHigh,index:JSON.stringify([f.Actions.Mute,e.toString({legacy:!0})]),operation:p.SyncdMutationSyncdOperation.SET,version:this.version,binarySyncAction:(0,S.encodeProto)(E.SyncActionValueSpec,i).readBuffer(),timestamp:r}}}]),n}(g.SyncActionBase));Object.freeze(T);var w=T;t.default=w},19616:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=n(27291),c=n(4753),d=n(82285),f=n(57222),p=a(n(49327)),h=n(46042),_=n(29392),v=new(function(e){(0,s.default)(a,e);var t=(0,u.default)(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).version=1,e}return(0,o.default)(a,[{key:"applyMutations",value:function(e){return r.all(e.map((function(e){try{if("set"===e.operation){var t,a=null===(t=e.value.pushNameSetting)||void 0===t?void 0:t.name;if(!a)return __LOG__(3)`push name sync: malformed mutation`,r.resolve({actionState:l.SyncActionState.Malformed});(0,p.default)(a),(0,f.setPushnameLocally)(a);var i=n(83219).default;return i.isSyncDCriticalDataSyncInProcess()&&(i.setSyncDCriticalSynced(),i.setSyncDCriticalDataSyncCompleted()),r.resolve({actionState:l.SyncActionState.Success})}return __LOG__(3)`push name sync: operation not supported`,r.resolve({actionState:l.SyncActionState.Unsupported})}catch(e){return{actionState:l.SyncActionState.Failed}}})))}},{key:"getPushnameMutation",value:function(e,t){return{collection:l.CollectionName.CriticalBlock,index:JSON.stringify([l.Actions.SettingPushName]),binarySyncAction:(0,h.encodeProto)(_.SyncActionValueSpec,{timestamp:e,pushNameSetting:{name:t}}).readBuffer(),version:this.version,operation:c.SyncdMutationSyncdOperation.SET,timestamp:e}}}]),a}(d.SyncActionBase));Object.freeze(v);var m=v;t.default=m},67821:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=n(27291),p=a(n(40113)),h=n(43883),_=n(82285),v=n(47907),m=new(function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).version=2,e}return(0,l.default)(n,[{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,s.default)(i.default.mark((function e(t){var n,r,a,s,u,l,c,d,_,m;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=25;break}if(n=t.indexParts,r=t.value,a=(0,o.default)(n,2),(s=a[1])||(0,v.throwInvalidActionIndex)(),u=r.quickReplyAction){e.next=9;break}return __LOG__(3)`quick replies sync: malformed mutation`,e.abrupt("return",{actionState:f.SyncActionState.Malformed});case 9:if(!u.deleted){e.next=14;break}return e.next=12,(0,h.getQuickReplyTable)().remove(s);case 12:return p.default.remove(s),e.abrupt("return",{actionState:f.SyncActionState.Success});case 14:if(l=u.shortcut,c=u.message,l&&c){e.next=18;break}return __LOG__(3)`quick replies sync: malformed mutation`,e.abrupt("return",{actionState:f.SyncActionState.Malformed});case 18:return d=u.keywords||[],_=u.count||0,m={id:s,shortcut:l,count:_,message:c,keywords:d},e.next=23,(0,h.getQuickReplyTable)().createOrReplace(m);case 23:return p.default.add({id:s,shortcut:l,message:c,keywords:d,count:_},{merge:!0}),e.abrupt("return",{actionState:f.SyncActionState.Success});case 25:return __LOG__(3)`quick replies sync: operation not supported`,e.abrupt("return",{actionState:f.SyncActionState.Unsupported});case 29:return e.prev=29,e.t0=e.catch(0),e.abrupt("return",{actionState:f.SyncActionState.Failed});case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}()))}}]),n}(_.SyncActionBase));Object.freeze(m);var g=m;t.default=g},21049:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=n(90066),f=n(27291),p=a(n(25285)),h=n(4518),_=n(4753),v=n(82285),m=n(46042),g=n(29392),y=new(function(e){(0,l.default)(a,e);var t,n=(0,c.default)(a);function a(){var e;(0,s.default)(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).version=3,e}return(0,u.default)(a,[{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=9;break}if(null!=(r=null===(n=t.value.keyExpiration)||void 0===n?void 0:n.expiredKeyEpoch)){e.next=6;break}return __LOG__(4,void 0,new Error)`sentinel mutation sync: malformed mutation`,e.abrupt("return",{actionState:f.SyncActionState.Malformed});case 6:return e.next=8,p.default.expireSyncKey(r);case 8:return e.abrupt("return",{actionState:f.SyncActionState.Success});case 9:return __LOG__(3)`sentinel mutation sync: operation not supported`,e.abrupt("return",{actionState:f.SyncActionState.Unsupported});case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{actionState:f.SyncActionState.Failed});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()))}},{key:"getSentinelMutations",value:(t=(0,o.default)(i.default.mark((function e(){var t,n,r,a,o=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,d.unixTimeMs)(),n=Array.from(f.CollectionName.members()),e.next=4,(0,h.getNewestKeyPair)();case 4:return r=e.sent.keyEpoch,a={keyExpiration:{expiredKeyEpoch:r},timestamp:t},e.abrupt("return",n.map((function(e){return{collection:e,index:JSON.stringify([f.Actions.Sentinel,e]),operation:_.SyncdMutationSyncdOperation.SET,version:o.version,binarySyncAction:(0,m.encodeProto)(g.SyncActionValueSpec,a).readBuffer(),timestamp:t}})));case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),a}(v.SyncActionBase));Object.freeze(y);var E=y;t.default=E},78712:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(63038)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=n(27291),p=n(43883),h=n(69449),_=a(n(66312)),v=n(47907),m=n(82285),g=n(90950),y=n(4753),E=n(90066),S=n(46042),b=n(29392),T=new(function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).version=2,e}return(0,l.default)(n,[{key:"getChatJidAndMessageKey",value:function(e){var t=(0,s.default)(e.index,5),n=t[1],r=t[2],a=t[3],i=t[4];return n&&r&&a&&i||(0,v.throwInvalidActionIndex)(),{chatJid:n,messageKey:(0,v.syncKeyToMsgKey)(n,r,a,i).toString()}}},{key:"applyMutations",value:function(e){return r.all(e.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,u,l,c,d,m,g,y;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"set"!==t.operation){e.next=26;break}if(r=t.indexParts,a=t.value,o=(0,s.default)(r,5),u=o[1],l=o[2],c=o[3],d=o[4],u&&l&&c&&d||(0,v.throwInvalidActionIndex)(),null!=(m=null===(n=a.starAction)||void 0===n?void 0:n.starred)){e.next=9;break}return __LOG__(3)`star message sync: malformed mutation`,e.abrupt("return",{actionState:f.SyncActionState.Malformed});case 9:return g=(0,v.syncKeyToMsgKey)(u,l,c,d),e.next=12,(0,p.getMessageTable)().get(g.toString());case 12:if(e.sent){e.next=15;break}return e.abrupt("return",{actionState:f.SyncActionState.Orphan,orphanModel:{modelId:g.toString(),modelType:f.SyncModelType.Msg}});case 15:if(!m){e.next=20;break}return e.next=18,(0,h.starMessages)([g.toString()]);case 18:e.next=22;break;case 20:return e.next=22,(0,h.unstarMessages)([g.toString()]);case 22:return(y=_.default.get(g))?y.star=m:__LOG__(3)`star_message_sync: msg ${g} found in storage but not in collection`,e.abrupt("return",{actionState:f.SyncActionState.Success});case 26:return __LOG__(3)`star message sync: operation not supported`,e.abrupt("return",{actionState:f.SyncActionState.Unsupported});case 30:return e.prev=30,e.t0=e.catch(0),e.abrupt("return",{actionState:f.SyncActionState.Failed});case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}()))}},{key:"getStarMessageMutations",value:function(e,t){var n=this,r=(0,E.unixTimeMs)();return e.map((function(e){return{collection:f.CollectionName.RegularHigh,index:(0,g.constructStarMsgKey)(e),operation:y.SyncdMutationSyncdOperation.SET,version:n.version,binarySyncAction:(0,S.encodeProto)(b.SyncActionValueSpec,{timestamp:r,starAction:{starred:t}}).readBuffer(),timestamp:r}}))}}]),n}(m.SyncActionBase));Object.freeze(T);var w=T;t.default=w},82285:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SyncActionBase=void 0;var i=a(n(34575)),o=a(n(93913)),s=n(27291),u=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"getChatJidAndMessageKey",value:function(){}},{key:"resolveConflicts",value:function(e,t){return t.timestamp>=e.timestamp?s.ConflictResolutionState.ApplyRemoteAndDropLocal:s.ConflictResolutionState.SkipRemote}},{key:"dropMutationDueToCrossIndexConflict",value:function(){return r.resolve(!1)}}]),e}();t.SyncActionBase=u},47907:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncKeyToMsgKey=function(e,t,n,r){var a=void 0;(0,u.createWid)(e).isUser()||(a="1"===n?(0,i.getMeUser)():(0,u.createWid)(r));return new s.default({fromMe:"1"===n,remote:(0,u.createWid)(e),id:t,participant:a})},t.throwInvalidActionIndex=function(){throw new o.default.MdFatalError({mdFatalErrorCode:o.default.MD_SYNCD_FATAL_ERROR_CODE.INVALID_ACTION_INDEX}).commit(),new a.SyncdFatalError("invalid action index")};var a=n(84479),i=n(71701),o=r(n(8643)),s=r(n(5315)),u=n(75793)},13971:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=n(90066),l=n(27291),c=n(43883),d=function(){function e(){(0,o.default)(this,e)}var t;return(0,s.default)(e,null,[{key:"loadStatesFromDb",value:(t=(0,i.default)(a.default.mark((function e(){var t=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getCollectionVersionTable)().all();case 2:e.sent.forEach((function(e){return t.collectionStates.set(e.collection,{collection:e.collection,state:e.state,finiteFailureStartTime:e.finiteFailureStartTime})}));case 4:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"persistToDb",value:function(){var e=[];return this.collectionStates.forEach((function(t){return e.push(t)})),(0,c.getCollectionVersionTable)().bulkCreateOrMerge(e)}},{key:"clean",value:function(){this.collectionStates=new Map}},{key:"getCollectionState",value:function(e){var t=this.collectionStates.get(e);return t?t.state:(this.moveCollectionsToUpToDate([e]),l.CollectionSyncState.UpToDate)}},{key:"getCollectionsInStateDirty",value:function(){var e=[];return this.collectionStates.forEach((function(t){t.state===l.CollectionSyncState.Dirty&&e.push(t.collection)})),e}},{key:"getCollectionsInStateRetry",value:function(){var e=[];return this.collectionStates.forEach((function(t){t.state===l.CollectionSyncState.FailingFiniteRetry&&e.push(t.collection)})),e}},{key:"getCollectionsInStateFatal",value:function(){var e=[];return this.collectionStates.forEach((function(t){t.state===l.CollectionSyncState.Fatal&&e.push(t.collection)})),e}},{key:"getCollectionsInStateBlocked",value:function(){var e=[];return this.collectionStates.forEach((function(t){t.state===l.CollectionSyncState.Blocked&&e.push(t.collection)})),e}},{key:"moveCollectionsToUpToDate",value:function(e){var t=this;e.forEach((function(e){return t.collectionStates.set(e,{collection:e,state:l.CollectionSyncState.UpToDate,finiteFailureStartTime:void 0})}))}},{key:"moveCollectionsToDirty",value:function(e){var t=this;e.forEach((function(e){return t.collectionStates.set(e,{collection:e,state:l.CollectionSyncState.Dirty,finiteFailureStartTime:void 0})}))}},{key:"moveCollectionsToFiniteRetry",value:function(e){var t=this;e.forEach((function(e){return t.collectionStates.set(e,{collection:e,state:l.CollectionSyncState.FailingFiniteRetry,finiteFailureStartTime:(0,u.unixTimeMs)()})}))}},{key:"moveCollectionsToFatal",value:function(e){var t=this;e.forEach((function(e){return t.collectionStates.set(e,{collection:e,state:l.CollectionSyncState.Fatal,finiteFailureStartTime:void 0})}))}},{key:"moveCollectionsToBlocked",value:function(e){var t=this;e.forEach((function(e){return t.collectionStates.set(e,{collection:e,state:l.CollectionSyncState.Blocked,finiteFailureStartTime:void 0})}))}},{key:"getExpiredCollections",value:function(){var e=[];return this.collectionStates.forEach((function(t){var n;t.state===l.CollectionSyncState.FailingFiniteRetry&&(null==t.finiteFailureStartTime?(n=1/0,__LOG__(3)`Collection ${t.collection} is in finite retry state with no failure start time`):n=t.finiteFailureStartTime,n+6048e5<(0,u.unixTimeMs)()&&e.push(t.collection))})),e}}]),e}();t.default=d,d.collectionStates=new Map},27291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncDataType=t.ConflictResolutionState=t.SyncModelType=t.SyncActionState=t.CollectionSyncState=t.CollectionState=t.CollectionName=t.Actions=t.LABEL_ASSOCIATION_SYNC_VERSION=t.DEFAULT_COLLECTION_VERSION=t.MAX_PATCH_SIZE=t.MIN_PATCH_SIZE=t.MAX_INLINE_MUTATIONS=t.MIN_INLINE_MUTATIONS=t.FINITE_FAILURE_EXPIRY_DURATION=t.BACKOFF_BASE=t.BACKOFF_MAX_TIMEOUT=t.BACKOFF_MIN_TIMEOUT=void 0;t.BACKOFF_MIN_TIMEOUT=1e3;t.BACKOFF_MAX_TIMEOUT=36e5;t.BACKOFF_BASE=2;t.FINITE_FAILURE_EXPIRY_DURATION=6048e5;t.MIN_INLINE_MUTATIONS=100;t.MAX_INLINE_MUTATIONS=2e3;t.MIN_PATCH_SIZE=10;t.MAX_PATCH_SIZE=100;t.DEFAULT_COLLECTION_VERSION=0;t.LABEL_ASSOCIATION_SYNC_VERSION=3;var r=n(54302)({Star:"star",Contact:"contact",Mute:"mute",Pin:"pin",SettingPushName:"setting_pushName",LabelEdit:"label_edit",LabelMessage:"label_message",LabelJid:"label_jid",QuickReply:"quick_reply",LocaleSetting:"setting_locale",Archive:"archive",MarkChatAsRead:"markChatAsRead",ClearChat:"clearChat",DeleteMessageForMe:"deleteMessageForMe",Sentinel:"sentinel"});t.Actions=r;var a=n(54302)({Regular:"regular",RegularLow:"regular_low",RegularHigh:"regular_high",CriticalBlock:"critical_block",CriticalUnblockLow:"critical_unblock_low"});t.CollectionName=a;var i=n(54302).Mirrored(["Success","SuccessHasMore","Conflict","ErrorRetry","ErrorFatal","Blocked"]);t.CollectionState=i;var o=n(54302).Mirrored(["UpToDate","Dirty","FailingFiniteRetry","Fatal","Blocked"]);t.CollectionSyncState=o;var s=n(54302).Mirrored(["Success","Malformed","Orphan","Unsupported","Skipped","Failed"]);t.SyncActionState=s;var u=n(54302).Mirrored(["Msg","Chat"]);t.SyncModelType=u;var l=n(54302).Mirrored(["ApplyRemoteAndDropLocal","SkipRemote","SkipRemoteAndDropLocal"]);t.ConflictResolutionState=l;var c=n(54302).Mirrored(["Patch","Snapshot"]);t.SyncDataType=c},48353:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_MUTATION_MAC=t.IV_LENGTH=t.OCTET_LENGTH=t.MAC_LENGTH=t.MAX_OF_MIN_DATA_LENGTH=t.OPERATION_REMOVE_HEX=t.OPERATION_SET_HEX=t.PATCH_MAC_KEY_END=t.SNAPSHOT_MAC_KEY_END=t.VALUE_MAC_KEY_END=t.VALUE_ENCRYPTION_KEY_END=t.INDEX_KEY_END=t.PATCH_MAC_KEY_LENGTH=t.SNAPSHOT_MAC_KEY_LENGTH=t.VALUE_MAC_KEY_LENGTH=t.VALUE_ENCRYPTION_KEY_LENGTH=t.INDEX_KEY_LENGTH=t.DERIVED_KEY_LENGTH=t.HKDF_INFO=void 0;t.HKDF_INFO="WhatsApp Mutation Keys";t.DERIVED_KEY_LENGTH=160;t.INDEX_KEY_LENGTH=32;t.VALUE_ENCRYPTION_KEY_LENGTH=32;t.VALUE_MAC_KEY_LENGTH=32;t.SNAPSHOT_MAC_KEY_LENGTH=32;t.PATCH_MAC_KEY_LENGTH=32;t.INDEX_KEY_END=32;t.VALUE_ENCRYPTION_KEY_END=64;t.VALUE_MAC_KEY_END=96;t.SNAPSHOT_MAC_KEY_END=128;t.PATCH_MAC_KEY_END=160;t.OPERATION_SET_HEX="0x01";t.OPERATION_REMOVE_HEX="0x02";t.MAX_OF_MIN_DATA_LENGTH=0;t.MAC_LENGTH=32;t.OCTET_LENGTH=8;t.IV_LENGTH=16;var n=new ArrayBuffer(32);t.EMPTY_MUTATION_MAC=n},76494:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateIndexMac=function(e,t){return new l.default(e).sign(t)},t.generateAssociatedData=function(e,t){var n;switch(e){case d.SyncdMutationSyncdOperation.SET:n=u.OPERATION_SET_HEX;break;case d.SyncdMutationSyncdOperation.REMOVE:n=u.OPERATION_REMOVE_HEX}if(n){var r=n=new Uint8Array([parseInt(n,16)]).buffer,a=new Uint8Array(n.byteLength+t.byteLength);return a.set(new Uint8Array(r)),a.set(new Uint8Array(t),r.byteLength),a.buffer}throw new Error("invalid mutation operation value")},t.generatePadding=function(e,t){var n=Math.max(0,u.MAX_OF_MIN_DATA_LENGTH-e-t),r=new Uint8Array(n);return self.crypto.getRandomValues(r),r.buffer},t.generateCipherText=function(){return v.apply(this,arguments)},t.generateMac=function(e,t,n){var r=new Uint8Array(u.OCTET_LENGTH);r.set([e.byteLength],r.byteLength-1);var a=(0,f.combine)([e,t,r.buffer]);return new c.default(n).sign(a,u.MAC_LENGTH)},t.decryptCipherText=function(){return m.apply(this,arguments)},t.generateSnapshotMac=function(e,t,n,r){return new l.default(e).sign((0,f.combine)([t,n,r]))},t.generatePatchMac=function(e,t,n,r,a){return new l.default(e).sign((0,f.combine)([t].concat((0,i.default)(n),[r,a])))},t.valueMacFromIndexAndValueCipherText=function(e){var t=e.byteLength;return new Uint8Array(e).slice(t-u.MAC_LENGTH).buffer},t.generateEncryptionKeys=void 0;var a=r(n(87757)),i=r(n(319)),o=r(n(48926)),s=r(n(96486)),u=n(48353),l=r(n(44338)),c=r(n(63189)),d=n(4753),f=n(31248),p=n(92827),h=n(20029),_=s.default.memoize(h.generateEncryptionKeysUnmemoized,p.encodeB64);function v(){return(v=(0,o.default)(a.default.mark((function e(t,n,r){var i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,self.crypto.subtle.importKey("raw",new Uint8Array(n),"AES-CBC",!1,["encrypt"]);case 2:return i=e.sent,e.next=5,self.crypto.subtle.encrypt({name:"AES-CBC",iv:t},i,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,o.default)(a.default.mark((function e(t,n,r){var i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,self.crypto.subtle.importKey("raw",new Uint8Array(n),"AES-CBC",!1,["decrypt"]);case 2:return i=e.sent,e.next=5,self.crypto.subtle.decrypt({name:"AES-CBC",iv:t},i,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.generateEncryptionKeys=_},20029:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateEncryptionKeysUnmemoized=function(){return l.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=r(n(67819)),u=n(48353);function l(){return(l=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:return n=e.sent,e.abrupt("return",{indexKey:n.slice(0,u.INDEX_KEY_END),valueEncryptionKey:n.slice(u.INDEX_KEY_END,u.VALUE_ENCRYPTION_KEY_END),valueMacKey:n.slice(u.VALUE_ENCRYPTION_KEY_END,u.VALUE_MAC_KEY_END),snapshotMacKey:n.slice(u.VALUE_MAC_KEY_END,u.SNAPSHOT_MAC_KEY_END),patchMacKey:n.slice(u.SNAPSHOT_MAC_KEY_END,u.PATCH_MAC_KEY_END)});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return s.extractAndExpand(e,u.HKDF_INFO,u.DERIVED_KEY_LENGTH)}},31248:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.combine=function(e){if(0===e.length)throw new Error("buffers length is zero");if(1===e.length)return e[0];var t,n=e.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),r=new Uint8Array(n),a=0;for(t=0;t<e.length;t++)r.set(new Uint8Array(e[t]),a),a+=e[t].byteLength;return r.buffer},t.split=function(e,t,n){if(t<0||n<0)throw new Error("buffers length is zero");var r=new Array(3),a=new Uint8Array(e);return r[0]=a.slice(0,t).buffer,r[1]=a.slice(t,t+n).buffer,r[2]=a.slice(t+n).buffer,r},t.hexToUint8Array=function(e){return Uint8Array.from(e.split(" ").map((function(e){return parseInt(e,16)})))},t.arrayBufferToHex=function(e){return(0,a.default)(new Uint8Array(e)).map((function(e){return e.toString(16)})).toString().replace(/,/g," ")},t.arrayBuffersAreEqual=function(e,t){return function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e.getUint8(n)!==t.getUint8(n))return!1;return!0}(new DataView(e),new DataView(t))},t.to64BitNetworkOrder=function(e){var t=new ArrayBuffer(8);return new DataView(t).setUint32(4,e,!1),t},t.toUtf8=function(e){return i.encode(e)};var a=r(n(319));var i=new TextEncoder},25285:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=n(91433),l=n(43883),c=n(28367),d=(n(29392),n(53939),new ArrayBuffer(u.KEY_LENGTH_BYTES)),f=function(){function e(){(0,o.default)(this,e)}var t,n,r,u;return(0,s.default)(e,null,[{key:"getAllPendingMutationsRows",value:function(){return(0,l.getPendingMutationsTable)().all()}},{key:"performTransaction",value:function(e){return(0,c.getStorage)().lock(["collection-version","pending-mutations","sync-actions"],e)}},{key:"getPendingMutationsRows",value:function(e,t){return(0,l.getPendingMutationsTable)().equals(e,t)}},{key:"getPendingMutationsRowsById",value:(u=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getPendingMutationsTable)().bulkGet(t);case 2:return n=e.sent,e.abrupt("return",n.filter(Boolean));case 4:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"appendPendingMutationsRows",value:function(e){return(0,l.getPendingMutationsTable)().bulkCreate(e)}},{key:"bulkUpdatePendingMutationsKeyId",value:function(e){return(0,l.getPendingMutationsTable)().bulkCreateOrMerge(e)}},{key:"bulkRemovePendingMutations",value:function(e){return(0,l.getPendingMutationsTable)().bulkRemove(e)}},{key:"getCollectionVersion",value:(r=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getCollectionVersionTable)().get(t);case 2:return n=e.sent,e.abrupt("return",null==n?void 0:n.version);case 4:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"getCollectionVersions",value:(n=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getCollectionVersionTable)().bulkGet(t);case 2:return n=e.sent,e.abrupt("return",new Map(t.map((function(e,t){var r;return[e,null===(r=n[t])||void 0===r?void 0:r.version]}))));case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"setCollectionVersion",value:function(e,t,n){return(0,l.getCollectionVersionTable)().createOrMerge(e,{collection:e,version:t,ltHash:n})}},{key:"getLtHash",value:(t=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getCollectionVersionTable)().get(t);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.ltHash)||d);case 4:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"getSyncAction",value:function(e){return(0,l.getSyncActionsTable)().get(e)}},{key:"getSyncActionsRows",value:function(e,t){return(0,l.getSyncActionsTable)().anyOf(e,t)}},{key:"setSyncAction",value:function(e){return(0,l.getSyncActionsTable)().createOrReplace(e)}},{key:"setSyncActionRows",value:function(e){return(0,l.getSyncActionsTable)().bulkCreateOrReplace(e)}},{key:"updateSyncActionRows",value:function(e){return(0,l.getSyncActionsTable)().bulkCreateOrMerge(e)}},{key:"deleteSyncActionRows",value:function(e){return(0,l.getSyncActionsTable)().bulkRemove(e)}},{key:"getSyncKey",value:function(e){return(0,l.getSyncKeysTable)().get(e)}},{key:"getAllSyncKeys",value:function(){return(0,l.getSyncKeysTable)().all()}},{key:"createSyncKey",value:function(e){return(0,l.getSyncKeysTable)().create(e)}},{key:"getSyncKeyData",value:function(e){return(0,l.getSyncKeysTable)().get(e)}},{key:"expireSyncKey",value:function(e){return(0,l.getSyncKeysTable)().equals(["keyEpoch"],e).then((function(e){e.forEach((function(e){return(0,l.getSyncKeysTable)().merge(e.keyId,{keyId:e.keyId,timestamp:0})}))}))}},{key:"getMissingKey",value:function(e){return(0,l.getMissingKeysTable)().get(e)}},{key:"getMissingKeyCount",value:function(){return(0,l.getMissingKeysTable)().count()}},{key:"bulkGetMissingKeys",value:function(e){return(0,l.getMissingKeysTable)().bulkGet(e)}},{key:"getAllMissingKeys",value:function(){return(0,l.getMissingKeysTable)().all()}},{key:"bulkRemoveMissingKeys",value:function(e){return(0,l.getMissingKeysTable)().bulkRemove(e)}},{key:"updateMissingKey",value:function(e){return(0,l.getMissingKeysTable)().merge(e.keyId,e)}},{key:"createOrUpdateMissingKeys",value:function(e){return(0,l.getMissingKeysTable)().bulkCreateOrMerge(e)}}]),e}();t.default=f},53938:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.computeLtHashAndValidateSnapshot=function(){return g.apply(this,arguments)},t.computeLtHashAndValidatePatch=function(){return y.apply(this,arguments)},t.computeOutgoingSnapshotAndPatchMacs=function(){return w.apply(this,arguments)},t.computeLtHash=A;var a=r(n(87757)),i=r(n(48926)),o=n(76494),s=r(n(25285)),u=n(84479),l=n(4518),c=n(91433),d=n(4753),f=n(31248),p=n(27291),h=r(n(63056)),_=r(n(8643)),v=n(60956),m=new TextDecoder;function g(){return(g=(0,i.default)(a.default.mark((function e(t,n){var r,i,s,d,p,h,_,v,m,g,y;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.mac,i=n.version,s=n.keyId,d=n.records,e.next=3,(0,l.getKeyData)(s.id);case 3:if(p=e.sent){e.next=6;break}throw new u.SyncdMissingKeyError;case 6:return h=d.map((function(e){return(0,o.valueMacFromIndexAndValueCipherText)(e.value.blob)})),e.next=10,c.LT_HASH_ANTI_TAMPERING.add(c.EMPTY_LT_HASH,h);case 10:return _=e.sent,e.next=13,(0,o.generateEncryptionKeys)(p);case 13:return v=e.sent,m=v.snapshotMacKey,g=(0,f.to64BitNetworkOrder)(i.version),y=(0,f.toUtf8)(t).buffer,e.next=20,E(t,r,m,_,g,y,!0);case 20:return e.abrupt("return",_);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,i.default)(a.default.mark((function e(t,n){var r,i,s,c,d,p,h,_,v,m,g,y,S,T;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.version,i=n.mutations,s=n.snapshotMac,c=n.patchMac,d=n.keyId,p=d.id,e.next=4,(0,l.getKeyData)(p);case 4:if(h=e.sent){e.next=7;break}throw new u.SyncdMissingKeyError;case 7:return e.next=9,(0,o.generateEncryptionKeys)(h);case 9:return _=e.sent,v=_.snapshotMacKey,m=_.patchMacKey,g=i.map((function(e){return{operation:e.operation,indexMac:e.record.index.blob,valueMac:(0,o.valueMacFromIndexAndValueCipherText)(e.record.value.blob)}})),e.next=15,A(t,g);case 15:return y=e.sent,S=(0,f.to64BitNetworkOrder)(r.version),T=(0,f.toUtf8)(t).buffer,e.next=21,b(t,c,m,s,g.map((function(e){return e.valueMac})),S,T);case 21:return e.next=23,E(t,s,v,y,S,T,!1);case 23:return e.abrupt("return",y);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=(0,i.default)(a.default.mark((function e(t,n,r,i,s,l,c){var d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.generateSnapshotMac)(r,i,s,l);case 2:if(d=e.sent,(0,f.arrayBuffersAreEqual)(d,n)){e.next=11;break}if(p=c?_.default.MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT:_.default.MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_MAC_MISMATCH_IN_PATCH,(0,v.uploadFatalErrorMetric)(p,t),__LOG__(3,void 0,void 0,!0)`syncd: unable to validate snapshot mac.`,SEND_LOGS("syncd: unable to validate snapshot mac."),!h.default.syncdAntiTamperingFatalExceptionEnabled){e.next=11;break}throw new u.SyncdFatalError("unable to validate snapshot mac");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return T.apply(this,arguments)}function T(){return(T=(0,i.default)(a.default.mark((function e(t,n,r,i,s,l,c){var d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.generatePatchMac)(r,i,s,l,c);case 2:if(d=e.sent,(0,f.arrayBuffersAreEqual)(d,n)){e.next=10;break}if((0,v.uploadFatalErrorMetric)(_.default.MD_SYNCD_FATAL_ERROR_CODE.MAC_MISMATCH_PATCH,t),__LOG__(3,void 0,void 0,!0)`syncd: unable to validate patch mac.`,SEND_LOGS("syncd: unable to validate patch mac."),!h.default.syncdAntiTamperingFatalExceptionEnabled){e.next=10;break}throw new u.SyncdFatalError("unable to validate patch mac");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,i.default)(a.default.mark((function e(t,n,r,i){var u,l,c,d,h,_,v,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getCollectionVersion(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=p.DEFAULT_COLLECTION_VERSION;case 5:return e.t1=e.t0,u=e.t1+1,e.next=9,(0,o.generateEncryptionKeys)(i);case 9:return l=e.sent,c=l.patchMacKey,d=l.snapshotMacKey,h=(0,f.to64BitNetworkOrder)(u),_=(0,f.toUtf8)(t).buffer,e.next=16,(0,o.generateSnapshotMac)(d,n,h,_);case 16:return v=e.sent,e.next=19,(0,o.generatePatchMac)(c,v,r.map((function(e){return e.valueMac})),h,_);case 19:return m=e.sent,e.abrupt("return",{snapshotMac:v,patchMac:m});case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return C.apply(this,arguments)}function C(){return(C=(0,i.default)(a.default.mark((function e(t,n){var r,i,o,u,l,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getLtHash(t);case 2:return r=e.sent,e.next=5,O(n.map((function(e){return e.indexMac})));case 5:return i=e.sent,o=[],u=[],l=[],n.forEach((function(e){var t=e.indexMac,n=e.valueMac,r=e.operation,a=m.decode(t),s=i.get(a);s?r===d.SyncdMutationSyncdOperation.REMOVE?u.push(s):l.push(s):d.SyncdMutationSyncdOperation.REMOVE,r===d.SyncdMutationSyncdOperation.SET&&o.push(n)})),e.next=12,c.LT_HASH_ANTI_TAMPERING.subtractThenAdd(r,o,u.concat(l));case 12:return f=e.sent,e.abrupt("return",f);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return M.apply(this,arguments)}function M(){return(M=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getSyncActionsRows(["indexMac"],t);case 2:return n=e.sent,e.abrupt("return",new Map(n.map((function(e){return[m.decode(e.indexMac),e.valueMac]}))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},17932:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.maxSupportedVersion=t.ActionHandlers=void 0;var a=r(n(96486)),i=r(n(10369)),o=n(27291),s=r(n(82827)),u=r(n(85842)),l=r(n(83463)),c=r(n(65065)),d=r(n(58845)),f=r(n(585)),p=r(n(7849)),h=r(n(19616)),_=r(n(67821)),v=r(n(78712)),m=r(n(57831)),g=r(n(86725)),y=r(n(21049)),E=new Map([[o.Actions.Star,v.default],[o.Actions.Contact,s.default],[o.Actions.Mute,p.default],[o.Actions.LabelEdit,c.default],[o.Actions.LabelMessage,l.default],[o.Actions.LabelJid,u.default],[o.Actions.QuickReply,_.default],[o.Actions.LocaleSetting,d.default],[o.Actions.SettingPushName,h.default],[o.Actions.Archive,i.default],[o.Actions.MarkChatAsRead,f.default],[o.Actions.ClearChat,m.default],[o.Actions.DeleteMessageForMe,g.default],[o.Actions.Sentinel,y.default]]);t.ActionHandlers=E;t.maxSupportedVersion=function(){return a.default.max(Array.from(E.values()).map((function(e){return e.version})))}},24434:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.decodeExternalBlobReference=function(e,t){try{return(0,a.decodeProto)(u.ExternalBlobReferenceSpec,t)}catch(t){throw(0,o.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED,e),new i.SyncdFatalError("external blob reference protobuf deserialization failed")}},t.decodeSyncdSnapshot=function(e,t){try{return(0,a.decodeProto)(u.SyncdSnapshotSpec,t)}catch(t){throw(0,o.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED,e),new i.SyncdFatalError("snapshot protobuf deserialization failed")}},t.decodeSyncdPatch=function(e,t){try{return(0,a.decodeProto)(u.SyncdPatchSpec,t)}catch(t){throw(0,o.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.PATCH_PROTOBUF_DESERIALIZATION_FAILED,e),new i.SyncdFatalError("patch protobuf deserialization failed")}},t.decodeSyncdMutations=function(e,t){try{return(0,a.decodeProto)(u.SyncdMutationsSpec,t)}catch(t){throw(0,o.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED,e),new i.SyncdFatalError("mutations protobuf deserialization failed")}},t.decodeSyncActionData=function(e,t){try{return(0,a.decodeProto)(l.SyncActionDataSpec,t)}catch(t){throw(0,o.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED,e),new i.SyncdFatalError("action data protobuf deserialization failed")}};var a=n(53939),i=n(84479),o=n(60956),s=r(n(8643)),u=n(4753),l=n(29392)},65488:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.tryDecryptSnapshot=function(){return E.apply(this,arguments)},t.tryDecryptPatch=function(){return S.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(46042),u=n(24434),l=n(48353),c=n(76494),d=n(84479),f=n(4518),p=a(n(8643)),h=n(4753),_=n(29392),v=n(31248),m=a(n(58152)),g=n(60956),y=new TextDecoder;function E(){return(E=(0,o.default)(i.default.mark((function e(t,n){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.all(n.records.map((function(e){return b(t,h.SyncdMutationSyncdOperation.SET,e)})));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=(0,o.default)(i.default.mark((function e(t,n){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.all(n.mutations.map((function(e){return b(t,e.operation,e.record)})));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return T.apply(this,arguments)}function T(){return(T=(0,o.default)(i.default.mark((function e(t,n,r){var a,o,u,l,c,p,v,m,g,E,S;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.keyId.id,e.next=3,(0,f.getKeyData)(a);case 3:if(o=e.sent){e.next=8;break}if(n!==h.SyncdMutationSyncdOperation.REMOVE){e.next=7;break}throw new d.SyncdFatalError("no key data for remove mutations");case 7:throw new d.SyncdMissingKeyError;case 8:return e.next=10,w(t,a,o,n,r);case 10:return u=e.sent,l=u.syncAction,c=u.indexMac,p=u.valueMac,v=l.index,m=l.value,g=l.version,E=m?(0,s.encodeProto)(_.SyncActionValueSpec,m).readBuffer():m,S={index:y.decode(v),binarySyncAction:E,version:g,keyId:a,operation:n,indexMac:c,valueMac:p,collection:t},e.abrupt("return",S);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return A.apply(this,arguments)}function A(){return(A=(0,o.default)(i.default.mark((function e(t,n,r,a,o){var s,f,h,_,y,E,S,b,T,w,A,C,O,M,I,k,P,R;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.index.blob,f=o.value.blob,h=(0,c.valueMacFromIndexAndValueCipherText)(f),_=(0,v.split)(f,l.IV_LENGTH,f.byteLength-l.MAC_LENGTH-l.IV_LENGTH),y=_[0],E=_[1],S=_[2],e.next=9,(0,c.generateEncryptionKeys)(r);case 9:return b=e.sent,T=b.indexKey,w=b.valueEncryptionKey,A=b.valueMacKey,C=(0,v.combine)([y,E]),O=(0,c.generateAssociatedData)(a,n),e.next=15,(0,c.generateMac)(O,C,A);case 15:if(M=e.sent,(0,v.arrayBuffersAreEqual)(S,M)){e.next=19;break}throw(0,g.uploadFatalErrorMetric)(p.default.MD_SYNCD_FATAL_ERROR_CODE.DECRYPTION_FAILED,t),new d.SyncdFatalError("decryption failure: valueMAC mismatch");case 19:return e.next=21,(0,c.decryptCipherText)(new Uint8Array(y),w,E);case 21:return I=e.sent,k=(0,u.decodeSyncActionData)(t,I),P=m.default.validateSyncActionDataProtobuf(t,k),e.next=26,(0,c.generateIndexMac)(T,P.index);case 26:if(R=e.sent,(0,v.arrayBuffersAreEqual)(s,R)){e.next=30;break}throw(0,g.uploadFatalErrorMetric)(p.default.MD_SYNCD_FATAL_ERROR_CODE.DECRYPTION_FAILED,t),new d.SyncdFatalError("decryption failure: indexMAC mismatch");case 30:return e.abrupt("return",{syncAction:P,indexMac:s,valueMac:h});case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},88524:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.applyIndividualMutations=function(){return N.apply(this,arguments)},t.default=function(){return L.apply(this,arguments)};var i=a(n(63038)),o=a(n(87757)),s=a(n(6479)),u=a(n(48926)),l=a(n(96486)),c=n(17932),d=n(53938),f=n(27291),p=a(n(25285)),h=n(65488),_=n(84479),v=n(12467),m=n(52834),g=n(64256),y=n(4753),E=n(95535),S=n(41958),b=a(n(14734)),T=a(n(5168)),w=n(98786),A=n(53939),C=n(29392),O=a(n(8643)),M=n(90066),I=n(77396),k=n(20290),P=n(90950),R=n(60956),D=new ArrayBuffer(128);function N(){return(N=(0,u.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",r.resolve());case 2:return n=(0,E.syncActionsToDecryptedMutation)(t),e.next=5,r.all(n.map(function(){var e=(0,u.default)(o.default.mark((function e(t){var n,r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t.collection,[t]);case 2:return n=e.sent,r=n.setMutationsToPersist,a=n.pendingMutationsToDrop,i=r.map((function(e){e.indexMac,e.valueMac;return(0,s.default)(e,["indexMac","valueMac"])})),e.next=8,p.default.performTransaction((0,u.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.updateSyncActionRows(i);case 2:return e.next=4,p.default.bulkRemovePendingMutations(a);case 4:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=(0,u.default)(o.default.mark((function e(t,n){var r,a,s,u,l,c,d,h,v,m,g;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.version,s=t.patches,u=t.snapshot,l=t.syncedPendingMutationsId,c=t.syncedEncryptedMutations,__LOG__(2)`syncd: start applying collection ${r}`,e.next=4,F(r,s,u,n);case 4:if(d=e.sent,h=(0,i.default)(d,2),v=h[0],m=h[1],e.prev=8,null==v){e.next=15;break}return e.next=12,B(r,v,m,n);case 12:__LOG__(2)`syncd: ${r} snapshot and patches applied successfully`,e.next=31;break;case 15:if(null==m){e.next=21;break}return e.next=18,Y(r,m,n);case 18:__LOG__(2)`syncd: ${r} patches applied successfully`,e.next=31;break;case 21:if(null==a){e.next=27;break}return e.next=24,x(r,a,l,c);case 24:__LOG__(2)`syncd: ${r} v${a} uploaded successfully`,e.next=31;break;case 27:if(!(0,P.isBootstrap)(n)){e.next=30;break}return e.next=30,p.default.setCollectionVersion(r,0,D);case 30:__LOG__(2)`syncd: sync ${r} but there are no updates`;case 31:return e.abrupt("return",t);case 34:if(e.prev=34,e.t0=e.catch(8),g=e.t0.message,!(e.t0 instanceof _.SyncdMissingKeyError)){e.next=40;break}return __LOG__(3)`syncd key error: ${r} missing keys`,e.abrupt("return",{name:r,state:f.CollectionState.Blocked});case 40:if(!(e.t0 instanceof _.SyncdFatalError)){e.next=43;break}return __LOG__(4,void 0,new Error,!0)`syncd fatal error: ${r} throws ${g}`,SEND_LOGS(`syncd fatal error: ${String(r)} throws ${g}`),e.abrupt("return",{name:r,state:f.CollectionState.ErrorFatal});case 43:return __LOG__(3)`syncd retryable error: ${r} throws ${g}`,e.abrupt("return",{name:r,state:f.CollectionState.ErrorRetry});case 45:case"end":return e.stop()}}),e,null,[[8,34]])})))).apply(this,arguments)}function x(){return U.apply(this,arguments)}function U(){return(U=(0,u.default)(o.default.mark((function e(t,n,r,a){var i,s,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.map((function(e){return{indexMac:e.indexMac,valueMac:e.valueMac,operation:e.operation}})),e.next=3,(0,d.computeLtHash)(t,i);case 3:return s=e.sent,l=(0,E.encryptedUploadMutationsToSyncActions)(a.filter((function(e){return e.operation===y.SyncdMutationSyncdOperation.SET})),f.SyncActionState.Success),e.next=7,p.default.performTransaction((0,u.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.setSyncActionRows(l);case 2:return e.next=4,p.default.bulkRemovePendingMutations(r);case 4:return e.next=6,p.default.setCollectionVersion(t,n,s);case 6:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return G.apply(this,arguments)}function G(){return(G=(0,u.default)(o.default.mark((function e(t,n,a,s){var l,c,d,f,p,h,_,v,g,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.resolve(),c=0,d=(0,M.unixTimeMs)(),null!=a&&(f=b.default.validateExternalBlobReference(t,a),c+=(0,k.numberOrThrowIfTooLarge)(f.fileSizeBytes||0),l=(0,m.downloadSnapshot)(t,f)),p=r.resolve(),null!=n&&(h=n.map((function(e){return b.default.validatePatchProtobuf(t,e)})),p=r.all(h.map(function(){var e=(0,u.default)(o.default.mark((function e(n){var r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.mutations||[],!(a=n.externalMutations)){e.next=8;break}return e.next=5,(0,m.downloadExternalPatch)(t,a);case 5:r=e.sent,__LOG__(2)`syncd: ${t}'s external patch downloaded`,c+=(0,k.numberOrThrowIfTooLarge)(a.fileSizeBytes||0);case 8:return e.abrupt("return",{mutations:r,version:n.version,snapshotMac:n.snapshotMac,patchMac:n.patchMac,keyId:n.keyId,exitCode:n.exitCode,deviceIndex:n.deviceIndex});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()))),e.prev=6,e.next=9,r.all([l,p]);case 9:g=e.sent,y=(0,i.default)(g,2),_=y[0],v=y[1],(0,P.isBootstrap)(s)&&(0,I.commitBootstrapAppStateDownloadMetric)(t,d,c,!0),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(6),(0,P.isBootstrap)(s)&&(0,I.commitBootstrapAppStateDownloadMetric)(t,d,c,!1),e.t0;case 20:return e.abrupt("return",[_,v]);case 21:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}function B(){return j.apply(this,arguments)}function j(){return(j=(0,u.default)(o.default.mark((function e(t,n,r,a){var i,s,l,c,m,g;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.computeLtHashAndValidateSnapshot)(t,n);case 3:return i=e.sent,__LOG__(2)`syncd: collection ${t}'s snapshot validated`,e.next=7,(0,h.tryDecryptSnapshot)(t,n);case 7:return s=e.sent,__LOG__(2)`syncd: collection ${t}'s snapshot decrypted`,T.default.addMutationCount(n.records.length),(0,w.logMetricsForMutations)(s),(0,S.validateNoSameIndexForMultipleMutations)(t,s,f.SyncDataType.Snapshot),l=n.version.version,e.next=15,H(t,s);case 15:return c=e.sent,m=c.setMutationsToPersist,g=c.pendingMutationsToDrop,__LOG__(2)`syncd: processed ${s.length} mutations in snapshot of collection ${t}`,__LOG__(2)`syncd: collection ${t}'s snapshot v${l} applied`,e.next=22,p.default.performTransaction((0,u.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.setSyncActionRows(m);case 2:return e.next=4,p.default.bulkRemovePendingMutations(g);case 4:return e.next=6,p.default.setCollectionVersion(t,l,i);case 6:case"end":return e.stop()}}),e)}))));case 22:e.next=30;break;case 24:if(e.prev=24,e.t0=e.catch(0),!(e.t0 instanceof _.SyncdMissingKeyError)){e.next=29;break}return e.next=29,(0,v.handleMissingKeysInSnapshot)(t,n);case 29:throw e.t0;case 30:if(!r){e.next=32;break}return e.abrupt("return",Y(t,r,a));case 32:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function Y(){return K.apply(this,arguments)}function K(){return(K=(0,u.default)(o.default.mark((function e(t,n){var a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",r.resolve());case 2:(0,S.validateNoDuplicatePatchVersionInCollection)(t,n),a=l.default.sortBy(n,(function(e){return e.version.version})),e.prev=4,i=0;case 6:if(!(i<a.length)){e.next=12;break}return e.next=9,W(t,a[i]);case 9:i++,e.next=6;break;case 12:e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(4),!(e.t0 instanceof _.SyncdMissingKeyError)){e.next=19;break}return e.next=19,(0,v.handleMissingKeysInPatches)(t,a);case 19:throw e.t0;case 20:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function W(){return V.apply(this,arguments)}function V(){return(V=(0,u.default)(o.default.mark((function e(t,n){var r,a,i,s,l,c,v,m,g,E,b,A,C;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.exitCode){e.next=11;break}a=n.exitCode.code,e.t0=a,e.next=100===e.t0?5:101===e.t0?7:9;break;case 5:return(0,R.uploadFatalErrorMetric)(O.default.MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_MISSING_DATA,t),e.abrupt("break",10);case 7:return(0,R.uploadFatalErrorMetric)(O.default.MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_DESERIALIZATION_ERROR,t),e.abrupt("break",10);case 9:(0,R.uploadFatalErrorMetric)(O.default.MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_UNKNOWN,t);case 10:throw new _.SyncdFatalError(`received terminal patch with exit code:  ${String(a)} text: ${String(null===(r=n.exitCode)||void 0===r?void 0:r.text)}  `);case 11:return i=n.mutations.filter((function(e){return e.operation===y.SyncdMutationSyncdOperation.SET})).length,s=n.mutations.length-i,__LOG__(2)`syncd: applying patch ${t} v${n.version.version} from device ${n.deviceIndex}
SET count: ${i}
REMOVE count: ${s}`,e.next=16,(0,d.computeLtHashAndValidatePatch)(t,n);case 16:return l=e.sent,e.next=19,(0,h.tryDecryptPatch)(t,n);case 19:return c=e.sent,(0,w.logMetricsForMutations)(c),T.default.addMutationCount(c.length),(0,S.validateNoSameIndexForMultipleMutations)(t,c,f.SyncDataType.Patch),v=J(c),m=v.filter((function(e){return e.operation===y.SyncdMutationSyncdOperation.REMOVE})),e.next=27,z(t,m);case 27:return g=v.filter((function(e){return e.operation===y.SyncdMutationSyncdOperation.SET})),e.next=30,H(t,g);case 30:return E=e.sent,b=E.setMutationsToPersist,A=E.pendingMutationsToDrop,__LOG__(2)`syncd: processed ${c.length} mutations in patch version ${n.version.version} of collection ${t}`,C=n.version.version,e.next=37,p.default.performTransaction((0,u.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.deleteSyncActionRows(m.map((function(e){return e.index})));case 2:return e.next=4,p.default.setSyncActionRows(b);case 4:return e.next=6,p.default.bulkRemovePendingMutations(A);case 6:return e.next=8,p.default.setCollectionVersion(t,C,l);case 8:case"end":return e.stop()}}),e)}))));case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return $.apply(this,arguments)}function $(){return($=(0,u.default)(o.default.mark((function e(t,n){var r,a,i,s,u,l,c,d,p,h,_,v,m,y,b;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=(0,S.validateAndTypeSetMutations)(t,n),i=Q(t,a),s=i.supportedMutations,i.unsupportedMutations.forEach((function(e){return r.push((0,E.setMutationToSyncAction)(e,f.SyncActionState.Unsupported))})),e.next=6,(0,g.resolveConflict)(t,s);case 6:u=e.sent,l=u.remoteMutationsToApply,c=u.pendingMutationsToDrop,s.filter((function(e){return!l.includes(e)})).forEach((function(e){return r.push((0,E.setMutationToSyncAction)(e,f.SyncActionState.Skipped,e.actionName))})),d=X(l),p=0;case 13:if(!(p<d.length)){e.next=24;break}return h=d[p][0].actionHandler,_=d[p].map((function(e){return{operation:"set",indexParts:e.indexArr,value:(0,A.decodeProto)(C.SyncActionValueSpec,e.binarySyncAction),timestamp:e.timestamp}})),e.next=19,h.applyMutations(_);case 19:for(v=e.sent,m=0;m<d[p].length;m++)r.push((0,E.setMutationToSyncAction)(d[p][m],v[m].actionState,d[p][m].actionName,null===(y=v[m].orphanModel)||void 0===y?void 0:y.modelId,null===(b=v[m].orphanModel)||void 0===b?void 0:b.modelType));case 21:p++,e.next=13;break;case 24:return e.abrupt("return",{setMutationsToPersist:r,pendingMutationsToDrop:c});case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return q.apply(this,arguments)}function q(){return(q=(0,u.default)(o.default.mark((function e(t,n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.all(n.map(function(){var e=(0,u.default)(o.default.mark((function e(n){var r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z(t,n.index),a=f.Actions.cast(r[0])){e.next=5;break}return __LOG__(2)`syncd: invalid action ${r[0]}`,e.abrupt("return");case 5:if(i=c.ActionHandlers.get(a)){e.next=9;break}return __LOG__(2)`syncd: no handler for action ${a}`,e.abrupt("return");case 9:return e.next=11,i.applyMutations([{operation:"remove",indexParts:r}]);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=e.filter((function(e){return e.operation===y.SyncdMutationSyncdOperation.SET})),n=new Set(t.map((function(e){return e.index})));return e.filter((function(e){return e.operation===y.SyncdMutationSyncdOperation.REMOVE})).forEach((function(e){n.has(e.index)||t.push(e)})),t}function Q(e,t){var n=[],r=[];return t.forEach((function(t){if(t.version>(0,c.maxSupportedVersion)())r.push(t);else{var a=Z(e,t.index),i=f.Actions.cast(a[0]);if(!i)return __LOG__(3)`syncd: invalid action ${a[0]}`,void r.push(t);var o=c.ActionHandlers.get(i);if(!o)return __LOG__(3)`syncd: no handler for action ${i}`,void r.push(t);n.push({collection:t.collection,index:t.index,indexMac:t.indexMac,keyId:t.keyId,timestamp:t.timestamp,binarySyncAction:t.binarySyncAction,valueMac:t.valueMac,version:t.version,indexArr:a,actionName:i,actionHandler:o})}})),{supportedMutations:n,unsupportedMutations:r}}function X(e){return e.reduce((function(e,t){return 0!==e.length&&t.actionName===e[e.length-1][0].actionName?e[e.length-1].push(t):e.push([t]),e}),[])}function Z(e,t){try{var n=JSON.parse(t);if(n.length<1)throw new Error;return n}catch(t){throw(0,R.uploadFatalErrorMetric)(O.default.MD_SYNCD_FATAL_ERROR_CODE.INVALID_ACTION_INDEX,e),new _.SyncdFatalError("invalid action index")}}},52834:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.downloadSnapshot=function(){return v.apply(this,arguments)},t.downloadExternalPatch=function(){return m.apply(this,arguments)};var a=r(n(87757)),i=r(n(81109)),o=r(n(48926)),s=n(24434),u=n(92827),l=r(n(35340)),c=r(n(75214)),d=r(n(14734)),f=n(81214),p=r(n(8643)),h=n(84479),_=n(60956);function v(){return(v=(0,o.default)(a.default.mark((function e(t,n){var r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(n);case 3:return r=e.sent,i=(0,s.decodeSyncdSnapshot)(t,r),e.abrupt("return",d.default.validateSnapshotProtobuf(t,i));case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof f.MediaNotFoundError)){e.next=13;break}throw(0,_.uploadFatalErrorMetric)(p.default.MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_EXPIRED,t),new h.SyncdFatalError("snapshot expired");case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(){return(m=(0,o.default)(a.default.mark((function e(t,n){var r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(n);case 3:return r=e.sent,i=(0,s.decodeSyncdMutations)(t,r).mutations,e.abrupt("return",i.map((function(e){return d.default.validateMutationProtobuf(t,e)})));case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof f.MediaNotFoundError)){e.next=13;break}throw(0,_.uploadFatalErrorMetric)(p.default.MD_SYNCD_FATAL_ERROR_CODE.EXTERNAL_PATCH_EXPIRED,t),new h.SyncdFatalError("external patch expired");case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function g(e){var t=e.mediaKey,n=e.directPath,r=e.fileSha256,a=e.fileEncSha256,o={directPath:n,encFilehash:(0,u.encodeB64)(a),filehash:(0,u.encodeB64)(r),mediaKey:(0,u.encodeB64)(t),type:"md-app-state",userDownloadAttemptCount:0};return c.default.downloadAndDecrypt((0,i.default)({signal:(new l.default).signal},o))}},64256:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.resolveConflict=function(){return l.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(27291),s=r(n(25285)),u=n(53048);function l(){return(l=(0,i.default)(a.default.mark((function e(t,n){var r,i,l,c,d,f,p,h,_;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=[],e.next=4,s.default.getPendingMutationsRows(["collection"],t);case 4:l=e.sent,c=new Map(l.map((function(e){return[e.index,e]}))),n.forEach((function(e){var t=c.get(e.index);if(t)switch(e.actionHandler.resolveConflicts(t,e)){case o.ConflictResolutionState.SkipRemote:break;case o.ConflictResolutionState.ApplyRemoteAndDropLocal:r.push(e),i=i.concat(l.filter((function(t){return t.index===e.index})));break;case o.ConflictResolutionState.SkipRemoteAndDropLocal:i=i.concat(l.filter((function(t){return t.index===e.index})))}else r.push(e)})),d=(0,u.sort)(r),f=[],p=0;case 10:if(!(p<d.length)){e.next=19;break}return h=d[p].actionHandler,e.next=14,h.dropMutationDueToCrossIndexConflict(d[p],c);case 14:e.sent||f.push(d[p]);case 16:p++,e.next=10;break;case 19:return _=i.map((function(e){return e.id})).filter(Boolean),e.abrupt("return",{remoteMutationsToApply:f,pendingMutationsToDrop:_});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},53048:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sort=function(e){var t=[],n=[];try{return e.forEach((function(r){t.push(r);var a=u.get(r.actionName);null!=a&&e.forEach((function(e){e!==r&&a.includes(e.actionName)&&function(e,t){var n=e.actionHandler.getChatJidAndMessageKey(e),r=t.actionHandler.getChatJidAndMessageKey(t);if(n&&r)return n.chatJid===r.chatJid&&(null==n.messageKey||null==r.messageKey||n.messageKey===r.messageKey);return!1}(e,r)&&(e.timestamp<r.timestamp?n.push([e,r]):n.push([r,e]))}))})),a.default.array(t,n)}catch(e){throw(0,s.uploadFatalErrorMetric)(o.default.MD_SYNCD_FATAL_ERROR_CODE.CYCLIC_MUTATION_DEPENDENCY_IN_PATCH,null),new i.SyncdFatalError("cyclic mutation dependency in patch")}},t._setDependency=function(e,t){u.set(e,t)};var a=r(n(94633)),i=(n(27291),n(84479)),o=r(n(8643)),s=n(60956),u=new Map},95535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedUploadMutationsToSyncActions=function(e,t){return e.map((function(e){return{index:e.index,binarySyncAction:e.binarySyncAction,actionState:t,version:e.version,keyId:e.keyId,indexMac:e.indexMac,valueMac:e.valueMac,collection:e.collection,timestamp:e.timestamp}}))},t.setMutationToSyncAction=function(e,t,n,r,a){return{index:e.index,binarySyncAction:e.binarySyncAction,version:e.version,keyId:e.keyId,indexMac:e.indexMac,valueMac:e.valueMac,collection:e.collection,timestamp:e.timestamp,action:n,actionState:t,modelId:r,modelType:a}},t.syncActionsToDecryptedMutation=function(e){return e.map((function(e){return{collection:e.collection,index:e.index,indexMac:e.indexMac,keyId:e.keyId,operation:r.SyncdMutationSyncdOperation.SET,binarySyncAction:e.binarySyncAction,valueMac:e.valueMac,version:e.version}}))};var r=n(4753)},41958:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.validateNoDuplicatePatchVersionInCollection=function(e,t){var n=new Set;t.forEach((function(t){var r=t.version.version;if(n.has(r))throw(0,d.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.DUPLICATE_PATCH_VERSION_IN_COLLECTION,e),new o.SyncdFatalError("duplicate patch version in collection");n.add(r)}))},t.validateNoSameIndexForMultipleMutations=function(e,t,n){var r=new Set,a=new Set;t.forEach((function(t){var l=!1;if(t.operation===u.SyncdMutationSyncdOperation.SET&&(r.has(t.index)?l=!0:r.add(t.index)),t.operation===u.SyncdMutationSyncdOperation.REMOVE&&(a.has(t.index)?l=!0:a.add(t.index)),l)switch(n){case i.SyncDataType.Patch:throw(0,d.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH,e),new o.SyncdFatalError("same index for multiple mutations in patch");case i.SyncDataType.Snapshot:throw(0,d.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT,e),new o.SyncdFatalError("same index for multiple mutations in snapshot")}}))},t.validateAndTypeSetMutations=function(e,t){return t.map((function(t){var n=t.binarySyncAction;if(!n)throw(0,d.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_VALUE,e),new o.SyncdFatalError("missing action value");var r=(0,l.decodeProto)(c.SyncActionValueSpec,n),i=(0,a.maybeNumberOrThrowIfTooLarge)(r.timestamp);if(null==i)throw(0,d.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_TIMESTAMP,e),new o.SyncdFatalError("missing action timestamp");return{index:t.index,version:t.version,keyId:t.keyId,indexMac:t.indexMac,valueMac:t.valueMac,collection:t.collection,binarySyncAction:n,timestamp:i}}))};var a=n(20290),i=n(27291),o=n(84479),s=r(n(8643)),u=n(4753),l=n(53939),c=n(29392),d=n(60956)},14734:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(20290),s=n(84479),u=r(n(8643)),l=r(n(63056)),c=n(60956),d=new ArrayBuffer(0),f=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,null,[{key:"validateSnapshotProtobuf",value:function(t,n){var r=n.version,a=n.records,i=n.mac,f=n.keyId,p=null==r?void 0:r.version;if(!r||null==p)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_VERSION,t),new s.SyncdFatalError("missing snapshot version");var h=a.map((function(n){return e.validateRecordProtobuf(t,n)}));if(l.default.syncdAntiTamperingFatalExceptionEnabled){if(!i)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_MAC,t),new s.SyncdFatalError("missing snapshot mac")}else i||((0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_MAC,t),__LOG__(3)`syncd warning: missing snapshot mac`);var _=null!=i?i:d,v=e.validateKeyIdProtobuf(t,f,u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_KEY_ID);return{version:{version:(0,o.numberOrThrowIfTooLarge)(p)},records:h,mac:_,keyId:v}}},{key:"validatePatchProtobuf",value:function(t,n){var r=n.version,a=n.mutations,i=n.externalMutations,f=n.snapshotMac,p=n.patchMac,h=n.keyId,_=n.exitCode,v=n.deviceIndex,m=null==r?void 0:r.version;if(!r||null==m)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_VERSION,t),new s.SyncdFatalError("missing patch version");if(a&&a.length>0&&i)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS,t),new s.SyncdFatalError("patch with both inline and external mutations");if(l.default.syncdAntiTamperingFatalExceptionEnabled){if(!f)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_SNAPSHOT_MAC,t),new s.SyncdFatalError("missing patch snapshot mac");if(!p)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_MAC,t),new s.SyncdFatalError("missing patch mac")}else f||((0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_MAC,t),__LOG__(3)`syncd warning:  missing snapshot mac`),p||((0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_MAC,t),__LOG__(3)`syncd warning:  missing patch mac`);var g=null!=f?f:d,y=null!=p?p:d,E=e.validateKeyIdProtobuf(t,h,u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_KEY_ID);if(i){var S=e.validateExternalBlobReference(t,i);return{version:{version:(0,o.numberOrThrowIfTooLarge)(m)},mutations:void 0,externalMutations:S,snapshotMac:g,patchMac:y,keyId:E,deviceIndex:v}}var b=a.map((function(n){return e.validateMutationProtobuf(t,n)}));return{version:{version:(0,o.numberOrThrowIfTooLarge)(m)},mutations:b,externalMutations:void 0,exitCode:_,snapshotMac:g,patchMac:y,keyId:E,deviceIndex:v}}},{key:"validateExternalBlobReference",value:function(e,t){var n=t.mediaKey,r=t.directPath,a=t.handle,i=t.fileSizeBytes,o=t.fileSha256,l=t.fileEncSha256;if(!n)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY,e),new s.SyncdFatalError("missing external blob reference media key");if(!r)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH,e),new s.SyncdFatalError("missing external blob reference direct path");if(!o)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256,e),new s.SyncdFatalError("missing external blob reference file SHA256");if(!l)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256,e),new s.SyncdFatalError("missing external blob reference file enc SHA256");return{mediaKey:n,directPath:r,handle:a,fileSizeBytes:i,fileSha256:o,fileEncSha256:l}}},{key:"validateMutationProtobuf",value:function(t,n){var r=n.operation,a=n.record;if(null==r)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_OPERATION,t),new s.SyncdFatalError("missing mutation operation");if(!a)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_RECORD,t),new s.SyncdFatalError("missing mutation record");return{operation:r,record:e.validateRecordProtobuf(t,a)}}},{key:"validateRecordProtobuf",value:function(t,n){var r=n.index,a=n.value,i=n.keyId,o=null==r?void 0:r.blob,l=null==a?void 0:a.blob;if(!r||!o)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_INDEX,t),new s.SyncdFatalError("missing mutation index");if(!a||!l)throw(0,c.uploadFatalErrorMetric)(u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_VALUE,t),new s.SyncdFatalError("missing mutation value");return{index:{blob:o},value:{blob:l},keyId:e.validateKeyIdProtobuf(t,i,u.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_KEY_ID)}}},{key:"validateKeyIdProtobuf",value:function(e,t,n){var r=null==t?void 0:t.id;if(!t||!r)throw(0,c.uploadFatalErrorMetric)(n,e),new s.SyncdFatalError("missing mutation key id");return{id:r}}}]),e}();t.default=f},58152:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(84479),s=r(n(8643)),u=n(60956),l=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,null,[{key:"validateSyncActionDataProtobuf",value:function(e,t){var n=t.index,r=t.value,a=t.padding,i=t.version;if(!n)throw(0,u.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_INDEX,e),new o.SyncdFatalError("missing action index");if(null==i)throw(0,u.uploadFatalErrorMetric)(s.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_VERSION,e),new o.SyncdFatalError("missing action version");return{index:n,value:r,padding:a,version:i}}}]),e}();t.default=l},98786:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logMetricsForMutations=function(e){e.forEach(s)};var a=r(n(8643)),i=n(53939),o=n(29392);function s(e){var t,n=e.binarySyncAction;if(null!=n){var r=(0,i.decodeProto)(o.SyncActionValueSpec,n);r.archiveChatAction?t=r.archiveChatAction.messageRange:r.markChatAsReadAction?t=r.markChatAsReadAction.messageRange:r.clearChatAction?t=r.clearChatAction.messageRange:r.deleteChatAction&&(t=r.deleteChatAction.messageRange),null!=t&&new a.default.MdAppStateMessageRange({additionalMessagesCount:t.messages.length}).commit()}}},77396:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.commitBootstrapAppStateDownloadMetric=function(){return f.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(8643)),u=n(90066),l=n(27291),c=n(20290),d=r(n(21813));function f(){return(f=(0,o.default)(i.default.mark((function e(t,n,r,a){var o,f,p;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s.default.MdBootstrapAppStateDataDownloaded,e.t1=[l.CollectionName.CriticalBlock,l.CollectionName.CriticalUnblockLow].includes(t)?s.default.MD_BOOTSTRAP_PAYLOAD_TYPE.CRITICAL:s.default.MD_BOOTSTRAP_PAYLOAD_TYPE.NON_CRITICAL,e.t2=(0,u.unixTimeMs)(),e.t3=(0,u.unixTimeMs)()-n,e.t4=a?s.default.MD_BOOTSTRAP_STEP_RESULT.SUCCESS:s.default.MD_BOOTSTRAP_STEP_RESULT.FAILURE,e.next=7,d.default.getMdSessionId();case 7:return e.t5=e.sent,e.t6={mdBootstrapPayloadType:e.t1,mdTimestamp:e.t2,mdBootstrapStepDuration:e.t3,mdBootstrapStepResult:e.t4,mdSessionId:e.t5},o=new e.t0(e.t6),e.next=12,d.default.getStorageEstimation();case 12:(f=e.sent).mdStorageQuotaBytes!==d.STORAGE_QUOTA_UNAVAILABLE&&(o.mdStorageQuotaUsedBytes=f.mdStorageQuotaUsedBytes,o.mdStorageQuotaBytes=f.mdStorageQuotaBytes);try{null!=(p=(0,c.maybeNumberOrThrowIfTooLarge)(r))&&(o.mdBootstrapPayloadSize=p)}catch(e){}o.commit();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},73066:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleAppStateSyncKeyRequest=function(){return l.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(25285)),u=n(64346);function l(){return(l=(0,o.default)(i.default.mark((function e(t,n){var a,l,c,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.keyIds)){e.next=9;break}if(!(l=a.map((function(e){return e.keyId})).filter(Boolean))){e.next=9;break}return c=[],d=[],e.next=8,r.all(l.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getSyncKey(new Uint8Array(t));case 2:(n=e.sent)?c.push(n):d.push(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",(0,u.sendAppStateSyncKeyShare)({type:"missing_key",keys:c,orphanKeys:d,peerDeviceId:n}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},70239:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleAppStateSyncKeyShare=function(){return _.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(20290),u=a(n(25285)),l=n(12467),c=n(50773),d=a(n(8643)),f=n(60956),p=n(31248),h=n(35609);function _(){return(_=(0,o.default)(i.default.mark((function e(t,n){var a,_;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],_=t.keys){e.next=4;break}return e.abrupt("return",r.resolve());case 4:return e.next=6,r.all(_.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var r,o,l,c,_,v,m,g,y,E,S,b;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(r=t.keyId)||void 0===r?void 0:r.keyId,l=t.keyData,c=null==l?void 0:l.keyData,o){e.next=6;break}return __LOG__(2)`syncd: received empty key share from device id ${n.getDeviceId()}`,e.abrupt("return");case 6:if(6===o.byteLength){e.next=10;break}return new d.default.MdFatalError({mdFatalErrorCode:d.default.MD_SYNCD_FATAL_ERROR_CODE.INVALID_KEY_SHARE_KEY_ID}).commit(),__LOG__(4,void 0,new Error,!0)`syncd fatal error: key share key id has invalid bytelength of ${o.byteLength}`,SEND_LOGS(`syncd fatal error: key share key id has invalid bytelength of ${o.byteLength}`),e.abrupt("return",(0,f.handleFatalError)());case 10:if(a.push({keyId:o,keyData:c}),__LOG__(2)`syncd: received key share key id ${(0,p.arrayBufferToHex)(o)} from device id ${n.getDeviceId()}`,!l){e.next=29;break}if(g=l.timestamp,y=null===(_=l.fingerprint)||void 0===_?void 0:_.currentIndex,E=null===(v=l.fingerprint)||void 0===v?void 0:v.rawId,S=null===(m=l.fingerprint)||void 0===m?void 0:m.deviceIndexes,c&&null!=g&&null!=y&&null!=E&&S){e.next=21;break}return new d.default.MdFatalError({mdFatalErrorCode:d.default.MD_SYNCD_FATAL_ERROR_CODE.INVALID_KEY_SHARE_KEY_DATA}).commit(),__LOG__(4,void 0,new Error,!0)`syncd fatal error: invalid key share key data`,SEND_LOGS("syncd fatal error: invalid key share key data"),e.abrupt("return",(0,f.handleFatalError)());case 21:return b=new Uint8Array(o),e.next=24,u.default.getSyncKey(b);case 24:if(e.sent){e.next=29;break}return e.next=28,u.default.createSyncKey({keyId:b,keyEpoch:(0,h.getKeyEpoch)(o),keyData:c,timestamp:(0,s.numberOrThrowIfTooLarge)(g),fingerprint:{rawId:E,currentIndex:y,deviceIndexes:S}});case 28:__LOG__(2)`syncd: stored key share key id ${(0,p.arrayBufferToHex)(o)} from device id ${n.getDeviceId()}`;case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 6:return e.next=8,(0,l.updateMissingKeys)(a,n);case 8:(0,c.syncBlockedCollections)();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},12467:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateMissingKeyDevices=function(){return b.apply(this,arguments)},t.updateMissingKeys=function(e,t){var n=[],r=[];return e.forEach((function(e){var t=e.keyData,a=(0,g.arrayBufferToHex)(e.keyId);t?n.push(a):r.push(a)})),(0,y.getStorage)().lock(["missing-keys"],function(){var e=(0,l.default)(u.default.mark((function e(){var a,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=5;break}return e.next=3,f.default.bulkRemoveMissingKeys(n);case 3:return e.next=5,I();case 5:if(!(r.length>0)){e.next=15;break}return e.next=8,f.default.bulkGetMissingKeys(r);case 8:return a=e.sent.filter(Boolean),i=t.getDeviceId(),a.forEach((function(e){return e.deviceResponses.set(i,!1)})),e.next=13,f.default.createOrUpdateMissingKeys(a);case 13:return e.next=15,R();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},t.handleMissingKeysInSnapshot=function(){return T.apply(this,arguments)},t.handleMissingKeysInPatches=function(){return w.apply(this,arguments)};var i,o=a(n(43269)),s=a(n(319)),u=a(n(87757)),l=a(n(48926)),c=a(n(96486)),d=n(90066),f=a(n(25285)),p=a(n(8643)),h=n(67354),_=a(n(63056)),v=n(60956),m=n(35609),g=(n(27291),n(31248)),y=n(28367),E=n(84479),S=new ArrayBuffer(0);function b(){return(b=(0,l.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getPeerDevices)();case 2:return t=e.sent.map((function(e){return e.getDeviceId()})),e.abrupt("return",(0,y.getStorage)().lock(["missing-keys"],function(){var e=(0,l.default)(u.default.mark((function e(){var n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getAllMissingKeys();case 2:if(0!==(n=e.sent).length){e.next=5;break}return e.abrupt("return",r.resolve());case 5:return n.forEach((function(e){e.deviceResponses.forEach((function(n,r){t.includes(r)||e.deviceResponses.delete(r)}))})),e.next=8,f.default.createOrUpdateMissingKeys(n);case 8:return e.next=10,R();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,l.default)(u.default.mark((function e(t,n){var r,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Set,e.next=3,f.default.getAllSyncKeys();case 3:return a=e.sent.map((function(e){return(0,g.arrayBufferToHex)(e.keyId.buffer)})),n.records.forEach((function(e){var t=e.keyId.id;if((0,g.arrayBuffersAreEqual)(t,S))throw new E.SyncdFatalError("snapshot has empty key");var n=(0,g.arrayBufferToHex)(t);a.includes(n)||r.add(n)})),__LOG__(2)`syncd: collection ${t}'s snapshot has missing keys ${(0,s.default)(r)}`,e.next=8,A(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,l.default)(u.default.mark((function e(t,n){var r,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Set,e.next=3,f.default.getAllSyncKeys();case 3:return a=e.sent.map((function(e){return(0,g.arrayBufferToHex)(e.keyId.buffer)})),n.forEach((function(e){var t=e.keyId.id;if((0,g.arrayBuffersAreEqual)(t,S))throw new E.SyncdFatalError("patches has empty key");var n=(0,g.arrayBufferToHex)(t);a.includes(n)||r.add(n)})),__LOG__(2)`syncd: collection ${t}'s patches has missing keys ${(0,s.default)(r)}`,e.next=8,A(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return C.apply(this,arguments)}function C(){return(C=(0,l.default)(u.default.mark((function e(t){var n,a,i,o,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.default)(t),e.next=3,f.default.bulkGetMissingKeys(n);case 3:if(a=e.sent,0!==(i=n.filter((function(e){return!a.includes(e)}))).length){e.next=7;break}return e.abrupt("return",r.resolve());case 7:return e.next=9,(0,m.getPeerDevices)();case 9:return o=e.sent,l=i.map((function(e){return(0,g.hexToUint8Array)(e).buffer})),e.next=13,(0,h.sendAppStateSyncKeyRequest)(l,o);case 13:return e.next=15,O(l,o.map((function(e){return e.getDeviceId()})));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return M.apply(this,arguments)}function M(){return(M=(0,l.default)(u.default.mark((function e(t,n){var r,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=new Map;return n.forEach((function(t){return e.set(t,null)})),e},a=t.map((function(e){return{keyHex:(0,g.arrayBufferToHex)(e),keyId:e,timestamp:(0,d.unixTimeMs)(),deviceResponses:r()}})),e.next=4,f.default.createOrUpdateMissingKeys(a);case 4:return e.next=6,I();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return k.apply(this,arguments)}function k(){return(k=(0,l.default)(u.default.mark((function e(){var t,n,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(i),i=null,e.next=4,f.default.getAllMissingKeys();case 4:if(0!==(t=e.sent).length){e.next=7;break}return e.abrupt("return");case 7:n=c.default.minBy(t,(function(e){return e.timestamp})).timestamp,r=_.default.syncdWaitForKeyTimeoutDays*d.DAY_MILLISECONDS-(-n+(0,d.unixTimeMs)()),i=setTimeout(P,r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){new p.default.MdFatalError({mdFatalErrorCode:p.default.MD_SYNCD_FATAL_ERROR_CODE.TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY}).commit(),__LOG__(4,void 0,new Error,!0)`syncd fatal error: timeout while waiting for missing key`,SEND_LOGS("syncd fatal error: timeout while waiting for missing key"),(0,v.handleFatalError)()}function R(){return D.apply(this,arguments)}function D(){return(D=(0,l.default)(u.default.mark((function e(){var t,n,r,a,i,s,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getAllMissingKeys();case 2:t=e.sent,n=(0,o.default)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=34;break}a=r.value,i=!0,s=(0,o.default)(a.deviceResponses.values()),e.prev=10,s.s();case 12:if((l=s.n()).done){e.next=19;break}if(null!=l.value){e.next=17;break}return i=!1,e.abrupt("break",19);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:if(!i){e.next=32;break}return new p.default.MdFatalError({mdFatalErrorCode:p.default.MD_SYNCD_FATAL_ERROR_CODE.MISSING_KEY_ON_ALL_CLIENTS}).commit(),__LOG__(4,void 0,new Error,!0)`syncd fatal error: missing key on all clients`,SEND_LOGS("syncd fatal error: missing key on all clients"),(0,v.handleFatalError)(),e.abrupt("return");case 32:e.next=6;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(4),n.e(e.t1);case 39:return e.prev=39,n.f(),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[4,36,39,42],[10,21,24,27]])})))).apply(this,arguments)}},4518:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveKey=v,t.getNewestKeyPair=g,t.getKeyData=function(){return E.apply(this,arguments)},t.clearSyncKeysCache=function(){_=new Map};var a=r(n(87757)),i=r(n(48926)),o=r(n(96486)),s=r(n(25285)),u=n(38812),l=n(56925),c=n(64346),d=n(35609),f=r(n(8643)),p=n(92827),h=n(31248),_=new Map;function v(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)(a.default.mark((function e(){var t,n,r,i,o,d,p,_,m,y=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(y.length>0&&void 0!==y[0])||y[0],e.next=3,g();case 3:return n=e.sent,e.next=6,(0,u.getMyDeviceList)();case 6:if(r=e.sent,o=(i=r).currentIndex,d=i.devices,p=i.rawId,null!=o){e.next=10;break}throw new Error("syncd: missing current index for own device");case 10:if(r={currentIndex:o,deviceIndexes:d.map((function(e){return e.keyIndex})),rawId:p},_=(0,l.hasKeyExpired)(n),m=(0,l.hasADeviceBeenRemoved)(n,r),t&&(_||m)){e.next=15;break}return e.abrupt("return",{keyId:n.keyId.buffer,keyData:n.keyData});case 15:return n=(0,l.rotateKey)(n,r),__LOG__(2)`syncd: stored key rotation key id ${(0,h.arrayBufferToHex)(n.keyId.buffer)}`,e.next=19,s.default.createSyncKey(n);case 19:return e.next=21,(0,c.sendAppStateSyncKeyShare)({type:"key_rotation",keys:[n]});case 21:return _&&(__LOG__(2)`syncd key rotation due to key expiry`,new f.default.MdAppStateKeyRotation({mdAppStateKeyRotationReason:f.default.MD_APP_STATE_KEY_ROTATION_REASON_CODE.APP_STATE_SYNC_KEY_EXPIRY}).commit()),m&&(__LOG__(2)`syncd key rotation due to device removal`,new f.default.MdAppStateKeyRotation({mdAppStateKeyRotationReason:f.default.MD_APP_STATE_KEY_ROTATION_REASON_CODE.DEVICE_DEREGISTERATION}).commit()),e.abrupt("return",v(t));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)(a.default.mark((function e(){var t,n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getAllSyncKeys();case 2:return t=e.sent,n=o.default.max(t.map((function(e){return(0,d.getKeyEpoch)(e.keyId.buffer)}))),r=o.default.filter(t,(function(e){return(0,d.getKeyEpoch)(e.keyId.buffer)===n})),e.abrupt("return",o.default.minBy(r,(function(e){return(0,d.getKeyDeviceId)(e.keyId.buffer)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,i.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=_.get((0,p.encodeB64)(t)))){e.next=3;break}return e.abrupt("return",r.keyData);case 3:return e.next=5,s.default.getSyncKeyData(new Uint8Array(t));case 5:return(r=e.sent)&&_.set((0,p.encodeB64)(t),r),e.abrupt("return",null===(n=r)||void 0===n?void 0:n.keyData);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},56925:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasKeyExpired=function(e){var t=e.timestamp,n=Math.min(90,Math.max(1,l.default.syncdKeyMaxUseDays));return(0,a.unixTimeMs)()-t>n*a.DAY_MILLISECONDS},t.hasADeviceBeenRemoved=function(e,t){for(var n=e.fingerprint,r=t.rawId,a=t.currentIndex,o=t.deviceIndexes,s=new Set(n.deviceIndexes),u=n.currentIndex+1;u<=a;u++)s.add(u);return n.rawId!==r||!i.default.isEqual(s,new Set(o))},t.rotateKey=function(e,t){var n=function(e){var t=(0,c.getKeyEpoch)(e.keyId.buffer)+1,n=(0,u.assertGetMe)().getDeviceId();return{keyId:new Uint8Array((0,s.default)((0,o.intToBytes)(2,n).buffer,(0,o.intToBytes)(4,t).buffer)),keyEpoch:t}}(e),r=n.keyId,i=n.keyEpoch,l=self.crypto.getRandomValues(new Uint8Array(32)).buffer,d=function(e){var t=e.currentIndex,n=e.deviceIndexes;return{rawId:e.rawId,currentIndex:t,deviceIndexes:n}}(t),f=(0,a.unixTimeMs)();return{keyId:r,keyEpoch:i,keyData:l,fingerprint:d,timestamp:f}};var a=n(90066),i=r(n(96486)),o=n(21279),s=r(n(12780)),u=n(71701),l=r(n(63056)),c=n(35609)},67354:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAppStateSyncKeyRequest=function(){return h.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(29671),u=n(71701),l=n(39179),c=a(n(16551)),d=a(n(5315)),f=a(n(75554)),p=n(31248);function h(){return(h=(0,o.default)(i.default.mark((function e(t,n){var a,o,h,_,v;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map((function(e){return{keyId:e}})),o={keyIds:a},h=n.map((function(e){var t=new d.default({fromMe:!0,remote:(0,u.assertGetMeUser)(),id:(0,f.default)()});return new c.default({id:t,to:e,type:"protocol",subtype:"app_state_sync_key_request",appStateSyncKeyRequest:o})})),_=n.map((function(e){return e.getDeviceId()})),v=t.map((function(e){return(0,p.arrayBufferToHex)(e)})),__LOG__(2)`syncd: send key request key id ${v} to peer deviceIds ${_}`,e.next=8,(0,l.storePeerMessages)(h);case 8:return e.next=10,r.all(h.map(s.encryptAndSendKeyMsg));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},64346:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendAppStateSyncKeyShare=function(){return _.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(29671),u=n(71701),l=n(39179),c=a(n(16551)),d=a(n(5315)),f=a(n(75554)),p=n(35609),h=n(31248);function _(){return(_=(0,o.default)(i.default.mark((function e(t){var n,a,o,_,m,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("key_rotation"!==t.type){e.next=7;break}return n=v(t.keys),e.next=4,(0,p.getPeerDevices)();case 4:a=e.sent,e.next=8;break;case 7:"missing_key"===t.type&&(n=v(t.keys,t.orphanKeys),a=[t.peerDeviceId]);case 8:if(null!=a){e.next=10;break}return e.abrupt("return",r.resolve());case 10:return _=(o=a).map((function(e){var t=new d.default({fromMe:!0,remote:(0,u.assertGetMeUser)(),id:(0,f.default)()});return new c.default({id:t,to:e,type:"protocol",subtype:"app_state_sync_key_share",appStateSyncKeyShare:n})})),m=o.map((function(e){return e.getDeviceId()})),g=t.keys.map((function(e){return(0,h.arrayBufferToHex)(e.keyId.buffer)})),__LOG__(2)`syncd: send key share key id ${g} to peer deviceIds ${m}`,e.next=17,(0,l.storePeerMessages)(_);case 17:return e.next=19,r.all(_.map(s.encryptAndSendKeyMsg));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){var n=e.map((function(e){return{keyId:{keyId:e.keyId.buffer},keyData:{keyData:e.keyData,fingerprint:{rawId:e.fingerprint.rawId,currentIndex:e.fingerprint.currentIndex,deviceIndexes:e.fingerprint.deviceIndexes},timestamp:e.timestamp}}}));if(t){var r=t.map((function(e){return{keyId:{keyId:e},keyData:void 0}}));n=n.concat(r)}return{keys:n}}},35609:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyDeviceId=function(e){return new DataView(e).getUint16(0)},t.getKeyEpoch=function(e){return new DataView(e).getUint32(2)},t.getPeerDevices=function(){return l.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(38812),s=n(71701),u=n(75793);function l(){return(l=(0,i.default)(a.default.mark((function e(){var t,n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=(0,s.assertGetMe)().getDeviceId(),e.next=4,(0,o.getMyDeviceList)();case 4:return(r=e.sent).devices.forEach((function(e){e.id!==n&&t.push((0,u.createDeviceWidFromUserAndDevice)(r.id,e.id))})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},31272:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildSyncIqNode=function(){return C.apply(this,arguments)},t._generateMutationsToUpload=F;var i=a(n(87757)),o=a(n(48926)),s=a(n(96486)),u=n(80986),l=n(92827),c=n(53938),d=a(n(52948)),f=a(n(25285)),p=n(59308),h=n(73859),_=n(4753),v=n(18712),m=n(4518),g=n(31248),y=n(29654),E=n(35609),S=a(n(63056)),b=a(n(5168)),T=n(27291),w=n(71701),A=a(n(60305));function C(){return(C=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:return n=e.sent,r=n.collectionNodes,a=n.collectionWithEncryptedMutations,o=n.localCollectionVersions,s=(0,v.wap)("iq",{to:v.S_WHATSAPP_NET,xmlns:"w:sync:app:state",type:"set",id:(0,v.generateId)()},(0,v.wap)("sync",null,r)),e.abrupt("return",{syncIqNode:s,collectionWithEncryptedMutations:a,localCollectionVersions:o});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return M.apply(this,arguments)}function M(){return(M=(0,o.default)(i.default.mark((function e(t){var n,a,s,u,l,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=(0,o.default)(i.default.mark((function e(t,n){var r,a,o,s,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getCollectionVersion(t);case 2:if(r=e.sent,!(null!=n&&n.length>0)){e.next=11;break}return e.next=6,I(t,n);case 6:s=e.sent,u=s.patchNode,l=s.encryptedMutations,a=u,o=l;case 11:return e.abrupt("return",{collection:t,version:r,patchNode:a,encryptedMutations:o});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=new Map,s=new Map,u=[],t.forEach((function(e,t){return u.push(n(t,e))})),e.next=7,r.all(u);case 7:return l=e.sent,c=l.map((function(e){var t=e.collection,n=e.version,r=e.patchNode,i=e.encryptedMutations;return i&&s.set(t,i),a.set(t,n),(0,v.wap)("collection",{name:(0,v.CUSTOM_STRING)(t),version:(0,v.INT)(null!=n?n:T.DEFAULT_COLLECTION_VERSION),return_snapshot:void 0===n?"true":"false"},r)})),e.abrupt("return",{collectionNodes:c,collectionWithEncryptedMutations:s,localCollectionVersions:a});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return k.apply(this,arguments)}function k(){return(k=(0,o.default)(i.default.mark((function e(t,n){var a,s,u,l,d,f,_,g,y,E,S,b,T,w;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getActiveKey)(!P(n));case 2:return a=e.sent,e.next=5,F(t,n,a);case 5:return s=e.sent,u=s.map((function(e){return(0,p.encryptMutation)(e,a)})),e.next=9,r.all(u);case 9:return l=e.sent,d=l.map((function(e){return{indexMac:e.indexMac,valueMac:e.valueMac,operation:e.operation}})),e.next=13,(0,c.computeLtHash)(t,d);case 13:return f=e.sent,e.next=16,(0,c.computeOutgoingSnapshotAndPatchMacs)(t,f,l,a.keyData);case 16:if(_=e.sent,g=_.snapshotMac,y=_.patchMac,E=l.map((function(e){return U(e.keyId,e.operation,e.indexMac,e.indexAndValueCipherText)})),S=x(E),b=function(){var e=(0,o.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.uploadExternalPatch)(S);case 2:return t=e.sent,e.next=5,R(t,S);case 5:return n=e.sent,e.abrupt("return",N(n,a.keyId,g,y));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!(0,h.exceedInlineMutationCount)(E)){e.next=28;break}return e.next=25,b();case 25:T=e.sent,e.next=33;break;case 28:if(T=L(E,a.keyId,g,y),!(0,h.exceedPatchProtobufSize)(T)){e.next=33;break}return e.next=32,b();case 32:T=e.sent;case 33:return w=(0,v.wap)("patch",null,T),e.abrupt("return",{patchNode:w,encryptedMutations:l});case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return A.default.isLogoutInProgress&&e.some((function(e){return JSON.parse(e.index)[0]===T.Actions.Sentinel}))}function R(){return D.apply(this,arguments)}function D(){return(D=(0,o.default)(i.default.mark((function e(t,n){var r,a,o,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.mediaKey,a=t.directPath,o=t.encFilehash,s=t.handle){e.next=3;break}throw new Error("Missing handle after uploading external patch to mms4");case 3:return e.next=5,(0,d.default)(n);case 5:return u=e.sent,e.abrupt("return",{mediaKey:(0,l.decodeB64)(r),directPath:a,handle:s,fileSizeBytes:n.byteLength,fileSha256:(0,l.decodeB64)(u),fileEncSha256:(0,l.decodeB64)(o)});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n,r){var a=S.default.syncdPatchDeviceIndexIncluded?(0,w.assertGetMe)().getDeviceId():void 0;return(0,u.encodeSyncdPatch)({keyId:{id:t},externalMutations:e,snapshotMac:n,patchMac:r,deviceIndex:a})}function L(e,t,n,r){var a=S.default.syncdPatchDeviceIndexIncluded?(0,w.assertGetMe)().getDeviceId():void 0;return(0,u.encodeSyncdPatch)({keyId:{id:t},mutations:e,snapshotMac:n,patchMac:r,deviceIndex:a})}function x(e){return(0,u.encodeSyncdMutations)({mutations:e})}function U(e,t,n,r){return{operation:t,record:{keyId:{id:e},index:{blob:n},value:{blob:r}}}}function F(){return G.apply(this,arguments)}function G(){return(G=(0,o.default)(i.default.mark((function e(t,n,r){var a,o,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getSyncActionsRows(["collection"],[t]);case 2:return a=e.sent,o=n,s=B(t,a,n,r.keyId),o=o.concat(s),u=j(a,o,r.keyId),b.default.addKeyRotationRemoveCount(u.length),o=o.concat(u),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n,r){var a=t.filter((function(e){return!n.map((function(e){return e.index})).includes(e.index)&&!(0,g.arrayBuffersAreEqual)(e.keyId,r)}));a=s.default.sortBy(a,(function(e){return(0,E.getKeyEpoch)(e.keyId)}));var i=Math.min(5,Math.max(1,S.default.syncdAdditionalMutations));return a=a.slice(0,i),(0,y.syncActionsToPendingMutations)(a,_.SyncdMutationSyncdOperation.SET)}function j(e,t,n){var r=t.map((function(e){return e.index})),a=e.filter((function(e){return r.includes(e.index)})).filter((function(e){return!(0,g.arrayBuffersAreEqual)(e.keyId,n)}));return(0,y.syncActionsToPendingMutations)(a,_.SyncdMutationSyncdOperation.REMOVE)}},80986:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encodeSyncdPatch=function(e){try{return(0,a.encodeProto)(s.SyncdPatchSpec,e).readBuffer()}catch(e){throw new o.default.MdFatalError({mdFatalErrorCode:o.default.MD_SYNCD_FATAL_ERROR_CODE.PATCH_PROTOBUF_SERIALIZATION_FAILED}).commit(),new i.SyncdFatalError("patch protobuf serialization failed")}},t.encodeSyncdMutations=function(e){try{return(0,a.encodeProto)(s.SyncdMutationsSpec,e).readBuffer()}catch(e){throw new o.default.MdFatalError({mdFatalErrorCode:o.default.MD_SYNCD_FATAL_ERROR_CODE.MUTATIONS_PROTOBUF_SERIALIZATION_FAILED}).commit(),new i.SyncdFatalError("mutations protobuf serialization failed")}},t.encodeSyncActionData=function(e){try{return(0,a.encodeProto)(u.SyncActionDataSpec,e).readBuffer()}catch(e){throw new o.default.MdFatalError({mdFatalErrorCode:o.default.MD_SYNCD_FATAL_ERROR_CODE.ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED}).commit(),new i.SyncdFatalError("action data protobuf serialization failed")}};var a=n(46042),i=n(84479),o=r(n(8643)),s=n(4753),u=n(29392)},59308:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptMutation=function(){return y.apply(this,arguments)};var a=r(n(87757)),i=r(n(81109)),o=r(n(48926)),s=n(80986),u=n(53939),l=n(48353),c=n(76494),d=r(n(25285)),f=n(84479),p=r(n(8643)),h=n(4753),_=n(29392),v=n(31248),m=n(17108),g=n(4518);function y(){return(y=(0,o.default)(a.default.mark((function e(t,n){var r,o,s,u,l,p,_,v,m,y,S;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.index,o=t.operation,s=n.keyId,u=n.keyData,e.t0=o,e.next=e.t0===h.SyncdMutationSyncdOperation.SET?6:e.t0===h.SyncdMutationSyncdOperation.REMOVE?7:18;break;case 6:return e.abrupt("break",18);case 7:return e.next=9,d.default.getSyncAction(r);case 9:if(l=e.sent){e.next=12;break}throw new f.SyncdFatalError("no corresponding set mutation");case 12:return p=l.keyId,e.next=15,(0,g.getKeyData)(p);case 15:_=e.sent,s=p,u=_;case 18:return e.next=20,E(t,s,u);case 20:return v=e.sent,m=v.indexMac,y=v.indexAndValueCipherText,S=(0,c.valueMacFromIndexAndValueCipherText)(y),e.abrupt("return",(0,i.default)((0,i.default)({},t),{},{keyId:s,keyData:u,indexMac:m,indexAndValueCipherText:y,valueMac:S}));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=(0,o.default)(a.default.mark((function e(t,n,r){var i,o,s,u,d,h,_,g,y,E,S,T,w,A,C,O,M,I;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.index,o=t.binarySyncAction,s=t.operation,u=t.version,d=(0,m.stringToArrayBuffer)(i),e.next=5,(0,c.generateEncryptionKeys)(r);case 5:return h=e.sent,_=h.indexKey,g=h.valueEncryptionKey,y=h.valueMacKey,e.next=9,self.crypto.getRandomValues(new Uint8Array(l.IV_LENGTH));case 9:return E=e.sent,S=(0,c.generatePadding)(d.byteLength,o.byteLength),T=b(d,o,S,u),e.next=14,(0,c.generateCipherText)(E,g,T);case 14:return w=e.sent,A=(0,v.combine)([E.buffer,w]),C=(0,c.generateAssociatedData)(s,n),e.next=19,(0,c.generateMac)(C,A,y);case 19:return O=e.sent,M=(0,v.combine)([A,O]),e.next=23,(0,c.generateIndexMac)(_,d);case 23:return I=e.sent,e.abrupt("return",{indexMac:I,indexAndValueCipherText:M});case 27:throw e.prev=27,e.t0=e.catch(0),new p.default.MdFatalError({mdFatalErrorCode:p.default.MD_SYNCD_FATAL_ERROR_CODE.ENCRYPTION_FAILED}).commit(),new f.SyncdFatalError("encryption failure");case 31:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function b(e,t,n,r){return(0,s.encodeSyncActionData)({index:e,value:(0,u.decodeProto)(_.SyncActionValueSpec,t),padding:n,version:r})}},84330:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(31272),u=a(n(25285)),l=n(69899);function c(){return(c=(0,o.default)(i.default.mark((function e(t){var n,a,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,a=new Map,e.next=4,r.all(t.map(function(){var e=(0,o.default)(i.default.mark((function e(t){var r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.getPendingMutationsRows(["collection"],t);case 2:r=e.sent,o=r.map((function(e){return e.id})).filter(Boolean),a.set(t,o),s=(0,l.compactPatch)(r),n.set(t,s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 4:return e.next=6,(0,s.buildSyncIqNode)(n);case 6:return c=e.sent,e.abrupt("return",{syncIqNode:c.syncIqNode,collectionWithPendingMutationsIds:a,collectionWithEncryptedMutations:c.collectionWithEncryptedMutations,localCollectionVersions:c.localCollectionVersions});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},73859:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.exceedInlineMutationCount=function(e){var t=Math.min(2e3,Math.max(o.default.syncdInlineMutationsMaxCount,100));return e.length>t},t.exceedPatchProtobufSize=function(e){var t=1e3*Math.min(100,Math.max(o.default.syncdPatchProtobufMaxSize,10));return e.byteLength>t},t.uploadExternalPatch=function(e){return s.default.encryptAndUpload({blob:e,signal:(new a.default).signal,type:"md-app-state",uploadOrigin:i.default.UPLOAD_ORIGIN_TYPE.UNKNOWN,userUploadAttemptCount:0,forwardedFromWeb:!1})};var a=r(n(35340)),i=r(n(8643)),o=r(n(63056)),s=r(n(14548))},29654:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncActionsToPendingMutations=function(e,t){return e.map((function(e){return{collection:e.collection,index:e.index,binarySyncAction:e.binarySyncAction,operation:t,version:e.version,timestamp:e.timestamp}}))}},69899:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.compactPatch=function(e){return a.default.uniqBy(e.reverse(),(function(e){return e.index})).reverse()};var a=r(n(96486))},12557:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncResponseParser=void 0;var a=n(24434),i=n(27291),o=r(n(8643)),s=r(n(98112)),u=n(84479),l=new s.default("syncResponseParser",(function(e){__LOG__(2)`syncd: start parsing syncd collections`;var t=[];return e.child("sync").mapChildrenWithTag("collection",(function(e){var n={},r=i.CollectionName.cast(e.attrString("name"));if(!r)throw new u.SyncdFatalError("invalid collection name");n.name=r,n.state=function(e,t){if(!e.hasAttr("type")||"error"!==e.attrString("type"))return e.hasAttr("has_more_patches")?i.CollectionState.SuccessHasMore:i.CollectionState.Success;var n=e.child("error"),r=n.attrString("code"),a=n.attrString("text");switch(r){case"409":return i.CollectionState.Conflict;case"400":return new o.default.MdFatalError({mdFatalErrorCode:o.default.MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_REQUEST_FOR_COLLECTION}).commit(),__LOG__(4,void 0,new Error,!0)`syncd fatal error: collection ${String(t)} throws ${a}`,SEND_LOGS(`syncd fatal error: collection ${String(t)} throws ${a}`),i.CollectionState.ErrorFatal;case"404":return new o.default.MdFatalError({mdFatalErrorCode:o.default.MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_FOUND_FOR_COLLECTION}).commit(),__LOG__(4,void 0,new Error,!0)`syncd fatal error: collection ${String(t)} throws ${a}`,SEND_LOGS(`syncd fatal error: collection ${String(t)} throws ${a}`),i.CollectionState.ErrorFatal;default:return __LOG__(3)`syncd retryable error: collection ${String(t)} throws ${a}`,i.CollectionState.ErrorRetry}}(e,n.name),e.hasAttr("version")&&(n.version=parseInt(e.attrString("version"),10)),e.hasChild("patches")&&(n.patches=e.child("patches").mapChildrenWithTag("patch",(function(e){return(0,a.decodeSyncdPatch)(r,e.contentBytes())}))),e.hasChild("snapshot")&&(n.snapshot=(0,a.decodeExternalBlobReference)(r,e.child("snapshot").contentBytes())),t.push(n),__LOG__(2)`syncd: successfully parsed collection ${r}`})),t}));t.syncResponseParser=l},84:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.serverSync=function(e){return _(e,0)};var i=a(n(87757)),o=a(n(48926)),s=a(n(88524)),u=n(4746),l=n(27291),c=n(84479),d=a(n(8643)),f=a(n(84330)),p=n(12557),h=a(n(5168));function _(){return v.apply(this,arguments)}function v(){return(v=(0,o.default)(i.default.mark((function e(t,n){var a,o,u,d,f,p,v;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",r.resolve([]));case 2:if(!(n>=5)){e.next=5;break}return __LOG__(4,void 0,new Error,!0,["syncd"])`syncd: reached max recursion length for collections: ${t}`,SEND_LOGS("syncd max recursion depth"),e.abrupt("return",t.map((function(e){return{state:l.CollectionState.ErrorRetry,name:e}})));case 5:return e.prev=5,e.next=8,m(t);case 8:return a=e.sent,o=a.collectionDetails,u=a.localCollectionVersions,d=[],f=[],o.forEach((function(e){switch(e.state){case l.CollectionState.ErrorRetry:case l.CollectionState.ErrorFatal:case l.CollectionState.Blocked:return void f.push(e);default:d.push(e)}e.state===l.CollectionState.Conflict&&h.default.incConflict()})),e.next=16,r.all(d.map((function(e){return(0,s.default)(e,u.get(e.name))})));case 16:return p=e.sent,v=[],p.forEach((function(e){switch(e.state){case l.CollectionState.SuccessHasMore:case l.CollectionState.Conflict:return void v.push(e.name);default:f.push(e)}})),e.t0=f,e.next=22,_(v,n+1);case 22:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 26:if(e.prev=26,e.t2=e.catch(5),!(e.t2 instanceof c.SyncdFatalError)){e.next=31;break}return __LOG__(4,void 0,new Error,!0)`syncd fatal error: syncd global throws ${e.t2.message}`,SEND_LOGS(`syncd fatal error: syncd global throws ${e.t2.message}`),e.abrupt("return",t.map((function(e){return{state:l.CollectionState.ErrorFatal,name:e}})));case 31:return __LOG__(3,void 0,void 0,!0)`syncd retryable error: syncd global throws ${e.t2.message}`,SEND_LOGS(`syncd retryable error: syncd global throws ${e.t2.message}`),e.abrupt("return",t.map((function(t){return{state:l.CollectionState.ErrorRetry,name:t,serverBackoff:e.t2.errorBackoff}})));case 33:case"end":return e.stop()}}),e,null,[[5,26]])})))).apply(this,arguments)}function m(){return g.apply(this,arguments)}function g(){return(g=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s,l,c,d,h,_;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.default)(t);case 2:return n=e.sent,r=n.syncIqNode,a=n.collectionWithPendingMutationsIds,o=n.collectionWithEncryptedMutations,s=n.localCollectionVersions,e.next=9,(0,u.sendIq)(r,p.syncResponseParser);case 9:if(!(l=e.sent).success){e.next=14;break}return(c=l.result).forEach((function(e){var t=a.get(e.name);t&&(e.syncedPendingMutationsId=t);var n=o.get(e.name);n&&(e.syncedEncryptedMutations=n)})),e.abrupt("return",{collectionDetails:c,localCollectionVersions:s});case 14:throw d=l.errorCode,h=l.errorText,_=l.errorBackoff,y(d,h,_);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){switch(e){case 400:return new d.default.MdFatalError({mdFatalErrorCode:d.default.MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_REQUEST_GLOBAL_ERROR}).commit(),new c.SyncdFatalError(t);case 404:return new d.default.MdFatalError({mdFatalErrorCode:d.default.MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_FOUND_GLOBAL_ERROR}).commit(),new c.SyncdFatalError(t);case 405:return new d.default.MdFatalError({mdFatalErrorCode:d.default.MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_METHOD_GLOBAL_ERROR}).commit(),new c.SyncdFatalError(t);case 406:return new d.default.MdFatalError({mdFatalErrorCode:d.default.MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR}).commit(),new c.SyncdFatalError(t);default:return new c.SyncdRetryableError(t,n)}}},84479:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdFatalError=t.SyncdRetryableError=t.SyncdMissingKeyError=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(65957)),u=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){var e;(0,a.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).name="SyncdMissingKeyError",e}return n}((0,s.default)(Error));t.SyncdMissingKeyError=u;var l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,e)).name="SyncdRetryableError",i.backoff=r,i.message=e,i}return n}((0,s.default)(Error));t.SyncdRetryableError=l;var c=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,e)).name="SyncdFatalError",r.message=e,r}return n}((0,s.default)(Error));t.SyncdFatalError=c},60956:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateSyncdDisabledDueToFatalFlag=b,t.isSyncdDisabled=function(){return"true"===(0,m.default)(p.default,"localStorage").getItem(l.default.KEY_SYNCD_DISABLED_DUE_TO_FATAL)},t.handleFatalError=function(e){var t=(0,d.getABPropConfigValue)("should_deregister_on_syncd_fatal"),r=n(83219).default,a=[];null!=e&&(a=e.map((function(e){return String(e)})));(function(){T.apply(this,arguments)})(a),!1!==t?(__LOG__(4,!0,new Error)`[syncd] Received fatal error and logged out`,g.default.logout()):r.isSyncDCriticalDataSyncInProcess()?(__LOG__(4,!0,new Error,!0)`critical sync failed during bootstrap`,SEND_LOGS("critical sync failed during bootstrap"),g.default.logout()):(__LOG__(4,!0,new Error)`[syncd] Received fatal error and showed fatal flag`,b(!0),u.default.handleFatalError())},t.uploadFatalErrorMetric=function(e,t){new E.default.MdFatalError({mdFatalErrorCode:e,collection:t?w(t):void 0}).commit()};var a=r(n(87757)),i=r(n(48926)),o=n(75793),s=n(27291),u=r(n(34541)),l=r(n(34263)),c=n(29671),d=n(4976),f=n(71701),p=r(n(2977)),h=r(n(16551)),_=r(n(5315)),v=r(n(75554)),m=r(n(91080)),g=r(n(7860)),y=n(90066),E=r(n(8643)),S=n(39179);function b(e){(0,m.default)(p.default,"localStorage").setItem(l.default.KEY_SYNCD_DISABLED_DUE_TO_FATAL,e.toString())}function T(){return(T=(0,i.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={collectionNames:t,timestamp:(0,y.unixTimeMs)()},r=new _.default({fromMe:!0,remote:(0,f.getMeUser)(),id:(0,v.default)()}),i=new h.default({id:r,to:(0,o.createDeviceWidFromUserAndDevice)((0,f.assertGetMe)().user,0),type:"protocol",subtype:"app_state_fatal_exception_notification",appStateFatalExceptionNotification:n}),e.next=5,(0,S.storePeerMessages)([i]);case 5:return e.abrupt("return",(0,c.encryptAndSendKeyMsg)(i));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){switch(e){case s.CollectionName.CriticalBlock:return E.default.COLLECTION.CRITICAL_BLOCK;case s.CollectionName.CriticalUnblockLow:return E.default.COLLECTION.CRITICAL_UNBLOCK_LOW;case s.CollectionName.Regular:return E.default.COLLECTION.REGULAR;case s.CollectionName.RegularHigh:return E.default.COLLECTION.REGULAR_HIGH;case s.CollectionName.RegularLow:return E.default.COLLECTION.REGULAR_LOW}}},67669:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.checkOrphanMutations=function(){return d.apply(this,arguments)},t.checkOrphanMessages=f,t.checkOrphanChats=h,t.applyAllOrphansAndUnsupported=function(){return g.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(88524),u=n(60956),l=n(27291),c=a(n(25285));function d(){return(d=(0,o.default)(i.default.mark((function e(t,n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,u.isSyncdDisabled)()){e.next=2;break}return e.abrupt("return",r.resolve());case 2:return e.next=4,r.all([f(t),h(n)]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,l.SyncModelType.Msg);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return _.apply(this,arguments)}function _(){return(_=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,l.SyncModelType.Chat);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,o.default)(i.default.mark((function e(t,n){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,u.isSyncdDisabled)()){e.next=3;break}return e.abrupt("return",r.resolve());case 3:return e.next=5,c.default.getSyncActionsRows(["modelId","modelType","actionState"],t.map((function(e){return[e,n,l.SyncActionState.Orphan]})));case 5:return a=e.sent,e.next=8,(0,s.applyIndividualMutations)(a);case 8:case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,u.isSyncdDisabled)()){e.next=2;break}return e.abrupt("return",r.resolve());case 2:return e.next=4,c.default.getSyncActionsRows(["actionState"],[l.SyncActionState.Orphan,l.SyncActionState.Unsupported]);case 4:return t=e.sent,e.next=7,(0,s.applyIndividualMutations)(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},34720:(e,t,n)=>{"use strict";var r=n(95318);t.Z=function(){return d.apply(this,arguments)};var a=r(n(87757)),i=r(n(319)),o=r(n(48926)),s=r(n(21049)),u=n(50773),l=n(27291),c=r(n(25285));function d(){return(d=(0,o.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getSentinelMutations();case 2:return t=e.sent,e.next=5,c.default.appendPendingMutationsRows(t);case 5:return e.abrupt("return",(0,u.markCollectionsForSync)((0,i.default)(l.CollectionName.members())));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},50773:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return(0,y.isSyncdDisabled)()?r.resolve():(e=6e4,t=T.default.debounce((0,u.default)(s.default.mark((function e(){var t,n,r,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.getSyncActionsTable)().count();case 2:return t=e.sent,b.default.setStoredMutationCount(t),e.next=6,(0,S.getSyncActionsTable)().equals(["actionState"],d.SyncActionState.Malformed);case 6:return n=e.sent,b.default.setInvalidActionCount(n.length),e.next=10,(0,S.getSyncActionsTable)().equals(["actionState"],d.SyncActionState.Unsupported);case 10:return r=e.sent,b.default.setUnsupportedActionCount(r.length),e.next=14,f.default.getMissingKeyCount();case 14:a=e.sent,b.default.setMissingKeyCount(a);case 16:case"end":return e.stop()}}),e)}))),e,{maxWait:3*e}),E.default.on(E.APP_STATE_SYNC_COMPLETED,t),c.default.loadStatesFromDb().then((function(){return Y()})));var e,t;return r.reject(new Error("This call is only supported in MD mode"))},t.markCollectionsForSync=N,t.syncBlockedCollections=function(){var e=c.default.getCollectionsInStateBlocked();return c.default.moveCollectionsToDirty(e),M=new Set([].concat((0,o.default)(M),(0,o.default)(O))),F()},t.lockForSync=function(e,t,n){var a=(0,_.getStorage)().lock([].concat((0,o.default)(e),w),(function(e){return r.all([f.default.appendPendingMutationsRows(t),n(e)])})).then((function(){N(t.map((function(e){return e.collection})))}));return r.resolve(a)},t.SYNCD_INTERNAL_TABLES_TO_LOCK=void 0;var o=i(n(319)),s=i(n(87757)),u=i(n(48926)),l=i(n(22021)),c=i(n(13971)),d=n(27291),f=i(n(25285)),p=i(n(8643)),h=n(84),_=n(28367),v=i(n(61110)),m=n(97223),g=n(67669),y=n(60956),E=a(n(34541)),S=n(43883),b=i(n(5168)),T=i(n(96486)),w=["pending-mutations"];t.SYNCD_INTERNAL_TABLES_TO_LOCK=w;var A,C=36e5,O=new Set,M=new Set,I=!1,k=0,P=0;if((0,m.isConnectedToPage)()){var R=n(14094).default,D=n(14094).StreamMode;(0,v.default)(R,"change:mode",(function(){return R.mode===D.MAIN})).then((function(){l.default.supportsFeature(l.default.F.MD_BACKEND)&&!(0,y.isSyncdDisabled)()&&((0,g.applyAllOrphansAndUnsupported)(),function(){W.apply(this,arguments)}())}))}function N(){return L.apply(this,arguments)}function L(){return(L=(0,u.default)(s.default.mark((function e(t,n){var a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=12;break}if(null==n){e.next=7;break}return e.next=4,x(t,n);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=t;case 8:return a=e.t0,__LOG__(2)`syncd: marking for sync: ${a}`,a.forEach((function(e){var t=c.default.getCollectionState(e);t===d.CollectionSyncState.UpToDate?c.default.moveCollectionsToDirty([e]):t===d.CollectionSyncState.Dirty&&(M=new Set([].concat((0,o.default)(M),[e])))})),e.abrupt("return",F());case 12:return e.abrupt("return",r.reject(new Error("This call is only supported in MD mode")));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return U.apply(this,arguments)}function U(){return(U=(0,u.default)(s.default.mark((function e(t,n){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getCollectionVersions(t);case 2:return r=e.sent,e.abrupt("return",t.filter((function(e){var t=r.get(e);if(null==t)return __LOG__(2)`syncd: local version for ${e} missing; will mark for sync.`,!0;var a=n.get(e);return null==a?(__LOG__(2)`syncd: server version for ${e} missing; will mark for sync.`,!0):t<a?(__LOG__(2)`syncd: local version for ${e} less than server version; will mark for sync.`,!0):(__LOG__(2)`syncd: local version for ${e} >= server version; will not mark for sync.`,!1)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return G.apply(this,arguments)}function G(){return(G=(0,u.default)(s.default.mark((function e(){var t,n,a,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,y.isSyncdDisabled)()){e.next=2;break}return e.abrupt("return",r.resolve());case 2:if(t=c.default.getCollectionsInStateDirty(),0!==(n=new Set(t.filter((function(e){return!O.has(e)})))).size){e.next=6;break}return e.abrupt("return",r.resolve());case 6:return a=[],e.prev=7,O=new Set([].concat((0,o.default)(O),(0,o.default)(n))),__LOG__(2)`syncd: initiate server sync`,e.next=12,(0,h.serverSync)((0,o.default)(n));case 12:a=e.sent,__LOG__(2)`syncd: server sync successful`,(i=a.filter((function(e){return e.state===d.CollectionState.ErrorRetry}))).length>0&&(P=i[0].serverBackoff||0,k=0),K(a),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),c.default.moveCollectionsToFiniteRetry((0,o.default)(n));case 22:return e.prev=22,c.default.persistToDb(),O=new Set((0,o.default)(O).filter((function(e){return!n.has(e)}))),Y(),E.default.trigger(E.APP_STATE_SYNC_COMPLETED,a),e.finish(22);case 28:case"end":return e.stop()}}),e,null,[[7,19,22,28]])})))).apply(this,arguments)}function B(){if(!(0,y.isSyncdDisabled)()){var e,t,n,r=new Set(c.default.getCollectionsInStateRetry());if(0!==r.size)A=setTimeout((0,u.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I=!0,k+=1,__LOG__(2)`syncd: initiate server sync retry`,e.next=6,(0,h.serverSync)((0,o.default)(r));case 6:t=e.sent,__LOG__(2)`syncd: server sync retry successful`,K(t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c.default.moveCollectionsToFiniteRetry((0,o.default)(r));case 14:return e.prev=14,j(),c.default.persistToDb(),I=!1,Y(),e.finish(14);case 20:case"end":return e.stop()}}),e,null,[[0,11,14,20]])}))),(e=k,t=P,n=1e3*Math.pow(2,e),Math.min(Math.max(n,t),C)))}}function j(){var e=c.default.getExpiredCollections();e.length>0&&(c.default.moveCollectionsToFatal(e),__LOG__(4,void 0,new Error,!0)`syncd fatal error: expired collections`,SEND_LOGS("syncd fatal error: expired collections"),new p.default.MdFatalError({mdFatalErrorCode:p.default.MD_SYNCD_FATAL_ERROR_CODE.TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D}).commit())}function Y(){if(c.default.getCollectionsInStateDirty().length>0&&(M=new Set((0,o.default)(M).filter((function(e){return O.has(e)}))),F()),c.default.getCollectionsInStateRetry().length>0){if(I)return;null!=A&&clearTimeout(A),B()}c.default.getCollectionsInStateFatal().length>0&&(0,y.handleFatalError)(c.default.getCollectionsInStateFatal())}function K(e){return e.forEach((function(e){return e.state!==d.CollectionState.Success||M.has(e.name)?e.state===d.CollectionState.ErrorRetry?c.default.moveCollectionsToFiniteRetry([e.name]):e.state===d.CollectionState.ErrorFatal?c.default.moveCollectionsToFatal([e.name]):e.state!==d.CollectionState.Blocked||M.has(e.name)?void 0:c.default.moveCollectionsToBlocked([e.name]):c.default.moveCollectionsToUpToDate([e.name])}))}function W(){return(W=(0,u.default)(s.default.mark((function e(){var t,n,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getAllPendingMutationsRows();case 2:t=e.sent,n=c.default.getCollectionsInStateBlocked(),c.default.moveCollectionsToDirty(n),(r=t.map((function(e){return e.collection})).concat(n)).length>0&&N(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},90950:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.constructStarMsgKey=function(e){return JSON.stringify([i.Actions.Star].concat((0,a.default)(o(e))))},t.constructMsgKeySegments=o,t.extractParticipantForSync=s,t.constructPinChatKey=function(e){return JSON.stringify([i.Actions.Pin,e.id.remote.toString({legacy:!0})])},t.constructMuteChatKey=function(e){return JSON.stringify([i.Actions.Mute,e.id.remote.toString({legacy:!0})])},t.isBootstrap=function(e){return null==e};var a=r(n(319)),i=n(27291);function o(e){var t=s(e);return[e.id.remote.toString({legacy:!0}),e.id.id,e.id.fromMe?"1":"0",t]}function s(e){var t="0";return!e.id.participant||e.id.remote.isUser()||e.id.fromMe||(t=e.id.participant.toString({legacy:!0})),t}},5168:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(12035),i=r(n(34541)),o=r(n(8643)),s=new o.default.MdAppStateSyncDaily,u=new a.ShiftTimer((function(){var e=function(e){var t=new o.default.MdAppStateSyncDaily;e.mutationCount>0&&(t.mutationCount=e.mutationCount);e.invalidActionCount>0&&(t.invalidActionCount=e.invalidActionCount);e.unsupportedActionCount>0&&(t.unsupportedActionCount=e.unsupportedActionCount);e.keyRotationRemoveCount>0&&(t.keyRotationRemoveCount=e.keyRotationRemoveCount);e.storedMutationCount>0&&(t.storedMutationCount=e.storedMutationCount);e.uploadConflictCount>0&&(t.uploadConflictCount=e.uploadConflictCount);e.unsetActionCount>0&&(t.unsetActionCount=e.unsetActionCount);e.missingKeyCount>0&&(t.missingKeyCount=e.missingKeyCount);return t}(s);l(),e.commit()}));function l(){s=new o.default.MdAppStateSyncDaily}function c(){u.onOrBefore(3e5)}i.default.on("logout",(function(){u.isScheduled()&&u.forceRunNow()}));var d={clear:l,addMutationCount:function(e){0!==e&&(void 0===s.mutationCount&&(s.mutationCount=0),s.mutationCount+=e,c())},setInvalidActionCount:function(e){s.invalidActionCount=e,c()},setUnsupportedActionCount:function(e){s.unsupportedActionCount=e,c()},incConflict:function(){void 0===s.uploadConflictCount&&(s.uploadConflictCount=0),s.uploadConflictCount++,c()},addKeyRotationRemoveCount:function(e){0!==e&&(void 0===s.keyRotationRemoveCount&&(s.keyRotationRemoveCount=0),s.keyRotationRemoveCount+=e,c())},setStoredMutationCount:function(e){s.storedMutationCount=e,c()},addUnsetActionCount:function(e){0!==e&&(void 0===s.unsetActionCount&&(s.unsetActionCount=0),s.unsetActionCount+=e,c())},setMissingKeyCount:function(e){s.missingKeyCount=e,c()}};t.default=d},50600:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.registerTasks=function(){i.default.supportsFeature(i.default.F.MD_BACKEND)&&((0,f.startScheduler)({scheduledTimeResolver:{get:function(e){return(0,d.getTaskScheduledTime)(String(e))},set:function(e,t){return(0,d.updateTaskScheduledTime)(String(e),t)}}}),v.forEach((function(e){var t=function(e){switch(e){case _.SYNC_AB_PROPS:return function(e){return(e?r.resolve():(0,s.syncABPropsTask)()).then((function(){return(0,c.getRefresh)()}))};case _.SYNC_CONTACTS:return function(e){return(e?r.resolve():(0,u.getNonAddressBookContactsAndMarkAllContactsDirty)().catch((function(e){__LOG__(4,!0,new Error)`Failed to sync non-address book contacts with error: ${e}`})).then((function(){return(0,o.contactSync)()})).catch((function(e){__LOG__(4,!0,new Error,!0)`contact sync failed`,SEND_LOGS("contact sync failed: "+e)}))).then((function(){return(0,l.getContactSyncRefreshSeconds)()}))};case _.ROTATE_KEY:return function(e){var t;return e?(__LOG__(2)`RotateKeyTask skip first run`,t=r.resolve()):t=(0,h.newJob)("rotateKey").waitUntilCompleted(),t.then((function(){return 27*p.DAY_SECONDS}))}}}(e);(0,f.registerTask)(e,t)})))};var i=a(n(22021)),o=n(94909),s=n(68065),u=n(62546),l=n(98093),c=n(34670),d=n(4601),f=n(52828),p=n(90066),h=n(92308),_=n(54302)({SYNC_AB_PROPS:"syncAbProps",SYNC_CONTACTS:"syncContacts",ROTATE_KEY:"rotateKey"}),v=[_.SYNC_AB_PROPS,_.SYNC_CONTACTS,_.ROTATE_KEY]},74327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugMessage=void 0;var r=n(54302).Mirrored([]);t.DebugMessage=r},90602:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.businessParser=function(e){e.assertTag("business");var t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};var n=e.maybeChild("verified_name");return{verifiedName:n?(0,s.default)(n):null}},t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(18712),s=r(n(18771));var u=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"getQueryElement",value:function(){return(0,o.wap)("business",null,(0,o.wap)("verified_name",null))}},{key:"getUserElement",value:function(){return null}}]),e}();t.default=u},88720:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.contactParser=function(e){e.assertTag("contact");var t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};return{type:e.attrString("type")}},t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(18712);var s=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"getQueryElement",value:function(){return(0,o.wap)("contact",null)}},{key:"getUserElement",value:function(e){var t=e.getPhone();return t?(0,o.wap)("contact",null,t):null}}]),e}();t.default=s},46946:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deviceParser=function(e){e.assertTag("devices");var t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};var n=e.maybeChild("key-index-list"),r=e.maybeChild("device-list"),a=null==n?null:{ts:n.attrTime("ts"),signedKeyIndexBytes:n.contentBytes()};return{deviceList:null==r?void 0:r.mapChildrenWithTag("device",(function(e){return{id:e.attrInt("id"),keyIndex:e.hasAttr("key-index")?e.attrInt("key-index"):null}})),keyIndex:a}},t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(18712);var s=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"getQueryElement",value:function(){return(0,o.wap)("devices",{version:(0,o.CUSTOM_STRING)(String(2))})}},{key:"getUserElement",value:function(e){var t=e.getDeviceHash();return t?(0,o.wap)("devices",{device_hash:(0,o.CUSTOM_STRING)(t)}):null}}]),e}();t.default=s},2003:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.featureParser=function(e){e.assertTag("feature");var t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};var n={};return Object.keys(s).forEach((function(t){var r=e.maybeChild(t);r&&(n[t]=r.attrString("value"))})),n},t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(18712),s={document:(0,o.wap)("document",null),encrypt:(0,o.wap)("encrypt",null),encrypt_blist:(0,o.wap)("encrypt_blist",null),encrypt_contact:(0,o.wap)("encrypt_contact",null),encrypt_group_gen2:(0,o.wap)("encrypt_group_gen2",null),encrypt_image:(0,o.wap)("encrypt_image",null),encrypt_location:(0,o.wap)("encrypt_location",null),encrypt_url:(0,o.wap)("encrypt_url",null),encrypt_v2:(0,o.wap)("encrypt_v2",null),voip:(0,o.wap)("voip",null),multi_agent:(0,o.wap)("multi_agent",null)};var u=function(){function e(t){if((0,a.default)(this,e),this.queries=t,0===t.length)throw new Error("must specify at least one query")}return(0,i.default)(e,[{key:"getQueryElement",value:function(){return(0,o.wap)("feature",null,this.queries&&this.queries.map((function(e){return s[e]})))}},{key:"getUserElement",value:function(){return null}}]),e}();t.default=u},31435:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.USyncQuery=t.USYNC_SUPPORT_TYPE=void 0;var i=a(n(34575)),o=a(n(93913)),s=n(18712),u=r(n(90602)),l=n(4746),c=r(n(88720)),d=r(n(46946)),f=r(n(2003)),p=a(n(98112)),h=r(n(53512)),_=r(n(66997)),v=n(19325),m={FEATURE:"feature",DEVICE:"devices",CONTACT:"contact",PICTURE:"picture",STATUS:"status",BUSINESS:"business"};t.USYNC_SUPPORT_TYPE=m;var g={feature:f.featureParser,devices:d.deviceParser,contact:c.contactParser,picture:h.pictureParser,status:_.statusParser,business:u.businessParser};function y(e){var t=[];return e.forEachChildWithTag("user",(function(e){var n={};e.hasAttr("jid")&&(Object.keys(m).forEach((function(t){var r=m[t],a=e.maybeChild(r);a&&g[r]&&(n[r]=g[r](a))})),n.id=e.attrUserWid("jid"),t.push(n))})),t}var E=new p.default("usyncParser",(function(e){e.assertAttr("type","result");var t={error:{},refresh:{},list:[],sideList:[]},n=e.child("usync"),r=n.child("result"),a=n.child("list"),i=n.maybeChild("side_list");return Object.keys(m).forEach((function(e){var n=m[e],a=r.maybeChild(n);if(a){var i=a.maybeChild("error");i?t.error[n]={errorCode:i.attrInt("code"),errorText:i.attrString("text"),errorBackoff:i.attrInt("backoff")}:a.hasAttr("refresh")&&(t.refresh[n]=a.attrInt("refresh",0))}})),t.list=y(a),i&&(t.sideList=y(i)),__LOG__(2)`usync query success!`,t})),S=function(){function e(){(0,i.default)(this,e),this.context="interactive",this.mode="query",this.protocols=[],this.users=[]}return(0,o.default)(e,[{key:"withMode",value:function(e){return this.mode=e,this}},{key:"withContext",value:function(e){return this.context=e,this}},{key:"withContactProtocol",value:function(){return this.protocols.push(new c.default),this}},{key:"withBusinessProtocol",value:function(){return this.protocols.push(new u.default),this}},{key:"withDeviceProtocol",value:function(){return this.protocols.push(new d.default),this}},{key:"withPictureProtocol",value:function(){return this.protocols.push(new h.default),this}},{key:"withStatusProtocol",value:function(){return this.protocols.push(new _.default),this}},{key:"withFeaturesProtocol",value:function(e){return this.protocols.push(new f.default(e)),this}},{key:"withUser",value:function(e){return this.users.push(e),this}},{key:"_buildStanza",value:function(){var e=this;if(0===this.protocols.length)throw new Error("a usync query must have at least one protocol");0===this.users.length&&__LOG__(3)`Usync warning: a usync query must have at least one user`,this.users.map((function(e){return e.validate()}));var t=(0,s.wap)("query",null,this.protocols.map((function(e){return e.getQueryElement()}))),n=this.users.map((function(t){var n=t.getId();return(0,s.wap)("user",{jid:n?(0,v.USER_JID)(n):s.DROP_ATTR},e.protocols.map((function(e){return e.getUserElement(t)})))})),r=(0,s.wap)("list",null,n);return(0,s.wap)("iq",{to:s.S_WHATSAPP_NET,xmlns:"usync",type:"get",id:(0,s.generateId)()},(0,s.wap)("usync",{sid:(0,s.generateId)(),index:"0",last:"true",mode:(0,s.CUSTOM_STRING)(this.mode),context:(0,s.CUSTOM_STRING)(this.context)},t,r))}},{key:"execute",value:function(){var e=this._buildStanza();return(0,l.sendIq)(e,E).then((function(e){return e.success?(__LOG__(2)`Usync success: ${JSON.stringify(e.result)}`,e.result):{error:{all:{errorCode:e.errorCode,errorText:e.errorText,errorType:e.errorType}},refresh:{},list:[]}}))}}]),e}();t.USyncQuery=S},53512:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pictureParser=function(e){e.assertTag("picture");var t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};return{id:e.attrInt("id")}},t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(18712);var s=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"getQueryElement",value:function(){return(0,o.wap)("picture",null)}},{key:"getUserElement",value:function(){return null}}]),e}();t.default=s},66997:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.statusParser=function(e){e.assertTag("status");var t=e.maybeChild("error");if(t)return{errorCode:t.attrInt("code"),errorText:t.attrString("text")};if(!e.hasContent())return e.hasAttr("code")&&401===e.attrInt("code")?null:s.default.t(576);return 0!==e.contentString().length?e.contentString():s.default.t(576)},t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(18712),s=r(n(89115));var u=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"getQueryElement",value:function(){return(0,o.wap)("status",null)}},{key:"getUserElement",value:function(){return null}}]),e}();t.default=u},36545:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.USyncUser=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"withId",value:function(e){return this._id=e,this}},{key:"withDeviceHash",value:function(e){return this._deviceHash=e,this}},{key:"withPhone",value:function(e){return this._phone=e,this}},{key:"getDeviceHash",value:function(){return this._deviceHash}},{key:"getPhone",value:function(){return this._phone}},{key:"getId",value:function(){return this._id}},{key:"validate",value:function(){if(null==this._id&&null==this._phone)throw new Error("user must have an id or a phone")}}]),e}();t.USyncUser=o},3122:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(17643),s=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,null,[{key:"tag",value:function(e){return e&&e[0]}},{key:"attr",value:function(e,t){return t&&t[1]?t[1][e]:void 0}},{key:"attrs",value:function(e){return e[1]}},{key:"child",value:function(e,t){var n=t[2];if(Array.isArray(n))for(var r=n.length,a=0;a<r;a++){var i=n[a];if(Array.isArray(i)&&i[0]===e)return i}}},{key:"firstChild",value:function(e){var t=e[2];if(Array.isArray(t))return t[0]}},{key:"children",value:function(e,t){if(!t)return e&&e[2];var n=e[2];return Array.isArray(n)?n.filter((function(e){return e[0]===t})):void 0}},{key:"dataStr",value:function(e){if(!e)return"";var t=e[2];return"string"==typeof t?t:t instanceof ArrayBuffer?new o.Binary(t).readString(t.byteLength):""}},{key:"toString",value:function(e,t){if(!e)return"undefined";var n=function(e,t){if(e){var n="";for(var r in e){n+=" "+r+"="+("string"==typeof e[r]?t?"...":'"'+e[r]+'"':e[r])}return n}return""}(e[1],t),r=u(e[2],t);return"<"+e[0]+n+(r?">\n"+r+"\n</"+e[0]+">":"/>")}}]),e}();function u(e,t){return e instanceof ArrayBuffer?"<<bin:"+e.byteLength+">>":"string"==typeof e?t?"<<string:"+e.length+">>":e:Array.isArray(e)?e.map((function(e){return s.toString(e,t)})).join("\n"):""}t.default=s},14650:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EphemeralDrop=t.LogoutDrop=t.Server5xxDrop=t.ConventionViolationDrop=t.BrowserReplacedDrop=t.WebdDrop=t.E499=t.E404=t.E401=t.CatalogEditServerError=t.ServerStatusCodeError=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(1838),u=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,r)).status=e,i.statusCode=e,i}return n}((0,s.customError)("ServerStatusCodeError"));t.ServerStatusCodeError=u;var l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r,i){var o;return(0,a.default)(this,n),(o=t.call(this,i)).errors=r,o.status=e,o.statusCode=e,o}return n}((0,s.customError)("ServerStatusCodeError"));t.CatalogEditServerError=l;var c=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,401,e)}return n}((0,s.customError)("E401",!0,u));t.E401=c;var d=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,404,e)}return n}((0,s.customError)("E404",!0,u));t.E404=d;var f=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,499,e)}return n}((0,s.customError)("E499",!0,u));t.E499=f;var p=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("WebdDrop"));t.WebdDrop=p;var h=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("BrowserReplacedDrop",!0,p));t.BrowserReplacedDrop=h;var _=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("ConventionViolationDrop",!0,p));t.ConventionViolationDrop=_;var v=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("Server5xxDrop",!0,p));t.Server5xxDrop=v;var m=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("LogoutDrop",!0,p));t.LogoutDrop=m;var g=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("EphemeralDrop",!0,p));t.EphemeralDrop=g},89938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(76007),a={voipIndividualOutgoing:r.WebFeaturesFlag.FORCE_UPGRADE,groupsV3:r.WebFeaturesFlag.FORCE_UPGRADE,groupsV3Create:r.WebFeaturesFlag.DEVELOPMENT,changeNumberV2:r.WebFeaturesFlag.FORCE_UPGRADE,queryStatusV3Thumbnail:r.WebFeaturesFlag.DEVELOPMENT,liveLocations:r.WebFeaturesFlag.FORCE_UPGRADE,queryVname:r.WebFeaturesFlag.FORCE_UPGRADE,voipIndividualIncoming:r.WebFeaturesFlag.FORCE_UPGRADE,quickRepliesQuery:r.WebFeaturesFlag.FORCE_UPGRADE,payments:r.WebFeaturesFlag.FORCE_UPGRADE,labelsDisplay:r.WebFeaturesFlag.FORCE_UPGRADE,labelsEdit:r.WebFeaturesFlag.FORCE_UPGRADE,stickerPackQuery:r.WebFeaturesFlag.FORCE_UPGRADE,liveLocationsFinal:r.WebFeaturesFlag.FORCE_UPGRADE,mediaUpload:r.WebFeaturesFlag.FORCE_UPGRADE,vnameV2:r.WebFeaturesFlag.FORCE_UPGRADE,videoPlaybackUrl:r.WebFeaturesFlag.FORCE_UPGRADE,statusRanking:r.WebFeaturesFlag.FORCE_UPGRADE,voipIndividualVideo:r.WebFeaturesFlag.DEVELOPMENT,thirdPartyStickers:r.WebFeaturesFlag.FORCE_UPGRADE,frequentlyForwardedSetting:r.WebFeaturesFlag.FORCE_UPGRADE,recentStickers:r.WebFeaturesFlag.FORCE_UPGRADE,recentStickersV2:r.WebFeaturesFlag.PRODUCTION,recentStickersV3:r.WebFeaturesFlag.PRODUCTION,groupsV4JoinPermission:r.WebFeaturesFlag.FORCE_UPGRADE,catalog:r.WebFeaturesFlag.FORCE_UPGRADE,starredStickers:r.WebFeaturesFlag.PRODUCTION,templateMessage:r.WebFeaturesFlag.PRODUCTION,templateMessageInteractivity:r.WebFeaturesFlag.DEVELOPMENT,ephemeralMessages:r.WebFeaturesFlag.PRODUCTION,e2ENotificationSync:r.WebFeaturesFlag.FORCE_UPGRADE,syncdRelease1:r.WebFeaturesFlag.PRODUCTION,userNotice:r.WebFeaturesFlag.PRODUCTION,syncdRelease11:r.WebFeaturesFlag.PRODUCTION,support:r.WebFeaturesFlag.PRODUCTION,groupUiiCleanup:r.WebFeaturesFlag.FORCE_UPGRADE,groupDogfoodingInternalOnly:r.WebFeaturesFlag.DEVELOPMENT,settingsSync:r.WebFeaturesFlag.PRODUCTION,ephemeralAllowGroupMembers:r.WebFeaturesFlag.PRODUCTION,ephemeral24HDuration:r.WebFeaturesFlag.DEVELOPMENT,archiveV2:r.WebFeaturesFlag.PRODUCTION,mdForceUpgrade:r.WebFeaturesFlag.FORCE_UPGRADE,disappearingMode:r.WebFeaturesFlag.DEVELOPMENT};t.default=a},89116:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISAPPEARING_MODE_SETTINGS_KEY=t.ARCHIVE_SETTINGS_KEY=void 0;var i=a(n(96486)),o="archive";t.ARCHIVE_SETTINGS_KEY=o;var s="disappearing_mode";t.DISAPPEARING_MODE_SETTINGS_KEY=s;var u={querySettings:function(e){var t=this;return new r((function(n,r){var a=t.queryNode({type:"settings"},void 0),o=e?"query,settings,resume":"query,settings";t.binSend("sendEphemeral",a,r,{onSend:t.binWrap((function(e){t.BinaryProtocol.read(e).then((function(e){var r={settings:[],status:parseInt(t.N.attr("code",e),10)||200};if(__LOG__(2)`bin-recv: response,settings`,"response"===t.N.tag(e)&&"settings"===t.N.attr("type",e)){var a=t.N.children(e);if(Array.isArray(a))for(var o=0;o<a.length;o++){var s=t.parseSetting(a[o]);i.default.isEmpty(s)||r.settings.push(s)}}n(r)})).catch(r)}),n),onDrop:t.wrap(r),serverCacheable:Boolean(e)},{debugString:o,metricName:"QUERY_SETTINGS"})}))},setArchiveSetting:function(e){var t=this;return new r((function(n,r){var a=t.actionNode("set",[["archive_v2",{classic:e.toString()},void 0]]);t.binSend("send",a,r,{clientCacheable:!0,onSend:t.wrap(n),onDrop:t.wrap(r)},{debugString:"action,settings,archive",metrics:"SET_ARCHIVE_SETTING",ackRequest:!0})}))},parseSetting:function(e){switch(this.N.tag(e)){case"archive_v2":return{type:o,value:{classic:"true"===this.N.attr("classic",e),enabled:this.N.attr("enabled",e)&&"true"===this.N.attr("enabled",e)}};case"disappearing_mode":return{type:s,value:{duration:parseInt(this.N.attr("duration",e),10),settingTimestamp:parseInt(this.N.attr("t",e),10)}};default:return}}};t.default=u},23306:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0});var a={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(13501));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},37417:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.isWid,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.createWid,o=t;switch(e){case"author":case"broadcast":case"chat":case"descOwner":case"from":case"gid":case"id":case"jid":case"owner":case"participant":case"quotedRemoteJid":case"quotedParticipant":case"remote":case"subjectOwner":case"s_o":case"to":case"wid":case"changeNumberNewJid":case"changeNumberOldJid":case"recipient":case"paymentMessageReceiverJid":n(t)&&(o=r(t));break;default:var s=parseInt(e,10);!isNaN(s)&&n(t)&&(o=r(t))}return o};var a=r(n(12717)),i=n(75793)},28115:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadProtoVersions=function(){return(0,r.requireLoadProtoVersions)().then((function(e){Object.assign(a,e)}))},t.default=void 0;var r=n(3646),a={};var i=a;t.default=i},66761:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(17643),s=r(n(96486)),u={NEW:"REQUEST_STATE_NEW",SENT:"REQUEST_STATE_SENT",WEBDACKED:"REQUEST_STATE_WEBDACKED",WILL_RETRY:"REQUEST_STATE_WILL_RETRY"},l=function(){function e(t){(0,a.default)(this,e),this.state=u.NEW,this.age=0,this.resends=0;var n=t.data;this.data=n,this.isToPhone=n instanceof ArrayBuffer,this.tag=t.tag,this.clientCacheable=!!t.clientCacheable,this.serverCacheable=!!t.serverCacheable,this.retryOn5xx=!!t.retryOn5xx,this.onSend=t.onSend,this.logOnSend=t.logOnSend,this.onDrop=t.onDrop,this.binaryOpts=t.binaryOpts,this.on5xx=t.on5xx,this.resendGuard=t.resendGuard,this.onTag=t.onTag,this.tagToCancel=t.tagToCancel,this.ephemeral=!!t.ephemeral,this.ignore=!!t.ignore,this.isCallOffer=!!t.isCallOffer,this.isWap4Bridge=!!t.isWap4Bridge}return(0,i.default)(e,[{key:"getTag",value:function(){return this.tag||(this.onSend?this.onSend.tag:void 0)}},{key:"getName",value:function(){return this.binaryOpts&&this.binaryOpts.metricName?this.binaryOpts.metricName.toLowerCase():`${this.data[0]}_${s.default.snakeCase(this.data[1])}`}},{key:"toString",value:function(){var e=this.data;return this.binaryOpts?this.binaryOpts.debugString:Array.isArray(e)?0===e.length?"[]":1===e.length?`[${e[0]}]`:"query"===e[0]||"action"===e[0]?`[${e[0]}, ${e[1]}${e.length>2?", ...":""}]`:`Invalid request: ${e[0]}`:e instanceof Object?"{...}":`${String(e)}`}},{key:"serialize",value:function(){var e=this.tag;if(this.binaryOpts){var t=this.binaryOpts,n=null!=t.metric?t.metric:0,r=(this.ignore?0:1)<<7|(!this.ignore&&t.ackRequest?1:0)<<6|(!0===t.available?1:0)<<5|(!1===t.available?1:0)<<4|(null!=t.expires&&0!==t.expires?1:0)<<3|(t.skipOffline?1:0)<<2;return o.Binary.build(e,",",n,r,this.data).readBuffer()}var a="string"==typeof this.data?this.data:JSON.stringify(this.data);return`${String(e)},,${String(a)}`}}]),e}();t.default=l,l.STATE=u},42183:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.base64DecodeRecursively=function e(t){var n=t[2];Array.isArray(n)&&n.forEach((function(t){t&&(t[2]instanceof ArrayBuffer||"string"==typeof t[2]?t[2]=(0,o.decodeB64ToJsArray)(t[2]):t[2]&&e(t))}))},t.default=void 0;var a=n(53939),i=n(46042),o=n(92827),s=r(n(96486)),u=r(n(48629)),l=n(676),c=n(71701),d=r(n(3122)),f=n(66279),p=n(65666);var h={formatCallOffer:function(e,t,n){var r,a,o=n.payload,s={to:n.common.peer_jid,id:t,from:(0,c.getMaybeMeUser)().toString({legacy:!0})},u=o[2];return u.forEach((function(e,t){switch(e[0]){case"enc":var s={call:{callKey:new Uint8Array(e[2])}},u={},c=o[1].retry_count;c&&(u.count=c);var d=["call",u,(0,p.cdataArrayBuffer)((0,i.encodeProto)(l.MessageSpec,s))];r=d,a=t;break;default:(0,p.arrayToB64Recursively)(n.payload,!0)}})),u.splice(a,1),u.push(r),o[2]=u,e.actionNode("relay",[["call",s,[o]]])},parseCallSignalingMsg:function(e){try{var t=u.default.get(e.from),n={peer_jid:e.from.toString({legacy:!0}),isContact:t&&t.isMyContact},r=["wrapper",{},e.data];switch(e.type){case"offer":var a=_("offer",r);n.peer_platform=e.platform,e.version&&e.version.length&&(n.peer_version=e.version.join(".")),this.parseCallOffer(a,n,!1);break;case"accept":var i=_("accept",r);n.type=f.TYPE.ACCEPT,n.call_id=d.default.attr("call-id",i)||"",n.peer_platform=e.platform,e.version&&e.version.length&&(n.peer_version=e.version.join("."));break;case"receipt":var o=e.data;switch(n.call_id=d.default.attr("call-id",o)||"",d.default.tag(o)){case"offer":n.type=f.TYPE.OFFER_RECEIPT;break;case"accept":n.type=f.TYPE.ACCEPT_RECEIPT;break;case"reject":default:return}break;case"terminate":var s=_("terminate",r);n.call_id=d.default.attr("call-id",s)||"",n.type=f.TYPE.TERMINATE;break;default:var l=function(e){var t=d.default.firstChild(e);if(!t)throw new Error("voip_signaling:Failed to get first child node");return t}(r);n.call_id=d.default.attr("call-id",l)}return n&&n.call_id&&this.createCommonHeader(n),n}catch(e){return void __LOG__(3)`Error parsing voip signaling message`}},parseCallOffer:function(e,t,n){if(t.type=f.TYPE.OFFER,t.call_id=d.default.attr("call-id",e)||"",n){var r=_("call",e),i=d.default.children(r);if(i instanceof ArrayBuffer){var o=(0,a.decodeProto)(l.MessageSpec,i);o.call&&o.call.callKey?this.receiveCallOfferKey(o.call.callKey,t):__LOG__(3)`voip_signaling:invalid messageProto.call`}else __LOG__(3)`voip_signaling:invalid serializedMessage`}else t.enc=this.parseRawE2EMaterial(e);var s=d.default.children(e,"video");t.video_count=Array.isArray(s)?s.length:void 0,t.isVideoCall=!!t.video_count,t.isGroupCall_DEPRECATED=!!t.group_info;var u=d.default.attr("t",e);u&&(t.t=u)},parseRawE2EMaterial:function(e){var t=d.default.child("enc",e);if(t)return(0,o.decodeB64ToJsArray)(d.default.dataStr(t));__LOG__(3)`voip_signaling:enc node not present`},receiveCallOfferKey:function(e,t){t&&(t[2]=Array.prototype.slice.call(new Uint8Array(e)))},createCommonHeader:function(e){e.common=s.default.pick(e,["type","call_id","peer_jid"])}};function _(e,t){var n=d.default.child(e,t);if(!n)throw new Error(`voip_signaling:Failed to get child node ${e}`);return n}t.default=h},65666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatCallSignalingMsg=function(e,t){var n,r=t.common.peer_jid;o(t.payload,!1);var a=t.payload;return["call",{from:null===(n=(0,i.getMaybeMeUser)())||void 0===n?void 0:n.toString({legacy:!0}),to:r,id:e},[a]]},t.arrayToB64Recursively=o,t.cdataArrayBuffer=s,t.cdataB64=u;var r=n(17643),a=n(92827),i=n(71701);function o(e,t){var n=e[2];Array.isArray(n)&&n.forEach((function(e){e&&(e[2]instanceof Array&&!(e[2][0]instanceof Array)?e[2]=t?s(new Uint8Array(e[2])):u(new Uint8Array(e[2])):e[2]&&o(e,t))}))}function s(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:e instanceof r.Binary?e.readBuffer():void 0}function u(e){return e instanceof Uint8Array||e instanceof ArrayBuffer?(0,a.encodeB64)(e):e instanceof r.Binary?(0,a.encodeB64)(e.readBuffer()):void 0}},13501:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Wap=void 0;var o,s,u=i(n(81109)),l=i(n(34575)),c=i(n(93913)),d=n(18712),f=n(75988),p=n(53939),h=n(17643),_=n(92827),v=i(n(91080)),m=n(86190),g=a(n(48935)),y=n(676),E=n(14650),S=a(n(98569)),b=i(n(89938)),T=a(n(22021)),w=a(n(67819)),A=i(n(44338)),C=n(31368),O=i(n(28115)),M=i(n(69673)),I=i(n(75554)),k=a(n(80130)),P=i(n(63056)),R=n(88828),D=n(65666),N=n(76007),L=i(n(12717)),x=n(75793),U=i(n(7860));function F(e){return function(){if(!o)return r.reject(new S.ProtoVersionUndefined(`wap:${e}:not connected to phone yet`));var t=o[e];return t?t.apply(o,arguments):r.reject(`wap:${e}:unsupported`)}}var G=F("sendPresenceUpdate"),B=F("sendChatstateUpdate"),j=function(){function e(){(0,l.default)(this,e),this.setSharedSecret=(0,f.promiseWrapSync)((function(e){__LOG__(2)`Wap:saveSharedSecret start`;var t=(0,v.default)((0,_.decodeB64ToJsArray)(e),"decodeB64ToJsArray(payload)"),n=t.slice(0,32),r=t.slice(64),a=k.get().keyPair,i=(0,v.default)(a,"keyPair").privKey;return g.sharedSecret(n,i).then((function(e){return w.extractAndExpand(e,"",80)})).then((function(e){var a=new Uint8Array(e,0,32),i=new Uint8Array(e,32,32),o=new Uint8Array(e,64,16),s=new Uint8Array(n.concat(r));return new A.default(i).sign(s).then((function(e){var n=(0,_.encodeB64)(e),i=(0,_.encodeB64)(t.slice(32,64));if(i===n){var s=h.Binary.build(o,new Uint8Array(r)).readByteArray();return(0,m.aesCbcDecrypt)(a,s).then((function(e){var t=new Uint8Array(e,0,32),n=new Uint8Array(e,32,32);k.setSecretKeys("0.1",t,n),__LOG__(2)`Wap:saveSharedSecret done`}))}__LOG__(3)`Wap:saveSharedSecret hmac mismatch ${i} ${n}`}))}))})),this.findGroupPendingInvitesFromPhone=F("findGroupPendingInvitesFromPhone"),this.acceptGroupV4Invite=F("acceptGroupV4Invite"),this.revokeGroupV4Invite=F("revokeGroupV4Invite"),this.addContact=F("addContact"),this.groupMetadataFindFromPhone=F("groupMetadataFindFromPhone"),this.resyncMessages=F("resyncMessages"),this.resyncReceipts=F("resyncReceipts"),this.queryReceivedActions=F("queryReceivedActions"),this.addParticipants=F("addParticipants"),this.changeSubject=F("changeSubject"),this.createGroup=F("createGroup"),this.leaveGroup=F("leaveGroup"),this.removeParticipants=F("removeParticipants"),this.promoteParticipants=F("promoteParticipants"),this.demoteParticipants=F("demoteParticipants"),this.setGroupDescription=F("setGroupDescription"),this.setGroupProperty=F("setGroupProperty"),this.setGroupEphemeralDuration=F("setGroupEphemeralDuration"),this.requestMediaReupload=F("requestMediaReupload"),this.sendMedia=F("sendMedia"),this.mediaUpload=F("mediaUpload"),this.sendConversationSeen=F("sendConversationSeen"),this.sendConversationUnseen=F("sendConversationUnseen"),this.sendConversationClear=F("sendConversationClear"),this.sendConversationDelete=F("sendConversationDelete"),this.sendConversationArchive=F("sendConversationArchive"),this.sendConversationMute=F("sendConversationMute"),this.sendConversationNotSpam=F("sendConversationNotSpam"),this.sendConversationPin=F("sendConversationPin"),this.sendConversationDismissChangeNumber=F("sendConversationDismissChangeNumber"),this.sendMessagePlayed=F("sendMessagePlayed"),this.sendMessageDelete=F("sendMessageDelete"),this.sendMessageStarred=F("sendMessageStarred"),this.sendUnstarAll=F("sendUnstarAll"),this.sendSetPicture=F("sendSetPicture"),this.deletePicture=F("deletePicture"),this.sendSetStatus=F("sendSetStatus"),this.setPushname=F("setPushname"),this.statusQuery=F("statusQuery"),this.sendStatusSeen=F("sendStatusSeen"),this.statusQueryThumbnail=F("statusQueryThumbnail"),this.sendSetBlock=F("sendSetBlock"),this.sendSpamReport=F("sendSpamReport"),this.chatFindQuery=F("chatFindQuery"),this.contactFindQuery=F("contactFindQuery"),this.queryIdentity=F("queryIdentity"),this.queryVname=F("queryVname"),this.msgCreateRecord=F("msgCreateRecord"),this.msgFindQuery=F("msgFindQuery"),this.queryLinkPreview=F("queryLinkPreview"),this.queryVcard=F("queryVcard"),this.queryMsgInfo=F("queryMsgInfo"),this.recentEmojiQuery=F("recentEmojiQuery"),this.clearBPQueue=F("clearBPQueue"),this.parseWebMessageInfo=F("parseWebMessageInfo"),this.subscribeLiveLocation=F("subscribeLiveLocation"),this.unsubscribeLiveLocation=F("unsubscribeLiveLocation"),this.queryActiveLiveLocation=F("queryActiveLiveLocation"),this.disableLiveLocation=F("disableLiveLocation"),this.findGroupPendingInvitesFromPhone=F("findGroupPendingInvitesFromPhone"),this.acceptGroupV4Invite=F("acceptGroupV4Invite"),this.revokeGroupV4Invite=F("revokeGroupV4Invite"),this.sendCallOffer=F("sendCallOffer"),this.queryCall=F("queryCall"),this.sendCallEnd=F("sendCallEnd"),this.queryLabels=F("queryLabels"),this.queryNextLabelColor=F("queryNextLabelColor"),this.queryLabelPalette=F("queryLabelPalette"),this.addOrRemoveLabels=F("addOrRemoveLabels"),this.deleteLabel=F("deleteLabel"),this.createLabel=F("createLabel"),this.editLabel=F("editLabel"),this.queryQuickReplies=F("queryQuickReplies"),this.flushQuickReplyCounts=F("flushQuickReplyCounts"),this.queryStickerPacks=F("queryStickerPacks"),this.queryStickersInStickerPack=F("queryStickersInStickerPack"),this.queryRecentStickers=F("queryRecentStickers"),this.queryStarredStickers=F("queryStarredStickers"),this.queryVideoPlaybackUrl=F("queryVideoPlaybackUrl"),this.queryNoticeState=F("queryNoticeState"),this.querySettings=F("querySettings"),this.setArchiveSetting=F("setArchiveSetting"),this.queryDisappearingMode=F("queryDisappearingMode")}return(0,c.default)(e,[{key:"isInitialized",value:function(){return!!s}},{key:"setVersion",value:function(e,t,n){var r=e[0],a=e[1],i=[r,a,t,n].join("."),l=s!==i;if(__LOG__(2)`wap:setVersion ${i} set: ${String(l)}`,l){var c=o;switch(r){case 0:switch(a){case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:case 16:throw __LOG__(3)`wap:setVersion deprecated version: ${i}`,new S.DeprecatedProtocolVersion("wap_deprecated_version");case 17:(o=(0,u.default)({},O.default[a])).setSubProtocol(t);break;default:o=void 0}}if(!o)throw __LOG__(3)`wap:setVersion unknown version. attempting to update`,new S.UpdateImmediately("wap_unknown_version");s=i,o.supportsFeatureFlags&&this.processFeatureFlags(n),c&&o&&o.upgradeProtoVersion(c)}}},{key:"processFeatureFlags",value:function(e){if(e){var t=(0,v.default)(o,"protoVersion"),n=t.implementedFeatures||{},r=(0,p.decodeProtoWithUnknowns)(N.WebFeaturesSpec,(0,_.decodeB64)(e)),a=(0,p.getUnknownFields)(r);for(var i in delete r.unsafeUnknownFields,n)T.default.setFeatureFromFlags(i,N.WebFeaturesFlag.FORCE_UPGRADE,N.WebFeaturesFlag.FORCE_UPGRADE);var s=Object.keys(N.WebFeaturesSpec.internalSpec),u=Object.keys(r);for(var l in s.forEach((function(e){var t=(0,T.getProtobufFeatureName)(e);!u.includes(e)&&T.default.supportsFeature(t)&&T.default.setFeature(t,!1)})),r)if(!n[l]){var c=r[l],d=b.default[l];if(c===N.WebFeaturesFlag.FORCE_UPGRADE&&d!==N.WebFeaturesFlag.FORCE_UPGRADE)throw __LOG__(3)`wap:features:${l} phone value is ${c} and web value is ${d}. updating...`,new S.UpdateImmediately("wap_feature_force_upgrade");if(T.default.setFeatureFromFlags(l,d,c),T.default.supportsFeatureFromFlags(l)){var f=O.default.features[l];f&&Object.assign(t,f)}}for(var h in a){var m=a[h];if("number"==typeof m&&N.WebFeaturesFlag.cast(m)===N.WebFeaturesFlag.FORCE_UPGRADE)throw __LOG__(3)`wap:features:unknown: ${h}: ${m}`,new S.UpdateImmediately("wap_feature_implemented_unknown")}}}},{key:"delete",value:function(){var e=o?o.delete.apply(o,arguments):void 0;return o=void 0,s=void 0,__LOG__(2)`wap:unsetVersion, which should only happen when logout`,e}},{key:"cannotReachPhone",value:function(){o&&o.cannotReachPhone.apply(o,arguments)}},{key:"handle",value:function(e,t,n,r){return(0,v.default)(o,"protoVersion").handle.apply(o,[e,t,n,r])}},{key:"queryServerProps",value:function(){return U.default.sendEphemeral2({data:["query","props"],retryOn5xx:!1})}},{key:"resyncPictures",value:function(e){var t=e.filter((function(e){return L.default.isWid(e.id)}));return 0===t.length?r.resolve([]):U.default.sendEphemeral2({data:["query","resumePic",t],retryOn5xx:!0})}},{key:"setRememberMe",value:function(e){return U.default.sendBasic({data:["admin","remember",!!e]})}},{key:"queryMediaConnections",value:function(e){var t=new Date,n=U.default.send2({data:["query","mediaConn"]}).then((function(e){if(__LOG__(2,!0)`queryMediaConnections result: ${JSON.stringify(e)}`,200!==e.status){if(e.status>=400)throw new E.ServerStatusCodeError(e.status,"queryMediaConnections");throw new E.ServerStatusCodeError(e.status,"Invalid return status")}var n=e.media_conn;if(!(n&&n.auth&&n.ttl&&n.hosts&&Array.isArray(n.hosts)&&0!==n.hosts.length))throw __LOG__(2)`wap:queryMediaConnections mediaConn exists ${String(!!n)}`,n&&(__LOG__(2)`wap:queryMediaConnections mediaConn.auth exists ${String(!!n.auth)}`,__LOG__(2)`wap:queryMediaConnections mediaConn.ttl exists ${String(!!n.ttl)}`,__LOG__(2)`wap:queryMediaConnections mediaConn.hosts exists ${String(!!n.hosts)}`,__LOG__(2)`wap:queryMediaConnections mediaConn.hosts isArray ${String(Array.isArray(n.hosts))}`,n.hosts&&__LOG__(2)`wap:queryMediaConnections mediaConn.hosts.length ${n.hosts.length}`),__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("wap:queryMediaConnections unexpected mediaConn"),new Error("Invalid mediaConn");var r=n.auth,a=n.auth_ttl,i=n.ttl,o=n.max_buckets;return{auth:r,authTTL:a,hosts:n.hosts.map((function(e){var t,n=null===(t=e.rules)||void 0===t?void 0:t.map((function(e){return e.download_buckets?{downloadBuckets:e.download_buckets}:e}));return(0,u.default)((0,u.default)({},e),{},{rules:n})})),queryStartTime:t,ttl:i,maxBuckets:o}}));return(0,M.default)(n,e)}},{key:"acceptGroupInvite",value:function(e){return U.default.send2({data:["action","invite",e],retryOn5xx:!0})}},{key:"revokeGroupInvite",value:function(e){return U.default.send2({data:["action","inviteReset",e],retryOn5xx:!0})}},{key:"contactFindBroadcast",value:function(e){return U.default.send2({data:["query","contact",e],retryOn5xx:!0})}},{key:"commonGroupsFind",value:function(e){return L.default.isServer(e)?r.resolve({status:200,groups:[]}):U.default.send2({data:["query","group","common",e]})}},{key:"getCapabilities",value:function(e){return U.default.send2({data:["query","caps",e.filter(L.default.isUser)],retryOn5xx:!0})}},{key:"queryExist",value:function(e){return L.default.isUser(e)?U.default.send2({data:["query","exist",e],retryOn5xx:!0}):r.resolve({status:400})}},{key:"queryCtwaContext",value:function(e,t,n){var r={accountNumber:(0,x.createWid)(e).toString({legacy:!0}),code:t,expectedSourceUrl:n,id:(0,d.generateId)()};return U.default.send2({data:["query","ctwa",r],retryOn5xx:!0}).then((function(e){var t,r,a,i;if(200!==e.status)throw new E.ServerStatusCodeError(e.status,`queryCtwaContext:fail ${e.status}`);var o={sourceId:e.data.source.id,sourceType:e.data.source.type,sourceUrl:e.data.source.url,description:e.data.body,title:e.data.headline,mediaType:(null===(t=e.data.video)||void 0===t?void 0:t.url)?y.ExternalAdReplyInfoMediaType.VIDEO:y.ExternalAdReplyInfoMediaType.IMAGE,isSuspiciousLink:e.data.source.url!==n,thumbnailUrl:null===(r=e.data.thumbnail)||void 0===r?void 0:r.url,mediaUrl:null===(a=e.data.video)||void 0===a?void 0:a.url};return(null===(i=e.data.thumbnail)||void 0===i?void 0:i.bytes)&&(o.thumbnail=e.data.thumbnail.bytes),o}))}},{key:"queryBusinessProfile",value:function(e,t){return U.default.send2({data:["query","businessProfile",e.filter((function(e){return L.default.isUser(e.wid)})),t],retryOn5xx:!0}).then((function(e){switch(e.status){case 200:return e.profiles;default:throw new Error(`queryBusinessProfile:fail ${e} ${e.status}`)}}))}},{key:"queryBusinessCategories",value:function(e){var t={id:(0,d.generateId)(),query:e};return U.default.send2({data:["query","businessCategories",t],retryOn5xx:!0}).then((function(e){switch(e.status){case 200:var t=e.data.not_a_biz[0],n=e.data.categories.reduce((function(e,n){return n.id!==t.id&&e.push({id:n.id,localized_display_name:n.name}),e}),[]);return n.unshift({id:t.id,localized_display_name:t.name,not_a_biz:!0}),n;default:throw new Error(`queryBusinessCategories:fail ${e} ${e.status}`)}}))}},{key:"queryOrder",value:function(e,t,n,r){var a={id:(0,d.generateId)(),orderId:e,imageWidth:t.toString(),imageHeight:n.toString(),token:r};return U.default.send2({data:["query","order",a],retryOn5xx:!0}).then((function(e){switch(e.status){case 200:var t=e.data;try{var n=t.price,r=n.currency,a=n.subtotal,i=n.total,o=n.tax;return{currency:r,createdAt:parseInt(t.creationTS,10),products:t.products.map((function(e){var t,n;return{id:e.id,price:e.price,thumbnailId:null===(t=e.image)||void 0===t?void 0:t.id,thumbnailUrl:null===(n=e.image)||void 0===n?void 0:n.url,currency:e.currency,name:e.name,quantity:parseInt(e.quantity||0,10)}})),subtotal:a,total:i,tax:o}}catch(t){throw new E.ServerStatusCodeError(e.status,`queryOrder:response malformed ${e.status}`)}case 404:throw new E.E404;default:throw new E.ServerStatusCodeError(e.status,`queryOrder:fail ${e.status}`)}}))}},{key:"createOrder",value:function(e,t){var n={product:t.map((function(e){return{id:e.id,name:e.name,quantity:(0,R.isNumber)(e.quantity)?e.quantity.toString():void 0,price:(0,R.isNumber)(e.priceAmount1000)?e.priceAmount1000.toString():void 0,currency:e.currency}})),bizJID:e,id:(0,d.generateId)()};return U.default.send2({data:["action","createOrder",n],retryOn5xx:!0}).then((function(e){if(200===e.status)return e.data;throw new E.ServerStatusCodeError(e.status,`createOrder:fail wap action return status: ${e.status}`)}))}},{key:"refreshCart",value:function(e,t,n,r){var a=t.map((function(e){return{id:e}})),i={id:(0,d.generateId)(),products:a,bizJID:L.default.user(e),imageDimensions:{width:n.toString(),height:r.toString()}};return U.default.send2({data:["action","refreshOrder",i],retryOn5xx:!0}).then((function(e){if(200===e.status)return e.data;throw new E.ServerStatusCodeError(e.status,`refreshCart:fail wap action return status: ${e.status}`)}))}},{key:"queryProductCatalog",value:function(e,t,n,r,a){var i={catalogWid:e,afterCursor:t,limit:n,width:r,height:a,type:P.default.webCatalogApiREH?"get_product_catalog_reh":"get_product_catalog",stanza_id:(0,d.generateId)()};return U.default.send2({data:["query","bizCatalog",i],retryOn5xx:!0}).then((function(e){switch(e.status){case 200:return"string"==typeof e.data||e.data instanceof String?JSON.parse(e.data):e.data;default:throw new E.ServerStatusCodeError(e.status,`queryProductCatalog:fail ${e.status}`)}}))}},{key:"queryProductList",value:function(e,t,n,r){var a={catalogWid:e,product_ids:t,width:""+n,height:""+r,stanza_id:(0,d.generateId)()};return U.default.send2({data:["action","getProductList",a],retryOn5xx:!0}).then((function(e){switch(e.status){case 200:return e.data.data;default:throw new E.ServerStatusCodeError(e.status,`queryProductList:fail ${e.status}`)}}))}},{key:"queryProduct",value:function(e,t,n,r){var a={catalogWid:e,productID:t,width:n,height:r,type:P.default.webCatalogApiREH?"get_product_reh":"get_product",stanza_id:(0,d.generateId)()};return U.default.send2({data:["query","bizCatalog",a],retryOn5xx:!0}).then((function(e){switch(e.status){case 200:return{data:"string"==typeof e.data||e.data instanceof String?JSON.parse(e.data):e.data.product};case 404:case"not_found":return{error:"NOT_FOUND"};default:throw new E.ServerStatusCodeError(e.status,`queryProduct:fail ${e.status}`)}}))}},{key:"reportBusinessCatalogProduct",value:function(e,t,n){var r={id:t,jid:e.toString(),reason:n,stanza_id:(0,d.generateId)()};return U.default.send2({data:["action",P.default.webCatalogApiREH?"reportProduct_reh":"reportProduct",r],retryOn5xx:!0}).then((function(e){if(200!==e.status)throw new E.ServerStatusCodeError(e.status,`reportBusinessCatalogProduct:fail ${e.status}`)}))}},{key:"deleteBusinessCatalogProduct",value:function(e){var t=P.default.webCatalogApiREH?["action","deleteProduct_reh",{product_ids:e,stanza_id:(0,d.generateId)()}]:["action","deleteProduct",e];return U.default.send2({data:t,retryOn5xx:!0}).then((function(e){if(200!==e.status)throw new E.ServerStatusCodeError(e.status,`deleteBusinessCatalogProduct:fail ${e.status}`);return{deletedCount:e.deletedCount}}))}},{key:"createBusinessCatalog",value:function(){var e=P.default.webCatalogApiREH?["action","createCatalog_reh",{stanza_id:(0,d.generateId)()}]:["action","createCatalog"];return U.default.send2({data:e,retryOn5xx:!0}).then((function(e){if(200!==e.status)throw new E.ServerStatusCodeError(e.status,`createBusinessCatalog:fail ${e.status}`)}))}},{key:"editBusinessCatalogProduct",value:function(e,t,n){var r={product_id:e.id,name:e.name,image_url:e.imageCdnUrl,url:e.url,additional_image_urls:e.additionalImageCdnUrl,width:t.toString(),height:n.toString(),stanza_id:(0,d.generateId)(),is_hidden:e.isHidden};return"number"==typeof e.priceAmount1000&&(r.price=(e.priceAmount1000/10).toString(),e.currency&&(r.currency=e.currency)),e.description&&(r.description=e.description),e.retailerId&&(r.retailer_id=e.retailerId),U.default.send2({data:["action",P.default.webCatalogApiREH?"editProduct_reh":"editProduct",r],retryOn5xx:!0}).then((function(e){if(200===e.status)return e.data.product;var t;throw new E.CatalogEditServerError(e.status,(0,C.parseLegacyProductErrorReason)(null==e||null===(t=e.data)||void 0===t?void 0:t.reason))}))}},{key:"addBusinessCatalogProduct",value:function(e,t,n){var r={name:e.name,description:e.description||"",image_url:e.imageCdnUrl,url:e.url||"",additional_image_urls:e.additionalImageCdnUrl,retailer_id:e.retailerId||"",width:t.toString(),height:n.toString(),stanza_id:(0,d.generateId)(),is_hidden:e.isHidden};return"number"==typeof e.priceAmount1000&&(r.price=(e.priceAmount1000/10).toString(),e.currency&&(r.currency=e.currency)),U.default.send2({data:["action",P.default.webCatalogApiREH?"addProduct_reh":"addProduct",r],retryOn5xx:!0}).then((function(e){if(200===e.status)return e.data.product;var t;throw new E.CatalogEditServerError(e.status,(0,C.parseLegacyProductErrorReason)(null==e||null===(t=e.data)||void 0===t?void 0:t.reason))}))}},{key:"productVisibilitySet",value:function(e){var t={product_visibility:e.map((function(e){return[e.productId,e.isHidden]})),stanza_id:(0,d.generateId)()};return U.default.send2({data:["action","productVisibilitySet",t],retryOn5xx:!0}).then((function(e){if(200!==e.status)throw new E.ServerStatusCodeError(e.status,`productVisibilitySet:fail ${e.status}`)}))}},{key:"appealCatalogProduct",value:function(e,t){var n={id:e,reason:t,stanza_id:(0,d.generateId)()};return U.default.send2({data:["action",P.default.webCatalogApiREH?"appealProduct_reh":"appealProduct",n],retryOn5xx:!0}).then((function(e){if(200===e.status)return!0;throw new E.ServerStatusCodeError(e.status,`appealCatalogProduct:fail ${e.status}`)}))}},{key:"groupV4InviteRequestMetadataFind",value:function(e,t,n,r,a){return U.default.send2({data:["query","InvitedGroupMetadata",{from:e,admin:t,code:n,expiration:r,gid:a}],retryOn5xx:!1})}},{key:"groupV4InviteGrpPicThumb",value:function(e,t,n,r){return U.default.send2({data:["query","AddRequestGrpProfilePicThumb",{admin:e,code:t,expiration:n,gid:r}],retryOn5xx:!0})}},{key:"groupMetadataFind",value:function(e){return U.default.send2({data:["query","GroupMetadata",e],retryOn5xx:!0}).then((function(e){return e.status&&e.status>=400?r.reject(new E.ServerStatusCodeError(e.status)):e}))}},{key:"groupInviteInfo",value:function(e){return U.default.send2({data:["query","invite",e],retryOn5xx:!0})}},{key:"groupInviteCode",value:function(e){return U.default.send2({data:["query","inviteCode",e],retryOn5xx:!0})}},{key:"profilePicFind",value:function(e){return L.default.isServer(e)?r.resolve({status:400}):U.default.sendEphemeral2({data:["query","ProfilePicThumb",e],retryOn5xx:!0})}},{key:"profilePicFindThumbFromPhone",value:function(){return o?o.profilePicFindThumbFromPhone.apply(o,arguments):r.reject(new S.ProtoVersionUndefined("wap:profilePicFindThumbFromPhone:not connected to phone"))}},{key:"statusFind",value:function(e){return L.default.isServer(e)?r.resolve({status:""}):U.default.sendEphemeral2({data:["query","Status",e],retryOn5xx:!0})}},{key:"sendPing",value:function(){return U.default.send2({data:["admin","test"],retryOn5xx:!0})}},{key:"sendPresenceAvailable",value:function(){return G("available")}},{key:"sendPresenceUnavailable",value:function(){return G("unavailable")}},{key:"sendChatstateComposing",value:function(e){return B("composing",e)}},{key:"sendChatstatePaused",value:function(e){return B("paused",e)}},{key:"sendChatstateRecording",value:function(e){return B("recording",e)}},{key:"subscribePresence",value:function(e){return U.default.send2({data:["action","presence","subscribe",e],retryOn5xx:!0})}},{key:"downloadImage",value:function(){return r.reject("Image download is not yet implemented")}},{key:"logoutToken",value:function(){var e=k.get(),t=e.encKey,n=e.macKey;return new A.default((0,v.default)(n,"macKey")).sign(new Uint8Array((0,v.default)(t,"encKey"))).then(_.encodeB64)}},{key:"sendGroupCallOffer",value:function(e){return this.sendCallSignalingMsg(e)}},{key:"sendCallSignalingMsg",value:function(e,t){var n=t||(0,I.default)(),a=(0,D.formatCallSignalingMsg)(n,e);return a?U.default.send2({tag:n,data:["action","call",a],retryOn5xx:!0}).then((function(e){return e})):r.reject("unknown call signaling msg type")}}]),e}();t.Wap=j;var Y=new j;t.default=Y},19396:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBusinessProfile=function(e){var t,n=(0,i.getBusinessProfileQueryVersion)();o.default.supportsFeature(o.default.F.MD_BACKEND)?(t=(0,u.default)(e,n))||(t=r.reject(new Error("Should not reach here"))):t=s.default.queryBusinessProfile(e,n);return t},t.updateCartEnabled=function(e){var t;o.default.supportsFeature(o.default.F.MD_BACKEND)?(t=(0,l.updateCartEnabled)(e))||(t=r.reject(new Error("Should not reach here"))):t=r.reject(new Error("This feature is only available for MD."));return t};var i=n(38251),o=a(n(22021)),s=a(n(23306)),u=a(n(70818)),l=n(83239)},35359:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBusinessCategories=function(e){var t;if(!i.default.supportsFeature(i.default.F.MD_BACKEND))return o.default.queryBusinessCategories(e);(t=(0,s.queryBusinessCategories)(e))||(t=r.reject(new Error("BusinessCategory MD query not yet implemented")));return t};var i=a(n(22021)),o=a(n(23306)),s=n(44836)},38251:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBusinessProfileQueryVersion=function(){return 119&a.default.webBizProfileOptions};var a=r(n(63056))},98811:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendChatStatePaused=function(e){return o.default.supportsFeature(o.default.F.MD_BACKEND)?((0,u.default)(e,"paused"),r.resolve()):s.default.sendChatstatePaused(e).then((function(e){if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}))},t.sendChatStateRecording=function(e){return o.default.supportsFeature(o.default.F.MD_BACKEND)?((0,u.default)(e,"recording"),r.resolve()):s.default.sendChatstateRecording(e).then((function(e){if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}))},t.sendChatStateComposing=function(e){return o.default.supportsFeature(o.default.F.MD_BACKEND)?((0,u.default)(e,"composing"),r.resolve()):s.default.sendChatstateComposing(e).then((function(e){if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}))};var i=n(14650),o=a(n(22021)),s=a(n(23306)),u=a(n(35703))},33589:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendClear=function(e,t,a){var i;d.default.supportsFeature(d.default.F.MD_BACKEND)?(i=g.default.syncdClearChatEnabled?function(e,t,a){return r.all([r.resolve().then(n.bind(n,37865)),r.resolve().then(n.bind(n,57831))]).then((function(t){var n=(0,u.default)(t,2),r=n[0].lockForMessageRangeSync,i=n[1].default,o=(0,p.unixTimeMs)();return i.getClearChatMutation(o,e.id,!a).then(function(){var t=(0,l.default)(s.default.mark((function t(n){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(["message"],[n],(0,l.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.addActiveMessageRange)(e.id.toString(),"clearChat",n.binarySyncAction);case 2:case"end":return t.stop()}}),t)}))));case 2:return t.next=4,y(e);case 4:return t.abrupt("return",{_duplicate:null});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())}))}(e,0,a):function(){return S.apply(this,arguments)}(e))||(i=r.reject(new Error("md:sendClear: should not reach here"))):i=f.default.sendConversationClear(e.id,t,!a).then((function(e){if(200!==e.status)throw new c.ServerStatusCodeError(e.status);return e}));return i};var o=i(n(81109)),s=i(n(87757)),u=i(n(63038)),l=i(n(48926)),c=n(14650),d=i(n(22021)),f=i(n(23306)),p=n(90066),h=i(n(91080)),_=i(n(45684)),v=n(22252),m=a(n(87547)),g=i(n(63056));function y(){return E.apply(this,arguments)}function E(){return(E=(0,l.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getBoundsForChat)(t.id);case 2:return n=e.sent,e.next=5,(0,m.default)(t.id);case 5:null==n&&__LOG__(3)`_sendClearMD: Expected to receive boundaries for chat while clearing`,_.default.purgeRange((0,o.default)({chatId:t.id.toString()},(0,h.default)(n,"rowIdBounds")));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=(0,l.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:return e.abrupt("return",{_duplicate:null});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},52818:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createLocal=function(e,t){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,s.getTable)().create((0,i.default)({id:e.toString()},t)).catch((function(e){if(e instanceof u.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`update chat table failed`,SEND_LOGS("update chat table failed when create local"),new Error("update chat table failed")}));return r.resolve()};var i=a(n(81109)),o=a(n(22021)),s=n(8985),u=n(98569)},42355:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.find=function(e,t){var n=performance.now();return u.default.chatFindQuery(e,(function(e){t.binarySize=e.binarySize})).then((function(e){return"preempted"!==e&&(t.timing=Math.ceil(performance.now()-n),t.size=e.length,s.default.supportsFeature(s.default.F.MD_BACKEND))?(0,c.getTable)().bulkCreateOrMerge(e.map((function(e){return(0,o.default)((0,o.default)({},e),{},{id:e.id.toString()})}))).then((function(){return e})).catch((function(){throw __LOG__(4,!0,new Error,!0)`bulk update chats failed`,SEND_LOGS("bulk update chats failed"),new Error("bulk update chats failed")})):e}))},t.findLocal=function(){return d.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=r(n(81109)),s=r(n(22021)),u=r(n(23306)),l=n(50871),c=n(8985);function d(){return(d=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=6;break}return e.next=3,(0,c.getTable)().get(t);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",(0,l.hydrateWids)(n));case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},42810:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.setLastReceivedKey=function(){return r.resolve()}},32417:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationMute=function(e,t,n){var a;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){var d=c.default.generateMuteMutation(e,t);(a=(0,l.lockForSync)(["chat"],[d],(function(n){return(0,i.default)(n,1)[0].merge(e.toString(),{muteExpiration:t})})).then((function(){return{status:200,_duplicate:null}})))||(a=r.reject(new Error("Should not reach here")))}else a=u.default.sendConversationMute(e,t,n).then((function(e){if(200!==e.status)throw new o.ServerStatusCodeError(e.status);return e}));return a};var i=a(n(63038)),o=n(14650),s=a(n(22021)),u=a(n(23306)),l=n(50773),c=a(n(7849))},93001:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.resyncMessages=function(e){return u.default.resyncMessages(e).then((function(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND)&&(!e.status||e.status<400)){var t=e.data,r=[],u=[];return t.forEach((function(e){n(26671).default.get(e.id)?"clear"===e.type?r.push({id:e.id.toString(),t:e.t,unreadCount:e.unreadCount,archive:e.archive,isReadOnly:e.isReadOnly,modifyTag:e.modifyTag,notSpam:e.notSpam,pin:e.pin,changeNumberOldJid:e.changeNumberOldJid,changeNumberNewJid:e.changeNumberNewJid,muteExpiration:e.muteExpiration,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp}):"delete"===e.type?u.push(e.id.toString()):r.push((0,i.default)((0,i.default)({},e),{},{id:e.id.toString()})):r.push((0,i.default)((0,i.default)({},e),{},{id:e.id.toString()}))})),(0,s.getStorage)().lock(["chat"],(function(e){var t=(0,a.default)(e,1)[0];return t.bulkCreateOrMerge(r).then((function(){return t.bulkRemove(u)}))})).then((function(){return e})).catch((function(){throw __LOG__(4,!0,new Error,!0)`get storage or bulk update chats failed`,SEND_LOGS("get storage or bulk update chats failedwhen re-sync messages"),new Error("get storage or bulk update chats failed")}))}return e}))};var a=r(n(63038)),i=r(n(81109)),o=r(n(22021)),s=n(28367),u=r(n(23306))},67616:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendConversationSeen=function(e,t,a){var p;s.default.supportsFeature(s.default.F.MD_BACKEND)?(p=r.all([r.resolve().then(n.bind(n,37865)),r.resolve().then(n.bind(n,585))]).then((function(n){var r=(0,i.default)(n,2),o=r[0].lockForMessageRangeSync,s=r[1].default,u=(0,d.unixTimeMs)();return(-1===a?s.getMarkChatAsReadMutation(u,!0,e.id).then((function(t){var n=e.id.toString();return o([],[t],(function(){return(0,c.addActiveMessageRange)(e.id.toString(),"markChatAsRead",t.binarySyncAction)})),(0,l.updateChatForMarkAsReadSync)(n)})):(0,f.markChatRead)(e,t)).then((function(){return{_duplicate:!1}}))})))||(p=r.reject(new Error("Should not reach here"))):p=u.default.sendConversationSeen(e.id,t,a).then((function(e){var t=e.status,n=e._duplicate;return 200!==t?r.reject(new o.ServerStatusCodeError(t)):{_duplicate:n}}));return p},t.sendConversationUnseen=function(e,t){var a;s.default.supportsFeature(s.default.F.MD_BACKEND)?(a=r.all([r.resolve().then(n.bind(n,37865)),r.resolve().then(n.bind(n,585))]).then((function(t){var n=(0,i.default)(t,2),r=n[0].lockForMessageRangeSync,o=n[1].default,s=(0,d.unixTimeMs)();a=o.getMarkChatAsReadMutation(s,!1,e).then((function(t){return r([],[t],(function(){return(0,c.addActiveMessageRange)(e.toString(),"markChatAsRead",t.binarySyncAction)}))}))})))||(a=r.reject(new Error("Should not reach here"))):a=u.default.sendConversationUnseen(e,t).then((function(e){var t=e.status;if(200!==t)return r.reject(new o.ServerStatusCodeError(t))}));return a},t.markConversationSeen=function(e,t){if(s.default.supportsFeature(s.default.F.MD_BACKEND))return(0,p.getChatTable)().merge(e.toString(),{unreadCount:t}).catch((function(e){if(e instanceof h.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`update chat table failed`,SEND_LOGS("update chat table failed when mark convestation seen"),new Error("update chat table failed")}));return r.resolve()},t.markConversationUnseen=function(e){if(s.default.supportsFeature(s.default.F.MD_BACKEND))return(0,p.getChatTable)().merge(e.toString(),{unreadCount:-1}).catch((function(e){if(e instanceof h.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`update chat table failed`,SEND_LOGS("update chat table failed when mark conversation as unseen"),new Error("update chat table failed")}));return r.resolve()};var i=a(n(63038)),o=n(14650),s=a(n(22021)),u=a(n(23306)),l=n(48399),c=n(22252),d=n(90066),f=n(54663),p=n(43883),h=n(98569)},48862:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDeleteMsgs=function(e,t,n){var a,d=[],f=[];if(e.forEach((function(e){d.push(e.id),f.push(String(e.rowId))})),o.default.supportsFeature(o.default.F.MD_BACKEND)){var p=c.default.getDeleteForMeMutations(e,t),h=d.map((function(e){return e.toString()}));if(!(a=(0,l.lockForSync)(["message","label-association"],p,(function(){return(0,u.removeMessagesFromHistory)(h)})).catch((function(){throw __LOG__(4,!0,new Error,!0)`remove messages from history failed`,SEND_LOGS("remove messages from history failed when send delete messages"),new Error("remove messages from history failed")}))))return r.reject(new Error("Not Supported for Non-MD"))}else a=s.default.sendMessageDelete(n,d,t).then((function(e){if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}));return a};var i=n(14650),o=a(n(22021)),s=a(n(23306)),u=n(69449),l=n(50773),c=a(n(86725))},86729:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendStarMsgs=function(e,t,n){var a;o.default.supportsFeature(o.default.F.MD_BACKEND)?(a=f(t,n))||(a=r.reject(new Error("Should not reach here"))):a=s.default.sendMessageStarred(e,t.map((function(e){return e.id})),n).then((function(e){if(200!==e.status)return r.reject(new i.ServerStatusCodeError(e.status))}));return a},t.sendUnstarAll=function(e,t){var n;o.default.supportsFeature(o.default.F.MD_BACKEND)?(n=f(e,!1))||(n=r.reject(new Error("Should not reach here"))):n=s.default.sendUnstarAll(t).then((function(e){if(200!==e.status)return r.reject(new i.ServerStatusCodeError(e.status))}));return n};var i=n(14650),o=a(n(22021)),s=a(n(23306)),u=n(50773),l=n(69449),c=a(n(78712)),d=a(n(5168));function f(e,t){t||d.default.addUnsetActionCount(e.length);var n=c.default.getStarMessageMutations(e,t);return(0,u.lockForSync)(["message"],n,(function(){return t?(0,l.starMessages)(e.map((function(e){return e.id.toString()}))).catch((function(){throw __LOG__(4,!0,new Error,!0)`star messages failed`,SEND_LOGS("star messages failed"),new Error("star messages failed")})):(0,l.unstarMessages)(e.map((function(e){return e.id.toString()}))).catch((function(){throw __LOG__(4,!0,new Error,!0)`unstar messages failed`,SEND_LOGS("unstar messages failed"),new Error("unstar messages failed")}))}))}},55182:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocal=function(e,t){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,o.getTable)().merge(e.toString(),t).catch((function(e){if(e instanceof s.DbOnLogoutAbort)throw e;throw __LOG__(4,!0,new Error,!0)`update chat table failed`,SEND_LOGS("update chat table failed when update local"),new Error("update chat table failed")}));return r.resolve()};var i=a(n(22021)),o=n(8985),s=n(98569)},40029:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSetBlock=function(e,t){var n;if(o.default.supportsFeature(o.default.F.MD_BACKEND)){var a=e?(0,u.blockUser)(t):(0,u.unblockUser)(t);(n=a.then((function(e){if(e&&null!=e.errorCode)throw new i.ServerStatusCodeError(e.errorCode,e.errorText);return!0})))||(n=r.reject(new Error("Should not reach here")))}else n=s.default.sendSetBlock(e,[{jid:t}]).then((function(e){if(200!==e.status)throw new i.ServerStatusCodeError(e.status);return!(e._duplicate||200!==e.status)}));return n.then((function(n){if(n&&o.default.supportsFeature(o.default.F.MD_BACKEND)){var r=t.toString();return(e?(0,l.getBlocklistTable)().createOrReplace({id:r}):(0,l.getBlocklistTable)().remove(t.toString())).then((function(){return n})).catch((function(){throw __LOG__(4,!0,new Error,!0)`send set block failed`,SEND_LOGS("Failed to send set block"),new Error("send set block failed")}))}return n}))};var i=n(14650),o=a(n(22021)),s=a(n(23306)),u=n(82735),l=n(43883)},9654:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setChecksum=function(e){i.default.supportsFeature(i.default.F.MD_BACKEND)&&(0,o.setContactChecksum)(e);return r.resolve()};var i=a(n(22021)),o=n(48466)},1794:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setFrequent=function(e){var t={};Object.keys(e).forEach((function(n){t[n]=e[n].map((function(e){return e.toString()}))})),i.default.supportsFeature(i.default.F.MD_BACKEND)&&(0,o.setFrequentContacts)(t);return r.resolve()};var i=a(n(22021)),o=n(48466)},10550:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getContactsToRemove=function(e){var t=[],r={};return e.forEach((function(e){e&&(r[e.id]=!0)})),a.default.forEach((function(e){var a=e.id;!(e.isUser||e.isGroup&&!n(26671).default.get(a))||r[a.toString()]||e.isPSA||t.push(e)})),t};var a=r(n(48629))},13622:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendSpamReport=function(e,t){var n;o.default.supportsFeature(o.default.F.MD_BACKEND)?(n=(0,u.reportSpam)(e,t).then((function(e){if(e&&e.errorCode)throw new i.ServerStatusCodeError(e.errorCode,e.errorText)})))||(n=r.reject(new Error("Should not reach here"))):n=s.default.sendSpamReport(e.id).then((function(e){if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}));return n},t.sendNotSpam=function(e){var t;t=o.default.supportsFeature(o.default.F.MD_BACKEND)?r.resolve():s.default.sendConversationNotSpam(e.id).then((function(e){if(200!==e.status)throw new i.ServerStatusCodeError(e.status)}));return t.then((function(){return o.default.supportsFeature(o.default.F.MD_BACKEND)?(0,l.getChatTable)().merge(e.id.toString(),{notSpam:!0}).catch((function(){throw __LOG__(4,!0,new Error,!0)`get chat table merge failed`,SEND_LOGS("get chat table merge failed when sending spam report"),new Error("get chat table merge failed")})):r.resolve()}))};var i=n(14650),o=a(n(22021)),s=a(n(23306)),u=n(47070),l=n(43883)},29846:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocal=function(e,t){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,o.getTable)().merge((0,s.toJid)(e.user),t);return r.resolve()};var i=a(n(22021)),o=n(9010),s=n(72687)},94909:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.contactSync=function(){return c.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=r(n(22021)),s=n(98093),u=n(75793),l=n(43883);function c(){return(c=(0,i.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.default.supportsFeature(o.default.F.MD_BACKEND)){e.next=7;break}return e.next=3,(0,l.getContactTable)().all();case 3:if(!((t=e.sent).length>0)){e.next=7;break}return n=t.map((function(e){return(0,u.createWid)(e.id)})),e.abrupt("return",(0,s.syncContactListInChunks)(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},54035:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendCreateGroup=function(e,t,n,a,c,d){var f,p=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(s.default.supportsFeature(s.default.F.MD_BACKEND)){if(!(f=(0,l.createGroup)(e,t,p).then((function(e){return{gid:e.wid,participants:e.participants.map((function(e){return(0,i.default)({},e.wid.toString(),{code:null!=e.error?e.error.toString():"200",invite_code:e.invite_code,invite_code_exp:e.invite_code_exp})}))}}))))return r.reject(new Error("queryGroupInvite: not supported when not build with MD_BACKEND"))}else f=u.default.createGroup(e,t,n,a,c,d,void 0,p).then((function(e){return 200===e.status?e:r.reject(new o.ServerStatusCodeError(e.status))}));return f};var i=a(n(59713)),o=n(14650),s=a(n(22021)),u=a(n(23306)),l=n(82290)},73525:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.markExited=function(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,u.getTable)().merge(e.toString(),{isReadOnly:!0});return r.resolve()},t.sendExitGroup=function(e){var t;if(o.default.supportsFeature(o.default.F.MD_BACKEND)){if(!(t=(0,l.leaveGroups)([e]).then((function(){return{_duplicate:null}}))))return r.reject(new Error("sendExitGroup: not supported when not build with MD_BACKEND"))}else t=s.default.leaveGroup(e).then((function(e){return 200!==e.status?r.reject(new i.ServerStatusCodeError(e.status)):{_duplicate:e._duplicate}}));return t};var i=n(14650),o=a(n(22021)),s=a(n(23306)),u=n(8985),l=n(66044)},69056:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryGroup=function(e){var t;if(u.default.supportsFeature(u.default.F.MD_BACKEND)){if(__LOG__(2,void 0,void 0,void 0,["groups"])`querying server for groupMetadata of group id ${e.toString()}`,!(t=(0,p.queryGroup)(e,"interactive")))return r.reject(new Error("queryGroup: not supported when not build with MD_BACKEND"))}else t=f.default.groupMetadataFind(e);return t.then((function(t){if(t.id)return(0,h.updateGroupMetadataTable)([t]),_(e,t.subject),(0,c.updateParticipants)(t.id,t.participants,t.pvId).then((function(){return{id:t.id,owner:t.owner,creation:t.creation,desc:t.desc,descId:t.descId,descOwner:t.descOwner,descTime:t.descTime,restrict:t.restrict||!1,announce:t.announce||!1,noFrequentlyForwarded:t.noFrequentlyForwarded||!1,ephemeralDuration:t.ephemeralDuration||0,participants:t.participants,support:u.default.supportsFeature(u.default.F.SUPPORT)&&!0===t.support}}));__LOG__(3)`Store:GroupMetadata Unexpected server response`})).catchType(s.ServerStatusCodeError,(function(t){if(t.status>=400)return{id:e,stale:!1}}))},t.sendQueryGroupInvite=function(e){var t;if(u.default.supportsFeature(u.default.F.MD_BACKEND)){if(!(t=(0,p.queryGroupInvite)(e).then((function(e){return(0,i.default)({status:200},e)}))))return r.reject(new Error("queryGroup: not supported when not build with MD_BACKEND"))}else t=f.default.groupInviteInfo(e).then((function(e){return 200!==e.status?r.reject(new s.ServerStatusCodeError(e.status)):e}));return t},t.groupMetadataFindFromPhone=function(e){if(u.default.supportsFeature(u.default.F.MD_BACKEND))return r.reject(new Error("groupMetadataFindFromPhone: not supported in MD_BACKEND mode"));return f.default.groupMetadataFindFromPhone(e)},t.updateSubject=_;var i=a(n(81109)),o=a(n(48629)),s=n(14650),u=a(n(22021)),l=n(88828),c=n(22350),d=n(29846),f=a(n(23306)),p=n(86804),h=n(38271);function _(e,t){(0,l.isString)(t)&&o.default.find(e).then((function(e){if(!e.name){var n={name:t};(0,d.updateLocal)(e.id,n).then((function(){e.set(n)}))}}))}},84541:(e,t,n)=>{"use strict";var r=n(95318);t.Z=function(){if(i.default.supportsFeature(i.default.F.MD_BACKEND)){return(0,o.isRegistered)()}return!!(0,a.getLoginTokens)().server};var a=n(71701),i=r(n(22021)),o=n(79583)},68374:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n;if(s.default.supportsFeature(s.default.F.MD_BACKEND)){t.some((function(e){return e instanceof d.default}))&&(__LOG__(4,void 0,new Error,!0)`contact model is invalid for editLabelAssociation`,SEND_LOGS("contact model is invalid for editLabelAssociation")),(n=E(e,t.map((function(e){return e instanceof f.default?{labelAssociationType:m.LabelAssociationType.Message,modelId:e.id.toString(),mutationIndexSegments:(0,h.constructMsgKeySegments)(e)}:{labelAssociationType:m.LabelAssociationType.Jid,modelId:e.id.toString(),mutationIndexSegments:[e.id.toString({legacy:!0})]}}))))||(n=r.reject(new Error("Should not reach here")))}else n=u.default.addOrRemoveLabels(e,t).then((function(e){if(200!==e.status)return r.reject(new o.ServerStatusCodeError(e.status))}));return n},t.editLabelAssociationMD=E;var i=a(n(319)),o=n(14650),s=a(n(22021)),u=a(n(23306)),l=n(50773),c=n(90066),d=a(n(17956)),f=a(n(16551)),p=n(27291),h=n(90950),_=n(4753),v=n(31230),m=n(8498),g=n(46042),y=n(29392);function E(e,t){return(0,v.canEditLabelAssociation)()?(0,l.lockForSync)(["label-association"],function(e,t){var n=(0,c.unixTimeMs)(),r=[];return e.forEach((function(e){var a=e.id,o=e.type;t.forEach((function(e){var t=e.labelAssociationType,s=e.mutationIndexSegments;r.push({timestamp:n,collection:p.CollectionName.Regular,operation:_.SyncdMutationSyncdOperation.SET,index:JSON.stringify([t===m.LabelAssociationType.Message?p.Actions.LabelMessage:p.Actions.LabelJid,a].concat((0,i.default)(s))),version:p.LABEL_ASSOCIATION_SYNC_VERSION,binarySyncAction:(0,g.encodeProto)(y.SyncActionValueSpec,{timestamp:n,labelAssociationAction:{labeled:"add"===o}}).readBuffer()})}))})),r}(e,t),(function(){var n=[],a=[];return e.forEach((function(e){var r=e.id,i=e.type;t.map((function(e){var t=e.modelId,o=e.labelAssociationType;"add"===i?n.push({labelId:r,associationId:t,type:o}):a.push([r,t,o])}))})),r.all([(0,m.getTable)().bulkCreateOrReplace(n).catch((function(){throw __LOG__(4,!0,new Error,!0)`bulkCreateOrReplace into label association table failed`,SEND_LOGS("bulkCreateOrReplace into label association table failed when saving label associations"),new Error("bulkCreateOrReplace into label association table failed")})),(0,m.getTable)().bulkRemove(a).catch((function(){throw __LOG__(4,!0,new Error,!0)`bulkRemove from label association table failed`,SEND_LOGS("bulkRemove from label association table failed while saving label associations"),new Error("bulkRemove form label association table failed")}))])})):r.reject(new Error("editLabelAssociation is not supported"))}},98593:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocal=s,t.updateLocalAndModel=function(e,t){return s(e,t).then((function(){var r=n(66312).default.get(e);r&&r.set(t)})).catch((function(e){return r.reject(new Error(`[messaging] updateLocalAndModel: failed with error ${e}`))}))};var i=a(n(22021)),o=n(322);function s(e,t){return i.default.supportsFeature(i.default.F.MD_BACKEND)?(0,o.getTable)().merge(e.toString(),t).catch((function(e){throw __LOG__(4,!0,new Error,!0)`updateLocal: failed to update in storage`,SEND_LOGS("message updateLocal failed"),e})):r.resolve()}},17251:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getHighestAck=function(){return f.apply(this,arguments)};var i=a(n(87757)),o=a(n(319)),s=a(n(48926)),u=a(n(22021)),l=a(n(34263)),c=a(n(44982)),d=l.default.ACK;function f(){return(f=(0,s.default)(i.default.mark((function e(t){var n,a,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.default.supportsFeature(u.default.F.MD_BACKEND)){e.next=15;break}return e.next=3,c.default.find(t.id);case 3:if(n=e.sent){e.next=7;break}return __LOG__(2)`getHighestAck: no orphan ack found for ${t.id}`,e.abrupt("return",null);case 7:if(a=null,s=null,0===n.playedRemaining&&0!==n.played.length?(s=d.PLAYED,a=n.played):0===n.readRemaining&&0!==n.read.length?(s=d.READ,a=n.read):0===n.deliveryRemaining&&0!==n.delivery.length&&(s=d.RECEIVED,a=n.delivery),null!=s&&null!=a){e.next=13;break}return __LOG__(2)`getHighestAck: orphan ack has 0 receipt for ${t.id}`,e.abrupt("return",null);case 13:return __LOG__(2)`getHighestAck: orphan ack ${s} for ${t.id}`,e.abrupt("return",{ack:s,t:Math.max.apply(Math,(0,o.default)(a.map((function(e){return e.t})))),to:t.to,from:t.from,deliveryPrivacyMode:n.deliveryPrivacyMode});case 15:return e.abrupt("return",r.reject(new Error("getHighestAck: not supported for non MD")));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},65105:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.msgFindQuery=function(e,t,n,r){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,o.msgFindQuery)(e,t).catch((function(e){throw __LOG__(4,!0,new Error,!0)`msgFindQuery: failed to find msg in storage`,SEND_LOGS("msgFindQueryMD failed"),e}));return s.default.msgFindQuery(e,t,n,r)},t.msgFindByIds=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,o.getMsgsByMsgKey)(e).catch((function(e){throw __LOG__(4,!0,new Error,!0)`msgFindByIds: failed to find msg in storage`,SEND_LOGS("msgFindByIdsMD failed"),e}));return r.resolve([])},t.queryVcard=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,o.queryVcard)(e).catch((function(e){throw __LOG__(4,!0,new Error,!0)`queryVcard: failed to find vCard in storage`,SEND_LOGS("queryVcardMD failed"),e}));return s.default.queryVcard(e)};var i=a(n(22021)),o=n(69449),s=a(n(23306))},49336:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryMsgInfo=function(e){var t,n=e.id;u.default.supportsFeature(u.default.F.MD_BACKEND)?(t=(0,c.queryMsgInfo)(e.id).catch((function(e){throw __LOG__(4,!0,new Error,!0)`sendQueryMsgInfo: failed to find msg info in storage`,SEND_LOGS("queryMsgInfo failed"),e})))||(t=r.reject(new Error("Should not reach here"))):t=l.default.queryMsgInfo(n).then((function(e){return e.status>=400?(__LOG__(2)`model:MsgInfo:findQuery error ${e.status}`,r.reject(new s.ServerStatusCodeError(e.status))):e}));return t.then((function(t){return(0,i.default)((0,i.default)({},t),{},{id:n,usePlayReceipt:e.type===o.default.MSG_TYPE.PTT||e.isViewOnce})}))};var i=a(n(81109)),o=a(n(34263)),s=n(14650),u=a(n(22021)),l=a(n(23306)),c=n(4779)},10813:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendDeliveryReceiptsAfterPresence=function(){a.default.supportsFeature(a.default.F.MD_BACKEND)&&(0,i.sendDeliveryReceiptsAfterPresence)()};var a=r(n(22021)),i=n(59993)},92793:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendMsgRecord=function(e){var t=r.resolve();if(o.default.supportsFeature(o.default.F.MD_BACKEND)){var a,d=function(e){var t={messageType:e.getWamMessageType(),messageMediaType:e.getWamMediaType(),mediaCaptionPresent:Boolean(e.caption),fastForwardEnabled:!0,messageIsFanout:!0,messageIsForward:Boolean(e.isForwarded)};void 0!==e.ephemeralDuration&&(t.ephemeralityDuration=e.ephemeralDuration);return new u.default.MessageSend(t)}(e);e.isForwarded&&(a=function(e){var t={messageType:e.getWamMessageType(),messageMediaType:e.getWamMediaType(),mediaCaptionPresent:Boolean(e.caption),fastForwardEnabled:!0,messageIsFanout:!0,isFrequentlyForwarded:Boolean(e.isFrequentlyForwarded)};void 0!==e.ephemeralDuration&&(t.ephemeralityDuration=e.ephemeralDuration);return new u.default.ForwardSend(t)}(e));var f=n(17259).encryptAndSendMsg;t=f(e).then((function(e){return c(d),a&&c(a),{t:parseInt(e.t,10),data:null}})).catch((function(t){return __LOG__(3,void 0,void 0,void 0,["messaging"])`sendMsgRecord: MD send failure, msg: ${e.id.toString()}`,(0,l.updateLocalAndModel)(e.id,{isSendFailure:!0}),r.reject(t)}))}else t=s.default.msgCreateRecord(e).then((function(e){return 200!==e.status?r.reject(new i.ServerStatusCodeError(e.status)):e}));return t};var i=n(14650),o=a(n(22021)),s=a(n(23306)),u=a(n(8643)),l=n(98593);function c(e){e.markMessageSendT(),e.commit()}},21821:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryOrder=function(e,t,n,a){var s;i.default.supportsFeature(i.default.F.MD_BACKEND)?(s=(0,u.default)(e,t,n,a))||(s=r.reject(new Error("md:queryOrder: should not reach here"))):s=o.default.queryOrder(e,t,n,a);return s},t.createOrder=function(e,t){var n;i.default.supportsFeature(i.default.F.MD_BACKEND)?(n=(0,s.default)(e,t))||(n=r.reject(new Error("Should not reach here"))):n=o.default.createOrder(e.user,t);return n};var i=a(n(22021)),o=a(n(23306)),s=a(n(14301)),u=a(n(41608))},67910:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.setPresenceAvailable=function(){u.default.supportsFeature(u.default.F.MD_BACKEND)?(0,f.default)("available"):l.default.sendPresenceAvailable().catchType(o.WebdDrop,(function(){})).catchType(s.ProtoVersionUndefined,(function(){}))},t.setPresenceUnavailable=function(){u.default.supportsFeature(u.default.F.MD_BACKEND)?(0,f.default)("unavailable"):l.default.sendPresenceUnavailable().catchType(o.WebdDrop,(function(){})).catchType(s.ProtoVersionUndefined,(function(){}))},t.subscribePresence=function(e){var t;if(u.default.supportsFeature(u.default.F.MD_BACKEND)){var n;n=e instanceof c.default?e:(0,d.createWid)(e),(t=r.resolve((0,p.default)(n)))||(t=r.reject(new Error("md:subscribePresence: not supported when not build with MD_BACKEND")))}else t=l.default.subscribePresence(e);return t};var o=n(14650),s=i(n(98569)),u=a(n(22021)),l=a(n(23306)),c=a(n(12717)),d=n(75793),f=a(n(64589)),p=a(n(89312))},86763:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryProduct=function(e,t,n,a){var i;if(o.default.supportsFeature(o.default.F.MD_BACKEND))(i=(0,p.default)(e,t,n,a))||(i=r.reject(new Error("Should not reach here")));else{var s=e.toString({legacy:!0});i=u.default.queryProduct(s,t,n,a)}return i},t.queryCatalog=function(e,t,n,a,i,s){var l;if(o.default.supportsFeature(o.default.F.MD_BACKEND))(l=(0,h.default)(e,t,n,a,i,s))||(l=r.reject(new Error("Should not reach here")));else{var c=e.toString({legacy:!0});l=u.default.queryProductCatalog(c,t,n,a,i)}return l},t.queryProductList=function(e,t,n,r){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,y.newJob)("queryProductList").waitUntilCompleted(e,t,n,r);var a=e.toString({legacy:!0});return u.default.queryProductList(a,t,n,r)},t.reportProduct=function(e,t,n){var a;o.default.supportsFeature(o.default.F.MD_BACKEND)?(a=(0,_.default)(e,t,n))||(a=r.reject(new Error("Should not reach here"))):a=u.default.reportBusinessCatalogProduct(e,t,n);return a},t.appealProduct=function(e,t){var n;o.default.supportsFeature(o.default.F.MD_BACKEND)?(n=(0,f.default)(e,t))||(n=r.reject(new Error("Should not reach here"))):n=u.default.appealCatalogProduct(e,t);return n},t.createCatalog=function(){var e;o.default.supportsFeature(o.default.F.MD_BACKEND)?(e=(0,v.default)())||(e=r.reject(new Error("Should not reach here"))):e=u.default.createBusinessCatalog();return e},t.addProduct=function(e,t,n){var a;o.default.supportsFeature(o.default.F.MD_BACKEND)?(a=(0,c.default)(e,t,n).then(b))||(a=r.reject(new Error("Should not reach here"))):a=u.default.addBusinessCatalogProduct(e,t,n).then(b);return a},t.editProduct=function(e,t,n){var a;o.default.supportsFeature(o.default.F.MD_BACKEND)?(a=(0,d.default)(e,t,n).then(b))||(a=r.reject(new Error("Should not reach here"))):a=u.default.editBusinessCatalogProduct(e,t,n).then(b);return a},t.deleteProducts=function(e){var t;o.default.supportsFeature(o.default.F.MD_BACKEND)?(t=(0,m.default)(e))||(t=r.reject(new Error("Should not reach here"))):t=u.default.deleteBusinessCatalogProduct(e);return t},t.parseDateValue=S,t.mapProductResponseToModel=b,t.mapMsgToProductModel=function(e){var t;e.businessOwnerJid&&(t=(0,l.createWid)(e.businessOwnerJid));return{catalogWid:t,id:e.productId||"",url:e.url,name:e.title,description:e.description,imageCdnUrl:e.mediaData.renderableUrl,reviewStatus:"",currency:e.currencyCode,priceAmount1000:e.priceAmount1000,salePriceAmount1000:e.salePriceAmount1000,retailerId:e.retailerId,productMsgMediaData:e.mediaData,imageCount:null!=e.productImageCount&&0!==e.productImageCount?e.productImageCount:1,fetchedFromServer:!1,t:e.t,isHidden:!1}},t.productVisibilitySet=function(e){var t;o.default.supportsFeature(o.default.F.MD_BACKEND)?(t=(0,g.default)(e))||(t=r.reject(new Error("Should not reach here"))):t=u.default.productVisibilitySet(e);return t};var i=a(n(30381)),o=a(n(22021)),s=n(97098),u=a(n(23306)),l=n(75793),c=a(n(84260)),d=a(n(65255)),f=a(n(47905)),p=a(n(68682)),h=a(n(64750)),_=a(n(81085)),v=a(n(50973)),m=a(n(17939)),g=a(n(61099)),y=n(92308);function E(e){return null==e?null:o.default.supportsFeature(o.default.F.MD_BACKEND)?parseInt(e,10):10*parseInt(e,10)}function S(e){return e?i.default.utc(e,i.default.ISO_8601).unix():null}function b(e,t){var n;return{catalogWid:t,id:e.id,isHidden:e.is_hidden||!1,url:e.url||"",name:e.name,description:e.description||"",availability:null!==(n=s.ProductAvailability.cast(e.availability))&&void 0!==n?n:s.ProductAvailability.UNKNOWN,additionalImageCdnUrl:e.additional_image_cdn_urls.map((function(e){return e[1].value})),additionalImageHashes:e.image_hashes_for_whatsapp.slice(1),imageCdnUrl:e.image_cdn_urls[1].value,imageHash:e.image_hashes_for_whatsapp[0],reviewStatus:e.capability_to_review_status.length?e.capability_to_review_status[0].value:"",currency:e.currency,priceAmount1000:E(e.price),salePriceAmount1000:E(e.sale_price),salePriceStartDate:S(e.sale_start_date),salePriceEndDate:S(e.sale_end_date),retailerId:e.retailer_id||"",productMsgMediaData:null,imageCount:e.additional_image_cdn_urls.length+1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1,canAppeal:e.whatsapp_product_can_appeal,checkmark:e.checkmark}}},95872:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requestDeletePicture=function(e){var t;l.default.supportsFeature(l.default.F.MD_BACKEND)?(t=(0,g.default)(e,null).then((function(){return{_duplicate:!1,status:200}})))||(t=r.reject(new Error("Should not reach here"))):t=f.default.deletePicture(e).then((function(e){return e.status&&200!==e.status?r.reject(new u.ServerStatusCodeError(e.status)):e}));return t.then((function(t){return t._duplicate?t:l.default.supportsFeature(l.default.F.MD_BACKEND)?(0,_.getProfilePicThumbTable)().remove(e.toString()).then((function(){(0,p.changeProfilePicThumb)(e,m.PROFILE_PIC_COMMAND.REMOVE)})).then((function(){return t})):t}))},t.sendSetPicture=function(e,t,n){var a;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){var i=y.default.parseDataURL(n).data,o=(0,h.decodeB64)(i);(a=(0,g.default)(e,o).then((function(){return(0,v.getProfilePicFull)(e).then((function(e){return{_duplicate:!1,tag:e.tag,eurl:e.eurl,token:"",status:200}}))})))||(a=r.reject(new Error("Should not reach here")))}else a=f.default.sendSetPicture(e,t,n).then((function(e){return 200!==e.status?r.reject(new u.ServerStatusCodeError(e.status)):e}));return a.then((function(t){return S(e).then((function(n){if(t.token=n,t._duplicate)return t;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){var r=e.toString();return(0,_.getProfilePicThumbTable)().createOrMerge(r,{id:r,tag:t.tag,eurl:t.eurl}).then((function(){(0,p.changeProfilePicThumb)(e,m.PROFILE_PIC_COMMAND.SET)})).then((function(){return t}))}return t}))}))},t.profilePicFindThumbFromPhone=function(e,t){return f.default.profilePicFindThumbFromPhone(e,t).then((function(t){return S(e).then((function(e){if(t.token=e,l.default.supportsFeature(l.default.F.MD_BACKEND)){var n=t.id.toString();return(0,_.getProfilePicThumbTable)().createOrMerge(n,{id:n,tag:t.tag,raw:t.raw}).then((function(){return t}))}return t}))}))},t.profilePicFind=E,t.profilePicResync=function(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return r.all(e.map((function(e){return E(e.id).then((function(t){return{id:e.id,eurl:t.eurl,tag:t.tag,token:t.token,previewEurl:t.previewEurl}})).catchType(u.ServerStatusCodeError,(function(t){switch(t.status){case 401:case 404:return{id:e.id,tag:"",token:""};default:return __LOG__(3)`ProfilePicThumb:resyncPictures error - ${t.status}, ${t.message}`,{id:e.id,token:""}}}))})));return f.default.resyncPictures(e).then((function(e){return Array.isArray(e)?r.all(e.map((function(e){return S(e.id).then((function(t){return(0,i.default)((0,i.default)({},e),{},{token:t})}))}))):"number"==typeof e.status&&e.status>=400?(423!==e.status&&429!==e.status&&__LOG__(3)`ProfilePicThumbStore:resyncPictures error ${e.status}`,r.reject(new u.ServerStatusCodeError(e.status))):(__LOG__(3)`ProfilePicThumbStore:resyncPictures unknown reply`,r.reject(new Error("ProfilePicThumbStore:resyncPictures unknown reply")))}))};var i=a(n(81109)),o=a(n(63038)),s=a(n(91080)),u=n(14650),l=a(n(22021)),c=n(80130),d=n(28367),f=a(n(23306)),p=n(3131),h=n(92827),_=n(43883),v=n(50843),m=n(56395),g=a(n(49991)),y=a(n(69267));function E(e){var t;l.default.supportsFeature(l.default.F.MD_BACKEND)?(t=r.all([(0,v.getProfilePicFull)(e),(0,v.getProfilePicPreview)(e)]).then((function(e){var t=e[0],n=e[1];return{tag:t.tag,eurl:t.eurl,previewEurl:n.eurl,token:""}})))||(t=r.reject(new Error("Should not reach here"))):t=f.default.profilePicFind(e).then((function(e){return null!=e.status&&200!==e.status?r.reject(new u.ServerStatusCodeError(e.status)):e}));var n=function(t){return(0,d.getStorage)().lock(["profile-pic-thumb"],(function(n){var r=(0,o.default)(n,1)[0];return r.get(e.toString()).then((function(n){return n?r.merge(e.toString(),t):r.create(t)}))}))},a={id:e.toString(),tag:void 0,eurl:void 0,raw:void 0,previewEurl:void 0};return(0,s.default)(t,"serverPromise").then((function(t){return S(e).then((function(e){return t.token=e,l.default.supportsFeature(l.default.F.MD_BACKEND)?(a.tag=t.tag,a.eurl=t.eurl,a.raw=null,a.previewEurl=t.previewEurl,n(a).then((function(){return t}))):t}))})).catchType(u.ServerStatusCodeError,(function(e){if(!l.default.supportsFeature(l.default.F.MD_BACKEND))throw e;return l.default.supportsFeature(l.default.F.MD_BACKEND)&&404===e.status||!l.default.supportsFeature(l.default.F.MD_BACKEND)&&401===e.status?(a.tag="",a.raw=null):(a.tag=null,a.eurl=null,a.previewEurl=null),n(a).then((function(){throw e}))}))}function S(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return r.resolve("");for(var t=String(e),n=new ArrayBuffer(2*t.length),a=new Uint16Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return r.resolve().then((function(){return(0,c.getSecurityToken)(n)}))}},94584:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=`+${e.toString()}`;if(!i.default.supportsFeature(i.default.F.MD_BACKEND))return o.default.queryExist(n).then((function(e){return 200===e.status?{wid:e.jid,biz:e.biz||!1}:null}));(t=(0,s.queryExist)(n))||(t=r.reject(new Error("Should not reach queryExists MD")));return t};var i=a(n(22021)),o=a(n(23306)),s=n(48800)},30566:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendQueryMediaConn=function(e){return(0,s.default)({delay:function(e){var t=e.taskDuration,n=1e3*f();return Math.max(n-t,0)},signal:e},(function(t){var n;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(n=(0,d.queryMediaConn)(e)))return r.reject(new Error("sendQueryMediaConn: not supported when not build with MD_BACKEND"))}else n=c.default.queryMediaConnections(e);return n.then((function(e){var t=e.ttl,n=e.authTTL;return null==n?(n=1e3*t,t=3e5):(n*=1e3,t*=1e3),(0,i.default)((0,i.default)({},e),{},{authTTL:n,ttl:t})})).catchType(u.ServerStatusCodeError,(function(e){if(e.status>=500)return t(e);throw e}))}))};var i=a(n(81109)),o=n(98591),s=a(n(96696)),u=n(14650),l=a(n(22021)),c=a(n(23306)),d=n(4359),f=(0,o.createTimer)({algo:{type:"fibonacci",first:0,second:1},max:9e5,jitter:.25})},87843:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryServerProps=function(){var e;i.default.supportsFeature(i.default.F.MD_BACKEND)?(e=(0,u.default)().then((function(e){return e.success?e.result:r.reject(new s.ServerStatusCodeError(e.errorCode,e.errorText))})))||(e=r.reject(new Error("Should not reach here"))):e=o.default.queryServerProps();return e};var i=a(n(22021)),o=a(n(23306)),s=n(14650),u=a(n(39085))},2111:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(a.default.supportsFeature(a.default.F.MD_BACKEND))return o.default.requestMediaReupload(e).then((function(e){var t=e.result,n=e.directPath;return{status:u(t),directPath:n,isMD:!0}}));return i.default.requestMediaReupload(e).then((function(e){return{isMD:!1,status:e.status,url:e.url,mediaKey:e.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp,encFilehash:e.encFilehash,directPath:e.directPath}}))};var a=r(n(22021)),i=r(n(23306)),o=r(n(58688)),s=n(26594);function u(e){if(null!=e)switch(e){case s.MediaRetryNotificationResultType.SUCCESS:return 200;case s.MediaRetryNotificationResultType.NOT_FOUND:case s.MediaRetryNotificationResultType.DECRYPTION_ERROR:return 404;case s.MediaRetryNotificationResultType.GENERAL_ERROR:return 500}return 500}},9942:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return r.resolve();return s.default.setArchiveSetting(e).then((function(e){if(e.status&&200!==e.status)throw new i.ServerStatusCodeError(e.status)}))};var i=n(14650),o=a(n(22021)),s=a(n(23306))},15913:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);t.Z=function(e,t){if(e.length,v.default.supportsFeature(v.default.F.MD_BACKEND))return function(e,t){var n=new Uint8Array((0,_.decodeB64)(e)),r=(0,s.unixTime)();return g(t,(function(e){return(0,m.default)(n,r).uncancellable().then((function(n){if(n&&n.errorCode){if(n.errorCode>=500)throw new c.ServerStatusCodeError(n.errorCode,n.errorText);e(t)}e(void 0)}))}))}(e,t);return function(e,t){var n=new FormData;n.append("t",String((0,s.unixTime)())),n.append("v",l.default.VERSION_BASE);var r=(0,f.getLoginTokens)().server;r&&n.append("tok",r);return n.append("buffer",e),g(t,(function(e){return(0,d.default)(l.default.WAM_URL,{method:"POST",body:n}).then((function(n){if(200===n.status)e(void 0);else{if(n.status>=500)throw new c.ServerStatusCodeError(n.status);e(t)}}))}))}(e,t)};var i=n(53615),o=n(80835),s=n(90066),u=a(n(35340)),l=a(n(34263)),c=n(14650),d=a(n(88430)),f=n(71701),p=a(n(67890)),h=r(n(59502)),_=n(92827),v=a(n(22021)),m=a(n(77841));function g(e,t){return(0,o.promiseLoop)((function(n,r,a){var o=(0,i.delayMs)(h.expBackoff(a,12e4,1e3,.1));return p.default.waitIfOffline({signal:(new u.default).signal}).then((function(){return t(n)})).catch((function(t){return a>1?(__LOG__(3)`wam:sendLogs failure error: ${String(t)}`,n(e)):(String(t),o)}))}))}},83591:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getStatus=function(e){var t;u.default.supportsFeature(u.default.F.MD_BACKEND)?(t=(0,c.default)(e).then((function(e){return e.error?(__LOG__(3)`getStatus: failed ${e.error.errorCode} : ${e.error.errorText}`,{id:e.id,stale:!0,status:""}):{id:e.id,status:null!=e.status?e.status:""}})))||(t=r.reject(new Error("getAbout: invalid when build with MD_BACKEND"))):t=l.default.statusFind(e).then((function(t){return{id:e,status:null!=t.status?t.status:""}})).catchType(s.WebdDrop,(function(){return{id:e,stale:!0,status:""}}));return t},t.setMyStatus=function(e){var t;u.default.supportsFeature(u.default.F.MD_BACKEND)?(t=(0,d.newJob)("setAbout").waitUntilCompleted(e))||(t=r.reject(new Error("setStatus: invalid when build with MD_BACKEND"))):t=l.default.sendSetStatus(e);return t},t.queryStatusAll=function(){var e=r.resolve();e=u.default.supportsFeature(u.default.F.MD_BACKEND)?(0,f.queryStatusAllMD)():l.default.statusQuery();return e},t.queryStatusUpdate=function(e,t,n){var a=r.resolve();if(u.default.supportsFeature(u.default.F.MD_BACKEND))return r.resolve([]);a=l.default.statusQuery(e,t,n,"after");return a},t.sendReadStatus=function(){return h.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(14650),u=a(n(22021)),l=a(n(23306)),c=a(n(40651)),d=n(92308),f=n(58684),p=n(54663);function h(){return(h=(0,o.default)(i.default.mark((function e(t,n){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.default.supportsFeature(u.default.F.MD_BACKEND)){e.next=8;break}return e.next=3,(0,p.markStatusRead)(t);case 3:if(null!=(r=!0)){e.next=6;break}throw new Error("sendReadStatus: shouldn't reach here (md_backend was disabled)!");case 6:e.next=12;break;case 8:return e.next=10,l.default.sendStatusSeen(t,n);case 10:a=e.sent,r=200===a.status;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},69635:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sendCallOfferBridge=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?(t=(0,s.default)(e,c.TYPE.OFFER))||(t=r.reject(new Error("Should not reach here"))):t=e.payload[2].find((function(e){return"enc"===e[0]}))?o.default.sendCallOffer(e):o.default.sendGroupCallOffer(e);return t},t.sendCallSignalingMsgBridge=function(e,t){var n;i.default.supportsFeature(i.default.F.MD_BACKEND)?(n=(0,u.default)(e))||(n=r.reject(new Error("Should not reach here"))):n=o.default.sendCallSignalingMsg(e,t);return n},t.sendQueryCallBridge=function(e,t){var n;i.default.supportsFeature(i.default.F.MD_BACKEND)?(n=r.resolve({status:200}))||(n=r.reject(new Error("Should not reach here"))):n=o.default.queryCall(e,t);return n},t.sendCallEndBridge=function(e,t){var n;i.default.supportsFeature(i.default.F.MD_BACKEND)?(n=r.resolve({}))||(n=r.reject(new Error("Should not reach here"))):n=o.default.sendCallEnd(e,t);return n},t.sendEncRekeyBridge=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?(t=(0,s.default)(e,c.TYPE.ENC_REKEY))||(t=r.reject(new Error("Should not reach here"))):t=o.default.sendCallSignalingMsg(e);return t},t.prepareRetryReceiptBridge=function(e){var t;i.default.supportsFeature(i.default.F.MD_BACKEND)?(t=(0,l.default)(e))||(t=r.reject(new Error("Should not reach here"))):t=r.resolve(e);return t};var i=a(n(22021)),o=a(n(23306)),s=a(n(34876)),u=a(n(63657)),l=a(n(61982)),c=n(66279)},42754:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift().blocklist.map((function(e){return{id:e}})),a=n(76088).default;i.default.supportsFeature(i.default.F.MD_BACKEND)?(0,o.getBlocklistTable)().clear().then((function(){return r.all(t.map((function(e){var t=e.id;return(0,o.getBlocklistTable)().create({id:t.toString()})})))})).then((function(){return a.set(t)})):a.set(t)};var i=a(n(22021)),o=n(43883)},4685:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift(),a=n(26671).default,i=n(66312).default;if(Array.isArray(t)){var M=[],I=[],k=[],P=[];t.forEach((function(e){if("c.us"===e.id)I.push(e);else{var t=!!a.get(e.id),n=["delete","clear","ephemeral","archive","unarchive","star","unstar","spam","modify_tag","pin","modify"].includes(e.type);n?t&&n?I.push(e):__LOG__(2)`Model:chat:handle received junk chat record: ${JSON.stringify(e)}`:M.push(e)}}));var R=M.find((function(e){return C.default.isPSA(e.id)}));null!=R&&(R.name=b.default.t(1975));var D=n(76408).default;return I.forEach((function(e){var t=e.type;if("c.us"===e.id.toString()){switch(a.disableSortListener(),t){case"clear":__LOG__(2)`Model:chat:handle:clear:all before:${String(e.before)} kind:${String(e.kind)}`,a.forEach((function(t){"number"==typeof e.before?t.deleteMsgsOlderThan(e.before,e.star,e.kind):t.deleteMsgs(e.star,e.kind)}));break;case"delete":__LOG__(2)`Model:chat:handle:delete:all`,a.toArray().forEach((function(e){e.isGroup?e.deleteMsgs(!0):k.push(e)}));break;case"archive":__LOG__(2)`Model:chat:handle:archive:all`,a.forEach((function(e){P.push({id:e.id,archive:!0,pin:void 0})}));break;case"unarchive":__LOG__(2)`Model:chat:handle:unarchive:all`,a.forEach((function(e){P.push({id:e.id,archive:!1})}));break;case"unstar":__LOG__(2)`Model:chat:handle:unstar:all`,D.delete(),a.forEach((function(e){e.unstarAll()}));break;default:__LOG__(3)`Model:chat:handle unknown ${JSON.stringify(e)}`}a.enableSortListener()}else{var n=a.get(e.id);if(!n)return;switch(t){case"ephemeral":if(null!=e.t){var r=n.getLastReceivedNonExpiredMsg(e.t);r&&(0,T.setLastReceivedKey)(n.id,r.id).then((function(){n.lastReceivedKey=r.id}))}break;case"clear":case"star":case"unstar":if(e.keys){for(var o=e.keys.length,s="star"===t,u=[],d=[],f=[],p=!1,h=0;h<o;h++){var _=void 0,v=void 0,m=void 0,g=void 0,y=void 0,E=e.keys[h];if(Array.isArray(E)){var S=(0,l.default)(E,3);_=S[0],v=S[1],m=S[2],g=new w.default({fromMe:v,remote:e.id,id:_,participant:m}),(y=i.get(g))?"clear"===t?y.delete():(y.star=s,f.push(y)):s&&(p=!0)}else!c.default.isObject(E)||"star"!==t&&"unstar"!==t||(g=E.id,(y=i.get(E.id))?(y.star=s,f.push(y)):d.push(E));u.push(g&&g.toString())}"star"!==t&&"unstar"!==t||D.process(s,d,f,p),__LOG__(2)`model:Chat:handle:messages:${[t,e.id,u.join(),e.modifyTag].join()}`}else"clear"===t?("number"==typeof e.before?n.deleteMsgsOlderThan(e.before,e.star,e.kind):n.deleteMsgs(e.star,e.kind),__LOG__(2)`model:Chat:handle cleared chat:${[e.id,e.before,e.modifyTag,e.kind].join()}`):"unstar"===t&&(n.unstarAll(),__LOG__(2)`model:Chat:handle unstarred chat: ${e.id}`);isNaN(e.modifyTag)||P.push({id:e.id,modifyTag:e.modifyTag});break;case"delete":k.push(n),__LOG__(2)`model:Chat:handle deleted chat for ${String(e.id)}`;break;case"archive":P.push({id:e.id,archive:!0,pin:void 0});break;case"unarchive":P.push({id:e.id,archive:!1});break;case"spam":P.push({id:e.id,notSpam:e.notSpam});break;case"modify_tag":P.push({id:e.id,modifyTag:e.modifyTag});break;case"pin":P.push({id:e.id,pin:e.pin});break;case"modify":P.push({id:e.id,changeNumberOldJid:e.changeNumberOldJid,changeNumberNewJid:e.changeNumberNewJid})}}})),(m.default.supportsFeature(m.default.F.MD_BACKEND)?(0,A.getStorage)().lock(["chat"],(function(e){var t=(0,l.default)(e,1)[0];return t.bulkCreateOrMerge(M.map((function(e){return(0,u.default)((0,u.default)({},e),{},{id:e.id.toString()})}))).then((function(){return r.all(P.map((function(e){var n=e.id,r=(0,s.default)(e,["id"]);t.merge(n.toString(),r)})))})).then((function(){return t.bulkRemove(k.map((function(e){return e.id.toString()})))}))})).catch((function(){__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("ChatHandler: bulk handle error")})):r.resolve()).then((function(){a.add(M,{merge:!0}),P.forEach((function(e){var t=e.id,n=(0,s.default)(e,["id"]),r=a.get(t);r&&r.set(n)})),k.forEach((function(e){return e.delete()}))}))}if("leave"===t.cmd)t.gids.forEach((function(e){var t=a.get(e);t&&(0,_.localExitGroup)(t)}));else{if("preempt"===t.cmd){var N=r.resolve();m.default.supportsFeature(m.default.F.MD_BACKEND)&&(N=(0,O.getTable)().bulkCreateOrMerge(t.response.map((function(e){return(0,u.default)((0,u.default)({},e),{},{id:e.id.toString(),muteExpiration:0})}))));var L=(0,g.getBridge)();return N.then((function(){return L.sendAndReceive("chat_collection","add",{things:t.response,options:{merge:!0}})})).then((function(){f.default.platform!==f.PLATFORMS.IPHONE&&f.default.platform!==f.PLATFORMS.SMBI||(c.default.isEmpty(t.response)?L.fireAndForget("msg_collection","trigger",{name:p.default.COLLECTION_HAS_SYNCED}):setTimeout((function(){L.fireAndForget("msg_collection","trigger",{name:p.default.COLLECTION_HAS_SYNCED})}),2500)),L.fireAndForget("chat_collection","trigger",{name:p.default.COLLECTION_HAS_SYNCED,args:{count:t.response.length,binarySize:t.binarySize}})}))}if("action"===t.cmd){var x=t.id,U=t.data;if("create"!==U[0]&&"introduce"!==U[0]){if(U.length<3)return void __LOG__(3)`model:chat: incorrect length of payload data for action ${JSON.stringify(t)}`;var F,G=t.data[0],B="unknown"===t.data[1]?null:t.data[1];return F=G===E.GROUP_ACTIONS.RESTRICT||G===E.GROUP_ACTIONS.ANNOUNCE||G===E.GROUP_ACTIONS.NO_FORWARD?{action:G,value:t.data[2]}:G===E.GROUP_ACTIONS.EPHEMERAL?{action:G,duration:t.data[2]}:(0,u.default)({action:G},t.data[2]),(0,S.handleGroupActionWap)({chatId:t.id,author:B},F)}var j=U[1],Y=U[2],K=[].concat((0,o.default)(c.default.map(Y.admins,(function(e){return{id:e,isAdmin:!0}}))),(0,o.default)(c.default.map(Y.superadmins||[],(function(e){return{id:e,isAdmin:!0,isSuperAdmin:!0}}))),(0,o.default)(c.default.map(Y.regulars,(function(e){return{id:e,isAdmin:!1}}))));y.default.add({id:x,creation:Y.creation,owner:j,participants:K,stale:!1,desc:Y.desc,descId:Y.descId,descTime:Y.descTime,descOwner:Y.descOwner,restrict:!!Y.restrict,announce:!!Y.announce},{merge:!0}),h.default.add({id:x,name:Y.subject},{merge:!0});var W=a.get(x);if(!W)return;var V=W.msgs.last();if(!V)return;if("gp2"===V.type&&"add"===V.subtype){var H=(0,v.getMaybeMeUser)();y.default.trigger(`group_participant_change_${H.toString()}`,x),C.default.equals(V.recipients[0],H)&&d.default.alertNewMsg(V)}}else __LOG__(3)`model:chat: unknown payload: ${JSON.stringify(t)}`}};var o=i(n(319)),s=i(n(6479)),u=i(n(81109)),l=i(n(63038)),c=i(n(96486)),d=i(n(34541)),f=a(n(93743)),p=i(n(34263)),h=i(n(48629)),_=n(22383),v=n(71701),m=i(n(22021)),g=n(97223),y=i(n(13361)),E=n(91438),S=n(61827),b=i(n(89115)),T=n(42810),w=i(n(5315)),A=n(28367),C=i(n(12717)),O=n(8985)},57935:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift();switch(t.type){case"picture":(0,i.changeProfilePicThumb)(t.jid,t.tag);break;default:(0,a.handle)([t])}return r.resolve()};var a=n(91323),i=n(3131)},30892:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=e.shift();a.id="1";var i=n(23306).default,h=a.protoVersion,_=a.binVersion,v=a.features;if(h){d.default.setVersion(h);var m=d.default.setFeatures(v);t=!!m.KEY_PARTICIPANT,i.setVersion(h,_,v&&v.FLAGS)}if(a.initial){d.default.setPlatform(a.platform),(0,c.setLogoutToken)(a.browserToken),a.hasOwnProperty("is24h")&&u.default.setIs24Hour(a.is24h);var g=a.ref,y=a.serverToken,E=a.clientToken,S=a.connected;g&&S&&y&&(0,c.setRefTok)(g,y),(0,c.setLoginTokens)({client:E,server:y});var b=a.secret?i.setSharedSecret(a.secret):r.resolve();return r.all([(0,f.requireContactCollection)(),b]).then((function(e){var t=(0,o.default)(e,1)[0];if("true"!==a.isResponse&&p.save(),a.wid){var n=a.wid;(0,c.setMe)(n),l.default.trigger("me_ready"),a.pushname&&(l.default.pushname=a.pushname,(0,c.setPushname)(a.pushname)),t.gadd(n)}l.default.set(a)}))}return l.default.connected&&t&&(__LOG__(2)`models:Conn:participantChange:to:${String(d.default.supportsFeature(d.default.F.KEY_PARTICIPANT))}`,s.default.hardRefresh()),l.default.set(a),r.resolve()};var o=i(n(63038)),s=i(n(21144)),u=i(n(79140)),l=i(n(93743)),c=n(71701),d=i(n(22021)),f=n(3646),p=a(n(80130))},91142:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift();if(Array.isArray(t)){var n=e.shift();!function(e,t){var n=t&&"remove"===t.missing?(0,l.getContactsToRemove)(e):[];(0,c.mungePSAContact)(e),o.default.add(e,{merge:!0}),n.forEach((function(e){e.unset("name"),e.unset("shortName")})),t&&t.checksum&&(o.default.setChecksum(t.checksum),__LOG__(2)`handle:Contact update checksum ${t.checksum}`);__LOG__(2)`handle:Contact updated ${e.map((function(e){return e.id})).join()}`}(t,n)}else"preempt"===t.cmd?function(e){(0,c.mungePSAContact)(e.response),o.default.add(e.response,{merge:!0}),e.checksum&&(o.default.setChecksum(e.checksum),__LOG__(2)`Store:Contact:handle update checksum ${e.checksum}`);o.default.trigger(i.default.COLLECTION_HAS_SYNCED,{count:e.response.length,binarySize:e.binarySize})}(t):"frequent"===t.type?function(e){var t;delete e.type,t=u.default.supportsFeature(u.default.F.MD_BACKEND)?(0,s.setFrequent)(e):r.resolve();t.then((function(){o.default.updateFrequentContacts(e)}))}(t):"sidelist"===t.type?function(e){var t=e.notification,n=e.action,r=e.hash,a=o.default.resolveWidsFromHash(r);if(!a)return;"business"===t&&"profile"===n&&a.forEach((function(e){var t=o.default.get(e);if(t)t.businessProfile&&t.businessProfile.markStale();else{var n=o.default.getUserCount(),a=o.default.contactHashLength();__LOG__(4,void 0,new Error,!0)`Hash: ${r} Users: ${n}, Hashes: ${a}`,SEND_LOGS("Stale wid in contact hash index")}}))}(t):__LOG__(3)`handle:Contact unknown: ${JSON.stringify(t)}`};var i=a(n(34263)),o=a(n(48629)),s=n(1794),u=a(n(22021)),l=n(10550),c=n(30713)},65010:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!Array.isArray(e))return __LOG__(4,void 0,new Error,!0)`ws2: Invalid message, not an array`,void SEND_LOGS("ws2:invalid-msg");var t=e.shift();switch(t){case"Blocklist":return void(0,a.default)(e);case"Contact":return void(0,u.default)(e);case"Props":case"ServerProps":return void n(63056).default.handle(e);case"Location":case"LiveLocation":return void n(90481).default.handle(e);case"Chat":return void(0,i.default)(e);case"Msg":return void(0,l.default)(e);case"Stream":return void(0,f.default)(e);case"Conn":return void(0,s.default)(e);case"Cmd":return void(0,o.default)(e);case"Presence":return void(0,d.default)(e);case"MsgInfo":return void(0,c.default)(e);case"BusinessProfile":return void n(93250).default.handle(e);case"GroupMetadata":return void n(13361).default.handle(e);case"Label":return void n(6705).default.handle(e);case"QuickReply":return void n(40113).default.handle(e);case"Call":return void n(68950).default.handle(e);case"Mute":return void n(30608).default.handle(e);case"Status":return void n(43454).default.handle(e);case"StatusV3":return void n(66005).default.handle(e);default:__LOG__(4,void 0,new Error,!0)`ws2: Invalid type received: ${t}`,SEND_LOGS("ws2: Invalid type received")}};var a=r(n(42754)),i=r(n(4685)),o=r(n(57935)),s=r(n(30892)),u=r(n(91142)),l=r(n(68079)),c=r(n(14748)),d=r(n(49482)),f=r(n(78409))},68079:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,u.default)(e,1)[0],a=n(66312).default;function i(){return y.apply(this,arguments)}function y(){return(y=(0,s.default)(o.default.mark((function e(n,r){var i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=m.default.isStatusV3(t.broadcast)?new v.default({from:t.from,to:t.broadcast,id:r,selfDir:t.self||"out"}):new v.default({from:t.from,to:n,id:r,participant:t.participant,selfDir:t.self||"out"}),!(s=a.get(i))){e.next=7;break}return e.next=5,(0,c.updateMsgAck)(s,t.broadcast,{from:t.from,to:n,ack:t.ack,t:t.t});case 5:e.next=9;break;case 7:__LOG__(2)`Msg:out of order ack`,a.preAck[i]=t;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if("ack"===t.cmd){var E=[t.to];if(m.default.isBroadcast(t.to)&&t.ack===p.default.ACK.SENT){var S=_.default.get(t.to);S&&Array.prototype.push.apply(E,l.default.map(S.participants.toArray(),"id"))}var b=E.map((function(e){return i(e,t.id)}));return r.all(b)}if("acks"===t.cmd){var T=t.id.map((function(e){return i(t.to,e)}));return r.all(T)}if(t.msg){if(!(t.chat instanceof m.default))return r.resolve();var w="update"===t.meta.add;return m.default.isStatusV3(t.chat)&&!n(66005).default.handleUpdate(t.msg,t.meta.checksum,w)?r.resolve():(t.msg.recvFresh=!0,t.msg.isNewMsg=!0,a.processMultipleMessages(t.chat,[t.msg],{add:"after",update:w,isHistory:!1}).catchType(h.LogoutDrop,(function(){})).catch((function(e){__LOG__(4,void 0,new Error,!0)`Msg: ${String(t.msg.id)} chat: ${String(t.chat)} Error: ${e.name}, message: ${e.message}, stack: ${e.stack}`,SEND_LOGS("msg_handler: error storing/processing single message")})))}if(t.msgs){var A=t.msgs.length;if(!A)return r.resolve();var C=null;if(!(t.chat instanceof m.default))return r.resolve();var O=t.meta;O.isHistory=!0,"unread"===O.add&&(O.firstUnreadKey=new v.default({fromMe:O.unreadFromMe,remote:t.chat,id:O.unreadId,participant:O.unreadParticipant}),C=new d.default);for(var M=0;M<A;M++){t.msgs[M].invis=!0}return f.default.platform!==f.PLATFORMS.IPHONE&&f.default.platform!==f.PLATFORMS.SMBI||a.trigger(p.default.COLLECTION_HAS_SYNCED),a.trigger("handle:msg_history",{count:t.msgs.length,binarySize:t.binarySize}),a.processMultipleMessages(t.chat,t.msgs,O,C).catchType(h.LogoutDrop,(function(){})).catch((function(e){__LOG__(4,void 0,new Error,!0)`Msgs count: ${A} Chat: ${String(t.chat)} Error: ${e.name}, message: ${e.message}, stack: ${e.stack}`,SEND_LOGS("msg_handler: error storing/processing multiple messages")}))}if(t.recent){var I=t.meta,k=t.binarySize;return delete t.recent,delete t.meta,delete t.binarySize,a.trigger(p.default.COLLECTION_HAS_SYNCED,{count:Object.keys(t).length,binarySize:k}),I.isHistory=!0,r.all(Object.keys(t).map((function(e){var n;try{n=(0,g.createWid)(e)}catch(e){return r.resolve()}var i=t[e];i.invis=!0;var o="last"===I.add&&I.resume?new d.default:null;a.processMultipleMessages(n,[i],I,o).catchType(h.LogoutDrop,(function(){})).catch((function(){__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("msg_handler: error storing recent messages")}))})))}return __LOG__(2)`************** Msg else clause. something strange is going on`,r.resolve()};var o=i(n(87757)),s=i(n(48926)),u=i(n(63038)),l=i(n(96486)),c=n(79594),d=i(n(23169)),f=a(n(93743)),p=i(n(34263)),h=n(14650),_=i(n(13361)),v=i(n(5315)),m=i(n(12717)),g=n(75793)},14748:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift(),n=t.from,r=t.to,i=t.ack,o=t.participant,s=t.t;switch(t.cmd){case"ack":a.default.updateInfo(t.id,n,r,i,o,s);break;case"acks":t.id.forEach((function(e){a.default.updateInfo(e,n,r,i,o,s)}))}};var a=r(n(44982))},49482:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.shift();return(0,a.default)(t)};var a=r(n(6333))},78409:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e[0]){case"asleep":break;case"killsw":a.default.killServiceWorker();break;case"update":case"update_desktop":break;default:__LOG__(3)`Stream:handle unknown cmd ${e[0]}`}};var a=r(n(6497))},91183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVDeviceStatusCode=t.AVDeviceStatusContext=t.AVDeviceType=void 0;t.AVDeviceType={AudioInput:0,AudioOutput:1,Video:2,NotIdentified:3};t.AVDeviceStatusContext={DeviceSetup:0,DeviceMidstream:1,DeviceSelection:2,DeviceStop:3,DeviceOther:4};t.AVDeviceStatusCode={DeviceSuccess:0,FailureNonDevice:1,VideoDeviceNotFound:2,VideoDeviceUnsupportedCapability:3,VideoDeviceUnusable:4,VideoDeviceInUse:5,VideoDeviceUnauthorized:6,VideoDeviceTimeout:7,VideoDeviceOther:127,AudioCaptureDeviceNotFound:128,AudioPlaybackDeviceNotFound:129,AudioDeviceNotFound:130,AudioCaptureDeviceUnusable:131,AudioPlaybackDeviceUnusable:132,AudioDeviceUnusable:133,AudioCaptureDeviceInUse:134,AudioPlaybackDeviceInUse:135,AudioDeviceInUse:136,AudioCaptureDeviceUnauthorized:137,AudioPlaybackDeviceUnauthorized:138,AudioDeviceUnauthorized:139,AudioCaptureDeviceTimeout:140,AudioPlaybackDeviceTimeout:141,AudioDeviceTimeout:142,AudioCaptureDeviceOther:253,AudioPlaybackDeviceOther:254,AudioDeviceOther:255}},17093:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(91183);function a(e){return{uid:e.uid,name:e.name,deviceType:Number(e.deviceType),isConnected:Boolean(e.connected),isSelected:Boolean(e.isSelected),isSystemDefault:Boolean(e.isDefault)}}function i(e,t){return null==e?void 0:e.find((function(e){return e.isConnected&&e.isSystemDefault&&e.deviceType===t}))}function o(e,t){return null==e?void 0:e.find((function(e){return e.isConnected&&e.isSelected&&e.deviceType===t}))}var s={parseDeviceInfo:a,getAvailableDevices:function(e,t){var n;return null!==(n=null==e?void 0:e.filter((function(e){return e.deviceType===t&&e.isConnected})))&&void 0!==n?n:[]},getSanitizedDevices:function(e){var t=null==e?void 0:e.map((function(e){return a(e)})),n=null==t?void 0:t.filter((function(e){return e.deviceType!==r.AVDeviceType.NotIdentified&&e.isConnected}));return null!=n?n:[]},deviceInfoComparator:function(e,t){return e.deviceType!==t.deviceType?e.deviceType-t.deviceType:e.isSystemDefault||t.isSystemDefault?e.isSystemDefault?-1:1:e.isConnected===t.isConnected?0:e.isConnected?-1:1},getSystemDefaultDevice:i,getSelectedDevice:o,getSelectedDeviceIdOrDefault:function(e,t){var n,r;return null!==(n=null===(r=o(e,t))||void 0===r?void 0:r.uid)&&void 0!==n?n:""},getSystemDefaultCamera:function(e){return i(e,r.AVDeviceType.Video)},getSystemDefaultMicrophone:function(e){return i(e,r.AVDeviceType.AudioInput)},getSystemDefaultSpeaker:function(e){return i(e,r.AVDeviceType.AudioOutput)},getDiff:function(e,t){return{added:t.filter((function(t){return!e.some((function(e){return e.uid===t.uid}))})),removed:e.filter((function(e){return!t.some((function(t){return t.uid===e.uid}))}))}},DEFAULT_DEVICE_ID:""};t.default=s},30819:(e,t,n)=>{"use strict";var r,a=n(20862),i=n(95318),o=i(n(34575)),s=i(n(93913)),u=i(n(67294)),l=n(91183),c=i(n(79075)),d=i(n(68950)),f=i(n(34541)),p=i(n(5693)),h=i(n(89115)),_=a(n(92631)),v=i(n(63805)),m=n(14423),g=window.Native.ipcRenderer,y=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"init",value:function(){r=p.default.require("AVDeviceManager"),g.on(m.MAIN_IPC_EVENTS.AV_EVENT,this._refreshDeviceList),g.on(m.MAIN_IPC_EVENTS.AV_DEVICE_CHANGE_TOAST,this._deviceChangeToast),this._refreshDeviceList()}},{key:"cleanup",value:function(){__LOG__(2,void 0,void 0,void 0,["voip"])`av manager log: cleanup`,g.removeListener(m.MAIN_IPC_EVENTS.AV_DEVICE_CHANGE_TOAST,this._deviceChangeToast),g.removeListener(m.MAIN_IPC_EVENTS.AV_EVENT,this._refreshDeviceList),r=null}},{key:"_refreshDeviceList",value:function(){var e;null===(e=r)||void 0===e||e.getDeviceListAsync().then((function(e){c.default.refreshDeviceList(e)}))}},{key:"_deviceChangeToast",value:function(e,t){if((v.default.isVoiceCallEnabled()||v.default.isVideoCallEnabled()||v.default.isGroupCallEnabled())&&d.default.activeCall){var n;switch(t.deviceType){case l.AVDeviceType.AudioInput:n=h.default.t(1582);break;case l.AVDeviceType.AudioOutput:n=h.default.t(1583);break;case l.AVDeviceType.Video:n=h.default.t(1580)}var r=h.default.t(256,{deviceName:t.name,deviceType:n});f.default.openToast(u.default.createElement(_.default,{msg:r,id:(0,_.genId)()}))}}}]),e}();e.exports=new y},97223:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setBridge=function(e){i=e},t.getBridge=function(){return(0,a.default)(i,"_bridge")},t.isConnectedToPage=function(){return true};var a=r(n(91080)),i=null},76890:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBridge=function(){return new r.DynamicRouter};var r=n(64056)},68831:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);t.Z=void 0;var i=n(71701),o=a(n(60305)),s=a(n(53510)),u=a(n(43906)),l={whoAmI:function(){var e=(0,i.getMaybeMeUser)().toString();return r.resolve(e)},logImpl:function(e,t,n,a,i){return u.default.logImpl(e,t,n,a,i),r.resolve()},initFromStorage:function(){return s.default.invoke("initFromStorage",[])},setLogoutState:function(e){return o.default.isLogoutInProgress=e,s.default.invoke("setLogoutState",[e])},deleteDbEncKeyCache:function(){return s.default.invoke("deleteDbEncKeyCache",[])},initDatabaseEncnKey:function(e){return s.default.invoke("initDatabaseEncnKey",[e])},generateFinalDbEncryptionAndFtsKey:function(e){return s.default.invoke("generateFinalDbEncryptionAndFtsKey",[e])}};t.Z=l},66664:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new MessageChannel,n=t.port1,r=t.port2;s.default.respondTo(n),a.default.init(),o.default.setConnectionManager(a.default),a.default.connectVia(n),e.postMessage((0,i.buildHandshakePayload)(r),[r])};var a=r(n(22206)),i=n(90459),o=r(n(53510)),s=r(n(18628))},85485:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(66664)),i=new(r(n(29009)).default);(0,a.default)(i);var o=i;t.default=o},22206:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(91080)),u=a(n(41143)),l=new(function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"init",value:function(){var e=this;return this._promise||(this._promise=new r((function(t){e._resolver=t})).timeout(5e3)),this._promise}},{key:"isConnected",value:function(){return null!=this._port}},{key:"getPort",value:function(){return this._port}},{key:"waitForConnection",value:function(){return(0,s.default)(this._promise,"ConnectionManager Initialization Promise")}},{key:"connectVia",value:function(e){if(this.isConnected())throw new Error("Connection already established");(0,u.default)(this._resolver,"ConnectionManager not initialized"),this._port=e,this._resolver()}}]),e}());t.default=l},60305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={isLogoutInProgress:!1}},53510:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(91080)),u=a(n(41143)),l=n(40256),c=n(96094),d=n(37812),f=new(function(){function e(){var t=this;(0,i.default)(this,e),this._pending=new Map,this._onResponseReceipt=function(e){var n=(0,d.unwrapResponsePayload)(e.data);if(null!=n){var r=n.invocationId,a=n.result;if(t._pending.has(r))(0,(0,s.default)(t._pending.get(r),"_this._pending.get(invocationId)").resolve)(a),t._pending.delete(r)}}}return(0,o.default)(e,[{key:"setConnectionManager",value:function(e){var t=this;this._conn=e,e.waitForConnection().then((function(){var n=(0,s.default)(e.getPort(),"Port obtained from ConnectionManager after connection");n.addEventListener("message",t._onResponseReceipt),n.start()}))}},{key:"invoke",value:function(e,t){var n=this;return(0,u.default)(this._conn,"Connection has not been inited"),this._conn.waitForConnection().then((function(){(0,u.default)(n._conn,"Connection has not been inited");var a=(0,s.default)(n._conn.getPort(),"Port obtained from ConnectionManager after connection"),i=(0,c.genInvocationId)();return a.postMessage((0,l.buildInvocationPayload)({invocationId:i,method:e,args:t})),new r((function(e,t){n._pending.set(i,{resolve:e,reject:t})}))}))}}]),e}());t.default=f},18628:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(319)),o=a(n(34575)),s=a(n(93913)),u=n(40256),l=r(n(31785)),c=n(37812),d=new(function(){function e(){(0,o.default)(this,e),this._onMessage=function(e,t){var n=t.data,r=(0,u.unwrapInvocationPayload)(n);if(null!=r){var a=r.method,o=r.args,s=r.invocationId,d=l.get();d[a].apply(d,(0,i.default)(o)).then((function(t){e.postMessage((0,c.buildResponsePayload)(s,t))}))}}}return(0,s.default)(e,[{key:"respondTo",value:function(e){var t=this;e.addEventListener("message",(function(n){return t._onMessage(e,n)})),e.start()}}]),e}());t.default=d},96094:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genInvocationId=function(){return n++},t.extractInvocationId=function(e){if(null!=e&&"number"==typeof e)return e};var n=1},31785:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){a=e},t.get=s,t.sendLogs=function(){throw new Error("Not yet implemented")},t.log=void 0;var a,i=r(n(91080)),o=r(n(51551));function s(){return(0,i.default)(a,"InvocationInterface was not inited")}var u=(0,r(n(81619)).default)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return function(i){for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];var d,f=(0,o.default)(i,l,!t);return n&&(d={name:n.name,stack:n.stack}),s().logImpl(e,f,d,r,a),f}}),(function(e,t,n,r,a){return n||a?null:String(e)+String(Boolean(t))+String(Boolean(r))}));t.log=u},90459:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildHandshakePayload=function(e){return{__command:i.HANDSHAKE_COMMAND,__port:e}},t.extractPortFromHandshakePayload=function(e){if(null!=e&&null!=e.__command&&e.__command===i.HANDSHAKE_COMMAND){if(null!=e.__port)return(0,a.default)(e.__port instanceof MessagePort,"Malformed connection payload"),e.__port}};var a=r(n(41143)),i=n(72490)},40256:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildInvocationPayload=function(e){var t=e.invocationId,n=e.method,r=e.args;return{__id:t,__command:o.INVOCATION_COMMAND,__method:n,__args:r}},t.unwrapInvocationPayload=function(e){if(null!=e&&e.__command===o.INVOCATION_COMMAND){(0,a.default)(e.__id,"Invocation ID missing");var t=(0,i.extractInvocationId)(e.__id);(0,a.default)(null!=t&&e.__method&&"string"==typeof e.__method&&e.__id&&e.__args&&Array.isArray(e.__args),"Malformed invocation message");var n=e,r=n.__method,s=n.__args;return{method:r,args:s,invocationId:t}}};var a=r(n(41143)),i=n(96094),o=n(72490)},37812:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildResponsePayload=function(e,t){return{__id:e,__command:o.RESPONSE_COMMAND,__result:t}},t.unwrapResponsePayload=function(e){if(null!=e&&e.__command===o.RESPONSE_COMMAND){(0,a.default)(null!=e.__id,"Invocation ID missing");var t=(0,i.extractInvocationId)(e.__id);return(0,a.default)(null!=t&&e.hasOwnProperty("__result"),"Malformed response message"),{result:e.__result,invocationId:t}}};var a=r(n(41143)),i=n(96094),o=n(72490)},72490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESPONSE_COMMAND=t.INVOCATION_COMMAND=t.HANDSHAKE_COMMAND=void 0;t.HANDSHAKE_COMMAND="@@handshake";t.INVOCATION_COMMAND="@@invoke";t.RESPONSE_COMMAND="@@response"},53807:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(43269)),o=a(n(87757)),s=a(n(48926)),u=a(n(81109)),l=a(n(34575)),c=a(n(93913)),d=a(n(91080)),f=a(n(39863)),p=function(){function e(t,n){(0,l.default)(this,e),this._concurrency=t,this._groupLimits=n,this._runningTasksByGroup=new Map,this._enqueuedTasksByGroup=new Map}var t;return(0,c.default)(e,[{key:"enqueue",value:function(e,t){var n,a,i,l=new r((function(e,t){n=e,a=t}));return this._doEnqueue((0,u.default)((0,u.default)({},t),{},{run:(i=(0,s.default)(o.default.mark((function t(){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:r=t.sent,n(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),function(){return i.apply(this,arguments)})})),this._runTasks(),l}},{key:"_doEnqueue",value:function(e){this._getOrCreatePriorityQueueForGroup(e.group).push(e)}},{key:"_doDequeue",value:function(){return this._getHighestPriorityAmongGroups()}},{key:"_runTasks",value:function(){for(;this._getRunningTasksCount()<this._concurrency;){var e=this._doDequeue();if(null==e)break;this._runTask(e)}}},{key:"_runTask",value:(t=(0,s.default)(o.default.mark((function e(t){var n,r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.run,r=t.signal,a=t.group,i=this._getRunningTasksForGroup(a),!(null==r?void 0:r.aborted)){e.next=5;break}return setTimeout(this._runTasks.bind(this),0),e.abrupt("return");case 5:return i.add(t),e.prev=6,e.next=9,n();case 9:return e.prev=9,i.delete(t),this._runTasks(),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[6,,9,13]])}))),function(){return t.apply(this,arguments)})},{key:"_getHighestPriorityAmongGroups",value:function(){var e,t,n,r=(0,i.default)(this._enqueuedTasksByGroup.values());try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.peek();o&&(this._isFullOfGroup(o.group)||(!t||t.priority<o.priority)&&(t=a))}}catch(e){r.e(e)}finally{r.f()}return null===(e=t)||void 0===e?void 0:e.pull()}},{key:"_getRunningTasksCount",value:function(){var e,t=0,n=(0,i.default)(this._runningTasksByGroup.values());try{for(n.s();!(e=n.n()).done;){t+=e.value.size}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getEnqueuedTasksCount",value:function(){var e,t=0,n=(0,i.default)(this._enqueuedTasksByGroup.values());try{for(n.s();!(e=n.n()).done;){t+=e.value.size()}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"_getRunningTasksForGroup",value:function(e){if(!this._runningTasksByGroup.has(e)){var t=new Set;return this._runningTasksByGroup.set(e,t),t}return(0,d.default)(this._runningTasksByGroup.get(e),"this._runningTasksByGroup.get(group)")}},{key:"_isFullOfGroup",value:function(e){var t=this._runningTasksByGroup.get(e);return null!=t&&t.size>=this._getLimitForGroup(e)}},{key:"_getOrCreatePriorityQueueForGroup",value:function(e){if(!this._enqueuedTasksByGroup.has(e)){var t=new f.default((function(e){return-e.priority}));this._enqueuedTasksByGroup.set(e,t)}return(0,d.default)(this._enqueuedTasksByGroup.get(e),"this._enqueuedTasksByGroup.get(group)")}},{key:"_getLimitForGroup",value:function(e){var t=this._groupLimits[e];return null==t?1/0:t}}]),e}();t.default=p},77423:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=r(n(2977)),o=r(n(86499)),s=n(1697).Z;self.URL=self.URL||self.webkitURL,self.AudioContext=self.AudioContext||self.webkitAudioContext,self.requestFileSystem=self.requestFileSystem||self.webkitRequestFileSystem;var u="WEB";u=process.mas?"MACSTORE":"DARWIN";var l=(0,a.default)({REQUIRED_BROWSER_APIS:{getRandomValues:!(!self.crypto||!self.crypto.getRandomValues),subtleCrypto:!(!self.crypto||!self.crypto.subtle&&!self.crypto.webkitSubtle),localstorage:!!i.default,sessionstorage:!!o.default,url:!!self.URL,websocket:!!self.WebSocket,worker:!!self.Worker},BROWSER_TYPE:{CHROME:"chrome",CHROMIUM:"chromium",FIREFOX:"firefox",SAFARI:"safari",IE:"ie",OPERA:"opera",EDGE:"edge"},BROWSER_LINK:{CHROME:'<a href="https://www.google.com/chrome">Google Chrome</a>',FIREFOX:'<a href="http://www.firefox.com">Mozilla Firefox</a>',OPERA:'<a href="http://www.opera.com">Opera</a>'},OS_TYPE:{WINDOWS:"windows",MAC:"mac os",CHROMEOS:"chromium os"},LATEST_HASH:"c2f27916312364b6d71159b8c3c0d45bad1df9b1",VERSION:{p:Number("2"),s:Number("2126"),t:Number("11")},VERSION_BASE:"2.2126.11",VERSION_STR:"2.2126.11",DYN_ORIGIN:"https://web.whatsapp.com/",PP_URL:"https://web.whatsapp.com/pp",LOGOUT_URL:"https://web.whatsapp.com/logout",WAM_URL:"https://web.whatsapp.com/wam",GROUP_DEFAULT_ICON:n(91672),USER_DEFAULT_ICON:n(10795),NOTIFICATION_TONE_PATH:n(37211),OUTGOING_MESSAGE_TONE_PATH:n(92474),PTT_MIDDLE_TONE_PATH:n(39181),PTT_END_TONE_PATH:n(91720),DRAG_TYPE_FILE:"Files",KEY_LOCAL_TAKEOVER_OK:"local-takeover-ok",SCROLL_FUDGE:100,PERMISSION_ALLOWED:"granted",PERMISSION_DEFAULT:"default",PERMISSION_DENIED:"denied",VOIP_INCOMING_CALL_TONE:n(41371),VOIP_END_CALL_TONE:n(54630),QR_EDGE:264,NUX:{SAFARI_LIMITED_SUPPORT:"safari_limited_support",REVOKE_LEGAL_DISCLAIMER_NUX:"revoke_legal_disclaimer_nux",MESSENGER_ROOM_DIALOG_NEW:"messenger_room_dialog_new",MESSENGER_ROOM_DIALOG_RETURNING:"messenger_room_dialog_returning",MESSENGER_ROOM_DIALOG_FROM_CHATLIST:"messenger_room_dialog_from_chatlist",MESSENGER_ROOM_DIALOG_FROM_ATTACH_DROPDOWN:"messenger_room_dialog_from_attach_dropdown",EPHEMERAL:"ephemeral",EPHEMERAL_VIEW_ONCE:"ephemeral_view_once",EPHEMERAL_VIEW_ONCE_RECEIVER:"ephemeral_view_once_receiver",ARCHIVE:"archive"},TEXTSIZE_CLASS_MAP:[{scale:-1,classname:"textsize-small"},{scale:-2,classname:"textsize-xsmall"},{scale:-3,classname:"textsize-xxsmall"},{scale:1,classname:"textsize-large"},{scale:2,classname:"textsize-xlarge"},{scale:3,classname:"textsize-xxlarge"}],LIST_HEIGHT_TEXTSIZE_MAP:[{scale:-1,height:64},{scale:-2,height:58},{scale:-3,height:52},{scale:1,height:72},{scale:2,height:72},{scale:3,height:72}],MSG_FOCUS_SCROLL_ANIMATION_DURATION:400,WAM_PLATFORM:u,FLB_PLATFORM:"darwin",APP_ID:"346387865799334",BUILD_ID:"0",DESKTOP_BUNDLE_ID:"WhatsApp"},s);t.default=l},1697:(e,t)=>{"use strict";t.Z=void 0;var n={CAPABILITY_URL:"https://web.whatsapp.com/browsers.html",STATUS_URL:"https://web.whatsapp.com/status.json",CHECK_UPDATE_URL:"https://web.whatsapp.com/check-update",NOTICE_CONTENT_ENDPOINT_URL:"https://www.whatsapp.com/user-notice/v1/",COOKIE_DOMAIN:".web.whatsapp.com",TICKET_URL:"https://web.whatsapp.com/web-contact-us",GROUP_INVITE_URL:"https://web.whatsapp.com/invite/icon/",GROUP_V4_INVITE_ICON_URL:"https://web.whatsapp.com/invite/v4/icon/",LARGE_EMOJI_URL:"https://web.whatsapp.com/img/",PP_TOK:"/pp",PP_REF:"/pp",UPLOAD_TO_CLB:1,FLAVOR_TAGS:!1,WEB_SOCKET_URL:"wss://web.whatsapp.com/ws",CHATD_WEB_SOCKET_URL:"wss://web.whatsapp.com/ws/chat",LOG_SIZE_ELECTRON:14999,LOG_SIZE_WEB:4999,MEMORY_METRIC_INTERVAL:9e5,MARK_TRANSLATIONS:!1,WAM_ENV:"PROD",WRITE_TO_CONSOLE:!1};t.Z=n},34263:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=r(n(77423)),o=r(n(62015)),s=(0,a.default)((0,a.default)({},o.default),i.default);t.default=s},24694:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={KEYBOARD_EVENT_KEY_VALUE:{UNIDENTIFIED:"Unidentified",ALT:"Alt",ALT_GRAPH:"AltGraph",CAPS_LOCK:"CapsLock",CONTROL:"Control",FN:"Fn",FN_LOCK:"FnLock",HYPER:"Hyper",META:"Meta",NUM_LOCK:"NumLock",SCROLL_LOCK:"ScrollLock",SHIFT:"Shift",SUPER:"Super",SYMBOL:"Symbol",SYMBOL_LOCK:"SymbolLock",OS:"OS",ENTER:"Enter",TAB:"Tab",SPACE:" ",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",LEFT:"Left",RIGHT:"Right",UP:"Up",DOWN:"Down",END:"End",HOME:"Home",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",BACKSPACE:"Backspace",CLEAR:"Clear",COPY:"Copy",CR_SEL:"CrSel",CRSEL:"Crsel",CUT:"Cut",DELETE:"Delete",ERASE_EOF:"EraseEof",EX_SEL:"ExSel",EXSEL:"Exsel",INSERT:"Insert",PASTE:"Paste",REDO:"Redo",UNDO:"Undo"}};t.default=n},62015:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={ARCHIVE_NUX_MAX_VIEWS:3,IMG_THUMB_MAX_EDGE:100,DOC_THUMB_MAX_EDGE:480,VIDEO_THUMB_MAX_EDGE:480,MAX_PORTRAIT_MEDIA_CAPTION_LENGTH:500,MAX_FILES:30,MMS_THUMBNAIL_UPLOAD_TIMEOUT:1e4,FREQUENTLY_FORWARDED_SENTINEL:127,MAX_SMB_LABEL_COUNT:20,DEFAULT_SMB__NEW_LABEL_COLOR:"#d6d7d7",FB_CLB_TOKEN:"1063127757113399|745146ffa34413f9dbb5469f5370b7af",FB_CLB_CHECK_URL:"https://crashlogs.whatsapp.net/wa_fls_upload_check",FB_CLB_URL:"https://crashlogs.whatsapp.net/wa_clb_data",FAKE_USER_AGENT:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36",G_MAPS_DIR_URL:"https://maps.google.com/maps/dir",G_MAPS_IMG_URL:"https://maps.googleapis.com/maps/api/staticmap",G_MAPS_SEARCH_URL:"https://maps.google.com/maps/search",G_MAPS_URL:"https://maps.google.com/maps",G_MAPS_DARK_MODE_STYLE:"style=element:geometry%7Ccolor:0x212121&style=element:labels.icon%7Cvisibility:off&style=element:labels.text.fill%7Ccolor:0x757575&style=element:labels.text.stroke%7Ccolor:0x212121&style=feature:administrative%7Celement:geometry%7Ccolor:0x757575&style=feature:administrative.country%7Celement:labels.text.fill%7Ccolor:0x9e9e9e&style=feature:administrative.land_parcel%7Cvisibility:off&style=feature:administrative.locality%7Celement:labels.text.fill%7Ccolor:0xbdbdbd&style=feature:poi%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:poi.park%7Celement:geometry%7Ccolor:0x181818&style=feature:poi.park%7Celement:labels.text.fill%7Ccolor:0x616161&style=feature:poi.park%7Celement:labels.text.stroke%7Ccolor:0x1b1b1b&style=feature:road%7Celement:geometry.fill%7Ccolor:0x2c2c2c&style=feature:road%7Celement:labels.text.fill%7Ccolor:0x8a8a8a&style=feature:road.arterial%7Celement:geometry%7Ccolor:0x373737&style=feature:road.highway%7Celement:geometry%7Ccolor:0x3c3c3c&style=feature:road.highway.controlled_access%7Celement:geometry%7Ccolor:0x4e4e4e&style=feature:road.local%7Celement:labels.text.fill%7Ccolor:0x616161&style=feature:transit%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:water%7Celement:geometry%7Ccolor:0x000000&style=feature:water%7Celement:labels.text.fill%7Ccolor:0x3d3d3d",FB_LEGAL_TERMS_URL:"https://www.facebook.com/legal/terms",FB_COMMERCE_POLICY_URL:"https://www.facebook.com/policies/commerce",WA_COMMERCE_POLICY_URL:"https://www.whatsapp.com/policies/commerce-policy",NOTIFICATION_PROMPT_DELAY:1e4,PTT_PLAYBACK_DELAY:400,NOTIFICATION_TIMEOUT:5e3,CALL_NOTIFICATION_TIMEOUT:45e3,IDLE_TIMEOUT:6e4,IDLE_TIMEOUT_WAIT:78e4,SEARCH_ZOOM:17,SEND_UNAVAILABLE_WAIT:15e3,SEND_PAUSED_WAIT:2500,CLEAR_CHAT_DIRTY_WAIT:2500,LOG_UPLOAD_INTERVAL:36e5,REVOKE_WINDOW:4096,ALBUM_DIFF_INTERVAL:600,MAX_TXT_MSG_SIZE:65536,INITIAL_PAGE_SIZE:768,FREQUENTLY_FORWARDED_INITIAL_PAGE_SIZE:308,SUBSEQUENT_PAGE_SIZE:3072,OVERFLOWING_PAGE_THRESHOLD:.1,GROUP_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:100,BUSINESS_DESCRIPTION_INFO_PANEL_TRUNC_LENGTH:200,GROUP_DESCRIPTION_LENGTH:0,INFO_DRAWER_MAX_ROWS:10,INFO_DRAWER_MAX_ROWS_IN_COLLAPSED_LIST:11,NUM_COLORS:20,FTS_MIN_CHARS:2,FTS_TTL:6e4,FTS_TYPING_DELAY:300,FTS_NUM_RESULTS:30,HSM_ASPECT_RATIO:1.91,TEMPLATE_DOC_MIME_TYPES:1,TEMPLATE_URL_START:64,TEMPLATE_URL_END:32,KEY_STORAGE_TEST:"storage_test",KEY_CLIENT_TOKEN:"WAToken1",KEY_SERVER_TOKEN:"WAToken2",KEY_SECRET:"WASecretKey",KEY_SECRET_BUNDLE:"WASecretBundle",KEY_SECURITY_NOTIFICATIONS:"WASecurityNotifications",KEY_BROWSER_ID:"WABrowserId",KEY_GEOCODER_LOCATION:"WAGeocoderLocation",KEY_GROUP_ASSIGNED_COLOR:"WAGroupAssignedColor",KEY_GMAPS_OVER_LIMIT:"WAGmapsOverLimit",KEY_GLOBAL_MUTE_SOUNDS:"WAGlobalSounds",KEY_OUTGOING_MESSAGE_SOUND:"WAOutgoingMessageSound",KEY_GLOBAL_MUTE_NOTIFICATIONS:"WAGlobalNotifications",KEY_GLOBAL_MUTE_IN_APP_NOTIFICATIONS:"WAGlobalInAppNotifications",KEY_GLOBAL_MUTE_PREVIEWS:"WAGlobalPreviews",KEY_GLOBAL_COLLAPSE_MUTED:"WAGlobalCollapseMuted",KEY_NOTIFICATION_SOUND:"WANotificationSound",KEY_AUTO_DOWNLOAD_PHOTOS:"WAAutoDownloadPhotos",KEY_AUTO_DOWNLOAD_AUDIO:"WAAutoDownloadAudio",KEY_AUTO_DOWNLOAD_VIDEOS:"WAAutoDownloadVideos",KEY_AUTO_DOWNLOAD_DOCUMENTS:"WAAutoDownloadDocuments",KEY_LANG:"WALangPref",KEY_LAST_ACTIVE_EMOJI_TAB:"WALastActiveEmojiTab",KEY_LAST_SELECTED_COMPOSE_BOX_PANEL:"WALastActiveComposeBoxPanel",KEY_LAST_CHAT_MUTE_DURATION:"WALastChatMuteDuration",KEY_UNKNOWN_ID:"WAUnknownID",KEY_VERSION:"WAVersion",KEY_LOAD_RETRY_GENERATION:"WALoadRetryGeneration",KEY_WHATSAPP_MUTEX:"whatsapp-mutex",KEY_LAST_WID:"last-wid",KEY_LAST_WID_MD:"last-wid-md",KEY_SAVE_TO_CAMERA_ROLL:"save_to_camera_roll",KEY_SMB_LABEL_COLOR_PALETTE:"smb_label_color_palette",KEY_LAST_PUSHNAME:"last-pushname",KEY_PROTO_VERSION:"WAProtoVersion",KEY_PTT_PLAYBACK_RATE:"WAPttPlaybackRate",KEY_LOGOUT_DIRTY_BIT:"post-logout",KEY_LOG_PREEMPT_CLEAN_UP:"WALogPreemptiveCleanUp",KEY_PRESERVED_USER_KEYS:"preserved_user_keys",KEY_EMOJI_VARIANT_COLLECTION:"emoji_variant_collection",KEY_RECENT_EMOJI_COLLECTION:"recent_emoji_collection",KEY_CHAT_PREFERENCE_COLLECTION:"chat_preference",LAST_STATUS_USAGE:"last-status-usage",KEY_MD_OPTED_IN:"md-opted-in",KEY_MOBILE_PLATFORM:"mobile-platform",KEY_REMEMBER_ME:"remember-me",KEY_LOGOUT_TOKEN:"logout-token",KEY_OLD_LOGOUT_CREDS:"old-logout-cred",KEY_NO_TAKEOVER:"no-takeover",KEY_WHATSAPP_LS_VERSION:"ver",KEY_WAM_BUFFER:"wam-buffer",KEY_WAM_INFO:"wam-info",KEY_TIME_SPENT_EVENT:"WaTimeSpentEvent",KEY_VIDEO_VOLUME:"video-volume",KEY_VIDEO_MUTE:"video-mute",KEY_CONTACT_CHECKSUM:"contact-checksum",KEY_USER_PRIVACY_SETTINGS:"user-privacy-settings",KEY_IS_SMB:"is-smb",KEY_COMPOSE_CONTENTS_PREFIX:"compose-contents_",KEY_THEME:"theme",KEY_SYSTEM_THEME_MODE:"system-theme-mode",KEY_ABPROPS:"abprops",KEY_HISTORY_SYNC_EARLIEST_DATE:"history-sync-earliest-date",KEY_SYNCD_DISABLED_DUE_TO_FATAL:"syncd_disabled_due_to_fatal",KEY_SYNCD_FIRST_CLEAR_OR_DELETE:"syncd-first-clear-or-delete",KEY_CONTACT_SYNC_REFRESH:"contact-sync-refresh-seconds",COOKIE_REF:"ref",COOKIE_TOK:"tok",PAGE_SIZE:50,MSG_PRELOAD_THRESHOLD:20,MEDIA_QUERY_LIMIT:50,MIN_PIC_SIDE:192,MAX_PIC_SIDE:640,PROF_PIC_THUMB_SIDE:96,MAX_CAPTION_LENGTH:1024,MAX_CART_MESSAGE_LENGTH:1024,MAX_PRODUCT_SUBTITLE_LENGTH:70,MAX_REPLY_PRODUCT_TITLE_LENGTH:40,MAX_REPLY_PRODUCT_DESC_LENGTH:95,ALBUM_MIN_SIZE:4,ALBUM_MAX_SIZE:102,ALBUM_MAX_HEIGHT:168,ALBUM_PADDING:3,PRESENCE_COMPOSING_TIMEOUT:25e3,PRESENCE_RESEND_WAIT:1e4,MIMETYPE_OGG:"audio/ogg",IMAGE_MIMES:"image/*",WEBP_MIMES:"image/webp",VIDEO_MIMES:"video/mp4,video/3gpp,video/quicktime",KEY_LOG_CURSOR:"debugCursor",MAX_STATUS_LENGTH:139,MAX_PUSHNAME_LENGTH:25,DISP_TYPE:{CONVERSATION:"CONVERSATION",MSG_INFO:"MSG_INFO",STARRED_MSGS:"STARRED_MSGS",GALLERY:"GALLERY",REPLY_STAGE:"REPLY_STAGE",QUOTED_MSG:"QUOTED_MSG",CONTACT_CARD:"CONTACT_CARD",ORDER:"ORDER"},SEND_LOGS_MAX_EMAIL_LENGTH:320,SEND_LOGS_MAX_SUBJECT_LENGTH:50,SEND_LOGS_MIN_DESC_LENGTH:10,SEND_LOGS_MAX_DESC_LENGTH:500,SEND_LOGS_MAX_SCREENSHOTS:3,SEND_LOGS_MAX_SCREENSHOT_SIZE:10485760,CONTACT_US_MIN_DESC_LENGTH:10,CONTACT_US_MAX_DESC_LENGTH:5e3,ACK:{MD_DOWNGRADE:-7,INACTIVE:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4,PEER:5},ACK_STRING:{SENDER:"sender",DELIVERY:"delivery",READ:"read",PLAYED:"played",INACTIVE:"inactive"},RETRY:{VALIDATE_OLD_SESSION:2,MAX_RETRY:5},KEY_BUNDLE_TYPE:"",EDIT_ATTR:{REVOKE:7},DEVICE:{PRIMARY_DEVICE:0,PRIMARY_VERSION:0},BATTERY_LOW_THRESHOLD_1:15,BATTERY_LOW_THRESHOLD_2:5,BATTERY_DELAY:1e4,SOCKET_STATE:{OPENING:"OPENING",PAIRING:"PAIRING",UNPAIRED:"UNPAIRED",UNPAIRED_IDLE:"UNPAIRED_IDLE",CONNECTED:"CONNECTED",TIMEOUT:"TIMEOUT",CONFLICT:"CONFLICT",UNLAUNCHED:"UNLAUNCHED",PROXYBLOCK:"PROXYBLOCK",TOS_BLOCK:"TOS_BLOCK",SMB_TOS_BLOCK:"SMB_TOS_BLOCK",DEPRECATED_VERSION:"DEPRECATED_VERSION"},SOCKET_STREAM:{DISCONNECTED:"DISCONNECTED",SYNCING:"SYNCING",RESUMING:"RESUMING",CONNECTED:"CONNECTED"},COLLECTION_HAS_SYNCED:"collection_has_synced",NEW_MSG_SENT:"new_msg_sent",DIAGNOSTIC_DELAY:18e3,ONE_BY_ONE_TRANS_GIF:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",DEFAULT_CHAT_WALLPAPER:"default_chat_wallpaper",L10N_PRIORITY:{SAVED:6,PHONE:5,PREVIOUS:4,URL:3,BROWSER:2,DEFAULT:1},RENDER_CURSOR:{RECENT_AT_TOP:"recent_at_top",RECENT_AT_BOTTOM:"recent_at_bottom",CONVERSATION:"conversation",GROUP_CONVERSATION:"group_conversation",STARRED_DRAWER:"starred_drawer"},SECURITY_LINK:"https://www.whatsapp.com/security/",SMB_TOS_LEARN_MORE_LINK:"https://www.whatsapp.com/legal/small-business-terms/",SERVER_WID:"server@c.us",PSA_WID:"0@c.us",STATUS_WID:"status@broadcast",OFFICIAL_BIZ_WID:"16505361212@c.us",VISIBILITY:{ABOVE:"above",VISIBLE:"visible",BELOW:"below"},VIDEO_STREAM_URL:"undefinedstream/video",SPELL_CHECK_SKIP_WORDS:{en_us:new Set(["ain","couldn","didn","doesn","hadn","hasn","mightn","mustn","needn","oughtn","shan","shouldn","wasn","weren","wouldn","Ain","Couldn","Didn","Doesn","Hadn","Hasn","Mightn","Mustn","Needn","Oughtn","Shan","Shouldn","Wasn","Weren","Wouldn"]),en_gb:new Set(["ain","couldn","didn","doesn","hadn","hasn","mightn","mustn","needn","oughtn","shan","shouldn","wasn","weren","wouldn","Ain","Couldn","Didn","Doesn","Hadn","Hasn","Mightn","Mustn","Needn","Oughtn","Shan","Shouldn","Wasn","Weren","Wouldn"]),en:new Set(["ain","couldn","didn","doesn","hadn","hasn","mightn","mustn","needn","oughtn","shan","shouldn","wasn","weren","wouldn","Ain","Couldn","Didn","Doesn","Hadn","Hasn","Mightn","Mustn","Needn","Oughtn","Shan","Shouldn","Wasn","Weren","Wouldn"])},GROUP_INVITE_LINK_URL:"https://chat.whatsapp.com/",GROUP_SETTING_TYPE:{ANNOUNCEMENT:"announcement",RESTRICT:"restrict",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",EPHEMERAL:"ephemeral"},GROUP_SETTING_TO_METADATA:{announcement:"announce",restrict:"restrict",no_frequently_forwarded:"noFrequentlyForwarded",ephemeral:"ephemeralDuration"},L10N:{DEFAULT:"en"},EMOJI:{BUCKET_SIZE:25,CATEGORIES:{SMILEYS_PEOPLE:"SMILEYS_PEOPLE",ANIMALS_NATURE:"ANIMALS_NATURE",FOOD_DRINK:"FOOD_DRINK",ACTIVITY:"ACTIVITY",TRAVEL_PLACES:"TRAVEL_PLACES",OBJECTS:"OBJECTS",SYMBOLS:"SYMBOLS",FLAGS:"FLAGS"},CATEGORY_MAPPING:{"Smileys & People":"SMILEYS_PEOPLE","Animals & Nature":"ANIMALS_NATURE","Food & Drink":"FOOD_DRINK",Activity:"ACTIVITY","Travel & Places":"TRAVEL_PLACES",Objects:"OBJECTS",Symbols:"SYMBOLS",Flags:"FLAGS"},ORDERED_CATEGORY_IDS:["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS"],EMOJI_TYPE:{APPLE:"APPLE",WHATSAPP:"WHATSAPP"},LARGE_EMOJI_BASE_PATH:"undefinedimg",LARGE_EMOJI_ELECTRON_BASE_PATH:"img",EMOJI_SPRITES_BASE_PATH:"undefinedimg",EMOJI_SPRITES_ELECTRON_BASE_PATH:"img"},SYSTEM_MESSAGE_TYPES:["notification","notification_template","group_notification","gp2","broadcast_notification","e2e_notification","call_log","protocol"],MSG_TYPE:{NOTIFICATION:"notification",NOTIFICATION_TEMPLATE:"notification_template",GROUP_NOTIFICATION:"group_notification",GP2:"gp2",BROADCAST_NOTIFICATION:"broadcast_notification",E2E_NOTIFICATION:"e2e_notification",CALL_LOG:"call_log",PROTOCOL:"protocol",CHAT:"chat",LOCATION:"location",PAYMENT:"payment",VCARD:"vcard",CIPHERTEXT:"ciphertext",MULTI_VCARD:"multi_vcard",REVOKED:"revoked",OVERSIZED:"oversized",GROUPS_V4_INVITE:"groups_v4_invite",HSM:"hsm",TEMPLATE_BUTTON_REPLY:"template_button_reply",DEBUG:"debug",IMAGE:"image",VIDEO:"video",AUDIO:"audio",PTT:"ptt",STICKER:"sticker",DOCUMENT:"document",PRODUCT:"product",ORDER:"order",LIST:"list",INTERACTIVE:"interactive",LIST_RESPONSE:"list_response",BUTTONS_RESPONSE:"buttons_response",UNKNOWN:"unknown"},TEMPLATE_BUTTON_SUBTYPE:{QUICK_REPLY:"quick_reply",CALL:"call",URL:"url"},ELECTRON_PREF:{LAST_SAVED_LOCATION:"lastSavedLocation",CONTENT_SETTINGS:"contentSettings"},TOUCHBAR_MAX_EMOJIS:8,VERIFIED_LEVEL:{UNKNOWN:0,LOW:1,HIGH:2},HOSTNAME:{YOUTUBE:"youtube.com",YOUTUBE_MOBILE:"m.youtube.com",YOUTUBE_SHORTENED:"youtu.be",INSTAGRAM:"instagram.com",STREAMABLE:"streamable.com",FACEBOOK:"facebook.com",FBWATCH:"fbwat.ch",FBWATCH_ALT:"fb.watch",LASSOVIDEOS:"lassovideos.com",LASSO_SHORTENED:"las.so",SHARECHAT:"sharechat.com"},WHATSAPP_ORIGIN:"https://whatsapp.com",SMB_SEARCH_FILTERS:{UNREAD:"unread",GROUP:"group",BROADCAST:"broadcast"},SMB_LABELS:{MAX_LABEL_LENGTH:100},PRODUCT_INQUIRY_TYPE:"product_inquiry",PRODUCT_LIST_ITEM_HEIGHT:96,LOADABLE_DELAY:200,TAB_ORDERS:{CHAT_STARRED_DRAWER:3,CHAT_LIST_SEARCH:3,ARCHIVED_ENTRY_POINT:4,CHAT_LIST:4,CHAT_CONTACT_LIST:4,CHAT_IMAGE_GALLERY:4,CHAT_SEARCH_MSG_LIST:4,PANEL_SEARCH_INPUT:5,COMPOSE_BOX_MENU_BUTTON:5,COMPOSE_BOX_INPUT:6,PTT_BUTTON:7,MESSAGE_LIST:8,CHAT_HEADER_BUTTON:9},SPEEDY_RESUME_MAX_CHATS:5e3,MEDIA_VIEWER:{ANIMATION_DURATION:500,CLOSE_ANIMATION_DURATION:200,ZOOM_IN_FACTOR:2},DEFAULT_THEME:"light",LAYOUT_2COLUMNS_MAX_WIDTH:1024,MUTE_ALWAYS_EXPIRATION_SENTINEL:-1,ANDROID_LABEL_COLOR_PALETTE:["#FF9485","#64C4FF","#FFD429","#DFAEF0","#99B6C1","#55CCB3","#FF9DFF","#D3A91D","#6D7CCE","#D7E752","#00D0E2","#FFC5C7","#93CEAC","#F74848","#00A0F2","#83E422","#FFAF04","#B5EBFF","#9BA6FF","#9368CF"],IPHONE_LABEL_COLOR_PALETTE:["#A62C71","#90A841","#C1A03F","#792138","#AE8774","#F0B330","#B6B327","#C69FCC","#8B6990","#FF8A8C","#54C265","#FF7B6B","#26C4DC","#57C9FF","#74676A","#7E90A3","#5696FF","#6E257E","#7ACBA5","#243640"],VOIP_LOG_COLOR:"#aa6627",VOIP_MAC_MINIMUM_OS_RELEASE_VERSION:"17.0.0",VOIP_WIN_MINIMUM_OS_RELEASE_VERSION:"10.0.18362",VOIP_MAX_GROUP_CALL_PARTICIPANTS:8,WAM_SYS_INFO_INIT_DELAY:5e3,KEY_NOTICE_BANNER_CLOSED_AT:"notice-banner-closed-at",KEY_NOTICE_ID:"notice-id",MARKED_AS_UNREAD:-1,MAS_APP_IDENTIFIER:"57T9237FN3.desktop.WhatsApp",RENDER_PROCESS_LOG_PATH:"render_process_problem_log.txt",WEB_IDB_DB_NAMES:{__dbnames:"__dbnames",fts_storage:"fts-storage",_hsm_storage_DEPRECATED:"hsm-storage",jobs_storage:"jobs-storage",lru_media_storage_idb:"lru-media-storage-idb",model_storage:"model-storage",offd_storage:"offd-storage",signal_storage:"signal-storage",sw:"sw",wawc:"wawc",wawc_db_enc:"wawc_db_enc"}};t.default=n},58754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM=t.IS_MMS_URL_SEARCH_PARAM=void 0;t.IS_MMS_URL_SEARCH_PARAM="__wa-mms";t.MMS_URL_MEDIA_TYPE_SEARCH_PARAM="mms-type"},97849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpamFlow=void 0;var r=n(54302)({Chat:"chat",Account:"account_info",Group:"group_info",Block:"block_dialog",Dropdown:"overflow_menu",MediaViewer:"media_viewer",MessageMenu:"message_menu"});t.SpamFlow=r},45684:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(81109)),u=a(n(34575)),l=a(n(93913)),c=a(n(91080)),d=a(n(27099)),f=a(n(40465)),p=a(n(85485)),h=new(function(){function e(){(0,u.default)(this,e),this._pendingMap=new Map}var t,n;return(0,l.default)(e,[{key:"_ensureWorkerInited",value:function(){var e=this;this._worker||(p.default.onerror=function(t){e._onWorkerError(t)},p.default.onmessageerror=function(t){e._onMessageError(t)},p.default.onmessage=function(t){var n=t.data;e._onWorkerResponse(n)},this._worker=p.default)}},{key:"_onMessageError",value:function(){}},{key:"_onWorkerError",value:function(e){__LOG__(3)`FTS:client: worker error: ${e}`}},{key:"_onWorkerResponse",value:function(e){var t=e.reqId,n=this._pendingMap.get(t);n&&(e.error?(__LOG__(3)`FTS:client: worker completed job ${n.command.operation} with error`,n.reject(new Error("FTS worker error"))):n.resolve(e.result),this._untrackInvocation(t))}},{key:"startIndexer",value:function(){return this._runCommand({operation:"start-indexer"})}},{key:"indexFull",value:function(){return this._runCommand({operation:"run"})}},{key:"index",value:function(){return this._runCommand({operation:"consume"})}},{key:"purge",value:function(e){return this._runCommand({operation:"purge",ids:e})}},{key:"purgeRange",value:function(e){return this._runCommand((0,s.default)({operation:"purge-range"},e))}},{key:"reInit",value:function(){return this._runCommand({operation:"re-init"})}},{key:"clearInitializationPromises",value:function(){return this._runCommand({operation:"clear-init"})}},{key:"search",value:(n=(0,o.default)(i.default.mark((function e(t,n){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._runCommand({operation:"find",query:t,queryOptions:n});case 2:return r=e.sent,e.abrupt("return",this._coerceToSearchResult(r));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_coerceToSearchResult",value:(t=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)&&"boolean"!=typeof t){e.next=4;break}return e.abrupt("return",{canceled:!1,eof:!0,status:404,messages:[]});case 4:return e.next=6,(0,f.default)(t.messages);case 6:return n=e.sent,r=n.resolved,a=n.unresolved,o=t.eof,s=t.status,a.length>0&&this.purge(a),e.abrupt("return",{canceled:!1,eof:o,status:s,messages:r});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_runCommand",value:function(e){var t=this;this._ensureWorkerInited();var n=(0,d.default)();return new r((function(r,a){t._pendingMap.set(n,{resolve:r,reject:a,command:e}),t._message({command:e,reqId:n})})).finally((function(){t._untrackInvocation(n)}))}},{key:"_untrackInvocation",value:function(e){this._pendingMap.delete(e)}},{key:"_message",value:function(e){(0,c.default)(this._worker,"this._worker").postMessage(e)}}]),e}());t.default=h},40465:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var t=e.map((function(e){return+e.id})),n=new Map(e.map((function(e){return[+e.id,e]})));return(0,o.getTable)().anyOf(["rowId"],t).then((function(e){var t=[];e.forEach((function(e){var r=(0,s.hydrateMessage)(e),a=n.get(r.rowId);null!=a&&a.id===String(r.rowId)&&a.timestamp===r.t&&a.chatId===r.id.remote.toString()&&(t.push(r),n.delete(r.rowId))}));var r=Array.from(n.keys(),(function(e){return String(e)}));return{resolved:t,unresolved:r}}))}return r.resolve({resolved:[],unresolved:[]})};var i=a(n(22021)),o=n(322),s=n(24003)},27099:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n++};var n=0},22021:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProtobufFeatureName=g,t.default=t.FEATURE_CHANGE_EVENT=void 0;var a=r(n(319)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(96486)),c=r(n(28681)),d=n(48466),f=n(76007),p=l.default.fromPairs(Object.keys(f.WebFeaturesSpec.internalSpec).map((function(e){return[g(e),!1]}))),h=!1,_={RESEND_ICON:!1,MEDIA_EDITOR:!1,DELETE_MSG_CLEAR_MEDIA:!0,DEBUG_COMMANDS:!1,MD_BACKEND:h,MD_ADV:h,MD_PAYMENT:!0,MD_E2E:!1,MD_VOIP_GROUP:h,MD_SYNCD_ANTI_TAMPERING:h,CATALOG_MANAGER:!1,WEB_VOIP_VOICE_CALL:!1,WEB_VOIP_VIDEO_CALL:!1,MEDIA_AUTO_DOWNLOAD:!1,DOWNLOAD_STATUS_THUMB_MMS:!1,MEDIA_EXISTENCE_CHECK:!1,LOG_MISSING_REQUIRED_PROPERTIES:!1,HIGH_QUALITY_VIDEO_THUMBNAILS:!1,HIGH_QUALITY_LINK_PREVIEWS:!1,YOUTUBE_VIDEO_PREVIEW_WITHOUT_BLUR:!1,DROP_LAST_NAME_MENTIONS:!1,RICH_TEXT_INPUT:!1,PTT_DRAFT_ENABLED:!1},v=[[l.default.merge(_,p),{},{},{},{ARCHIVE_BROADCAST:!0},{RECENT_EMOJI_SYNC:!0},{},{},{},{},{},{STARRED_GIFS:!1,INDEX_RECEIVED_VCARD:!1},{STATUS_V3_UI_SENDING:!1},{MEDIAS_COUNT:!1},{},{VOIP_VOICE_CALL:!0},{DESKTOP_VOIP_VOICE_CALL:!0,DESKTOP_VOIP_VIDEO_CALL:!0,DESKTOP_VOIP_GROUP_VOICE_CALL:!1,DESKTOP_VOIP_GROUP_VIDEO_CALL:!1}]],m={KEY_PARTICIPANT:!1,RICH_TEXT:!0};function g(e){return l.default.snakeCase(e).toUpperCase()}var y="feature_change";t.FEATURE_CHANGE_EVENT=y;var E=new(function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r),(e=t.call(this)).FEATURE_CHANGE_EVENT=y,e.silenceChangeEvents=!0,e.triggerFeaturesChangedDebounced=l.default.debounce((function(){e.supportsFeature(e.F.MD_BACKEND)&&((0,d.setGKProto)(e.proto),(0,d.setGKFeatures)(e.features)),e.trigger(y)}),50),e.features={};var n=l.default.flatten(l.default.flatten(v).map(Object.keys)).concat(Object.keys(m));return e.F=l.default.fromPairs(l.default.uniq(n).map((function(e){return[e,e]}))),e.setVersion([0,0]),e.silenceChangeEvents=!1,e}return(0,o.default)(r,[{key:"setVersion",value:function(e){if(!this.proto||this.proto.length!==e.length||this.proto[0]!==e[0]||this.proto[1]!==e[1]){this.proto=e;var t=v.slice(0,e[0]+1),n=v.slice(e[0]+1,v.length),r=t[e[0]],i=r.slice(0,e[1]+1),o=r.slice(e[1]+1,r.length);t[e[0]]=i,n.unshift(o);var s=l.default.clone(this.features);this.features=l.default.merge(l.default.omitBy(l.default.merge.apply(l.default,[{}].concat((0,a.default)(l.default.flatten(t)))),(function(e){return!e})),this.features||{});var u=l.default.merge.apply(l.default,[{}].concat((0,a.default)(l.default.flatten(n))));this.features=l.default.omitBy(this.features,(function(e,t){return!!u[t]})),this.VF=l.default.fromPairs(Object.keys(l.default.merge.apply(l.default,[{}].concat((0,a.default)(l.default.flatten(t))))).map((function(e){return[e,e]}))),l.default.isEqual(s,this.features)||this.triggerFeaturesChanged()}}},{key:"setPlatform",value:function(e){var t=!1;switch(e){case"iphone":t=!1!==this.features.RECENT_EMOJI_SYNC||!1!==this.features.ARCHIVE_BROADCAST||!0!==this.features.RESEND_ICON||!1!==this.features.DELETE_MSG_CLEAR_MEDIA,this.features.RECENT_EMOJI_SYNC=!1,this.features.ARCHIVE_BROADCAST=!1,this.features.RESEND_ICON=!0,this.features.DELETE_MSG_CLEAR_MEDIA=!1;break;case"symbian":case"s40":case"bb":t=!1!==this.features.CHAT_MARK_UNSEEN,this.features.CHAT_MARK_UNSEEN=!1}t&&this.triggerFeaturesChanged()}},{key:"setFeatureFromFlags",value:function(e,t,n){var r=!1;switch(n){case f.WebFeaturesFlag.FORCE_UPGRADE:switch(t){case f.WebFeaturesFlag.FORCE_UPGRADE:r=!0;break;case f.WebFeaturesFlag.PRODUCTION:case f.WebFeaturesFlag.DEVELOPMENT:case f.WebFeaturesFlag.NOT_STARTED:r=!1,__LOG__(4,void 0,new Error,!0)`wap:features:${e} phone value is ${n} and web value is ${t}.`,SEND_LOGS("wap_feature_unreachable_code")}break;case f.WebFeaturesFlag.PRODUCTION:switch(t){case f.WebFeaturesFlag.FORCE_UPGRADE:r=!1,__LOG__(4,void 0,new Error,!0)`wap:features:${e} phone value is ${n} and web value is ${t}.`,SEND_LOGS("wap_feature_unexpected");break;case f.WebFeaturesFlag.PRODUCTION:r=!0;break;case f.WebFeaturesFlag.DEVELOPMENT:case f.WebFeaturesFlag.NOT_STARTED:r=!1}break;case f.WebFeaturesFlag.DEVELOPMENT:switch(t){case f.WebFeaturesFlag.FORCE_UPGRADE:case f.WebFeaturesFlag.PRODUCTION:case f.WebFeaturesFlag.DEVELOPMENT:case f.WebFeaturesFlag.NOT_STARTED:r=!1}break;case f.WebFeaturesFlag.NOT_STARTED:r=!1}var a=g(e);return this.setFeature(a,r)}},{key:"setFeature",value:function(e,t){var n;n=!!t;var r=this.features[e]!==n;return this.features[e]=n,r&&this.triggerFeaturesChanged(),r}},{key:"setFeatures",value:function(e){var t={},n=l.default.merge({},m,e);for(var r in n)r in this.VF||(t[r]=this.setFeature(r,n[r]));return t}},{key:"supportsFeature",value:function(e){return!!this.features[e]}},{key:"supportsFeatureFromFlags",value:function(e){var t=g(e);return this.supportsFeature(t)}},{key:"supportsAllFeatures",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.every((function(t){return!!e.features[t]}))}},{key:"supportsAnyFeature",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return!!e.features[t]}))}},{key:"resetFeatures",value:function(){this.proto=[0,0],this.features={},this.triggerFeaturesChanged()}},{key:"lt",value:function(e){var t=this.proto;return e[0]>t[0]||e[0]===t[0]&&e[1]>t[1]}},{key:"lte",value:function(e){var t=this.proto;return e[0]>t[0]||e[0]===t[0]&&e[1]>=t[1]}},{key:"gt",value:function(e){var t=this.proto;return e[0]<t[0]||e[0]===t[0]&&e[1]<t[1]}},{key:"gte",value:function(e){var t=this.proto;return e[0]<t[0]||e[0]===t[0]&&e[1]<=t[1]}},{key:"triggerFeaturesChanged",value:function(){this.silenceChangeEvents||this.triggerFeaturesChangedDebounced()}},{key:"overwriteDebugGKs",value:function(){}},{key:"isThirdPartyStickersEnabled",value:function(){return this.supportsAllFeatures(this.F.THIRD_PARTY_STICKERS,this.F.MEDIA_UPLOAD)}},{key:"isRecentStickersEnabled",value:function(){return this.supportsAnyFeature(this.F.RECENT_STICKERS_V_2,this.F.RECENT_STICKERS_V_3)&&this.supportsFeature(this.F.MEDIA_UPLOAD)}},{key:"isStarredStickersEnabled",value:function(){return this.supportsFeature(this.F.STARRED_STICKERS)&&this.isRecentStickersEnabled()}},{key:"isCatalogManagerEnabled",value:function(){return this.supportsAllFeatures(this.F.CATALOG_MANAGER,this.F.MD_BACKEND)}},{key:"isEphemeralAllowGroupMembersEnabled",value:function(){return this.supportsFeature(this.F.MD_BACKEND)?(0,n(4976).getABPropConfigValue)("ephemeral_allow_group_members"):this.supportsFeature(this.F.EPHEMERAL_ALLOW_GROUP_MEMBERS)}},{key:"isEphemeral24HDurationEnabled",value:function(){var e;return this.supportsFeature(this.F.MD_BACKEND)?null!==(e=(0,n(4976).getABPropConfigValue)("ephemeral_24h_duration"))&&void 0!==e&&e:this.supportsFeature(this.F.EPHEMERAL_24_H_DURATION)}},{key:"isDisappearingModeEnabled",value:function(){var e;return this.supportsFeature(this.F.MD_BACKEND)?null!==(e=(0,n(4976).getABPropConfigValue)("disappearing_mode"))&&void 0!==e&&e:this.supportsFeature(this.F.DISAPPEARING_MODE)}}]),r}(c.default));t.default=E},31230:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.canDisplayLabel=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return i.default.isSMB;return o.default.supportsFeature(o.default.F.LABELS_DISPLAY)},t.canEditLabelAssociation=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return i.default.isSMB;return o.default.supportsFeature(o.default.F.LABELS_EDIT)},t.canEditLabel=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return!1;return o.default.supportsFeature(o.default.F.LABELS_EDIT)},t.canSendQuickReply=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return i.default.isSMB;return o.default.supportsFeature(o.default.F.QUICK_REPLIES_QUERY)},t.buttonsMessagesEnabled=function(){return s.default.webButtonsMessage},t.archiveV2Supported=function(){return o.default.supportsFeature(o.default.F.ARCHIVE_V_2)},t.canEditBizProfile=function(){if(u.has("BIZ_PROFILE_EDIT"))return!0;return i.default.isSMB&&s.default.webBizProfileEdit},t.canSeeSMBUpsell=function(){return s.default.webSMBUpsellInBizProfile},t.productListMessagesEnabled=function(){return s.default.webProductListMessage},t.productListMessageFallbackEnabled=function(){return s.default.webProductListMessageFallback},t.canSeeBizProfileV3=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,a.getABPropConfigValue)("business_profile_refresh_m1_enabled");return s.default.webBizProfileV3},t.canSeeStatusV3OnContact=function(){if(u.has("STATUS_V3_CONTACT_INFO"))return!0;return!1},t.cartPropEnabled=function(){return s.default.webCart},t.canViewCollections=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,a.getABPropConfigValue)("consumer_collections_enabled");return s.default.webCollectionsDisplay},t.canManageCollections=function(){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,a.getABPropConfigValue)("smb_collections_enabled");return s.default.webCollectionsManagement},t.canToggleCartOnOff=function(){return o.default.supportsFeature(o.default.F.MD_BACKEND)&&s.default.webCartOnOffToggle};var a=n(4976),i=r(n(93743)),o=r(n(22021)),s=r(n(63056)),u=new Set([])},10181:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={pt:"pt_pt"};t.default=n},4090:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={pt:"pt_br",pt_ao:"pt",pt_ch:"pt",pt_cv:"pt",pt_fr:"pt",pt_gq:"pt",pt_gw:"pt",pt_lu:"pt",pt_mo:"pt",pt_mz:"pt",pt_pt:"pt",pt_st:"pt",pt_tl:"pt",zh_hans:"zh_cn",zh_hant:"zh_tw",zh_sg:"zh_cn",tl:"fil",in:"id",iw:"he",mo:"ro",jw:"jv",ji:"yi"};t.default=n},22827:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={af:"af",ar:"ar",ar_xb:"ar-XB",az:"az",bg:"bg",bn:"bn",ca:"ca",cs:"cs",da:"da",de:"de",el:"el",en:"en",es:"es",et:"et",fa:"fa",fi:"fi",fil:"fil",fr:"fr",gu:"gu",he:"he",hi:"hi",hr:"hr",hu:"hu",id:"id",it:"it",ja:"ja",kk:"kk",kn:"kn",ko:"ko",lt:"lt",lv:"lv",mk:"mk",ml:"ml",mr:"mr",ms:"ms",nb:"nb",nl:"nl",pa:"pa",pl:"pl",pt:"pt",pt_br:"pt-BR",ro:"ro",ru:"ru",sk:"sk",sl:"sl",sq:"sq",sr:"sr",sv:"sv",sw:"sw",ta:"ta",te:"te",th:"th",tr:"tr",uk:"uk",ur:"ur",uz:"uz",vi:"vi",zh_cn:"zh-CN",zh_hk:"zh-HK",zh_tw:"zh-TW"};t.default=n},10212:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldTrustMedia=f,t.shouldAutoDownloadMedia=p,t.default=t.AutoDownloadQueueClass=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=r(n(53807)),l=r(n(34263)),c=n(71701),d=r(n(8643));function f(e){return e.isTrusted()}function p(e){switch(e.type){case l.default.MSG_TYPE.AUDIO:case l.default.MSG_TYPE.PTT:return(0,c.getAutoDownloadAudio)();case l.default.MSG_TYPE.STICKER:case l.default.MSG_TYPE.IMAGE:return(0,c.getAutoDownloadPhotos)();case l.default.MSG_TYPE.VIDEO:return e.isGif&&e.size<5e5?(0,c.getAutoDownloadPhotos)():(0,c.getAutoDownloadVideos)();case l.default.MSG_TYPE.DOCUMENT:return(0,c.getAutoDownloadDocuments)()}return!1}var h=function(){function e(){(0,o.default)(this,e),this._downloaderQueue=new u.default(5,{photos:2,videos:1,audio:1,documents:1})}var t;return(0,s.default)(e,[{key:"enqueue",value:function(e){if(this._downloaderQueue.getEnqueuedTasksCount()>=32||!f(e)||!p(e))return!1;switch(e.type){case l.default.MSG_TYPE.AUDIO:case l.default.MSG_TYPE.PTT:return this._enqueueAudio(e),!0}return!1}},{key:"_enqueueAudio",value:(t=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._downloaderQueue.enqueue((0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:d.default.WEBC_RMR_REASON_CODE.OTHER,isUserInitiated:!1});case 4:case"end":return e.stop()}}),e)}))),{group:"audio",priority:2});case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),_=h;t.AutoDownloadQueueClass=_;var v=new h;t.default=v},58245:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(12035),s=[],u=new o.ShiftTimer((function(){var e=s;s=[];for(var t=0;t<e.length;t++){var n=e[t];n._inAutoreleasePool=!1,0!==n._retainCount||n.released||(n.released=!0,n._releaseImpl())}})),l=function(){function e(){(0,a.default)(this,e),this._retainCount=1,this._inAutoreleasePool=!1,this.released=!1}return(0,i.default)(e,[{key:"retain",value:function(){if(this.released)throw __LOG__(3)`OpaqueData:retain called on released OpaqueData`,new Error("OpaqueData:retain called on released OpaqueData");this._retainCount++}},{key:"autorelease",value:function(){this.released?__LOG__(3)`OpaqueData:autorelease called on released object`:0===this._retainCount?__LOG__(3)`OpaqueData:autorelease too many release calls`:1===this._retainCount?(this._retainCount=0,this._inAutoreleasePool||(this._inAutoreleasePool=!0,s.push(this),u.onOrBefore(1e3))):this._retainCount--}},{key:"autoreleaseWhenPromiseCompletes",value:function(e){var t=this,n=function(){t.autorelease()};e.then(n,n)}},{key:"throwIfReleased",value:function(e){if(this.released)throw __LOG__(4,void 0,new Error)`${e} called on released OpaqueData`,new Error(`${e} called on released OpaqueData`);0===this._retainCount&&__LOG__(4,void 0,new Error)`${e} called on unretained OpaqueData`}},{key:"_releaseImpl",value:function(){throw new Error("OpaqueData:_releaseImpl unimplemented")}}]),e}();t.default=l},24046:(e,t)=>{"use strict";function n(e){if(!e)return e;var t=e.replace(/[\u202a-\u202e\u2066-\u2069\u200E\u200F\u061C]/g,"�"),n=t.split(".");if(1===n.length)return t;for(var r=n.length-1;r>0;r--){var a=n[r].trim();if(a.length)return n.slice(0,r).join(".")+"."+a}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanFilename=n,t.cleanIncomingFilename=function(e){if(!e)return e;var t=n(e);if(e!==t&&t){var r=t.split("."),a=r.length>=2&&r.pop();["bat","exe","cmd","com","lnk","pif","scr","vb","vbe","vbs","wsh","js","ps1","hta","sh","csh","msi","app","scpt","applescript","reg","vbe","wsf","sct"].includes(a)&&__LOG__(2,!0)`cleanIncomingFilename:extension: ${a||""}`}return t}},81365:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getImageWidthHeight=function(e){return H((function(t){var n;return t(e),new r((function(t,r){(n=new Image).onload=t,n.onabort=function(){r(new Error("getImageWidthHeight onabort"))},n.onerror=function(){r(new Error("getImageWidthHeight onerror"))},n.src=e.url()})).then((function(){return{width:n.naturalWidth,height:n.naturalHeight}}))}))},t.getImageWidthHeightNoOpaque=L,t.opaqueDataToArrayBuffer=function(e){return H((function(t){t(e);var n=e._blob;if(n)return x(n);var r=e._b64;return(0,f.decodeB64)(r)}))},t.decodeWebpToRGBANoOpaque=U,t.parseWebpNoOpaque=F,t.videoWidthHeightDuration=function(e){return H((function(t){return t(e),A.videoWidthHeightDuration(e.forceToBlob())}))},t.videoWidthHeightDurationNoOpaque=G,t.processRawImage=function(){return j.apply(this,arguments)},t.processRawAudioVideo=function(){return Y.apply(this,arguments)},t.getRawDocumentMimetype=K,t.processRawDocument=function(){return V.apply(this,arguments)},t.fetchMedia=function(e){return(0,b.default)(e,"GET",null,N.default.RESP_TYPE.ARRAY_BUFFER).then((function(e){return e?r.resolve({result:e.response,status:e.status}):r.resolve(null)}))},t.canPlayOgg=function(){return!!A.canPlayOgg},t.gatherAndSetMetadata=function(){return $.apply(this,arguments)},t.gatherAndSetMetadataNoOpaque=function(e,t){return r.resolve().then((function(){switch(e.type){case O.TYPE.VIDEO:return G(t).then((function(e){return{fullWidth:e.width,fullHeight:e.height,duration:void 0!==e.duration?`${Math.ceil(e.duration)}`:void 0,durationFloat:e.duration}}));case O.TYPE.IMAGE:return null!=e.contentInfo.fullHeight&&null!=e.contentInfo.fullWidth&&e.size===t.size?null:L(t).then((function(e){return{fullWidth:e.width,fullHeight:e.height,size:t.size}}));case O.TYPE.STICKER:return(0,m.default)().then((function(e){return e?(0,d.promiseProps)({widthHeight:L(t),webpData:F(t)}).then((function(e){return{fullWidth:e.widthHeight.width,fullHeight:e.widthHeight.height,animationDuration:e.webpData.animationDuration,firstFrameLength:e.webpData.firstFrameLength,singleLoopDuration:e.webpData.singleLoopDuration,emojis:e.webpData.emojis,isAnimated:e.webpData.animationDuration>0,size:t.size}})):F(t).then((function(e){var n=e.animationDuration,r=e.firstFrameLength,a=e.singleLoopDuration,i=e.emojis;return n>0?{animationDuration:n,firstFrameLength:r,singleLoopDuration:a,emojis:i,isAnimated:!0,size:t.size}:U(t).then((function(e){return{animationDuration:n,rgbaBuffer:e.rgbaBuffer,rgbaWidth:e.width,rgbaHeight:e.height,size:t.size}}))}))}));case O.TYPE.AUDIO:default:return{}}})).catchType(y.MediaUnsupportedError,(function(t){throw e.consolidate({}),t})).then((function(t){null!=t&&e.consolidate(t)}))},t.shouldUseMediaCache=function(e){return e===C.default.STICKER||e===C.default.IMAGE||e===C.default.PRODUCT||e===C.default.PTT||e===C.default.AUDIO},t.shouldUseLruMediaStore=function(e){var t=e===C.default.STICKER||e===C.default.IMAGE,n=e===C.default.AUDIO||e===C.default.DOCUMENT||e===C.default.GIF||e===C.default.PPIC||e===C.default.PRODUCT||e===C.default.PTT||e===C.default.VIDEO||e===C.default.TEMPLATE||e===C.default.THUMBNAIL_DOCUMENT||e===C.default.THUMBNAIL_IMAGE||e===C.default.THUMBNAIL_LINK||e===C.default.THUMBNAIL_VIDEO;return(t||n)&&(0,S.getRememberMe)()},t.getResizedThumbData=function(e,t){return new r((function(n){var r=new Image;r.setAttribute("crossorigin","anonymous"),r.onload=function(){var e=t.map((function(e){var t=e.width,n=e.height,a=e.minWidth,i=e.minHeight,o=e.imageFormat,s=e.imageFormatOptions,u=e.keepAspectRatio;if(null!=a&&r.width<a||null!=i&&r.height<i)return null;var l,c,d=document.createElement("canvas"),f=d.getContext("2d"),p=0,h=0;r.height>r.width?(l=t,h=-((c=r.height/r.width*t)-n)/2):(c=n,p=-((l=r.width/r.height*n)-t)/2);return u?(d.width=l,d.height=c):(d.width=t,d.height=n),f.drawImage(r,p,h,l,c),{dataUrl:d.toDataURL(o,s).replace("data:image/jpeg;base64,",""),width:d.width,height:d.height}}));n(e)},r.src=e}))};var o=i(n(63038)),s=i(n(81109)),u=i(n(87757)),l=i(n(48926)),c=n(39951),d=n(46154),f=n(92827),p=i(n(97769)),h=n(24046),_=i(n(34263)),v=i(n(86201)),m=i(n(15136)),g=a(n(97853)),y=a(n(98569)),E=n(19059),S=n(71701),b=i(n(63602)),T=a(n(93783)),w=n(48523),A=a(n(60996)),C=i(n(16024)),O=n(87261),M=n(13242),I=i(n(74984)),k=i(n(82206)),P=i(n(63056)),R=i(n(69267)),D=n(38210),N=i(n(89428));function L(e){return new r((function(t,n){var r=new Image,a=window.URL.createObjectURL(e);r.onload=function(){var e={width:r.naturalWidth,height:r.naturalHeight};window.URL.revokeObjectURL(a),t(e)},r.onabort=function(){window.URL.revokeObjectURL(a),n(new Error("getImageWidthHeight onabort"))},r.onerror=function(){window.URL.revokeObjectURL(a),n(new Error("getImageWidthHeight onerror"))},r.src=a}))}function x(e){return(0,E.blobToArrayBuffer)(e).catch((function(e){throw __LOG__(3)`MediaUtils error: ${e}`,e}))}function U(e){return x(e).then((function(e){return(0,v.default)(e)}))}function F(e){return x(e).then(k.default)}function G(e){return A.videoWidthHeightDuration(e)}function B(e,t){return H((function(n){return n(e),A.transcode(e.forceToBlob(),t).then((function(e){return I.default.createFromData(e,e.type)})).then((function(e){return n(e),e.autorelease(),e}))}))}function j(){return(j=(0,l.default)(u.default.mark((function e(t){var n,r,a,i,o,s,l,c,d;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.forceToBlob(),e.next=3,T.rotateAndResize(n,P.default.imageMaxEdge,T.BLOB|T.CANVAS);case 3:return r=e.sent,a=r.width,i=r.height,o=r.images,e.next=9,T.rotateAndResize(o.canvas,_.default.IMG_THUMB_MAX_EDGE,T.DATA_URL|T.CANVAS);case 9:return s=e.sent,l=s.images,c=T.getResizedDataUrl(l.canvas,"image/jpeg",2e4),(d=c?R.default.parseDataURL(c).data:null)||__LOG__(2)`processRawImage: Failed to reach max thumbnail size, preview will be null`,e.abrupt("return",{blob:o.blob,width:a,height:i,preview:d});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=(0,l.default)(u.default.mark((function e(t,n,r,a,i){var l,c,d,f,p,h,v,m,g,S,b,A,C,M;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.forceToBlob(),e.next=3,(0,w.checkAndRepair)(c,!!a);case 3:if(d=e.sent){e.next=7;break}throw __LOG__(3)`processRawAudioVideo bad video file ${c.type}`,new y.InvalidMediaFileType;case 7:f=d.type,p=d.file,h=a||d.isGif,e.t0=(0,E.typeFromMimetype)(f),e.next=e.t0===E.FILETYPE.VIDEO?13:e.t0===E.FILETYPE.AUDIO?30:39;break;case 13:if(!n){e.next=16;break}throw __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: ptt became video"),new y.InvalidMediaFileType;case 16:if(v={type:O.OUTWARD_TYPES.VIDEO,mediaBlob:p,mimetype:f,isGif:h,gifAttribution:h?i||0:void 0},!r||null==r.duration||null==r.fullHeight||0===r.fullHeight||null==r.fullWidth||0===r.fullWidth||!r.preview){e.next=19;break}return e.abrupt("return",(0,s.default)((0,s.default)({},v),{},{fullWidth:r.fullWidth,fullHeight:r.fullHeight,preview:r.preview,duration:r.duration.toString()}));case 19:return e.next=21,T.generateVideoThumbsAndDuration({file:p,maxDimensions:[_.default.IMG_THUMB_MAX_EDGE,_.default.VIDEO_THUMB_MAX_EDGE],debugHint:"processRawAudioVideo"});case 21:return m=e.sent,g=m.duration,S=(0,o.default)(m.thumbs,2),b=S[0],A=S[1],e.next=28,I.default.createFromBase64Jpeg(R.default.parseDataURL(A.url).data);case 28:return C=e.sent,e.abrupt("return",(0,s.default)((0,s.default)({},v),{},{fullWidth:b.fullWidth,fullHeight:b.fullHeight,preview:R.default.parseDataURL(b.url).data,fullPreviewData:C,duration:g.toString()}));case 30:if(null===(l=null==r?void 0:r.duration)||void 0===l){e.next=34;break}e.t1=l,e.next=37;break;case 34:return e.next=36,(0,E.getAudioDuration)(p);case 36:e.t1=e.sent;case 37:return M=e.t1,e.abrupt("return",{type:n?O.OUTWARD_TYPES.PTT:O.OUTWARD_TYPES.AUDIO,mediaBlob:p,mimetype:f,duration:M.toString()});case 39:throw __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: audio/video became other"),new Error(`audio/video became ${f}`);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return W.apply(this,arguments)}function W(){return(W=(0,l.default)(u.default.mark((function e(t,n){var r,a,i,o,s;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.type)){e.next=9;break}if("*"!==M.DOC_MIMES&&!M.DOC_MIMES.includes(r)){e.next=6;break}return e.abrupt("return",r);case 6:throw new y.InvalidMediaFileType(`disallowed mimetype ${r}`);case 7:e.next=24;break;case 9:return e.next=11,x(t);case 11:if(a=e.sent,!(i=(0,p.default)(new Uint8Array(a,0,Math.min(262,a.byteLength))))||!i.mime){e.next=19;break}if(!(o=(0,M.isAllowedDocumentMimetype)(i.mime,n,!0))){e.next=17;break}return e.abrupt("return",o);case 17:e.next=23;break;case 19:if(!n){e.next=23;break}if(!(s=(0,E.getMimeTypeForFilepath)(n))){e.next=23;break}return e.abrupt("return",s);case 23:throw new y.InvalidMediaFileType(`type: ${String(t.type)} name: ${String(n)}`);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=(0,l.default)(u.default.mark((function e(t,n,a,i){var s,l,c,d,f,p,_,v,m,y,S,b;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.forceToBlob(),d=(0,h.cleanFilename)(c.name||n||null),e.next=4,K(c,d);case 4:return f=e.sent,p=a?(0,E.blobToText)(c):null,e.next=8,r.all([g.enrich(c,f),p]);case 8:return _=e.sent,v=(0,o.default)(_,2),m=v[0],y=v[1],S=null!==(s=null==m||null===(l=m.microThumbnail)||void 0===l?void 0:l.dataUrl)&&void 0!==s?s:null==m?void 0:m.thumbUrl,b=S?R.default.parseDataURL(S).data:null,e.t0=O.OUTWARD_TYPES.DOCUMENT,e.next=17,I.default.createFromData(c,f);case 17:return e.t1=e.sent,e.t2=f,e.t3=d||void 0,e.t4=m,e.t5=b,e.t6=null==m?void 0:m.fullPreviewData,e.t7=m?{width:m.width,height:m.height}:null,e.t8=null!=i?i:null==m?void 0:m.pdfPages,e.t9=a,e.t10=y?(0,D.parseMultiVcard)(y):null,e.abrupt("return",{type:e.t0,mediaBlob:e.t1,mimetype:e.t2,filename:e.t3,documentPreview:e.t4,preview:e.t5,fullPreviewData:e.t6,fullPreviewSize:e.t7,pageCount:e.t8,isVcardOverMmsDocument:e.t9,parsedVcards:e.t10});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=[];return(0,c.promiseCallSync)(e,null,(function(e){e.retain(),t.push(e)})).finally((function(){for(var e=0;e<t.length;e++)t[e].autorelease()}))}function $(){return($=(0,l.default)(u.default.mark((function e(t,n){var r,a,i,s,l,c,d,f,p;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.retain(),e.prev=1,e.t0=t.type,e.next=e.t0===O.TYPE.VIDEO?5:e.t0===O.TYPE.AUDIO?17:24;break;case 5:return i=n.forceToBlob(),e.next=8,T.generateVideoThumbsAndDuration({file:i,maxDimensions:[_.default.VIDEO_THUMB_MAX_EDGE],debugHint:"gatherAndSetMetadata"});case 8:return s=e.sent,l=(0,o.default)(s.thumbs,1),c=l[0],d=s.duration,e.next=14,I.default.createFromBase64Jpeg(R.default.parseDataURL(c.url).data);case 14:return f=e.sent,r={mediaBlob:n,renderableUrl:n.url(),fullWidth:c.fullWidth,fullHeight:c.fullHeight,duration:void 0!==d?`${Math.ceil(d)}`:void 0,durationFloat:d,fullPreviewData:f},e.abrupt("break",26);case 17:return e.next=19,B(n);case 19:return(p=e.sent).retain(),r={mediaBlob:p,renderableUrl:p.url()},a=function(){return p.autorelease()},e.abrupt("break",26);case 24:t.type!==O.TYPE.IMAGE&&t.type!==O.TYPE.STICKER||(__LOG__(4,void 0,new Error,!0)`object type: ${t.type||""}`,SEND_LOGS("Entering gatherAndSetMetadata (with OpaqueData) unexpectedly")),r={mediaBlob:n,renderableUrl:n.url()};case 26:t.consolidate(r),e.next=36;break;case 29:if(e.prev=29,e.t1=e.catch(1),!(e.t1 instanceof y.MediaUnsupportedError)){e.next=35;break}t.consolidate({mediaBlob:n,renderableUrl:n.url()}),e.next=36;break;case 35:throw e.t1;case 36:return e.prev=36,n.autorelease(),null!=a&&a(),e.finish(36);case 40:case"end":return e.stop()}}),e,null,[[1,29,36,40]])})))).apply(this,arguments)}},74984:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=n(92827),c=a(n(58245)),d=n(19059),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._b64=void 0,e._blob=void 0,e._url=void 0,e._mimetype=void 0,e._released=void 0,e}return(0,o.default)(n,[{key:"url",value:function(){return this.throwIfReleased("OpaqueData:url"),this._url?this._url:this._b64?this._url=`data:image/jpeg;base64,${this._b64}`:this._url=window.URL.createObjectURL(this._blob)}},{key:"getBase64",value:function(){return this._b64}},{key:"filepath",value:function(){throw new Error("OpaqueData:filepath can not be implemented on web")}},{key:"wavFilepath",value:function(){throw new Error("OpaqueData:wavFilepath can not be implemented on web")}},{key:"setWavFilepath",value:function(){throw new Error("OpaqueData:setWavFilepath can not be implemented on web")}},{key:"validate",value:function(){return this._released?r.resolve(!1):this._blob?(0,d.validateBlob)(this._blob):r.resolve(!0)}},{key:"size",value:function(){return this.throwIfReleased("OpaqueData:size"),this._blob?this._blob.size:(0,l.sizeWhenB64Decoded)(this._b64)}},{key:"formData",value:function(){return this.throwIfReleased("OpaqueData:formData"),this.forceToBlob()}},{key:"type",value:function(){return this.throwIfReleased("OpaqueData:type"),this._mimetype||"undefined"}},{key:"forceToBlob",value:function(){this.throwIfReleased("OpaqueData:forceToBlob");var e=this._blob;if(e)return e;var t=this._b64;if(t){this._b64=void 0,this._url=void 0;var n=this._mimetype;return this._blob=new Blob([(0,l.decodeB64)(t)],n?{type:n}:void 0)}throw new Error("OpaqueData:forceToBlob no b64 or blob")}},{key:"_releaseImpl",value:function(){this._mimetype=void 0,this._blob?(this._blob=void 0,this._url&&(window.URL.revokeObjectURL(this._url),this._url=void 0)):(this._b64=void 0,this._url=void 0)}},{key:"isBlobEqual",value:function(e){return e?this._blob===e._blob:!this._blob}}]),n}(c.default);t.default=f,f.createFromBase64Jpeg=function(e){return new r((function(t){var n=new f;return n._b64=e,n._mimetype="image/jpeg",t(n)}))},f.createFromData=function(e,t){return new r((function(n){var r=new f;return r._blob=e instanceof Blob&&e.type===t?e:new Blob([e],{type:t}),r._mimetype=t,n(r)}))}},48198:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return v.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(92827),s=r(n(91080)),u=r(n(35340)),l=n(2277),c=r(n(34263)),d=r(n(75214)),f=r(n(74117)),p=r(n(16024)),h=r(n(74984)),_=r(n(63276));function v(){return(v=(0,i.default)(a.default.mark((function e(t){var n,r,i,v,m,g,y,E,S,b,T,w;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.msg,r=t.isPreload,i=t.signal,v=n.thumbnailSha256,m=n.thumbnailEncSha256,g=n.thumbnailDirectPath,y=n.mediaKey,E=n.mediaKeyTimestamp,g&&m&&v&&null!=y&&null!=E){e.next=4;break}return e.abrupt("return");case 4:if(n.type!==p.default.DOCUMENT||null!=n.thumbnailHeight&&null!=n.thumbnailWidth){e.next=6;break}return e.abrupt("return");case 6:if(!(S=n.asUrl)||null!=S.thumbnailHeight&&null!=S.thumbnailWidth){e.next=9;break}return e.abrupt("return");case 9:return __LOG__(2)`media.downloadMmsThumbnail: start`,e.prev=10,e.next=13,d.default.downloadAndDecrypt({directPath:g,encFilehash:m,filehash:v,mediaKey:y,mediaKeyTimestamp:E,type:(0,f.default)(n),signal:i||(new u.default).signal,userDownloadAttemptCount:0,isPreload:r});case 13:if(b=e.sent,!S){e.next=18;break}S.thumbnailHQ=(0,o.encodeB64)(b),e.next=25;break;case 18:return T=(0,s.default)(n.mediaObject,"mediaObject cannot be null for thumbnail download"),e.next=21,h.default.createFromData(b,"image/jpeg");case 21:e.t0=e.sent,w={fullPreviewData:e.t0},n.type===c.default.MSG_TYPE.DOCUMENT&&(w.fullPreviewSize={height:(0,s.default)(n.thumbnailHeight,"msg.thumbnailHeight"),width:(0,s.default)(n.thumbnailWidth,"msg.thumbnailWidth")}),T.consolidate(w);case 25:__LOG__(2)`media.downloadMmsThumbnail: success`,e.next=34;break;case 28:if(e.prev=28,e.t1=e.catch(10),e.t1.name!==l.ABORT_ERROR){e.next=33;break}return __LOG__(2)`media.downloadMmsThumbnail aborted`,e.abrupt("return");case 33:__LOG__(3,!0)`media.downloadMmsThumbnail: error\n${(0,_.default)(e.t1)}`;case 34:case"end":return e.stop()}}),e,null,[[10,28]])})))).apply(this,arguments)}},74117:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e.type){case a.default.MSG_TYPE.DOCUMENT:return i.default.THUMBNAIL_DOCUMENT;case a.default.MSG_TYPE.VIDEO:return i.default.THUMBNAIL_VIDEO;case a.default.MSG_TYPE.IMAGE:return i.default.THUMBNAIL_IMAGE;case a.default.MSG_TYPE.CHAT:return i.default.THUMBNAIL_LINK;default:throw new Error("getThumbnailTypeForMsg: Unsupported msg type")}};var a=r(n(34263)),i=r(n(16024))},76486:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(13471),s=n(9861),u=n(87261),l=r(n(8643)),c=25e7,d=function(){function e(t){(0,a.default)(this,e),this.itemCount=t.itemCount,this.purgesSoFar=t.purgesSoFar,this.sizeLimit=t.sizeLimit,this.startTime=null!=t.startTime?t.startTime:window.performance.now()}return(0,i.default)(e,[{key:"increaseItemCount",value:function(){this.itemCount++}},{key:"decreaseItemCount",value:function(){this.itemCount--}},{key:"increasePurgesSoFar",value:function(){this.purgesSoFar++}},{key:"commitMetric",value:function(){new l.default.WebcMediaBlobCachePurge({mediaBlobCacheItemCount:this.itemCount,mediaBlobCachePurgesSoFar:this.purgesSoFar,mediaBlobCacheSizeLimit:this.sizeLimit,mediaBlobCacheUptimeT:Math.round(window.performance.now()-this.startTime)}).commit()}},{key:"reset",value:function(){this.itemCount=0,this.purgesSoFar=0,this.startTime=window.performance.now()}}]),e}(),f=new(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;if((0,a.default)(this,e),this.getOrCreateURL=function(e){if(t._filehashToUrl[e])return t.touch(e),t._filehashToUrl[e];var n=t.get(e);if(!n)throw new Error(`There is no blob matching filehash: ${e}.`);var r=window.URL.createObjectURL(n);return t._filehashToUrl[e]=r,r},this.revokeURL=function(e,n){if(n){if(t._filehashToUrl[e]!==n)throw new Error("The url provided does not match the filehash.");delete t._filehashToUrl[e],window.URL.revokeObjectURL(n)}},null!=n&&n<0)throw new Error("Size limit cannot be a negative number.");this._metricHelper=new d({itemCount:0,purgesSoFar:0,sizeLimit:n,startTime:null}),this._usageCounts={},this._filehashToUrl={},this._lruCache=new o.LruCache({sizeLimit:n,getSize:function(e){return e.size},onEvict:function(e){t._filehashToUrl[e]&&0===t._getUsageCount(e)&&(t.revokeURL(e,t._filehashToUrl[e]),(0,s.getOrCreateMediaObject)(e).consolidate({downloadStage:u.DOWNLOAD_STAGE.INIT,progressiveStage:null})),t._metricHelper.increasePurgesSoFar(),t._metricHelper.commitMetric()},onAdd:function(){t._metricHelper.increaseItemCount()},shouldEvict:function(e){return 0===t._getUsageCount(e)},onDelete:function(){t._metricHelper.decreaseItemCount()},onClear:function(){t._metricHelper.reset()}})}return(0,i.default)(e,[{key:"get",value:function(e){return this._lruCache.get(e)}},{key:"has",value:function(e){return this._lruCache.has(e)}},{key:"touch",value:function(e){this.get(e)}},{key:"put",value:function(e,t){this._lruCache.put(e,t)}},{key:"clear",value:function(){var e=this;this._usageCounts={},Object.keys(this._filehashToUrl).forEach((function(t){e._filehashToUrl[t]&&e.revokeURL(t,e._filehashToUrl[t])})),this._filehashToUrl={},this._lruCache.clear()}},{key:"increaseUsageCount",value:function(e){this._usageCounts[e]=this._getUsageCount(e)+1}},{key:"decreaseUsageCount",value:function(e){var t=this._getUsageCount(e);if(t<=0)throw new Error("Cannot decrease the usageCount to a negative number.");this._usageCounts[e]=t-1,0===this._usageCounts[e]&&delete this._usageCounts[e]}},{key:"_getUsageCount",value:function(e){return this._usageCounts[e]||0}}]),e}());t.default=f},82875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanJPEG=function(e){var t,n=new r.Binary(e),j=new r.Binary(e),Y=new r.Binary,K=!1,W=!1,V=!1,H=!1,$={version:257,densityUnits:0,xDensity:1,yDensity:1};if(255!==n.readUint8()||n.readUint8()!==g)throw new Error("SOI marker not at the start of the file.");j.advance(2);var z=void 0;for(;null!=z||n.size();){if(void 0===z){var q=n.readUint8();if(255!==q)throw new Error(`0x${q.toString(16)} is not a marker prefix.`);z=n.readUint8()}switch(z){case T:if(W)t=n.readUint16(),j.advance(t+2),n.advance(n.size()-j.size());else{if(t=n.readUint16(),"JFIF\0"!==n.readString(5))throw new Error("APP0 marker missing 'JFIF' magic bytes.");H=!0,$.version=n.readUint16(),$.densityUnits=n.readUint8(),$.xDensity=n.readUint16(),$.yDensity=n.readUint16(),j.advance(t+2),n.advance(n.size()-j.size()),W=!0}break;case E:if(!V&&!H)throw new Error("Missing magic bytes marker.");n.advance(n.readUint16()-2);for(var J=void 0,Q=n.readUint8();n.size();){if(J=n.readUint8(),255===Q&&!B.includes(J)){z=J;break}Q=J}Y.writeByteArray(j.readByteArray(j.size()-n.size()-2));continue;case w:if(t=n.readUint16(),!V&&"Exif\0\0"!==n.readString(6))throw new Error("APP1 marker missing 'EXIF' magic bytes.");V=!0,j.advance(t+2),n.advance(n.size()-j.size());break;case x:case G:if(!V&&!H)throw new Error("Missing magic bytes marker.");t=n.readUint16(),j.advance(t+2),n.advance(n.size()-j.size());break;case y:if(!V&&!H)throw new Error("Missing magic bytes marker.");K=!0,Y.writeByteArray(j.readByteArray(2));break;case a:case i:case o:case s:case l:case c:case d:case f:case p:case h:case _:case v:case m:case S:case u:case b:if(!V&&!H)throw new Error("Missing magic bytes marker.");t=n.readUint16(),Y.writeByteArray(j.readByteArray(2+t)),n.advance(n.size()-j.size());break;case A:case C:case O:case M:case I:case k:case P:case R:case D:case N:case L:case U:case F:throw new Error(`Received unexpected APP marker 0x${z.toString(16)}`);default:throw new Error(`Did not understand marker: 0x${z.toString(16)}`)}if(z=void 0,K)break}if(!K)throw new Error("No EOI tag found.");var X=function(e){var t=new r.Binary;return t.writeBytes(255,216,255,224,0,16,74,70,73,70,0),t.writeUint16(e.version),t.writeUint8(e.densityUnits),t.writeUint16(e.xDensity),t.writeUint16(e.yDensity),t.writeBytes(0,0),t.readByteArray()}($);return new Blob([X,Y.readByteArray()],{type:"image/jpeg"})};var r=n(17643),a=192,i=193,o=194,s=195,u=196,l=197,c=198,d=199,f=201,p=202,h=203,_=205,v=206,m=207,g=216,y=217,E=218,S=219,b=221,T=224,w=225,A=226,C=227,O=228,M=229,I=230,k=231,P=232,R=233,D=234,N=235,L=236,x=237,U=238,F=239,G=254,B=[0,208,209,210,211,212,213,214,215]},50691:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(79922)),c={ignoreSearch:!0,ignoreMethod:!0,ignoreVary:!0},d=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this))._encodeKey=function(e){var t=encodeURIComponent(e);return`https://_media_cache_v2_.whatsapp.com/${encodeURIComponent(r.storeName)}_${t}`},r.storeName=e,r}return(0,o.default)(n,[{key:"doGet",value:function(e){var t=this._encodeKey(e);return this.cacheStore?r.resolve(this.cacheStore.match(t,c).then((function(e){return e?e.arrayBuffer():null}))):(__LOG__(3)`Unable to get. This error can occur if abstract method doGet gets called.`,r.reject(new Error("Unable to get")))}},{key:"doPut",value:function(e,t){var n=this._encodeKey(e);return this.cacheStore?r.resolve(this.cacheStore.put(n,new Response(t)).then((function(){return t}))):(__LOG__(3)`Unable to put. This error can occur if abstract method doPut gets called.`,r.reject(new Error("Unable to put in cache")))}},{key:"doDel",value:function(e){var t=this._encodeKey(e);return this.cacheStore?this.cacheStore.delete(t,c).then((function(){})):(__LOG__(3)`Unable to delete. This error can occur if abstract method doDel gets called.`,r.reject(new Error("Unable to delete")))}},{key:"doClear",value:function(){var e=this;return r.resolve(caches.delete(this.storeName).then((function(t){t||__LOG__(2)`Tried to delete a non-existent cache: ${e.storeName}`})))}},{key:"doOpen",value:function(){var e=this;return r.resolve(caches.open(this.storeName).then((function(t){e.cacheStore=t}))).catch((function(t){return e.cacheStore=null,__LOG__(3)`Unable to open cache: ${e.storeName}, error: ${t}`,r.reject(t)}))}},{key:"doClose",value:function(){return this.cacheStore=null,r.resolve()}}]),n}(l.default);t.default=d},20300:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(79922)),c=a(n(83771)),d=n(57130),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;return(0,i.default)(this,n),(e=t.call(this))._store=new c.default(d.initialize,d.IdbArrayBufferTable),e}return(0,o.default)(n,[{key:"doGet",value:function(e){return this._store.get(e).then((function(e){return e?e.data:null}))}},{key:"doQueryByIndex",value:function(){throw new Error("Not implemented. Actual Arraybuffer store does not need it.")}},{key:"doGetAll",value:function(){throw new Error("Not implemented. Actual Arraybuffer store does not need it.")}},{key:"doPut",value:function(e,t){return this._store.put(e,{id:e,data:t}).then((function(e){return e.data}))}},{key:"doDel",value:function(e){return this._store.del(e)}},{key:"doCount",value:function(){return this._store.count()}},{key:"clear",value:function(){return this._store.clear()}},{key:"doOpen",value:function(){return r.resolve()}},{key:"doClose",value:function(){return r.resolve()}}]),n}(l.default);t.default=f},20435:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"get",value:function(){return r.resolve()}},{key:"queryByIndex",value:function(){return r.resolve([])}},{key:"getAll",value:function(){return r.resolve([])}},{key:"put",value:function(e,t){return r.resolve(t)}},{key:"del",value:function(){return r.resolve()}},{key:"count",value:function(){return r.resolve(0)}},{key:"clear",value:function(){return r.resolve()}}]),n}(a(n(79922)).default);t.default=l},5493:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MediaStore=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=r(n(96486)),l=r(n(50691)),c=r(n(20300)),d=r(n(20435)),f=n(98569),p=r(n(37410)),h=r(n(80810)),_=r(n(63276)),v=function(){function e(){(0,o.default)(this,e),this._getBackingStore=u.default.once((0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==(t=m())){e.next=6;break}return e.next=5,t.open();case 5:return e.abrupt("return",t);case 6:e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(0),"SecurityError"!==e.t0.name){e.next=14;break}__LOG__(3)`There was a security error attempting to open the media storage. \
This likely indicates a permissions error. Falling back to dummy \
(no-op) storage.`,e.next=19;break;case 14:if(!(e.t0 instanceof f.DbOnLogoutAbort)){e.next=18;break}throw e.t0;case 18:__LOG__(4,!0,new Error,!0)`Failed to initialize media store! Falling back to dummy (no-op) storage. Error:
${(0,_.default)(e.t0)}`,SEND_LOGS("Failed to initialize media store");case 19:return e.abrupt("return",new d.default);case 20:case"end":return e.stop()}}),e,null,[[0,8]])}))))}var t,n,r,l,c,p,h,v,g;return(0,s.default)(e,[{key:"get",value:(g=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return n=e.sent,e.abrupt("return",n.get(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"queryByIndex",value:(v=(0,i.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return r=e.sent,e.abrupt("return",r.queryByIndex(t,n));case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"getAll",value:(h=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return t=e.sent,e.abrupt("return",t.getAll());case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"put",value:(p=(0,i.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return r=e.sent,e.abrupt("return",r.put(t,n));case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"del",value:(c=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return n=e.sent,e.next=5,n.del(t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"count",value:(l=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return t=e.sent,e.abrupt("return",t.count());case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"clear",value:(r=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return t=e.sent,e.next=5,t.clear();case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"open",value:(n=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return t=e.sent,e.next=5,t.open();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:(t=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBackingStore();case 2:return t=e.sent,e.next=5,t.close();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function m(){var e=function(){if(null!=p.default&&"caches"in self)return new l.default("lru-media-array-buffer-cache");return null!=p.default?new c.default("media_lru_buffer"):null}();return null==e?null:new h.default({maxSize:Number.MAX_SAFE_INTEGER,arrayBufferStore:e})}t.MediaStore=v;var g=new v;t.default=g},80810:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(63038)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=a(n(91080)),p=a(n(86128)),h=a(n(79922)),_=n(31688),v=a(n(3130)),m=n(57130),g=a(n(30471)),y=a(n(8643)),E=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(e){var a;(0,u.default)(this,n),(a=t.call(this))._enqueue=(0,_.createEnqueue)(),a.updateMaxSizeInterval=null,a._dispose=function(e,t){return r.all([(0,v.default)(),a.count()]).then((function(e){var n,r=(0,s.default)(e,2),i=r[0],o=r[1],u=new y.default.WebcMediaStorePurge({webcCurrentTimestampT:(new Date).getTime(),webcMediaStoreItemCount:o,webcMediaStoreQuotaBytes:a.getMaxSize(),webcMediaStoreQuotaUsedBytes:null!==(n=a.getCurrentSize())&&void 0!==n?n:void 0,webcPurgedItemTimestampT:t[m.metaInfoDateIndex]});i&&(u.webcBrowserStorageQuotaBytes=i.quota,u.webcBrowserStorageQuotaUsedBytes=i.usage),u.commit()})),a._bufferStore.del(e)},a.doPut=a._enqueue((function(e,t){if(t.byteLength>a.getMaxSize())return r.resolve(t);if(t.byteLength>3e7)return r.resolve(t);var n={id:e,timestamp:(new Date).getTime(),size:t.byteLength};return a._metaInfoStore.putObject(n).then((function(){return a._bufferStore.put(e,t)})).catchType(p.default.AbortError,(function(e){if(e.message.includes("QuotaExceededError"))return __LOG__(2)`LruMediaStore: encounter QuotaExceededError, thus shrink the size of LruMediaStore`,void a.setMaxSize((0,f.default)(a.getCurrentSize(),"_this.getCurrentSize()")/2);throw e}))})),a.doDel=a._enqueue((function(e){return a._metaInfoStore.del(e)})),a._updateMaxSize=(0,o.default)(i.default.mark((function e(){var t,n,r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.default)();case 2:if(null!=(t=e.sent)){e.next=6;break}return a._clearStoreForThisSession(),e.abrupt("return");case 6:if(null!=(n=a.getCurrentSize())){e.next=9;break}return e.abrupt("return");case 9:if(r=t.quota-t.usage,o=a._calculateTargetedBufferSize(t.quota),!(r>o)){e.next=13;break}return e.abrupt("return");case 13:if(!(n<(s=o-r))){e.next=17;break}return a._clearStoreForThisSession(),e.abrupt("return");case 17:a.setMaxSize(n-s);case 18:case"end":return e.stop()}}),e)})));var l=e.maxSize,c=e.arrayBufferStore;return a._bufferStore=c,a._metaInfoStore=new g.default(l,a._dispose),a.updateMaxSizeInterval=setInterval(a._updateMaxSize,6e4),a}return(0,l.default)(n,[{key:"doGet",value:function(e){var t=this;return this._bufferStore.get(e).then((function(n){return null!=n&&t.put(e,n),n}))}},{key:"doClear",value:function(){var e=this;return this._bufferStore.clear().then((function(){return e._metaInfoStore.clear()}))}},{key:"doCount",value:function(){return this._metaInfoStore.count()}},{key:"doOpen",value:function(){return r.all([this._metaInfoStore.open(),this._bufferStore.open()]).then((function(){}))}},{key:"doClose",value:function(){return r.all([this._metaInfoStore.close(),this._bufferStore.close()]).then((function(){}))}},{key:"getCurrentSize",value:function(){return this._metaInfoStore.getCurrentSize()}},{key:"getMaxSize",value:function(){return this._metaInfoStore.getMaxSize()}},{key:"setMaxSize",value:function(e){return this._metaInfoStore.setMaxSize(e)}},{key:"_calculateTargetedBufferSize",value:function(e){var t=Math.floor(.01*e);return t<1e8?1e8:t>5e8?5e8:t}},{key:"_clearStoreForThisSession",value:function(){this.setMaxSize(0),this.updateMaxSizeInterval&&(clearInterval(this.updateMaxSizeInterval),this.updateMaxSizeInterval=null)}}]),n}(h.default);t.default=E},30471:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(83771)),u=n(57130),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){(0,a.default)(this,n);var i=new s.default(u.initialize,u.IdbMetaInfoTable);return t.call(this,i,{primaryIndex:u.metaInfoPrimaryIndex,dateIndex:u.metaInfoDateIndex,sizeIndex:u.metaInfoSizeIndex,maxSize:e,dispose:r})}return n}(r(n(1474)).default);t.default=l},83771:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this))._initialize=e,a._table=r,a}return(0,o.default)(n,[{key:"doGet",value:function(e){var t=this;return this._initialize().then((function(){return t._table.get(e)}))}},{key:"doQueryByIndex",value:function(e,t){var n=this;return this._initialize().then((function(){return n._table.all({limit:t.limit,index:[e]})}))}},{key:"doGetAll",value:function(){var e=this;return this._initialize().then((function(){return e._table.all()}))}},{key:"doPut",value:function(e,t){var n=this;return this._initialize().then((function(){return n._table.createOrReplace(t)})).then((function(){return t}))}},{key:"doDel",value:function(e){var t=this;return this._initialize().then((function(){return t._table.remove(e)}))}},{key:"doCount",value:function(){var e=this;return this._initialize().then((function(){return e._table.count()}))}},{key:"doClear",value:function(){var e=this;return this._initialize().then((function(){return e._table.clear()}))}},{key:"doOpen",value:function(){return this._initialize()}},{key:"doClose",value:function(){return r.resolve()}}]),n}(a(n(79922)).default);t.default=l},1474:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=n(80835),f=n(12035),p=a(n(91080)),h=a(n(79922)),_=n(31688),v=function(e){(0,l.default)(h,e);var t,n,a=(0,c.default)(h);function h(e,t){var n;if((0,s.default)(this,h),(n=a.call(this))._enqueue=(0,_.createEnqueue)(),n._purge=function(){if(n._pendingPurgePromise)return n._pendingPurgePromise;var e=n.open().then((function(){return(0,d.promiseLoop)((function(e){var t=function(){n._pendingPurgePromise=null,e()},a=n.getCurrentSize();if(!(null==a||a<=n._maxSize))return n.queryOneByIndex(n._dateIndex).then((function(e){var a=n.getCurrentSize(),s=n._maxSize;if(!(null==a||a<=s)){if(null==e)return(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.count();case 2:t=e.sent,__LOG__(3,void 0,void 0,!0)`SizeLruObjectStore: _purge error: No row returned but currentSize (${a}) > maxSize (${s}). Row count is ${t} (may be out of date).`,SEND_LOGS("size-lru-store-invalid-empty");case 4:case"end":return e.stop()}}),e)})))(),r.reject(new Error("Query returned no result but currentSize > maxSize"));var u=e[n._primaryIndex];return n.del(u)}t()}));t()}))}));return n._pendingPurgePromise=e},n._schedulePurge=function(){n._purgeTimer.debounce(2e3)},n.doPut=n._enqueue(function(){var e=(0,o.default)(i.default.mark((function e(t,r){var a,o,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r[n._primaryIndex]===t){e.next=2;break}throw new Error("The key you provide does not match.");case 2:return e.next=4,n._store.get(t);case 4:return a=e.sent,o=null==a?0:n._getSize(a),s=n._getSize(r),e.next=9,n._store.put(t,r);case 9:return u=e.sent,n._currentSize=(0,p.default)(n.getCurrentSize(),"_this.getCurrentSize()")-o+s,n._schedulePurge(),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),n.doDel=n._enqueue(function(){var e=(0,o.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._store.get(t);case 2:if(null!=(r=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,n._dispose(t,r);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(5),__LOG__(3,void 0,void 0,!0)`SizeLRUObjectStore: _dispose error: ${e.t0.message}`,SEND_LOGS("size-lru-store-dispose-error"),e.t0;case 14:return e.next=16,n._store.del(t);case 16:n._currentSize=(0,p.default)(n.getCurrentSize(),"_this.getCurrentSize()")-n._getSize(r);case 17:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(){return e.apply(this,arguments)}}()),n._store=e,n._primaryIndex=t.primaryIndex,n._dateIndex=t.dateIndex,n._sizeIndex=t.sizeIndex,t.maxSize<0)throw new Error("Cannot set max size to a negative number");return n._maxSize=Math.floor(t.maxSize),n._dispose=t.dispose,n._purgeTimer=new f.ShiftTimer((function(){n._purge().catch((function(e){__LOG__(3)`Error while purging: ${e.message}`}))})),n}return(0,u.default)(h,[{key:"getCurrentSize",value:function(){return this._currentSize}},{key:"getMaxSize",value:function(){return this._maxSize}},{key:"setMaxSize",value:function(e){return e<0?r.reject("Cannot set size to a negative number"):(this._maxSize=Math.floor(e),this._purgeTimer.cancel(),this._purge().catch((function(e){__LOG__(3)`Error while purging during setMaxSize: ${e.message}`})))}},{key:"putObject",value:function(e){var t=e[this._primaryIndex];return this.put(t,e)}},{key:"_getSize",value:function(e){var t=e[this._sizeIndex];return"number"!=typeof t||t<0?(__LOG__(3)`Invalid size in index ${this._sizeIndex}: ${t}`,0):t}},{key:"doGet",value:function(e){return this._store.get(e)}},{key:"queryOneByIndex",value:function(e){return this._store.queryByIndex(e,{limit:1}).then((function(e){return 0===e.length?null:e[0]}))}},{key:"doQueryByIndex",value:function(e,t){return this._store.queryByIndex(e,t)}},{key:"doGetAll",value:function(){return this._store.getAll()}},{key:"doClear",value:(n=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._purgeTimer.cancel(),e.next=3,this._store.clear();case 3:this._currentSize=0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"doCount",value:function(){return this._store.count()}},{key:"doOpen",value:(t=(0,o.default)(i.default.mark((function e(){var t,n=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._store.open();case 2:if(null==this._currentSize){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._store.doGetAll();case 6:t=e.sent,this._currentSize=t.reduce((function(e,t){return e+n._getSize(t)}),0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"doClose",value:function(){return this._currentSize=null,this._store.close()}}]),h}(h.default);t.default=v},16952:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.downloadMsg=function(e){var t=e.msg,n=e.isUserClick,a=e.mode,i=e.downloadEvenIfExpensive,o=e.rmrReason,s=e.rmrData,u=t.mediaObject;return u?u.getPendingProcess("fromDisk").then((function(){return n&&u.userDownloadAttemptCount++,(0,L.downloadMedia)({mimetype:t.mimetype,mediaObject:u,downloadEvenIfExpensive:i,mediaType:(0,R.msgToMediaType)(t),rmrReason:o,rmrData:s,downloadOrigin:ee(t),isVcardOverMmsDocument:t.isVcardOverMmsDocument,mode:a}).then((function(){u.userDownloadAttemptCount=0}))})):(__LOG__(4,void 0,new Error,!0)`id: ${t.id.toString()} type: ${t.type}`,SEND_LOGS("media-fault: downloadMsg msg without mediaObject"),r.resolve())},t.cancelDownloadMedia=te,t.checkExistence=function(){return ne.apply(this,arguments)},t.cancelDownloadMsg=function(e){e.mediaObject?te(e.mediaObject):e.mediaObject||(__LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: cancelDownloadMsg msg without mediaObject"))},t.prepRawMedia=function(e,t){var n;__LOG__(2)`Prepping raw media`,n=t.isPtt?P.OUTWARD_TYPES.PTT:t.asDocument?P.OUTWARD_TYPES.DOCUMENT:t.asGif?P.OUTWARD_TYPES.VIDEO:t.isAudio?P.OUTWARD_TYPES.AUDIO:P.OUTWARD_TYPES.UNKNOWN;var a=r.resolve(e).then((function(e){return e.autoreleaseWhenPromiseCompletes(a),(0,G.default)(e,t)}));return new Z(n,a)},t.forwardMediaMsg=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];__LOG__(2)`Prepping media msg`;var i=e.mediaObject;if(!i)return __LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: forwardMediaMsg msg without mediaObject"),r.reject("non initialized media");var o=e.mediaData.toJSON();o.preview&&(o.preview=i.contentInfo._preview);o.mediaBlob&&o.mediaBlob.retain();var s=o.isGif?{isGif:!0}:{};o.type===P.OUTWARD_TYPES.PTT&&(o.type=P.OUTWARD_TYPES.AUDIO);var u={businessOwnerJid:e.businessOwnerJid,productId:e.productId,currencyCode:e.currencyCode,priceAmount1000:e.priceAmount1000,salePriceAmount1000:e.salePriceAmount1000,retailerId:e.retailerId,url:e.url,productImageCount:e.productImageCount,title:e.title,description:e.description};return new Z(o.type,r.resolve(o)).sendToChat(t,{forwardedFromWeb:!0,caption:o.type===P.OUTWARD_TYPES.DOCUMENT?e.caption:void 0,addEvenWhilePreparing:!0,placeholderProps:s,isForwarded:e.isForwarded||!e.isSentByMe,forwardingScore:e.getForwardingScoreWhenForwarded(),multicast:a,productMsgOptions:u}).then((function(t){var r;o.type===P.OUTWARD_TYPES.STICKER&&(new N.default.StickerSend({stickerSendOrigin:N.default.STICKER_SEND_ORIGIN_TYPE.FORWARD,stickerIsAnimated:Boolean(null===(r=e.mediaData)||void 0===r?void 0:r.isAnimated)}).commit(),n(77943).default.addStickerWithMediaData(o,e.id.id));return t}))},t.cancelUploadMedia=re,t.cancelUploadMsg=function(e){e.mediaObject?re(e.mediaObject):(__LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: cancelUploadMsg msg without mediaObject"))},t.getUploadOriginForChat=ae,t.resumeUploadMsg=function(e){var t=e.mediaObject;if(!t)return __LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: resumeUploadMsg msg without mediaObject"),r.resolve();t.userUploadAttemptCount++;var n=(0,x.uploadMedia)({mimetype:e.mimetype,mediaObject:t,mediaType:(0,R.msgToMediaType)(e),forwardedFromWeb:Boolean(e.forwardedFromWeb),uploadOrigin:ae(e.chat)}).then((function(n){var r=n.mediaEntry;if(!r)throw new Error("upload failed: media entry was not created");t.userUploadAttemptCount=0;var a={deprecatedMms3Url:r.deprecatedMms3Url,directPath:r.directPath,mediaKey:r.mediaKey,mediaKeyTimestamp:r.mediaKeyTimestamp,filehash:t.filehash,encFilehash:r.encFilehash,size:t.size,streamingSidecar:r.sidecar,firstFrameSidecar:r.firstFrameSidecar};return _e(e,a).then((function(){return e}))}));return(0,Y.resendMsgToChat)(e.chat,n).catch((function(){e.ack=g.default.ACK.FAILED}))},t.mediaMetadata=function(e){var t=e.mediaObject;if(!t)throw __LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: mediaMetadata msg without mediaObject"),new Error("msg.mediaMetadata with no mediaObject");var n=t.entries.getEntryByEncFilehash({encFilehash:e.encFilehash,deprecatedMms3Url:e.deprecatedMms3Url});if(!n)throw __LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: mediaMetadata no entry"),new Error("msg.mediaMetadata with entry mismatch");var r=e.mediaData;return{url:n.deprecatedMms3Url,directPath:n.directPath,encFilehash:n.encFilehash,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp,filehash:e.filehash,type:r.type,mimetype:r.mimetype,filename:r.filename,duration:r.duration,width:r.fullWidth,height:r.fullHeight,firstFrameLength:r.firstFrameLength,isAnimated:r.isAnimated,thumbnailDirectPath:e.thumbnailDirectPath,thumbnailSha256:e.thumbnailSha256,thumbnailEncSha256:e.thumbnailEncSha256,thumbnailHeight:e.thumbnailHeight,thumbnailWidth:e.thumbnailWidth}},t.videoStreamingInfo=function(e){var t=e.mediaObject;return t?t.videoStreamingInfo(e.id.toString()):null},t.manuallySetMedia=function(e){var t=e.msg,n=e.media,r=e.rmrReason,a=t.mediaObject;if(!a)return;F.default.createFromData(n,t.mimetype).then((function(e){(0,L.manuallySetMedia)({mimetype:t.mimetype,mediaObject:a,mediaBlob:e,mediaType:(0,R.msgToMediaType)(t),rmrReason:r,downloadOrigin:ee(t)})}))},t.clearMediaForChat=function(e){k.clearMediaForChat(e)},t.prepareMsg=function(e){var t=e.mediaObject;if(t)return t.resolveWhenConsolidated();var n=e.mediaData,a=n.preview;return!a||void 0!==n.aspectRatio||void 0!==n.fullWidth&&void 0!==n.fullHeight?r.resolve():(0,D.getImageWidthHeight)(a).then((function(t){var n=t.width,r=t.height;e.mediaObject||e.mediaData.set({aspectRatio:n/r})}))},t.registerMsgEarly=function(e,t){e.isUnsentPhoneMsg()&&(__LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: registerMsgEarly msg without mediaObject"));for(var n={},r=0;r<P.MEDIA_MSG_PROPS.length;r++){var a=P.MEDIA_MSG_PROPS[r],i=t[a];n[a]=void 0!==i?i:e[a]}n.mimetype||n.type!==P.OUTWARD_TYPES.IMAGE||(t.mimetype=n.mimetype="image/jpeg");e.on(X,ie),de(e,n,N.default.WEBC_RMR_REASON_CODE.MSG_UPDATE);for(var o={},s=0;s<P.MSG_SPECIFIC_FIELDS.length;s++){var u=P.MSG_SPECIFIC_FIELDS[s];o[u]=n[P.MEDIA_TO_MSG[u]]}e.mediaData.set(o)},t.registerMsg=function(e){e.mimetype||e.type!==P.OUTWARD_TYPES.IMAGE||(e.mimetype="image/jpeg");e.mimetype||e.type!==P.OUTWARD_TYPES.STICKER||(e.mimetype="image/webp");e.on(X,ie),oe(e,N.default.WEBC_RMR_REASON_CODE.MSG_INIT)},t.deregisterMsg=function(e){e.off(null,ie);var t=e.mediaObject;t&&k.disassociateMediaFromMsg(t,e)},t.downloadProgressiveJpegThumbnail=se,t.downloadStatusV3Thumbnail=function(){return le.apply(this,arguments)},t.downloadVideoThumbnail=function(){return ce.apply(this,arguments)},t.registerSticker=function(e){ve(e,e.mediaObject||function(e){if(!e.filehash)return __LOG__(4,void 0,new Error,!0)`Unexpected sticker with no filehash`,void SEND_LOGS("sticker-filehash-error");var t=k.getOrCreateMediaObject(e.filehash);return k.associateMediaWithSticker(t,e),t}(e),R.default.STICKER)},t.deregisterSticker=function(e){var t=e.mediaObject;t&&k.disassociateMediaFromSticker(t,e)},t.registerStickerPackIcon=function(e){ve(e,e.mediaObject||function(e){if(!e.filehash)return __LOG__(4,void 0,new Error,!0)`Unexpected sticker pack with no filehash`,void SEND_LOGS("sticker-pack-filehash-error");var t=k.getOrCreateMediaObject(e.filehash);return k.associateMediaWithStickerPack(t,e),t}(e),R.default.IMAGE)},t.deregisterStickerPackIcon=function(e){var t=e.mediaObject;t&&k.disassociateMediaFromStickerPack(t,e)},t.downloadStickerOrStickerPackIcon=function(e,t){if(e.isPlaceholder)return e.mediaData.mediaStage=P.MEDIA_DATA_STAGE.PREPARING,r.resolve();var a=e.mediaObject;if(!a)return r.reject(new Error("media-fault: downloadStickerOrStickerPackIcon sticker/stickerPack without mediaObject"));if(a.downloadStage===P.DOWNLOAD_STAGE.RESOLVED)return r.resolve();var i="STICKER"===t?N.default.WEBC_RMR_REASON_CODE.STICKER_PANEL_STICKER:N.default.WEBC_RMR_REASON_CODE.STICKER_PANEL_ICON,o=!1;return a.getPendingProcess("fromDisk").then((function(){if(!w.default.supportsFeature(w.default.F.MD_BACKEND)&&!e.deprecatedMms3Url||!e.filehash||!e.mediaKey||!e.encFilehash)return o=!0,y.default.rmr({mediaObject:a,signal:(new _.default).signal,rmrReason:i})})).then((function(){return(0,L.downloadMedia)({mimetype:e.mimetype,mediaObject:e.mediaObject,downloadEvenIfExpensive:!0,mediaType:(0,R.msgToMediaType)({type:e.type,isGif:!1}),rmrReason:i,downloadOrigin:N.default.DOWNLOAD_ORIGIN_TYPE.STICKER_PICKER,shouldThrow:!0})})).then((function(){w.default.supportsFeature(w.default.F.MD_BACKEND)&&o&&V.default.webServerStickerPanel&&n(77943).default.updateStickerMediaData(e.filehash,a.entries.getDownloadEntry())}))},t.prepSticker=function(e){__LOG__(2)`Prepping sticker`;var t=e.mediaObject,n=e.mediaData.toJSON();if(n.fullWidth=125,n.fullHeight=125,!t)return __LOG__(4,void 0,new Error,!0)`id: ${e.id}`,SEND_LOGS("media-fault: prepSticker sticker without mediaObject"),new Z(n.type,r.reject("non initialized media"));return new Z(n.type,r.resolve(n))},t.uploadProductImage=function(e,t){return(0,S.blobToArrayBuffer)(e.forceToBlob()).then((function(e){return C.default.unencryptedUpload({file:e,hash:t,signal:(new _.default).signal,type:R.default.PRODUCT_CATALOG_IMAGE,uploadOrigin:N.default.UPLOAD_ORIGIN_TYPE.PRODUCT_CATALOG})})).then((function(e){return new URL(e.directPath,"https://mmg.whatsapp.net").toString()}))},t.MediaPrep=void 0;var o=i(n(87757)),s=i(n(63038)),u=i(n(81109)),l=i(n(48926)),c=i(n(34575)),d=i(n(93913)),f=n(39951),p=i(n(91080)),h=i(n(41143)),_=i(n(35340)),v=n(2277),m=i(n(79140)),g=i(n(34263)),y=i(n(75214)),E=i(n(48198)),S=n(19059),b=n(71701),T=i(n(74117)),w=i(n(22021)),A=a(n(93783)),C=i(n(51985)),O=i(n(76486)),M=i(n(28719)),I=i(n(56789)),k=a(n(9861)),P=n(87261),R=a(n(16024)),D=n(81365),N=i(n(8643)),L=n(83653),x=n(65108),U=i(n(5315)),F=i(n(74984)),G=i(n(92458)),B=i(n(94025)),j=i(n(75554)),Y=n(83537),K=n(67298),W=i(n(63276)),V=i(n(63056)),H=n(89305),$=n(53395),z=n(98593),q=i(n(27410)),J=i(n(69267)),Q=n(75793),X=`change:phoneUploading change:ack ${P.MEDIA_MSG_PROPS.map((function(e){return`change:${e}`})).join(" ")}`,Z=function(){function e(t,n){var a=this;(0,c.default)(this,e),this._baseType=t,this._mediaData=new M.default({mediaStage:P.MEDIA_DATA_STAGE.PREPARING}),this._prepwork=n.then((function(e){if(a._mediaData.set(e),!e.filehash)return e.mediaBlob||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: no hash or blob")),(0,$.getHash)(e.mediaBlob).then((function(e){a._mediaData.filehash=e}))}),(function(e){return a._mediaData.mediaStage=P.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED,r.reject(e)}))}return(0,d.default)(e,[{key:"sendToChat",value:function(e,t){return(0,f.promiseCallSync)(he,null,this,e,t)}},{key:"waitForPrep",value:function(){var e=this;return this._prepwork.then((function(){return e._mediaData}))}}]),e}();function ee(e){return e.asProduct?N.default.DOWNLOAD_ORIGIN_TYPE.PRODUCT_CATALOG:e.isStatusV3?N.default.DOWNLOAD_ORIGIN_TYPE.STATUS_USER:e.isGroupMsg?N.default.DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP:N.default.DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL}function te(e){(0,L.cancelDownloadMedia)(e)}function ne(){return(ne=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForPhoneUpload();case 2:if(t.mediaObject){e.next=5;break}return __LOG__(4,void 0,new Error,!0)`checkExistence msg without mediaObject, id: ${t.id.toString()} type: ${t.type}`,SEND_LOGS("media-fault: checkExistence msg without mediaObject"),e.abrupt("return");case 5:return e.next=7,(0,L.checkExistence)({mimetype:t.mimetype,mediaObject:t.mediaObject,mediaType:(0,R.msgToMediaType)({type:t.type,isGif:!1})});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){(0,x.cancelUploadMedia)(e)}function ae(e){return e?(0,H.unproxy)(e).isGroup?N.default.UPLOAD_ORIGIN_TYPE.CHAT_GROUP:N.default.UPLOAD_ORIGIN_TYPE.CHAT_PERSONAL:N.default.UPLOAD_ORIGIN_TYPE.UNKNOWN}function ie(e){oe(e,N.default.WEBC_RMR_REASON_CODE.MSG_UPDATE)}function oe(e,t){if(e.isUnsentPhoneMsg()){e.mediaObject&&(__LOG__(4,void 0,new Error,!0)`id: ${e.id.toString()} type: ${e.type}`,SEND_LOGS("media-fault: consolidateMediaUpdate unsent message"));var n=fe(e);if(n.hasOwnProperty("preview")){var r=n.preview;delete n.preview,r&&F.default.createFromBase64Jpeg(r).then((function(t){e&&e.mediaData&&e.isUnsentPhoneMsg()&&(e.mediaData.preview=t)}))}e.mediaData.set((0,u.default)((0,u.default)({},n),{},{mediaStage:e.phoneUploading?P.MEDIA_DATA_STAGE.REMOTE_UPLOADING:P.MEDIA_DATA_STAGE.REMOTE_NEED_UPLOAD}))}else de(e,e,t)}function se(){return ue.apply(this,arguments)}function ue(){return(ue=(0,l.default)(o.default.mark((function e(t){var n,r,a,i,s,u,l,c,d,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.msg,r=t.isPreload,a=t.signal,__LOG__(2)`media.downloadProgressiveJpegThumbnail: start`,e.prev=2,i=(0,p.default)(n.scanLengths,"msg.scanLengths"),s=(0,p.default)(n.scansSidecar,"msg.scansSidecar"),u=(0,p.default)(n.mediaObject,"msg.mediaObject"),l=(0,p.default)(u.filehash,"mediaObject.filehash"),c=n.encFilehash,d=n.directPath,e.next=10,y.default.downloadAndDecrypt({directPath:d,encFilehash:c,filehash:l,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp,type:R.default.IMAGE,signal:a||(new _.default).signal,userDownloadAttemptCount:0,progressiveJpegOpts:{mimetype:"image/jpeg",scansSidecar:s,scanLengths:i,scanCount:1},isPreload:r});case 10:return f=e.sent,e.t0=u,e.next=14,F.default.createFromData(f,"image/jpeg");case 14:e.t1=e.sent,e.t2={fullPreviewData:e.t1},e.t0.consolidate.call(e.t0,e.t2),__LOG__(2)`media.downloadProgressiveJpegThumbnail: success`,e.next=26;break;case 20:if(e.prev=20,e.t3=e.catch(2),e.t3.name!==v.ABORT_ERROR){e.next=25;break}return __LOG__(2)`media.downloadProgressiveJpegThumbnail aborted`,e.abrupt("return");case 25:__LOG__(3,void 0,void 0,!0)`media.downloadProgressiveJpegThumbnail: error\n${(0,W.default)(e.t3)}`,SEND_LOGS("download-pjpeg-thumbnail-failed");case 26:case"end":return e.stop()}}),e,null,[[2,20]])})))).apply(this,arguments)}function le(){return(le=(0,l.default)(o.default.mark((function e(t){var n,r,a,i,s,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.msg,r=t.isPreload,a=t.signal,i=n.encFilehash,s=n.thumbnailSha256,u=n.thumbnailEncSha256,l=n.thumbnailDirectPath,!(n.type===g.default.MSG_TYPE.IMAGE&&n.scanLengths&&n.scansSidecar&&i)){e.next=6;break}return e.next=5,se({msg:n,signal:a,isPreload:r});case 5:return e.abrupt("return");case 6:if(!(s&&u&&l)){e.next=10;break}return e.next=9,(0,E.default)({msg:n,signal:a,isPreload:r});case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=(0,l.default)(o.default.mark((function e(t){var n,r,a,i,u,l,c,d,f,h,v,m,E,S;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.msg,r=n.encFilehash,a=n.filehash,i=n.directPath,r&&a&&i){e.next=4;break}return e.abrupt("return");case 4:return __LOG__(2)`media.downloadVideoThumbnail: start`,e.prev=5,u=Math.max(parseInt(n.mediaData.duration,10),1),l={video:{size:n.mediaData.size,duration:u},secondsToDownload:1},e.next=10,y.default.downloadAndDecrypt({directPath:i,encFilehash:r,filehash:a,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp,type:R.default.VIDEO,signal:(new _.default).signal,userDownloadAttemptCount:0,partialVideoOpts:l,isPreload:!0});case 10:return c=e.sent,d=new Blob([c],{type:"video/mp4"}),e.next=14,A.generateVideoThumbsAndDuration({file:d,maxDimensions:[g.default.VIDEO_THUMB_MAX_EDGE],debugHint:"downloadVideoThumbnail"});case 14:return f=e.sent,h=(0,s.default)(f.thumbs,1),v=h[0],e.next=19,F.default.createFromBase64Jpeg(J.default.parseDataURL(v.url).data);case 19:m=e.sent,E=(0,p.default)(n.mediaObject,"mediaObject cannot be null for thumbnail download"),S={fullPreviewData:m,fullWidth:v.fullWidth,fullHeight:v.fullHeight},E.consolidate(S),__LOG__(2)`media.downloadVideoThumbnail: success`,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(5),__LOG__(3,!0)`media.downloadVideoThumbnail: error\n${(0,W.default)(e.t0)}`;case 29:case"end":return e.stop()}}),e,null,[[5,26]])})))).apply(this,arguments)}function de(e,t,n){var r=fe(t),a=e.mediaObject,i=t.filehash;if(a)i&&i!==a.filehash&&(__LOG__(2)`media:msg ${e.id.toString()} ${a.filehash?"changed":"added"} filehash`,k.disassociateMediaFromMsg(a,e),a=k.getOrCreateMediaObject(i),e.mediaObject=a,k.associateMediaWithMsg(a,e));else{a=i?k.getOrCreateMediaObject(i):new I.default;var o=e.mediaData;void 0!==o.aspectRatio&&(r.aspectRatio=o.aspectRatio),e.mediaObject=a,k.associateMediaWithMsg(a,e)}var s=!1,u=t.deprecatedMms3Url,l=t.mediaKey,c=t.mediaKeyTimestamp,d=t.encFilehash,f=t.type,p=t.streamingSidecar,h=t.firstFrameSidecar,_=t.directPath,v=t.scansSidecar,m=t.scanLengths;if(u||d){var g,y=~R.MEDIA_TYPE_VALUES.indexOf(f)?f:null;(s=!a.entries.has({encFilehash:d,deprecatedMms3Url:u}))?l&&y&&d?g=a.entries.addEntry({deprecatedMms3Url:u,mediaKey:l,mediaKeyTimestamp:c,encFilehash:d,type:y,sidecar:p,directPath:_,firstFrameSidecar:h,scansSidecar:v,scanLengths:m,debugHint:"consolidate"}):s=!1:l&&(g=a.entries.updateEntry({deprecatedMms3Url:u,mediaKey:l,mediaKeyTimestamp:c,encFilehash:d,type:y,sidecar:p,directPath:_,firstFrameSidecar:h,scansSidecar:v,scanLengths:m})),g||(s=!1),s&&a.downloadStage===P.DOWNLOAD_STAGE.ERROR_MISSING&&(r.downloadStage=P.DOWNLOAD_STAGE.INIT)}if(a.consolidate(r)||a.notifyMsgsAsync(),s&&a.downloadStage===P.DOWNLOAD_STAGE.NEED_POKE){var E;try{E=(0,R.msgToMediaType)(e)}catch(n){if(!t.type)throw n;E=(0,R.msgToMediaType)({type:t.type,isGif:e.isGif})}(0,L.downloadMedia)({mimetype:t.mimetype,mediaObject:a,downloadEvenIfExpensive:!1,mediaType:E,rmrReason:n,downloadOrigin:ee(e)})}}function fe(e){var t={};return P.MAPPED_MSG_PROPS.forEach((function(n){var r=e[n],a=P.MSG_TO_MEDIA[n];t[a]=r})),t}function pe(e,t){return"product"===t.type?N.default.DOWNLOAD_ORIGIN_TYPE.PRODUCT_CATALOG:(0,H.unproxy)(e).isGroup?N.default.DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP:N.default.DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL}function he(e,t,a){var i;__LOG__(2)`Media:sendToChat chat ${t.id.toString()}`;var c,d,f=a.caption,p=a.quotedMsg?a.quotedMsg.msgContextInfo(t.id):{},_=(0,b.getMaybeMeUser)(),v=a.productMsgOptions||{},y=void 0;if(!t.isUser&&w.default.supportsFeature(w.default.F.MD_BACKEND)&&(y=(0,Q.toUserWid)(_)),V.default.ephemeralMessages){t.isEphemeralSettingOn()&&(c=t.getEphemeralSetting());var E=t.getEphemeralSettingTimestamp();null!=E&&(d=E)}var S,C,M,I=(0,u.default)({t:m.default.globalUnixTime(),from:_,isNewMsg:!0,to:t.id,self:"out",type:null!==(i=a.type)&&void 0!==i?i:e._baseType,ack:g.default.ACK.CLOCK,local:!0,id:new U.default({from:_,to:t.id,id:(0,j.default)(),participant:y,selfDir:"out"}),caption:f,quotedMsg:p.quotedMsg,quotedParticipant:p.quotedParticipant,quotedStanzaID:p.quotedStanzaID,quotedRemoteJid:p.quotedRemoteJid,mentionedJidList:a.mentionedJidList,isForwarded:a.isForwarded,forwardingScore:a.forwardingScore,multicast:a.multicast,forwardedFromWeb:a.forwardedFromWeb,ctwaContext:a.ctwaContext,ephemeralDuration:c,ephemeralSettingTimestamp:d},v),G=e.waitForPrep().then((function(e){var t=e.mediaBlob;return!t||t instanceof F.default?r.resolve(e):F.default.createFromData(t,t.type).then((function(t){return e.mediaBlob=t,e}))})).then((function(e){var n=e.filehash;n||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: sendToChat filehash undefined"));var r=k.getOrCreateMediaObject(n),i=r.mediaBlob;if(i&&(i.retain(),e.mediaBlob&&e.mediaBlob.autorelease(),e.mediaBlob=i),e.mediaBlob&&(e.renderableUrl=e.mediaBlob.url()),r.consolidate(e.toJSON()),e.mediaBlob&&e.mediaBlob.autorelease(),(0,D.shouldUseMediaCache)((0,R.castToV4)(r.type))&&e.mediaBlob){var o=e.mediaBlob.formData();O.default.put(n,o)}(0,L.downloadMedia)({mimetype:e.mimetype,mediaObject:r,downloadEvenIfExpensive:!0,mediaType:(0,R.msgToMediaType)({type:e.type,isGif:e.isGif}),rmrReason:N.default.WEBC_RMR_REASON_CODE.SEND_TO_CHAT,downloadOrigin:pe(t,I),mode:"manual"});var s=r.msgProps(e);return s.caption=f,f||e.type!==P.OUTWARD_TYPES.DOCUMENT||(s.caption=e.filename),V.default.viewOnceWrite&&a.isViewOnce&&(s.isViewOnce=!0),s}));function W(){return H.apply(this,arguments)}function H(){return(H=(0,l.default)(o.default.mark((function e(n){var a,i,l,c,d,f,p,_,v,m,y,E,b,w,O,M,I,k,P,D,N,L,U;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S=n,(a=n.mediaObject)||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: incorrect media object for created msg")),(0,h.default)(a,"msg is missing mediaObject"),i=(0,R.msgToMediaType)(n),l=a.entries.getUploadEntry(),c=l?{key:l.mediaKey,timestamp:l.mediaKeyTimestamp}:(0,B.default)(),d=a.contentInfo,f=d.fullPreviewData,p=d.fullPreviewSize,_=n.body,!me(i)||f||!a.contentInfo.preview){e.next=19;break}return e.next=12,A.base64ImageToCanvas(a.contentInfo.preview.url());case 12:return v=e.sent,e.next=15,A.generateMicroThumb(v,1300,{mimetype:"image/jpeg",maxAttempts:10});case 15:m=e.sent,f=a.contentInfo.preview,p={width:m.width,height:m.height},_=J.default.parseDataURL(m.dataUrl).data;case 19:return y=f&&me(i),E=n.safe(),b=f&&y&&E.type===g.default.MSG_TYPE.DOCUMENT?(0,q.default)({thumbnail:f,mediaKeyInfo:c,mediaType:(0,T.default)(E),uploadOrigin:ae(t),forwardedFromWeb:Boolean(n.forwardedFromWeb)}):r.resolve(null),w=(0,x.uploadMedia)({mimetype:n.mimetype,mediaObject:a,mediaType:i,forwardedFromWeb:Boolean(n.forwardedFromWeb),uploadOrigin:ae(t),mediaKeyInfo:c}),e.next=25,r.all([w,b]);case 25:if(O=e.sent,M=(0,s.default)(O,2),I=M[0],k=I.kind,P=I.mediaEntry,D=M[1],N=null==D?void 0:D.mediaEntry,C=k,P){e.next=35;break}throw new Error("upload failed: media entry was not created");case 35:if(L={},!y){e.next=44;break}if(!(N&&D&&p)){e.next=41;break}L={thumbnailDirectPath:N.directPath,thumbnailSha256:D.filehash,thumbnailEncSha256:N.encFilehash,thumbnailHeight:p.height,thumbnailWidth:p.width},e.next=44;break;case 41:throw U={thumbnailResultEntry:N,uploadThumbnailResult:D,fullPreviewSize:p},__LOG__(4,void 0,new Error,!0)`upload failed: thumbnail data incomplete\nDebug info:${JSON.stringify(U)}`,SEND_LOGS("mms-thumbnail-data-incomplete"),new Error("upload failed: thumbnail data incomplete");case 44:return e.abrupt("return",_e(S,(0,u.default)({deprecatedMms3Url:P.deprecatedMms3Url,directPath:P.directPath,mediaKey:P.mediaKey,mediaKeyTimestamp:P.mediaKeyTimestamp,filehash:a.filehash,encFilehash:P.encFilehash,size:a.size,streamingSidecar:P.sidecar,firstFrameSidecar:P.firstFrameSidecar,body:_},L)));case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(a.addEvenWhilePreparing){var $=a.placeholderProps||{};M=(0,Y.addAndSendMsgToChat)(t,(0,u.default)((0,u.default)({},$),I),(function(e){return S=e,G.then((function(e){return _e(S,e)})).then((function(){return W(S)}))}))[1]}else{var z=G.then((function(e){var t=a.useBasePropsType?I.type:e.type;return(0,u.default)((0,u.default)((0,u.default)({},I),e),{},{type:t})}));M=(0,Y.addAndSendMsgToChat)(t,z,W)[1]}return M.then((function(e){return{result:e,error:null}})).catch((function(e){return{result:null,error:e}})).then((function(e){var t,r,a=e.result,i=e.error;if(a===K.SendMsgResult.OK)return w.default.supportsFeature(w.default.F.MD_BACKEND)&&V.default.webServerStickerPanel&&S.type===P.OUTWARD_TYPES.STICKER&&n(77943).default.addStickerWithMediaData(S.mediaData,S.id.toString()),K.SendMsgResult.OK;var o=null===(t=S)||void 0===t||null===(r=t.mediaObject)||void 0===r?void 0:r.uploadStage;if(S&&(S.ack=g.default.ACK.FAILED),C===x.UploadMediaResultKind.CANCELLATION)return __LOG__(2)`Media:sendToChat canceled`,K.SendMsgResult.ERROR_CANCELLED;if(__LOG__(3)`Media:sendToChat error\nresult: ${a}\nuploadStage: ${o}\nuploadResultKind: ${C}\nerror: ${String(i)}`,null!=o)switch(o){case P.UPLOAD_STAGE.NEED_UPLOAD:case P.UPLOAD_STAGE.ERROR_TOO_LARGE:return K.SendMsgResult.ERROR_UPLOAD;case P.UPLOAD_STAGE.ERROR_MISSING:return K.SendMsgResult.ERROR_EXPIRED}return C===x.UploadMediaResultKind.ERROR?K.SendMsgResult.ERROR_UPLOAD:null!=a?a:K.SendMsgResult.ERROR_UNKNOWN}))}function _e(e,t){return(0,z.updateLocal)(e.id,t).then((function(){e.set(t)}))}function ve(e,t,n){var r,a,i=(r=e,a={},P.MAPPED_STICKER_PROPS.forEach((function(e){var t=r[e],n=P.MSG_TO_MEDIA[e];a[n]=t})),a);if(e.mediaData.set(i),t){e.mediaObject=t;var o=e.deprecatedMms3Url,s=e.encFilehash;if((s||o)&&!t.entries.has({encFilehash:s,deprecatedMms3Url:o}))t.entries.addEntry({deprecatedMms3Url:o,mediaKey:e.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp,encFilehash:s,type:n,directPath:e.directPath,debugHint:"setMediaObjectValues"})&&t.downloadStage===P.DOWNLOAD_STAGE.ERROR_MISSING&&(i.downloadStage=P.DOWNLOAD_STAGE.INIT);t.consolidate(i)}}function me(e){return V.default.webUploadDocumentThumbMmsEnabled&&e===R.default.DOCUMENT}t.MediaPrep=Z},48523:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.checkAndRepair=function(e,t){var n=new o.default.WebcMediaAnalyzed;return(a={type:"prep",file:e,asGif:t},new r((function(e,t){__LOG__(2)`MediaAnalyzer:sendMessageToWorker`,u=i||new s.default,i=void 0,u.onmessage=function(n){try{n.data&&"log"===n.data.type?__LOG__(2)`(via Milan) ${n.data.msg}`:e(n.data)}catch(e){t(e)}},u.onerror=function(e){t(`Milan.onerror = ${e&&e.message?e.message:e}`)},u.postMessage(a)})).finally((function(){u&&(u.terminate(),i=new s.default)}))).then((function(e){var t=e.type,n=e.result,r=e.error,a=e.filename,i=e.file;switch(t){case"result":return __LOG__(2)`MediaAnalyzer:checkAndRepair approved file`,n;case"parsingError":return __LOG__(2)`trouble parsing file ${i} (fossil ${a}) ${String(r)}`,i&&(__LOG__(4,void 0,new Error,!0)`MediaAnalyzer:checkAndRepair got parsing error! ${String(r)}`,SEND_LOGS("media-parsing-error")),void __LOG__(2)`MediaAnalyzer:checkAndRepair rejected file (${String(r)})`}})).catch((function(e){__LOG__(4,void 0,new Error,!0)`MediaAnalyzer:checkAndRepair got error! ${String(e)}`,SEND_LOGS("media-detection-error")})).finally((function(t){if(n){var r=void 0;if(e.name){var a=e.name.split(".");a.length>1&&(r=a[a.length-1])}n.set({webcMediaSupported:!!t,webcMediaExtensions:r}),n.markWebcMediaAnalyzeT(),n.commit()}}));var a,u};var i,o=a(n(8643)),s=a(n(65227))},28719:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),o=a(n(59713)),s=a(n(34575)),u=a(n(93913)),l=a(n(16525)),c=a(n(29754)),d=a(n(2205)),f=a(n(99842)),p=r(n(56727)),h=n(24046),_=a(n(76486)),v=n(87261),m=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).type=(0,p.prop)(v.OUTWARD_TYPES.UNKNOWN),e.directPath=(0,p.prop)(),e.mediaKey=(0,p.prop)(),e.mediaKeyTimestamp=(0,p.prop)(),e.encFilehash=(0,p.prop)(),e.mediaStage=(0,p.prop)(v.MEDIA_DATA_STAGE.INIT),e.size=(0,p.prop)(),e.filehash=(0,p.prop)(),e.mimetype=(0,p.prop)(),e.mediaBlob=(0,p.prop)(),e.renderableUrl=(0,p.prop)(),e.fullHeight=(0,p.prop)(),e.fullWidth=(0,p.prop)(),e.aspectRatio=(0,p.prop)(),e.rgbaBuffer=(0,p.prop)(),e.rgbaHeight=(0,p.prop)(),e.rgbaWidth=(0,p.prop)(),e.animationDuration=(0,p.prop)(0),e.animatedAsNewMsg=(0,p.prop)(!1),e.isAnimated=(0,p.prop)(),e.singleLoopDuration=(0,p.prop)(),e.firstFrameLength=(0,p.prop)(),e.firstFrameSidecar=(0,p.prop)(),e.emojis=(0,p.prop)(),e.progressiveStage=(0,p.prop)(),e.isViewOnce=(0,p.prop)(!1),e.preview=(0,p.prop)(),e.sidecar=(0,p.prop)(),e.duration=(0,p.prop)(),e.durationFloat=(0,p.prop)(),e.isGif=(0,p.prop)(),e.gifAttribution=(0,p.prop)(),e.streamable=(0,p.derived)(e._isStreamable,["isGif","isViewOnce","mediaStage","sidecar","type","_swStreamingSupported"]),e._swStreamingSupported=(0,p.prop)(!1),e._listeningToSwSupport=(0,p.prop)(!1),e.filename=(0,p.prop)(),e.pageCount=(0,p.prop)(),e.documentPreview=(0,p.prop)(),e.isVcardOverMmsDocument=(0,p.prop)(!1),e.parsedVcards=(0,p.prop)(),e.fullPreviewSize=(0,p.prop)(),e.fullPreviewData=(0,p.prop)(),e.subtype=(0,p.prop)(),e}return(0,u.default)(n,[{key:"initialize",value:function(){(0,l.default)((0,c.default)(n.prototype),"initialize",this).call(this)}},{key:"set",value:function(e,t,r){var a,s=r;return"string"==typeof e?a=(0,o.default)({},e,t):(a=e,s=t),a=function(e){var t=e.filename||e.caption;if(t&&e.type===g.TYPE.DOCUMENT)return t=(0,h.cleanFilename)(t),(0,i.default)((0,i.default)({},e),{},{filename:t,caption:t});return e}(a),(0,l.default)((0,c.default)(n.prototype),"set",this).call(this,a,s)}},{key:"_isStreamable",value:function(){return this.isStreamable()}},{key:"isStreamable",value:function(){return this.isStreamableType()&&this.listenToServiceWorkerSupport()&&!this.isViewOnce}},{key:"_updateStreamingSupported",value:function(e){this._swStreamingSupported=e}},{key:"listenToServiceWorkerSupport",value:function(){return this._listeningToSwSupport||(this._listeningToSwSupport=!0),this._swStreamingSupported}},{key:"isStreamableType",value:function(){return!1}},{key:"isDownloadable",value:function(){return!this.isViewOnce&&(null!=this.renderableUrl||_.default.has(this.filehash)||this.mediaStage===v.MEDIA_DATA_STAGE.EXISTS||this.mediaStage===v.MEDIA_DATA_STAGE.PROGRESSIVE_READY)}}]),n}(p.default);m.Proxy="mediaData";var g=(0,p.defineModel)(m);g.TYPE=v.OUTWARD_TYPES;var y=g;t.default=y},75603:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaEntryList=t.MediaEntry=void 0;var i=a(n(34575)),o=a(n(93913)),s=n(88004),u=a(n(84052)),l=a(n(15958)),c=a(n(33386)),d=a(n(14256)),f="PROBABLY_ON_SERVER",p="PROBABLY_OFF_SERVER",h="UNKNOWN",_=function(){function e(t,n,r,a,o,s,u,l,c,d){(0,i.default)(this,e),this.useBackupUrl=!1,this._encFilehashPromise=null,this.deprecatedMms3Url=t,this.mediaKey=n,this.mediaKeyTimestamp=r,this.encFilehash=a,this.serverStatus=h,this.sidecar=s,this.directPath=u,this.firstFrameSidecar=l,this.type=o,this.scansSidecar=c,this.scanLengths=d}return(0,o.default)(e,[{key:"url",value:function(e){var t=this,n=e||{},a=n.useFallback,i=n.forceHashUrl,o=this.encFilehash;return o?l.default.getHostsInfo({operation:c.default.DOWNLOAD,encFilehash:o,type:this.type}).then((function(e){var n=e.selectedHost,r=e.fallbackHost,s=a&&r?r:n;return(0,u.default)({directPath:i?null:t.directPath,encFilehash:o,hostname:s.hostname,type:t.type})})):r.reject(new Error("media_entry: encFilehash does not exist"))}},{key:"markWhetherOnServer",value:function(e){this.serverStatus=e?f:p}}]),e}();t.MediaEntry=_;var v=function(){function e(){(0,i.default)(this,e),this.entries=[]}return(0,o.default)(e,[{key:"_updateEntry",value:function(e){var t=e.foundEntry,n=e.mediaKey,r=e.mediaKeyTimestamp,a=e.encFilehash,i=e.sidecar,o=e.directPath,u=e.firstFrameSidecar,l=e.scansSidecar,c=e.scanLengths,d=e.deprecatedMms3Url;if(n&&!(0,s.b64Equal)(t.mediaKey,n)){var f=t.mediaKey.replace("=","").split("\n")[0],p=n.replace("=","").split("\n")[0];return __LOG__(4,void 0,new Error,!0)`media-fault: mediaKey changed for the same MMS3 url. type:${t.type}. equal?:${f===p}. Debug:\n${JSON.stringify({before:{hasDirectPath:Boolean(t.directPath),hasEncFilehash:Boolean(t.encFilehash),hasMediaKey:Boolean(t.mediaKey),hasDeprecatedMms3Url:Boolean(t.deprecatedMms3Url)},after:{hasDirectPath:Boolean(o),hasEncFilehash:Boolean(a),hasDeprecatedMms3Url:Boolean(d)}},null,2)}`,SEND_LOGS("media-key-mismatch-same-mms3-url"),null}return null!=r&&(t.mediaKeyTimestamp=r),i&&(t.sidecar=i),u&&(t.firstFrameSidecar=u),l&&(t.scansSidecar=l),(null==c?void 0:c.length)&&(t.scanLengths=c),t.directPath=o,t}},{key:"updateEntry",value:function(e){var t=e.deprecatedMms3Url,n=e.mediaKey,r=e.mediaKeyTimestamp,a=e.encFilehash,i=(e.type,e.sidecar),o=e.directPath,s=e.firstFrameSidecar,u=e.scansSidecar,l=e.scanLengths,c=this.getEntryByEncFilehash({encFilehash:a,deprecatedMms3Url:t});if(c)return this._updateEntry({foundEntry:c,mediaKey:n,mediaKeyTimestamp:r,encFilehash:a,sidecar:i,directPath:o,firstFrameSidecar:s,scansSidecar:u,scanLengths:l,deprecatedMms3Url:t})}},{key:"addEntry",value:function(e){var t=e.deprecatedMms3Url,n=e.mediaKey,r=e.mediaKeyTimestamp,a=e.encFilehash,i=e.type,o=e.sidecar,s=e.directPath,u=e.firstFrameSidecar,l=e.scansSidecar,c=e.scanLengths,d=e.debugHint;null==a&&(__LOG__(4,void 0,new Error,!0)`Media type ${i} from ${d} is missing encFilehash`,SEND_LOGS(`media-entry-missing-upload-hash-${i}-${d}`));var f=this.entries,p=this.getEntryByEncFilehash({encFilehash:a,deprecatedMms3Url:t}),h=p?this._updateEntry({foundEntry:p,mediaKey:n,mediaKeyTimestamp:r,encFilehash:a,sidecar:o,directPath:s,firstFrameSidecar:u,scansSidecar:l,scanLengths:c,deprecatedMms3Url:t}):null;if(h)return h;if(!n)return null;var v=new _(t,n,r,a,i,o,s,u,l,c);return f.push(v),v}},{key:"_getKey",value:function(e){var t=e.encFilehash,n=e.deprecatedMms3Url;return null==t?`mms3:${n}`:t}},{key:"has",value:function(e){return null!=this.getEntryByEncFilehash(e)}},{key:"getEntryByEncFilehash",value:function(e){var t=this,n=this._getKey(e);return this.entries.find((function(e){return t._getKey(e)===n}))}},{key:"getUploadEntry",value:function(){return m(this),this.entries.find((function(e){return(0,d.default)(e.mediaKeyTimestamp)}))||null}},{key:"getDownloadEntry",value:function(){m(this);var e=this.entries[0];return e&&e.serverStatus!==p?e:null}}]),e}();function m(e){e.entries.sort((function(e,t){var n=g(t)-g(e);return 0===n?t.mediaKeyTimestamp-e.mediaKeyTimestamp:n}))}function g(e){var t=0;switch(e.serverStatus){case f:t+=200;break;case p:break;case h:t+=100}return e.encFilehash?t+=20:e._encFilehashPromise&&(t+=10),t}t.MediaEntryList=v},56789:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.consolidate=b,t.webMediaTypeToWamMediaType=function(e){switch(e){case"VIDEO":return 3;case"IMAGE":return 2;case"AUDIO":return 4;case"STICKER":return 16;case"DOCUMENT":return 8;case"PRODUCT":return 18;default:throw new Error(`web media type is invalid: ${e}`)}},t.default=void 0;var i=a(n(81109)),o=a(n(63038)),s=a(n(34575)),u=a(n(93913)),l=n(12035),c=a(n(34263)),d=a(n(4472)),f=n(75603),p=a(n(16024)),h=n(87261),_=n(81365),v=(a(n(8643)),a(n(74984))),m=a(n(2111)),g=n(7620),y=a(n(63056)),E=a(n(22021)),S=function(){function e(){var t=this;(0,s.default)(this,e),this._msgs=[],this._notifyTimer=new l.ShiftTimer((function(){!function(e){var t={};T(t,e,h.FIELDS.RAW),T(t,e.contentInfo,e.contentFields()),e.mediaBlob&&(t.renderableUrl=e.mediaBlob.url());for(var n=e._msgs,r=n.length,a=0;a<r;a++){var i=(0,o.default)(n[a],2),s=i[0],u=i[1];if(null!=s&&!u){if(s.type!==c.default.MSG_TYPE.CIPHERTEXT){t.mediaStage=w(s,e);for(var l=0;l<h.MSG_SPECIFIC_FIELDS.length;l++){var d=h.MSG_SPECIFIC_FIELDS[l];t[d]=s[h.MEDIA_TO_MSG[d]]}}else{delete t.mediaStage;for(var f=0;f<h.MSG_SPECIFIC_FIELDS.length;f++)delete t[h.MSG_SPECIFIC_FIELDS[f]]}s.mediaData.set(t)}}for(var p=n.length-1;p>=0;p--)n[p][1]&&n.splice(p,1);var _=e._callOnConsolidate;!e._pendingChanges&&_&&(e._callOnConsolidate=null,_.forEach((function(e){e()})));e._saveMedia&&e._saveMedia(e)}(t),function(e){var t={};T(t,e,h.FIELDS.RAW),T(t,e.contentInfo,e.contentFields()),e.mediaBlob&&(t.renderableUrl=e.mediaBlob.url());var n=A(e);e._stickers=e._stickers.filter((function(e){var t=(0,o.default)(e,2);t[0];return!t[1]})),e._stickers.forEach((function(e){var r=(0,o.default)(e,2),a=r[0];r[1];a.mediaData.set((0,i.default)((0,i.default)({},t),{},{mediaStage:n}))})),e._stickerPacks=e._stickerPacks.filter((function(e){var t=(0,o.default)(e,2);t[0];return!t[1]})),e._stickerPacks.forEach((function(e){var r=(0,o.default)(e,2),a=r[0];r[1];a.mediaData.set((0,i.default)((0,i.default)({},t),{},{mediaStage:n}))})),!e._pendingChanges&&e._callOnConsolidate&&(e._callOnConsolidate.forEach((function(e){e()})),e._callOnConsolidate=null);e._saveMedia&&e._saveMedia(e)}(t)})),this._callOnConsolidate=null,this._keyedProcesses=null,this._pendingChangesCount=0,this._saveMedia=null,this._stickers=[],this._stickerPacks=[],this.entries=new f.MediaEntryList,this.downloadStage=h.DOWNLOAD_STAGE.INIT,this.uploadStage=h.UPLOAD_STAGE.INIT,this.userUploadAttemptCount=0,this.userDownloadAttemptCount=0,this.downloadPromise=null,this.uploadPromise=null,this.mediaBlob=null,this.size=void 0,this.filehash=void 0,this.contentInfo={},this.progressiveStage=void 0,this.parsedVcards=null}return(0,u.default)(e,[{key:"consolidate",value:function(e){return!!b(this,e)&&(this.notifyMsgsAsync(),!0)}},{key:"clearBlob",value:function(){var e=this.mediaBlob;e&&(this.mediaBlob=null,e.autorelease())}},{key:"contentFields",value:function(){var e=this.type||h.TYPE.DOCUMENT;return h.FIELDS[e]}},{key:"resolveWhenConsolidated",value:function(){var e=this;return this._notifyTimer.ts||this._pendingChanges?new r((function(t){e._callOnConsolidate?e._callOnConsolidate.push(t):e._callOnConsolidate=[t]})):r.resolve()}},{key:"notifyMsgsAsync",value:function(){this._notifyTimer.debounce(0)}},{key:"addMsg",value:function(e){for(var t=this._msgs,n=0;n<t.length;n++){var r=(0,o.default)(t[n],2),a=r[0],i=r[1];a!==e||i||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("redundant-media-msg"))}t.push([e,!1]),this.notifyMsgsAsync()}},{key:"removeMsg",value:function(e){for(var t=this._msgs,n=!1,r=0;!n&&r<t.length;r++){var a=(0,o.default)(t[r],2),i=a[0],s=a[1];i!==e||s||(t[r][1]=!0,n=!0)}}},{key:"hasAssociatedMsgsOrStickers",value:function(){for(var e=this._msgs,t=0;t<e.length;t++)if(!e[t][1])return!0;return this.hasAssociatedStickers()||this.hasAssociatedStickerPacks()}},{key:"associatedMsgs",value:function(){for(var e=this._msgs,t=[],n=0;n<e.length;n++){var r=(0,o.default)(e[n],2),a=r[0];r[1]||t.push(a)}return t}},{key:"rmr",value:function(e){var t=this,a=this.associatedStickers();if(E.default.supportsFeature(E.default.F.MD_BACKEND)){if(a.length>0&&y.default.webServerStickerPanel)if(0===this.associatedMsgs().filter((function(e){return null!=e})).length)return n(77943).default.removeAndSave(a.map((function(e){return e.id}))),a.forEach((function(e){e.delete()})),r.resolve(200)}else{if(a.length>0)return(0,g.rmrSticker)(this.entries,this._stickers,a[0]).then((function(e){return e.status}));var i=this.associatedStickerPacks();if(i.length>0)return(0,g.rmrStickerPack)(this.entries,this._stickerPacks,i[0]).then((function(e){return e.status}))}var s=this._msgs.find((function(e){var t=(0,o.default)(e,2),n=t[0];return!t[1]&&!n.isUnsentPhoneMsg()}))||[null],u=(0,o.default)(s,1)[0];return u||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: rmr called on MediaObject with no msg")),u?(e.onMsgSelect(u),(0,m.default)(u).then((function(e){if(200===e.status){var n=e.isMD?t.entries.updateEntry({deprecatedMms3Url:u.deprecatedMms3Url,encFilehash:u.encFilehash,directPath:e.directPath}):t.entries.addEntry({deprecatedMms3Url:e.url,mediaKey:e.mediaKey||u.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp,encFilehash:e.encFilehash,type:u.mediaData.type,directPath:e.directPath,debugHint:"rmr"});n||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: rmr entry can not be found")),null==n||n.markWhetherOnServer(!0)}return e.status}))):r.reject(new Error("rmr called on MediaObject with no msg"))}},{key:"msgProps",value:function(e){var t={};T(t,this,h.FIELDS.RAW),T(t,this.contentInfo,this.contentFields()),T(t,e,h.MSG_SPECIFIC_FIELDS),t.preview=this.contentInfo._preview;var n={};for(var r in t){var a=h.MEDIA_TO_MSG[r];a&&(n[a]=t[r])}return n}},{key:"delete",value:function(){this._saveMedia=null;var e=n(16952),t=e.cancelDownloadMedia,r=e.cancelUploadMedia;t(this),r(this),this.clearBlob()}},{key:"runProcessIfNotRunBefore",value:function(e,t,n){var a=this,i=this._keyedProcesses;i||(i=this._keyedProcesses={}),i.hasOwnProperty(e)||(this._pendingChangesCount++,i[e]=r.resolve(n).then(t).then((function(e){a.consolidate(e)})).finally((function(){a._pendingChangesCount--,0===a._pendingChangesCount&&a.notifyMsgsAsync()})))}},{key:"getPendingProcess",value:function(e){return 0!==this._pendingChangesCount&&this._keyedProcesses&&this._keyedProcesses.hasOwnProperty(e)?this._keyedProcesses[e]:r.resolve()}},{key:"videoStreamingInfo",value:function(e){var t=this;if(this.type!==h.TYPE.VIDEO)return __LOG__(4,void 0,new Error,!0)`type: ${String(this.type)}`,SEND_LOGS("media-fault: media streaming info request for non-video type"),null;var n=this.entries.getDownloadEntry();return n&&n.sidecar?r.all([(0,d.default)(p.default.VIDEO,n.mediaKey),n.url()]).then((function(r){var a=(0,o.default)(r,2),s=a[0],u=a[1];return{cryptoKeys:(0,i.default)((0,i.default)({},s),{},{cipherKey:s.encKey,sidecar:n.sidecar}),streamData:{clientUrl:u,size:t.size,msgKey:e}}})):null}},{key:"addStickerPack",value:function(e){for(var t=this._stickerPacks,n=0;n<t.length;n++){var r=(0,o.default)(t[n],2),a=r[0],i=r[1];a!==e||i||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("redundant-sticker-pack-add"))}t.push([e,!1]),this.notifyMsgsAsync()}},{key:"addSticker",value:function(e){for(var t=this._stickers,n=0;n<t.length;n++){var r=(0,o.default)(t[n],2),a=r[0],i=r[1];a!==e||i||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("redundant-sticker-add"))}t.push([e,!1]),this.notifyMsgsAsync()}},{key:"removeSticker",value:function(e){for(var t=this._stickers,n=!1,r=0;!n&&r<t.length;r++){var a=(0,o.default)(t[r],2),i=a[0],s=a[1];i!==e||s||(t[r][1]=!0,n=!0)}}},{key:"removeStickerPack",value:function(e){for(var t=this._stickerPacks,n=!1,r=0;!n&&r<t.length;r++){var a=(0,o.default)(t[r],2),i=a[0],s=a[1];i!==e||s||(t[r][1]=!0,n=!0)}}},{key:"hasAssociatedStickers",value:function(){return this._stickers.some((function(e){var t=(0,o.default)(e,2);t[0];return!t[1]}))}},{key:"hasAssociatedStickerPacks",value:function(){return this._stickerPacks.some((function(e){var t=(0,o.default)(e,2);t[0];return!t[1]}))}},{key:"associatedStickers",value:function(){return this._stickers.reduce((function(e,t){var n=(0,o.default)(t,2),r=n[0];return n[1]?e:e.concat(r)}),[])}},{key:"associatedStickerPacks",value:function(){return this._stickerPacks.reduce((function(e,t){var n=(0,o.default)(t,2),r=n[0];return n[1]?e:e.concat(r)}),[])}},{key:"toJSON",value:function(){return{mediaBlob:this.mediaBlob,size:this.size,filehash:this.filehash,type:this.type,contentInfo:this.contentInfo,downloadStage:this.downloadStage,uploadStage:this.uploadStage}}}]),e}();function b(e,t){var n=e.contentInfo,r=!1,a=function(e){switch(e){case h.OUTWARD_TYPES.IMAGE:case h.OUTWARD_TYPES.PRODUCT:return h.TYPE.IMAGE;case h.OUTWARD_TYPES.VIDEO:return h.TYPE.VIDEO;case h.OUTWARD_TYPES.STICKER:return h.TYPE.STICKER;case h.OUTWARD_TYPES.AUDIO:case h.OUTWARD_TYPES.PTT:return h.TYPE.AUDIO;case h.OUTWARD_TYPES.DOCUMENT:default:return}}(t.type,t.subtype);a&&!e.type&&(e.type=a,r=!0);var i=t.downloadStage,o=t.uploadStage;i&&i!==e.downloadStage&&(e.downloadStage=i,r=!0),o&&o!==e.uploadStage&&(e.uploadStage=o,r=!0),t.resolvedPreview&&!n.preview&&(t.resolvedPreview.retain(),n.preview=t.resolvedPreview,r=!0),void 0!==t.progressiveStage&&t.progressiveStage!==e.progressiveStage&&(e.progressiveStage=t.progressiveStage,r=!0);var s=t.mediaBlob;s&&!s.isBlobEqual(e.mediaBlob)&&(e.mediaBlob&&e.clearBlob(),s.retain(),e.mediaBlob=s,e.size=s.size(),r=!0),null!=t.size&&(null==e.size||t.size<e.size)&&(e.size=t.size,r=!0),t.filehash&&!e.filehash&&(e.filehash=t.filehash,r=!0),t.parsedVcards&&t.parsedVcards!==e.parsedVcards&&(e.parsedVcards=t.parsedVcards,r=!0);for(var u=e.contentFields(),l=0;l<u.length;l++){var c=u[l];switch(c){case"preview":t.preview&&!n._preview&&(e.runProcessIfNotRunBefore("preview",C,t.preview),n._preview=t.preview,r=!0);break;case"fullWidth":case"fullHeight":case"aspectRatio":var d=t[c];null!=d&&0!==d&&n[c]!==d&&(n[c]=d,r=!0);break;case"animationDuration":case"singleLoopDuration":var f=t[c];null!=f&&f!==n[c]&&(n[c]=f,r=!0);break;default:var p=t[c];void 0!==p&&void 0===n[c]&&(n[c]=p,r=!0)}}return null!=n.aspectRatio&&0!==n.aspectRatio||(null!=n.fullWidth&&0!==n.fullWidth&&null!=n.fullHeight&&0!==n.fullHeight?(n.aspectRatio=n.fullWidth/n.fullHeight,r=!0):n.preview&&e.runProcessIfNotRunBefore("aspectRatio",O,n.preview)),r}function T(e,t,n){for(var r=0;r<n.length;r++){var a=n[r];e[a]=t[a]}}function w(e,t){return t.filehash?e.id.fromMe&&e.ack<c.default.ACK.SENT?(e.local||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: unsent media system message not local")),function(e){switch(e.uploadStage){case h.UPLOAD_STAGE.INIT:case h.UPLOAD_STAGE.PREPARING:return h.MEDIA_DATA_STAGE.PREPARING;case h.UPLOAD_STAGE.UPLOADING:return h.MEDIA_DATA_STAGE.UPLOADING;case h.UPLOAD_STAGE.NEED_UPLOAD:return h.MEDIA_DATA_STAGE.NEED_UPLOAD;case h.UPLOAD_STAGE.ERROR_MISSING:return h.MEDIA_DATA_STAGE.ERROR_MISSING;case h.UPLOAD_STAGE.ERROR_TOO_LARGE:return h.MEDIA_DATA_STAGE.ERROR_TOO_LARGE;case h.UPLOAD_STAGE.UPLOADED:return h.MEDIA_DATA_STAGE.SENDING}}(t)):A(t):h.MEDIA_DATA_STAGE.PREPARING}function A(e){switch(e.downloadStage){case h.DOWNLOAD_STAGE.INIT:return h.MEDIA_DATA_STAGE.INIT;case h.DOWNLOAD_STAGE.EXISTS:return h.MEDIA_DATA_STAGE.EXISTS;case h.DOWNLOAD_STAGE.PREPARING:return h.MEDIA_DATA_STAGE.PREPARING;case h.DOWNLOAD_STAGE.REUPLOADING:return h.MEDIA_DATA_STAGE.REUPLOADING;case h.DOWNLOAD_STAGE.FETCHING:return h.MEDIA_DATA_STAGE.FETCHING;case h.DOWNLOAD_STAGE.PROCESSING:return h.MEDIA_DATA_STAGE.DECRYPTING;case h.DOWNLOAD_STAGE.NEED_POKE:return h.MEDIA_DATA_STAGE.NEED_POKE;case h.DOWNLOAD_STAGE.ERROR_MISSING:return h.MEDIA_DATA_STAGE.ERROR_MISSING;case h.DOWNLOAD_STAGE.ERROR_UNSUPPORTED:return h.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED;case h.DOWNLOAD_STAGE.RESOLVED:return h.MEDIA_DATA_STAGE.RESOLVED;case h.DOWNLOAD_STAGE.PROGRESSIVE_READY:return h.MEDIA_DATA_STAGE.PROGRESSIVE_READY}}function C(e){return v.default.createFromBase64Jpeg(e).then((function(e){return e.autorelease(),{resolvedPreview:e}}))}function O(e){return(0,_.getImageWidthHeight)(e).then((function(e){return{aspectRatio:e.width/e.height}}))}t.default=S},7620:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.rmrSticker=function(e,t,n){n||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: rmr called on MediaObject without sticker"));return u.default.mediaUpload("sticker",n.id).tap((function(n){var r=n.sticker;if(200===n.status&&r){t.forEach((function(e){var t=(0,a.default)(e,2),n=t[0];t[1]||(n.directPath===r.directPath&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("rmrSticker:same-direct-path-after-rmr")),r.mediaKey=(0,i.default)((0,s.default)(r.mediaKey),"sanitizeBase64(nextSticker.mediaKey)"),n.deprecatedMms3Url=r.url,n.filehash=r.filehash,n.width=r.width,n.height=r.height,n.mediaKey=r.mediaKey,n.mediaKeyTimestamp=0,n.directPath=r.directPath,n.encFilehash=r.encFilehash,r.mimetype&&(n.mimetype=r.mimetype))}));var u=e.addEntry({deprecatedMms3Url:r.url,mediaKey:r.mediaKey,mediaKeyTimestamp:0,encFilehash:r.encFilehash,type:o.default.STICKER,directPath:r.directPath,debugHint:"rmrSticker"});u&&u.markWhetherOnServer(!0)}}))},t.rmrStickerPack=function(e,t,n){n||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("media-fault: rmr called on MediaObject without stickerPack"));return u.default.mediaUpload("sticker-pack",n.id).tap((function(n){var r=n.stickerPack;if(200===n.status&&r){t.forEach((function(e){var t=(0,a.default)(e,2),n=t[0];t[1]||(n.directPath===r.directPath&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("rmrStickerPack:same-direct-path-after-rmr")),n.url=r.url,n.filehash=r.filehash,n.mediaKey=r.mediaKey,n.mediaKeyTimestamp=0,n.directPath=r.directPath,n.encFilehash=r.encFilehash,r.mimetype&&(n.mimetype=r.mimetype))}));var i=e.addEntry({deprecatedMms3Url:r.url,mediaKey:r.mediaKey,mediaKeyTimestamp:0,encFilehash:r.encFilehash,type:o.default.IMAGE,directPath:r.directPath,debugHint:"rmrStickerPack"});i&&i.markWhetherOnServer(!0)}}))};var a=r(n(63038)),i=r(n(91080)),o=r(n(16024)),s=r(n(98958)),u=r(n(23306))},9861:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.associateMediaWithMsg=function(e,t){e.addMsg(t)},t.disassociateMediaFromMsg=function(e,t){if(t.mediaObject=null,e.removeMsg(t),e.hasAssociatedMsgsOrStickers())return;var n=e.filehash;n&&delete u[n];n&&(0,s.shouldUseLruMediaStore)((0,o.msgToMediaType)(t))&&a.default.del(n);e.delete()},t.delistAndDeleteAllMedia=function(){var e=u;for(var t in u={},e)e[t].delete()},t.getOrCreateMediaObject=function(e){return u.hasOwnProperty(e)?u[e]:u[e]=new i.default},t.clearMediaForChat=function(){},t.associateMediaWithStickerPack=function(e,t){e.addStickerPack(t)},t.disassociateMediaFromStickerPack=function(e,t){if(t.mediaObject=null,e.removeStickerPack(t),e.hasAssociatedMsgsOrStickers())return;var n=e.filehash;n&&delete u[n];n&&a.default.del(n);e.delete()},t.associateMediaWithSticker=function(e,t){e.addSticker(t)},t.disassociateMediaFromSticker=function(e,t){if(t.mediaObject=null,e.removeSticker(t),e.hasAssociatedMsgsOrStickers())return;var n=e.filehash;n&&delete u[n];n&&a.default.del(n);e.delete()};var a=r(n(5493)),i=r(n(56789)),o=n(16024),s=n(81365),u={}},87261:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE=t.OUTWARD_TYPES=t.MEDIA_DATA_STAGE=t.UPLOAD_STAGE=t.DOWNLOAD_STAGE=t.MSG_SPECIFIC_FIELDS=t.FIELDS=t.MEDIA_MSG_PROPS=t.MAPPED_STICKER_PROPS=t.MAPPED_MEDIA_PROPS=t.MAPPED_MSG_PROPS=t.MSG_TO_MEDIA=t.MEDIA_TO_MSG=void 0;var a=r(n(319)),i=Object.freeze({preview:"body",mediaKey:"mediaKey",mediaKeyTimestamp:"mediaKeyTimestamp",size:"size",filehash:"filehash",mimetype:"mimetype",duration:"duration",pageCount:"pageCount",fullHeight:"height",fullWidth:"width",type:"type",filename:"filename",caption:"caption",isGif:"isGif",gifAttribution:"gifAttribution",sidecar:"streamingSidecar",subtype:"subtype",firstFrameLength:"firstFrameLength",firstFrameSidecar:"firstFrameSidecar",isAnimated:"isAnimated",isVcardOverMmsDocument:"isVcardOverMmsDocument",isViewOnce:"isViewOnce"});t.MEDIA_TO_MSG=i;var o=Object.freeze({body:"preview",directPath:"directPath",mediaKey:"mediaKey",mediaKeyTimestamp:"mediaKeyTimestamp",size:"size",filehash:"filehash",mimetype:"mimetype",duration:"duration",pageCount:"pageCount",height:"fullHeight",width:"fullWidth",type:"type",filename:"filename",caption:"caption",isGif:"isGif",gifAttribution:"gifAttribution",streamingSidecar:"sidecar",subtype:"subtype",firstFrameLength:"firstFrameLength",firstFrameSidecar:"firstFrameSidecar",isAnimated:"isAnimated",isVcardOverMmsDocument:"isVcardOverMmsDocument",isViewOnce:"isViewOnce"});t.MSG_TO_MEDIA=o;var s=Object.keys(o);t.MAPPED_MSG_PROPS=s;var u=Object.keys(i);t.MAPPED_MEDIA_PROPS=u;t.MAPPED_STICKER_PROPS=["filehash","height","mimetype","size","type","width"];var l=[].concat((0,a.default)(s),["deprecatedMms3Url","encFilehash","streamable"]);t.MEDIA_MSG_PROPS=l;var c=Object.freeze({VIDEO:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview","duration","durationFloat","isViewOnce","fullPreviewData"]),AUDIO:Object.freeze(["duration"]),IMAGE:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview","isViewOnce","fullPreviewData"]),PRODUCT:Object.freeze(["aspectRatio","fullWidth","fullHeight","preview"]),STICKER:Object.freeze(["animationDuration","singleLoopDuration","emojis","firstFrameLength","firstFrameSidecar","isAnimated","fullWidth","fullHeight","preview","rgbaBuffer","rgbaWidth","rgbaHeight","aspectRatio"]),STICKER_PACK:Object.freeze([]),DOCUMENT:Object.freeze(["aspectRatio","pageCount","preview","isVcardOverMmsDocument","parsedVcards","fullPreviewData","fullPreviewSize"]),RAW:Object.freeze(["mediaBlob","size","filehash","progressiveStage"])});t.FIELDS=c;t.MSG_SPECIFIC_FIELDS=["type","filename","caption","isGif","gifAttribution","mimetype","pageCount","sidecar","subtype","isViewOnce"];var d=n(54302).Mirrored(["INIT","EXISTS","PREPARING","REUPLOADING","FETCHING","PROCESSING","NEED_POKE","ERROR_MISSING","ERROR_UNSUPPORTED","PROGRESSIVE_READY","RESOLVED"]);t.DOWNLOAD_STAGE=d;var f=n(54302).Mirrored(["INIT","PREPARING","UPLOADING","NEED_UPLOAD","ERROR_MISSING","ERROR_TOO_LARGE","UPLOADED"]);t.UPLOAD_STAGE=f;var p=n(54302).Mirrored(["INIT","EXISTS","PREPARING","UPLOADING","SENDING","REUPLOADING","FETCHING","DECRYPTING","RESOLVED","NEED_POKE","NEED_UPLOAD","ERROR_MISSING","ERROR_TOO_LARGE","ERROR_UNSUPPORTED","PROGRESSIVE_READY","REMOTE_UPLOADING","REMOTE_NEED_UPLOAD"]);t.MEDIA_DATA_STAGE=p;t.OUTWARD_TYPES={IMAGE:"image",VIDEO:"video",AUDIO:"audio",PTT:"ptt",STICKER:"sticker",DOCUMENT:"document",PRODUCT:"product",UNKNOWN:"unknown"};var h=Object.freeze({VIDEO:"VIDEO",IMAGE:"IMAGE",AUDIO:"AUDIO",STICKER:"STICKER",DOCUMENT:"DOCUMENT",PRODUCT:"PRODUCT"});t.TYPE=h},99474:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;try{t=e?JSON.parse(e):a.default}catch(e){return null}var n={};return o(t,n,"",""),n};var a=r(n(47466)),i=n(88828);function o(e,t,n,r){var a=e;if(Array.isArray(a)||(0,i.isString)(a)){(0,i.isString)(a)&&(a=[a]);for(var s=0;s<a.length;s++)t[a[s]]=r+n}else for(var u in a)o(a[u],t,u,r+n)}},13242:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowedDocumentMimetype=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var r in l){var a=l[r];if("document"===a.msgType){var i=n?a.signatureMimetype:r;if(i===e&&a.canSend&&t&&t.toLowerCase().endsWith(a.ext.toLowerCase()))return r}}return n?e:e||"application/octet-stream"},t.getExtension=function(e){var t=l[e];return t?"."+(t.ext||e.split("/")[1]).toLowerCase():""},t.previewType=function(e){for(var t in l)if(l.hasOwnProperty(t)){var n=l[t],r=n.previewType,a=n.signatureMimetype;if(r&&(t===e||a===e))return r}},t.getMediaMimeType=function(e,t){var n=t;n.length>262&&(n=n.subarray(0,262));var r=(0,i.default)(n);if(r)return r.mime;if("image"===e)return"image/jpeg";throw new u.MediaEncryptionError("unknown mime decrypt error for type:"+e)},t.getDocTypes=function(){return o.default.pickBy(l,(function(e){return"document"===e.msgType}))},t.EXT_TO_MIME=t.DOC_MIMES=t.MIMETYPES=t.MIMETYPE_DETERMINING_LENGTH=void 0;var i=a(n(97769)),o=a(n(96486)),s=a(n(99474)),u=r(n(98569));t.MIMETYPE_DETERMINING_LENGTH=262;var l={"text/plain":{ext:"TXT",msgType:"document",icon:"icon-doc-txt",canSend:!0},"text/rtf":{ext:"RTF",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/rtf"},"text/vcard":{ext:"VCF",msgType:"vcard"},"application/zip":{ext:"ZIP",icon:"icon-doc-generic",msgType:"document"},"application/pdf":{ext:"PDF",msgType:"document",icon:"icon-doc-pdf",canSend:!0,signatureMimetype:"application/pdf",previewType:"pdf"},"application/msword":{ext:"DOC",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.ms-excel":{ext:"XLS",msgType:"document",icon:"icon-doc-xls",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.ms-powerpoint":{ext:"PPT",msgType:"document",icon:"icon-doc-ppt",canSend:!0,signatureMimetype:"application/x-msi",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{ext:"DOCX",msgType:"document",icon:"icon-doc-doc",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{ext:"PPTX",msgType:"document",icon:"icon-doc-ppt",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{ext:"XLSX",msgType:"document",icon:"icon-doc-xls",canSend:!0,signatureMimetype:"application/zip",previewType:"msoffice"},"audio/aac":{msgType:"audio",ext:"AAC"},"audio/mp4":{msgType:"audio"},"audio/amr":{msgType:"audio"},"audio/mpeg":{msgType:"audio"},"audio/ogg; codecs=opus":{msgType:"audio",ext:"OGG"},"audio/wav":{msgType:"audio",ext:"wav"},"video/mp4":{msgType:"video",ext:"MP4"},"video/3gpp":{msgType:"video"},"image/jpeg":{msgType:"image"},"image/png":{msgType:"image"}},c=l;t.MIMETYPES=c;t.DOC_MIMES="*";var d=(0,s.default)();t.EXT_TO_MIME=d},16024:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.castToV4=function(e){var t;if(null==e)t=o.DOCUMENT;else{if(!(e in o))throw new Error(`castToV4: unexpected mmsv3 type ${e}`);t=o[e]}return t},t.msgToMediaType=function(e){var t=e.type,n=e.isGif;switch(t){case i.IMAGE:return o.IMAGE;case i.VIDEO:return n?o.GIF:o.VIDEO;case i.AUDIO:return o.AUDIO;case i.PTT:return o.PTT;case i.DOCUMENT:return o.DOCUMENT;case i.STICKER:return o.STICKER;case i.PRODUCT:return o.PRODUCT;default:throw new Error(`msg is not a media msg: ${t}, isGif=${String(n)}`)}},t.MEDIA_TYPE_VALUES=t.default=void 0;var a=r(n(96486)),i=r(n(34263)).default.MSG_TYPE,o=Object.freeze({AUDIO:"audio",DOCUMENT:"document",GIF:"gif",IMAGE:"image",PPIC:"ppic",PRODUCT:"product",PTT:"ptt",STICKER:"sticker",VIDEO:"video",TEMPLATE:"template",THUMBNAIL_DOCUMENT:"thumbnail-document",THUMBNAIL_IMAGE:"thumbnail-image",THUMBNAIL_VIDEO:"thumbnail-video",THUMBNAIL_LINK:"thumbnail-link",HISTORY_SYNC:"md-msg-hist",MD_APP_STATE:"md-app-state",PRODUCT_CATALOG_IMAGE:"product-catalog-image"}),s=o;t.default=s;var u=a.default.values(o);t.MEDIA_TYPE_VALUES=u},33386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={DOWNLOAD:"DOWNLOAD",UPLOAD:"UPLOAD"};t.default=n},52948:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var a=r(n(54105))},88290:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=16*Math.ceil(e/16),o=t.slice(0,a.IV_LENGTH+r);return new i.default(n).sign(o,a.HMAC_LENGTH)};var a=n(59077),i=r(n(44338))},59077:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e instanceof ArrayBuffer?e.byteLength:e.buffer.byteLength,a=new u.default(t),c=Math.ceil((n-16)/l),d=o.default.times(c,(function(t){var n=t*l,r=e.slice(n,n+16+l);return a.sign(r,10)}));return r.all(d).then((function(e){return s.default.apply(void 0,(0,i.default)(e))}))},t.HMAC_LENGTH=t.IV_LENGTH=void 0;var i=a(n(319)),o=a(n(96486)),s=a(n(12780)),u=a(n(44338)),l=65536;t.IV_LENGTH=16;t.HMAC_LENGTH=10},4472:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return d.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=n(92827),u=r(n(98569)),l=r(n(67819)),c=a(n(16024));function d(){return(d=(0,o.default)(i.default.mark((function e(t,n){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f(t);try{a=(0,s.decodeB64)(n)}catch(e){}if(n&&r&&a){e.next=4;break}throw new u.MediaEncryptionError(`createKeys fail: !!mediakey: ${!!n} info: ${r} type: ${t}`);case 4:return e.abrupt("return",l.extractAndExpand(a,r,112).then((function(e){if(!e||e.byteLength<112)throw new u.MediaEncryptionError("computeMediaKeys: hkdf error");return{iv:e.slice(0,16),encKey:e.slice(16,48),macKey:e.slice(48,80),refKey:e.slice(80,112)}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){switch(e){case c.default.AUDIO:return"WhatsApp Audio Keys";case c.default.DOCUMENT:return"WhatsApp Document Keys";case c.default.GIF:return"WhatsApp Video Keys";case c.default.IMAGE:return"WhatsApp Image Keys";case c.default.PPIC:throw new Error("Cannot create media keys for profile pics");case c.default.PRODUCT:return"WhatsApp Image Keys";case c.default.PTT:return"WhatsApp Audio Keys";case c.default.STICKER:return"WhatsApp Image Keys";case c.default.VIDEO:return"WhatsApp Video Keys";case c.default.THUMBNAIL_DOCUMENT:return"WhatsApp Document Thumbnail Keys";case c.default.THUMBNAIL_IMAGE:return"WhatsApp Image Thumbnail Keys";case c.default.THUMBNAIL_VIDEO:return"WhatsApp Video Thumbnail Keys";case c.default.THUMBNAIL_LINK:return"WhatsApp Link Thumbnail Keys";case c.default.TEMPLATE:throw new Error("Cannot create media keys for template");case c.default.HISTORY_SYNC:return"WhatsApp History Keys";case c.default.MD_APP_STATE:return"WhatsApp App State Keys";case c.default.PRODUCT_CATALOG_IMAGE:throw new Error("Cannot create media keys for product catalog image")}}},14854:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.mediaKeys,n=e.ciphertextHmac,a=e.expectedPlaintextHash,f=e.debugString;return r.resolve().then((function(){if(__LOG__(2)`decryptMedia: [${f}] start`,n.byteLength<10)throw new c.MediaDecryptionError(`ciphertext too short: ${n.byteLength}`);var e=t.iv,r=t.encKey,p=t.macKey,h=(0,s.default)(Uint8Array,n),_=(0,u.default)(Uint8Array,[new Uint8Array(e),h.slice(0,-10)]);return new d.default(p).sign(_,10).then((function(e){var t=h.buffer.slice(-10);if(!(0,l.default)(e,t))throw new c.MediaDecryptionError("decryptMedia: hmac mismatch");return(0,i.aesCbcDecrypt)(r,_)})).then((function(e){return null==a?e:(0,o.default)(e).then((function(t){if(t!==a)throw new c.MediaDecryptionError("decryptMedia: plaintext hash mismatch");return e}))})).then((function(e){return __LOG__(2)`decryptMedia: [${f}] success`,e})).catch((function(e){if(__LOG__(3)`decryptMedia: [${f}] error`,e instanceof c.MediaDecryptionError)throw e;throw new c.MediaDecryptionError(`decryption error: ${String(e)}; stack: ${e.stack}`)}))}))};var i=n(86190),o=a(n(52948)),s=a(n(80958)),u=a(n(53069)),l=a(n(47106)),c=n(98569),d=a(n(44338))},5111:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.cleanupCiphertextAndIv=t.decrypt=t.HMAC_SIZE=t.BLOCK_SIZE=void 0;var i=a(n(53069)),o=n(96443);t.BLOCK_SIZE=16;t.HMAC_SIZE=10;var s=function(e){var t=e.ciphertext,n=e.iv,r=e.mediaKeys.encKey,a={name:"AES-CBC",iv:n};return(0,o.getCrypto)().importKey("raw",new Uint8Array(r),"AES-CBC",!1,["decrypt"]).catch((function(e){throw __LOG__(2)`decryptPartialMedia:decrypt importKey error: ${String(e)}`,e})).then((function(e){return(0,o.getCrypto)().decrypt(a,e,t)})).catch((function(e){throw __LOG__(2)`decryptPartialMedia:decrypt decrypt error: ${String(e)}`,e}))};t.decrypt=s;var u=function(e){var t,n=e.serverRangeStart,a=e.ciphertext,s=e.mediaKeys,u=a instanceof Uint8Array?a:new Uint8Array(a),l=u.byteLength%16==0;return 0===n?t=new Uint8Array(s.iv):(t=u.slice(0,16),u=u.slice(16)),l||(u=u.slice(0,u.byteLength-10)),l?function(e){var t=e.ciphertext,n=e.mediaKeys.encKey,r={name:"AES-CBC",iv:(t instanceof Uint8Array?t:new Uint8Array(t)).slice(-16)};return(0,o.getCrypto)().importKey("raw",new Uint8Array(n),"AES-CBC",!1,["encrypt"]).catch((function(e){__LOG__(2)`decryptPartialMedia:getEncryptedPadding importKey error: ${String(e)}`})).then((function(e){var t=new Uint8Array([]);return(0,o.getCrypto)().encrypt(r,e,t)})).catch((function(e){__LOG__(2)`decryptPartialMedia:getEncryptedPadding encrypt error: ${String(e)}`}))}({ciphertext:u,mediaKeys:s}).then((function(e){return{ciphertext:u=(0,i.default)(Uint8Array,[u,new Uint8Array(e)]),iv:t}})):r.resolve({ciphertext:u,iv:t})};t.cleanupCiphertextAndIv=u;var l=function(e){var t=e.mediaKeys,n=e.ciphertext;return u({serverRangeStart:0,ciphertext:n,mediaKeys:t}).then((function(e){var n=e.ciphertext,r=e.iv;return s({ciphertext:n,iv:r,mediaKeys:t})}))};t.default=l},11015:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.mediaKey,n=e.plaintext,a=e.type;return new r((function(e,v){if(t.slice(0,10),__LOG__(2)`encryptMedia: start`,!a)throw new f.MediaEncryptionError('encryptMedia: missing "type"');if(!t)throw new f.MediaEncryptionError('encryptMedia: missing "mediaKey"');(0,d.default)(a,t).then((function(e){var t=e.iv,d=e.encKey,f=e.macKey;return(0,o.aesCbcEncrypt)(d,n,t).then((function(e){var o=e.slice(t.byteLength);return new p.default(f).sign(e,10).then((function(t){var d=r.resolve();if(a===h.default.VIDEO||a===h.default.AUDIO){var p=(0,c.default)(e,t);d=(0,l.default)(p,f)}var v=r.resolve();if(a===h.default.STICKER){var m=(0,_.default)(n).firstFrameLength;if(null!=m){var g=(0,c.default)(e,t);v=(0,u.default)(m,g,f)}}var y=(0,c.default)(o,t);return(0,i.promiseProps)({ciphertextHmac:y,hash:(0,s.default)(y),sidecar:d,firstFrameSidecar:v})}))}))})).then((function(t){__LOG__(2)`encryptMedia: success`,e(t)})).catch((function(e){if(__LOG__(3)`encryptMedia: error`,e instanceof f.MediaEncryptionError)throw e;throw new f.MediaEncryptionError(`encryption error: ${String(e)}; stack: ${e.stack}`)})).catch(v)}))};var i=n(46154),o=n(86190),s=a(n(52948)),u=a(n(88290)),l=a(n(59077)),c=a(n(12780)),d=a(n(4472)),f=n(98569),p=a(n(44338)),h=a(n(16024)),_=a(n(82206))},18223:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getProgressiveMediaCacheKey=T,t.default=t.EOI_TAG=void 0;var i=a(n(319)),o=a(n(87757)),s=a(n(48926)),u=a(n(93913)),l=a(n(34575)),c=a(n(2205)),d=a(n(99842)),f=n(1838),p=n(86190),h=a(n(53069)),_=n(87708),v=a(n(47106)),m=a(n(44338)),g=a(n(76486)),y=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(e){return(0,l.default)(this,n),t.call(this,`Chunk ${e} does not match sidecar`)}return n}((0,f.customError)("ChunkValidationError")),E=new Uint8Array([2,2]),S=new Uint8Array([255,217]);t.EOI_TAG=S;var b=function(){function e(t){(0,l.default)(this,e),this._alignedScanLengths=[],this._increasingScanLengths=[],this._lastDecryptedChunk=0,this._downloadedBytes=new ArrayBuffer(0);var n=t.cryptoKeys,r=t.scanLengths,a=t.scansSidecar,i=t.filehash,o=t.mimetype,s=t.debugString,u=t.onProgressiveUpdate;this._cryptoKeys=n,this._scanLengths=r,this._scansSideCar=a,this._filehash=i,this._mimetype=o,this._nextChunkIV=this._cryptoKeys.iv,this._decryptedChunks=new Array(r.length),this._onProgressiveUpdate=u,this._debugString=s}var t;return(0,u.default)(e,[{key:"_validateSidecar",value:function(e,t){0===t&&(this._nextChunkIV=this._cryptoKeys.iv);var n=this._cryptoKeys.macKey,a=this._scansSideCar.slice(10*t,10*t+10),i=this._nextChunkIV;this._nextChunkIV=e.slice(-16);var o=(0,h.default)(Uint8Array,[new Uint8Array(i),new Uint8Array(e)]);return new m.default(n).sign(o,10).then((function(e){return(0,v.default)(e,a)?r.resolve():r.reject(new y(t))}))}},{key:"_cleanupCipherTextAndIV",value:function(e,t){var n,a,i,o,s=e,u=s.byteLength%16==0;if(0===t)n=this._cryptoKeys.iv;else{var l=this._increasingScanLengths[t-1];n=this._downloadedBytes.slice(l-16,l)}return u||(s=s.slice(0,s.byteLength-10)),u?(a=s,i=this._cryptoKeys,o=i.encKey,(0,p.aesCbcEncrypt)(o,E,new Uint8Array(a.slice(-16))).then((function(e){return e.slice(-16)}))).then((function(e){return{cipherText:s=(0,h.default)(Uint8Array,[new Uint8Array(s),new Uint8Array(e)]),iv:n}})):r.resolve({cipherText:s,iv:n})}},{key:"_getLastFullyLoadedChunkIndex",value:function(e){for(var t=0,n=0;n<this._alignedScanLengths.length;n++)if(e<(t+=this._alignedScanLengths[n]))return n;return this._alignedScanLengths.length}},{key:"_handleChunk",value:function(e,t){var n=this;return this._validateSidecar(e,t).then((function(){return n._cleanupCipherTextAndIV(e,t)})).then((function(e){var t=e.iv,r=e.cipherText;return(0,p.aesCbcDecrypt)(n._cryptoKeys.encKey,(0,h.default)(Uint8Array,[new Uint8Array(t),new Uint8Array(r)]))})).then((function(e){return(0,_.removeEncryptedPadding)(e,E.buffer)})).then((function(e){return __LOG__(2)`ImageStreamer: [${n._debugString}] Successfully decrypted chunk ${t} of ${n._scanLengths.length} total`,e}))}},{key:"_generateBlobFromFullyLoadedChunks",value:function(e){var t=this;return r.all(this._decryptedChunks.slice(0,e)).then((function(n){var r,a=t._scanLengths.slice(0,e).reduce((function(e,t){return e+t}),0),i=(0,h.default)(Uint8Array,n.map((function(e){return new Uint8Array(e)}))).slice(0,a),o=(0,v.default)(S.buffer,i.slice(-S.length).buffer)?i:(0,h.default)(Uint8Array,[i,S]),s=[o],u=t._mimetype?new Blob(s,{type:t._mimetype}):new Blob(s),l=T(t._filehash,e);return g.default.put(l,u),__LOG__(2)`ImageStreamer: [${t._debugString}] Generated progressive image using ${e} chunks of ${t._scanLengths.length} total`,null===(r=t._onProgressiveUpdate)||void 0===r||r.call(t,e),t._lastDecryptedChunk=e,o.buffer}))}},{key:"_decryptFullyLoadedChunks",value:(t=(0,s.default)(o.default.mark((function e(t,n){var a,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<n)){e.next=11;break}if(this._decryptedChunks[a]){e.next=8;break}return i=0===a?0:this._increasingScanLengths[a-1],s=t.slice(i,i+this._alignedScanLengths[a]),e.next=7,r.all(this._decryptedChunks);case 7:this._decryptedChunks[a]||(this._decryptedChunks[a]=this._handleChunk(s,a));case 8:a++,e.next=1;break;case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleProgress",value:function(e,t){var n=this;if(!this._alignedScanLengths.length){this._alignedScanLengths=(0,_.alignChunkLengthsToMultipleOfAesBlockSize)(this._scanLengths,e);for(var a=0;a<this._alignedScanLengths.length;a++){var o=this._alignedScanLengths[a],s=0===a?o:this._increasingScanLengths[a-1]+o;this._increasingScanLengths.push(s)}}var u,l,c="string"==typeof t?t.length:t.byteLength,d=this._getLastFullyLoadedChunkIndex(c);return d<=this._lastDecryptedChunk?r.resolve(null):(this._downloadedBytes="string"==typeof t?(u=t,(l=new Uint8Array(u.length)).set((0,i.default)(u).map((function(e){return e.codePointAt(0)}))),l.buffer):t,this._decryptFullyLoadedChunks(this._downloadedBytes,d).then((function(){return n._generateBlobFromFullyLoadedChunks(d)})).catch((function(e){__LOG__(3)`ImageStreamer:handleProgress error: ${e}`;var t=`${e.message}, [${n._debugString}]scanLengths length: ${n._scanLengths.length}, scansSidecar byteLength: ${n._scansSideCar.byteLength}. Stack: ${e.stack}`;e instanceof y?(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${t}`,SEND_LOGS("ImageStreamer:chunk validation error")):(__LOG__(4,void 0,new Error,!0)`Assertion failed! ${t}`,SEND_LOGS("ImageStreamer:handleProgress error"))})))}}]),e}();function T(e,t){return`${e}-progressive-${t}`}t.default=b},94025:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new Uint8Array(32);return self.crypto.getRandomValues(e),{key:(0,a.encodeB64)(e),timestamp:i.default.globalUnixTime()}};var a=n(92827),i=r(n(79140))},75214:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DownloadManager=void 0;var o=i(n(81109)),s=i(n(63038)),u=i(n(87757)),l=i(n(48926)),c=i(n(93913)),d=i(n(34575)),f=i(n(91080)),p=i(n(35340)),h=i(n(41522)),_=i(n(53807)),v=i(n(4472)),m=n(87708),g=i(n(14854)),y=a(n(5111)),E=n(81214),S=i(n(18223)),b=i(n(5493)),T=n(44160),w=n(56789),A=i(n(16024)),C=n(87261),O=n(81365),M=i(n(92882)),I=i(n(8643)),k=i(n(29402)),P=n(39077),R=i(n(63276));function D(e){var t,n,r=null===(t=e.progressiveJpegOpts)||void 0===t?void 0:t.scanCount,a=null===(n=e.progressiveJpegOpts)||void 0===n?void 0:n.scanLengths;if(null!=r&&a)return`${e.filehash}-${r}/${a.length}-scans`;if(e.partialVideoOpts){var i=e.partialVideoOpts.secondsToDownload;return`${e.filehash}-${i}-seconds`}return e.filehash}var N=1,L=2,x=function(e){switch(e){case A.default.THUMBNAIL_DOCUMENT:return L;case A.default.VIDEO:default:return N}},U=function e(){var t=this;(0,d.default)(this,e),this.preloader=new _.default(10,{thumbnail:4}),this.downloadAndDecrypt=(0,h.default)((function(e){return D(e)}),new F,(function(e){return e.isPreload?t.preloader.enqueue((function(){return G(e)}),{priority:x(e.type),group:"thumbnail",signal:e.signal}):G(e)})),this.rmr=(0,M.default)((function(e){return e.mediaObject.filehash||""}),j),this.checkExistence=(0,M.default)((function(e){return e.encFilehash}),K)};t.DownloadManager=U;var F=function(){function e(){(0,d.default)(this,e)}var t,n;return(0,c.default)(e,[{key:"get",value:(n=(0,l.default)(u.default.mark((function e(t,n){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,O.shouldUseLruMediaStore)(n.type)){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,b.default.get(D(n));case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),__LOG__(3,!0)`downloadManager.asyncCache.get error:\n${(0,R.default)(e.t0)}`,e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(){return n.apply(this,arguments)})},{key:"set",value:(t=(0,l.default)(u.default.mark((function e(t,n,r){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,O.shouldUseLruMediaStore)(r.type)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,b.default.put(D(r),n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),__LOG__(3,!0)`downloadManager.asyncCache.set error:\n${(0,R.default)(e.t0)}`;case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),function(){return t.apply(this,arguments)})}]),e}();function G(){return B.apply(this,arguments)}function B(){return(B=(0,l.default)(u.default.mark((function e(t){var n,a,i,o,l,c,d,h,_,b,w,A,C,O,M,P,D,N,L,x,U,F,G,B,j,Y,K,W,H,$,z,q,J,Q,X,Z,ee;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new I.default.MediaDownload2({mediaId:(0,T.generateMediaEventId)(),connectionType:I.default.CONNECTION_TYPE.HOSTNAME,overallMediaType:(0,T.getMetricMediaType)(t.type),overallMmsVersion:4,networkStack:I.default.NETWORK_STACK_TYPE.NATIVE,overallDownloadMode:I.default.MEDIA_DOWNLOAD_MODE_TYPE.FULL,overallAttemptCount:t.userDownloadAttemptCount,overallDownloadOrigin:t.downloadOrigin,overallBackendStore:null!==(n=(0,T.getMetricBackendStore)(t.directPath))&&void 0!==n?n:void 0}),i=function(e){var t=e.hostName,n=e.hostClass,r=e.failCount;a.set({overallDomain:t,overallConnectionClass:n,overallRetryCount:r})},o=function(e){a.set({overallMediaSize:e,overallDownloadResult:I.default.MEDIA_DOWNLOAD_RESULT_TYPE.OK,overallIsFinal:!0,downloadHttpCode:200}),a.markOverallCumT(),a.commit()},l=function(e){a.set({overallDownloadResult:(0,T.getMetricDownloadErrorResultType)(e),overallIsFinal:!0});var t=(0,T.getStatusCode)(e);null!=t&&(a.downloadHttpCode=t),a.markOverallCumT(),a.commit(),(0,T.logErrorUnknownDetails)(a,e)},c=function(e){a.set({overallT:e})},d=function(e){var t=e.err,n=e.overallT,r=e.failCount,i=new I.default.MediaDownload2(a);i.set({mediaId:(0,T.generateMediaEventId)(),overallDownloadResult:(0,T.getMetricDownloadErrorResultType)(t),overallIsFinal:!1,overallT:n,overallRetryCount:r});var o=(0,T.getStatusCode)(t);null!=o&&(a.downloadHttpCode=o),a.markOverallCumT(),i.commit(),(0,T.logErrorUnknownDetails)(i,t)},h=t.directPath,_=t.encFilehash,b=t.filehash,w=t.mediaKey,A=t.onDecryptStart,C=t.type,O=t.mode,M=t.progressiveJpegOpts,P=t.partialVideoOpts,D=t.signal||(new p.default).signal,N=b.slice(0,10),__LOG__(2)`downloadManager.download: [${N}] start`,e.prev=11,x=null==M?void 0:M.scanCount,U=null!=x&&x===(null==M||null===(L=M.scanLengths)||void 0===L?void 0:L.length)?null:x,G=null,M&&null!=U?G={start:0,end:(0,m.alignChunkLengthsToMultipleOfAesBlockSize)(M.scanLengths).slice(0,U).reduce((function(e,t){return e+t}),0)}:P&&(B=P.video,j=B.size,Y=B.duration,K=P.secondsToDownload,W=j*K/Y,131072,H=Math.max(W,131072),$=Math.ceil(H/y.BLOCK_SIZE),G={start:0,end:$*y.BLOCK_SIZE-1}),e.next=18,r.all([(0,v.default)(C,w).then((function(e){if(M){var t=M.scanLengths,n=M.scansSidecar,r=M.mimetype,a=M.onProgressiveUpdate;F=new S.default({cryptoKeys:e,scanLengths:t,scansSidecar:n,mimetype:r,filehash:b,debugString:N,onProgressiveUpdate:a})}return e})),V({scanCount:U,directPath:h,encFilehash:_,type:C,signal:D}),k.default.download({directPath:h,encFilehash:_,type:C,signal:D,mode:O,byteRange:G,onResponseText:null==U&&M?function(e,t){var n;null===(n=F)||void 0===n||n.handleProgress(e.total,t)}:null,onDownloadHostFound:i,onDownloadAttemptSuccess:c,onDownloadAttemptError:d,debugString:N})]);case 18:if(z=e.sent,q=(0,s.default)(z,3),J=q[0],Q=q[1],X=q[2],A&&A(),o(X.byteLength),null==U){e.next=33;break}return e.t0=f.default,e.next=29,null===(ee=F)||void 0===ee?void 0:ee.handleProgress(Q,X);case 29:e.t1=e.sent,Z=(0,e.t0)(e.t1,"yield imageStreamer?.handleProgress(encryptedFileSize, ciphertextHmac)"),e.next=42;break;case 33:if(!P){e.next=39;break}return e.next=36,(0,y.default)({mediaKeys:J,ciphertext:X});case 36:Z=e.sent,e.next=42;break;case 39:return e.next=41,(0,g.default)({mediaKeys:J,ciphertextHmac:X,expectedPlaintextHash:b,debugString:N});case 41:Z=e.sent;case 42:return __LOG__(2)`downloadManager.download: [${N}] success`,e.abrupt("return",Z);case 46:throw e.prev=46,e.t2=e.catch(11),l(e.t2),e.t2 instanceof E.MediaNotFoundError?__LOG__(2,!0)`downloadManager.download: [${N}] expected error\n${(0,R.default)(e.t2)}`:__LOG__(3,!0)`downloadManager.download: [${N}] error\n${(0,R.default)(e.t2)}`,e.t2;case 51:case"end":return e.stop()}}),e,null,[[11,46]])})))).apply(this,arguments)}function j(){return Y.apply(this,arguments)}function Y(){return(Y=(0,l.default)(u.default.mark((function e(t){var n,r,a,i,s,l,c,d,f;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(e){null==l.webcChatType&&e.chat&&(l.webcChatType=e.chat.getWebcChatType()),null==l.webcMessageT&&(l.webcMessageT=e.t),l.messageMediaType=e.getWamMediaType()},a=t.mediaObject,i=null!==(n=null===(r=a.filehash)||void 0===r?void 0:r.slice(0,10))&&void 0!==n?n:"",a.filehash,a.type,__LOG__(2)`downloadManager.rmr: [${i}] start`,a.consolidate({downloadStage:C.DOWNLOAD_STAGE.REUPLOADING}),s=performance.now(),l=new I.default.WebcMediaRmr((0,o.default)((0,o.default)({},t.rmrData),{},{webcRmrReason:t.rmrReason})),null!=(c=(0,P.getEffectiveNetworkType)())&&(l.webcBrowserNetworkType=c),a.type&&(l.messageMediaType=(0,w.webMediaTypeToWamMediaType)(a.type)),null!=a.size&&(l.webcMediaSize=a.size),e.prev=12,e.next=15,a.rmr({onMsgSelect:d});case 15:if(f=e.sent,l.webcRmrStatusCode=f,__LOG__(2)`downloadManager.rmr: [${i}] status ${f}`,404!==f){e.next=20;break}throw new E.MediaNotOnPhone;case 20:if(200===f){e.next=22;break}throw new E.ServerStatusCodeError(f);case 22:e.next=34;break;case 24:if(e.prev=24,e.t0=e.catch(12),l.webcMediaRmrError=!0,!(e.t0 instanceof E.MediaNotOnPhone)){e.next=32;break}throw __LOG__(2,!0)`downloadManager.rmr: [${i}] error MediaNotOnPhone\n${(0,R.default)(e.t0)}`,e.t0;case 32:throw __LOG__(3,!0)`downloadManager.rmr: [${i}] error ${e.t0.status||e.t0.message}\n${e.t0.stack}`,new E.MediaNeedsReupload;case 34:return e.prev=34,l.webcMediaRmrT=Math.ceil(performance.now()-s),l.commit(),e.finish(34);case 38:case"end":return e.stop()}}),e,null,[[12,24,34,38]])})))).apply(this,arguments)}function K(){return W.apply(this,arguments)}function W(){return(W=(0,l.default)(u.default.mark((function e(t){var n,r,a,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.directPath,r=t.encFilehash,a=t.signal,i=t.type,e.next=3,k.default.checkExistence({directPath:n,encFilehash:r,type:i,signal:a||(new p.default).signal});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){var t=e.scanCount,n=e.directPath,a=e.encFilehash,i=e.type,o=e.signal;return null==t?r.resolve(null):k.default.getEncryptedMediaSize({directPath:(0,f.default)(n,"directPath is required for partial downloads"),encFilehash:(0,f.default)(a,"encFilehash is required for partial downloads"),signal:o,type:i})}var H=new U;t.default=H},81214:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LogoutDrop",{enumerable:!0,get:function(){return s.LogoutDrop}}),Object.defineProperty(t,"WebdDrop",{enumerable:!0,get:function(){return s.WebdDrop}}),Object.defineProperty(t,"ServerStatusCodeError",{enumerable:!0,get:function(){return s.ServerStatusCodeError}}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return u.AbortError}}),Object.defineProperty(t,"HttpNetworkError",{enumerable:!0,get:function(){return u.HttpNetworkError}}),Object.defineProperty(t,"HttpStatusCodeError",{enumerable:!0,get:function(){return u.HttpStatusCodeError}}),Object.defineProperty(t,"MMSForbiddenError",{enumerable:!0,get:function(){return u.MMSForbiddenError}}),Object.defineProperty(t,"MMSUnauthorizedError",{enumerable:!0,get:function(){return u.MMSUnauthorizedError}}),Object.defineProperty(t,"MMSThrottleError",{enumerable:!0,get:function(){return u.MMSThrottleError}}),Object.defineProperty(t,"MediaNotFoundError",{enumerable:!0,get:function(){return u.MediaNotFoundError}}),Object.defineProperty(t,"MediaDecryptionError",{enumerable:!0,get:function(){return l.MediaDecryptionError}}),Object.defineProperty(t,"MediaNeedsReupload",{enumerable:!0,get:function(){return l.MediaNeedsReupload}}),Object.defineProperty(t,"NoMediaHostsError",{enumerable:!0,get:function(){return c.NoMediaHostsError}}),t.MediaNotOnPhone=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(14650),u=n(89920),l=n(98569),c=n(75103),d=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this,404)).name="MediaNotOnPhone",e}return n}(s.ServerStatusCodeError);t.MediaNotOnPhone=d},75103:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return u.default}}),t.NoMediaHostsError=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(1838),u=r(n(2277)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("NoMediaHostsError"));t.NoMediaHostsError=l},15958:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0});var a={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(72724));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},67406:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HOST_TYPE=void 0;var a=r(n(43269)),i=r(n(34575)),o=r(n(93913)),s=n(16024),u=new Set(s.MEDIA_TYPE_VALUES),l=Object.freeze({PRIMARY:"primary",FALLBACK:"fallback"});t.HOST_TYPE=l;var c=function(){function e(t){(0,i.default)(this,e),this.hostname=t.hostname,this.ips=t.ips||[],this.type=t.type,this.class=t.class;var n=function(e){var t,n,r,i,o,s,l=(0,a.default)(e||[]);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c.download){var d;r=null!==(d=r)&&void 0!==d?d:new Set;var f,p=(0,a.default)(c.download);try{for(p.s();!(f=p.n()).done;){var h=f.value;r.add(h)}}catch(e){p.e(e)}finally{p.f()}}if(c.upload){var _;i=null!==(_=i)&&void 0!==_?_:new Set;var v,m=(0,a.default)(c.upload);try{for(m.s();!(v=m.n()).done;){var g=v.value;i.add(g)}}catch(e){m.e(e)}finally{m.f()}}c.downloadBuckets&&(o=c.downloadBuckets.map((function(e){return parseInt(e,10)})))}}catch(e){l.e(e)}finally{l.f()}return{supportedDownloadTypes:null!==(t=r)&&void 0!==t?t:u,supportedUploadTypes:null!==(n=i)&&void 0!==n?n:u,downloadBuckets:o}}(t.rules),r=n.downloadBuckets,o=n.supportedDownloadTypes,s=n.supportedUploadTypes;this.downloadBuckets=r,this._supportedDownloadTypes=o,this._supportedUploadTypes=s}return(0,o.default)(e,[{key:"isFallback",value:function(){return this.type===l.FALLBACK}},{key:"supportsDownloadMediaType",value:function(e){return this._supportedDownloadTypes.has(e)}},{key:"supportsUploadMediaType",value:function(e){var t="product-catalog-image"===e?"product":e;return this._supportedUploadTypes.has(t)}}]),e}();t.default=c},72724:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FETCH_STATE=void 0;var a=r(n(6479)),i=r(n(87757)),o=r(n(48926)),s=r(n(34575)),u=r(n(93913)),l=r(n(35340)),c=n(2277),d=n(75103),f=r(n(67406)),p=r(n(92882)),h=r(n(99797)),_=n(30566),v=r(n(76443));t.FETCH_STATE={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};var m=new(function(){function e(){var t=this;(0,s.default)(this,e),this._fetch=(0,p.default)((function(){return"all"}),function(){var e=(0,o.default)(i.default.mark((function e(n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.signal,e.prev=1,e.next=4,(0,_.sendQueryMediaConn)(r);case 4:o=e.sent,t._err=null,t._data={auth:o.auth,authExpirationTime:new Date(o.queryStartTime.getTime()+o.authTTL),authTTL:o.authTTL,hosts:o.hosts.map((function(e){return new f.default(e)})),hostsRefreshTime:new Date(o.queryStartTime.getTime()+o.ttl),queryStartTime:o.queryStartTime,maxBuckets:o.maxBuckets},e.next=18;break;case 9:if(e.prev=9,e.t0=e.catch(1),t._data=null,t._err=e.t0,e.t0.name!==c.ABORT_ERROR){e.next=16;break}return __LOG__(2)`mediaHosts.sendQueryMediaConn aborted`,e.abrupt("return");case 16:__LOG__(3,!0)`mediaHosts.sendQueryMediaConn error: ${i=e.t0,void 0,void 0,void 0,s=void 0,u=void 0,l=void 0,d=void 0,i.name,i.message,i.stack,s=(0,a.default)(i,["name","message","stack"]),u=(0,h.default)(i),l=u.slice(u.indexOf("\n")+1),d=0===Object.keys(s).length?"":" "+JSON.stringify(s,(function(e,t){return e&&"object"==typeof t?String(t):t})),`${i.name||"Error"}: ${i.message}${d}\n${l}`}`,__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Error fetching mms hosts");case 18:case"end":return e.stop()}var i,s,u,l,d}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()),this._reset()}var t,n;return(0,u.default)(e,[{key:"getHostsInfo",value:(n=(0,o.default)(i.default.mark((function e(t){var n,r,a,o,s,u,c,f,p,h,_,m,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.directPath,r=t.encFilehash,a=t.operation,o=t.type,s=t.signal,u={signal:s||(new l.default).signal},e.next=4,this._refreshIfStale(u);case 4:if(this._data){e.next=6;break}throw new d.NoMediaHostsError("no fetched data");case 6:if(c=this._data,f=c.auth,p=c.hosts,h=c.maxBuckets,_=(0,v.default)({directPath:n,encFilehash:r,hosts:p,operation:a,type:o,maxBuckets:h}),m=_.selectedHost,g=_.fallbackHost,m){e.next=10;break}throw new d.NoMediaHostsError("no selected host");case 10:return e.abrupt("return",{auth:f,selectedHost:m,fallbackHost:g});case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_isExpiredOrMissing",value:function(){if(!this._data)return!0;var e=this._data;return new Date>=e.authExpirationTime}},{key:"_needsRefresh",value:function(){if(!this._data)return!0;var e=this._data;if(new Date>=e.hostsRefreshTime)return!0;var t=e.authTTL,n=e.queryStartTime,r=Math.floor(.8*t),a=new Date(n.getTime()+r);return new Date>=a}},{key:"_refreshIfStale",value:(t=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isExpiredOrMissing()){e.next=5;break}return this._reset(),e.next=4,this._fetch(t);case 4:return e.abrupt("return",!0);case 5:if(!this._needsRefresh()){e.next=8;break}return this._fetch(t),e.abrupt("return",!1);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_reset",value:function(){this._data=null,this._err=null}}]),e}());t.default=m},76443:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r,l=e.encFilehash,c=e.directPath,d=e.hosts,f=e.operation,p=e.type,h=e.maxBuckets;if(!d.length)return{selectedHost:null,fallbackHost:null};if(f===u.DOWNLOAD){var _,v=c?c.match(/&_nc_hot=([0-9]+)/):null,m=parseInt(v&&v[1],10),g=isNaN(m)?null:(0,a.unixTime)()-m,y=s.default.mmsHotContentTimespan,E=s.default.mmsVCacheAggregationEnabled;null!=y&&y>0&&(p===o.default.STICKER||null!=g&&g<=y)?_=1:E&&null!=h&&(_=(0,i.default)(l,h)+100);var S=function(e){var t=new Map;return e.forEach((function(e){var n;null===(n=e.downloadBuckets)||void 0===n||n.forEach((function(n){t.set(n,e)}))})),t}(d),b=null==_?null:S.get(_),T=S.get(0);(null==b?void 0:b.supportsDownloadMediaType(p))?r=b:(null==T?void 0:T.supportsDownloadMediaType(p))&&(r=T)}var w=d.find((function(e){return e.isFallback()}));return r=null!==(t=r)&&void 0!==t?t:d.find((function(e){return f===u.UPLOAD?e.supportsUploadMediaType(p):e.supportsDownloadMediaType(p)})),{selectedHost:null!==(n=r)&&void 0!==n?n:null,fallbackHost:null!=w?w:null}},t.OPERATIONS=void 0;var a=n(90066),i=r(n(56701)),o=r(n(16024)),s=r(n(63056)),u={DOWNLOAD:"DOWNLOAD",UPLOAD:"UPLOAD"};t.OPERATIONS=u},89920:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return s.AbortError}}),Object.defineProperty(t,"HttpNetworkError",{enumerable:!0,get:function(){return s.HttpNetworkError}}),Object.defineProperty(t,"HttpInvalidResponseError",{enumerable:!0,get:function(){return s.HttpInvalidResponseError}}),Object.defineProperty(t,"MmsDownloadFilehashMismatchError",{enumerable:!0,get:function(){return s.MmsDownloadFilehashMismatchError}}),Object.defineProperty(t,"HttpStatusCodeError",{enumerable:!0,get:function(){return s.HttpStatusCodeError}}),Object.defineProperty(t,"NoMediaHostsError",{enumerable:!0,get:function(){return u.NoMediaHostsError}}),t.MMSThrottleError=t.MMSForbiddenError=t.MMSUnauthorizedError=t.MediaInvalidError=t.MediaTooLargeError=t.MediaNotFoundError=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(31776),u=n(75103),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,404,e,r)).name="MediaNotFoundError",i}return n}(s.HttpStatusCodeError);t.MediaNotFoundError=l;var c=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,413,e,r)).name="MediaTooLargeError",i}return n}(s.HttpStatusCodeError);t.MediaTooLargeError=c;var d=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,415,e,r)).name="MediaInvalidError",i}return n}(s.HttpStatusCodeError);t.MediaInvalidError=d;var f=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,401,e,r)).name="MMSUnauthorizedError",i}return n}(s.HttpStatusCodeError);t.MMSUnauthorizedError=f;var p=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,403,e,r)).name="MMSForbiddenError",i}return n}(s.HttpStatusCodeError);t.MMSForbiddenError=p;var h=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,507,e,r)).name="MMSThrottleError",i}return n}(s.HttpStatusCodeError);t.MMSThrottleError=h},84052:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.directPath,r=e.encFilehash,l=e.hostname,c=e.type,d=e.mode,f=e.byteRange;return n?function(e){var t=e.directPath,n=e.encFilehash,r=e.hostname,a=e.query,i=new URL(t,`https://${r}`);if(i.hostname!==r)throw __LOG__(4,void 0,new Error,!0)`url.hostname: ${i.hostname}, hostname: ${r}, directPath: ${t}`,SEND_LOGS("malicious directPath"),new Error("malicious directPath");var o=i.searchParams||new u.default(i.search);return o.set("hash",(0,s.default)(n)),Object.keys(a).forEach((function(e){var t=a[e];null!=t&&o.set(e,t)})),`https://${i.host}${i.pathname}?${o.toString()}`}({encFilehash:r,hostname:l,directPath:n,query:(t={mode:d,bytestart:null==f?void 0:f.start.toString(),byteend:null==f?void 0:f.end.toString()},(0,a.default)(t,o.MMS_URL_MEDIA_TYPE_SEARCH_PARAM,c),(0,a.default)(t,o.IS_MMS_URL_SEARCH_PARAM,""),t)}):(0,i.default)({hostname:l,type:c,encFilehash:r,query:(0,a.default)({mode:d},o.IS_MMS_URL_SEARCH_PARAM,"")})};var a=r(n(59713)),i=r(n(17697)),o=n(58754),s=r(n(63701)),u=r(n(20997))},17697:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.hostname,n=e.type,r=e.encFilehash,u=e.query,l=(0,a.default)(s[n],"MEDIA_TYPE_TO_PATH[type]"),c=new URL(`https://${t}${l}/${(0,i.default)(r)}`),d={};u&&Object.keys(u).forEach((function(e){null!=u[e]&&(d[e]=u[e])}));var f=new o.default(d).toString();f&&(f=`?${f}`);return`https://${c.host}${c.pathname}${f}`};var a=r(n(91080)),i=r(n(63701)),o=r(n(20997)),s={audio:"/mms/audio",document:"/mms/document",gif:"/mms/gif",image:"/mms/image",ppic:"/pps/photo",product:"/mms/image",ptt:"/mms/ptt",sticker:"/mms/sticker","thumbnail-document":"/mms/thumbnail-document","thumbnail-link":"/mms/thumbnail-link",video:"/mms/video","md-app-state":"/mms/md-app-state","product-catalog-image":"/product/image"}},59080:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.auth,n=e.encFilehash,r=e.hostname,s=e.query,u=e.type,l=(0,a.default)({auth:t,token:(0,o.default)(n)},s);return(0,i.default)({encFilehash:n,hostname:r,type:u,query:l})};var a=r(n(81109)),i=r(n(17697)),o=r(n(63701))},29402:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0});var a={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(20023));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},66089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e instanceof r.MMSThrottleError)return!1;return e instanceof r.NoMediaHostsError||e instanceof r.HttpNetworkError||e instanceof r.MMSUnauthorizedError||e instanceof r.HttpStatusCodeError&&e.status>=500};var r=n(89920)},46666:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return l.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(2277),s=n(89920),u=r(n(44319));function l(){return(l=(0,i.default)(a.default.mark((function e(t){var n,r,i,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.encFilehash,t.type,__LOG__(2)`mmsCheckIfUploadExists: start`,e.prev=2,e.next=5,(0,u.default)(t);case 5:if("complete"===(n=e.sent).resume){e.next=8;break}throw new s.MediaNotFoundError("mmsCheckIfUploadExists");case 8:if(r=n.directPath,i=n.url,l=n.handle,r){e.next=11;break}throw new s.HttpInvalidResponseError("mmsCheckIfUploadExists: missing directPath");case 11:if(i){e.next=13;break}throw new s.HttpInvalidResponseError("mmsCheckIfUploadExists: missing url");case 13:return __LOG__(2)`mmsCheckIfUploadExists: success`,e.abrupt("return",{directPath:r,url:i,handle:l});case 17:throw e.prev=17,e.t0=e.catch(2),e.t0 instanceof s.MediaNotFoundError?__LOG__(2)`mmsCheckIfUploadExists: expected error`:e.t0.name===o.ABORT_ERROR?__LOG__(2)`mmsCheckIfUploadExists: canceled`:__LOG__(3)`mmsCheckIfUploadExists: error`,e.t0;case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}},20023:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(81109)),o=r(n(48926)),s=r(n(34575)),u=r(n(93913)),l=n(2277),c=n(89920),d=r(n(14534)),f=r(n(66089)),p=r(n(15958)),h=r(n(46666)),_=n(13579),v=r(n(70402)),m=r(n(67890)),g=r(n(33386)),y={minTimeout:1e3,retries:3};function E(e){var t=e.selectedHost,n=e.fallbackHost,r=e.failCount,a=e.lastFetchMadeProgress;return r>=2&&!a&&n?n:t}function S(e,t){var n=t.directPath,r=t.encFilehash,s=t.type,u=t.signal;return __LOG__(2)`runTaskWithBackoff: start`,(0,d.default)((0,i.default)((0,i.default)({},y),{},{signal:u}),function(){var t=(0,o.default)(a.default.mark((function t(i,o){var l,c;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return __LOG__(2)`runMmsTaskWithBackoff: attempt #${o+1}`,t.prev=1,t.next=4,b({operation:g.default.DOWNLOAD,directPath:n,encFilehash:r,type:s,signal:u,failCount:o});case 4:return l=t.sent,t.next=7,e(l);case 7:return c=t.sent,t.abrupt("return",c);case 11:if(t.prev=11,t.t0=t.catch(1),!(0,f.default)(t.t0)){t.next=15;break}return t.abrupt("return",i(t.t0));case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}())}function b(){return T.apply(this,arguments)}function T(){return(T=(0,o.default)(a.default.mark((function e(t){var n,r,i,o,s,u,l,c,d,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.failCount,r=t.operation,i=t.directPath,o=t.encFilehash,s=t.type,u=t.signal,e.next=3,p.default.getHostsInfo({operation:r,directPath:i,encFilehash:o,type:s,signal:u});case 3:return l=e.sent,c=l.selectedHost,d=l.fallbackHost,f=n>=2&&d?d:c,e.abrupt("return",f.hostname);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=new(function(){function e(){(0,s.default)(this,e)}var t;return(0,u.default)(e,[{key:"checkIfUploadExists",value:(t=(0,o.default)(a.default.mark((function e(t){var n,r,s,u,_;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.encFilehash,r=t.signal,s=t.type,u=!1,t.encFilehash,t.type,__LOG__(2)`mmsClient.checkIfUploadExists: start`,e.prev=4,e.next=7,(0,d.default)((0,i.default)((0,i.default)({},y),{},{signal:r}),function(){var e=(0,o.default)(a.default.mark((function e(t,i){var o,l,c,d,_;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2)`mmsClient.checkIfUploadExists: attempt #${i+1}`,e.next=3,m.default.waitIfOffline({signal:r});case 3:return e.prev=3,e.next=6,p.default.getHostsInfo({operation:g.default.UPLOAD,encFilehash:n,type:s,signal:r});case 6:return o=e.sent,l=o.auth,c=o.selectedHost,d=o.fallbackHost,_=E({selectedHost:c,fallbackHost:d,failCount:i,lastFetchMadeProgress:u}),e.next=13,(0,h.default)({auth:l,encFilehash:n,hostname:_.hostname,type:s,signal:r,onProgress:function(){u=!0}});case 13:return e.abrupt("return",e.sent);case 16:if(e.prev=16,e.t0=e.catch(3),!(0,f.default)(e.t0)){e.next=20;break}return e.abrupt("return",t(e.t0));case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}());case 7:return _=e.sent,__LOG__(2)`mmsClient.checkIfUploadExists: success`,e.abrupt("return",_);case 12:throw e.prev=12,e.t0=e.catch(4),e.t0 instanceof c.MediaNotFoundError?__LOG__(2)`mmsClient.checkIfUploadExists: expected error`:e.t0.name===l.ABORT_ERROR?__LOG__(2)`mmsClient.checkIfUploadExists: canceled`:__LOG__(3)`mmsClient.checkIfUploadExists: error`,e.t0;case 16:case"end":return e.stop()}}),e,null,[[4,12]])}))),function(){return t.apply(this,arguments)})},{key:"upload",value:function(e){var t=e.ciphertextHmac,n=e.encFilehash,r=e.type,a=e.signal,o=e.onUploadHostFound,s=e.onUploadAttemptSuccess,u=e.onUploadAttemptError,c=!1;__LOG__(2)`mmsClient.upload: start`;var h=Date.now();return(0,d.default)((0,i.default)((0,i.default)({},y),{},{signal:a}),(function(e,i){return h=Date.now(),__LOG__(2)`mmsClient.upload: attempt #${i+1}`,m.default.waitIfOffline({signal:a}).then((function(){return p.default.getHostsInfo({operation:g.default.UPLOAD,encFilehash:n,type:r,signal:a}).then((function(e){var s=e.auth,u=E({selectedHost:e.selectedHost,fallbackHost:e.fallbackHost,failCount:i,lastFetchMadeProgress:c});return o({hostName:u.hostname,hostClass:u.class,failCount:i}),(0,v.default)({auth:s,ciphertextHmac:t,hostname:u.hostname,encFilehash:n,type:r,signal:a,onProgress:function(){c=!0}})})).catch((function(t){var n=(0,f.default)(t);if(!n||i===y.retries||u(t,Date.now()-h),n)return e(t);throw t}))}))})).then((function(e){return s(Date.now()-h),__LOG__(2)`mmsClient.upload: success`,e})).catch((function(e){throw e.name===l.ABORT_ERROR?__LOG__(2)`mmsClient.upload: canceled`:__LOG__(3)`mmsClient.upload: error`,e}))}},{key:"download",value:function(e){var t=e.directPath,n=e.encFilehash,r=e.type,a=e.signal,o=e.mode,s=e.byteRange,u=e.debugString,h=e.onResponseText,v=e.onDownloadHostFound,m=e.onDownloadAttemptSuccess,S=e.onDownloadAttemptError,b=!1;__LOG__(2)`mmsClient.download: [${u}] start`;var T=Date.now();return(0,d.default)((0,i.default)((0,i.default)({},y),{},{signal:a}),(function(e,i){return T=Date.now(),__LOG__(2)`mmsClient.download: [${u}] attempt #${i+1}`,p.default.getHostsInfo({operation:g.default.DOWNLOAD,directPath:t,encFilehash:n,type:r,signal:a}).then((function(e){e.auth;var l=E({selectedHost:e.selectedHost,fallbackHost:e.fallbackHost,failCount:i,lastFetchMadeProgress:b});return v({hostName:l.hostname,hostClass:l.class,failCount:i}),(0,_.mms4Download)({directPath:t,encFilehash:n,hostname:l.hostname,type:r,signal:a,mode:o,byteRange:s,debugString:u,onProgress:function(){b=!0},onResponseText:h})})).catch((function(t){var n=(0,f.default)(t);if(!n||i===y.retries||S({err:t,overallT:Date.now()-T,failCount:i}),n)return e(t);throw t}))})).then((function(e){return m(Date.now()-T),__LOG__(2)`mmsClient.download: [${u}] success`,e})).catch((function(e){throw e instanceof c.MediaNotFoundError?__LOG__(2)`mmsClient.download: [${u}] expected error`:e.name===l.ABORT_ERROR?__LOG__(2)`mmsClient.download: [${u}] canceled`:__LOG__(3)`mmsClient.download: [${u}] error`,e}))}},{key:"checkExistence",value:function(e){return S((function(t){return(0,_.mmsCheckExistence)((0,i.default)((0,i.default)({},e),{},{hostname:t}))}),e)}},{key:"getEncryptedMediaSize",value:function(e){return S((function(t){return(0,_.mmsGetEncryptedMediaSize)((0,i.default)((0,i.default)({},e),{},{hostname:t}))}),e)}}]),e}());t.default=w},13579:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f,t.mms4Download=function(e){var t=e.directPath,n=e.encFilehash,r=e.hostname,o=e.type,u=e.signal,l=e.onProgress,c=e.onResponseText,p=e.mode,h=e.byteRange,_=e.debugString,v=(0,d.default)({directPath:t,encFilehash:n,hostname:r,type:o,mode:p,byteRange:h});return f({url:v,signal:u,onProgress:l,onResponseText:c,ciphertextValidator:h?null:function(){var e=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)(t);case 2:return e.t0=e.sent,e.t1=n,e.abrupt("return",e.t0===e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),debugString:_,debug:{encFilehash:n,type:o,url:v}})},t.mms3Download=function(e){var t=e.signal,n=e.deprecatedMms3Url,r=e.debugString,a=e.onProgress,i=e.onResponseText;return f({url:n,signal:t,onProgress:a,onResponseText:i,debugString:r,debug:{deprecatedMms3Url:n}})},t.mmsCheckExistence=function(){return h.apply(this,arguments)},t.mmsGetEncryptedMediaSize=function(){return _.apply(this,arguments)},t.validateMmsResponse=v;var a=r(n(87757)),i=r(n(48926)),o=n(2277),s=r(n(52948)),u=n(89920),l=n(98569),c=r(n(68024)),d=r(n(84052));function f(){return p.apply(this,arguments)}function p(){return(p=(0,i.default)(a.default.mark((function e(t){var n,r,i,s,l,d,f,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.signal,i=t.onProgress,s=t.onResponseText,t.debug,l=t.debugString,d=t.ciphertextValidator,__LOG__(2)`mmsDownload: [${l}] start`,e.prev=2,e.next=5,(0,c.default)(n,{signal:r,onProgress:i,onResponseText:s});case 5:return f=e.sent,e.next=8,v({response:f,functionName:"mmsDownload",url:n});case 8:return e.next=10,f.arrayBuffer();case 10:if(p=e.sent,e.t0=d,!e.t0){e.next=16;break}return e.next=15,d(p);case 15:e.t0=!e.sent;case 16:if(!e.t0){e.next=18;break}throw new u.MmsDownloadFilehashMismatchError({url:n});case 18:return __LOG__(2)`mmsDownload: [${l}] success`,e.abrupt("return",p);case 22:throw e.prev=22,e.t1=e.catch(2),e.t1 instanceof u.MediaNotFoundError?__LOG__(2)`mmsDownload: [${l}] error ${e.t1.name} ${e.t1.message}`:e.t1.name===o.ABORT_ERROR?__LOG__(2)`mmsDownload: [${l}] canceled`:__LOG__(3)`mmsDownload: [${l}] error ${String(e.t1)}`,e.t1;case 26:case"end":return e.stop()}}),e,null,[[2,22]])})))).apply(this,arguments)}function h(){return(h=(0,i.default)(a.default.mark((function e(t){var n,r,i,o,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.directPath,r=t.encFilehash,i=t.hostname,o=t.type,s=t.signal,e.next=3,g({directPath:n,encFilehash:r,hostname:i,type:o,signal:s,functionName:"mmsCheckExistence"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=(0,i.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.directPath,r=t.encFilehash,i=t.hostname,o=t.type,s=t.signal,e.next=3,g({directPath:n,encFilehash:r,hostname:i,type:o,signal:s,functionName:"mmsGetEncryptedMediaSize"});case 3:if(u=e.sent,c=u.headers.get("content-length")){e.next=7;break}throw new l.UnableToGetContentLengthError;case 7:return e.abrupt("return",parseInt(c,10));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.response,r=t.url,i=t.functionName,n.ok){e.next=15;break}e.t0=n.status,e.next=401===e.t0?5:403===e.t0?6:404===e.t0||410===e.t0?12:507===e.t0?13:14;break;case 5:throw new u.MMSUnauthorizedError(i,{url:r});case 6:return e.next=8,n.text();case 8:if(!e.sent.includes("URL signature expired")){e.next=11;break}throw new u.MediaNotFoundError(i,{url:r,status:n.status});case 11:throw new u.MMSForbiddenError(i,{url:r});case 12:throw new u.MediaNotFoundError(i,{url:r,status:n.status});case 13:throw new u.MMSThrottleError(i,{url:r});case 14:throw new u.HttpStatusCodeError(n.status,i,{url:r});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)(a.default.mark((function e(t){var n,r,i,o,s,u,l,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.directPath,r=t.encFilehash,i=t.hostname,o=t.type,s=t.signal,u=t.functionName,l=(0,d.default)({directPath:n,encFilehash:r,hostname:i,type:o,mode:"auto"}),e.next=4,(0,c.default)(l,{method:"HEAD",signal:s});case 4:return f=e.sent,e.next=7,v({response:f,functionName:u,url:l});case 7:return e.abrupt("return",f);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},44319:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return c.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(2277),s=n(89920),u=r(n(68024)),l=r(n(59080));function c(){return(c=(0,i.default)(a.default.mark((function e(t){var n,r,i,c,d,f,p,h,_;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.encFilehash,i=t.hostname,c=t.signal,d=t.type,f=t.onProgress,p=(0,l.default)({auth:n,encFilehash:r,hostname:i,query:{resume:1},type:d}),__LOG__(2)`mmsGetUploadProgress: start`,e.prev=4,e.next=7,(0,u.default)(p,{method:"post",signal:c,onProgress:f});case 7:if((h=e.sent).ok){e.next=15;break}e.t0=h.status,e.next=401===e.t0?12:404===e.t0?13:14;break;case 12:throw new s.MMSUnauthorizedError("mmsGetUploadProgress",{url:p});case 13:throw new s.MediaNotFoundError("mmsGetUploadProgress",{url:p});case 14:throw new s.HttpStatusCodeError(h.status,"mmsGetUploadProgress",{url:p});case 15:return e.next=17,h.json();case 17:if((_=e.sent).resume){e.next=20;break}throw new s.HttpInvalidResponseError("mmsGetUploadProgress: missing resume",{url:p});case 20:return __LOG__(2)`mmsGetUploadProgress: success`,e.abrupt("return",{directPath:_.direct_path,resume:_.resume,url:_.url,handle:_.handle});case 24:throw e.prev=24,e.t1=e.catch(4),e.t1 instanceof s.MediaNotFoundError?__LOG__(2)`mmsGetUploadProgress: expected error`:e.t1.name===o.ABORT_ERROR?__LOG__(2)`mmsGetUploadProgress: canceled`:__LOG__(3)`mmsGetUploadProgress: error`,e.t1;case 28:case"end":return e.stop()}}),e,null,[[4,24]])})))).apply(this,arguments)}},70402:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.auth,n=e.ciphertextHmac,r=e.encFilehash,u=e.hostname,l=e.type,c=e.signal,d=e.onProgress,f=(0,s.default)({auth:t,encFilehash:r,hostname:u,type:l});return __LOG__(2)`mmsUpload: start`,(0,o.default)(f,{method:"post",body:n,signal:c,onProgress:d}).then((function(e){if(!e.ok)switch(e.status){case 401:throw new i.MMSUnauthorizedError("mmsUpload",{url:f});case 413:throw new i.MediaTooLargeError("mmsUpload",{url:f});case 415:throw new i.MediaInvalidError("mmsUpload: hash mismatch",{url:f});case 507:throw new i.MMSThrottleError("mmsUpload",{url:f});default:throw new i.HttpStatusCodeError(e.status,"mmsUpload",{url:f})}return e.json()})).then((function(e){if(!e.direct_path)throw new i.HttpInvalidResponseError("mmsUpload: missing direct_path");if(!e.url)throw new i.HttpInvalidResponseError("mmsUpload: missing url");return{directPath:e.direct_path,url:e.url,handle:e.handle}})).then((function(e){return __LOG__(2)`mmsUpload: success`,e})).catch((function(e){throw e.name===a.ABORT_ERROR?__LOG__(2)`mmsUpload: canceled`:__LOG__(3)`mmsUpload: error`,e}))};var a=n(2277),i=n(89920),o=r(n(68024)),s=r(n(59080))},25704:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return r.AbortError}}),Object.defineProperty(t,"HttpNetworkError",{enumerable:!0,get:function(){return r.HttpNetworkError}}),Object.defineProperty(t,"HttpStatusCodeError",{enumerable:!0,get:function(){return r.HttpStatusCodeError}}),Object.defineProperty(t,"MediaNotFoundError",{enumerable:!0,get:function(){return r.MediaNotFoundError}}),Object.defineProperty(t,"MediaTooLargeError",{enumerable:!0,get:function(){return r.MediaTooLargeError}}),Object.defineProperty(t,"MediaInvalidError",{enumerable:!0,get:function(){return r.MediaInvalidError}}),Object.defineProperty(t,"MMSUnauthorizedError",{enumerable:!0,get:function(){return r.MMSUnauthorizedError}}),Object.defineProperty(t,"MediaEncryptionError",{enumerable:!0,get:function(){return a.MediaEncryptionError}}),Object.defineProperty(t,"NoMediaHostsError",{enumerable:!0,get:function(){return i.NoMediaHostsError}});var r=n(89920),a=n(98569),i=n(75103)},51985:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(14548))},14548:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(63038)),o=a(n(34575)),s=a(n(93913)),u=n(90066),l=n(2277),c=a(n(11015)),d=n(89920),f=n(19059),p=n(44160),h=a(n(92882)),_=a(n(8643)),v=a(n(29402)),m=a(n(94025)),g=a(n(63056)),y=a(n(20997));function E(e,t,n,r){var a=new _.default.MediaUpload2({mediaId:(0,p.generateMediaEventId)(),connectionType:_.default.CONNECTION_TYPE.HOSTNAME,overallMediaType:(0,p.getMetricMediaType)(e),overallMmsVersion:4,overallAttemptCount:n,networkStack:_.default.NETWORK_STACK_TYPE.NATIVE,overallUploadMode:_.default.MEDIA_UPLOAD_MODE_TYPE.REGULAR,overallIsForward:r,overallUploadOrigin:t});return{onArrayBufferCreated:function(e){a.set({overallMediaSize:e})},onCheckExistingError:function(e){e instanceof d.HttpStatusCodeError&&a.set({resumeHttpCode:e.status})},onCheckExistingSuccess:function(){a.set({overallUploadResult:_.default.MEDIA_UPLOAD_RESULT_TYPE.DUPLICATE,overallIsFinal:!0,resumeHttpCode:200}),a.markOverallCumT(),a.commit()},onUploadHostFound:function(e){var t=e.hostName,n=e.hostClass,r=e.failCount;a.set({overallDomain:t,overallConnectionClass:n,overallRetryCount:r})},onUploadSuccess:function(){a.set({resumeHttpCode:404,overallUploadResult:_.default.MEDIA_UPLOAD_RESULT_TYPE.OK,overallIsFinal:!0,uploadHttpCode:200,finalizeHttpCode:200}),a.markOverallCumT(),a.commit()},onUploadError:function(e){a.set({overallUploadResult:(0,p.getMetricUploadErrorResultType)(e),overallIsFinal:!0});var t=(0,p.getStatusCode)(e);null!=t&&(a.uploadHttpCode=t,a.finalizeHttpCode=t),a.markOverallCumT(),a.commit(),(0,p.logErrorUnknownDetails)(a,e)},onUploadAttemptSuccess:function(e){a.set({overallT:e})},onUploadAttemptError:function(e,t,n){var r=new _.default.MediaUpload2(a);r.set({mediaId:(0,p.generateMediaEventId)(),overallUploadResult:(0,p.getMetricUploadErrorResultType)(e),overallIsFinal:!1,overallT:t,overallRetryCount:n});var i=(0,p.getStatusCode)(e);null!=i&&(a.uploadHttpCode=i),a.markOverallCumT(),r.commit(),(0,p.logErrorUnknownDetails)(a,e)}}}var S=new(function(){function e(){var t=this;(0,o.default)(this,e),this.checkIfAlreadyUploaded=(0,h.default)((function(e){return e.encFilehash}),(function(e){e.encFilehash,e.type;return __LOG__(2)`uploadManager.checkIfAlreadyUploaded: start`,v.default.checkIfUploadExists(e).catchType(d.MediaNotFoundError,(function(){return null})).then((function(e){return __LOG__(2)`uploadManager.checkIfAlreadyUploaded: success`,e})).catch((function(e){throw e.name===l.ABORT_ERROR?__LOG__(2)`uploadManager.checkIfAlreadyUploaded: canceled`:__LOG__(3)`uploadManager.checkIfAlreadyUploaded: error`,e}))})),this._memoizedUpload=(0,h.default)((function(e){return e.encFilehash}),(function(e){var t=e.ciphertextHmac,n=e.encFilehash,r=e.type,a=e.signal,i=e.onUploadHostFound,o=e.onUploadAttemptSuccess,s=e.onUploadAttemptError,u=e.onUploadSuccess;return v.default.upload({ciphertextHmac:t,encFilehash:n,type:r,signal:a,onUploadHostFound:i,onUploadAttemptSuccess:o,onUploadAttemptError:s}).then((function(e){return u(),e}))})),this._getExistingOrUpload=(0,h.default)((function(e){return e.encFilehash}),(function(e){var n=e.ciphertextHmac,r=e.encFilehash,a=e.signal,i=e.type,o=e.onCheckExistingSuccess,s=e.onCheckExistingError,u=e.onUploadHostFound,c=e.onUploadAttemptSuccess,d=e.onUploadAttemptError,f=e.onUploadSuccess;return __LOG__(2)`uploadManager._getExistingOrUpload: start`,t.checkIfAlreadyUploaded({encFilehash:r,type:i,signal:a}).catch((function(e){throw s(e),e})).then((function(e){return e?(o(),e):t._memoizedUpload({ciphertextHmac:n,encFilehash:r,type:i,signal:a,onUploadHostFound:u,onUploadAttemptSuccess:c,onUploadAttemptError:d,onUploadSuccess:f})})).then((function(e){return __LOG__(2)`uploadManager._getExistingOrUpload: success`,e})).catch((function(e){throw e.name===l.ABORT_ERROR?__LOG__(2)`uploadManager._getExistingOrUpload: canceled`:__LOG__(3)`uploadManager._getExistingOrUpload: error`,e}))}))}return(0,s.default)(e,[{key:"encryptAndUpload",value:function(e){var t=this,n=e.blob,a=e.signal,i=e.type,o=e.userUploadAttemptCount,s=e.forwardedFromWeb,u=e.uploadOrigin;__LOG__(2)`uploadManager.encryptAndUpload: start`;var d=E(i,u,o,s),p=d.onCheckExistingSuccess,h=d.onCheckExistingError,_=d.onUploadHostFound,v=d.onUploadAttemptSuccess,y=d.onUploadAttemptError,S=d.onUploadSuccess,T=d.onArrayBufferCreated,w=d.onUploadError;return(n instanceof Blob?(0,f.blobToArrayBuffer)(n):r.resolve(n)).then((function(n){var r,o;if(T(n.byteLength),null!=e.mediaKey&&null!=e.mediaKeyTimestamp)r=e.mediaKey,o=e.mediaKeyTimestamp;else{var u=(0,m.default)();r=u.key,o=u.timestamp}return(0,c.default)({type:i,plaintext:n,mediaKey:r}).then((function(n){var u=n.ciphertextHmac,l=n.hash,c=n.sidecar,d=n.firstFrameSidecar;return(e.mediaKey?t._getExistingOrUpload({ciphertextHmac:u,encFilehash:l,type:i,signal:a,onCheckExistingSuccess:p,onCheckExistingError:h,onUploadHostFound:_,onUploadAttemptSuccess:v,onUploadAttemptError:y,onUploadSuccess:S}):t._memoizedUpload({ciphertextHmac:u,encFilehash:l,type:i,signal:a,onUploadHostFound:_,onUploadAttemptSuccess:v,onUploadAttemptError:y,onUploadSuccess:S})).then((function(e){return{directPath:s&&g.default.mmsCatV1ForwardHotOverrideEnabled?b(e.directPath):e.directPath,encFilehash:l,mediaKey:r,mediaKeyTimestamp:o,sidecar:c,firstFrameSidecar:d,url:e.url,handle:e.handle}}))}))})).then((function(e){return __LOG__(2)`uploadManager.encryptAndUpload: success`,e})).catch((function(e){throw e.name===l.ABORT_ERROR?__LOG__(2)`uploadManager.encryptAndUpload: canceled`:__LOG__(3)`uploadManager.encryptAndUpload: error`,w(e),e}))}},{key:"unencryptedUpload",value:function(e){var t=e.file,n=e.hash,r=e.type,a=e.signal,i=E(r,e.uploadOrigin,0,!1),o=i.onCheckExistingSuccess,s=i.onCheckExistingError,u=i.onUploadHostFound,l=i.onUploadAttemptSuccess,c=i.onUploadAttemptError,d=i.onUploadSuccess;return this._getExistingOrUpload({ciphertextHmac:t,encFilehash:n,type:r,signal:a,onCheckExistingSuccess:o,onCheckExistingError:s,onUploadHostFound:u,onUploadAttemptSuccess:l,onUploadAttemptError:c,onUploadSuccess:d})}}]),e}());function b(e){var t=e.split("?"),n=(0,i.default)(t,2),r=n[0],a=n[1],o=new y.default(a),s=(0,u.unixTime)();return o.set("_nc_hot",String(s)),`${r}?${o.toString()}`}t.default=S},83653:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cancelDownloadMedia=function(e){var t=e.downloadPromise;if(null==t)return;var n=D.get(t);if(null==n)return;D.delete(t),n()},t.manuallySetMedia=function(e){var t=e.mimetype,n=e.mediaObject,r=e.mediaBlob,a=e.mediaType,i=e.rmrReason,o=e.downloadOrigin;if(n.mediaBlob)return;(0,T.gatherAndSetMetadata)(n,r).then((function(){return N({mimetype:t,mediaObject:n,downloadEvenIfExpensive:!1,mediaType:a,rmrReason:i,downloadOrigin:o})}))},t.downloadMedia=N,t.checkExistence=function(){return L.apply(this,arguments)},Object.defineProperty(t,"MediaDecryptionError",{enumerable:!0,get:function(){return v.MediaDecryptionError}}),Object.defineProperty(t,"MediaNotOnPhone",{enumerable:!0,get:function(){return v.MediaNotOnPhone}});var o=i(n(87757)),s=i(n(48926)),u=i(n(34575)),l=i(n(2205)),c=i(n(99842)),d=n(1838),f=i(n(91080)),p=i(n(35340)),h=n(2277),_=i(n(75214)),v=n(81214),m=a(n(98569)),g=n(19059),y=i(n(76486)),E=a(n(60996)),S=i(n(16024)),b=n(87261),T=n(81365),w=i(n(8643)),A=n(13242),C=i(n(74984)),O=i(n(36737)),M=n(38210),I=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return n}((0,d.customError)("NoEntryAfterRMR")),k=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return n}((0,d.customError)("MissingEncFilehash")),P=3,R=4,D=new WeakMap;function N(e){var t=e.mimetype,n=e.mediaObject,a=e.downloadEvenIfExpensive,i=e.mediaType,o=e.signal,s=e.rmrReason,u=e.rmrData,l=e.downloadOrigin,c=e.shouldThrow,d=e.isVcardOverMmsDocument,w=e.mode;if(!n)return r.resolve();var P=n.filehash;if(!P)return r.resolve();if(n.downloadPromise)return n.downloadPromise;if(n.downloadStage===b.DOWNLOAD_STAGE.ERROR_MISSING)return r.resolve();if(n.downloadStage===b.DOWNLOAD_STAGE.PREPARING)return r.resolve();if(n.mediaBlob)return n.mediaBlob.validate().then((function(e){if(!e)return n.clearBlob(),n.consolidate({downloadStage:b.DOWNLOAD_STAGE.NEED_POKE}),n.notifyMsgsAsync(),r.resolve();n.consolidate({downloadStage:b.DOWNLOAD_STAGE.RESOLVED})}));var R,L,U=y.default.get(P),F=new p.default;return(0,O.default)([F.signal,o].filter(Boolean),(function(e){if(U)R=r.resolve(U);else{var o;if(L=n.entries.getDownloadEntry())o=r.resolve(L);else{if(!a)return n.consolidate({downloadStage:b.DOWNLOAD_STAGE.NEED_POKE}),r.resolve();o=_.default.rmr({mediaObject:n,signal:e,rmrReason:s,rmrData:u}).then((function(){if(!(L=n.entries.getDownloadEntry()))throw new I;return L}))}n.consolidate({downloadStage:b.DOWNLOAD_STAGE.FETCHING}),R=(0,f.default)(o,"entryPromise").then((function(r){var a=(L=r).encFilehash;if(!a)throw L.markWhetherOnServer(!1),new k;var o=L,s=L,u=s.scansSidecar,c=s.scanLengths;return _.default.downloadAndDecrypt({directPath:o.directPath,encFilehash:a,filehash:P,mediaKey:o.mediaKey,mediaKeyTimestamp:o.mediaKeyTimestamp,signal:e,type:i,onDecryptStart:function(){n.consolidate({downloadStage:b.DOWNLOAD_STAGE.PROCESSING})},userDownloadAttemptCount:n.userDownloadAttemptCount,downloadOrigin:l,mode:w,progressiveJpegOpts:x({scanLengths:c,scansSidecar:u,mimetype:t,mediaObject:n})}).then((function(e){var n=t||(0,A.getMediaMimeType)(i,new Uint8Array(e)),r=new Blob([e],{type:n});return!(0,T.shouldUseMediaCache)(i)||i!==S.default.PTT&&i!==S.default.AUDIO?r:E.transcode(r)}))}))}var O=R.then((function(e){return"text/vcard"===e.type&&d&&(0,g.blobToText)(e).then((function(e){var t=(0,M.parseMultiVcard)(e);t.length>0?n.consolidate({parsedVcards:t}):(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("vcard_over_mms:Failed to parse vcard over mms contents"))})).catch((function(e){__LOG__(4,void 0,new Error,!0)`Failed to retrieve blob text contents ${String(e)}`,SEND_LOGS(`vcard_over_mms:blobToText failed with error: ${String(e)}`)})),e})).then((function(e){return(0,T.shouldUseMediaCache)(i)?(y.default.put(P,e),(0,T.gatherAndSetMetadataNoOpaque)(n,e)):C.default.createFromData(e,e.type).then((function(e){return(0,T.gatherAndSetMetadata)(n,e)}))})).then((function(){return n.consolidate({downloadStage:b.DOWNLOAD_STAGE.RESOLVED}),n.downloadPromise=null,n.resolveWhenConsolidated()})).catchType(v.MediaNotFoundError,(function(e){if(!L)throw e;if(L.markWhetherOnServer(!1),!a)throw e;return _.default.rmr({mediaObject:n,signal:(new p.default).signal,rmrReason:s,rmrData:u}).then((function(){return n.downloadPromise=null,N({mimetype:t,mediaObject:n,downloadEvenIfExpensive:!1,mediaType:i,rmrReason:s,rmrData:u,downloadOrigin:l,isVcardOverMmsDocument:d,mode:w})}))})).catchType(m.MediaUnsupportedError,(function(e){if(n.consolidate({downloadStage:b.DOWNLOAD_STAGE.ERROR_UNSUPPORTED}),__LOG__(3)`downloadMedia: media unsupported error: ${e.name}, ${e.message}, ${t||""}`,__LOG__(4,void 0,new Error,!0)`Assertion failed! ${e.message}`,SEND_LOGS("downloadMedia: media unsupported error:"),c)throw e})).catchType(v.MediaNotOnPhone,(function(e){if(n.consolidate({downloadStage:b.DOWNLOAD_STAGE.ERROR_MISSING}),c)throw e})).catchTypes(I,k,(function(e){if(n.consolidate({downloadStage:b.DOWNLOAD_STAGE.ERROR_MISSING}),__LOG__(3)`Unexpected download error: ${e.name}`,__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`unexpected download error: ${e.name}`),c)throw e})).catchType(v.MediaDecryptionError,(function(e){if(n.consolidate({downloadStage:b.DOWNLOAD_STAGE.ERROR_MISSING}),c)throw e})).catch((function(e){if(n.consolidate({downloadStage:b.DOWNLOAD_STAGE.NEED_POKE}),e instanceof m.MediaLoadError){if(__LOG__(3)`downloadMedia: media unsupported error: ${e.name}, ${e.message}, ${t||""}`,__LOG__(4,void 0,new Error,!0)`Assertion failed! ${e.message}`,SEND_LOGS("downloadMedia: media load error:"),c)throw e}else if(e instanceof m.TranscodeBlobTooLargeError){if(__LOG__(3)`downloadMedia: error: ${e.message}, ${t||""}`,__LOG__(4,void 0,new Error,!0)`Assertion failed! ${e.message}`,SEND_LOGS("downloadMedia: transcode blob too large"),c)throw e}else if(e instanceof m.UnableToPlayVideoError){if(__LOG__(3)`downloadMedia: error: ${e.message}, ${t||""}`,__LOG__(4,void 0,new Error,!0)`Assertion failed! ${e.message}`,SEND_LOGS("downloadMedia: unable to play video"),c)throw e}else if(e.name!==h.ABORT_ERROR){if(__LOG__(2)`downloadMedia: error`,c)throw e}else if(c)throw e})).finally((function(){n.downloadPromise=null}));return D.set(O,(function(){F.abort()})),n.downloadPromise=O,O}))}function L(){return(L=(0,s.default)(o.default.mark((function e(t){var n,r,a,i,s,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mimetype,n=t.mediaObject,r=t.mediaType,a=n.filehash){e.next=4;break}return e.abrupt("return");case 4:if(n.downloadStage===b.DOWNLOAD_STAGE.INIT){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,U(n);case 8:if(!e.sent){e.next=10;break}return e.abrupt("return");case 10:if(i=y.default.get(a),s=new p.default,!i){e.next=15;break}return n.downloadStage===b.DOWNLOAD_STAGE.INIT&&n.consolidate({downloadStage:b.DOWNLOAD_STAGE.EXISTS}),e.abrupt("return");case 15:if(u=n.entries.getDownloadEntry()){e.next=19;break}return n.downloadStage===b.DOWNLOAD_STAGE.INIT&&n.consolidate({downloadStage:b.DOWNLOAD_STAGE.NEED_POKE}),e.abrupt("return");case 19:if(l=u.encFilehash){e.next=24;break}return u.markWhetherOnServer(!1),n.downloadStage===b.DOWNLOAD_STAGE.INIT&&n.consolidate({downloadStage:b.DOWNLOAD_STAGE.NEED_POKE}),e.abrupt("return");case 24:return e.prev=24,e.next=27,_.default.checkExistence({directPath:u.directPath,encFilehash:l,signal:s.signal,type:r});case 27:n.downloadStage===b.DOWNLOAD_STAGE.INIT&&n.consolidate({downloadStage:b.DOWNLOAD_STAGE.EXISTS}),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(24),n.downloadStage===b.DOWNLOAD_STAGE.INIT&&n.consolidate({downloadStage:b.DOWNLOAD_STAGE.NEED_POKE}),__LOG__(2)`checkExistence: error`;case 34:case"end":return e.stop()}}),e,null,[[24,30]])})))).apply(this,arguments)}function x(e){var t=e.scanLengths,n=e.scansSidecar,r=e.mimetype,a=e.mediaObject;if(!function(e,t){return!!(e&&t&&e.length>=2&&10*e.length===t.byteLength)}(t,n))return null;var i=new w.default.WebcProgressiveImage({webcFirstRenderScans:0});return{mimetype:r,scansSidecar:(0,f.default)(n,"scansSidecar"),scanLengths:(0,f.default)(t,"scanLengths"),onProgressiveUpdate:function(e){a.downloadStage!==b.DOWNLOAD_STAGE.RESOLVED&&(a.consolidate({downloadStage:b.DOWNLOAD_STAGE.PROGRESSIVE_READY,progressiveStage:e}),i.webcFirstRenderScans||(i.webcFirstRenderScans=e,i.markWebcFirstRenderT()),e>=P&&!i.webcMidQualityT&&i.markWebcMidQualityT(),e!==R||i.webcFullQualityT||(i.markWebcFullQualityT(),i.commit()))}}}function U(){return F.apply(this,arguments)}function F(){return(F=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mediaBlob){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,t.mediaBlob.validate();case 4:if(!e.sent){e.next=8;break}return t.consolidate({downloadStage:b.DOWNLOAD_STAGE.RESOLVED}),e.abrupt("return",!0);case 8:return t.clearBlob(),t.consolidate({downloadStage:b.DOWNLOAD_STAGE.NEED_POKE}),t.notifyMsgsAsync(),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},65108:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cancelUploadMedia=function(e){var t=e.uploadPromise;if(null==t)return;var n=S.get(t);if(null==n)return;S.delete(t),n()},t.uploadMedia=function(e){var t=e.mimetype,n=e.mediaObject,a=e.mediaType,i=e.forwardedFromWeb,o=e.uploadOrigin,s=e.mediaKeyInfo;if(n.uploadPromise)return n.uploadPromise;var g=new l.default,y=g.signal,w=r.resolve().then((function(){n.consolidate({uploadStage:_.UPLOAD_STAGE.UPLOADING})})).then((function(){return T({mediaObject:n,mimetype:t,mediaType:a,abortSignal:y,uploadOrigin:o})})).then((function(e){var t=n.entries.getUploadEntry();t&&s&&(0,u.default)(t.mediaKey===s.key,"uploadEntry.mediaKey and mediaKeyInfo.mediaKey should be the same");var r=s?s.key:null==t?void 0:t.mediaKey,l=s?s.timestamp:null==t?void 0:t.mediaKeyTimestamp;return E.default.encryptAndUpload({blob:e,mediaKey:r,mediaKeyTimestamp:l,type:a,signal:y,userUploadAttemptCount:n.userUploadAttemptCount,forwardedFromWeb:i,uploadOrigin:o}).then((function(e){var t=e.directPath,r=e.encFilehash,i=e.mediaKey,o=e.mediaKeyTimestamp,s=e.url,u=e.sidecar,l=e.firstFrameSidecar,c=n.entries.addEntry({deprecatedMms3Url:s,mediaKey:i,mediaKeyTimestamp:o,encFilehash:r,type:a,sidecar:u,directPath:t,firstFrameSidecar:l,debugHint:"upload"});if(!c)throw new Error("could not create media entry");if((a===v.default.PTT||a===v.default.AUDIO)&&!m.canPlayOgg())if(m.shouldUseMediaCache(a)){var d=n.filehash;if(d&&n.mediaBlob)return h.transcode(n.mediaBlob.formData()).then((function(e){p.default.put(d,e)})).then((function(){return c}))}else if(n.mediaBlob)return m.gatherAndSetMetadata(n,n.mediaBlob).then((function(){return c}));return c}))})).then((function(e){if(y.aborted)throw new f.AbortError;return n.consolidate({uploadStage:_.UPLOAD_STAGE.UPLOADED}),__LOG__(2)`MediaAlgo.uploadMedia: success`,{kind:b.SUCCESS,mediaEntry:e}})).catch((function(e){throw e.name===c.ABORT_ERROR?__LOG__(2)`MediaAlgo.uploadMedia: canceled`:__LOG__(3)`MediaAlgo.uploadMedia: error`,e})).finally((function(){delete n.uploadPromise})).catchType(d.MediaNotOnPhone,(function(){return n.consolidate({uploadStage:_.UPLOAD_STAGE.ERROR_MISSING}),{kind:b.ERROR}})).catchType(f.MediaTooLargeError,(function(){return n.consolidate({uploadStage:_.UPLOAD_STAGE.ERROR_TOO_LARGE}),{kind:b.ERROR}})).catch((function(e){return n.consolidate({uploadStage:_.UPLOAD_STAGE.NEED_UPLOAD}),e.name===c.ABORT_ERROR?{kind:b.CANCELLATION}:{kind:b.ERROR}}));return S.set(w,(function(){g.abort()})),n.uploadPromise=w,w},t.getOrDownloadBlob=T,t.getBlobFromMediaObject=A,t.UploadMediaResultKind=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(41143)),l=i(n(35340)),c=n(2277),d=n(81214),f=n(25704),p=i(n(76486)),h=a(n(60996)),_=n(87261),v=i(n(16024)),m=a(n(81365)),g=i(n(8643)),y=n(83653),E=i(n(51985)),S=new WeakMap;var b={SUCCESS:"success",CANCELLATION:"cancellation",ERROR:"error",TIMEOUT:"timeout"};function T(){return w.apply(this,arguments)}function w(){return(w=(0,s.default)(o.default.mark((function e(t){var n,r,a,i,s,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.mediaObject,r=t.mimetype,a=t.mediaType,i=t.abortSignal,s=t.uploadOrigin,!(u=A(n))){e.next=4;break}return e.abrupt("return",u);case 4:return e.next=6,(0,y.downloadMedia)({mimetype:r,mediaObject:n,downloadEvenIfExpensive:!0,mediaType:a,signal:i,rmrReason:g.default.WEBC_RMR_REASON_CODE.UPLOAD,downloadOrigin:s===g.default.UPLOAD_ORIGIN_TYPE.CHAT_PERSONAL?g.default.DOWNLOAD_ORIGIN_TYPE.CHAT_PERSONAL:g.default.DOWNLOAD_ORIGIN_TYPE.CHAT_GROUP,mode:"manual"});case 6:if(n.downloadStage!==_.DOWNLOAD_STAGE.ERROR_MISSING){e.next=8;break}throw new d.MediaNotOnPhone;case 8:if(!(l=A(n))){e.next=11;break}return e.abrupt("return",l);case 11:throw new Error("cant upload media w/out mediaBlob after download");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t=e.mediaBlob;return t?t.formData():e.filehash?p.default.get(e.filehash):void 0}t.UploadMediaResultKind=b},92458:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=r.resolve().then((function(){var n,a,i=e.size(),f=t.asDocument?s.FILETYPE.DOCUMENT:(0,s.typeFromMimetype)(e.type()),p=null!==(n=t.isVcardOverMmsDocument)&&void 0!==n&&n;if(i>function(e,t){if(e===s.FILETYPE.DOCUMENT)return t?1024*d.default.vcardMaxSizeKb:d.default.maxFileSize;return d.default.media}(f,p))return r.reject(new u.default(e));if(i<=0)return r.reject(new o.MediaFileEmpty);switch(null!=t.gifAttribution?a=t.gifAttribution:t.asGif&&(a=0),f){case"image":return c.processRawImage(e).then((function(e){var t=e.blob,n=e.width,r=e.height,a=e.preview;return{type:l.OUTWARD_TYPES.IMAGE,mediaBlob:t,mimetype:"image/jpeg",fullWidth:n,fullHeight:r,preview:a}}));case"video":case"audio":return c.processRawAudioVideo(e,!!t.isPtt,t.precomputedFields,t.asGif,a,e.type());case"document":return c.processRawDocument(e,t.filename,p,t.documentPageCount);default:throw new Error("Received unsupported mediaType: "+f)}}));return e.retain(),e.autoreleaseWhenPromiseCompletes(n),n};var o=i(n(98569)),s=n(19059),u=a(n(1447)),l=n(87261),c=i(n(81365)),d=a(n(63056))},58688:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RequestMediaReuploadManager=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(91080)),l=a(n(84332)),c=function e(){var t=this;(0,s.default)(this,e),this._rmrRequests=new Map,this.requestMediaReupload=function(){var e=(0,o.default)(i.default.mark((function e(n){var a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.id.id,!(o=t._rmrRequests.get(a))){e.next=4;break}return e.abrupt("return",(0,u.default)(o.request,"existingRequest.request"));case 4:return s=new r((function(e,r){t._rmrRequests.set(a,{resolve:e,reject:r,msg:n})})),(0,u.default)(t._rmrRequests.get(a),"_this._rmrRequests.get(msgId)").request=s,e.next=8,(0,l.default)(n);case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.resolveMediaReupload=function(e){var n=e.msgId,r=e.result,a=e.directPath,i=t._rmrRequests.get(n);null!=i?(i.resolve({result:r,directPath:a}),t._rmrRequests.delete(n)):__LOG__(3)`resolveMediaReupload: msgId (${n}) is not found in _rmrRequests`},this.getMediaKey=function(e){var n;return null===(n=t._rmrRequests.get(e))||void 0===n?void 0:n.msg.mediaKey}};t.RequestMediaReuploadManager=c;var d=new c;t.default=d},27410:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return p.apply(this,arguments)};var a=r(n(87757)),i=r(n(81109)),o=r(n(48926)),s=n(65279),u=n(2277),l=r(n(56789)),c=(r(n(8643)),n(65108)),d=r(n(69673)),f=n(53395);function p(){return(p=(0,o.default)(a.default.mark((function e(t){var n,r,p,h,_,v,m,g,y,E;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E=function(){return(E=(0,o.default)(a.default.mark((function e(){var t,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.default)((0,f.getHash)(n),m);case 3:return t=e.sent,g.filehash=t,g.mediaBlob=n,e.next=8,(0,d.default)((0,c.uploadMedia)({mimetype:"image/jpeg",mediaObject:g,mediaType:r,forwardedFromWeb:_,uploadOrigin:h,mediaKeyInfo:p}),m);case 8:return o=e.sent,e.abrupt("return",o.kind===c.UploadMediaResultKind.SUCCESS?(0,i.default)((0,i.default)({},o),{},{filehash:t}):{kind:o.kind});case 12:if(e.prev=12,e.t0=e.catch(0),e.t0.name!==u.ABORT_ERROR){e.next=17;break}return(0,c.cancelUploadMedia)(g),e.abrupt("return",{kind:c.UploadMediaResultKind.CANCELLATION});case 17:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)},y=function(){return E.apply(this,arguments)},n=t.thumbnail,r=t.mediaType,p=t.mediaKeyInfo,h=t.uploadOrigin,_=t.forwardedFromWeb,v=t.timeout,m=t.signal,g=new l.default,e.prev=4,null!=v){e.next=11;break}return e.next=8,y();case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,(0,s.promiseTimeout)(y(),v);case 13:e.t0=e.sent;case 14:return e.abrupt("return",e.t0);case 17:if(e.prev=17,e.t1=e.catch(4),!(e.t1 instanceof s.TimeoutError)){e.next=22;break}return(0,c.cancelUploadMedia)(g),e.abrupt("return",{kind:c.UploadMediaResultKind.TIMEOUT});case 22:throw e.t1;case 23:case"end":return e.stop()}}),e,null,[[4,17]])})))).apply(this,arguments)}},14256:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.globalUnixTime()-e<i.default.mmsMediaKeyTTL+Math.floor(86400*Math.random())};var a=r(n(79140)),i=r(n(63056))},91157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADVSignedDeviceIdentityHMACSpec=t.ADVSignedDeviceIdentitySpec=t.ADVDeviceIdentitySpec=t.ADVSignedKeyIndexListSpec=t.ADVKeyIndexListSpec=void 0;var r=n(22236),a={};t.ADVKeyIndexListSpec=a;var i={};t.ADVSignedKeyIndexListSpec=i;var o={};t.ADVDeviceIdentitySpec=o;var s={};t.ADVSignedDeviceIdentitySpec=s;var u={};t.ADVSignedDeviceIdentityHMACSpec=u,a.internalSpec={rawId:[1,r.TYPES.UINT32],timestamp:[2,r.TYPES.UINT64],currentIndex:[3,r.TYPES.UINT32],validIndexes:[4,r.FLAGS.REPEATED|r.FLAGS.PACKED|r.TYPES.UINT32]},i.internalSpec={details:[1,r.TYPES.BYTES],accountSignature:[2,r.TYPES.BYTES]},o.internalSpec={rawId:[1,r.TYPES.UINT32],timestamp:[2,r.TYPES.UINT64],keyIndex:[3,r.TYPES.UINT32]},s.internalSpec={details:[1,r.TYPES.BYTES],accountSignatureKey:[2,r.TYPES.BYTES],accountSignature:[3,r.TYPES.BYTES],deviceSignature:[4,r.TYPES.BYTES]},u.internalSpec={details:[1,r.TYPES.BYTES],hmac:[2,r.TYPES.BYTES]}},19530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppVersionSpec=t.CompanionPropsSpec=t.CompanionPropsPlatformType=void 0;var r=n(22236),a=n(54302)({UNKNOWN:0,CHROME:1,FIREFOX:2,IE:3,OPERA:4,SAFARI:5,EDGE:6,DESKTOP:7,IPAD:8,ANDROID_TABLET:9,OHANA:10,ALOHA:11,CATALINA:12});t.CompanionPropsPlatformType=a;var i={};t.CompanionPropsSpec=i;var o={};t.AppVersionSpec=o,i.internalSpec={os:[1,r.TYPES.STRING],version:[2,r.TYPES.MESSAGE,o],platformType:[3,r.TYPES.ENUM,a],requireFullSync:[4,r.TYPES.BOOL]},o.internalSpec={primary:[1,r.TYPES.UINT32],secondary:[2,r.TYPES.UINT32],tertiary:[3,r.TYPES.UINT32],quaternary:[4,r.TYPES.UINT32],quinary:[5,r.TYPES.UINT32]}},676:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuickReplyButtonSpec=t.URLButtonSpec=t.CallButtonSpec=t.TemplateButtonSpec=t.LocationSpec=t.PointSpec=t.InteractiveAnnotationSpec=t.DeviceListMetadataSpec=t.MessageContextInfoSpec=t.AdReplyInfoSpec=t.ExternalAdReplyInfoSpec=t.ContextInfoSpec=t.SenderKeyDistributionMessageSpec=t.ImageMessageSpec=t.InvoiceMessageSpec=t.ContactMessageSpec=t.LocationMessageSpec=t.ExtendedTextMessageSpec=t.DocumentMessageSpec=t.AudioMessageSpec=t.VideoMessageSpec=t.CallSpec=t.ChatSpec=t.ProtocolMessageSpec=t.HistorySyncNotificationSpec=t.AppStateSyncKeySpec=t.AppStateSyncKeyIdSpec=t.AppStateSyncKeyFingerprintSpec=t.AppStateSyncKeyDataSpec=t.AppStateSyncKeyShareSpec=t.AppStateSyncKeyRequestSpec=t.AppStateFatalExceptionNotificationSpec=t.InitialSecurityNotificationSettingSyncSpec=t.ContactsArrayMessageSpec=t.HSMCurrencySpec=t.HSMDateTimeComponentSpec=t.HSMDateTimeUnixEpochSpec=t.HSMDateTimeSpec=t.HSMLocalizableParameterSpec=t.HighlyStructuredMessageSpec=t.SendPaymentMessageSpec=t.RequestPaymentMessageSpec=t.DeclinePaymentRequestMessageSpec=t.CancelPaymentRequestMessageSpec=t.PaymentInviteMessageSpec=t.LiveLocationMessageSpec=t.StickerMessageSpec=t.FourRowTemplateSpec=t.HydratedFourRowTemplateSpec=t.TemplateMessageSpec=t.TemplateButtonReplyMessageSpec=t.CatalogSnapshotSpec=t.ProductSnapshotSpec=t.ProductMessageSpec=t.OrderMessageSpec=t.RowSpec=t.SectionSpec=t.ProductSpec=t.ProductSectionSpec=t.ProductListHeaderImageSpec=t.ProductListInfoSpec=t.ListMessageSpec=t.SingleSelectReplySpec=t.ListResponseMessageSpec=t.HeaderSpec=t.BodySpec=t.FooterSpec=t.ShopsMessageSpec=t.CollectionMessageSpec=t.InteractiveMessageSpec=t.GroupInviteMessageSpec=t.DeviceSentMessageSpec=t.FutureProofMessageSpec=t.ButtonTextSpec=t.NativeFlowInfoSpec=t.ButtonSpec=t.ButtonsMessageSpec=t.ButtonsResponseMessageSpec=t.MessageSpec=t.DisappearingModeInitiator=t.AdReplyInfoMediaType=t.ExternalAdReplyInfoMediaType=t.InvoiceMessageAttachmentType=t.ExtendedTextMessageFontType=t.ExtendedTextMessagePreviewType=t.VideoMessageAttribution=t.ProtocolMessageType=t.HistorySyncNotificationHistorySyncType=t.HSMDateTimeComponentDayOfWeekType=t.HSMDateTimeComponentCalendarType=t.PaymentInviteMessageServiceType=t.OrderMessageOrderStatus=t.OrderMessageOrderSurface=t.ListMessageListType=t.ListResponseMessageListType=t.ShopsMessageType=t.ShopsMessageSurface=t.ButtonsMessageHeaderType=t.ButtonType=t.ButtonsResponseMessageType=void 0,t.ActionLinkSpec=t.DisappearingModeSpec=t.PaymentBackgroundSpec=t.MoneySpec=t.HydratedQuickReplyButtonSpec=t.HydratedURLButtonSpec=t.HydratedCallButtonSpec=t.HydratedTemplateButtonSpec=void 0;var r=n(25737),a=n(22236),i=n(54302)({UNKNOWN:0,DISPLAY_TEXT:1});t.ButtonsResponseMessageType=i;var o=n(54302)({UNKNOWN:0,RESPONSE:1,NATIVE_FLOW:2});t.ButtonType=o;var s=n(54302)({UNKNOWN:0,EMPTY:1,TEXT:2,DOCUMENT:3,IMAGE:4,VIDEO:5,LOCATION:6});t.ButtonsMessageHeaderType=s;var u=n(54302)({UNKNOWN_SURFACE:0,FB:1,IG:2,WA:3});t.ShopsMessageSurface=u;var l=n(54302)({UNKNOWN_TYPE:0,PRODUCT:1,STOREFRONT:2,COLLECTION:3});t.ShopsMessageType=l;var c=n(54302)({UNKNOWN:0,SINGLE_SELECT:1});t.ListResponseMessageListType=c;var d=n(54302)({UNKNOWN:0,SINGLE_SELECT:1,PRODUCT_LIST:2});t.ListMessageListType=d;var f=n(54302)({CATALOG:1});t.OrderMessageOrderSurface=f;var p=n(54302)({INQUIRY:1});t.OrderMessageOrderStatus=p;var h=n(54302)({UNKNOWN:0,FBPAY:1,NOVI:2,UPI:3});t.PaymentInviteMessageServiceType=h;var _=n(54302)({GREGORIAN:1,SOLAR_HIJRI:2});t.HSMDateTimeComponentCalendarType=_;var v=n(54302)({MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,SUNDAY:7});t.HSMDateTimeComponentDayOfWeekType=v;var m=n(54302)({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4});t.HistorySyncNotificationHistorySyncType=m;var g=n(54302)({REVOKE:0,EPHEMERAL_SETTING:3,EPHEMERAL_SYNC_RESPONSE:4,HISTORY_SYNC_NOTIFICATION:5,APP_STATE_SYNC_KEY_SHARE:6,APP_STATE_SYNC_KEY_REQUEST:7,MSG_FANOUT_BACKFILL_REQUEST:8,INITIAL_SECURITY_NOTIFICATION_SETTING_SYNC:9,APP_STATE_FATAL_EXCEPTION_NOTIFICATION:10});t.ProtocolMessageType=g;var y=n(54302)({NONE:0,GIPHY:1,TENOR:2});t.VideoMessageAttribution=y;var E=n(54302)({NONE:0,VIDEO:1});t.ExtendedTextMessagePreviewType=E;var S=n(54302)({SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5});t.ExtendedTextMessageFontType=S;var b=n(54302)({IMAGE:0,PDF:1});t.InvoiceMessageAttachmentType=b;var T=n(54302)({NONE:0,IMAGE:1,VIDEO:2});t.ExternalAdReplyInfoMediaType=T;var w=n(54302)({NONE:0,IMAGE:1,VIDEO:2});t.AdReplyInfoMediaType=w;var A=n(54302)({CHANGED_IN_CHAT:0,INITIATED_BY_ME:1,INITIATED_BY_OTHER:2});t.DisappearingModeInitiator=A;var C={};t.MessageSpec=C;var O={};t.ButtonsResponseMessageSpec=O;var M={};t.ButtonsMessageSpec=M;var I={};t.ButtonSpec=I;var k={};t.NativeFlowInfoSpec=k;var P={};t.ButtonTextSpec=P;var R={};t.FutureProofMessageSpec=R;var D={};t.DeviceSentMessageSpec=D;var N={};t.GroupInviteMessageSpec=N;var L={};t.InteractiveMessageSpec=L;var x={};t.CollectionMessageSpec=x;var U={};t.ShopsMessageSpec=U;var F={};t.FooterSpec=F;var G={};t.BodySpec=G;var B={};t.HeaderSpec=B;var j={};t.ListResponseMessageSpec=j;var Y={};t.SingleSelectReplySpec=Y;var K={};t.ListMessageSpec=K;var W={};t.ProductListInfoSpec=W;var V={};t.ProductListHeaderImageSpec=V;var H={};t.ProductSectionSpec=H;var $={};t.ProductSpec=$;var z={};t.SectionSpec=z;var q={};t.RowSpec=q;var J={};t.OrderMessageSpec=J;var Q={};t.ProductMessageSpec=Q;var X={};t.ProductSnapshotSpec=X;var Z={};t.CatalogSnapshotSpec=Z;var ee={};t.TemplateButtonReplyMessageSpec=ee;var te={};t.TemplateMessageSpec=te;var ne={};t.HydratedFourRowTemplateSpec=ne;var re={};t.FourRowTemplateSpec=re;var ae={};t.StickerMessageSpec=ae;var ie={};t.LiveLocationMessageSpec=ie;var oe={};t.PaymentInviteMessageSpec=oe;var se={};t.CancelPaymentRequestMessageSpec=se;var ue={};t.DeclinePaymentRequestMessageSpec=ue;var le={};t.RequestPaymentMessageSpec=le;var ce={};t.SendPaymentMessageSpec=ce;var de={};t.HighlyStructuredMessageSpec=de;var fe={};t.HSMLocalizableParameterSpec=fe;var pe={};t.HSMDateTimeSpec=pe;var he={};t.HSMDateTimeUnixEpochSpec=he;var _e={};t.HSMDateTimeComponentSpec=_e;var ve={};t.HSMCurrencySpec=ve;var me={};t.ContactsArrayMessageSpec=me;var ge={};t.InitialSecurityNotificationSettingSyncSpec=ge;var ye={};t.AppStateFatalExceptionNotificationSpec=ye;var Ee={};t.AppStateSyncKeyRequestSpec=Ee;var Se={};t.AppStateSyncKeyShareSpec=Se;var be={};t.AppStateSyncKeyDataSpec=be;var Te={};t.AppStateSyncKeyFingerprintSpec=Te;var we={};t.AppStateSyncKeyIdSpec=we;var Ae={};t.AppStateSyncKeySpec=Ae;var Ce={};t.HistorySyncNotificationSpec=Ce;var Oe={};t.ProtocolMessageSpec=Oe;var Me={};t.ChatSpec=Me;var Ie={};t.CallSpec=Ie;var ke={};t.VideoMessageSpec=ke;var Pe={};t.AudioMessageSpec=Pe;var Re={};t.DocumentMessageSpec=Re;var De={};t.ExtendedTextMessageSpec=De;var Ne={};t.LocationMessageSpec=Ne;var Le={};t.ContactMessageSpec=Le;var xe={};t.InvoiceMessageSpec=xe;var Ue={};t.ImageMessageSpec=Ue;var Fe={};t.SenderKeyDistributionMessageSpec=Fe;var Ge={};t.ContextInfoSpec=Ge;var Be={};t.ExternalAdReplyInfoSpec=Be;var je={};t.AdReplyInfoSpec=je;var Ye={};t.MessageContextInfoSpec=Ye;var Ke={};t.DeviceListMetadataSpec=Ke;var We={};t.InteractiveAnnotationSpec=We;var Ve={};t.PointSpec=Ve;var He={};t.LocationSpec=He;var $e={};t.TemplateButtonSpec=$e;var ze={};t.CallButtonSpec=ze;var qe={};t.URLButtonSpec=qe;var Je={};t.QuickReplyButtonSpec=Je;var Qe={};t.HydratedTemplateButtonSpec=Qe;var Xe={};t.HydratedCallButtonSpec=Xe;var Ze={};t.HydratedURLButtonSpec=Ze;var et={};t.HydratedQuickReplyButtonSpec=et;var tt={};t.MoneySpec=tt;var nt={};t.PaymentBackgroundSpec=nt;var rt={};t.DisappearingModeSpec=rt;var at={};t.ActionLinkSpec=at,C.internalSpec={conversation:[1,a.TYPES.STRING],senderKeyDistributionMessage:[2,a.TYPES.MESSAGE,Fe],imageMessage:[3,a.TYPES.MESSAGE,Ue],contactMessage:[4,a.TYPES.MESSAGE,Le],locationMessage:[5,a.TYPES.MESSAGE,Ne],extendedTextMessage:[6,a.TYPES.MESSAGE,De],documentMessage:[7,a.TYPES.MESSAGE,Re],audioMessage:[8,a.TYPES.MESSAGE,Pe],videoMessage:[9,a.TYPES.MESSAGE,ke],call:[10,a.TYPES.MESSAGE,Ie],chat:[11,a.TYPES.MESSAGE,Me],protocolMessage:[12,a.TYPES.MESSAGE,Oe],contactsArrayMessage:[13,a.TYPES.MESSAGE,me],highlyStructuredMessage:[14,a.TYPES.MESSAGE,de],fastRatchetKeySenderKeyDistributionMessage:[15,a.TYPES.MESSAGE,Fe],sendPaymentMessage:[16,a.TYPES.MESSAGE,ce],liveLocationMessage:[18,a.TYPES.MESSAGE,ie],requestPaymentMessage:[22,a.TYPES.MESSAGE,le],declinePaymentRequestMessage:[23,a.TYPES.MESSAGE,ue],cancelPaymentRequestMessage:[24,a.TYPES.MESSAGE,se],templateMessage:[25,a.TYPES.MESSAGE,te],stickerMessage:[26,a.TYPES.MESSAGE,ae],groupInviteMessage:[28,a.TYPES.MESSAGE,N],templateButtonReplyMessage:[29,a.TYPES.MESSAGE,ee],productMessage:[30,a.TYPES.MESSAGE,Q],deviceSentMessage:[31,a.TYPES.MESSAGE,D],messageContextInfo:[35,a.TYPES.MESSAGE,Ye],listMessage:[36,a.TYPES.MESSAGE,K],viewOnceMessage:[37,a.TYPES.MESSAGE,R],orderMessage:[38,a.TYPES.MESSAGE,J],listResponseMessage:[39,a.TYPES.MESSAGE,j],ephemeralMessage:[40,a.TYPES.MESSAGE,R],invoiceMessage:[41,a.TYPES.MESSAGE,xe],buttonsMessage:[42,a.TYPES.MESSAGE,M],buttonsResponseMessage:[43,a.TYPES.MESSAGE,O],paymentInviteMessage:[44,a.TYPES.MESSAGE,oe],interactiveMessage:[45,a.TYPES.MESSAGE,L]},O.internalSpec={selectedButtonId:[1,a.TYPES.STRING],selectedDisplayText:[2,a.TYPES.STRING],contextInfo:[3,a.TYPES.MESSAGE,Ge],type:[4,a.TYPES.ENUM,i],__oneofs__:{response:["selectedDisplayText"]}},M.internalSpec={text:[1,a.TYPES.STRING],documentMessage:[2,a.TYPES.MESSAGE,Re],imageMessage:[3,a.TYPES.MESSAGE,Ue],videoMessage:[4,a.TYPES.MESSAGE,ke],locationMessage:[5,a.TYPES.MESSAGE,Ne],contentText:[6,a.TYPES.STRING],footerText:[7,a.TYPES.STRING],contextInfo:[8,a.TYPES.MESSAGE,Ge],buttons:[9,a.FLAGS.REPEATED|a.TYPES.MESSAGE,I],headerType:[10,a.TYPES.ENUM,s],__oneofs__:{header:["text","documentMessage","imageMessage","videoMessage","locationMessage"]}},I.internalSpec={buttonId:[1,a.TYPES.STRING],buttonText:[2,a.TYPES.MESSAGE,P],type:[3,a.TYPES.ENUM,o],nativeFlowInfo:[4,a.TYPES.MESSAGE,k]},k.internalSpec={name:[1,a.TYPES.STRING],paramsJson:[2,a.TYPES.STRING]},P.internalSpec={displayText:[1,a.TYPES.STRING]},R.internalSpec={message:[1,a.TYPES.MESSAGE,C]},D.internalSpec={destinationJid:[1,a.TYPES.STRING],message:[2,a.TYPES.MESSAGE,C],phash:[3,a.TYPES.STRING]},N.internalSpec={groupJid:[1,a.TYPES.STRING],inviteCode:[2,a.TYPES.STRING],inviteExpiration:[3,a.TYPES.INT64],groupName:[4,a.TYPES.STRING],jpegThumbnail:[5,a.TYPES.BYTES],caption:[6,a.TYPES.STRING],contextInfo:[7,a.TYPES.MESSAGE,Ge]},L.internalSpec={header:[1,a.TYPES.MESSAGE,B],body:[2,a.TYPES.MESSAGE,G],footer:[3,a.TYPES.MESSAGE,F],shopsMessage:[4,a.TYPES.MESSAGE,U],collectionMessage:[5,a.TYPES.MESSAGE,x],contextInfo:[15,a.TYPES.MESSAGE,Ge],__oneofs__:{interactiveMessage:["shopsMessage","collectionMessage"]}},x.internalDefaults={messageVersion:1},x.internalSpec={bizJid:[1,a.TYPES.STRING],id:[2,a.TYPES.STRING],messageVersion:[3,a.TYPES.INT32]},U.internalDefaults={messageVersion:1},U.internalSpec={id:[1,a.TYPES.STRING],surface:[2,a.TYPES.ENUM,u],type:[3,a.TYPES.ENUM,l],messageVersion:[4,a.TYPES.INT32]},F.internalSpec={text:[1,a.TYPES.STRING]},G.internalSpec={text:[1,a.TYPES.STRING]},B.internalSpec={title:[1,a.TYPES.STRING],subtitle:[2,a.TYPES.STRING],documentMessage:[3,a.TYPES.MESSAGE,Re],imageMessage:[4,a.TYPES.MESSAGE,Ue],__oneofs__:{media:["documentMessage","imageMessage"]}},j.internalSpec={title:[1,a.TYPES.STRING],listType:[2,a.TYPES.ENUM,c],singleSelectReply:[3,a.TYPES.MESSAGE,Y],contextInfo:[4,a.TYPES.MESSAGE,Ge],description:[5,a.TYPES.STRING]},Y.internalSpec={selectedRowId:[1,a.TYPES.STRING]},K.internalSpec={title:[1,a.TYPES.STRING],description:[2,a.TYPES.STRING],buttonText:[3,a.TYPES.STRING],listType:[4,a.TYPES.ENUM,d],sections:[5,a.FLAGS.REPEATED|a.TYPES.MESSAGE,z],productListInfo:[6,a.TYPES.MESSAGE,W],footerText:[7,a.TYPES.STRING],contextInfo:[8,a.TYPES.MESSAGE,Ge]},W.internalSpec={productSections:[1,a.FLAGS.REPEATED|a.TYPES.MESSAGE,H],headerImage:[2,a.TYPES.MESSAGE,V],businessOwnerJid:[3,a.TYPES.STRING]},V.internalSpec={productId:[1,a.TYPES.STRING],jpegThumbnail:[2,a.TYPES.BYTES]},H.internalSpec={title:[1,a.TYPES.STRING],products:[2,a.FLAGS.REPEATED|a.TYPES.MESSAGE,$]},$.internalSpec={productId:[1,a.TYPES.STRING]},z.internalSpec={title:[1,a.TYPES.STRING],rows:[2,a.FLAGS.REPEATED|a.TYPES.MESSAGE,q]},q.internalSpec={title:[1,a.TYPES.STRING],description:[2,a.TYPES.STRING],rowId:[3,a.TYPES.STRING]},J.internalSpec={orderId:[1,a.TYPES.STRING],thumbnail:[2,a.TYPES.BYTES],itemCount:[3,a.TYPES.INT32],status:[4,a.TYPES.ENUM,p],surface:[5,a.TYPES.ENUM,f],message:[6,a.TYPES.STRING],orderTitle:[7,a.TYPES.STRING],sellerJid:[8,a.TYPES.STRING],token:[9,a.TYPES.STRING],totalAmount1000:[10,a.TYPES.INT64],totalCurrencyCode:[11,a.TYPES.STRING],contextInfo:[17,a.TYPES.MESSAGE,Ge]},Q.internalSpec={product:[1,a.TYPES.MESSAGE,X],businessOwnerJid:[2,a.TYPES.STRING],catalog:[4,a.TYPES.MESSAGE,Z],contextInfo:[17,a.TYPES.MESSAGE,Ge]},X.internalSpec={productImage:[1,a.TYPES.MESSAGE,Ue],productId:[2,a.TYPES.STRING],title:[3,a.TYPES.STRING],description:[4,a.TYPES.STRING],currencyCode:[5,a.TYPES.STRING],priceAmount1000:[6,a.TYPES.INT64],retailerId:[7,a.TYPES.STRING],url:[8,a.TYPES.STRING],productImageCount:[9,a.TYPES.UINT32],firstImageId:[11,a.TYPES.STRING],salePriceAmount1000:[12,a.TYPES.INT64]},Z.internalSpec={catalogImage:[1,a.TYPES.MESSAGE,Ue],title:[2,a.TYPES.STRING],description:[3,a.TYPES.STRING]},ee.internalSpec={selectedId:[1,a.TYPES.STRING],selectedDisplayText:[2,a.TYPES.STRING],contextInfo:[3,a.TYPES.MESSAGE,Ge],selectedIndex:[4,a.TYPES.UINT32]},te.internalSpec={fourRowTemplate:[1,a.TYPES.MESSAGE,re],hydratedFourRowTemplate:[2,a.TYPES.MESSAGE,ne],contextInfo:[3,a.TYPES.MESSAGE,Ge],hydratedTemplate:[4,a.TYPES.MESSAGE,ne],__oneofs__:{format:["fourRowTemplate","hydratedFourRowTemplate"]}},ne.internalSpec={documentMessage:[1,a.TYPES.MESSAGE,Re],hydratedTitleText:[2,a.TYPES.STRING],imageMessage:[3,a.TYPES.MESSAGE,Ue],videoMessage:[4,a.TYPES.MESSAGE,ke],locationMessage:[5,a.TYPES.MESSAGE,Ne],hydratedContentText:[6,a.TYPES.STRING],hydratedFooterText:[7,a.TYPES.STRING],hydratedButtons:[8,a.FLAGS.REPEATED|a.TYPES.MESSAGE,Qe],templateId:[9,a.TYPES.STRING],__oneofs__:{title:["documentMessage","hydratedTitleText","imageMessage","videoMessage","locationMessage"]}},re.internalSpec={documentMessage:[1,a.TYPES.MESSAGE,Re],highlyStructuredMessage:[2,a.TYPES.MESSAGE,de],imageMessage:[3,a.TYPES.MESSAGE,Ue],videoMessage:[4,a.TYPES.MESSAGE,ke],locationMessage:[5,a.TYPES.MESSAGE,Ne],content:[6,a.TYPES.MESSAGE,de],footer:[7,a.TYPES.MESSAGE,de],buttons:[8,a.FLAGS.REPEATED|a.TYPES.MESSAGE,$e],__oneofs__:{title:["documentMessage","highlyStructuredMessage","imageMessage","videoMessage","locationMessage"]}},ae.internalSpec={url:[1,a.TYPES.STRING],fileSha256:[2,a.TYPES.BYTES],fileEncSha256:[3,a.TYPES.BYTES],mediaKey:[4,a.TYPES.BYTES],mimetype:[5,a.TYPES.STRING],height:[6,a.TYPES.UINT32],width:[7,a.TYPES.UINT32],directPath:[8,a.TYPES.STRING],fileLength:[9,a.TYPES.UINT64],mediaKeyTimestamp:[10,a.TYPES.INT64],firstFrameLength:[11,a.TYPES.UINT32],firstFrameSidecar:[12,a.TYPES.BYTES],isAnimated:[13,a.TYPES.BOOL],pngThumbnail:[16,a.TYPES.BYTES],contextInfo:[17,a.TYPES.MESSAGE,Ge]},ie.internalSpec={degreesLatitude:[1,a.TYPES.DOUBLE],degreesLongitude:[2,a.TYPES.DOUBLE],accuracyInMeters:[3,a.TYPES.UINT32],speedInMps:[4,a.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[5,a.TYPES.UINT32],caption:[6,a.TYPES.STRING],sequenceNumber:[7,a.TYPES.INT64],timeOffset:[8,a.TYPES.UINT32],jpegThumbnail:[16,a.TYPES.BYTES],contextInfo:[17,a.TYPES.MESSAGE,Ge]},oe.internalSpec={serviceType:[1,a.TYPES.ENUM,h],expiryTimestamp:[2,a.TYPES.INT64]},se.internalSpec={key:[1,a.TYPES.MESSAGE,r.MessageKeySpec]},ue.internalSpec={key:[1,a.TYPES.MESSAGE,r.MessageKeySpec]},le.internalSpec={noteMessage:[4,a.TYPES.MESSAGE,C],currencyCodeIso4217:[1,a.TYPES.STRING],amount1000:[2,a.TYPES.UINT64],requestFrom:[3,a.TYPES.STRING],expiryTimestamp:[5,a.TYPES.INT64],amount:[6,a.TYPES.MESSAGE,tt],background:[7,a.TYPES.MESSAGE,nt]},ce.internalSpec={noteMessage:[2,a.TYPES.MESSAGE,C],requestMessageKey:[3,a.TYPES.MESSAGE,r.MessageKeySpec],background:[4,a.TYPES.MESSAGE,nt]},de.internalSpec={namespace:[1,a.TYPES.STRING],elementName:[2,a.TYPES.STRING],params:[3,a.FLAGS.REPEATED|a.TYPES.STRING],fallbackLg:[4,a.TYPES.STRING],fallbackLc:[5,a.TYPES.STRING],localizableParams:[6,a.FLAGS.REPEATED|a.TYPES.MESSAGE,fe],deterministicLg:[7,a.TYPES.STRING],deterministicLc:[8,a.TYPES.STRING],hydratedHsm:[9,a.TYPES.MESSAGE,te]},fe.internalSpec={default:[1,a.TYPES.STRING],currency:[2,a.TYPES.MESSAGE,ve],dateTime:[3,a.TYPES.MESSAGE,pe],__oneofs__:{paramOneof:["currency","dateTime"]}},pe.internalSpec={component:[1,a.TYPES.MESSAGE,_e],unixEpoch:[2,a.TYPES.MESSAGE,he],__oneofs__:{datetimeOneof:["component","unixEpoch"]}},he.internalSpec={timestamp:[1,a.TYPES.INT64]},_e.internalSpec={dayOfWeek:[1,a.TYPES.ENUM,v],year:[2,a.TYPES.UINT32],month:[3,a.TYPES.UINT32],dayOfMonth:[4,a.TYPES.UINT32],hour:[5,a.TYPES.UINT32],minute:[6,a.TYPES.UINT32],calendar:[7,a.TYPES.ENUM,_]},ve.internalSpec={currencyCode:[1,a.TYPES.STRING],amount1000:[2,a.TYPES.INT64]},me.internalSpec={displayName:[1,a.TYPES.STRING],contacts:[2,a.FLAGS.REPEATED|a.TYPES.MESSAGE,Le],contextInfo:[17,a.TYPES.MESSAGE,Ge]},ge.internalSpec={securityNotificationEnabled:[1,a.TYPES.BOOL]},ye.internalSpec={collectionNames:[1,a.FLAGS.REPEATED|a.TYPES.STRING],timestamp:[2,a.TYPES.INT64]},Ee.internalSpec={keyIds:[1,a.FLAGS.REPEATED|a.TYPES.MESSAGE,we]},Se.internalSpec={keys:[1,a.FLAGS.REPEATED|a.TYPES.MESSAGE,Ae]},be.internalSpec={keyData:[1,a.TYPES.BYTES],fingerprint:[2,a.TYPES.MESSAGE,Te],timestamp:[3,a.TYPES.INT64]},Te.internalSpec={rawId:[1,a.TYPES.UINT32],currentIndex:[2,a.TYPES.UINT32],deviceIndexes:[3,a.FLAGS.REPEATED|a.FLAGS.PACKED|a.TYPES.UINT32]},we.internalSpec={keyId:[1,a.TYPES.BYTES]},Ae.internalSpec={keyId:[1,a.TYPES.MESSAGE,we],keyData:[2,a.TYPES.MESSAGE,be]},Ce.internalSpec={fileSha256:[1,a.TYPES.BYTES],fileLength:[2,a.TYPES.UINT64],mediaKey:[3,a.TYPES.BYTES],fileEncSha256:[4,a.TYPES.BYTES],directPath:[5,a.TYPES.STRING],syncType:[6,a.TYPES.ENUM,m],chunkOrder:[7,a.TYPES.UINT32],originalMessageId:[8,a.TYPES.STRING]},Oe.internalSpec={key:[1,a.TYPES.MESSAGE,r.MessageKeySpec],type:[2,a.TYPES.ENUM,g],ephemeralExpiration:[4,a.TYPES.UINT32],ephemeralSettingTimestamp:[5,a.TYPES.INT64],historySyncNotification:[6,a.TYPES.MESSAGE,Ce],appStateSyncKeyShare:[7,a.TYPES.MESSAGE,Se],appStateSyncKeyRequest:[8,a.TYPES.MESSAGE,Ee],initialSecurityNotificationSettingSync:[9,a.TYPES.MESSAGE,ge],appStateFatalExceptionNotification:[10,a.TYPES.MESSAGE,ye],disappearingMode:[11,a.TYPES.MESSAGE,rt]},Me.internalSpec={displayName:[1,a.TYPES.STRING],id:[2,a.TYPES.STRING]},Ie.internalSpec={callKey:[1,a.TYPES.BYTES],conversionSource:[2,a.TYPES.STRING],conversionData:[3,a.TYPES.BYTES],conversionDelaySeconds:[4,a.TYPES.UINT32]},ke.internalSpec={url:[1,a.TYPES.STRING],mimetype:[2,a.TYPES.STRING],fileSha256:[3,a.TYPES.BYTES],fileLength:[4,a.TYPES.UINT64],seconds:[5,a.TYPES.UINT32],mediaKey:[6,a.TYPES.BYTES],caption:[7,a.TYPES.STRING],gifPlayback:[8,a.TYPES.BOOL],height:[9,a.TYPES.UINT32],width:[10,a.TYPES.UINT32],fileEncSha256:[11,a.TYPES.BYTES],interactiveAnnotations:[12,a.FLAGS.REPEATED|a.TYPES.MESSAGE,We],directPath:[13,a.TYPES.STRING],mediaKeyTimestamp:[14,a.TYPES.INT64],jpegThumbnail:[16,a.TYPES.BYTES],contextInfo:[17,a.TYPES.MESSAGE,Ge],streamingSidecar:[18,a.TYPES.BYTES],gifAttribution:[19,a.TYPES.ENUM,y],viewOnce:[20,a.TYPES.BOOL],thumbnailDirectPath:[21,a.TYPES.STRING],thumbnailSha256:[22,a.TYPES.BYTES],thumbnailEncSha256:[23,a.TYPES.BYTES],staticUrl:[24,a.TYPES.STRING]},Pe.internalSpec={url:[1,a.TYPES.STRING],mimetype:[2,a.TYPES.STRING],fileSha256:[3,a.TYPES.BYTES],fileLength:[4,a.TYPES.UINT64],seconds:[5,a.TYPES.UINT32],ptt:[6,a.TYPES.BOOL],mediaKey:[7,a.TYPES.BYTES],fileEncSha256:[8,a.TYPES.BYTES],directPath:[9,a.TYPES.STRING],mediaKeyTimestamp:[10,a.TYPES.INT64],contextInfo:[17,a.TYPES.MESSAGE,Ge],streamingSidecar:[18,a.TYPES.BYTES]},Re.internalSpec={url:[1,a.TYPES.STRING],mimetype:[2,a.TYPES.STRING],title:[3,a.TYPES.STRING],fileSha256:[4,a.TYPES.BYTES],fileLength:[5,a.TYPES.UINT64],pageCount:[6,a.TYPES.UINT32],mediaKey:[7,a.TYPES.BYTES],fileName:[8,a.TYPES.STRING],fileEncSha256:[9,a.TYPES.BYTES],directPath:[10,a.TYPES.STRING],mediaKeyTimestamp:[11,a.TYPES.INT64],contactVcard:[12,a.TYPES.BOOL],thumbnailDirectPath:[13,a.TYPES.STRING],thumbnailSha256:[14,a.TYPES.BYTES],thumbnailEncSha256:[15,a.TYPES.BYTES],jpegThumbnail:[16,a.TYPES.BYTES],contextInfo:[17,a.TYPES.MESSAGE,Ge],thumbnailHeight:[18,a.TYPES.UINT32],thumbnailWidth:[19,a.TYPES.UINT32]},De.internalSpec={text:[1,a.TYPES.STRING],matchedText:[2,a.TYPES.STRING],canonicalUrl:[4,a.TYPES.STRING],description:[5,a.TYPES.STRING],title:[6,a.TYPES.STRING],textArgb:[7,a.TYPES.FIXED32],backgroundArgb:[8,a.TYPES.FIXED32],font:[9,a.TYPES.ENUM,S],previewType:[10,a.TYPES.ENUM,E],jpegThumbnail:[16,a.TYPES.BYTES],contextInfo:[17,a.TYPES.MESSAGE,Ge],doNotPlayInline:[18,a.TYPES.BOOL],thumbnailDirectPath:[19,a.TYPES.STRING],thumbnailSha256:[20,a.TYPES.BYTES],thumbnailEncSha256:[21,a.TYPES.BYTES],mediaKey:[22,a.TYPES.BYTES],mediaKeyTimestamp:[23,a.TYPES.INT64],thumbnailHeight:[24,a.TYPES.UINT32],thumbnailWidth:[25,a.TYPES.UINT32]},Ne.internalSpec={degreesLatitude:[1,a.TYPES.DOUBLE],degreesLongitude:[2,a.TYPES.DOUBLE],name:[3,a.TYPES.STRING],address:[4,a.TYPES.STRING],url:[5,a.TYPES.STRING],isLive:[6,a.TYPES.BOOL],accuracyInMeters:[7,a.TYPES.UINT32],speedInMps:[8,a.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[9,a.TYPES.UINT32],comment:[11,a.TYPES.STRING],jpegThumbnail:[16,a.TYPES.BYTES],contextInfo:[17,a.TYPES.MESSAGE,Ge]},Le.internalSpec={displayName:[1,a.TYPES.STRING],vcard:[16,a.TYPES.STRING],contextInfo:[17,a.TYPES.MESSAGE,Ge]},xe.internalSpec={note:[1,a.TYPES.STRING],token:[2,a.TYPES.STRING],attachmentType:[3,a.TYPES.ENUM,b],attachmentMimetype:[4,a.TYPES.STRING],attachmentMediaKey:[5,a.TYPES.BYTES],attachmentMediaKeyTimestamp:[6,a.TYPES.INT64],attachmentFileSha256:[7,a.TYPES.BYTES],attachmentFileEncSha256:[8,a.TYPES.BYTES],attachmentDirectPath:[9,a.TYPES.STRING],attachmentJpegThumbnail:[10,a.TYPES.BYTES]},Ue.internalSpec={url:[1,a.TYPES.STRING],mimetype:[2,a.TYPES.STRING],caption:[3,a.TYPES.STRING],fileSha256:[4,a.TYPES.BYTES],fileLength:[5,a.TYPES.UINT64],height:[6,a.TYPES.UINT32],width:[7,a.TYPES.UINT32],mediaKey:[8,a.TYPES.BYTES],fileEncSha256:[9,a.TYPES.BYTES],interactiveAnnotations:[10,a.FLAGS.REPEATED|a.TYPES.MESSAGE,We],directPath:[11,a.TYPES.STRING],mediaKeyTimestamp:[12,a.TYPES.INT64],jpegThumbnail:[16,a.TYPES.BYTES],contextInfo:[17,a.TYPES.MESSAGE,Ge],firstScanSidecar:[18,a.TYPES.BYTES],firstScanLength:[19,a.TYPES.UINT32],experimentGroupId:[20,a.TYPES.UINT32],scansSidecar:[21,a.TYPES.BYTES],scanLengths:[22,a.FLAGS.REPEATED|a.TYPES.UINT32],midQualityFileSha256:[23,a.TYPES.BYTES],midQualityFileEncSha256:[24,a.TYPES.BYTES],viewOnce:[25,a.TYPES.BOOL],thumbnailDirectPath:[26,a.TYPES.STRING],thumbnailSha256:[27,a.TYPES.BYTES],thumbnailEncSha256:[28,a.TYPES.BYTES],staticUrl:[29,a.TYPES.STRING]},Fe.internalSpec={groupId:[1,a.TYPES.STRING],axolotlSenderKeyDistributionMessage:[2,a.TYPES.BYTES]},Ge.internalSpec={stanzaId:[1,a.TYPES.STRING],participant:[2,a.TYPES.STRING],quotedMessage:[3,a.TYPES.MESSAGE,C],remoteJid:[4,a.TYPES.STRING],mentionedJid:[15,a.FLAGS.REPEATED|a.TYPES.STRING],conversionSource:[18,a.TYPES.STRING],conversionData:[19,a.TYPES.BYTES],conversionDelaySeconds:[20,a.TYPES.UINT32],forwardingScore:[21,a.TYPES.UINT32],isForwarded:[22,a.TYPES.BOOL],quotedAd:[23,a.TYPES.MESSAGE,je],placeholderKey:[24,a.TYPES.MESSAGE,r.MessageKeySpec],expiration:[25,a.TYPES.UINT32],ephemeralSettingTimestamp:[26,a.TYPES.INT64],ephemeralSharedSecret:[27,a.TYPES.BYTES],externalAdReply:[28,a.TYPES.MESSAGE,Be],entryPointConversionSource:[29,a.TYPES.STRING],entryPointConversionApp:[30,a.TYPES.STRING],entryPointConversionDelaySeconds:[31,a.TYPES.UINT32],disappearingMode:[32,a.TYPES.MESSAGE,rt],actionLink:[33,a.TYPES.MESSAGE,at]},Be.internalSpec={title:[1,a.TYPES.STRING],body:[2,a.TYPES.STRING],mediaType:[3,a.TYPES.ENUM,T],thumbnailUrl:[4,a.TYPES.STRING],mediaUrl:[5,a.TYPES.STRING],thumbnail:[6,a.TYPES.BYTES],sourceType:[7,a.TYPES.STRING],sourceId:[8,a.TYPES.STRING],sourceUrl:[9,a.TYPES.STRING]},je.internalSpec={advertiserName:[1,a.TYPES.STRING],mediaType:[2,a.TYPES.ENUM,w],jpegThumbnail:[16,a.TYPES.BYTES],caption:[17,a.TYPES.STRING]},Ye.internalSpec={deviceListMetadata:[1,a.TYPES.MESSAGE,Ke],deviceListMetadataVersion:[2,a.TYPES.INT32]},Ke.internalSpec={senderKeyHash:[1,a.TYPES.BYTES],senderTimestamp:[2,a.TYPES.UINT64],senderKeyIndexes:[3,a.FLAGS.REPEATED|a.FLAGS.PACKED|a.TYPES.UINT32],recipientKeyHash:[8,a.TYPES.BYTES],recipientTimestamp:[9,a.TYPES.UINT64],recipientKeyIndexes:[10,a.FLAGS.REPEATED|a.FLAGS.PACKED|a.TYPES.UINT32]},We.internalSpec={polygonVertices:[1,a.FLAGS.REPEATED|a.TYPES.MESSAGE,Ve],location:[2,a.TYPES.MESSAGE,He],__oneofs__:{action:["location"]}},Ve.internalSpec={xDeprecated:[1,a.TYPES.INT32],yDeprecated:[2,a.TYPES.INT32],x:[3,a.TYPES.DOUBLE],y:[4,a.TYPES.DOUBLE]},He.internalSpec={degreesLatitude:[1,a.TYPES.DOUBLE],degreesLongitude:[2,a.TYPES.DOUBLE],name:[3,a.TYPES.STRING]},$e.internalSpec={quickReplyButton:[1,a.TYPES.MESSAGE,Je],urlButton:[2,a.TYPES.MESSAGE,qe],callButton:[3,a.TYPES.MESSAGE,ze],index:[4,a.TYPES.UINT32],__oneofs__:{button:["quickReplyButton","urlButton","callButton"]}},ze.internalSpec={displayText:[1,a.TYPES.MESSAGE,de],phoneNumber:[2,a.TYPES.MESSAGE,de]},qe.internalSpec={displayText:[1,a.TYPES.MESSAGE,de],url:[2,a.TYPES.MESSAGE,de]},Je.internalSpec={displayText:[1,a.TYPES.MESSAGE,de],id:[2,a.TYPES.STRING]},Qe.internalSpec={quickReplyButton:[1,a.TYPES.MESSAGE,et],urlButton:[2,a.TYPES.MESSAGE,Ze],callButton:[3,a.TYPES.MESSAGE,Xe],index:[4,a.TYPES.UINT32],__oneofs__:{hydratedButton:["quickReplyButton","urlButton","callButton"]}},Xe.internalSpec={displayText:[1,a.TYPES.STRING],phoneNumber:[2,a.TYPES.STRING]},Ze.internalSpec={displayText:[1,a.TYPES.STRING],url:[2,a.TYPES.STRING]},et.internalSpec={displayText:[1,a.TYPES.STRING],id:[2,a.TYPES.STRING]},tt.internalSpec={value:[1,a.TYPES.INT64],offset:[2,a.TYPES.UINT32],currencyCode:[3,a.TYPES.STRING]},nt.internalSpec={id:[1,a.TYPES.STRING],fileLength:[2,a.TYPES.UINT64],width:[3,a.TYPES.UINT32],height:[4,a.TYPES.UINT32],mimetype:[5,a.TYPES.STRING],placeholderArgb:[6,a.TYPES.FIXED32],textArgb:[7,a.TYPES.FIXED32],subtextArgb:[8,a.TYPES.FIXED32]},rt.internalSpec={initiator:[1,a.TYPES.ENUM,A]},at.internalSpec={url:[1,a.TYPES.STRING],buttonTitle:[2,a.TYPES.STRING]}},69721:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EphemeralSettingSpec=void 0;var r=n(22236),a={};t.EphemeralSettingSpec=a,a.internalSpec={duration:[1,r.TYPES.SFIXED32],timestamp:[2,r.TYPES.SFIXED64]}},83738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushnameSpec=t.HistorySyncMsgSpec=t.ConversationSpec=t.HistorySyncSpec=t.ConversationEndOfHistoryTransferType=t.HistorySyncHistorySyncType=void 0;var r=n(76007),a=n(676),i=n(22236),o=n(54302)({INITIAL_BOOTSTRAP:0,INITIAL_STATUS_V3:1,FULL:2,RECENT:3,PUSH_NAME:4});t.HistorySyncHistorySyncType=o;var s=n(54302)({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1});t.ConversationEndOfHistoryTransferType=s;var u={};t.HistorySyncSpec=u;var l={};t.ConversationSpec=l;var c={};t.HistorySyncMsgSpec=c;var d={};t.PushnameSpec=d,u.internalSpec={syncType:[1,i.FLAGS.REQUIRED|i.TYPES.ENUM,o],conversations:[2,i.FLAGS.REPEATED|i.TYPES.MESSAGE,l],statusV3Messages:[3,i.FLAGS.REPEATED|i.TYPES.MESSAGE,r.WebMessageInfoSpec],chunkOrder:[5,i.TYPES.UINT32],progress:[6,i.TYPES.UINT32],pushnames:[7,i.FLAGS.REPEATED|i.TYPES.MESSAGE,d]},l.internalSpec={id:[1,i.FLAGS.REQUIRED|i.TYPES.STRING],messages:[2,i.FLAGS.REPEATED|i.TYPES.MESSAGE,c],newJid:[3,i.TYPES.STRING],oldJid:[4,i.TYPES.STRING],lastMsgTimestamp:[5,i.TYPES.UINT64],unreadCount:[6,i.TYPES.UINT32],readOnly:[7,i.TYPES.BOOL],endOfHistoryTransfer:[8,i.TYPES.BOOL],ephemeralExpiration:[9,i.TYPES.UINT32],ephemeralSettingTimestamp:[10,i.TYPES.INT64],endOfHistoryTransferType:[11,i.TYPES.ENUM,s],conversationTimestamp:[12,i.TYPES.UINT64],name:[13,i.TYPES.STRING],pHash:[14,i.TYPES.STRING],notSpam:[15,i.TYPES.BOOL],archived:[16,i.TYPES.BOOL],disappearingMode:[17,i.TYPES.MESSAGE,a.DisappearingModeSpec],unreadMentionCount:[18,i.TYPES.UINT32]},c.internalSpec={message:[1,i.TYPES.MESSAGE,r.WebMessageInfoSpec],msgOrderId:[2,i.TYPES.UINT64]},d.internalSpec={id:[1,i.TYPES.STRING],pushname:[2,i.TYPES.STRING]}},36063:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsgOpaqueDataSpec=t.MsgRowOpaqueDataSpec=void 0;var r=n(22236),a={};t.MsgRowOpaqueDataSpec=a;var i={};t.MsgOpaqueDataSpec=i,a.internalSpec={currentMsg:[1,r.TYPES.MESSAGE,i],quotedMsg:[2,r.TYPES.MESSAGE,i]},i.internalSpec={body:[1,r.TYPES.STRING],caption:[3,r.TYPES.STRING],clientUrl:[4,r.TYPES.STRING],loc:[4,r.TYPES.STRING],lng:[5,r.TYPES.DOUBLE],lat:[7,r.TYPES.DOUBLE],paymentAmount1000:[8,r.TYPES.INT32],paymentNoteMsgBody:[9,r.TYPES.STRING],canonicalUrl:[10,r.TYPES.STRING],matchedText:[11,r.TYPES.STRING],title:[12,r.TYPES.STRING],description:[13,r.TYPES.STRING]}},26594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerErrorReceiptSpec=t.MediaRetryNotificationSpec=t.MediaRetryNotificationResultType=void 0;var r=n(22236),a=n(54302)({GENERAL_ERROR:0,SUCCESS:1,NOT_FOUND:2,DECRYPTION_ERROR:3});t.MediaRetryNotificationResultType=a;var i={};t.MediaRetryNotificationSpec=i;var o={};t.ServerErrorReceiptSpec=o,i.internalSpec={stanzaId:[1,r.TYPES.STRING],directPath:[2,r.TYPES.STRING],result:[3,r.TYPES.ENUM,a]},o.internalSpec={stanzaId:[1,r.TYPES.STRING]}},25737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageKeySpec=void 0;var r=n(22236),a={};t.MessageKeySpec=a,a.internalSpec={remoteJid:[1,r.TYPES.STRING],fromMe:[2,r.TYPES.BOOL],id:[3,r.TYPES.STRING],participant:[4,r.TYPES.STRING]}},4753:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncdPatchSpec=t.SyncdMutationSpec=t.SyncdMutationsSpec=t.SyncdSnapshotSpec=t.ExternalBlobReferenceSpec=t.SyncdRecordSpec=t.KeyIdSpec=t.SyncdValueSpec=t.SyncdIndexSpec=t.ExitCodeSpec=t.SyncdVersionSpec=t.SyncdMutationSyncdOperation=void 0;var r=n(22236),a=n(54302)({SET:0,REMOVE:1});t.SyncdMutationSyncdOperation=a;var i={};t.SyncdVersionSpec=i;var o={};t.ExitCodeSpec=o;var s={};t.SyncdIndexSpec=s;var u={};t.SyncdValueSpec=u;var l={};t.KeyIdSpec=l;var c={};t.SyncdRecordSpec=c;var d={};t.ExternalBlobReferenceSpec=d;var f={};t.SyncdSnapshotSpec=f;var p={};t.SyncdMutationsSpec=p;var h={};t.SyncdMutationSpec=h;var _={};t.SyncdPatchSpec=_,i.internalSpec={version:[1,r.TYPES.UINT64]},o.internalSpec={code:[1,r.TYPES.UINT64],text:[2,r.TYPES.STRING]},s.internalSpec={blob:[1,r.TYPES.BYTES]},u.internalSpec={blob:[1,r.TYPES.BYTES]},l.internalSpec={id:[1,r.TYPES.BYTES]},c.internalSpec={index:[1,r.TYPES.MESSAGE,s],value:[2,r.TYPES.MESSAGE,u],keyId:[3,r.TYPES.MESSAGE,l]},d.internalSpec={mediaKey:[1,r.TYPES.BYTES],directPath:[2,r.TYPES.STRING],handle:[3,r.TYPES.STRING],fileSizeBytes:[4,r.TYPES.UINT64],fileSha256:[5,r.TYPES.BYTES],fileEncSha256:[6,r.TYPES.BYTES]},f.internalSpec={version:[1,r.TYPES.MESSAGE,i],records:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,c],mac:[3,r.TYPES.BYTES],keyId:[4,r.TYPES.MESSAGE,l]},p.internalSpec={mutations:[1,r.FLAGS.REPEATED|r.TYPES.MESSAGE,h]},h.internalSpec={operation:[1,r.TYPES.ENUM,a],record:[2,r.TYPES.MESSAGE,c]},_.internalSpec={version:[1,r.TYPES.MESSAGE,i],mutations:[2,r.FLAGS.REPEATED|r.TYPES.MESSAGE,h],externalMutations:[3,r.TYPES.MESSAGE,d],snapshotMac:[4,r.TYPES.BYTES],patchMac:[5,r.TYPES.BYTES],keyId:[6,r.TYPES.MESSAGE,l],exitCode:[7,r.TYPES.MESSAGE,o],deviceIndex:[8,r.TYPES.UINT32]}},29392:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncActionDataSpec=t.StarActionSpec=t.ContactActionSpec=t.MuteActionSpec=t.PinActionSpec=t.SecurityNotificationSettingSpec=t.PushNameSettingSpec=t.LocaleSettingSpec=t.QuickReplyActionSpec=t.LabelAssociationActionSpec=t.LabelEditActionSpec=t.RecentStickerWeightsActionSpec=t.RecentStickerMetadataSpec=t.RecentEmojiWeightsActionSpec=t.ArchiveChatActionSpec=t.DeleteMessageForMeActionSpec=t.MarkChatAsReadActionSpec=t.ClearChatActionSpec=t.DeleteChatActionSpec=t.UnarchiveChatsSettingSpec=t.SyncActionMessageRangeSpec=t.SyncActionMessageSpec=t.KeyExpirationSpec=t.SyncActionValueSpec=t.RecentEmojiWeightSpec=t.RecentStickerWeightSpec=void 0;var r=n(25737),a=n(22236),i={};t.RecentStickerWeightSpec=i;var o={};t.RecentEmojiWeightSpec=o;var s={};t.SyncActionValueSpec=s;var u={};t.KeyExpirationSpec=u;var l={};t.SyncActionMessageSpec=l;var c={};t.SyncActionMessageRangeSpec=c;var d={};t.UnarchiveChatsSettingSpec=d;var f={};t.DeleteChatActionSpec=f;var p={};t.ClearChatActionSpec=p;var h={};t.MarkChatAsReadActionSpec=h;var _={};t.DeleteMessageForMeActionSpec=_;var v={};t.ArchiveChatActionSpec=v;var m={};t.RecentEmojiWeightsActionSpec=m;var g={};t.RecentStickerMetadataSpec=g;var y={};t.RecentStickerWeightsActionSpec=y;var E={};t.LabelEditActionSpec=E;var S={};t.LabelAssociationActionSpec=S;var b={};t.QuickReplyActionSpec=b;var T={};t.LocaleSettingSpec=T;var w={};t.PushNameSettingSpec=w;var A={};t.SecurityNotificationSettingSpec=A;var C={};t.PinActionSpec=C;var O={};t.MuteActionSpec=O;var M={};t.ContactActionSpec=M;var I={};t.StarActionSpec=I;var k={};t.SyncActionDataSpec=k,i.internalSpec={filehash:[1,a.TYPES.STRING],weight:[2,a.TYPES.FLOAT]},o.internalSpec={emoji:[1,a.TYPES.STRING],weight:[2,a.TYPES.FLOAT]},s.internalSpec={timestamp:[1,a.TYPES.INT64],starAction:[2,a.TYPES.MESSAGE,I],contactAction:[3,a.TYPES.MESSAGE,M],muteAction:[4,a.TYPES.MESSAGE,O],pinAction:[5,a.TYPES.MESSAGE,C],securityNotificationSetting:[6,a.TYPES.MESSAGE,A],pushNameSetting:[7,a.TYPES.MESSAGE,w],quickReplyAction:[8,a.TYPES.MESSAGE,b],recentStickerWeightsAction:[9,a.TYPES.MESSAGE,y],recentStickerMetadata:[10,a.TYPES.MESSAGE,g],recentEmojiWeightsAction:[11,a.TYPES.MESSAGE,m],labelEditAction:[14,a.TYPES.MESSAGE,E],labelAssociationAction:[15,a.TYPES.MESSAGE,S],localeSetting:[16,a.TYPES.MESSAGE,T],archiveChatAction:[17,a.TYPES.MESSAGE,v],deleteMessageForMeAction:[18,a.TYPES.MESSAGE,_],keyExpiration:[19,a.TYPES.MESSAGE,u],markChatAsReadAction:[20,a.TYPES.MESSAGE,h],clearChatAction:[21,a.TYPES.MESSAGE,p],deleteChatAction:[22,a.TYPES.MESSAGE,f],unarchiveChatsSetting:[23,a.TYPES.MESSAGE,d]},u.internalSpec={expiredKeyEpoch:[1,a.TYPES.INT32]},l.internalSpec={key:[1,a.TYPES.MESSAGE,r.MessageKeySpec],timestamp:[2,a.TYPES.INT64]},c.internalSpec={lastMessageTimestamp:[1,a.TYPES.INT64],lastSystemMessageTimestamp:[2,a.TYPES.INT64],messages:[3,a.FLAGS.REPEATED|a.TYPES.MESSAGE,l]},d.internalSpec={unarchiveChats:[1,a.TYPES.BOOL]},f.internalSpec={messageRange:[1,a.TYPES.MESSAGE,c]},p.internalSpec={messageRange:[1,a.TYPES.MESSAGE,c]},h.internalSpec={read:[1,a.TYPES.BOOL],messageRange:[2,a.TYPES.MESSAGE,c]},_.internalSpec={deleteMedia:[1,a.TYPES.BOOL],messageTimestamp:[2,a.TYPES.INT64]},v.internalSpec={archived:[1,a.TYPES.BOOL],messageRange:[2,a.TYPES.MESSAGE,c]},m.internalSpec={weights:[1,a.FLAGS.REPEATED|a.TYPES.MESSAGE,o]},g.internalSpec={directPath:[1,a.TYPES.STRING],encFilehash:[2,a.TYPES.STRING],mediaKey:[3,a.TYPES.STRING],stanzaId:[4,a.TYPES.STRING],chatJid:[5,a.TYPES.STRING],participant:[6,a.TYPES.STRING],isSentByMe:[7,a.TYPES.BOOL]},y.internalSpec={weights:[1,a.FLAGS.REPEATED|a.TYPES.MESSAGE,i]},E.internalSpec={name:[1,a.TYPES.STRING],color:[2,a.TYPES.INT32],predefinedId:[3,a.TYPES.INT32],deleted:[4,a.TYPES.BOOL]},S.internalSpec={labeled:[1,a.TYPES.BOOL]},b.internalSpec={shortcut:[1,a.TYPES.STRING],message:[2,a.TYPES.STRING],keywords:[3,a.FLAGS.REPEATED|a.TYPES.STRING],count:[4,a.TYPES.INT32],deleted:[5,a.TYPES.BOOL]},T.internalSpec={locale:[1,a.TYPES.STRING]},w.internalSpec={name:[1,a.TYPES.STRING]},A.internalSpec={showNotification:[1,a.TYPES.BOOL]},C.internalSpec={pinned:[1,a.TYPES.BOOL]},O.internalSpec={muted:[1,a.TYPES.BOOL],muteEndTimestamp:[2,a.TYPES.INT64]},M.internalSpec={fullName:[1,a.TYPES.STRING],firstName:[2,a.TYPES.STRING]},I.internalSpec={starred:[1,a.TYPES.BOOL]},k.internalSpec={index:[1,a.TYPES.BYTES],value:[2,a.TYPES.MESSAGE,s],padding:[3,a.TYPES.BYTES],version:[4,a.TYPES.INT32]}},91928:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BizIdentityInfoSpec=t.BizAccountLinkInfoSpec=t.BizAccountPayloadSpec=t.DetailsSpec=t.VerifiedNameCertificateSpec=t.LocalizedNameSpec=t.BizIdentityInfoVerifiedLevelValue=t.BizIdentityInfoHostStorageType=t.BizIdentityInfoActualActorsType=t.BizAccountLinkInfoHostStorageType=t.BizAccountLinkInfoAccountType=void 0;var r=n(22236),a=n(54302)({ENTERPRISE:0,PAGE:1});t.BizAccountLinkInfoAccountType=a;var i=n(54302)({ON_PREMISE:0,FACEBOOK:1});t.BizAccountLinkInfoHostStorageType=i;var o=n(54302)({SELF:0,BSP:1});t.BizIdentityInfoActualActorsType=o;var s=n(54302)({ON_PREMISE:0,FACEBOOK:1});t.BizIdentityInfoHostStorageType=s;var u=n(54302)({UNKNOWN:0,LOW:1,HIGH:2});t.BizIdentityInfoVerifiedLevelValue=u;var l={};t.LocalizedNameSpec=l;var c={};t.VerifiedNameCertificateSpec=c;var d={};t.DetailsSpec=d;var f={};t.BizAccountPayloadSpec=f;var p={};t.BizAccountLinkInfoSpec=p;var h={};t.BizIdentityInfoSpec=h,l.internalSpec={lg:[1,r.TYPES.STRING],lc:[2,r.TYPES.STRING],verifiedName:[3,r.TYPES.STRING]},c.internalSpec={details:[1,r.TYPES.BYTES],signature:[2,r.TYPES.BYTES],serverSignature:[3,r.TYPES.BYTES]},d.internalSpec={serial:[1,r.TYPES.UINT64],issuer:[2,r.TYPES.STRING],verifiedName:[4,r.TYPES.STRING],localizedNames:[8,r.FLAGS.REPEATED|r.TYPES.MESSAGE,l],issueTime:[10,r.TYPES.UINT64]},f.internalSpec={vnameCert:[1,r.TYPES.MESSAGE,c],bizAcctLinkInfo:[2,r.TYPES.BYTES]},p.internalSpec={whatsappBizAcctFbid:[1,r.TYPES.UINT64],whatsappAcctNumber:[2,r.TYPES.STRING],issueTime:[3,r.TYPES.UINT64],hostStorage:[4,r.TYPES.ENUM,i],accountType:[5,r.TYPES.ENUM,a]},h.internalSpec={vlevel:[1,r.TYPES.ENUM,u],vnameCert:[2,r.TYPES.MESSAGE,c],signed:[3,r.TYPES.BOOL],revoked:[4,r.TYPES.BOOL],hostStorage:[5,r.TYPES.ENUM,s],actualActors:[6,r.TYPES.ENUM,o],privacyModeTs:[7,r.TYPES.UINT64]}},24935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppVersionSpec=t.UserAgentSpec=t.WebdPayloadSpec=t.WebInfoSpec=t.DNSSourceSpec=t.CompanionRegDataSpec=t.ClientPayloadSpec=t.DetailsSpec=t.NoiseCertificateSpec=t.ClientHelloSpec=t.ServerHelloSpec=t.ClientFinishSpec=t.HandshakeMessageSpec=t.ClientPayloadClientFeature=t.UserAgentPlatform=t.UserAgentReleaseChannel=t.WebInfoWebSubPlatform=t.ClientPayloadIOSAppExtension=t.ClientPayloadConnectReason=t.ClientPayloadConnectType=t.DNSSourceDNSResolutionMethod=t.ClientPayloadProduct=void 0;var r=n(22236),a=n(54302)({WHATSAPP:0,MESSENGER:1});t.ClientPayloadProduct=a;var i=n(54302)({SYSTEM:0,GOOGLE:1,HARDCODED:2,OVERRIDE:3,FALLBACK:4});t.DNSSourceDNSResolutionMethod=i;var o=n(54302)({CELLULAR_UNKNOWN:0,WIFI_UNKNOWN:1,CELLULAR_EDGE:100,CELLULAR_IDEN:101,CELLULAR_UMTS:102,CELLULAR_EVDO:103,CELLULAR_GPRS:104,CELLULAR_HSDPA:105,CELLULAR_HSUPA:106,CELLULAR_HSPA:107,CELLULAR_CDMA:108,CELLULAR_1XRTT:109,CELLULAR_EHRPD:110,CELLULAR_LTE:111,CELLULAR_HSPAP:112});t.ClientPayloadConnectType=o;var s=n(54302)({PUSH:0,USER_ACTIVATED:1,SCHEDULED:2,ERROR_RECONNECT:3,NETWORK_SWITCH:4,PING_RECONNECT:5});t.ClientPayloadConnectReason=s;var u=n(54302)({SHARE_EXTENSION:0,SERVICE_EXTENSION:1,INTENTS_EXTENSION:2});t.ClientPayloadIOSAppExtension=u;var l=n(54302)({WEB_BROWSER:0,APP_STORE:1,WIN_STORE:2,DARWIN:3,WIN32:4});t.WebInfoWebSubPlatform=l;var c=n(54302)({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3});t.UserAgentReleaseChannel=c;var d=n(54302)({ANDROID:0,IOS:1,WINDOWS_PHONE:2,BLACKBERRY:3,BLACKBERRYX:4,S40:5,S60:6,PYTHON_CLIENT:7,TIZEN:8,ENTERPRISE:9,SMB_ANDROID:10,KAIOS:11,SMB_IOS:12,WINDOWS:13,WEB:14,PORTAL:15,GREEN_ANDROID:16,GREEN_IPHONE:17,BLUE_ANDROID:18,BLUE_IPHONE:19,FBLITE_ANDROID:20,MLITE_ANDROID:21,IGLITE_ANDROID:22,PAGE:23,MACOS:24,OCULUS_MSG:25,OCULUS_CALL:26});t.UserAgentPlatform=d;var f=n(54302)({NONE:0});t.ClientPayloadClientFeature=f;var p={};t.HandshakeMessageSpec=p;var h={};t.ClientFinishSpec=h;var _={};t.ServerHelloSpec=_;var v={};t.ClientHelloSpec=v;var m={};t.NoiseCertificateSpec=m;var g={};t.DetailsSpec=g;var y={};t.ClientPayloadSpec=y;var E={};t.CompanionRegDataSpec=E;var S={};t.DNSSourceSpec=S;var b={};t.WebInfoSpec=b;var T={};t.WebdPayloadSpec=T;var w={};t.UserAgentSpec=w;var A={};t.AppVersionSpec=A,p.internalSpec={clientHello:[2,r.TYPES.MESSAGE,v],serverHello:[3,r.TYPES.MESSAGE,_],clientFinish:[4,r.TYPES.MESSAGE,h]},h.internalSpec={static:[1,r.TYPES.BYTES],payload:[2,r.TYPES.BYTES]},_.internalSpec={ephemeral:[1,r.TYPES.BYTES],static:[2,r.TYPES.BYTES],payload:[3,r.TYPES.BYTES]},v.internalSpec={ephemeral:[1,r.TYPES.BYTES],static:[2,r.TYPES.BYTES],payload:[3,r.TYPES.BYTES]},m.internalSpec={details:[1,r.TYPES.BYTES],signature:[2,r.TYPES.BYTES]},g.internalSpec={serial:[1,r.TYPES.UINT32],issuer:[2,r.TYPES.STRING],expires:[3,r.TYPES.UINT64],subject:[4,r.TYPES.STRING],key:[5,r.TYPES.BYTES]},y.internalSpec={username:[1,r.TYPES.UINT64],passive:[3,r.TYPES.BOOL],clientFeatures:[4,r.FLAGS.REPEATED|r.TYPES.ENUM,f],userAgent:[5,r.TYPES.MESSAGE,w],webInfo:[6,r.TYPES.MESSAGE,b],pushName:[7,r.TYPES.STRING],sessionId:[9,r.TYPES.SFIXED32],shortConnect:[10,r.TYPES.BOOL],iosAppExtension:[30,r.TYPES.ENUM,u],connectType:[12,r.TYPES.ENUM,o],connectReason:[13,r.TYPES.ENUM,s],shards:[14,r.FLAGS.REPEATED|r.TYPES.INT32],dnsSource:[15,r.TYPES.MESSAGE,S],connectAttemptCount:[16,r.TYPES.UINT32],agent:[17,r.TYPES.UINT32],device:[18,r.TYPES.UINT32],regData:[19,r.TYPES.MESSAGE,E],product:[20,r.TYPES.ENUM,a],fbCat:[21,r.TYPES.BYTES],fbUserAgent:[22,r.TYPES.BYTES],oc:[23,r.TYPES.BOOL],lc:[24,r.TYPES.UINT32]},E.internalSpec={eRegid:[1,r.TYPES.BYTES],eKeytype:[2,r.TYPES.BYTES],eIdent:[3,r.TYPES.BYTES],eSkeyId:[4,r.TYPES.BYTES],eSkeyVal:[5,r.TYPES.BYTES],eSkeySig:[6,r.TYPES.BYTES],buildHash:[7,r.TYPES.BYTES],companionProps:[8,r.TYPES.BYTES]},S.internalSpec={dnsMethod:[15,r.TYPES.ENUM,i],appCached:[16,r.TYPES.BOOL]},b.internalSpec={refToken:[1,r.TYPES.STRING],version:[2,r.TYPES.STRING],webdPayload:[3,r.TYPES.MESSAGE,T],webSubPlatform:[4,r.TYPES.ENUM,l]},T.internalSpec={usesParticipantInKey:[1,r.TYPES.BOOL],supportsStarredMessages:[2,r.TYPES.BOOL],supportsDocumentMessages:[3,r.TYPES.BOOL],supportsUrlMessages:[4,r.TYPES.BOOL],supportsMediaRetry:[5,r.TYPES.BOOL],supportsE2EImage:[6,r.TYPES.BOOL],supportsE2EVideo:[7,r.TYPES.BOOL],supportsE2EAudio:[8,r.TYPES.BOOL],supportsE2EDocument:[9,r.TYPES.BOOL],documentTypes:[10,r.TYPES.STRING],features:[11,r.TYPES.BYTES]},w.internalSpec={platform:[1,r.TYPES.ENUM,d],appVersion:[2,r.TYPES.MESSAGE,A],mcc:[3,r.TYPES.STRING],mnc:[4,r.TYPES.STRING],osVersion:[5,r.TYPES.STRING],manufacturer:[6,r.TYPES.STRING],device:[7,r.TYPES.STRING],osBuildNumber:[8,r.TYPES.STRING],phoneId:[9,r.TYPES.STRING],releaseChannel:[10,r.TYPES.ENUM,c],localeLanguageIso6391:[11,r.TYPES.STRING],localeCountryIso31661Alpha2:[12,r.TYPES.STRING],deviceBoard:[13,r.TYPES.STRING]},A.internalSpec={primary:[1,r.TYPES.UINT32],secondary:[2,r.TYPES.UINT32],tertiary:[3,r.TYPES.UINT32],quaternary:[4,r.TYPES.UINT32],quinary:[5,r.TYPES.UINT32]}},76007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserReceiptSpec=t.PhotoChangeSpec=t.MediaDataSpec=t.WebFeaturesSpec=t.NotificationMessageInfoSpec=t.WebNotificationsInfoSpec=t.PaymentInfoSpec=t.WebMessageInfoSpec=t.WebFeaturesFlag=t.PaymentInfoCurrency=t.PaymentInfoStatus=t.PaymentInfoTxnStatus=t.WebMessageInfoStatus=t.WebMessageInfoStubType=t.WebMessageInfoBizPrivacyStatus=void 0;var r=n(676),a=n(25737),i=n(22236),o=n(54302)({E2EE:0,FB:2,BSP:1,BSP_AND_FB:3});t.WebMessageInfoBizPrivacyStatus=o;var s=n(54302)({UNKNOWN:0,REVOKE:1,CIPHERTEXT:2,FUTUREPROOF:3,NON_VERIFIED_TRANSITION:4,UNVERIFIED_TRANSITION:5,VERIFIED_TRANSITION:6,VERIFIED_LOW_UNKNOWN:7,VERIFIED_HIGH:8,VERIFIED_INITIAL_UNKNOWN:9,VERIFIED_INITIAL_LOW:10,VERIFIED_INITIAL_HIGH:11,VERIFIED_TRANSITION_ANY_TO_NONE:12,VERIFIED_TRANSITION_ANY_TO_HIGH:13,VERIFIED_TRANSITION_HIGH_TO_LOW:14,VERIFIED_TRANSITION_HIGH_TO_UNKNOWN:15,VERIFIED_TRANSITION_UNKNOWN_TO_LOW:16,VERIFIED_TRANSITION_LOW_TO_UNKNOWN:17,VERIFIED_TRANSITION_NONE_TO_LOW:18,VERIFIED_TRANSITION_NONE_TO_UNKNOWN:19,GROUP_CREATE:20,GROUP_CHANGE_SUBJECT:21,GROUP_CHANGE_ICON:22,GROUP_CHANGE_INVITE_LINK:23,GROUP_CHANGE_DESCRIPTION:24,GROUP_CHANGE_RESTRICT:25,GROUP_CHANGE_ANNOUNCE:26,GROUP_PARTICIPANT_ADD:27,GROUP_PARTICIPANT_REMOVE:28,GROUP_PARTICIPANT_PROMOTE:29,GROUP_PARTICIPANT_DEMOTE:30,GROUP_PARTICIPANT_INVITE:31,GROUP_PARTICIPANT_LEAVE:32,GROUP_PARTICIPANT_CHANGE_NUMBER:33,BROADCAST_CREATE:34,BROADCAST_ADD:35,BROADCAST_REMOVE:36,GENERIC_NOTIFICATION:37,E2E_IDENTITY_CHANGED:38,E2E_ENCRYPTED:39,CALL_MISSED_VOICE:40,CALL_MISSED_VIDEO:41,INDIVIDUAL_CHANGE_NUMBER:42,GROUP_DELETE:43,GROUP_ANNOUNCE_MODE_MESSAGE_BOUNCE:44,CALL_MISSED_GROUP_VOICE:45,CALL_MISSED_GROUP_VIDEO:46,PAYMENT_CIPHERTEXT:47,PAYMENT_FUTUREPROOF:48,PAYMENT_TRANSACTION_STATUS_UPDATE_FAILED:49,PAYMENT_TRANSACTION_STATUS_UPDATE_REFUNDED:50,PAYMENT_TRANSACTION_STATUS_UPDATE_REFUND_FAILED:51,PAYMENT_TRANSACTION_STATUS_RECEIVER_PENDING_SETUP:52,PAYMENT_TRANSACTION_STATUS_RECEIVER_SUCCESS_AFTER_HICCUP:53,PAYMENT_ACTION_ACCOUNT_SETUP_REMINDER:54,PAYMENT_ACTION_SEND_PAYMENT_REMINDER:55,PAYMENT_ACTION_SEND_PAYMENT_INVITATION:56,PAYMENT_ACTION_REQUEST_DECLINED:57,PAYMENT_ACTION_REQUEST_EXPIRED:58,PAYMENT_ACTION_REQUEST_CANCELLED:59,BIZ_VERIFIED_TRANSITION_TOP_TO_BOTTOM:60,BIZ_VERIFIED_TRANSITION_BOTTOM_TO_TOP:61,BIZ_INTRO_TOP:62,BIZ_INTRO_BOTTOM:63,BIZ_NAME_CHANGE:64,BIZ_MOVE_TO_CONSUMER_APP:65,BIZ_TWO_TIER_MIGRATION_TOP:66,BIZ_TWO_TIER_MIGRATION_BOTTOM:67,OVERSIZED:68,GROUP_CHANGE_NO_FREQUENTLY_FORWARDED:69,GROUP_V4_ADD_INVITE_SENT:70,GROUP_PARTICIPANT_ADD_REQUEST_JOIN:71,CHANGE_EPHEMERAL_SETTING:72,E2E_DEVICE_CHANGED:73,VIEWED_ONCE:74,E2E_ENCRYPTED_NOW:75,BLUE_MSG_BSP_FB_TO_BSP_PREMISE:76,BLUE_MSG_BSP_FB_TO_SELF_FB:77,BLUE_MSG_BSP_FB_TO_SELF_PREMISE:78,BLUE_MSG_BSP_FB_UNVERIFIED:79,BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:80,BLUE_MSG_BSP_FB_VERIFIED:81,BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:82,BLUE_MSG_BSP_PREMISE_TO_SELF_PREMISE:83,BLUE_MSG_BSP_PREMISE_UNVERIFIED:84,BLUE_MSG_BSP_PREMISE_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:85,BLUE_MSG_BSP_PREMISE_VERIFIED:86,BLUE_MSG_BSP_PREMISE_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:87,BLUE_MSG_CONSUMER_TO_BSP_FB_UNVERIFIED:88,BLUE_MSG_CONSUMER_TO_BSP_PREMISE_UNVERIFIED:89,BLUE_MSG_CONSUMER_TO_SELF_FB_UNVERIFIED:90,BLUE_MSG_CONSUMER_TO_SELF_PREMISE_UNVERIFIED:91,BLUE_MSG_SELF_FB_TO_BSP_PREMISE:92,BLUE_MSG_SELF_FB_TO_SELF_PREMISE:93,BLUE_MSG_SELF_FB_UNVERIFIED:94,BLUE_MSG_SELF_FB_UNVERIFIED_TO_SELF_PREMISE_VERIFIED:95,BLUE_MSG_SELF_FB_VERIFIED:96,BLUE_MSG_SELF_FB_VERIFIED_TO_SELF_PREMISE_UNVERIFIED:97,BLUE_MSG_SELF_PREMISE_TO_BSP_PREMISE:98,BLUE_MSG_SELF_PREMISE_UNVERIFIED:99,BLUE_MSG_SELF_PREMISE_VERIFIED:100,BLUE_MSG_TO_BSP_FB:101,BLUE_MSG_TO_CONSUMER:102,BLUE_MSG_TO_SELF_FB:103,BLUE_MSG_UNVERIFIED_TO_BSP_FB_VERIFIED:104,BLUE_MSG_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:105,BLUE_MSG_UNVERIFIED_TO_SELF_FB_VERIFIED:106,BLUE_MSG_UNVERIFIED_TO_VERIFIED:107,BLUE_MSG_VERIFIED_TO_BSP_FB_UNVERIFIED:108,BLUE_MSG_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:109,BLUE_MSG_VERIFIED_TO_SELF_FB_UNVERIFIED:110,BLUE_MSG_VERIFIED_TO_UNVERIFIED:111,BLUE_MSG_BSP_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:112,BLUE_MSG_BSP_FB_UNVERIFIED_TO_SELF_FB_VERIFIED:113,BLUE_MSG_BSP_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:114,BLUE_MSG_BSP_FB_VERIFIED_TO_SELF_FB_UNVERIFIED:115,BLUE_MSG_SELF_FB_UNVERIFIED_TO_BSP_PREMISE_VERIFIED:116,BLUE_MSG_SELF_FB_VERIFIED_TO_BSP_PREMISE_UNVERIFIED:117,E2E_IDENTITY_UNAVAILABLE:118,GROUP_CREATING:119,GROUP_CREATE_FAILED:120,GROUP_BOUNCED:121,BLOCK_CONTACT:122,EPHEMERAL_SETTING_NOT_APPLIED:123,SYNC_FAILED:124,SYNCING:125,BIZ_PRIVACY_MODE_INIT_FB:126,BIZ_PRIVACY_MODE_INIT_BSP:127,BIZ_PRIVACY_MODE_TO_FB:128,BIZ_PRIVACY_MODE_TO_BSP:129,DISAPPEARING_MODE:130});t.WebMessageInfoStubType=s;var u=n(54302)({ERROR:0,PENDING:1,SERVER_ACK:2,DELIVERY_ACK:3,READ:4,PLAYED:5});t.WebMessageInfoStatus=u;var l=n(54302)({UNKNOWN:0,PENDING_SETUP:1,PENDING_RECEIVER_SETUP:2,INIT:3,SUCCESS:4,COMPLETED:5,FAILED:6,FAILED_RISK:7,FAILED_PROCESSING:8,FAILED_RECEIVER_PROCESSING:9,FAILED_DA:10,FAILED_DA_FINAL:11,REFUNDED_TXN:12,REFUND_FAILED:13,REFUND_FAILED_PROCESSING:14,REFUND_FAILED_DA:15,EXPIRED_TXN:16,AUTH_CANCELED:17,AUTH_CANCEL_FAILED_PROCESSING:18,AUTH_CANCEL_FAILED:19,COLLECT_INIT:20,COLLECT_SUCCESS:21,COLLECT_FAILED:22,COLLECT_FAILED_RISK:23,COLLECT_REJECTED:24,COLLECT_EXPIRED:25,COLLECT_CANCELED:26,COLLECT_CANCELLING:27,IN_REVIEW:28});t.PaymentInfoTxnStatus=l;var c=n(54302)({UNKNOWN_STATUS:0,PROCESSING:1,SENT:2,NEED_TO_ACCEPT:3,COMPLETE:4,COULD_NOT_COMPLETE:5,REFUNDED:6,EXPIRED:7,REJECTED:8,CANCELLED:9,WAITING_FOR_PAYER:10,WAITING:11});t.PaymentInfoStatus=c;var d=n(54302)({UNKNOWN_CURRENCY:0,INR:1});t.PaymentInfoCurrency=d;var f=n(54302)({NOT_STARTED:0,FORCE_UPGRADE:1,DEVELOPMENT:2,PRODUCTION:3});t.WebFeaturesFlag=f;var p={};t.WebMessageInfoSpec=p;var h={};t.PaymentInfoSpec=h;var _={};t.WebNotificationsInfoSpec=_;var v={};t.NotificationMessageInfoSpec=v;var m={};t.WebFeaturesSpec=m;var g={};t.MediaDataSpec=g;var y={};t.PhotoChangeSpec=y;var E={};t.UserReceiptSpec=E,p.internalDefaults={status:u.PENDING},p.internalSpec={key:[1,i.FLAGS.REQUIRED|i.TYPES.MESSAGE,a.MessageKeySpec],message:[2,i.TYPES.MESSAGE,r.MessageSpec],messageTimestamp:[3,i.TYPES.UINT64],status:[4,i.TYPES.ENUM,u],participant:[5,i.TYPES.STRING],messageC2STimestamp:[6,i.TYPES.UINT64],ignore:[16,i.TYPES.BOOL],starred:[17,i.TYPES.BOOL],broadcast:[18,i.TYPES.BOOL],pushName:[19,i.TYPES.STRING],mediaCiphertextSha256:[20,i.TYPES.BYTES],multicast:[21,i.TYPES.BOOL],urlText:[22,i.TYPES.BOOL],urlNumber:[23,i.TYPES.BOOL],messageStubType:[24,i.TYPES.ENUM,s],clearMedia:[25,i.TYPES.BOOL],messageStubParameters:[26,i.FLAGS.REPEATED|i.TYPES.STRING],duration:[27,i.TYPES.UINT32],labels:[28,i.FLAGS.REPEATED|i.TYPES.STRING],paymentInfo:[29,i.TYPES.MESSAGE,h],finalLiveLocation:[30,i.TYPES.MESSAGE,r.LiveLocationMessageSpec],quotedPaymentInfo:[31,i.TYPES.MESSAGE,h],ephemeralStartTimestamp:[32,i.TYPES.UINT64],ephemeralDuration:[33,i.TYPES.UINT32],ephemeralOffToOn:[34,i.TYPES.BOOL],ephemeralOutOfSync:[35,i.TYPES.BOOL],bizPrivacyStatus:[36,i.TYPES.ENUM,o],verifiedBizName:[37,i.TYPES.STRING],mediaData:[38,i.TYPES.MESSAGE,g],photoChange:[39,i.TYPES.MESSAGE,y],userReceipt:[40,i.FLAGS.REPEATED|i.TYPES.MESSAGE,E]},h.internalSpec={currencyDeprecated:[1,i.TYPES.ENUM,d],amount1000:[2,i.TYPES.UINT64],receiverJid:[3,i.TYPES.STRING],status:[4,i.TYPES.ENUM,c],transactionTimestamp:[5,i.TYPES.UINT64],requestMessageKey:[6,i.TYPES.MESSAGE,a.MessageKeySpec],expiryTimestamp:[7,i.TYPES.UINT64],futureproofed:[8,i.TYPES.BOOL],currency:[9,i.TYPES.STRING],txnStatus:[10,i.TYPES.ENUM,l],useNoviFiatFormat:[11,i.TYPES.BOOL],primaryAmount:[12,i.TYPES.MESSAGE,r.MoneySpec],exchangeAmount:[13,i.TYPES.MESSAGE,r.MoneySpec]},_.internalSpec={timestamp:[2,i.TYPES.UINT64],unreadChats:[3,i.TYPES.UINT32],notifyMessageCount:[4,i.TYPES.UINT32],notifyMessages:[5,i.FLAGS.REPEATED|i.TYPES.MESSAGE,p]},v.internalSpec={key:[1,i.TYPES.MESSAGE,a.MessageKeySpec],message:[2,i.TYPES.MESSAGE,r.MessageSpec],messageTimestamp:[3,i.TYPES.UINT64],participant:[4,i.TYPES.STRING]},m.internalSpec={labelsDisplay:[1,i.TYPES.ENUM,f],voipIndividualOutgoing:[2,i.TYPES.ENUM,f],groupsV3:[3,i.TYPES.ENUM,f],groupsV3Create:[4,i.TYPES.ENUM,f],changeNumberV2:[5,i.TYPES.ENUM,f],queryStatusV3Thumbnail:[6,i.TYPES.ENUM,f],liveLocations:[7,i.TYPES.ENUM,f],queryVname:[8,i.TYPES.ENUM,f],voipIndividualIncoming:[9,i.TYPES.ENUM,f],quickRepliesQuery:[10,i.TYPES.ENUM,f],payments:[11,i.TYPES.ENUM,f],stickerPackQuery:[12,i.TYPES.ENUM,f],liveLocationsFinal:[13,i.TYPES.ENUM,f],labelsEdit:[14,i.TYPES.ENUM,f],mediaUpload:[15,i.TYPES.ENUM,f],mediaUploadRichQuickReplies:[18,i.TYPES.ENUM,f],vnameV2:[19,i.TYPES.ENUM,f],videoPlaybackUrl:[20,i.TYPES.ENUM,f],statusRanking:[21,i.TYPES.ENUM,f],voipIndividualVideo:[22,i.TYPES.ENUM,f],thirdPartyStickers:[23,i.TYPES.ENUM,f],frequentlyForwardedSetting:[24,i.TYPES.ENUM,f],groupsV4JoinPermission:[25,i.TYPES.ENUM,f],recentStickers:[26,i.TYPES.ENUM,f],catalog:[27,i.TYPES.ENUM,f],starredStickers:[28,i.TYPES.ENUM,f],voipGroupCall:[29,i.TYPES.ENUM,f],templateMessage:[30,i.TYPES.ENUM,f],templateMessageInteractivity:[31,i.TYPES.ENUM,f],ephemeralMessages:[32,i.TYPES.ENUM,f],e2ENotificationSync:[33,i.TYPES.ENUM,f],recentStickersV2:[34,i.TYPES.ENUM,f],recentStickersV3:[36,i.TYPES.ENUM,f],userNotice:[37,i.TYPES.ENUM,f],support:[39,i.TYPES.ENUM,f],groupUiiCleanup:[40,i.TYPES.ENUM,f],groupDogfoodingInternalOnly:[41,i.TYPES.ENUM,f],settingsSync:[42,i.TYPES.ENUM,f],archiveV2:[43,i.TYPES.ENUM,f],ephemeralAllowGroupMembers:[44,i.TYPES.ENUM,f],ephemeral24HDuration:[45,i.TYPES.ENUM,f],mdForceUpgrade:[46,i.TYPES.ENUM,f],disappearingMode:[47,i.TYPES.ENUM,f]},g.internalSpec={localPath:[1,i.TYPES.STRING]},y.internalSpec={oldPhoto:[1,i.TYPES.BYTES],newPhoto:[2,i.TYPES.BYTES],newPhotoId:[3,i.TYPES.UINT32]},E.internalSpec={userJid:[1,i.FLAGS.REQUIRED|i.TYPES.STRING],receiptTimestamp:[2,i.TYPES.INT64],readTimestamp:[3,i.TYPES.INT64],playedTimestamp:[4,i.TYPES.INT64],pendingDeviceJid:[5,i.FLAGS.REPEATED|i.TYPES.STRING],deliveredDeviceJid:[6,i.FLAGS.REPEATED|i.TYPES.STRING]}},73598:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(5693)).default.require("sysInfo"),s=new(function(){function e(){var t=this;(0,a.default)(this,e),o.getInfoAsync().then((function(e){__LOG__(2)`sys_info:init with data: platform: ${e.osPlatform} arch: ${e.arch} os_release: ${e.osRelease}`,t._arch=e.arch,t._osRelease=e.osRelease,t._osPlatform=e.osPlatform,t._deviceManufacturer=e.deviceManufacturer,t._deviceModel=e.deviceModel,t._isDataReady=!0}))}return(0,i.default)(e,[{key:"isDataReady",value:function(){return this._isDataReady}},{key:"getArch",value:function(){return this._arch}},{key:"getOSPlatform",value:function(){return this._osPlatform}},{key:"getOSRelease",value:function(){return this._osRelease}},{key:"getDeviceModel",value:function(){return this._deviceModel}},{key:"getDeviceManufacturer",value:function(){return this._deviceManufacturer}}]),e}());t.default=s},71701:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setMe=function(e){var t=n(22021).default;t.supportsFeature(t.F.MD_BACKEND)?f._set(l.default.KEY_LAST_WID_MD,e):f._set(l.default.KEY_LAST_WID,e)},t.getMe=E,t.assertGetMe=S,t.assertGetMeUser=function(){return(0,o.default)(b(),"meUser")},t.getMeUser=b,t.getMaybeMeUser=function(){var e=E();return e?(0,_.toUserWid)(e):void 0},t.setPushname=function(e){f._setUser(l.default.KEY_LAST_PUSHNAME,e)},t.getPushname=function(){return f._getUser(l.default.KEY_LAST_PUSHNAME)},t.getLoginTokens=T,t.setLoginTokens=function(e){var t=e.client,n=e.server;t&&n&&!u.default.isUndefined(t)&&(__LOG__(2)`UserPrefs:setLoginTokens`,f._set(l.default.KEY_CLIENT_TOKEN,t),f._set(l.default.KEY_SERVER_TOKEN,n))},t.knowsPhone=function(){var e=T();return!(!e.client||!e.server)},t.setRefTok=function(e,t){w(),f.setRefTokCookies(e,t)},t.clearDeprecatedKeys=w,t.mdOptedIn=function(){return f._get(l.default.KEY_MD_OPTED_IN,c.default.permanentStorage)},t.setMdOptedIn=function(e){f._set(l.default.KEY_MD_OPTED_IN,e,c.default.permanentStorage)},t.getSecretBundle=function(){var e=f._get(l.default.KEY_SECRET_BUNDLE);if(!e)return __LOG__(3)`UserPrefs:Attempted to load non-existent secret bundle!`,null;"string"==typeof e&&(e=JSON.parse(e));return u.default.mapValues(e,i.decodeB64)},t.setSecretBundle=function(e){return f._set(l.default.KEY_SECRET_BUNDLE,u.default.mapValues(e,i.encodeB64))},t.clearTokens=function(){v.forEach((function(e){f._set(e,void 0)}))},t.shouldShowNUX=function(e){var t=A(e);return!t||t.views<t.maxViews},t.viewNUX=function(e){var t=A(e);if(!t)throw new Error("UserPrefs:viewNUX key "+e+" does not exist");C(e,{views:t.views+1,maxViews:t.maxViews})},t.getNUX=A,t.setNUX=C,t.removeNUX=function(e){f._setUser(e)},t.getUnknownId=function(){var e=f._get(l.default.KEY_UNKNOWN_ID);e||O(e="unknown"+Math.floor(1e10*Math.random()));return e},t.setUnknownId=O,t.getBrowserId=function(){return f._get(l.default.KEY_BROWSER_ID)},t.setBrowserId=function(e){f._set(l.default.KEY_BROWSER_ID,e)},t.getLastMobilePlatform=function(){return f._get(l.default.KEY_MOBILE_PLATFORM)},t.setLastMobilePlatform=function(e){f._set(l.default.KEY_MOBILE_PLATFORM,e)},t.setLastChatMuteDuration=function(e){f._setUser(l.default.KEY_LAST_CHAT_MUTE_DURATION,e)},t.getLastChatMuteDuration=function(){return f._getUser(l.default.KEY_LAST_CHAT_MUTE_DURATION)},t.setTheme=function(e){f._set(l.default.KEY_THEME,e)},t.getTheme=function(){return f._get(l.default.KEY_THEME)},t.setSystemThemeMode=function(e){f._set(l.default.KEY_SYSTEM_THEME_MODE,e)},t.getSystemThemeMode=function(){return f._get(l.default.KEY_SYSTEM_THEME_MODE)},t.setLastComposeBoxPanel=function(e){f._setUser(l.default.KEY_LAST_SELECTED_COMPOSE_BOX_PANEL,e)},t.getLastComposeBoxPanel=function(){return f._getUser(l.default.KEY_LAST_SELECTED_COMPOSE_BOX_PANEL)},t.setSeenGroupDesc=function(e){f._setUser(e.toString(),!0)},t.getSeenGroupDesc=function(e){return f._getUser(e.toString())},t.getGlobalSounds=function(){return!f._getUser(l.default.KEY_GLOBAL_MUTE_SOUNDS)},t.setGlobalSounds=function(e){f._setUser(l.default.KEY_GLOBAL_MUTE_SOUNDS,!e)},t.getGlobalNotifications=function(){return!f._getUser(l.default.KEY_GLOBAL_MUTE_NOTIFICATIONS)},t.setGlobalNotifications=function(e){f._setUser(l.default.KEY_GLOBAL_MUTE_NOTIFICATIONS,!e)},t.getGlobalSecurityNotifications=function(){var e;return null===(e=!f._getUser(l.default.KEY_SECURITY_NOTIFICATIONS))||void 0===e||e},t.setGlobalSecurityNotifications=function(e){f._setUser(l.default.KEY_SECURITY_NOTIFICATIONS,!e)},t.getUserPrivacySettings=function(){return f._getUser(l.default.KEY_USER_PRIVACY_SETTINGS)},t.setUserPrivacySettings=function(e){f._setUser(l.default.KEY_USER_PRIVACY_SETTINGS,e)},t.getGlobalPreviews=function(){return!f._getUser(l.default.KEY_GLOBAL_MUTE_PREVIEWS)},t.setGlobalPreviews=function(e){f._setUser(l.default.KEY_GLOBAL_MUTE_PREVIEWS,!e)},t.getCollapseMuted=function(){return f._getUser(l.default.KEY_GLOBAL_COLLAPSE_MUTED)},t.setCollapseMuted=function(e){f._setUser(l.default.KEY_GLOBAL_COLLAPSE_MUTED,e)},t.getAutoDownloadPhotos=function(){var e;return null!==(e=f._getUser(l.default.KEY_AUTO_DOWNLOAD_PHOTOS))&&void 0!==e&&e},t.setAutoDownloadPhotos=function(e){f._setUser(l.default.KEY_AUTO_DOWNLOAD_PHOTOS,e)},t.getAutoDownloadAudio=function(){var e;return null===(e=f._getUser(l.default.KEY_AUTO_DOWNLOAD_AUDIO))||void 0===e||e},t.setAutoDownloadAudio=function(e){f._setUser(l.default.KEY_AUTO_DOWNLOAD_AUDIO,e)},t.getAutoDownloadVideos=function(){var e;return null!==(e=f._getUser(l.default.KEY_AUTO_DOWNLOAD_VIDEOS))&&void 0!==e&&e},t.setAutoDownloadVideos=function(e){f._setUser(l.default.KEY_AUTO_DOWNLOAD_VIDEOS,e)},t.getAutoDownloadDocuments=function(){var e;return null!==(e=f._getUser(l.default.KEY_AUTO_DOWNLOAD_DOCUMENTS))&&void 0!==e&&e},t.setAutoDownloadDocuments=function(e){f._setUser(l.default.KEY_AUTO_DOWNLOAD_DOCUMENTS,e)},t.getGeocoderLocation=function(){return f._getUser(l.default.KEY_GEOCODER_LOCATION)},t.setGeocoderLocation=function(e){f._setUser(l.default.KEY_GEOCODER_LOCATION,e)},t.getMapsOverQuota=function(){return f._get(l.default.KEY_GMAPS_OVER_LIMIT)},t.setMapsOverQuota=function(e){f._set(l.default.KEY_GMAPS_OVER_LIMIT,e)},t.setSmbLabelPalette=function(e){f._set(l.default.KEY_SMB_LABEL_COLOR_PALETTE,e)},t.getSmbLabelPalette=function(){return f._getUser(l.default.KEY_SMB_LABEL_COLOR_PALETTE)},t.getGroupParticipantAssignedColor=function(e){return f._getUser(l.default.KEY_GROUP_ASSIGNED_COLOR+"-"+e.toString())},t.setGroupParticipantAssignedColor=function(e,t){f._setUser(l.default.KEY_GROUP_ASSIGNED_COLOR+"-"+e.toString(),t)},t.getMutex=function(){return f._getPSIgnoringCache(l.default.KEY_WHATSAPP_MUTEX)},t.setMutex=function(e){var t=e?g+":"+e:e;f._setPS(l.default.KEY_WHATSAPP_MUTEX,t)},t.removeMutex=function(){f._setPS(l.default.KEY_WHATSAPP_MUTEX)},t.parseMutex=function(e){var t=e?JSON.parse(e):"";return t?t.toString().split(/:/).pop():t},t.mutexFilter=function(e){if(e.key!==l.default.KEY_WHATSAPP_MUTEX)return!1;return!(e.newValue||"").includes(g)},t.localTakeoverSuccess=function(){var e=f.getRememberMe()?{}:u.default.omit(f._getAllKeyValues(),p.LS_ONLY_KEYS);e.wa_tab_src=g,(0,o.default)(d.default,"localStorage").setItem(l.default.KEY_LOCAL_TAKEOVER_OK,JSON.stringify(e)),(0,o.default)(d.default,"localStorage").removeItem(l.default.KEY_LOCAL_TAKEOVER_OK)},t.parseTakeover=function(e){var t=e?JSON.parse(e):{};return u.default.isObject(t)?(delete t.wa_tab_src,t):{}},t.takeoverFilter=function(e){if(e.key!==l.default.KEY_LOCAL_TAKEOVER_OK)return!1;return!(e.newValue||"").includes(g)},t.getLangPref=function(){return f._get(l.default.KEY_LANG)},t.setLangPref=function(e){f._set(l.default.KEY_LANG,e)},t.getLogoutToken=function(){return f._getPS(l.default.KEY_LOGOUT_TOKEN)},t.setLogoutToken=function(e){f._setPS(l.default.KEY_LOGOUT_TOKEN,e)},t.getOldLogoutCreds=function(){return f._getPS(l.default.KEY_OLD_LOGOUT_CREDS)||[]},t.setOldLogoutCreds=function(e){f._setPS(l.default.KEY_OLD_LOGOUT_CREDS,e)},t.setNoTakeover=function(e){f._setTS(l.default.KEY_NO_TAKEOVER,e)},t.getNoTakeover=function(){return f._getTS(l.default.KEY_NO_TAKEOVER)},t.getWamBuffer=function(){return f._get(l.default.KEY_WAM_BUFFER,void 0,!0)},t.setWamBuffer=function(e){f._set(l.default.KEY_WAM_BUFFER,e,void 0,!0)},t.getWamInfo=function(){return f._get(l.default.KEY_WAM_INFO)},t.setWamInfo=function(e){f._set(l.default.KEY_WAM_INFO,e)},t.setVideoVolumeSettings=function(e,t){M(e),I(t)},t.setVideoVolumeSetting=M,t.setVideoMutedSetting=I,t.getVideoVolumeSettings=function(){return{volume:f._get(l.default.KEY_VIDEO_VOLUME),muted:!!f._get(l.default.KEY_VIDEO_MUTE)}},t.setComposeContents=function(e,t){f._setUserSession(k(e),t)},t.getComposeContents=function(e){return f._getUserSession(k(e))},t.deleteComposeContents=function(e){f._clearUserSessionItem(k(e))},t.setVersion=function(e){null!=e&&f._set(l.default.KEY_PROTO_VERSION,e)},t.getVersion=function(){return f._get(l.default.KEY_PROTO_VERSION)},t.setContactChecksum=function(e){f._setUser(l.default.KEY_CONTACT_CHECKSUM,e)},t.getContactChecksum=function(){return f._getUser(l.default.KEY_CONTACT_CHECKSUM)},t.getNoticeBannerClosedAt=function(){return f._getUser(l.default.KEY_NOTICE_BANNER_CLOSED_AT)},t.setNoticeBannerClosedAt=function(e){f._setUser(l.default.KEY_NOTICE_BANNER_CLOSED_AT,e)},t.getNoticeId=function(){return f._getUser(l.default.KEY_NOTICE_ID)},t.setNoticeId=function(e){f._setUser(l.default.KEY_NOTICE_ID,e)},t.getPttPlaybackRate=function(){var e;return null!==(e=f._get(l.default.KEY_PTT_PLAYBACK_RATE))&&void 0!==e?e:1},t.setPttPlaybackRate=function(e){f._set(l.default.KEY_PTT_PLAYBACK_RATE,e)},t.getLastStatusUsage=function(){return f._getUser(l.default.LAST_STATUS_USAGE)},t.setLastStatusUsage=function(){f._setUser(l.default.LAST_STATUS_USAGE,Date.now())},t.getOutgoingMessageSound=function(){return f._getUser(l.default.KEY_OUTGOING_MESSAGE_SOUND)},t.setOutgoingMessageSound=function(e){f._setUser(l.default.KEY_OUTGOING_MESSAGE_SOUND,e)},t.getHistorySyncEarliestDate=function(){var e=f._get(l.default.KEY_HISTORY_SYNC_EARLIEST_DATE);if(!e)return P((0,s.unixTime)());return e},t.setHistorySyncEarliestDate=P,t.setShouldPreemptivelyCleanupLogs=function(e){f._set(l.default.KEY_LOG_PREEMPT_CLEAN_UP,e)},t.getShouldPreemptivelyCleanupLogs=function(){return!1!==f._get(l.default.KEY_LOG_PREEMPT_CLEAN_UP)},Object.defineProperty(t,"getRememberMe",{enumerable:!0,get:function(){return f.getRememberMe}}),Object.defineProperty(t,"setRememberMe",{enumerable:!0,get:function(){return f.setRememberMe}}),Object.defineProperty(t,"clearAllLocalState",{enumerable:!0,get:function(){return f.clearAllLocalState}}),Object.defineProperty(t,"clearAllTemporaryStorageData",{enumerable:!0,get:function(){return f.clearAllTemporaryStorageData}}),Object.defineProperty(t,"_setAllKeyValues",{enumerable:!0,get:function(){return f._setAllKeyValues}}),Object.defineProperty(t,"getCollection",{enumerable:!0,get:function(){return f.getCollection}}),Object.defineProperty(t,"setCollection",{enumerable:!0,get:function(){return f.setCollection}}),Object.defineProperty(t,"updatePreservedUserKeys",{enumerable:!0,get:function(){return f.updatePreservedUserKeys}}),t.thisTabId=void 0;var i=n(92827),o=a(n(91080)),s=n(90066),u=a(n(96486)),l=a(n(34263)),c=a(n(63984)),d=a(n(2977)),f=r(n(81416)),p=n(86206),h=a(n(12717)),_=n(75793),v=[l.default.KEY_LOGOUT_TOKEN,l.default.KEY_CLIENT_TOKEN,l.default.KEY_SERVER_TOKEN,l.default.KEY_SECRET_BUNDLE],m=[l.default.KEY_VERSION],g="x"+Math.round(1e9*Math.random()),y=g;function E(){var e=n(22021).default,t=null;return(t=e.supportsFeature(e.F.MD_BACKEND)?f._get(l.default.KEY_LAST_WID_MD):f._get(l.default.KEY_LAST_WID))&&h.default.isWid(t)?(0,_.createWid)(t):t}function S(){return(0,o.default)(E(),"me")}function b(){return(0,_.toUserWid)(S())}function T(){return{client:f._get(l.default.KEY_CLIENT_TOKEN),server:f._get(l.default.KEY_SERVER_TOKEN)}}function w(){m.forEach((function(e){c.default.permanentStorage.removeItem(e)}))}function A(e){return f._getUser(e)}function C(e,t){f._setUser(e,t)}function O(e){return f._set(l.default.KEY_UNKNOWN_ID,e)}function M(e){f._set(l.default.KEY_VIDEO_VOLUME,e)}function I(e){f._set(l.default.KEY_VIDEO_MUTE,e)}function k(e){return`${l.default.KEY_COMPOSE_CONTENTS_PREFIX}${e.toString()}`}function P(e){var t=e-2*s.YEAR_SECONDS;return f._set(l.default.KEY_HISTORY_SYNC_EARLIEST_DATE,t),t}t.thisTabId=y},48466:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.getContactChecksum=function(){return a._getUser(i)},t.setContactChecksum=function(e){a._setUser(i,e)},t.getFrequentContacts=function(){return a._getUser(o)},t.setFrequentContacts=function(e){a._setUser(o,e)},t.setGKFeatures=function(e){a._setUser(s,e)},t.getGKFeatures=function(){return a._getUser(s)},t.setGKProto=function(e){a._setUser(u,e)},t.getGKProto=function(){return a._getUser(u)},t.setHistoryInitialSyncBoundry=function(e){a._setUser(l,JSON.stringify(e))},t.getHistoryInitialSyncBoundry=function(){var e=a._getUser(l);try{return JSON.parse(e)}catch(e){return null}},t.setInitialGroupPhash=function(e){a._setUser(c,JSON.stringify(e))},t.getInitialGroupPhash=function(e){var t=a._getUser(c);try{return JSON.parse(t)[e]}catch(e){return null}};var a=r(n(81416)),i="contact_checksum",o="frequent_contacts",s="gk_features",u="gk_proto",l="history_initial_sync_boundry",c="initial_group_phash"},79583:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearRegistrationInfo=function(){var e=[p,_,v,m,g,w];f.default.supportsFeature(f.default.F.MD_BACKEND)?e.push(u.default.KEY_LAST_WID_MD):e.push(u.default.KEY_LAST_WID);e.map((function(e){c._set(e,void 0)}))},t.setNoiseInfo=function(e){var t={recoveryToken:e.recoveryToken,pubKey:e.staticKeyPair.pubKey,privKey:e.staticKeyPair.privKey};return c._set(p,s.default.mapValues(t,o.encodeB64),void 0,void 0,!1)},t.getNoiseInfo=O,t.setNoiseInfoIv=function(e){c._set(h,e,void 0,void 0,!1)},t.getNoiseInfoIv=function(){return c._get(h)},t.setLastHistorySycnedChunk=function(e,t){if(null==e||null==t)return;c._set(C,`${e}_${t}`)},t.getLastHistorySycnedChunk=function(){return c._get(C)},t.setRoutingInfo=function(e){var t=e.domain,n=e.edgeRouting,r={domain:t,edgeRouting:n?(0,o.encodeB64)(n):null};return c._set(m,r,l.default.permanentStorage)},t.getRoutingInfo=function(){var e=c._get(m,l.default.permanentStorage);if(e){var t=e,n=t.domain,r=t.edgeRouting;return{domain:n,edgeRouting:r?(0,o.decodeB64)(r):null}}return null},t.setMdInternVersion=function(){},t.getMdInternVersion=function(){return},t.isRegistered=function(){return!(!O()||!d.getMe())},t.setInitialHistorySyncComplete=function(){return c._set(g,"true")},t.getInitialHistorySyncComplete=function(){return!!c._get(g,l.default.permanentStorage)},t.setWebEncSalt=function(e){return c._set(w,e,void 0,void 0,!1)},t.getWebEncSalt=function(){return c._get(w,l.default.permanentStorage)},t.setHistorySyncStatus=function(e){var t,n=null!==(t=M())&&void 0!==t?t:{};c._set(E,(0,i.default)((0,i.default)({},n),e))},t.getHistorySyncStatus=M,t.setAllCriticalDataSynced=function(){return c._set(y,!0)},t.getAllCriticalDataSynced=function(){return!!c._get(y,l.default.permanentStorage)},t.setADVSecretKey=function(e){return c._set(S,e)},t.getADVSecretKey=function(){return c._get(S)},t.setBlocklistHash=function(e){return c._set(b,e)},t.getBlocklistHash=function(){return c._get(b)},t.setUpgradeMdWamFlag=function(e){return c._set(A,e)},t.getUpgradeMdWamFlag=function(){return!!c._get(A)},t.addDebugContact=function(){},t.getDebugContact=function(){},t.setDebugReadReceipt=function(){},t.getDebugReadReceipt=function(){},t.setDebugPassiveMode=function(){},t.getDebugPassiveMode=function(){},t.setDebugEnableOfflineMock=function(){},t.getDebugEnableOfflineMock=function(){return!1},t.setDebugStanzaFilter=function(){},t.getDebugStanzaFilter=function(){},t.setDebugDecryptFail=function(){},t.getDebugDecryptFail=function(){},t.setDebugRoutingToken=function(){},t.getDebugRoutingToken=function(){},t.setDebugShownMsgs=function(){},t.setDebugDisableHistorySyncTimeout=function(){},t.getDebugDisableHistorySyncTimeout=function(){return!1},t.getDebugShownMsgs=function(){return{}},t.setShouldCheckContactSyncStatus=function(){return c._set(T,!0)},t.getShouldCheckContactSyncStatus=function(){return!!c._get(T)};a(n(43269));var i=a(n(81109)),o=n(92827),s=a(n(96486)),u=a(n(34263)),l=a(n(63984)),c=r(n(81416)),d=r(n(71701)),f=a(n(22021)),p=(n(74327),"WANoiseInfo"),h="WANoiseInfoIv",_="WAMeInfo",v="WADeviceId",m="WARoutingInfo",g="WaInitialHistorySynced",y="critical_data_synced",E="WAHistorySyncStatus",S="WaADVSecretKey",b="WABlocklistHash",T="WAShouldCheckContactSyncStatus",w="WebEncKeySalt",A="MdUpgradeWamFlag",C="MdHistoryLastChunkProcessed";function O(){var e=c._get(p);if(!e)return null;var t=s.default.mapValues(e,o.decodeB64);return{recoveryToken:t.recoveryToken,staticKeyPair:{pubKey:t.pubKey,privKey:t.privKey}}}function M(){return c._get(E)}},81416:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setRefTokCookies=function(e,t){if(void 0===self.document)return;d.setCookie({name:c.default.COOKIE_REF,value:e,path:c.default.PP_REF,domain:c.default.COOKIE_DOMAIN,secure:!0});var n={name:c.default.COOKIE_TOK,value:t,path:c.default.PP_TOK,domain:c.default.COOKIE_DOMAIN,secure:!0};d.setCookie(n)},t._getKeys=g,t._setKeys=y,t._getAllKeyValues=function(){var e=M();return l.default.fromPairs(Object.keys(e).map((function(t){return[t,e.getItem(t)]})))},t._setAllKeyValues=function(e){var t=M();Object.keys(e).forEach((function(n){null!=e[n]&&t.setItem(n,e[n])}))},t.updatePreservedUserKeys=function(){var e,t=A(),n=null!==(e=b(c.default.KEY_PRESERVED_USER_KEYS))&&void 0!==e?e:[];if(null!=t){var r=v.LS_PRESERVE_USER_KEYS.map((function(e){return(0,_.default)(P(t.toString(),e))}));T(c.default.KEY_PRESERVED_USER_KEYS,l.default.union(n,r))}},t.clearAllLocalState=function(){return S.apply(this,arguments)},t.clearAllTemporaryStorageData=function(){f.default.temporaryStorage.clear()},t._getPS=b,t._getPSIgnoringCache=function(e){return I(e,f.default.permanentStorage,!1,!0)},t._setPS=T,t._getTS=function(e){return I(e,f.default.temporaryStorage)},t._setTS=function(e,t){k(e,t,f.default.temporaryStorage)},t._setUserSession=function(e,t){var n=A();if(!n)return void __LOG__(3)`userPrefs: Me has not loaded yet.`;k((0,_.default)(P(n.toString(),e)),t,f.default.temporaryStorage)},t._getUserSession=function(e){var t=A();if(!t)return __LOG__(3)`userPrefs: Me has not loaded yet.`,null;return I((0,_.default)(P(t.toString(),e)),f.default.temporaryStorage)},t._clearUserSessionItem=function(e){var t=A();if(!t)return void __LOG__(3)`userPrefs: Me has not loaded yet.`;var n=(0,_.default)(P(t.toString(),e));f.default.temporaryStorage.removeItem(n)},t.getRememberMe=w,t.setRememberMe=function(e){var t=!!e;if(t===w())return;__LOG__(2)`UserPrefs:setRememberMe: ${String(t)}`;var n=M();T(c.default.KEY_REMEMBER_ME,t);var r=M();if(n!==r){l.default.difference(Object.keys(n.dataStore),v.LS_ONLY_KEYS.concat(v.LS_PRESERVE_KEYS)).forEach((function(e){var t=n.getItem(e);null!=t&&(r.setItem(e,t),n.removeItem(e))}))}t||h.default.clearLogs()},t.getCollection=function(e){return C(e)},t.setCollection=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null==A()||n||O(e,t)},t._getMe=A,t._getUser=C,t._setUser=O,t._storage=M,t._get=I,t._set=k;var o=i(n(87757)),s=i(n(48926)),u=i(n(319)),l=i(n(96486)),c=i(n(34263)),d=a(n(44040)),f=a(n(63984)),p=i(n(37417)),h=i(n(43906)),_=i(n(65122)),v=n(86206);function m(){void 0!==self.document&&(d.setCookie({name:c.default.COOKIE_REF,expirationDate:0,domain:c.default.COOKIE_DOMAIN,path:c.default.PP_REF}),d.setCookie({name:c.default.COOKIE_TOK,expirationDate:0,domain:c.default.COOKIE_DOMAIN,path:c.default.PP_TOK}))}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l.default.zipObject(t,t.map((function(t){return e.getItem(t,n)})))}function y(e,t){l.default.forOwn(t,(function(t,n){e.setItem(n,t)}))}function E(){var e,t=null!==(e=b(c.default.KEY_PRESERVED_USER_KEYS))&&void 0!==e?e:[],n=[].concat((0,u.default)(v.LS_PRESERVE_KEYS),(0,u.default)(t));return g(f.default.permanentStorage,n,!0)}function S(){return(S=(0,s.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E(),(n=[f.default.temporaryStorage.clear(),f.default.permanentStorage.clear(t)]).push(h.default.clearLogs()),m(),e.next=6,r.all(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return I(e,f.default.permanentStorage)}function T(e,t){k(e,t,f.default.permanentStorage)}function w(){var e=b(c.default.KEY_REMEMBER_ME),t=n(22021).default;return t.supportsFeature(t.F.MD_BACKEND)&&!1===e&&(e=!0,T(c.default.KEY_REMEMBER_ME,!0)),null===e&&(e=!0,T(c.default.KEY_REMEMBER_ME,!0)),!!e}function A(){return n(71701).getMaybeMeUser()}function C(e){var t=A();return t?I((0,_.default)(P(t.toString(),e))):(__LOG__(3)`userPrefs: Me has not loaded yet.`,null)}function O(e,t){var n=A();n?k((0,_.default)(P(n.toString(),e)),t):__LOG__(3)`userPrefs: Me has not loaded yet.`}function M(){return w()?f.default.permanentStorage:f.default.temporaryStorage}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M(),r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==e)throw new Error("_get called with no key");var i=t.getItem(e,a);if(r||null==i)return i;try{return JSON.parse(i,p.default)}catch(r){__LOG__(2)`userPrefs:_get(${e}) '${r}' ${i}`;var o=n(70371);return o.upload({reason:"userprefs-parse-error"}),void t.removeItem(e)}}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M(),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new Error("_set called with no key");if(null==t)n.removeItem(e);else if(r){if("string"!=typeof t)throw new Error("_set: expecting string because isRawString is true");n.setItem(e,t)}else n.setItem(e,JSON.stringify(t),a)}function P(e,t){return[e,t].join(":")}},86206:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LS_PRESERVE_USER_KEYS=t.LS_PRESERVE_KEYS=t.LS_ONLY_KEYS=void 0;var a=r(n(34263)),i=[a.default.KEY_LOG_CURSOR,a.default.KEY_WHATSAPP_MUTEX,a.default.KEY_REMEMBER_ME,a.default.KEY_WHATSAPP_LS_VERSION];t.LS_ONLY_KEYS=i;var o=[a.default.KEY_WHATSAPP_MUTEX,a.default.KEY_REMEMBER_ME,a.default.KEY_OLD_LOGOUT_CREDS,a.default.KEY_MD_OPTED_IN,a.default.KEY_PRESERVED_USER_KEYS,a.default.KEY_THEME,a.default.KEY_SYSTEM_THEME_MODE];t.LS_PRESERVE_KEYS=o;var s=[a.default.KEY_EMOJI_VARIANT_COLLECTION,a.default.KEY_RECENT_EMOJI_COLLECTION,a.default.KEY_CHAT_PREFERENCE_COLLECTION,a.default.KEY_GLOBAL_MUTE_NOTIFICATIONS,a.default.KEY_OUTGOING_MESSAGE_SOUND,a.default.KEY_GLOBAL_MUTE_PREVIEWS,a.default.KEY_GLOBAL_COLLAPSE_MUTED,a.default.KEY_GLOBAL_MUTE_SOUNDS];t.LS_PRESERVE_USER_KEYS=s},43968:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=!1;return new r((function(t){var n=new l.ShiftTimer((function(){var r;o.isDataReady()?("darwin"===process.platform?(r=o.getOSRelease(),e=(0,u.gteVersion)(r,s.default.webVoipMacOsMinVersion||i.VOIP_MAC_MINIMUM_OS_RELEASE_VERSION)):e="win32"===process.platform&&function(e){return(0,u.gteVersion)(e,s.default.webVoipWindowsOsMinVersion||i.VOIP_WIN_MINIMUM_OS_RELEASE_VERSION)&&"x64"===o.getArch()}(o.getOSRelease()),t(e)):n.onOrAfter(i.WAM_SYS_INFO_INIT_DELAY)}));n.forceRunNow()}))};var i,o,s=a(n(63056)),u=n(73358),l=n(12035);i=n(34263).default,o=n(73598).default},78919:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.checkVoipCapability=function(){return r.resolve(!0)},t.default=void 0;var o,s,u,l,c,d=i(n(81109)),f=i(n(87757)),p=i(n(48926)),h=n(19087),_=i(n(91080)),v=i(n(96486)),m=i(n(79075)),g=i(n(68950)),y=i(n(79140)),E=i(n(34263)),S=n(71701),b=a(n(22021)),T=i(n(67148)),w=i(n(5693)),A=n(74996),C=i(n(8643)),O=n(82500),M=a(n(75554)),I=i(n(63056)),k=n(12626),P=i(n(63805)),R=i(n(78854)),D=n(42183),N=a(n(66279)),L=n(65666),x=i(n(15340)),U=n(14423),F=i(n(12717)),G=n(75793),B=n(17259),j=n(69017),Y=n(28734),K=i(n(31676)),W=n(19325),V=(E.default.VOIP_LOG_COLOR,window.Native.ipcRenderer),H=new h.PromiseQueue,$=!1,z=null,q=null,J=null,Q={init:function(){return H.enqueue((0,p.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X();case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),__LOG__(4,void 0,new Error,!0)`voip:init failed with: ${e.t0}`,SEND_LOGS("voip-lazy-init-error"),Q.cleanup(),$=!1;case 10:return e.abrupt("return",$);case 11:case"end":return e.stop()}}),e,null,[[0,5]])}))))},isInitialized:function(){return $},handleIncomingSignalingMessage:(c=(0,p.default)(f.default.mark((function e(t,n){var r,a,i,s,u,l,c,d,p,h,_,v,m;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=3;break}return __LOG__(3)`voip:handleIncomingSignalingMsg:called before init`,e.abrupt("return");case 3:if((u=N.TYPE_NAME[t.type])&&__LOG__(2)`voip:handleIncomingSignalingMsg: type: "${u}" msg: `,null!=(l=g.default.get(t.call_id))||t.type===N.TYPE.TERMINATE){e.next=10;break}__LOG__(2)`voip:handleIncomingSignalingMsg: Received signaling message before offer`,e.next=54;break;case 10:if(!l||l.canHandleLocally){e.next=15;break}return(0,k.handleIncomingSignalingMessage)(t,n),e.abrupt("return");case 15:e.t0=t.type,e.next=e.t0===N.TYPE.OFFER?18:e.t0===N.TYPE.OFFER_RECEIPT?24:e.t0===N.TYPE.ACCEPT_RECEIPT?26:e.t0===N.TYPE.ACCEPT?29:e.t0===N.TYPE.TERMINATE?31:e.t0===N.TYPE.ENC_REKEY?51:54;break;case 18:return l&&l.isVideo&&(0,A.prepareForCameraAccessCheck)(),c=!t.isContact,null===(r=o)||void 0===r||r.handleIncomingSignalingOffer(n,c,5),se(t.call_id),e.abrupt("return");case 24:return null===(a=o)||void 0===a||a.handleIncomingSignalingReceipt(n),e.abrupt("return");case 26:return null===(i=o)||void 0===i||i.handleIncomingSignalingReceipt(n),ue(t.call_id,!1),e.abrupt("return");case 29:return ue(t.call_id,!0),e.abrupt("break",54);case 31:if(!b.default.supportsFeature(b.default.F.MD_BACKEND)){e.next=33;break}return e.abrupt("break",54);case 33:if(!n.payload[2]||!n.payload[2][0]||"group_info"!==n.payload[2][0][0]){e.next=35;break}return e.abrupt("return");case 35:return d=(0,M.default)(),p=Array.from(n.payload),h=n.payload[1],p[1]={},p[1]["call-id"]=h["call-id"],p[1].to=t.common.peer_jid,h.video_duration&&(p[1].video_duration=h.video_duration),h.audio_duration&&(p[1].audio_duration=h.audio_duration),(_=[])[0]="ack",_[1]={type:"terminate",id:d},_[2]=[p],v={type:"ack",call_id:t.common.call_id,peer_jid:t.common.peer_jid},m={common:v,payload:_},(0,O.sendCallSignalingMsg)(m,d),e.abrupt("break",54);case 51:if(!b.default.supportsFeature(b.default.F.MD_BACKEND)){e.next=53;break}return e.abrupt("break",54);case 53:return e.abrupt("return");case 54:return e.next=56,null===(s=o)||void 0===s?void 0:s.handleIncomingSignalingMsg(n);case 56:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)}),cleanup:function(){$?(__LOG__(2)`voip:cleanup`,g.default.activeCall&&(this.endCall(),g.default.setActiveCall(null),__LOG__(2)`voip:call_collection: Active Call set to null due to cleanup:`),V.send(U.RENDERER_IPC_EVENTS.ENABLE_VOIP_FEATURES,!1),s&&"function"==typeof s.cleanup&&s.cleanup(),o&&"function"==typeof o.cleanup&&o.cleanup(),o=null,s=null,$=!1):__LOG__(2)`voip:cleanup skipped: voip not initialized`},cleanupVideoBuffer:function(){var e;__LOG__(2)`voip:cleanupVideoBuffer`,null===(e=o)||void 0===e||e.cleanupVideoBuffer()},refresh:function(){var e;__LOG__(2)`voip:refresh`,null===(e=o)||void 0===e||e.refresh()},callStart:function(e,t){__LOG__(2)`voip:callStart: ${e.toString()} video: ${t.toString()}`,te(t).then((function(n){n&&function(e,t){if(!$)return void __LOG__(3)`voip:callStart:called before init`;if(t){if(!P.default.isVideoCallEnabled())return void __LOG__(3)`voip:attempted to start video call but it is not enabled`}if(__LOG__(2)`voip:callStart: ${e.toString()}`,F.default.isUser(e)&&!e.equals((0,S.getMaybeMeUser)())){var n,r=(0,M.randomId)().substr(0,64);if(__LOG__(2)`voip:generateId: ${r}`,b.default.supportsFeature(b.default.F.MD_BACKEND))(0,B.getFanOutList)([e]).then((function(n){if(n.length>1){var a,i=n.map((function(e){return e.toString({legacy:!0,formatFull:!0})})),s=e.toString({legacy:!0});null===(a=o)||void 0===a||a.startMD(s,i,r,t)}else{var u;null===(u=o)||void 0===u||u.start(e.toString({legacy:!0}),r,t)}}));else null===(n=o)||void 0===n||n.start(e.toString({legacy:!0}),r,t);g.default.add({id:r,peerJid:e,offerTime:y.default.globalUnixTime(),isVideo:t,webClientShouldHandle:!0,outgoing:!0,canHandleLocally:!0}),g.default.assertGet(r).setState(U.CALL_STATES.OUTGOING_CALLING),se(r)}}(e,t)}))},groupCallStart:function(e,t){__LOG__(2)`voip:groupCallStart: ${e.join()} video: ${t.toString()}`,te(t).then((function(n){n&&function(e,t){if(!$)return void __LOG__(3)`voip:groupCallStart:called before init`;if(!P.default.isGroupCallEnabled())return void __LOG__(3)`voip:attempted to start group ${t?"video":"audio"} call but it is not enabled`;__LOG__(2)`voip:groupCallStart: ${e.join()}`;var n=(0,M.randomId)().substr(0,64);__LOG__(2)`voip:generateId: ${n}`;var a=e.filter((function(e){return F.default.isUser(e)&&e.user!==(0,S.getMaybeMeUser)().user})),i=a.map((function(e){return e.toString({legacy:!0})})),s=[],u=[[]];b.default.supportsFeature(b.default.F.MD_BACKEND)?a.forEach((function(e,t){s.push((0,B.getFanOutList)([e]).then((function(e){var n=e.map((function(e){return e.toString({legacy:!0,formatFull:!0})}));u[t]=n})))})):a.forEach((function(e,t){u[t]=[e.toString({legacy:!0,formatFull:!0})]}));r.all(s).then((function(){var e;null===(e=o)||void 0===e||e.startGroupCallMD(i,u,n,t)})),g.default.add({id:n,peerJid:a[0],offerTime:y.default.globalUnixTime(),isVideo:t,isGroup:!0,groupCallParticipants:a,webClientShouldHandle:!0,outgoing:!0,canHandleLocally:!0}),g.default.assertGet(n).setState(U.CALL_STATES.OUTGOING_CALLING)}(e,t)}))},sendGroupCallInvite:function(e){__LOG__(2)`voip:sendGroupCallInvite: ${e.toString()}}`,function(e){if(!$)return void __LOG__(3)`voip:sendInviteToGroupCall:called before init`;__LOG__(2)`voip:sendInviteToGroupCall: ${e.toString()}`;var t=[],n=null;if(F.default.isUser(e)&&!e.equals((0,S.getMaybeMeUser)())){var r;if(b.default.supportsFeature(b.default.F.MD_BACKEND))(0,B.getFanOutList)([e]).then((function(r){var a;t=r.map((function(e){return e.toString({legacy:!0,formatFull:!0})})),n=e.toString({legacy:!0}),null===(a=o)||void 0===a||a.inviteToGroupCallMD(n,t)}));else t=[e.toString({legacy:!0,formatFull:!0})],n=e.toString({legacy:!0}),null===(r=o)||void 0===r||r.inviteToGroupCallMD(n,t)}}(e)},endCall:function(e){var t;if(!$)return __LOG__(3)`voip:endCall:called before init`,r.resolve();z&&clearTimeout(z);var n=g.default.activeCall;return __LOG__(2)`voip:callEnd`,null===(t=o)||void 0===t||t.end(!0,null!=e?e:null==n?void 0:n.id),n&&n.setState(U.CALL_STATES.ENDED),r.resolve()},callEndByHandledRemotely:function(e){var t;$?(__LOG__(2)`voip:callEndByHandledRemotely ${e}`,l=!0,null===(t=o)||void 0===t||t.end(!1,e)):__LOG__(3)`voip:callEndByHandledRemotely:called before init`},acceptCall:function(){if($)if(g.default.activeCall){var e=g.default.activeCall;te(e.isVideo).then((function(t){if(t&&null!=e){var n;if(!e||e.getState()!==U.CALL_STATES.INCOMING_RING)return;__LOG__(2)`voip:acceptCall`,null===(n=o)||void 0===n||n.acceptCall(!0,m.default.isVideoAvailable),e.webClientShouldHandle=!0,e.setState(U.CALL_STATES.CONNECTING),ue(e.id,!1),ne(e.id,"accept").then((function(t){var n;t.success||(null===(n=o)||void 0===n||n.end(!1),e.webClientShouldHandle=!1,e.setState(U.CALL_STATES.HANDLED_REMOTELY))}))}else Q.rejectCall()}))}else __LOG__(3)`voip:acceptCall:call not found`;else __LOG__(3)`voip:acceptCall:called before init`},rejectCall:function(){var e;if($)if(g.default.activeCall){var t=g.default.activeCall;t&&t.getState()===U.CALL_STATES.INCOMING_RING&&(__LOG__(2)`voip:rejectCall`,null===(e=o)||void 0===e||e.rejectCall(),t.webClientShouldHandle=!0,t.setState(U.CALL_STATES.REJECTED),ne(t.id,"reject").then((function(e){var n;e.success||(null===(n=o)||void 0===n||n.end(!1),t.webClientShouldHandle=!1,t.setState(U.CALL_STATES.HANDLED_REMOTELY))})).catch((function(){t&&(t.webClientShouldHandle=!1,t.setState(U.CALL_STATES.HANDLED_REMOTELY))})))}else __LOG__(3)`voip:rejectCall:call not found`;else __LOG__(3)`voip:rejectCall:called before init`},rejectCallWithoutCallCtx:function(e,t,n,r,a,i){var s;null===(s=o)||void 0===s||s.rejectCallWithoutCallCtx(e,!1,t,n,r,a,i)},processMissedIncomingCall:function(e){x.default.generateMissedCallLog(e.call_creator,e.t,!!e.isVideoCall,!1);var t={call_creator_id:e.call_creator.toString({legacy:!0,formatFull:!0}),call_result:C.default.CALL_RESULT_TYPE.CALL_REJECTED_E2E,call_side:C.default.CALL_SIDE.CALLEE,call_test_bucket:"",video_enabled:!!e.isVideoCall,call_peer_platform:e.peer_platform,call_peer_app_version:e.peer_app_version,call_offer_elapsed_t:e.elapsed_msec};null==e.peer_platform&&delete t.call_peer_platform,null==e.peer_app_version&&delete t.call_peer_app_version,null==e.elapsed_msec&&delete t.call_offer_elapsed_t,new C.default.Call(t).commit()},mute:function(e){var t;__LOG__(2)`voip:mute ${e.toString()}`,null===(t=o)||void 0===t||t.mute(e)},videoTurnCameraOn:function(){var e;__LOG__(2)`voip:videoTurnCameraOn`,null===(e=o)||void 0===e||e.videoTurnCameraOn()},videoTurnCameraOff:function(){var e;__LOG__(2)`voip:videoTurnCameraOff`,null===(e=o)||void 0===e||e.videoTurnCameraOff()},videoStreamPause:function(){var e;__LOG__(2)`voip:videoStreamPause`,null===(e=o)||void 0===e||e.videoStreamPause()},videoStreamResume:function(){var e;__LOG__(2)`voip:videoStreamResume`,null===(e=o)||void 0===e||e.videoStreamResume()},updateAudioVideoSwitch:function(){__LOG__(2)`voip:updateAudioVideoSwitch`;var e=b.default.supportsFeature(b.default.F.DESKTOP_VOIP_VIDEO_CALL)||I.default.webVoip;o&&"function"==typeof o.updateAudioVideoSwitch&&o.updateAudioVideoSwitch(e)},videoRequestUpgrade:function(){__LOG__(2)`voip:videoRequestUpgrade`,te(!0).then((function(e){var t;e&&(null===(t=o)||void 0===t||t.videoRequestUpgrade())}))},videoAcceptUpgrade:function(){__LOG__(2)`voip:videoAcceptUpgrade`,te(!0).then((function(e){var t,n;e?null===(t=o)||void 0===t||t.videoAcceptUpgrade(!0,m.default.isVideoAvailable):null===(n=o)||void 0===n||n.videoRejectUpgrade(U.VideoUpgradeRequestEndedReason.EndedByUser)}))},videoRejectUpgrade:function(e){var t;__LOG__(2)`voip:videoRejectUpgrade`,null===(t=o)||void 0===t||t.videoRejectUpgrade(e)},videoCancelUpgrade:function(e){var t;__LOG__(2)`voip:videoCancelUpgrade`,null===(t=o)||void 0===t||t.videoCancelUpgrade(e)},updateNetworkMedium:function(e,t){o&&"function"==typeof o.updateNetworkMedium&&o.updateNetworkMedium(e,t)},resendEncRekeyRetry:function(e,t){var n;null===(n=o)||void 0===n||n.resendEncRekeyRetry({peerDeviceRawJid:e,retryCount:t})},registerVideoCallback:function(){},registerWebRTCCallback:function(){throw new Error("This should only be called in Web mode.")},notifyDeviceIdentityChangedOrDeleted:function(e,t){var n;b.default.supportsFeature(b.default.F.MD_BACKEND)&&(null===(n=o)||void 0===n||n.notifyDeviceIdentityChangedOrDeletedMD((0,W.DEVICE_JID)(e),t))},getNumParticipantsFromCallOffer:function(e){return T.default.send(U.RENDERER_IPC_EVENTS.REQUEST_NUM_PARTICIPANTS,e)}};function X(){return Z.apply(this,arguments)}function Z(){return(Z=(0,p.default)(f.default.mark((function e(){var t,a,i,u;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.default.isVoiceCallEnabled()){e.next=4;break}return $=!1,V.send(U.RENDERER_IPC_EVENTS.ENABLE_VOIP_FEATURES,!1),e.abrupt("return",r.resolve(!1));case 4:if(!$){e.next=6;break}return e.abrupt("return",r.resolve(!0));case 6:return o=w.default.require("wavoip"),a=o,s=n(30819),__LOG__(2)`voip:init`,i=P.default.isVideoCallEnabled(),u=r.resolve(),b.default.supportsFeature(b.default.F.MD_BACKEND)?(__LOG__(2)`voip:init initializing VoIP stack in MD mode`,u=a.init((0,S.assertGetMe)().toString({legacy:!0,formatFull:!0}),!0,i)):(__LOG__(2)`voip:init initializing VoIP stack in web-protocol mode`,u=a.init((0,S.assertGetMe)().toString({legacy:!0}),!1,i)),e.next=15,u;case 15:return __LOG__(2)`voip:init initialized VoIP stack successfully`,null===(t=s)||void 0===t||t.init(),$=!0,Q.updateNetworkMedium(U.CallNetworkMedium.CallNetworkMediumWifi,0),V.send(U.RENDERER_IPC_EVENTS.ENABLE_VOIP_FEATURES,$),ce(),ee(),e.abrupt("return",$);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){var e;null===(e=o)||void 0===e||e.setScreenSize(1920,1080)}function te(e){return e?(0,A.checkForMicrophoneAndCameraAccess)():(0,A.checkForMicrophoneAccess)()}function ne(e,t){return e?u||(u=(0,O.queryCall)(e,t).then((function(e){return 200===e.status?{success:!0}:{success:!1}})).catch((function(){return{success:!1}})).finally((function(){u=void 0}))):r.resolve({success:!1})}function re(e,t,n){b.default.supportsFeature(b.default.F.MD_BACKEND)||(0,L.arrayToB64Recursively)(e.payload),__LOG__(2)`voip:outgoing_signaling:${JSON.stringify(e)}:`,(0,O.sendCallSignalingMsg)(e).then(ae(t,n)).catch((function(){}))}function ae(e,t){return function(n){var r,a,i;if(n&&n.status&&n.payload)switch(n.status){case 200:__LOG__(2)`voip:recv:${e}_ack:`,b.default.supportsFeature(b.default.F.MD_BACKEND)||(0,D.base64DecodeRecursively)(n.payload);var s=Number(null!==(r=null===(a=n.payload[1])||void 0===a?void 0:a.error)&&void 0!==r?r:0),u={peer_jid:t,type:e,error:s,ack:n.payload};null===(i=o)||void 0===i||i.handleIncomingSignalingAck(u);break;default:__LOG__(2)`voip:recv:accept_ack: Unknown status:${status}`}}}function ie(){null!=q&&(clearTimeout(q),q=null)}function oe(){null!=J&&(clearTimeout(J),J=null)}function se(e){oe(),J=setTimeout((function(){J=null;var t=g.default.activeCall;if(t&&t.id===e){var n=t.getState();n===U.CALL_STATES.OUTGOING_RING||n===U.CALL_STATES.OUTGOING_CALLING?(t.setState(U.CALL_STATES.NOT_ANSWERED),Q.endCall()):n===U.CALL_STATES.INCOMING_RING&&Q.endCall()}}),45e3)}function ue(e,t){oe(),J=setTimeout((function(){J=null;var n=g.default.activeCall;n&&n.id===e&&n.getState()!==U.CALL_STATES.ACTIVE&&(n.setState(U.CALL_STATES.FAILED),t?Q.endCall():Q.rejectCall())}),3e4)}function le(e,t,n){switch(n){case U.VideoState.VideoStateUpgradeRequest:!function(e,t){ie(),q=setTimeout((function(){q=null,x.default.isParticipantRequestingVideoUpgrade(e,t)&&(t?Q.videoCancelUpgrade(U.VideoUpgradeRequestEndedReason.EndedByTimeout):Q.videoRejectUpgrade(U.VideoUpgradeRequestEndedReason.EndedByTimeout))}),t?45e3:3e4)}(e,t);break;case U.VideoState.VideoStateEnabled:ie();break;case U.VideoState.VideoStateStopped:q&&(__LOG__(4,void 0,new Error,!0)`callUpgradeRequestTimer should be already cleared before video feed stopped`,SEND_LOGS("call-upgrade-timer-error"));break;default:ie()}}function ce(){V.send(U.RENDERER_IPC_EVENTS.ENABLE_VOIP_GROUP_FEATURES,P.default.isGroupCallEnabled())}function de(e){var t=e.callInfo;switch(__LOG__(2)`voip:event: "${e.eventStr}" data: `,__LOG__(2)`voip:event: "callInfo: `,e.event){case U.WACallEvent.CallEnding:if(function(e){var t=g.default.activeCall;if(t&&t.webClientShouldHandle)if(e){var n=e.call_log_info,r={"call-id":t.id,audio:!n.video_enabled,t:t.offerTime,seconds:Math.floor((999+Math.max(0,n.call_duration))/1e3),out:0===n.caller_status,result:n.result,jid:n.initial_peer_raw_jid,group:n.initial_group_transaction_id},a=[];n.group_call_log_count&&(a=n.group_call_logs.map((function(e){return{result:e.result,jid:e.raw_jid}}))),(0,O.sendCallEnd)(r,a)}else __LOG__(3)`VoipEventCallback:eventData is null/undefined: ${t.id}`}(e.eventData),e.eventData.call_id&&e.eventData.call_log_info.result===U.CALL_LOG_RESULT_TYPE.MISSED){var n=x.default.getCallFromCallId(e.eventData.call_id);if(n&&!n.outgoing){var r=e.eventData.call_log_info;x.default.generateMissedCallLog((0,G.createWid)(r.initial_peer_raw_jid),n.offerTime,r.video_enabled,r.group_call_log_count>1)}}break;case U.WACallEvent.CallRejectReceived:var a=t&&x.default.getCallFromCallId(t.call_id);a&&a.setState(U.CALL_STATES.REJECTED),Q.endCall();break;case U.WACallEvent.RejectedDecryptionFailure:if(b.default.supportsFeature(b.default.F.MD_BACKEND))try{var i=e.eventData,s=(0,G.createWid)((0,_.default)(i.peer_raw_jid,"eventData.peer_raw_jid")),u=(0,_.default)(i.call_id,"eventData.call_id"),c=new Uint8Array((0,_.default)(i.registration,"eventData.registration")),f={stanzaId:null,originalMsgId:u,ts:null,retryCount:(0,_.default)(i.retry_count,"eventData.retry_count"),regId:(0,j.convertBytesToUint)(c,4),offline:!1,from:s,participant:null,recipient:null,keyBundle:null};(0,Y.handleVoipRetryRequest)(f).then((function(e){var t;e?null===(t=o)||void 0===t||t.resendOfferOnDecryptionFailureMD((0,W.DEVICE_JID)(s),u):__LOG__(3)`voip: not sending retry offer`})).catch((function(){__LOG__(3)`voip: error while attempting to send retry offer`}))}catch(e){__LOG__(3)`voip: not retrying offer due to client-side issue`}break;case U.WACallEvent.MediaStreamError:case U.WACallEvent.AudioInitError:case U.WACallEvent.NoSamplingRatesForAudioRecord:case U.WACallEvent.HandleOfferFailed:case U.WACallEvent.P2PTransportCreateFailed:case U.WACallEvent.P2PTransportStartFailed:case U.WACallEvent.MediaStreamStartError:case U.WACallEvent.HandleOfferAckFailed:case U.WACallEvent.HandleAcceptFailed:case U.WACallEvent.HandlePreAcceptFailed:case U.WACallEvent.RelayBindsFailed:case U.WACallEvent.HandleAcceptReceiptFailed:case U.WACallEvent.HandleAcceptAckFailed:case U.WACallEvent.CallAcceptFailed:var p=t&&x.default.getCallFromCallId(t.call_id);p&&p.setState(U.CALL_STATES.FAILED),Q.endCall();break;case U.WACallEvent.CallOfferNacked:var h=e.eventData.errors;if(!h||!h.length){__LOG__(4,void 0,new Error)`voip:callOfferNacked: with empty errors`;break}var m=x.default.getCallFromCallId(null==t?void 0:t.call_id);if(!m||!t){__LOG__(3)`voip:callOfferNackToast: call info not found for callId`;break}var y=h.map((function(e){return(0,G.createWid)((0,_.default)(e.error_raw_jid,"i.error_raw_jid"))}));x.default.callOfferNackToast(h[0].code,y,m.isVideo,m.isGroup);var E=(0,S.getMaybeMeUser)(),T=t.participants.filter((function(e){return e.jid.user!==(null==E?void 0:E.user)&&!y.some((function(t){return t.user===e.jid.user}))})),w=y.some((function(e){return e.user===(null==E?void 0:E.user)})),A=h.some((function(e){return 432===e.code}));(0===T.length||w||A)&&(m&&m.setState(U.CALL_STATES.ENDED),__LOG__(2)`voip:callOfferNacked: Ending call`,Q.endCall());break;case U.WACallEvent.FieldstatsReady:var M=e.eventData;if(M&&M.call_ended_stats){var I={};v.default.forOwn(M.call_ended_stats,(function(e,t){var n,r=t;switch(n="string"==typeof e?e:isNaN(e)?null:e,t){case"abtest_bucket":r="call_test_bucket";break;case"call_result":n!==U.CALL_RESULT_TYPE.MISSED&&n!==U.CALL_RESULT_TYPE.SETUP_ERROR||!l||(n=U.CALL_RESULT_TYPE.ACTIVE_ELSEWHERE)}var a=function(e){var t=e.split("_");if(t.length<=1)return e;for(var n=1;n<t.length;n+=1)t[n]=v.default.upperFirst(t[n]);return t.join("")}(r);try{"boolean"===C.default.METRICS.getEvent("Call",a).type?I[a]=!!e:I[a]=n}catch(e){__LOG__(4,void 0,new Error)`voip:fieldstats ready: metric undefined for ${a}`}})),new C.default.Call(I).commit(),l=!1}break;case U.WACallEvent.CallMissed:var k=e.eventData;if(k){var P=!!k.is_video_call,D=k.group_info.count>1,N=(Date.now()-k.time_elapsed_since_call_offer)/1e3;x.default.generateMissedCallLog((0,G.createWid)(k.from_raw_jid),N,P,D);var L={call_creator_id:k.from_raw_jid,call_peer_platform:k.peer_platform,call_peer_app_version:k.peer_app_version,call_offer_elapsed_t:k.time_elapsed_since_call_offer,call_wakeup_source:k.call_wakeup_source,call_test_bucket:k.abtest_bucket,video_enabled:P,call_result:C.default.CALL_RESULT_TYPE.MISSED,call_side:C.default.CALL_SIDE.CALLEE},F=D?{group_call_is_last_segment:!0,group_call_is_group_call_invitee:!0,num_connected_participants:k.group_info.count,field_stats_row_type:C.default.FIELD_STATS_ROW_TYPE.SELF}:{};new C.default.Call((0,d.default)((0,d.default)({},L),F)).commit()}break;case U.WACallEvent.RxTrafficStopped:var B=t&&x.default.getCallFromCallId(t.call_id);B&&B.setState(U.CALL_STATES.CONNECTION_LOST);break;case U.WACallEvent.RxTrafficStarted:var V=t&&x.default.getCallFromCallId(t.call_id);V&&V.getState()===U.CALL_STATES.CONNECTION_LOST&&(J&&(__LOG__(4,void 0,new Error,!0)`callOfferTimer should be already cleared before traffic restored`,SEND_LOGS("call-state-error")),V.setState(U.CALL_STATES.ACTIVE));break;case U.WACallEvent.RTCPByeReceived:case U.WACallEvent.RxTimeout:case U.WACallEvent.TxTimeout:__LOG__(2)`voip:event: Timeout: end the call, set call state to ENDED`;var H=t&&x.default.getCallFromCallId(t.call_id);H&&H.setState(U.CALL_STATES.ENDED),Q.endCall();break;case U.WACallEvent.SoundPortCreateFailed:R.default.soundPortErrorModal(),Q.refresh();break;case U.WACallEvent.VideoPortCreateFailed:R.default.videoPortErrorModal(),Q.refresh();break;case U.WACallEvent.CallStateChanged:var $=e.eventData,z=$.call_state;if(!$.call_id)return;var q=x.default.getCallFromCallId($.call_id);if(!q)return;switch(z!==U.WACallState.WACallStateNone&&t&&(q.callInfo=x.default.parseCallInfo(t)),__LOG__(2)`voip:event: Call State:`,z){case U.WACallState.WACallStateNone:q.setState(U.CALL_STATES.ENDED),g.default.setActiveCall(null),g.default.remove(q),__LOG__(2)`voip:call_collection: Active Call set to null due to call end:`;break;case U.WACallState.WACallStateCalling:q.setState(U.CALL_STATES.OUTGOING_CALLING),g.default.activeCall||g.default.setActiveCall(q);break;case U.WACallState.WACallStatePreacceptReceived:q.setState(U.CALL_STATES.OUTGOING_RING),g.default.activeCall||g.default.setActiveCall(q);break;case U.WACallState.WACallStateAcceptReceived:q.setState(U.CALL_STATES.CONNECTING),g.default.activeCall||g.default.setActiveCall(q);break;case U.WACallState.WACallStateReceivedCall:q.setState(U.CALL_STATES.INCOMING_RING),g.default.activeCall||g.default.setActiveCall(q);break;case U.WACallState.WACallStateCallActive:oe(),q.setState(U.CALL_STATES.ACTIVE),g.default.activeCall||g.default.setActiveCall(q)}break;case U.WACallEvent.GroupInfoChanged:x.default.updateCallWithCallInfo(t);break;case U.WACallEvent.SelfVideoStateChanged:var X=e.eventData;if(!t||!t.call_id)return;x.default.updateCallWithCallInfo(t),le(t.call_id,!0,X);break;case U.WACallEvent.PeerVideoStateChanged:var Z=e.eventData;if(!t||!t.call_id)return;x.default.updateCallWithCallInfo(t),le(t.call_id,!1,Z);break;case U.WACallEvent.VideoRenderStarted:case U.WACallEvent.MuteStateChanged:case U.WACallEvent.VideoRenderFormatChanged:case U.WACallEvent.VideoPreviewReady:x.default.updateCallWithCallInfo(t);break;case U.WACallEvent.PendingCallAutoRejected:var ee=g.default.last();ee&&ne(ee.id,"reject_pending");break;case U.WACallEvent.SyncDevices:b.default.supportsFeature(b.default.F.MD_BACKEND)&&(0,K.default)(e.eventData.users);break;case U.WACallEvent.CallAutoConnect:break;default:__LOG__(2)`voip:event: Unknown Event:`}}t.default=Q,V.on(U.MAIN_IPC_EVENTS.EVENT,(function(e,t){return de(t)})),V.on(U.MAIN_IPC_EVENTS.SIGNALING,(function(e,t){return function(e){var t=e.callId,n=e.peerJid,r=e.payload,a=r[0],i={type:a,call_id:t,peer_jid:n},s={common:i,payload:r},u=N.TYPE_STR;switch(__LOG__(2)`voip:signallingCallback: type:"${a}" payload:`,a){case u.OFFER:z=setTimeout((function(){z=null,(0,O.sendCallOffer)(s).then((function(e){if(e&&e.status){var n=g.default.get(t);switch(e.status){case 200:if(e.payload){var r,a,s,u=Number(null!==(r=null===(a=e.payload[1])||void 0===a?void 0:a.error)&&void 0!==r?r:0);__LOG__(2)`voip:recv:offerAck:`,b.default.supportsFeature(b.default.F.MD_BACKEND)||(0,D.base64DecodeRecursively)(e.payload);var l={peer_jid:i.peer_jid,type:"offer",error:u,ack:e.payload};null===(s=o)||void 0===s||s.handleIncomingSignalingAck(l)}else __LOG__(2)`voip:recv:offer_ack: no payload`;break;case 409:__LOG__(2)`voip:recv:offer_ack: phone_busy`,n&&n.setState(U.CALL_STATES.REMOTE_CALL_IN_PROGRESS);break;default:__LOG__(2)`voip:recv:offerAck: Unknown status:${status}`}}})).catch((function(){}))}),500);break;case u.ENC_REKEY:(0,O.sendEncRekey)(s).then(ae(u.ENC_REKEY,n)).catch((function(){}));break;case u.REJECT:(r[1]&&r[1].reason)===N.ENC_RETRY_RECEIPT_ATTRS.SINGLE_PARTICIPANT?(0,O.prepareRetryReceipt)(r).then((function(){re(s,a,n)})).catch((function(){__LOG__(3)`voip:retry_receipt could not generate keys section`})):re(s,a,n);break;case u.RECEIPT:(r[1]&&r[1].type)===N.ENC_RETRY_RECEIPT_ATTRS.GROUP_CALL?(0,O.prepareRetryReceipt)(r).then((function(){re(s,a,n)})).catch((function(){__LOG__(3)`voip:retry_receipt could not generate keys section`})):re(s,a,n);break;default:re(s,a,n)}}(t)})),V.on(U.MAIN_IPC_EVENTS.LOGGING,(function(e,t){return function(e){if(Array.isArray(e.data)&&!(e.data.length<1))for(var t=0;t<e.data.length;t++)__LOG__(2)`voip log: ${e.data[t]}`}(t)})),V.on(U.MAIN_IPC_EVENTS.LOG_PATH,(function(e,t){var n;null===(n=o)||void 0===n||n.setLogPath(t)})),b.default.on(b.FEATURE_CHANGE_EVENT,(function(){return ce()}))},12626:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleIncomingSignalingMessage=function(e,t){var r=i.default.get(e.call_id);if(!r)return void __LOG__(3)`voip:voip_common_disabled: Received signaling msg type ${e.type} but could not find call for call ID`;switch(e.type){case o.TYPE.OFFER:null!=e.t&&(r.offerTime=e.t),r.isVideo=!!e.isVideoCall,r.setState(s.CALL_STATES.INCOMING_RING);break;case o.TYPE.TERMINATE:if(r.setState(s.CALL_STATES.ENDED),u.default.supportsFeature(u.default.F.MD_BACKEND))switch(t.payload[1].reason){case"timeout":null==l&&(l=n(15340).default),l.generateMissedCallLog(e.call_creator,r.offerTime,r.isVideo,!1)}}};var i=a(n(68950)),o=r(n(66279)),s=n(14423),u=a(n(22021)),l=null},63805:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(22021)),i=r(n(63056));var o={isVoiceCallEnabled:function(){return!!a.default.supportsFeature(a.default.F.MD_BACKEND)||(a.default.supportsFeature(a.default.F.DESKTOP_VOIP_VOICE_CALL)||i.default.webVoip)},isVideoCallEnabled:function(){return!!a.default.supportsFeature(a.default.F.MD_BACKEND)||(a.default.supportsFeature(a.default.F.DESKTOP_VOIP_VIDEO_CALL)||i.default.webVoip)},isGroupCallEnabled:function(){return a.default.supportsFeature(a.default.F.MD_BACKEND),!1}};t.default=o},78854:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(99703),o=r(n(34541)),s=r(n(25960)),u=r(n(89115));function l(e,t){o.default.openModal(a.default.createElement(s.default,{title:t,okText:u.default.t(1826),onOK:function(){return o.default.closeModal()}},a.default.createElement("div",null,e)))}var c={openModal:l,openUnblockModal:function(e){o.default.openModal(a.default.createElement(s.default,{okText:u.default.t(1468),onOK:function(){(0,i.unblockContact)(e).catch((function(){})),o.default.closeModal()},cancelText:u.default.t(1657),onCancel:function(){o.default.closeModal()}},u.default.t(1613)))},soundPortErrorModal:function(){l(u.default.t(1586),u.default.t(1587))},videoPortErrorModal:function(){var e=n(50464).default;o.default.openModal(a.default.createElement(s.default,{title:u.default.t(1589),okText:u.default.t(1380),onOK:function(){o.default.closeModal(),o.default.openModal(a.default.createElement(e,null))},cancelText:u.default.t(1657),onCancel:function(){o.default.closeModal()}},a.default.createElement("div",null,u.default.t(1588))))}};t.default=c},66279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENC_RETRY_RECEIPT_ATTRS=t.TYPE_NAME=t.TYPE_STR=t.TYPE=void 0;t.TYPE={NONE:0,OFFER:1,OFFER_RECEIPT:2,ACCEPT:3,REJECT:4,TERMINATE:5,TRANSPORT:6,OFFER_ACK:7,OFFER_NACK:8,RELAY_LATENCY:9,RELAY_ELECTION:10,INTERRUPTION:11,MUTE:12,PREACCEPT:13,ACCEPT_RECEIPT:14,VIDEO_STATE:15,NOTIFY:16,GROUP_INFO:17,ENC_REKEY:18,PEER_STATE:19,VIDEO_STATE_ACK:20,FLOW_CONTROL:21,WEB_CLIENT:22,ACCEPT_ACK:23,GROUP_UPDATE:24,OFFER_NOTICE:25,MAX:26};t.TYPE_STR={OFFER:"offer",ACCEPT:"accept",ENC_REKEY:"enc_rekey",REJECT:"reject",RECEIPT:"receipt",OFFER_NOTICE:"offer_notice"};t.TYPE_NAME=["NONE","OFFER","OFFER_RECEIPT","ACCEPT","REJECT","TERMINATE","TRANSPORT","OFFER_ACK","OFFER_NACK","RELAY_LATENCY","RELAY_ELECTION","INTERRUPTION","MUTE","PREACCEPT","ACCEPT_RECEIPT","VIDEO_STATE","NOTIFY","GROUP_INFO","ENC_REKEY","PEER_STATE","VIDEO_STATE_ACK","FLOW_CONTROL","WEB_CLIENT","ACCEPT_ACK","GROUP_UPDATE","OFFER_NOTICE","MAX"];t.ENC_RETRY_RECEIPT_ATTRS={SINGLE_PARTICIPANT:"enc",GROUP_CALL:"enc_rekey_retry"}},15340:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67294)),o=a(n(79075)),s=a(n(68950)),u=a(n(34541)),l=a(n(93743)),c=a(n(48629)),d=a(n(28755)),f=a(n(89115)),p=r(n(14094)),h=r(n(92631)),_=a(n(63805)),v=a(n(78854)),m=n(14423),g=a(n(78422)),y=n(75793),E=a(n(22021)),S=a(n(34263)),b=n(71701),T=a(n(5315)),w=n(39888),A=a(n(75554));function C(e){return{callId:e.call_id,peerJid:e.peer_jid,initialPeerJid:e.initial_peer_jid,creatorJid:e.creator_jid,callerStatus:Boolean(e.caller_status),callActiveTime:{sec:e.call_active_time.sec,msec:e.call_active_time.msec},callDuration:e.call_duration,audioDuration:e.audio_duration,videoDuration:e.video_duration,canInviteNewParticipant:_.default.isGroupCallEnabled()&&Boolean(e.can_invite_new_participant),canSwitchAudioVideo:Boolean(e.can_switch_audio_video),isGroupCall:Boolean(e.is_group_call),participantCount:e.participant_count,participants:e.participants.filter((function(e){return null!=e.jid})).map((function(e){var t=(0,y.createUserWid)(e.jid.user,e.jid.server);return{wid:t.toString(),userJid:t.toString({legacy:!0}),deviceRawJid:e.device_raw_jid,isMuted:Boolean(e.is_muted),isSelf:Boolean(e.is_self),isInterrupted:Boolean(e.is_interrupted),isBackgrounded:Boolean(e.is_backgrounded),orderId:e.order_id,videoOrientation:e.video_orientation,videoRenderStarted:Boolean(e.video_render_started),videoState:e.video_state,state:e.state}})),videoCaptureStarted:Boolean(e.video_capture_started),videoPreviewStarted:Boolean(e.video_preview_started),videoEnabled:Boolean(e.video_enabled),videoEnabledAtCallStart:Boolean(e.video_enabled_at_call_start),rotateVideo:Boolean(e.rotate_video)}}function O(e){return!s.default.activeCall&&!e.isContactBlocked&&p.default.displayInfo===p.StreamInfo.NORMAL}function M(e){if(e)return s.default.get(e)}var I={parseCallInfo:C,canStartCall:O,canStartVideoCall:function(e){return O(e)&&o.default.isVideoAvailable},isParticipantRequestingVideoUpgrade:function(e,t){var n=M(e);return!!(n&&n.callInfo&&n.callInfo.participants.length)&&!!n.callInfo.participants.find((function(e){return e.isSelf===t&&e.videoState===m.VideoState.VideoStateUpgradeRequest}))},updateCallWithCallInfo:function(e){var t=e&&M(e.call_id);e&&t&&(t.callInfo=C(e))},callOfferNackToast:function(e,t,n,r){var a=t.map((function(e){var t=c.default.get(e);return t?t.shortName||t.name||t.displayName:(0,g.default)(e)})).join(f.default.t(658)),o=null;switch(e){case 401:o=f.default.t(1609);break;case 404:o=f.default.t(1612,{callee:a});break;case 405:o=f.default.t(1607,{callee:a});break;case 460:case 406:o=n?f.default.t(1614,{callee:a}):f.default.t(1611,{callee:a});break;case 426:o=n?f.default.t(1614,{callee:a}):f.default.t(1610,{callee:a});break;case 427:o=_.default.isGroupCallEnabled()?f.default.t(1594,{callee:a,_plural:t.length}):n?f.default.t(1630):f.default.t(1606);break;case 461:o=E.default.supportsFeature(E.default.F.MD_BACKEND)?r?f.default.t(1592):f.default.t(1608,{callee:a}):n?f.default.t(1630):f.default.t(1606);break;default:o=n?f.default.t(1630):f.default.t(1606)}o&&u.default.openToast(i.default.createElement(h.default,{msg:o,id:(0,h.genId)()}))},getCallFromCallId:M,checkIfCanStartCall:function(e){var t;if(!e.isGroup&&!e.contact)return __LOG__(4,void 0,new Error)`voip:checkIfCanStartCall expected contact to be provided`,!1;var n=!0;if(p.default.displayInfo!==p.StreamInfo.NORMAL)switch(n=!1,p.default.displayInfo){case p.StreamInfo.RESUMING:case p.StreamInfo.TIMEOUT:v.default.openModal(f.default.t(1602),f.default.t(1603));break;case p.StreamInfo.OFFLINE:case p.StreamInfo.OPENING:case p.StreamInfo.CONNECTING:default:v.default.openModal(f.default.t(1600),f.default.t(1601))}else!e.isGroup&&(null===(t=e.contact)||void 0===t?void 0:t.isContactBlocked)?(n=!1,v.default.openUnblockModal(e.contact)):s.default.activeCall?(n=!1,v.default.openModal(f.default.t(1590))):o.default.isMicrophoneAvailable?o.default.isSpeakerAvailable?e.isVideo&&!o.default.isVideoAvailable&&(__LOG__(2)`voip:checkIfCanStartCall false due to camera not available`,n=!1,v.default.openModal(f.default.t(1596),f.default.t(1597))):(__LOG__(2)`voip:checkIfCanStartCall false due to speaker not available`,n=!1,v.default.openModal(f.default.t(1604),f.default.t(1605))):(__LOG__(2)`voip:checkIfCanStartCall false due to microphone not available`,n=!1,v.default.openModal(f.default.t(1598),f.default.t(1599)));return n},getGroupCallParticipantNameString:function(e,t){return e.length<=2?e.map((function(e){return t?e.shortName:e.name})).join(f.default.t(658)):e[0].name+" "+f.default.t(656)+f.default.t(1595,{count:e.length-1,_plural:e.length-1})},generateMissedCallLog:function(e,t,n,r){var a=(0,y.toUserWid)(e);if(E.default.supportsFeature(E.default.F.MD_BACKEND)){var i;i=r?n?"miss_group_video":"miss_group":n?"miss_video":"miss";var o={id:new T.default({remote:a,fromMe:!1,id:(0,A.default)()}),type:S.default.MSG_TYPE.CALL_LOG,subtype:i,from:a,t:null!=t?t:Date.now()/1e3,to:(0,b.assertGetMe)()};(0,w.handleSingleMsgMD)(a,o)}},isVoiceCallButtonVisible:function(e,t){return!!l.default.isVoipInitialized&&((null==t||!(t.isUser&&!_.default.isVoiceCallEnabled()||t.isGroup&&!_.default.isGroupCallEnabled()))&&(null==e||!e.isEnterprise&&!(0,d.default)(e.id.user)))}};t.default=I},14423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallNetworkMedium=t.ParticipantState=t.VideoUpgradeRequestEndedReason=t.VideoState=t.VoipSettingsType=t.CALL_LOG_RESULT_TYPE=t.CALL_LOG_RESULT=t.CALL_RESULT_TYPE=t.RENDERER_IPC_EVENTS=t.MAIN_IPC_EVENTS=t.VOIP_WINDOW_IPC_EVENTS=t.CALL_STATES=t.CALL_UI_STATES=t.WACallState=t.WACallEndReason=t.WAVideoCodecScheme=t.WACallEvent=void 0;t.WACallEvent={WANone:0,CallOfferSent:1,CallOfferReceived:2,CallOfferAckedWithRelayInfo:3,CallOfferNacked:4,CallOfferReceiptReceived:5,CallAcceptFailed:6,CallAcceptSent:7,CallAcceptReceived:8,CallPreacceptReceived:9,CallTerminateReceived:10,CallRejectReceived:11,CallOfferResend:12,AudioStreamStarted:13,P2PNegotiationSuccess:14,RelayCreateSuccess:15,CallStateChanged:16,P2PNegotiationFailed:17,MediaStreamError:18,AudioInitError:19,NoSamplingRatesForAudioRecord:20,SendOfferFailed:21,HandleOfferFailed:22,SendAcceptFailed:23,HandlePreAcceptFailed:24,HandleAcceptFailed:25,WillCreateSoundPort:26,SoundPortCreateFailed:27,TransportCandSendFailed:28,P2PTransportCreateFailed:29,P2PTransportMediaCreateFailed:30,P2PTransportStartFailed:31,P2PTransportRestartSuccess:32,MissingRelayInfo:33,ErrorGatheringHostCandidates:34,MediaStreamStartError:35,RelayLatencySendFailed:36,RelayElectionSendFailed:37,CallEnding:38,CallCaptureBufferFilled:39,CallCaptureEnded:40,RxTimeout:41,TxTimeout:42,RxTrafficStarted:43,RxTrafficStopped:44,RTCPPacketReceived:45,RTCPByeReceived:46,RelayBindsFailed:47,SoundPortCreated:48,AudioDriverRestart:49,Echo:50,SelfVideoStateChanged:51,PeerVideoStateChanged:52,VideoPortCreated:53,VideoPortCreateFailed:54,VideoDecodeStarted:55,VideoRenderStarted:56,VideoCaptureStarted:57,VideoPreviewFailed:58,VideoPreviewReady:59,VideoPreviewShouldMinimize:60,VideoStreamCreateError:61,VideoRenderFormatChanged:62,VideoCodecMismatch:63,VideoDecodePaused:64,VideoDecodeResumed:65,VideoEncodeFatalError:66,VideoDecodeFatalError:67,BatteryLevelLow:68,PeerBatteryLevelLow:69,GroupInfoChanged:70,FieldstatsReady:71,PendingCallInfoChanged:72,MuteStateChanged:73,InterruptionStateChanged:74,RxTrafficStateForPeerChanged:75,HandleAcceptReceiptFailed:76,GroupParticipantLeft:77,AudioRouteChangeRequest:78,HandleAcceptAckFailed:79,CallMissed:80,WeakWiFiSwitchedToCellular:81,CallAutoConnect:82,RejectedDecryptionFailure:83,PeerDeviceOrientationChanged:84,HandleOfferAckFailed:85,PendingCallAutoRejected:86,FDLeakDetected:87,RestartCamera:88,AudioTestReplayFinished:89,SyncDevices:90,VideoCodecStateChanged:91,CallFatal:92,UpdateJoinableCallLog:93,WAMax:94};t.WAVideoCodecScheme={VideoCodecSchemeNone:0,VideoCodecSchemeH26X:1,VideoCodecSchemeVPX:2,VideoCodecSchemeVPXH26X:3};t.WACallEndReason={WACallEndReasonUnknown:0,WACallEndReasonEndButtonTapped:1,WACallEndReasonEndButtonTappedOnBusy:2,WACallEndReasonReject:3,WACallEndReasonRejectUnavailable:4,WACallEndReasonRejectBlocked:5,WACallEndReasonTimeout:6,WACallEndReasonPeerUnavailable:7,WACallEndReasonRejectedByPeer:8,WACallEndReasonTimedoutByPeer:9,WACallEndReasonTerminatedByPeer:10,WACallEndReasonFailed:11,WACallEndReasonHandledRemotely:12};t.WACallState={WACallStateNone:0,WACallStateCalling:1,WACallStatePreacceptReceived:2,WACallStateReceivedCall:3,WACallStateAcceptSent:4,WACallStateAcceptReceived:5,WACallStateCallActive:6,WACallStateCallActiveElseWhere:7,WACallStateReceivedCallWithoutOffer:8};t.CALL_UI_STATES={NONE:"NONE",OUTGOING_RING:"OUTGOING_RING",INCOMING_RING:"INCOMING_RING",OUTGOING_CALLING:"OUTGOING_CALLING",CONNECTING:"CONNECTING",RECONNECTING:"RECONNECTING",ACTIVE:"ACTIVE",ENDED:"ENDED",REJECTED:"REJECTED",REMOTE_CALL_IN_PROGRESS:"REMOTE_CALL_IN_PROGRESS",FAILED:"FAILED"};t.CALL_STATES={INCOMING_RING:"INCOMING_RING",OUTGOING_RING:"OUTGOING_RING",OUTGOING_CALLING:"OUTGOING_CALLING",CONNECTING:"CONNECTING",CONNECTION_LOST:"CONNECTION_LOST",ACTIVE:"ACTIVE",HANDLED_REMOTELY:"HANDLED_REMOTELY",ENDED:"ENDED",REJECTED:"REJECTED",REMOTE_CALL_IN_PROGRESS:"REMOTE_CALL_IN_PROGRESS",FAILED:"FAILED",NOT_ANSWERED:"NOT_ANSWERED"};t.VOIP_WINDOW_IPC_EVENTS={INIT:"VOIP_WINDOW_INIT",UPDATE:"VOIP_WINDOW_UPDATE",REJECT:"VOIP_WINDOW_REJECT",ACCEPT:"VOIP_WINDOW_ACCEPT",IGNORE:"VOIP_WINDOW_IGNORE",END:"VOIP_WINDOW_END",RESET:"VOIP_WINDOW_RESET",TOGGLE_MUTE:"VOIP_WINDOW_TOGGLE_MUTE",TOGGLE_CAMERA:"VOIP_WINDOW_TOGGLE_CAMERA",OPEN_IN_CALL_MENU:"OPEN_IN_CALL_MENU",CLOSE_IN_CALL_MENU:"CLOSE_IN_CALL_MENU",TOGGLE_DEBUG_INFO:"TOGGLE_DEBUG_INFO",GROUP_CALL_INVITE:"GROUP_CALL_INVITE",UPGRADE_REQUEST:"UPGRADE_REQUEST",UPGRADE_ACCEPT:"UPGRADE_ACCEPT",UPGRADE_REJECT:"UPGRADE_REJECT",UPGRADE_CANCEL:"UPGRADE_CANCEL",INITIATE_WINDOW_MOVE:"INITIATE_WINDOW_MOVE",CLOSE_WINDOW_CLICK:"CLOSE_WINDOW_CLICK",MINIMIZE_WINDOW_CLICK:"MINIMIZE_WINDOW_CLICK",MAXIMIZE_WINDOW_CLICK:"MAXIMIZE_WINDOW_CLICK",UNMAXIMIZE_WINDOW_CLICK:"UNMAXIMIZE_WINDOW_CLICK",WINDOW_MAXIMIZED:"WINDOW_MAXIMIZED",WINDOW_UNMAXIMIZED:"WINDOW_UNMAXIMIZED",WINDOW_TITLE_DBL_CLICK:"WINDOW_TITLE_DBL_CLICK",WINDOW_ESC_PRESS:"WINDOW_ESC_PRESS",WINDOW_ALWAYS_ON_TOP_CHANGED:"WINDOW_ALWAYS_ON_TOP_CHANGED",L10N_UPDATE:"L10N_UPDATE"};t.MAIN_IPC_EVENTS={EVENT:"VOIP_MAIN_WINDOW_EVENT",SIGNALING:"VOIP_MAIN_WINDOW_SIGNALING",LOGGING:"VOIP_MAIN_WINDOW_LOGGING",LOG_PATH:"VOIP_MAIN_WINDOW_LOG_PATH",AV_EVENT:"AV_DEVICE_INFO_CHANGED",AV_LOG:"AV_MAIN_WINDOW_LOGGING",AV_DEVICE_CHANGE_TOAST:"AV_DEVICE_CHANGE_TOAST",AV_DEVICE_STATUS_CHANGE:"AV_DEVICE_STATUS_CHANGE"};t.RENDERER_IPC_EVENTS={ENABLE_VOIP_FEATURES:"voip:ENABLE_VOIP_FEATURES",ENABLE_VOIP_GROUP_FEATURES:"voip:ENABLE_VOIP_GROUP_FEATURES",REQUEST_NUM_PARTICIPANTS:"voip:REQUEST_NUM_PARTICIPANTS"};t.CALL_RESULT_TYPE={INVALID:0,CONNECTED:1,REJECTED_BY_USER:2,REJECTED_BY_SERVER:3,MISSED:4,BUSY:5,SETUP_ERROR:6,SERVER_NACK:7,CALL_OFFER_ACK_NOT_RECEIVED:8,MISSED_NO_RECEIPT:9,ACCEPTED_BUT_NOT_CONNECTED:10,CALL_CANCELED_CELLULAR_IN_PROGRESS:11,CALL_CANCELED_AIRPLANE_MODE_ON:12,CALL_CANCELED_NO_NETWORK:13,CALL_OFFER_ACK_CORRUPT:14,CALL_REJECTED_TOS:15,CALL_REJECTED_E2E:16,CALL_REJECTED_UNAVAILABLE:17,CALL_CANCELED_OFFER_NOT_SENT:18,PEER_SETUP_ERROR:19,ACTIVE_ELSEWHERE:20,NO_DECRYPTED_OFFER:21,ACCEPTED_ELSEWHERE:22,REJECTED_ELSEWHERE:23};t.CALL_LOG_RESULT={0:"invalid",1:"canceled",2:"missed",3:"unavailable",4:"reject",5:"connected"};t.CALL_LOG_RESULT_TYPE={INVALID:0,CANCELED:1,MISSED:2,UNAVAILABLE:3,REJECT:4,CONNECTED:5};t.VoipSettingsType={voipSettingsNone:0,voipSettingsAudio:1,voipSettingsVideo:2};t.VideoState={VideoStateDisabled:0,VideoStateEnabled:1,VideoStatePaused:2,VideoStateUpgradeRequest:3,VideoStateUpgradeAccept:4,VideoStateUpgradeReject:5,VideoStateStopped:6,VideoStateUpgradeRejectByTimeout:7,VideoStateUpgradeCancel:8,VideoStateUpgradeCancelByTimeout:9,VideoStateError:20};t.VideoUpgradeRequestEndedReason={EndedByUser:0,EndedByTimeout:1};t.ParticipantState={ParticipantStateInvalid:0,ParticipantConnected:1,ParticipantIncoming:2,ParticipantRinging:3,ParticipantRejected:4,ParticipantTerminated:5,ParticipantTimedout:6,ParticipantCreatingCall:7,ParticipantInvisible:8,ParticipantVisible:9,ParticipantCancelOffer:10};t.CallNetworkMedium={CallNetworkMediumCellular:1,CallNetworkMediumWifi:2,CallNetworkMediumNone:3}},38831:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initDeviceLinkEvent=function(e,t,n){f=new l.default.MdLinkDeviceCompanion,p={regStartTime:n,accountSignature:e,identityKey:t}},t.setDeviceLinkPairStage=function(e){if(!f)return;f.set({mdLinkDeviceCompanionStage:e})},t.commitDeviceLinkEvent=function(){return v.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(17643),s=n(92827),u=n(90066),l=r(n(8643)),c=n(79583),d=r(n(29826)),f=null,p=null;function h(){return _.apply(this,arguments)}function _(){return(_=(0,i.default)(a.default.mark((function e(t,n){var r,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new o.Binary).writeBuffer(t),r.write("_".charCodeAt(0)),r.writeBuffer(n),i=r.readByteArray(),e.next=7,d.default.digest({name:"SHA-256"},i);case 7:return u=e.sent,e.abrupt("return",(0,s.encodeB64)(u));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,i.default)(a.default.mark((function e(t){var n,r,i,o,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,c.getUpgradeMdWamFlag)(),f&&p){e.next=3;break}return e.abrupt("return");case 3:return r=f,i=p,e.next=7,h(p.accountSignature,p.identityKey);case 7:o=e.sent,s=(0,u.unixTime)()-i.regStartTime,r.set({mdDurationS:s,mdSessionId:o,mdTimestampS:i.regStartTime,mdWasUpgraded:n,mdLinkDeviceCompanionErrorCode:null==t?0:t}),r.commit(),f=null,p=null,(0,c.setUpgradeMdWamFlag)(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},64550:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logLabelOperationEvent=function(e,t,n){var r={labelOperation:e};null!=t&&Object.assign(r,{labelCount:t});n&&Object.assign(r,{labelTarget:n});new a.default.LabelEvent(r).commit()};var a=r(n(8643))},87629:(e,t,n)=>{"use strict";var r=n(95318);t.Z=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(17643),s=n(92827),u=n(38059),l=n(8643).default,c=function(){function e(t,n,r){(0,a.default)(this,e),this.channel=t,this.buffer=new o.Binary(void 0,!0),this.buffer.writeString("WAM"),this.buffer.writeUint8(3),this.eventsWritten=0,this.prevGlobals={},this.dirtyGlobals={},this.unsavedPortion=null,this.saveKey=String(1e9*Math.random()|0),r&&this._setAll(r)}return(0,i.default)(e,[{key:"size",value:function(){return this.buffer.size()}},{key:"set",value:function(e,t){this.dirtyGlobals[String(e)]=t,this.unsavedPortion&&this.unsavedPortion.set(e,t)}},{key:"write",value:function(e){var t=this.buffer;this.set(47,e.commitTime),this.set(3433,e.sequenceNumber),this._flushGlobals();for(var n=e.all,r=Object.keys(n),a=-1,i=!1,o=0;o<r.length;o++){null!=n[r[o]]&&(a=o,i=!0)}(0,u.writeEvent)(t,e.id,-e.weight,i);for(var s=0;s<=a;s++){var c=r[s],d=l.METRICS.getEvent(e.$className,c).id,f=n[c];null!=f&&("boolean"==typeof f&&(f=f?1:0),i=s<a,(0,u.writeField)(t,d,f,i))}this.eventsWritten++,this.unsavedPortion&&this.unsavedPortion.write(e)}},{key:"stringBuffer",value:function(){return this.eventsWritten>0?(0,s.encodeB64)(this.buffer.peek((function(e){return e.readByteArray()}))):""}},{key:"_setAll",value:function(e){for(var t in e){var n=e[t];void 0!==n&&this.set(l.METRICS.getGlobal(t).id,n)}}},{key:"_flushGlobals",value:function(){var e=this.dirtyGlobals,t=this.prevGlobals;for(var n in e){var r=e[n];if("boolean"==typeof r)r=r?1:0;else if(void 0===r)r=null;else if(Number.isNaN(r))continue;if(r!==t[n]){t[n]=r;var a=parseInt(n,10);(0,u.writeGlobalAttribute)(this.buffer,a,r)}}this.dirtyGlobals={}}}]),e}();t.Z=c},38059:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeGlobalAttribute=function(e,t,n){return a(e,t,n,0)},t.writeEvent=function(e,t,n,r){return a(e,t,n,r?1:5)},t.writeField=function(e,t,n,r){return a(e,t,n,r?2:6)};var r=n(17643);function a(e,t,n,a){if(null==n)0===a&&i(e,t,a);else if("number"==typeof n&&n===(0|n))0===n?i(e,t,16|a):1===n?i(e,t,32|a):-128<=n&&n<128?(i(e,t,48|a),e.writeInt8(n)):-32768<=n&&n<32768?(i(e,t,64|a),e.writeInt16(n)):(i(e,t,80|a),e.writeInt32(n));else if("number"==typeof n)i(e,t,112|a),e.writeFloat64(n);else if("string"==typeof n){var o=(0,r.numUtf8Bytes)(n);o<256?(i(e,t,128|a),e.writeUint8(o)):o<65536?(i(e,t,144|a),e.writeUint16(o)):(i(e,t,160|a),e.writeUint32(o)),e.writeString(n)}}function i(e,t,n){t<256?(e.writeUint8(n),e.writeUint8(t)):(e.writeUint8(8|n),e.writeUint16(t))}},65800:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(8643)),s={document:o.default.MEDIA_TYPE.DOCUMENT,video:o.default.MEDIA_TYPE.VIDEO,gif:o.default.MEDIA_TYPE.GIF,image:o.default.MEDIA_TYPE.PHOTO,audio:o.default.MEDIA_TYPE.AUDIO},u=function(){function e(t,n,r){(0,a.default)(this,e),this.mediaPickerSentUnchanged=0,this.mediaPickerDeleted=0,this.mediaPickerChanged=new Set,this.mediaPickerCroppedRotated=new Set,this.mediaPickerDrawing=new Set,this.mediaPickerStickers=new Set,this.mediaPickerText=new Set,this.mediaPickerLikeDoc=0,this.mediaPickerNotLikeDoc=0,this.mediaPickerT=0,this.t0=Date.now(),this.mediaType=s[n],this.mediaPickerOrigin=r,this.medias=new Set,this.medias.add(t),this.changeTypes={mediaPickerCroppedRotated:this.mediaPickerCroppedRotated,mediaPickerDrawing:this.mediaPickerDrawing,mediaPickerStickers:this.mediaPickerStickers,mediaPickerText:this.mediaPickerText}}return(0,i.default)(e,[{key:"onAdd",value:function(e){this.medias.add(e),"document"===this.mediaType?this.mediaPickerLikeDoc++:this.mediaPickerNotLikeDoc++}},{key:"onChange",value:function(e,t){this.mediaPickerChanged.add(e),this.changeTypes[t].add(e)}},{key:"onDelete",value:function(e){if(this.medias.delete(e),this.mediaPickerDeleted++,0===this.medias.size)return this.onCancel()}},{key:"onSend",value:function(){return this.mediaPickerSent=this.medias.size,this.mediaPickerSentUnchanged=this.mediaPickerSent-this.mediaPickerChanged.size,this.dataPreflight()}},{key:"onCancel",value:function(){return this.mediaPickerSent=0,this.mediaPickerSentUnchanged=0,this.dataPreflight()}},{key:"onPause",value:function(){this.mediaPickerT+=Date.now()-(this.t0||0),this.t0=null}},{key:"onResume",value:function(){this.t0=null!=this.t0?this.t0:Date.now()}},{key:"dataPreflight",value:function(){var e=this.mediaPickerSentUnchanged;return isNaN(e)&&(e=0,__LOG__(4,void 0,new Error,!0)`mediaPickerSentUnchange mediaPickerSent: ${null!=this.mediaPickerSent&&0!==this.mediaPickerSent?this.mediaPickerSent:"undefined"}, mediaPickerChanged: ${this.mediaPickerChanged.size||"undefined"}`,SEND_LOGS("mediaPickerSentUnchange is not a number")),{mediaPickerSent:this.mediaPickerSent,mediaPickerSentUnchanged:e,mediaPickerT:this.mediaPickerT+(Date.now()-(this.t0||0)),mediaType:this.mediaType,mediaPickerOrigin:this.mediaPickerOrigin,mediaPickerChanged:this.mediaPickerChanged.size,mediaPickerCroppedRotated:this.mediaPickerCroppedRotated.size,mediaPickerDrawing:this.mediaPickerDrawing.size,mediaPickerStickers:this.mediaPickerStickers.size,mediaPickerText:this.mediaPickerText.size,mediaPickerLikeDoc:this.mediaPickerLikeDoc,mediaPickerNotLikeDoc:this.mediaPickerNotLikeDoc,mediaPickerDeleted:this.mediaPickerDeleted}}}]),e}();t.default=u},81931:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MediaPickerChangeTypes=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(65800)),u=r(n(8643));t.MediaPickerChangeTypes={mediaPickerCroppedRotated:"mediaPickerCroppedRotated",mediaPickerDrawing:"mediaPickerCroppedRotated",mediaPickerStickers:"mediaPickerCroppedRotated",mediaPickerText:"mediaPickerCroppedRotated"};var l=function(){function e(){(0,i.default)(this,e),this.mediaByTypeAndOrigin=new Map,this.mediaEventReverseIndex=new Map,this.chatRecipients=null}return(0,o.default)(e,[{key:"pauseTimer",value:function(){this.mediaByTypeAndOrigin.forEach((function(e){e.onPause()}))}},{key:"resumeTimer",value:function(){this.mediaByTypeAndOrigin.forEach((function(e){e.onResume()}))}},{key:"_getKey",value:function(e,t){return`${e}_${t}`}},{key:"_commitLog",value:function(e){new u.default.MediaPicker((0,a.default)((0,a.default)({},e),{},{chatRecipients:this.chatRecipients})).commit()}},{key:"_processNewMedia",value:function(e,t,n){var r=this._getKey(t,n),a=this.mediaByTypeAndOrigin.get(r);if(a)a.onAdd(e),this.mediaEventReverseIndex.set(e,a);else{var i=new s.default(e,t,n);this.mediaByTypeAndOrigin.set(r,i),this.mediaEventReverseIndex.set(e,i)}}},{key:"logChange",value:function(e,t){var n=this.mediaEventReverseIndex.get(e);n&&n.onChange(e,t)}},{key:"logDelete",value:function(e){var t=this.mediaEventReverseIndex.get(e);t&&t.onDelete(e)}},{key:"logSend",value:function(){var e=this;this.mediaByTypeAndOrigin.forEach((function(t){e._commitLog(t.onSend())}))}},{key:"logCancel",value:function(){var e=this;this.mediaByTypeAndOrigin.forEach((function(t){e._commitLog(t.onCancel())}))}},{key:"logAdd",value:function(e,t,n){this.mediaEventReverseIndex.get(e)||this._processNewMedia(e,t,n)}}]),e}();t.default=l},44160:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMetricMediaType=function(e){switch(e){case"audio":return u.default.MEDIA_TYPE.AUDIO;case"document":case"thumbnail-document":return u.default.MEDIA_TYPE.DOCUMENT;case"gif":return u.default.MEDIA_TYPE.GIF;case"image":case"thumbnail-image":return u.default.MEDIA_TYPE.PHOTO;case"ppic":return u.default.MEDIA_TYPE.PROFILE_PIC;case"product":return u.default.MEDIA_TYPE.PRODUCT_IMAGE;case"ptt":return u.default.MEDIA_TYPE.PTT;case"sticker":return u.default.MEDIA_TYPE.STICKER;case"video":case"thumbnail-video":return u.default.MEDIA_TYPE.VIDEO;case"template":return u.default.MEDIA_TYPE.TEMPLATE;case"md-msg-hist":return u.default.MEDIA_TYPE.MD_HISTORY_SYNC;case"md-app-state":return u.default.MEDIA_TYPE.MD_APP_STATE;case"product-catalog-image":return u.default.MEDIA_TYPE.PRODUCT_IMAGE;case"thumbnail-link":return u.default.MEDIA_TYPE.NONE;default:throw new Error(`webMediaType is invalid: ${e}`)}},t.getMetricUploadErrorResultType=function(e){if(e instanceof s.MMSUnauthorizedError)return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_NO_PERMISSIONS;if(e instanceof s.MediaTooLargeError)return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_BAD_MEDIA;if(e instanceof s.MMSThrottleError)return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_THROTTLE;if(e instanceof s.HttpStatusCodeError&&e.status>=500)return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_SERVER;if(e instanceof o.NoMediaHostsError)return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_MEDIA_CONN;if(e instanceof r.CancellationError||e.name===i.ABORT_ERROR)return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_CANCEL;if(e instanceof s.HttpNetworkError)return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_UPLOAD;return u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_UNKNOWN},t.getMetricDownloadErrorResultType=function(e){if(e instanceof s.MMSThrottleError)return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_THROTTLE;if(e instanceof o.NoMediaHostsError)return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_MEDIA_CONN;if(e instanceof s.HttpNetworkError)return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_NETWORK;if(e instanceof s.HttpStatusCodeError)switch(e.status){case 404:case 410:return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_TOO_OLD;case 416:return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_CANNOT_RESUME;case 401:return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_INVALID_URL;case 429:case 507:return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_THROTTLE;default:return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN}if(e instanceof r.CancellationError||e.name===i.ABORT_ERROR)return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_CANCEL;if(e instanceof s.MmsDownloadFilehashMismatchError)return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_ENC_HASH_MISMATCH;return u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN},t.getStatusCode=function(e){if(e instanceof s.HttpStatusCodeError)return e.status},t.generateMediaEventId=function(){return 1+Math.floor(Number.MAX_SAFE_INTEGER*Math.random())},t.logErrorUnknownDetails=function(e,t){if(null==t)return;var n;e.overallDownloadResult===u.default.MEDIA_DOWNLOAD_RESULT_TYPE.ERROR_UNKNOWN?n=u.default.WEBC_MEDIA_OPERATION_CODE.DOWNLOAD:e.overallUploadResult===u.default.MEDIA_UPLOAD_RESULT_TYPE.ERROR_UNKNOWN&&(n=u.default.WEBC_MEDIA_OPERATION_CODE.UPLOAD);if(null==n)return;new u.default.WebcMediaErrorUnknownDetails({mediaId:e.mediaId,webcMediaOperation:n,webcMediaErrorName:t.name}).commit()},t.getMetricBackendStore=function(e){if(!e)return u.default.BACKEND_STORE_TYPE.NON_DIRECT_PATH;switch(e.slice(0,2).toLowerCase()){case"/v":return u.default.BACKEND_STORE_TYPE.EVERSTORE;case"/o":return u.default.BACKEND_STORE_TYPE.OIL}return __LOG__(4,void 0,new Error,!0)`Unrecognized direct path type`,SEND_LOGS("unrecognized-direct-path-type"),null};var i=n(2277),o=n(75103),s=n(89920),u=a(n(8643))},8643:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=n(13528),o=i.TYPES.BOOLEAN,s=i.TYPES.INTEGER,u=i.TYPES.NUMBER,l=i.TYPES.STRING,c=i.TYPES.TIMER,d=Object.freeze({NONE:1,SOFTWARE:2,BUILTIN:3}),f=Object.freeze({NONE:1,SOFTWARE:2,BUILTIN:3}),p=Object.freeze({LIMITED:0,FULL:1,LEGACY:2,LEVEL_3:3,EXTERNAL:4}),h=Object.freeze({API_1:1,API_2:2}),_=Object.freeze({NOT_AVAILABLE:1,SELF_TEST_FAILURE:2,ENC_KEY_READ_FAILURE:3,ENC_KEY_STORED_USED:4,ENC_KEY_PLAIN_DELETED:5,ENC_KEY_PLAIN_RECOVERED:6}),v=Object.freeze({JNI:1,OPENSLES:2}),m=Object.freeze({NON_DIRECT_PATH:1,EVERSTORE:2,OIL:3}),g=Object.freeze({SHOWN:1,CLICK:2,DISMISS:3,ELIGIBLE:4,REVOKED:5}),y=Object.freeze({GROUP:1,SMB_WELCOME:2,SMB_VERIFIED:3,SMB_EDIT_PROFILE:4,SMB_EDIT_DESCRIPTION:5,SMB_EDIT_CATEGORY:6,SMB_EDIT_HOURS:7,SMB_EDIT_EMAIL:8,SMB_CATALOG:9,SMB_CATALOG_SHARE_BANNER:10,CROSS_SELL_PROFILE_INTERSTITIAL:11,CROSS_SELL_CHATS_INTERSTITIAL:12,CROSS_SELL_CHATS_BANNER:13,BUSINESS_ACCOUNT_SYSTEM_MESSAGE:14,SMB_CATALOG_CART_INTERSTITIAL:15,PAYMENTS_ONBOARD_BANNER:16,SMB_DIRECTORY_UPSELL:17,SMB_CATALG_LIST_LWI_ADVERTISE_BANNER:18,SMB_LWI_AD_HUB_EDUCATIONAL_BANNER:19}),E=Object.freeze({UNKNOWN:1,SMB:2,ENT:3}),S=Object.freeze({REGISTRATION:1,SETTINGS:2}),b=Object.freeze({DESCRIPTION:1,HOURS:2,ADDRESS:3,EMAIL:4,WEBSITE:5,CATEGORY:6}),T=Object.freeze({FACEBOOK:0,INSTAGRAM:1}),w=Object.freeze({CALLS_TAB_MISSED:1,CALLS_TAB_OUTGOING:2,SELECT_CONTACT:3,CALL_INFO:4,NOTIFICATION_MISSED:5,CONTACT_INFO:6,QUICK_CONTACT_INFO:7,CONVERSATION:8,CALLS_TAB_INCOMING:9,GROUP_CHAT_INFO:10,GROUP_CHAT_RECENT_LOCATION:11,ANDROID_BROADCAST_DETAILS:12,ANDROID_LIST_CHAT_INFO:13,ANDROID_CONTACTS_APPLICATION:14,CONTACT_VCARD:15,CALLS_TAB_NEW_CALL:16,VOICE_MAIL_CALL_BACK:17,IOS_INTENT:18,LIVE_LOCATION_MAP:19,GROUP_CALL_INFO:20,CALLS_TAB_BOTTOM_SHEET:21,STATUS_VIEWER:22,DEBUG_TOOL:23,GROUP_CHAT_PICKER:24,GROUP_CHAT_DIRECT:25,STELLA:26,CHAT_LIST:27,NEW_CHAT:28,CONVERSATION_OPTIONS:29}),A=Object.freeze({CELLULAR:1,WIFI:2,NONE:3}),C=Object.freeze({UNBOUND:1,BINDED:2}),O=Object.freeze({INVALID:0,CONNECTED:1,REJECTED_BY_USER:2,REJECTED_BY_SERVER:3,MISSED:4,BUSY:5,SETUP_ERROR:6,SERVER_NACK:7,CALL_OFFER_ACK_NOT_RECEIVED:8,MISSED_NO_RECEIPT:9,ACCEPTED_BUT_NOT_CONNECTED:10,CALL_CANCELED_CELLULAR_IN_PROGRESS:11,CALL_CANCELED_AIRPLANE_MODE_ON:12,CALL_CANCELED_NO_NETWORK:13,CALL_OFFER_ACK_CORRUPT:14,CALL_REJECTED_TOS:15,CALL_REJECTED_E2E:16,CALL_REJECTED_UNAVAILABLE:17,CALL_CANCELED_OFFER_NOT_SENT:18,PEER_SETUP_ERROR:19,ACTIVE_ELSEWHERE:20,NO_DECRYPTED_OFFER:21,ACCEPTED_ELSEWHERE:22,REJECTED_ELSEWHERE:23}),M=Object.freeze({CALL_SEGMENT_ONE_ON_ONE_ACTIVE:1,CALL_SEGMENT_GROUP_ACTIVE:2,CALL_SEGMENT_ONE_ON_ONE_HOLD_SELF:3,CALL_SEGMENT_ONE_ON_ONE_HOLD_PEER:4}),I=Object.freeze({UNKNOWN:1,CALL_ACCEPT_FAILED:2,INIT_MEDIA_STREAM_FAILED:3,START_MEDIA_STREAM_FAILED:4,AUDIO_INIT_ERROR:5,HANDLE_OFFER_FAILED:6,HANDLE_ACCEPT_FAILED:7,SOUND_PORT_CREATE_FAILED:8,P2P_TRANSPORT_CREATE_FAILED:9,P2P_TRANSPORT_MEDIA_CREATE_FAILED:10,INCOMPATIBLE_SRTP_KEY_EXCHANGE:11,SRTP_KEY_GENERATION_ERROR:12,UNSUPPORTED_AUDIO_CAPS:13,P2P_TRANSPORT_START_FAILED:14,RELAY_BIND_FAILED:15,CANNOT_INITIALIZE_AUDIO_RECORD_OBJECT:16,PEER_RELAY_BIND_FAILED:17,VIDEO_CAPTURE_INIT_FAILED:18,VIDEO_CAPTURE_START_FAILED:19,VIDEO_RENDER_INIT_FAILED:20,VIDEO_RENDER_START_FAILED:21,VIDEO_ENCODER_OPEN_FAILED:22,VIDEO_DECODER_OPEN_FAILED:23,VIDEO_STREAM_CREATE_FAILED:24,VIDEO_STREAM_SETUP_FAILED:25,PEER_SETUP_FAILED:26,HANDLE_PREACCEPT_FAILED:27}),k=Object.freeze({CALLER:1,CALLEE:2}),P=Object.freeze({ENDED_BY_USER:1,TIMEOUT:2,RECONNECTING:3,ENDED_BY_SELF:4,ENDED_BY_PEER:5,VIDEO_ENCODER_FATAL_ERROR:6,VIDEO_DECODER_FATAL_ERROR:7,AUDIO_RECORD_FATAL_ERROR:8,CRASH:9,DETECT_IDENTITY_CHANGE:10,USER_INVISIBLE:11,RELAY_BIND_FAILED:12,SETUP_FAILED:13,ACCEPTED_ELSEWHERE:14,REJECTED_ELSEWHERE:15,GROUP_CALL_ENDED:16,CALL_IS_FULL:17}),R=Object.freeze({UNKNOWN:0,P2P:1,UDP_RELAY:2,TCP_RELAY:3,MIXED:4}),D=Object.freeze({DISABLED:0,ENABLED:1,PAUSED:2,UPGRADE_REQUEST:3,MUTED:6,ERROR:20}),N=Object.freeze({NONE:0,UNKNOWN:1,APNS_PUSH:2,IOS_VOIP_PUSH:3,GCM_PUSH:4,ONLINE:5,RIM_PUSH:6}),L=Object.freeze({DEFAULT:0,TEXTURE:1,TEXTURE_FALLBACK:2}),x=Object.freeze({DEFAULT:0,CONSERVATIVE:1,STRICT:2,ERROR:11}),U=Object.freeze({ACTION_PRODUCT_ADD_CLICKED:1,ACTION_PRODUCT_ADD_SUCCESS:2,ACTION_PRODUCT_ADD_FAILED:3,ACTION_PRODUCT_EDIT_CLICKED:4,ACTION_PRODUCT_EDIT_SUCCESS:5,ACTION_PRODUCT_EDIT_FAILED:6,ACTION_PRODUCT_DELETE_CLICKED:7,ACTION_PRODUCT_DELETE_SUCCESS:8,ACTION_PRODUCT_DELETE_FAILED:9,ACTION_APPEAL_PRODUCT_CLICKED:10,ACTION_APPEAL_PRODUCT_SUCCESS:11,ACTION_APPEAL_PRODUCT_FAILED:12,ACTION_CREATE_PRODUCT_CATALOG:13,ACTION_CREATE_PRODUCT_CATALOG_SUCCESS:14,ACTION_CREATE_PRODUCT_CATALOG_FAILED:15,ACTION_CATALOG_MENU_ITEM_CLICKED:16,ACTION_PRODUCT_RESUBMIT_CLICKED:17,ACTION_START_IMPORT_FLOW:18,ACTION_IMPORT_POST:19,ACTION_CARD_IMPRESSION:20,ACTION_CARD_ITEM_CLICK:21,ACTION_CARD_MORE_CLICK:22,ACTION_LIST_IMPRESSION:23,ACTION_LIST_ITEM_CLICK:24,ACTION_DETAIL_IMAGE_CLICK:25,ACTION_DETAIL_LINK_CLICK:26,ACTION_IMAGE_LIST_IMPRESSION:27,ACTION_IMAGE_LIST_CLICK:28,ACTION_FULL_IMAGE_IMPRESSION:29,ACTION_FULL_IMAGE_SWIPE:30,ACTION_DETAIL_IMPRESSION:31,ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK:32,ACTION_PRODUCT_IN_CONVERSATION_CLICK:33,ACTION_SEND_PRODUCT_MESSAGE:34,ACTION_ONBOARD_IMPRESSION:35,ACTION_SHARE_CATALOG_LINK_CLICK:36,ACTION_SHARE_PRODUCT_LINK_CLICK:37,ACTION_CATALOG_IN_CONVERSATION_CLICK:38,ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK:39,ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK:40,ACTION_SHARE_CATALOG_COPY_LINK_CLICK:41,ACTION_SHARE_PRODUCT_COPY_LINK_CLICK:42,ACTION_SEND_CATALOG_CLICK:43,ACTION_ORDER_MESSAGE_CLICK:44,ACTION_ORDER_LIST_IMPRESSION:45,ACTION_ORDER_LIST_ITEM_CLICK:46,ACTION_MESSAGE_BUSINESS_BUTTON_CLICK:47,ACTION_QUOTED_PRODUCT_MESSAGE_SEND:48,ACTION_CART_ADD_PRODUCT:49,ACTION_CART_ICON_CLICK:50,ACTION_CART_SNACKBAR_CLICK:51,ACTION_CART_LIST_IMPRESSION:52,ACTION_CART_EDIT_PRODUCT:53,ACTION_CART_DELETE_PRODUCT:54,ACTION_CART_ABANDON:55,ACTION_SEND_ORDER_MESSAGE:56,ACTION_MENU_CLICK:57,ACTION_PRODUCT_HIDE_CLICKED:58,ACTION_PRODUCT_HIDE_SUCCESS:59,ACTION_PRODUCT_HIDE_CANCELLED:60,ACTION_PRODUCT_HIDE_FAILED:61,ACTION_PRODUCT_UNHIDE_CLICKED:62,ACTION_PRODUCT_UNHIDE_SUCCESS:63,ACTION_PRODUCT_UNHIDE_CANCELLED:64,ACTION_PRODUCT_UNHIDE_FAILED:65,ACTION_CATALOG_LIST_MENU_CLICKED:66,ACTION_CATALOG_LIST_MENU_CLICKED_WITH_ADVERTISE_SHOWN:67}),F=Object.freeze({CATALOG_ENTRY_POINT_PROFILE:1,CATALOG_ENTRY_POINT_SETTINGS:2,CATALOG_ENTRY_POINT_MESSAGE:3,CATALOG_ENTRY_POINT_ATTACHMENT_PANEL:4,CATALOG_ENTRY_POINT_NUX:5,CATALOG_ENTRY_POINT_DEEPLINK:6,CATALOG_ENTRY_POINT_CHAT:7,CATALOG_ENTRY_POINT_ORDER_MESSAGE:8,CATALOG_ENTRY_POINT_INVOICE_ATTACHMENT_PANEL:9,CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE:10}),G=Object.freeze({ACTION_CARD_IMPRESSION:1,ACTION_CARD_ITEM_CLICK:2,ACTION_CARD_MORE_CLICK:3,ACTION_LIST_IMPRESSION:4,ACTION_LIST_ITEM_CLICK:5,ACTION_DETAIL_IMAGE_CLICK:6,ACTION_DETAIL_LINK_CLICK:7,ACTION_IMAGE_LIST_IMPRESSION:8,ACTION_IMAGE_LIST_CLICK:9,ACTION_FULL_IMAGE_IMPRESSION:10,ACTION_FULL_IMAGE_SWIPE:11,ACTION_DETAIL_IMPRESSION:12,ACTION_REPORT_PRODUCT:13,ACTION_SEND_PRODUCT_MESSAGE:14,ACTION_REPORT_PRODUCT_SUCCESS:15,ACTION_REPORT_PRODUCT_FAILURE:16,ACTION_QUOTED_PRODUCT_IN_CONVERSATION_CLICK:17,ACTION_PRODUCT_IN_CONVERSATION_CLICK:18,ACTION_SHARE_CATALOG_LINK_CLICK:19,ACTION_SHARE_PRODUCT_LINK_CLICK:20,ACTION_CATALOG_IN_CONVERSATION_CLICK:21,ACTION_SHARE_CATALOG_VIA_WA_LINK_CLICK:22,ACTION_SHARE_PRODUCT_VIA_WA_LINK_CLICK:23,ACTION_SHARE_CATALOG_COPY_LINK_CLICK:24,ACTION_SHARE_PRODUCT_COPY_LINK_CLICK:25,ACTION_CHAT_CATALOG_ICON_CLICK:26,ACTION_MESSAGE_BUSINESS_BUTTON_CLICK:27,ACTION_CART_ADD_PRODUCT:28,ACTION_CART_EDIT_PRODUCT:29,ACTION_CART_DELETE_PRODUCT:30,ACTION_CART_ABANDON:31,ACTION_CART_ICON_CLICK:32,ACTION_CART_SNACKBAR_CLICK:33,ACTION_SEND_ORDER_MESSAGE:34,ACTION_ORDER_LIST_IMPRESSION:35,ACTION_QUOTED_PRODUCT_MESSAGE_SEND:36,ACTION_CART_LIST_IMPRESSION:37,ACTION_ORDER_MESSAGE_CLICK:38,ACTION_ORDER_LIST_ITEM_CLICK:39,ACTION_PLM_CART_CTA_CLICK:40}),B=Object.freeze({OPEN:1,SELECT_FILTER:2,SEARCH_WITH_FILTER:3}),j=Object.freeze({NONE:0,OTHER_LABELS:1,UNREAD:2,GROUP:3,BROADCAST_LIST:4,NEW_CUSTOMER:5,NEW_ORDER:6,PENDING_PAYMENT:7,PAID:8,ORDER_COMPLETE:9}),Y=Object.freeze({REGULAR:1,REGULAR_LOW:2,REGULAR_HIGH:3,CRITICAL_BLOCK:4,CRITICAL_UNBLOCK_LOW:5}),K=Object.freeze({PERSON:1,PUSH:2,OTHER:3,BACKOFF:4}),W=Object.freeze({HOSTNAME:0,IP4:1,IP6:2}),V=Object.freeze({CHATD:1,MMS:2}),H=Object.freeze({PROBLEM_DESCRIPTION:1,SUGGESTED_FAQ:2,EMAIL_SEND:3,IN_APP_FAQ:4,CANCELLED:5,FAQ:6}),$=Object.freeze({DEEP_LINK_EXTERNAL:1,DEEP_LINK_WA_LINK_CLICK:2,QR_CODE_SHEET:3}),z=Object.freeze({DEEP_LINK_UNKNOWN:1,DEEP_LINK_CHAT:2,DEEP_LINK_CONTACT_QR_CODE:3,DEEP_LINK_PAYMENT:4,DEEP_LINK_PRODUCT:5,DEEP_LINK_CATALOG:6,DEEP_LINK_FUTURE_PROOF:7,DEEP_LINK_GROUP_INVITE:8,DEEP_LINK_MSG_FORWARD:9,DEEP_LINK_MESSAGE_QR_CODE:10,DEEP_LINK_OPT_IN_QR_CODE:11,DEEP_LINK_CTWA:12,DEEP_LINK_STICKERPACK:13,DEEP_LINK_NOVI_HUB:14,DEEP_LINK_NOVI_ADD_DEBIT_CARD:15,DEEP_LINK_NOVI_ADD_BANK_ACCOUNT:16,DEEP_LINK_NOVI_WITHDRAW:17,DEEP_LINK_NOVI_RESET_PASSWORD:18,DEEP_LINK_PAYMENT_SIGNUP:19,DEEP_LINK_BIZTOOLS_ACCOUNTS:20,DEEP_LINK_PAYMENT_VIRALITY:21,DEEP_LINK_SETTINGS_ACCOUNT_DELETE:22,DEEP_LINK_SETTINGS_ACCOUNT_REQUEST_INFO:23,DEEP_LINK_SETTINGS_CHATS_HISTORY:24,DEEP_LINK_DISAPPEARING_MODE:25,DEEP_LINK_ARCHIVE_SETTINGS:26}),q=Object.freeze({APP_SWITCH:1,BROWSER:2,CANCELLED:3}),J=Object.freeze({PRIMARY:1,COMPANION:2}),Q=Object.freeze({CHAT_PERSONAL:1,CHAT_GROUP:2,STATUS_USER:3,STATUS_ADS:4,PRODUCT_CATALOG:5,GDPR:6,STICKER_PICKER:7,PROFILE_PICTURE:8,BLOKS:9,P2B:10}),X=Object.freeze({NORMAL_QUALITY:1,MID_QUALITY:2,INELIGIBLE_IMAGE_TOO_SMALL:3,INELIGIBLE_PARTIAL_HASHES_NOT_FOUND:4,ERROR_DETERMINING_ELIGIBILITY:5,NOT_DOWNLOADED_ENOUGH_BYTES_TO_DETERMINE_ELIGIBILITY:6}),Z=Object.freeze({INVALID_SENDER:1,MISSING_DSM:2,INVALID_DSM:3}),ee=Object.freeze({MESSAGE:0,PREKEY_MESSAGE:1,SENDER_KEY_MESSAGE:2}),te=Object.freeze({INDIVIDUAL:0,GROUP:1,LIST:2,STATUS:3}),ne=Object.freeze({INVALID_MESSAGE:0,LEGACY_MESSAGE:1,INVALID_VERSION:2,PRE_KEY_MESSAGE_MISSING_PRE_KEY:3,PRE_KEY_MESSAGE_INVALID_KEY:4,UNTRUSTED_IDENTITY:5,NO_SESSION_AVAILABLE:6,PLAINTEXT_BYTE_MISMATCH:7,UNKNOWN_CIPHERTEXT_TYPE:8,UNKNOWN_CIPHERTEXT_VERSION:9,INVALID_PADDING:10,INVALID_PROTOCOL_BUFFER:11,INVALID_NUMBER_OF_MESSAGE_TYPES:12,INVALID_IMAGE_FILE_LENGTH:13,INVALID_IMAGE_FILE_SHA256:14,INVALID_IMAGE_MEDIA_URL:15,INVALID_IMAGE_MEDIA_KEY:16,INVALID_IMAGE_MIME_TYPE:17,UNKNOWN_V2_TAGS:18,INVALID_EDIT_VERSION:19,INVALID_HSM_NAMESPACE:20,INVALID_HSM_ELEMENT:21,UNKNOWN_PROTOCOL_MESSAGE_TYPE:22,DUPLICATE_MESSAGE:23,FINGERPRINT_IDENTITY_MISMATCH:24,FINGERPRINT_VERSION_MISMATCH:25,INVALID_ARGUMENT:26,INVALID_KEY:27,INVALID_KEY_ID:28,INVALID_MAC:29,NO_MEMORY:30,STALE_KEY_EXCHANGE:31,VRF_SIGNATURE_VERIFICATION_FAILED:32,ERROR_MINIMUM_VALUE:33,ERROR_UNKNOWN:34,INVALID_BROADCAST_STANZA_ATTRIBUTE:35,INVALID_LIST_REPLY_MESSAGE:36,INVALID_LIST_REPLY_ROW_IDENTIFIER:37,INVALID_BUTTONS_RESPONSE_MESSAGE:38,INVALID_BUTTONS_RESPONSE_BUTTON_IDENTIFIER:39,INVALID_ORDER_MESSAGE:40}),re=Object.freeze({MY_PRIMARY:1,OTHER_PRIMARY:2,MY_COMPANION:3,OTHER_COMPANION:4}),ae=Object.freeze({ACTION_OPEN:1,ACTION_SAVE:2,ACTION_DISCARD:3,ACTION_PROFILE_FIELD_OPEN:4,ACTION_PROFILE_FIELD_SAVE:5,ACTION_PROFILE_FIELD_DISCARD:6}),ie=Object.freeze({CALL_TOO_SHORT:1}),oe=Object.freeze({ROOM_OPEN_FAILURE:1,UNKNOWN_ERROR:2}),se=Object.freeze({BOTH:1,SELF:2,PEER:3}),ue=Object.freeze({GIPHY:0,TENOR:1}),le=Object.freeze({INCOMING_CALL_SCREEN_ANSWER:1,INCOMING_CALL_SCREEN_REJECT:2,INCOMING_CALL_NOTIFICATION_ANSWER:3,INCOMING_CALL_NOTIFICATION_REJECT:4,PENDING_CALL_SCREEN_END_AND_ANSWER:5,PENDING_CALL_SCREEN_HOLD_AND_ANSWER:6,PENDING_CALL_SCREEN_REJECT:7,INCOMING_CALL_REMOTE_ANSWER:8,INCOMING_CALL_REMOTE_REJECT:9,PENDING_CALL_NOTIFICATION_END_AND_ANSWER:10,PENDING_CALL_NOTIFICATION_REJECT:11}),ce=Object.freeze({DEFAULT:0,PROBING_ROTT_TO_RELAY:1,PROBING_E2E_PEER_RX:2,PROBING_E2E_RX:3,HIS_RECENT_PEER_RX:4,HIS_RECENT_RX:5,HIS_RECENT_PROBING_ROTT_TO_RELAY:6,HIS_RECENT_PROBING_E2E_PEER_RX:7,HIS_RECENT_PROBING_E2E_RX:8,ONE_SIDE_INITIAL_BANDWIDTH_ESTIMATION:9}),de=Object.freeze({ADD:1,EDIT:2,DELETE:3,VIEW:4,CLICK_POSITIVE:5,CLICK_NEGATIVE:6,UPDATE_LABEL_COUNT:7}),fe=Object.freeze({LABEL:1,MESSAGE:2,CONTACT:3,LABELS_SCREEN:4,LABEL_DETAILS_SCREEN:5,EDIT_LABEL_DIALOG:6,DELETE_LABEL_DIALOG:7,LABEL_MESSAGE_DIALOG:8,LABEL_CHAT_DIALOG:9,ADD_LABEL_DIALOG:10,BULK_UNLABEL_DIALOG:11,LABEL_COMBINED_DIALOG:12,GROUP:13,BROADCAST:14}),pe=Object.freeze({OK:1,ERROR_UNKNOWN:2,SERVER_ERROR:3,SERVER_GOAWAY:4,NETWORK_ERROR:5,ANDROID_KEYSTORE_ERROR:6}),he=Object.freeze({APP_STATE_SYNC_KEY_EXPIRY:1,DEVICE_DEREGISTERATION:2,NO_KEYS:3}),_e=Object.freeze({CRITICAL:1,NON_CRITICAL:2}),ve=Object.freeze({APP_STATE:1,HISTORY:2}),me=Object.freeze({SUCCESS:1,FAILURE:2}),ge=Object.freeze({PAIR_SUCCESS_RECEIVED:1,PAIR_DEVICE_SIGN_SENT:2,FIRST_CONNECT:3,UPLOAD_PREKEYS:4,COMPLETE:5}),ye=Object.freeze({INITIAL_SYNC:1,RESUME_SYNC:2,REGULAR_SYNC:3}),Ee=Object.freeze({MESSAGE_RANGE_UNSET:1,MESSAGE_RANGE_LAST_SYSTEM_MESSAGE_TIMESTAMP_SET:2,MESSAGE_RANGE_MESSAGES_UNSET:3,MESSAGE_RANGE_MESSAGES_EMPTY:4,MESSAGE_RANGE_MESSAGES_CROSS_LIMIT:5,MESSAGE_RANGE_MESSAGE_KEY_UNSET:6,MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_UNSET:7,MESSAGE_RANGE_MESSAGE_KEY_FROM_ME_UNSET:8,MESSAGE_RANGE_MESSAGE_KEY_STANZA_ID_UNSET:9,MESSAGE_RANGE_MESSAGE_KEY_REMOTE_JID_INVALID:10,MESSAGE_RANGE_MESSAGE_KEY_PARTICIPANT_UNSET:11}),Se=Object.freeze({TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D:1,SERVER_DATA_MISMATCH:2,PROTOBUF_DESERIALIZATION_FAILED:3,EXTERNAL_PATCH_EXPIRED:4,MISSING_OR_EMPTY_INDEX:5,SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH:6,DECRYPTION_FAILED:7,MISSING_PATCH_VERSION:8,DUPLICATE_PATCH_VERSION_IN_COLLECTION:9,ENCRYPTION_FAILED:10,MISSING_MUTATION_VERSION:11,MISSING_MUTATION_VALUE:12,INVALID_MUTATION_INDEX:13,PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS:14,MISSING_MUTATION_OPERATION:15,MISSING_MUTATION_RECORD:16,MISSING_MUTATION_KEY_ID:17,PATCH_PROTOBUF_DESERIALIZATION_FAILED:18,ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED:19,MISSING_MUTATION_INDEX:20,MISSING_ACTION_INDEX:21,INVALID_ACTION_INDEX:22,MISSING_ACTION_VALUE:23,MISSING_ACTION_VERSION:24,MISSING_ACTION_TIMESTAMP:25,MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED:26,MUTATIONS_PROTOBUF_SERIALIZATION_FAILED:27,PATCH_PROTOBUF_SERIALIZATION_FAILED:28,ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED:29,MISSING_KEY_ON_ALL_CLIENTS:30,TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY:31,MAC_MISMATCH_SNAPSHOT:33,MAC_MISMATCH_PATCH:34,DB_STORE_NOT_READY:35,TERMINAL_PATCH_MISSING_DATA:36,TERMINAL_PATCH_DESERIALIZATION_ERROR:37,TERMINAL_PATCH_UNKNOWN:38,CYCLIC_MUTATION_DEPENDENCY_IN_PATCH:39,MISSING_SNAPSHOT_VERSION:45,MISSING_SNAPSHOT_MAC:46,MISSING_PATCH_SNAPSHOT_MAC:47,MISSING_PATCH_MAC:48,MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY:49,MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH:50,MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256:51,MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256:52,INVALID_KEY_SHARE_KEY_ID:53,MALFORMED_PENDING_MUTATION:54,MISSING_PATCH_KEY_ID:56,INVALID_KEY_SHARE_KEY_DATA:57,SNAPSHOT_EXPIRED:58,MISSING_SNAPSHOT_KEY_ID:59,SNAPSHOT_MAC_MISMATCH_IN_PATCH:60,SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT:61,XMPP_BAD_REQUEST_FOR_COLLECTION:62,XMPP_NOT_FOUND_FOR_COLLECTION:63,XMPP_BAD_REQUEST_GLOBAL_ERROR:64,XMPP_NOT_FOUND_GLOBAL_ERROR:65,XMPP_BAD_METHOD_GLOBAL_ERROR:66,XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR:67,SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT:68,EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED:69,SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED:70,REQUESTING_MISSING_KEY_WITH_NO_CLIENTS:71}),be=Object.freeze({SYNCD:1,WEB:2}),Te=Object.freeze({BROWSER:1,DESKTOP:2}),we=Object.freeze({MANUAL:1,FULL:2,PREFETCH:3,HEADER:4,THUMBNAIL:5}),Ae=Object.freeze({OK:1,ERROR_UNKNOWN:2,ERROR_TIMEOUT:3,ERROR_DNS:4,ERROR_INSUFFICIENT_SPACE:5,ERROR_TOO_OLD:6,ERROR_CANNOT_RESUME:7,ERROR_HASH_MISMATCH:8,ERROR_INVALID_URL:9,ERROR_OUTPUT_STREAM:10,ERROR_CANCEL:11,DEDUPED:12,ERROR_ENC_HASH_MISMATCH:14,PREFETCH_END:15,ERROR_CANCEL_PROGRAMMATIC:16,ERROR_MEDIA_CONN:17,ERROR_THROTTLE:18,ERROR_SSL:19,ERROR_NETWORK:20,ERROR_CONNECT:21}),Ce=Object.freeze({CHAT_PHOTO_LIBRARY:1,CAMERA_TAB_CAPTURE:2,FORWARD:3,PASTE:4,SHARE_EXTENSION:5,EXPORT:6,MENU_CAMERA_CAPTURE:7,EXTERNAL_CAMERA:8,LINK_PREVIEW_DOWNLOAD:9,CAMERA_TAB_MEDIA_STRIP:10,CAMERA_TAB_PHOTO_LIBRARY:11,CHAT_BUTTON_CAMERA_CAPTURE:12,CHAT_BUTTON_CAMERA_MEDIA_STRIP:13,CHAT_BUTTON_CAMERA_PHOTO_LIBRARY:14,STATUS_TAB_CAMERA_CAPTURE:15,STATUS_TAB_CAMERA_MEDIA_STRIP:16,STATUS_TAB_CAMERA_PHOTO_LIBRARY:17,STATUS_REPLY_CAMERA_CAPTURE:18,STATUS_REPLY_CAMERA_MEDIA_STRIP:19,STATUS_REPLY_CAMERA_PHOTO_LIBRARY:20,MENU_CAMERA_PHOTO_LIBRARY:21,CHAT_GIF_INAPP:22,CHAT_GIF_EXTERNAL:23,STATUS_REPLY_GIF_INAPP:24,STATUS_REPLY_GIF_EXTERNAL:25,SMB_QUICK_REPLY_EDIT:26,SMB_QUICK_REPLY_SEND:27,MEDIA_BROWSER:28,CHAT_QUICK_EDIT:29,CAMERA_TAB_GIF:30,STATUS_TAB_GIF:31}),Oe=Object.freeze({NONE:1,PHOTO:2,VIDEO:3,AUDIO:4,PTT:5,LOCATION:6,CONTACT:7,DOCUMENT:8,URL:9,CALL:10,GIF:11,FUTURE:12,CONTACT_ARRAY:13,LIVE_LOCATION:14,PROFILE_PIC:15,STICKER:16,HSM:17,PRODUCT_IMAGE:18,TEMPLATE:19,MD_APP_STATE:20,MD_HISTORY_SYNC:21,CATALOG_LINK:22,PRODUCT_LINK:23,ORDER:24,LIST:25,LIST_REPLY:26,BUTTON_MESSAGE:27,BUTTON_RESPONSE_MESSAGE:28,PRODUCT_LIST:29,BUTTON_NFM:30}),Me=Object.freeze({REGULAR:1,FAST_FORWARD_EXIST_CHECK:2,VIDEO_EXIST_CHECK:3,PRODUCT:4,MEDIA_RETRY:5,WEB_REUPLOAD:6,THUMBNAIL:7}),Ie=Object.freeze({OK:1,DUPLICATE:3,ERROR_UNKNOWN:2,ERROR_REQUEST:4,ERROR_UPLOAD:5,ERROR_OOM:6,ERROR_IO:7,ERROR_NO_PERMISSIONS:8,ERROR_BAD_MEDIA:9,ERROR_INSUFFICIENT_SPACE:10,ERROR_FNF:11,ERROR_CANCEL:12,ERROR_SERVER:13,ERROR_REQUEST_TIMEOUT:14,ERROR_NOT_FINALIZED:15,ERROR_OPTIMISTIC_HASH:16,ERROR_MEDIA_CONN:17,ERROR_DNS:18,ERROR_THROTTLE:19,ERROR_SSL:20,ERROR_NO_CLIENT_NETWORK:21}),ke=Object.freeze({OTHER:0,INDIVIDUAL:1,GROUP:2,STATUS:3,BROADCAST:4}),Pe=Object.freeze({OK:1,ERROR_UNKNOWN:3,ERROR_NETWORK:4,ERROR_EXPIRED:5,ERROR_CANCELLED:6,ERROR_UPLOAD:7,ERROR_BACKFILL_USYNC_FAILED:8,ERROR_BACKFILL_EXPIRED:9}),Re=Object.freeze({INDIVIDUAL:1,GROUP:2,BROADCAST:3,STATUS:4}),De=Object.freeze({NATIVE:0,OK_HTTP:1,LIGER:2,APACHE:3,WATLS:4}),Ne=Object.freeze({NONE:1,SOFTWARE:2,BUILTIN:3}),Le=Object.freeze({NONE:0,OPTIMISTIC:1,OPT_USED:2,OPT_TAKEOVER:3,OPT_DISABLED:4}),xe=Object.freeze({RESUME_CHECK:1,UPLOAD:2,FINALIZE:3}),Ue=Object.freeze({NONE_NEW_CONTENT:1,NONE_EXPIRED:2,REUSED:3}),Fe=Object.freeze({CONSUMER:1,SMB:2,ENT:3}),Ge=Object.freeze({CELLULAR:1,WIFI:2,NONE:3}),Be=Object.freeze({OTHER:0,ADD:1,VIEW:2,POPULATE:3}),je=Object.freeze({OTHER:0,INDIVIDUAL:1,GROUP:2,STATUS:3,BROADCAST:4}),Ye=Object.freeze({OTHER:0,CIPHERTEXT:1,FANOUT:2,DOWNGRADE:3}),Ke=Object.freeze({IPHONE:1,ANDROID:2,BB:3,BBX:7,S40:4,SYMBIAN:5,WP:6,WEBCLIENT:8,OSMETA:11,ENT:12,SMBA:13,KAIOS:14,SMBI:15,WINDOWS:16,WEB:17,PORTAL:18,BLOKS:19,BLUEA:20,BLUEI:21,FBLITEA:22,GREENA:23,GREENI:24,IGDA:25,IGDI:26,IGLITEA:27,MLITEA:28,MSGRA:29,MSGRI:30,MSGRP:31,MSGRW:32,IGDW:33,PAGE:34,MSGRDM:35,MSGRDW:36,MSGROM:37,MSGROC:38,TEST:9,UNKNOWN:10}),We=Object.freeze({SPEED_1:0,SPEED_1_5:1,SPEED_2:2}),Ve=Object.freeze({AUDIO_QUEUE:0,AVPLAYER:1,AVAUDIOPLAYER:2,OPUSPLAYER:3,ANDROIDPLAYER:4,EXOPLAYER:5}),He=Object.freeze({SENT:1,CANCELLED:2,TOO_SHORT:3}),$e=Object.freeze({FROM_CONVERSATION:0,FROM_VOICEMAIL:1}),ze=Object.freeze({UNKNOWN:0,AAC:1,MP3:2,AMR_NB:3,AMR_WB:4,OPUS:5,MULTIPLE_TRACKS:6}),qe=Object.freeze({MANUAL:0,SEQUENTIAL:1}),Je=Object.freeze({STICKER_STORE_DATA:0,PREVIEW_IMAGE_DOWNLOAD:1,STICKER_PACK_DATA:2,STICKER_SEARCH:3}),Qe=Object.freeze({ACTION_SETTINGS_IMPRESSION:1,ACTION_SETTINGS_ADD_CLICK:2,ACTION_SETTINGS_ADD_ABANDONED:3,ACTION_SETTINGS_ADDED:4,ACTION_SETTINGS_DELETED:5,ACTION_CHAT_IMPRESSION:6,ACTION_CHAT_CLICK:7,ACTION_SETTINGS_EDITED:8,ACTION_CHAT_INVALID_ATTACHMENTS:9,ACTION_SETTINGS_INVALID_ATTACHMENTS:10,ACTION_SETTINGS_MEDIA_TRANSCODE:11,ACTION_CHAT_CLICK_CANCEL:12}),Xe=Object.freeze({UNKNOWN:0,CONVERSATIONS:1,BUTTON:2,KEYBOARD:3}),Ze=Object.freeze({QUICK_REPLY_TRANSCODE_RESULT_OK:1,QUICK_REPLY_TRANSCODE_RESULT_CANCELLED:2,QUICK_REPLY_TRANSCODE_RESULT_FAIL_IMAGE_UNKNOWN:3,QUICK_REPLY_TRANSCODE_RESULT_FAIL_IMAGE_ENCODING:4,QUICK_REPLY_TRANSCODE_RESULT_FAIL_IMAGE_FILE_COPY:5,QUICK_REPLY_TRANSCODE_RESULT_FAIL_VIDEO_UNKNOWN:6}),et=Object.freeze({CELLULAR_UNKNOWN:0,WIFI_UNKNOWN:1,CELLULAR_EDGE:100,CELLULAR_IDEN:101,CELLULAR_UMTS:102,CELLULAR_EVDO:103,CELLULAR_GPRS:104,CELLULAR_HSDPA:105,CELLULAR_HSUPA:106,CELLULAR_HSPA:107,CELLULAR_CDMA:108,CELLULAR_1XRTT:109,CELLULAR_EHRPD:110,CELLULAR_LTE:111,CELLULAR_HSPAP:112}),tt=Object.freeze({CALLS_TAB:1,GROUP_CALL_UI:2,ATTACHMENT:3,WEB_MENU:4}),nt=Object.freeze({STATIC:0,SHARED:1}),rt=Object.freeze({STICKER_SEARCH:1,FORWARD:2,STICKER_PICKER_TAB_RECENTS:3,STICKER_PICKER_TAB_FAVORITES:4,STICKER_PICKER_TAB_EMOTION:5,STICKER_PICKER_TAB_PACK:6,STICKER_PICKER_TAB_CONTEXTUAL_SUGGESTIONS:7}),at=Object.freeze({NONE:1,SPEEX:2,WEBRTC:3,MWEBRTC:4,ECHOSUPPRESSOR:5}),it=Object.freeze({OTHER:1,APP_OPEN:2,CHAT_OPEN:3,IMAGE_OPEN:4,FIRST_FTS_RESULT:5,CONTACTS_OPEN:6}),ot=Object.freeze({UNKNOWN:1,CHAT_PERSONAL:2,CHAT_GROUP:3,STATUS_USER:4,PRODUCT_CATALOG:5,STICKER_WEB:6,PAYMENTS_KYC:7,MESSAGE_HISTORY_SYNC:8}),st=Object.freeze({OTHER:1,CAMERA:2,GALLERY:3,SHARE:4}),ut=Object.freeze({SUCCESS:0,UNKNOWN_ERROR:1,INVALID_ARGS:2,HTTP_ERROR:3,INVALID_RESPONSE:4,MEM_ALLOC_ERROR:5,NO_DEVICE_FOUND:6,NO_IGD_FOUND:7,NOT_ON_WIFI:100,TOO_MANY_PORTS:101,TIMEOUT:102,ERR_CODE_INVALID_ACTION:401,ERR_CODE_INVALID_ARGS:402,ERR_CODE_ACTION_FAILED:501,ERR_CODE_ACTION_NOT_AUTHORIZED:606,ERR_CODE_PINHOLE_SPACE_EXHAUSTED:701,ERR_CODE_FIREWALL_DISABLED:702,ERR_CODE_INBOUND_PINHOLE_NOT_ALLOWED:703,ERR_CODE_NO_SUCH_ENTRY:704,ERR_CODE_PROTOCOL_NOT_SUPPORTED:705,ERR_CODE_INTERNAL_PORT_WILDCARD_NOT_ALLOWED:706,ERR_CODE_PROTOCOL_WILDCARD_NOT_ALLOWED:707,ERR_CODE_WILDCARD_NOT_PERMITTED_IN_SRC_IP:708,ERR_CODE_NO_PACKET_SENT:709,ERR_CODE_SPECIFIED_ARRAY_INDEX_INVALID:713,ERR_CODE_NO_SUCH_ENTRY_IN_ARRAY:714,ERR_CODE_WILD_CARD_NOT_PERMITTED_IN_SRC_IP:715,ERR_CODE_WILD_CARD_NOT_PERMITTED_IN_EXT_PORT:716,ERR_CODE_CONFLICT_IN_MAPPING_ENTRY:718,ERR_CODE_SAME_PORT_VALUES_REQUIRED:724,ERR_CODE_ONLY_PERMANENT_LEASES_SUPPORTED:725,ERR_CODE_REMOTE_HOST_ONLY_SUPPORTS_WILDCARD:726,ERR_CODE_EXTERNAL_PORT_ONLY_SUPORTS_WILDCARD:727,ERR_CODE_NO_PORT_MAPS_AVAILABLE:728,ERR_CODE_CONFLICT_WITH_OTHER_MECHANISMS:729,ERR_CODE_WILD_CARD_NOT_PERMITTED_IN_INT_PORT:732,DISABLED:999}),lt=Object.freeze({SUCCESS:0,UNKNOWN_ERROR:1,INVALID_ARGS:2,HTTP_ERROR:3,INVALID_RESPONSE:4,MEM_ALLOC_ERROR:5,NO_DEVICE_FOUND:6,NO_IGD_FOUND:7,NOT_ON_WIFI:100,TIMEOUT:102,ERR_CODE_INVALID_ACTION:401,ERR_CODE_INVALID_ARGS:402,ERR_CODE_ACTION_FAILED:501,ERR_CODE_ACTION_NOT_AUTHORIZED:606,ERR_CODE_WILD_CARD_NOT_PERMITTED_IN_SRC_IP:715,ERR_CODE_WILD_CARD_NOT_PERMITTED_IN_EXT_PORT:716,ERR_CODE_NO_PORT_MAPS_AVAILABLE:728,ERR_CODE_CONFLICT_WITH_OTHER_MECHANISMS:729,ERR_CODE_WILD_CARD_NOT_PERMITTED_IN_INT_PORT:732,DISABLED:999}),ct=Object.freeze({INVALID_STANZA:1,JSON_FETCH:2,JSON_PARSE:3,IMAGE_FETCH:4}),dt=Object.freeze({BANNER_APPEAR:1,BANNER_SELECT:2,MODAL_APPEAR:3,MODAL_DISMISS:4,MODAL_LINK_FOLLOW:5,MODAL_ACCEPT:6,BLOCKING_MODAL_APPEAR:7,BLOCKING_MODAL_LINK_FOLLOW:8,BLOCKING_MODAL_ACCEPT:9,BANNER_DISMISS:10,EDUCATION_1_APPEAR:11,EDUCATION_1_DISMISS:12,EDUCATION_1_CONTINUE:13,MODAL_BACK:14,BLOCKING_MODAL_BACK:15}),ft=Object.freeze({ACTION_IMPRESSION:1,ACTION_CLICK_WEBSITE:2,ACTION_CLICK_LOCATION:3,ACTION_CLICK_HOURS:4,ACTION_CLICK_DESCRIPTION:5,ACTION_CLICK_EMAIL:6,ACTION_CLICK_ADDTOCONTACT:7,ACTION_CLICK_MORE_BIZ_PROFILE:8,ACTION_CLICK_MESSAGE:9,ACTION_CLICK_VOICE_CALL:10,ACTION_CLICK_VIDEO_CALL:11,ACTION_CLICK_FORWARD:12,ACTION_CLICK_CATALOG_ICON:13,ACTION_CLICK_SHOPS_ICON:14,ACTION_CLICK_APP_LINK:15,ACTION_APP_IMPRESSION:16,ACTION_CLICK_STATUS:17,ACTION_EXIT:18}),pt=Object.freeze({STATIC:0,SHARED:1}),ht=Object.freeze({INVALID:0,NOT_SINGLE_SEGMENT_CALL:1,NOT_START_FROM_VIDEO_CALL:2,HAS_AV_SWITCH:3,SELF_CAMERA_OFF:4,PEER_CAMERA_OFF:5,SELF_HAS_NETWORK_TRANSITION:6,PEER_HAS_NETWORK_TRANSITION:7,CALL_TOO_SHORT:8,PASS:100}),_t=Object.freeze({UNCACHED:0,IDLE:1,CHECKING:2,DOWNLOADING:3,UPDATEREADY:4,OBSOLETE:5}),vt=Object.freeze({UNCACHED:0,IDB:1,SW:2}),mt=Object.freeze({INDIVIDUAL:0,GROUP:1,BROADCAST_LIST:2}),gt=Object.freeze({WEBCRYPTO:0,CRYPTOJS:1}),yt=Object.freeze({ENCRYPT:0,DECRYPT:1}),Et=Object.freeze({PROD:0,INTERN:1,DEV:2}),St=Object.freeze({SUCCESS:0,SILENCE:1,ZEROWIDTH:2}),bt=Object.freeze({DOWNLOAD:1,UPLOAD:2}),Tt=Object.freeze({OTHER:0,RESOLVED:1,NEEDS_RMR:2}),wt=Object.freeze({NEW_GROUP:1,CREATE_A_ROOM:2,PROFILE:3,CATALOG:4,ARCHIVED:5,STARRED:6,LABELS:7,SETTINGS:8,LOG_OUT:9,CONTACT_INFO:10,SELECT_MESSAGES:11,CLOSE_CHAT:12,MUTE_NOTIFICATIONS:13,CLEAR_MESSAGES:14,DELETE_CHAT:15,REPORT_BUSINESS:16,BLOCK:17,SETTINGS_NOTIFICATIONS:18,SETTINGS_THEME:19,SETTINGS_CHAT_WALLPAPER:20,SETTINGS_BLOCKED:21,SETTINGS_HELP:22,OPEN:23,CLOSE:24}),At=Object.freeze({THREADS_SCREEN_CLICK:1,CHAT_SCREEN_CLICK:2,SETTINGS_SCREEN_CLICK:3}),Ct=Object.freeze({LOAD_PREV:0,LOAD_NEXT:1,LOAD_AROUND:2}),Ot=Object.freeze({NAVIGATE_NEXT:0,RELOAD:1,BACK_FORWARD:2,UNDEFINED:255}),Mt=Object.freeze({UNKNOWN:0,USER_SCROLL:1,NEW_MESSAGE_PREFETCH:2,SEARCH_RESULT_CLICK:3}),It=Object.freeze({OTHER:0,MSG_CLICK:1,STICKER_PANEL_ICON:2,MEDIA_VIEWER:3,VIDEO_STREAMING:4,STATUS_V3:5,MULTI_SELECT_DOWNLOAD:6,DOCUMENT_DOWNLOAD:7,PIP:8,STICKER_PANEL_STICKER:9,SEND_TO_CHAT:10,UPLOAD:11,MSG_INIT:12,MSG_UPDATE:13,MSG_DELETE:14,MSG_RENDER:15}),kt=Object.freeze({TEXT:0,URL:1,IMAGE:2,VIDEO:3,GIF:4}),Pt=Object.freeze({MY:0,RECENT:1,VIEWED:2,MUTED:3}),Rt=Object.freeze({QR:0,MAIN:1,SYNCING:2,OFFLINE:3,CONFLICT:4,PROXYBLOCK:5,TOS_BLOCK:6,SMB_TOS_BLOCK:7,DEPRECATED_VERSION:8}),Dt=Object.freeze({PHONE:0,SERVER:1}),Nt=Object.freeze({GET:0,SET:1}),Lt=Object.freeze({WEB:1,WIN32:2,DARWIN:3,IOS_TABLET:4,ANDROID_TABLET:5,WINSTORE:6,MACSTORE:7,DARWIN_BETA:8,WIN32_BETA:9}),xt=Object.freeze({SOURCE_OTHER:1,SOURCE_INSTAGRAM:2}),Ut=Object.freeze({DISCONNECTED:1,CONNECTING:2,CONNECTED:3,UNKNOWN:4}),Ft=Object.freeze({DISABLED:0,ALLOC:1,ALLOC_AND_RTP:2}),Gt=(0,i.defineGlobal)({appVersion:[17,l,["regular","private"]],browser:[779,l,["regular"]],browserVersion:[295,l,["regular"]],datacenter:[2795,l,["regular"]],deviceName:[13,l,["regular","private"]],deviceVersion:[4505,l,["regular"]],mcc:[5,s,["regular","private"]],mnc:[3,s,["regular","private"]],networkIsWifi:[23,o,["regular"]],platform:[11,Ke,["regular","private"]],webcBucket:[875,l,["regular"]],webcEnv:[633,Et,["regular"]],webcNativeAutolaunch:[1009,o,["regular"]],webcNativeBetaUpdates:[1007,o,["regular"]],webcPhoneAppVersion:[1005,l,["regular"]],webcPhoneCharging:[783,o,["regular"]],webcPhoneDeviceManufacturer:[829,l,["regular"]],webcPhoneDeviceModel:[831,l,["regular"]],webcPhoneOsBuildNumber:[833,l,["regular"]],webcPhoneOsVersion:[835,l,["regular"]],webcPhonePlatform:[707,Ke,["regular"]],webcTabId:[3727,l,["regular"]],webcWebArch:[6605,l,["regular"]],webcWebDeviceManufacturer:[6599,l,["regular"]],webcWebDeviceModel:[6601,l,["regular"]],webcWebOsReleaseNumber:[6603,l,["regular"]],webcWebPlatform:[899,Lt,["regular"]]});(0,i.defineEvents)({ArchiveSettings:[2788,{keepChatsArchived:[1,o]},[1,1,1],"regular"],BannerEvent:[1578,{bannerOperation:[2,g],bannerType:[1,y]},[1,1,1],"regular"],Call:[462,{acceptAckLatencyMs:[1016,c],acceptedButNotConnectedTimeSpentMs:[1015,c],activeRelayProtocol:[412,s],allocErrorBitmap:[593,s],androidAudioRouteMismatch:[1055,o],androidCamera2MinHardwareSupportLevel:[444,p],androidCameraApi:[443,h],androidSystemPictureInPictureT:[477,c],androidTelecomTimeSpentBeforeReject:[497,c],audioCodecDecodedFecFrames:[755,s],audioCodecDecodedPlcFrames:[756,s],audioCodecEncodedFecFrames:[751,s],audioCodecEncodedNonVoiceFrames:[753,s],audioCodecEncodedVoiceFrames:[752,s],audioCodecReceivedFecFrames:[754,s],audioDeviceIssues:[860,s],audioDeviceLastIssue:[861,s],audioDeviceSwitchCount:[867,s],audioDeviceSwitchDuration:[866,c],audioFrameLoss1xMs:[724,c],audioFrameLoss2xMs:[725,c],audioFrameLoss4xMs:[726,c],audioFrameLoss8xMs:[727,c],audioGetFrameUnderflowPs:[83,s],audioInbandFecDecoded:[679,s],audioInbandFecEncoded:[678,s],audioLossPeriodCount:[722,s],audioNackReqPktsRecvd:[646,s],audioNackReqPktsSent:[645,s],audioNackRtpRetransmitDiscardCount:[649,s],audioNackRtpRetransmitFailCount:[651,s],audioNackRtpRetransmitRecvdCount:[648,s],audioNackRtpRetransmitReqCount:[647,s],audioNackRtpRetransmitSentCount:[650,s],audioNumPiggybackRxPkt:[1008,s],audioNumPiggybackTxPkt:[1007,s],audioPlayCbLatencyAvg:[1032,s],audioPlayCbLatencyMax:[1031,s],audioPlayCbLatencyMin:[1030,s],audioPlayCbLatencyStddev:[1033,s],audioPutFrameOverflowPs:[82,s],audioRecCbLatencyAvg:[1036,s],audioRecCbLatencyMax:[1035,s],audioRecCbLatencyMin:[1034,s],audioRecCbLatencyStddev:[1037,s],audioRtxPktDiscarded:[677,s],audioRtxPktProcessed:[676,s],audioRtxPktSent:[675,s],audioRxAvgFpp:[728,u],audioRxPktLossPctDuringPip:[642,u],audioTotalBytesOnNonDefCell:[450,u],avAvgDelta:[192,u],avMaxDelta:[193,u],aveNumPeersAutoPaused:[578,s],aveTimeBwResSwitches:[994,c],aveTimeBwVidRcDynCondTrue:[719,c],avgClockCbT:[139,c],avgDecodeT:[136,c],avgDiffAudioVideoFrameT:[1028,c],avgEncRestartAndKfGenT:[1048,c],avgEncRestartIntervalT:[1047,c],avgEncodeT:[135,c],avgEventQueuingDelay:[816,s],avgPlayCbT:[137,c],avgRecordCbIntvT:[495,c],avgRecordCbT:[138,c],avgRecordGetFrameT:[140,c],avgTargetBitrate:[141,u],avgTcpConnCount:[413,s],avgTcpConnLatencyInMsec:[414,c],batteryDropMatched:[355,o],batteryDropTriggered:[442,o],batteryLowMatched:[354,o],batteryLowTriggered:[441,o],batteryRulesApplied:[353,o],biDirRelayRebindLatencyMs:[843,c],biDirRelayResetLatencyMs:[844,c],builtinAecAvailable:[33,o],builtinAecEnabled:[38,o],builtinAecImplementor:[36,l],builtinAecUuid:[37,l],builtinAgcAvailable:[34,o],builtinNsAvailable:[35,o],bweEvaluationScoreE2e:[1068,s],bweEvaluationScoreSfuDl:[1070,s],bweEvaluationScoreSfuUl:[1069,s],c2DecAvgT:[302,c],c2DecFrameCount:[300,s],c2DecFramePlayed:[301,s],c2EncAvgT:[298,c],c2EncCpuOveruseCount:[299,s],c2EncFrameCount:[297,s],c2RxTotalBytes:[296,s],c2TxTotalBytes:[295,s],callAcceptFuncT:[132,c],callAecMode:[39,d],callAecOffset:[42,s],callAecTailLength:[43,s],callAgcMode:[52,f],callAndrGcmFgEnabled:[268,o],callAndroidAudioMode:[55,s],callAndroidRecordAudioPreset:[57,s],callAndroidRecordAudioSource:[56,s],callAudioEngineType:[54,v],callAudioRestartCount:[96,u],callAudioRestartReason:[97,u],callAvgAudioRxPipBitrate:[640,u],callAvgRottRx:[259,c],callAvgRottTx:[258,c],callAvgRtt:[107,c],callAvgVideoRxPipBitrate:[638,u],callBatteryChangePct:[195,u],callCalculatedEcOffset:[50,s],callCalculatedEcOffsetStddev:[51,s],callCreatorHid:[505,l],callDefNetwork:[405,A],callEcRestartCount:[99,u],callEchoEnergy:[46,u],callEchoLikelihood:[44,s],callEchoLikelihoodBeforeEc:[47,u],callEndFuncT:[130,c],callEndReconnecting:[70,o],callEndReconnectingBeforeNetworkChange:[877,o],callEndReconnectingBeforeP2pFailover:[875,o],callEndReconnectingBeforeRelayFailover:[869,o],callEndReconnectingBeforeRelayReset:[948,o],callEndReconnectingSoonAfterCallActive:[848,o],callEndReconnectingSoonAfterNetworkChange:[878,o],callEndReconnectingSoonAfterP2pFailover:[876,o],callEndReconnectingSoonAfterRelayFailover:[870,o],callEndReconnectingSoonAfterRelayReset:[949,o],callEndedDuringAudFreeze:[518,o],callEndedDuringVidFreeze:[517,o],callEndedInterrupted:[23,o],callEnterPipModeCount:[626,s],callFromUi:[2,w],callHistEchoLikelihood:[45,u],callInitialRtt:[109,c],callInterrupted:[22,o],callIsLastSegment:[388,o],callLastRtt:[108,c],callMaxRtt:[106,c],callMessagesBufferedCount:[422,s],callMinRtt:[105,c],callNetwork:[76,A],callNetworkSubtype:[77,s],callNsMode:[53,Ne],callOfferAckTimout:[159,u],callOfferDelayT:[243,c],callOfferElapsedT:[102,c],callOfferFanoutCount:[588,s],callOfferReceiptDelay:[134,c],callP2pAvgRtt:[457,c],callP2pDisabled:[18,o],callP2pMinRtt:[456,c],callPeerAppVersion:[15,l],callPeerIpStr:[10,l],callPeerIpv4:[8,s],callPeerPlatform:[5,l],callPendingCallsAcceptedCount:[501,s],callPendingCallsCount:[498,s],callPendingCallsRejectedCount:[499,s],callPendingCallsTerminatedCount:[500,s],callPipMode10sCount:[628,s],callPipMode10sT:[633,c],callPipMode120sCount:[631,s],callPipMode120sT:[636,c],callPipMode240sCount:[632,s],callPipMode240sT:[637,c],callPipMode30sCount:[629,s],callPipMode30sT:[634,c],callPipMode60sCount:[630,s],callPipMode60sT:[635,c],callPipModeT:[627,c],callPlaybackBufferSize:[59,s],callPlaybackCallbackStopped:[25,o],callPlaybackFramesPs:[93,u],callPlaybackSilenceRatio:[95,u],callRadioType:[231,et],callRandomId:[529,l],callRecentPlaybackFramesPs:[94,u],callRecentRecordFramesPs:[29,u],callReconnectingStateCount:[438,s],callRecordBufferSize:[58,s],callRecordCallbackStopped:[24,o],callRecordFramesPs:[28,s],callRecordMaxEnergyRatio:[98,u],callRecordSilenceRatio:[26,s],callRejectFuncT:[131,c],callRelayAvgRtt:[455,c],callRelayBindStatus:[16,C],callRelayCreateT:[104,c],callRelayMinRtt:[454,c],callRelayServer:[17,l],callResult:[63,O],callRingingT:[103,c],callRxAvgBitrate:[121,u],callRxAvgBwe:[122,u],callRxAvgJitter:[125,c],callRxAvgLossPeriod:[128,c],callRxMaxJitter:[124,c],callRxMaxLossPeriod:[127,c],callRxMinJitter:[123,c],callRxMinLossPeriod:[126,c],callRxPktLossPct:[120,u],callRxPktLossRetransmitPct:[892,u],callRxStoppedT:[100,c],callSamplingRate:[30,s],callSegmentIdx:[389,s],callSegmentType:[393,M],callSelfIpStr:[9,l],callSelfIpv4:[7,s],callServerNackErrorCode:[68,s],callSetupErrorType:[71,I],callSetupT:[101,c],callSide:[1,k],callSoundPortFuncT:[133,c],callStartFuncT:[129,c],callSwAecMode:[41,s],callSwAecType:[40,at],callT:[92,c],callTermReason:[69,P],callTestBucket:[19,l],callTestEvent:[318,s],callTonesDetectedInRecord:[49,s],callTonesDetectedInRingback:[48,s],callTransitionCount:[78,s],callTransitionCountCellularToWifi:[432,s],callTransitionCountWifiToCellular:[431,s],callTransport:[72,R],callTransportExtrayElected:[515,o],callTransportP2pToRelayFallbackCount:[80,s],callTransportPeerTcpUsed:[587,o],callTransportRelayToRelayFallbackCount:[79,s],callTransportTcpFallbackToUdp:[516,o],callTransportTcpUsed:[514,o],callTxAvgBitrate:[112,u],callTxAvgBwe:[113,u],callTxAvgJitter:[116,c],callTxAvgLossPeriod:[119,c],callTxMaxJitter:[115,c],callTxMaxLossPeriod:[118,c],callTxMinJitter:[114,c],callTxMinLossPeriod:[117,c],callTxPktErrorPct:[111,u],callTxPktLossPct:[110,u],callUserRate:[20,s],callWakeupSource:[156,N],calleeAcceptToDecodeT:[447,c],callerInContact:[476,o],callerOfferToDecodeT:[445,c],callerVidRtpToDecodeT:[446,c],cameraFormats:[765,s],cameraIssues:[850,s],cameraLastIssue:[851,s],cameraOffCount:[331,s],cameraPermission:[849,o],cameraPreviewMode:[322,L],cameraStartDuration:[852,c],cameraStartFailureDuration:[856,c],cameraStartMode:[233,x],cameraStartToFirstFrameT:[916,c],cameraStopDuration:[853,c],cameraStopFailureCount:[858,s],cameraSwitchCount:[855,s],cameraSwitchDuration:[854,c],cameraSwitchFailureDuration:[857,c],clampedBwe:[527,o],codecSamplingRate:[624,s],combinedE2eAvgRtt:[760,u],combinedE2eMaxRtt:[761,u],combinedE2eMinRtt:[759,u],confBridgeSamplingRate:[623,s],conservativeModeStopped:[974,o],conservativeRampUpExploringT:[743,c],conservativeRampUpHeldCount:[643,s],conservativeRampUpHoldingT:[741,c],conservativeRampUpRampingUpT:[742,c],createdFromGroupCallDowngrade:[519,o],dataLimitOnAltNetworkReached:[537,o],deviceBoard:[230,l],deviceHardware:[229,l],dtxRxByteFrameCount:[914,s],dtxRxCount:[912,s],dtxRxDurationT:[911,c],dtxRxTotalCount:[913,s],dtxTxByteFrameCount:[910,s],dtxTxCount:[619,s],dtxTxDurationT:[618,c],dtxTxTotalCount:[909,s],echoCancellationMsPerSec:[320,s],echoCancelledFrameCount:[940,s],echoEstimatedFrameCount:[941,s],echoSpeakerModeFrameCount:[987,s],encoderCompStepdowns:[81,s],endCallAfterConfirmation:[90,ie],failureToCreateAltSocket:[534,s],failureToCreateTestAltSocket:[532,s],fastplayMaxDurationMs:[1005,c],fastplayNumFrames:[1004,s],fastplayNumTriggers:[1006,s],fieldStatsRowType:[328,se],finishedDlBwe:[503,o],finishedOverallBwe:[528,o],finishedUlBwe:[502,o],freezeAheadBweCongestionCorrPct:[1051,u],freezeBweCongestionCorrPct:[1009,u],groupAcceptNoCriticalGroupUpdate:[1013,o],groupAcceptToCriticalGroupUpdateMs:[1014,c],groupCallCallerParticipantCountAtCallStart:[439,s],groupCallInviteCountSinceCallStart:[360,s],groupCallIsGroupCallInvitee:[357,o],groupCallIsLastSegment:[356,o],groupCallNackCountSinceCallStart:[361,s],groupCallReringCountSinceCallStart:[946,s],groupCallReringNackCountSinceCallStart:[947,s],groupCallSegmentIdx:[329,s],groupCallTotalCallTSinceCallStart:[358,c],groupCallTotalP3CallTSinceCallStart:[359,c],groupCallVideoMaximizedCount:[592,s],hasRestrictedSettingsForAudioCalls:[539,o],highPeerBweT:[884,c],hisBasedInitialTxBitrate:[342,s],hisInfoCouldBeUsedForInitBwe:[339,o],historyBasedBweActivated:[807,o],historyBasedBweEnabled:[806,o],historyBasedBweSuccess:[808,o],historyBasedBweVideoTxBitrate:[809,s],incomingCallUiAction:[387,le],initBweSource:[337,ce],initialEstimatedTxBitrate:[244,u],isIpv6Capable:[91,o],isPendingCall:[976,o],isRejoin:[927,o],isRering:[945,o],isUpnpExternalIpPrivate:[260,o],isUpnpExternalIpTheSameAsReflexiveIp:[261,o],jbAvgDelay:[146,u],jbAvgDelayUniform:[644,u],jbAvgTargetSize:[1012,u],jbDiscards:[150,u],jbEmpties:[151,u],jbEmptyPeriods1x:[997,u],jbEmptyPeriods2x:[998,u],jbEmptyPeriods4x:[999,u],jbEmptyPeriods8x:[1e3,u],jbGets:[152,u],jbLastDelay:[149,u],jbLost:[277,u],jbLostEmptyDuringPip:[641,s],jbLostEmptyHighPeerBwePerSec:[777,u],jbLostEmptyLowPeerBwePerSec:[775,u],jbLostEmptyLowToHighPeerBwePerSec:[776,u],jbMaxDelay:[148,u],jbMinDelay:[147,u],jbNonSpeechDiscards:[846,u],jbPuts:[153,u],jbTotalEmptyPeriods:[996,u],joinableAfterCall:[895,o],joinableDuringCall:[894,o],joinableNewUi:[893,o],l1Locations:[986,l],lastConnErrorStatus:[415,s],libsrtpVersionUsed:[504,nt],longConnect:[21,o],lossOfAltSocket:[535,s],lossOfTestAltSocket:[533,s],lowDataUsageBitrate:[157,u],lowPeerBweT:[885,c],lowToHighPeerBweT:[886,c],malformedStanzaXpath:[452,l],maxEventQueueDepth:[558,s],mediaStreamSetupT:[448,c],micAvgPower:[253,s],micMaxPower:[252,s],micMinPower:[251,s],micPermission:[859,o],micStartDuration:[862,c],micStartToFirstCallbackT:[931,c],micStopDuration:[863,c],multipleTxRxRelaysInUse:[838,o],nativeSamplesPerFrame:[32,l],nativeSamplingRate:[31,l],neteqAcceleratedFrames:[653,s],neteqExpandedFrames:[652,s],networkMediumChangeLatencyMs:[995,c],numAsserts:[933,s],numConnectedParticipants:[330,s],numConnectedPeers:[1052,s],numCriticalGroupUpdateDropped:[567,s],numDirPjAsserts:[985,s],numInvitedParticipants:[1054,s],numL1Errors:[929,s],numL2Errors:[930,s],numOutOfOrderCriticalGroupUpdate:[625,s],numOutgoingRingingPeers:[1053,s],numPeersAutoPausedOnce:[577,s],numRenderSkipGreenFrame:[1029,s],numResSwitch:[993,s],numVidDlAutoPause:[574,s],numVidDlAutoResume:[576,s],numVidDlAutoResumeRejectBadAudio:[579,s],numVidRcDynCondTrue:[717,s],numVidUlAutoPause:[559,s],numVidUlAutoPauseFail:[560,s],numVidUlAutoPauseRejectHighSendingRate:[564,s],numVidUlAutoPauseRejectTooEarly:[565,s],numVidUlAutoPauseUserAction:[566,s],numVidUlAutoResume:[561,s],numVidUlAutoResumeFail:[562,s],numVidUlAutoResumeRejectAudioLqm:[563,s],numberOfProcessors:[27,s],offerAckLatencyMs:[1017,c],oibweDlProbingTime:[805,c],oibweE2eProbingTime:[802,c],oibweNotFinishedWhenCallActive:[868,o],oibweOibleProbingTime:[803,c],oibweUlProbingTime:[804,c],onMobileDataSaver:[525,o],onWifiAtStart:[540,o],oneSideInitRxBitrate:[507,s],oneSideInitTxBitrate:[506,s],oneSideMinPeerInitRxBitrate:[509,s],oneSideRcvdPeerRxBitrate:[508,o],opusVersion:[287,s],p2pSuccessCount:[522,s],pcntPoorAudLqmAfterPause:[599,u],pcntPoorAudLqmBeforePause:[598,u],pcntPoorVidLqmAfterPause:[597,u],pcntPoorVidLqmBeforePause:[596,u],peerCallNetwork:[264,Ge],peerCallResult:[66,O],peerTransport:[591,R],peerVideoHeight:[191,s],peerVideoWidth:[190,s],peerXmppStatus:[4,Ut],pingsSent:[160,u],pongsReceived:[161,u],poolMemUsage:[510,s],poolMemUsagePadding:[511,s],presentEndCallConfirmation:[89,ie],prevCallTestBucket:[1060,l],previousCallInterval:[266,c],previousCallVideoEnabled:[265,o],previousCallWithSamePeer:[267,o],previousJoinNotEnded:[1001,o],probeAvgBitrate:[327,u],pushToCallOfferDelay:[158,u],rcMaxrtt:[155,u],rcMinrtt:[154,u],reconnectingStartsBeforeCallActive:[847,o],recordCircularBufferFrameCount:[84,s],reflectivePortsDiff:[162,u],relayBindFailureAltNetSwitchSuccess:[583,s],relayBindFailureAltNetSwitchTriggered:[582,s],relayBindFailureAltNetworkSwitchToCallEnd:[586,c],relayBindFailureFallbackCount:[581,s],relayBindFailureIpVersionSwitchToCallEnd:[585,c],relayBindFailureIpVersionSwitchTriggered:[584,s],relayBindTimeInMsec:[424,c],relayElectionTimeInMsec:[423,c],relayFallbackOnRxDataFromRelay:[481,s],relayFallbackOnStopRxDataOnP2p:[482,s],relayFallbackOnTransportStanzaNotification:[483,s],renderFreezeHighPeerBweT:[780,c],renderFreezeLowPeerBweT:[778,c],renderFreezeLowToHighPeerBweT:[779,c],rxProbeCountSuccess:[291,s],rxProbeCountTotal:[290,s],rxRelayRebindLatencyMs:[841,c],rxRelayResetLatencyMs:[842,c],rxTotalBitrate:[145,u],rxTotalBytes:[143,u],rxTpFbBitrate:[294,u],rxTrafficStartFalsePositive:[758,o],sbweAvgDowntrend:[963,u],sbweAvgUptrend:[962,u],sbweCeilingCongestionCount:[783,s],sbweCeilingCount:[781,s],sbweCeilingMissingRtcpCongestionCount:[786,s],sbweCeilingNoNewDataReceivedCongestionCount:[787,s],sbweCeilingPktLossCount:[782,s],sbweCeilingRttCongestionCount:[784,s],sbweCeilingZeroRttCongestionCount:[785,s],sbweHoldCount:[961,s],sbweRampDownCount:[960,s],sbweRampUpCount:[959,s],senderBweInitBitrate:[975,s],sfuAbnormalUplinkRttCount:[879,s],sfuAvgE2ePlrAtDlSbweCeiling:[1076,u],sfuAvgE2ePlrAtUlSbweCeiling:[1071,u],sfuAvgE2eRttAtDlSbweCeiling:[1080,u],sfuAvgE2eRttAtUlSbweCeiling:[1072,u],sfuAvgLqHqTargetBitrateDiff:[1002,u],sfuAvgTargetBitrate:[673,u],sfuAvgTargetBitrateHq:[943,u],sfuBalancedPktLossAtCongestion:[1075,s],sfuBalancedRttAtCongestion:[1079,s],sfuBwaAllParticipantDlBwUsedPct:[919,u],sfuBwaAllParticipantUlBwUsedPct:[918,u],sfuBwaChangeNumStreamCount:[928,s],sfuBwaSelfDlBwUsedPct:[1003,u],sfuBwaSelfUlBwUsedPct:[917,u],sfuBwaSimulcastDisabledCntReasonBattery:[920,s],sfuBwaSimulcastDisabledCntReasonNetMedium:[921,s],sfuBwaVidEncHqStreamScheduledT:[926,c],sfuBwaVidEncLqStreamScheduledT:[925,c],sfuDownlinkAvgCombinedBwe:[662,u],sfuDownlinkAvgPktLossPct:[667,u],sfuDownlinkAvgRemoteBwe:[661,u],sfuDownlinkAvgSenderBwe:[660,u],sfuDownlinkMaxPktLossPct:[668,u],sfuDownlinkMinPktLossPct:[666,u],sfuDownlinkSbweAvgDowntrend:[973,u],sfuDownlinkSbweAvgUptrend:[972,u],sfuDownlinkSbweCeilingCongestionCount:[797,s],sfuDownlinkSbweCeilingCount:[795,s],sfuDownlinkSbweCeilingMissingRtcpCongestionCount:[800,s],sfuDownlinkSbweCeilingNoNewDataReceivedCongestionCount:[801,s],sfuDownlinkSbweCeilingPktLossCount:[796,s],sfuDownlinkSbweCeilingRttCongestionCount:[798,s],sfuDownlinkSbweCeilingZeroRttCongestionCount:[799,s],sfuDownlinkSbweHoldCount:[971,s],sfuDownlinkSbweRampDownCount:[970,s],sfuDownlinkSbweRampUpCount:[969,s],sfuDownlinkSenderBweDiffStddev:[958,u],sfuDownlinkSenderBweStddev:[957,u],sfuFirstRxParticipantReportTime:[883,c],sfuFirstRxUplinkReportTime:[881,c],sfuHighDlPktLossAtCongestion:[1074,s],sfuHighDlRttAtCongestion:[1078,s],sfuHighUlPktLossAtCongestion:[1073,s],sfuHighUlRttAtCongestion:[1077,s],sfuMaxTargetBitrate:[674,u],sfuMaxTargetBitrateHq:[944,u],sfuMinTargetBitrate:[672,u],sfuMinTargetBitrateHq:[942,u],sfuPeerDownlinkStddevAllCombinedBwe:[813,u],sfuRxParticipantReportCount:[882,s],sfuRxUplinkReportCount:[880,s],sfuSimulcastAvgDecSessFlipTime:[833,c],sfuSimulcastAvgEncSchedEventUpdateTime:[837,c],sfuSimulcastBwaCandidateCnt:[923,s],sfuSimulcastBwaDownlinkBottleneckCount:[874,s],sfuSimulcastBwaUplinkBottleneckCount:[873,s],sfuSimulcastDecAvgKfRecvTimeSinceFlip:[952,c],sfuSimulcastDecAvgNumReplayedCachedPkt:[951,u],sfuSimulcastDecAvgNumSkippedCachedPkt:[950,u],sfuSimulcastDecNumNoKf:[953,s],sfuSimulcastDecSessFlipCount:[744,s],sfuSimulcastDecSessFlipErrorBitmap:[768,s],sfuSimulcastDecSessFlipErrorCount:[767,s],sfuSimulcastEncErrorBitmap:[766,s],sfuSimulcastEncSchedEventCount:[732,s],sfuSimulcastEncSchedEventErrorCount:[735,s],sfuSimulcastEncSchedEventSkipCount:[734,s],sfuSimulcastEncSchedEventSuccessUpdateCount:[733,s],sfuSimulcastMaxDecSessFlipTime:[832,c],sfuSimulcastMaxEncSchedEventUpdateTime:[836,c],sfuSimulcastMinDecSessFlipTime:[831,c],sfuSimulcastMinEncSchedEventUpdateTime:[835,c],sfuUplinkAvgCombinedBwe:[659,u],sfuUplinkAvgPktLossPct:[664,u],sfuUplinkAvgRemoteBwe:[658,u],sfuUplinkAvgRtt:[670,u],sfuUplinkAvgSenderBwe:[657,u],sfuUplinkMaxPktLossPct:[665,u],sfuUplinkMaxRtt:[671,u],sfuUplinkMinPktLossPct:[663,u],sfuUplinkMinRtt:[669,u],sfuUplinkSbweAvgDowntrend:[968,u],sfuUplinkSbweAvgUptrend:[967,u],sfuUplinkSbweCeilingCongestionCount:[790,s],sfuUplinkSbweCeilingCount:[788,s],sfuUplinkSbweCeilingMissingRtcpCongestionCount:[793,s],sfuUplinkSbweCeilingNoNewDataReceivedCongestionCount:[794,s],sfuUplinkSbweCeilingPktLossCount:[789,s],sfuUplinkSbweCeilingRttCongestionCount:[791,s],sfuUplinkSbweCeilingZeroRttCongestionCount:[792,s],sfuUplinkSbweHoldCount:[966,s],sfuUplinkSbweRampDownCount:[965,s],sfuUplinkSbweRampUpCount:[964,s],sfuUplinkSenderBweDiffStddev:[956,u],sfuUplinkSenderBweStddev:[955,u],simulcastAvgLqBitrateWhenHqEnabled:[1011,s],simulcastReplayVideoRenderFreeze2xT:[982,c],simulcastReplayVideoRenderFreeze4xT:[983,c],simulcastReplayVideoRenderFreeze8xT:[984,c],simulcastReplayVideoRenderFreezeT:[981,c],skippedBwaCycles:[748,s],skippedBweCycles:[747,s],smallCallButton:[6,o],speakerAvgPower:[250,s],speakerMaxPower:[249,s],speakerMinPower:[248,s],speakerStartDuration:[864,c],speakerStartToFirstCallbackT:[932,c],speakerStopDuration:[865,c],startedInitBweProbing:[900,o],switchToDefTriggeredByGoodDefNet:[538,s],switchToNonSfu:[750,s],switchToNonSimulcast:[1057,s],switchToSfu:[749,s],switchToSimulcast:[1056,s],symmetricNatPortGap:[257,s],systemNotificationOfNetChange:[541,s],telecomFrameworkCallStartDelayT:[440,c],timeEnc1280w:[992,c],timeEnc160w:[988,c],timeEnc320w:[989,c],timeEnc480w:[990,c],timeEnc640w:[991,c],timeOnNonDefNetwork:[530,c],timeOnNonDefNetworkPerSegment:[531,c],timeSinceLastRtpToCallEndInMsec:[715,c],timeVidRcDynCondTrue:[718,c],totalAudioFrameLossMs:[723,c],totalBytesOnNonDefCell:[449,u],totalTimeVidDlAutoPause:[575,c],totalTimeVidUlAutoPause:[573,c],trafficShaperAvgAudioQueueMs:[898,c],trafficShaperAvgQueueMs:[242,c],trafficShaperAvgVideoQueueMs:[899,c],trafficShaperMaxDelayViolations:[240,s],trafficShaperMinDelayViolations:[241,s],trafficShaperOverflowCount:[237,s],trafficShaperQueueEmptyCount:[238,s],trafficShaperQueuedAudioPacketCount:[896,s],trafficShaperQueuedPacketCount:[239,s],trafficShaperQueuedVideoPacketCount:[897,s],transportCurTimeInMsecAsyncWriteWaitingInQueue:[552,c],transportLastSendOsError:[555,s],transportNumAsyncWriteDispatched:[580,s],transportNumAsyncWriteQueued:[551,s],transportOvershoot10PercCount:[699,s],transportOvershoot20PercCount:[700,s],transportOvershoot40PercCount:[701,s],transportOvershootLongestStreakS:[708,s],transportOvershootSinceLast10sCount:[704,s],transportOvershootSinceLast15sCount:[705,s],transportOvershootSinceLast1sCount:[702,s],transportOvershootSinceLast30sCount:[706,s],transportOvershootSinceLast5sCount:[703,s],transportOvershootStreakAvgS:[709,u],transportOvershootTimeBetweenAvgS:[707,u],transportRtpSendErrorRate:[557,u],transportSendErrorCount:[556,s],transportSplitterRxErrCnt:[1059,s],transportSplitterTxErrCnt:[1058,s],transportSrtpRxMaxPktSize:[1038,s],transportSrtpRxRejectedBitrate:[763,u],transportSrtpRxRejectedDupPktCnt:[772,s],transportSrtpRxRejectedPktCnt:[762,s],transportSrtpTxFailedPktCnt:[774,s],transportSrtpTxMaxPktSize:[773,s],transportTotalNumSendOsError:[554,s],transportTotalTimeInMsecAsyncWriteQueueToDispatch:[553,c],transportUndershoot10PercCount:[710,s],transportUndershoot20PercCount:[711,s],transportUndershoot40PercCount:[712,s],triggeredButDataLimitReached:[536,s],txProbeCountSuccess:[289,s],txProbeCountTotal:[288,s],txRelayRebindLatencyMs:[839,c],txRelayResetLatencyMs:[840,c],txTotalBitrate:[144,u],txTotalBytes:[142,u],txTpFbBitrate:[293,u],upnpAddResultCode:[246,ut],upnpRemoveResultCode:[247,lt],usedInitTxBitrate:[341,s],userDescription:[87,l],userProblems:[88,s],userRating:[86,s],vidAveSuccBurstyPktLossLength:[691,s],vidAveSuccNonBurstyPktLossLength:[692,s],vidCorrectRetxDetectPcnt:[688,s],vidFreezeTMsInSample0:[695,c],vidJbAvgDelay:[1062,u],vidJbDiscards:[1063,u],vidJbEmpties:[1064,u],vidJbGets:[1065,u],vidJbLost:[1061,u],vidJbPuts:[1066,u],vidJbResets:[1067,u],vidNumBurstyPktLoss:[689,s],vidNumFecDroppedNoHole:[696,s],vidNumFecDroppedTooBig:[697,s],vidNumNonBurstyPktLoss:[690,s],vidNumRetxDropped:[698,s],vidNumRxRetx:[757,s],vidPktRxState0:[693,l],vidRxFecRateInSample0:[694,u],vidUlAutoPausedAtCallEnd:[589,o],vidUlTimeSinceAutoPauseAtCallEnd:[590,c],vidWrongRetxDetectPcnt:[716,s],videoActiveTime:[276,c],videoAheadAvSyncDiscardedFramesAvgDeltaT:[1041,c],videoAheadAvSyncRenderedFramesAvgDeltaT:[1043,c],videoAheadNumAvSyncDiscardFrames:[1039,s],videoAveDelayLtrp:[484,c],videoAvgCombPsnr:[390,u],videoAvgEncodingPsnr:[410,u],videoAvgScalingPsnr:[408,u],videoAvgSenderBwe:[186,u],videoAvgTargetBitrate:[184,u],videoAvgTargetBitrateHq:[828,u],videoBehindAvSyncDiscardedFramesAvgDeltaT:[1042,c],videoBehindAvSyncRenderedFramesAvgDeltaT:[1044,c],videoBehindNumAvSyncDiscardFrames:[1040,s],videoCaptureAvgFps:[222,s],videoCaptureConverterTs:[226,c],videoCaptureDupFrames:[887,s],videoCaptureFrameOverwriteCount:[496,s],videoCaptureHeight:[228,s],videoCaptureWidth:[227,s],videoCodecScheme:[401,s],videoCodecSubType:[303,s],videoCodecType:[236,s],videoDecAvgBitrate:[220,s],videoDecAvgConsecutiveKfVp8:[610,u],videoDecAvgConsecutiveLtrpVp8:[611,u],videoDecAvgFps:[207,u],videoDecAvgFramesFromFoundLtrVp8:[612,u],videoDecAvgFramesFromUnfoundLtrVp8:[613,u],videoDecColorId:[205,s],videoDecCrcMismatchFrames:[419,s],videoDecErrorFrames:[174,s],videoDecErrorFramesCodecSwitch:[714,s],videoDecErrorFramesDuplicate:[713,s],videoDecErrorFramesH264:[680,s],videoDecErrorFramesIgnoreConsecutive:[478,s],videoDecErrorFramesOutoforder:[682,s],videoDecErrorFramesSpsPpsH264:[812,s],videoDecErrorFramesSpsPpsMissingAfterResolutionSwitch:[810,s],videoDecErrorFramesSpsPpsNotSupportedAfterResolutionSwitch:[811,s],videoDecErrorFramesVp8:[681,s],videoDecErrorLtrpFramesVp8:[462,s],videoDecErrorLtrpFramesVp8CrcMismatch:[479,s],videoDecErrorLtrpFramesVp8NoLtr:[480,s],videoDecErrorLtrpFramesVp8NoLtr10:[615,s],videoDecErrorLtrpFramesVp8NoLtr5:[614,s],videoDecInputFrames:[172,s],videoDecKeyframes:[175,s],videoDecLatency:[223,c],videoDecLatencyH264:[684,c],videoDecLatencyVp8:[683,c],videoDecLostPackets:[210,s],videoDecLtrpFramesVp8:[461,s],videoDecLtrpPoolCreateFailed:[490,o],videoDecName:[204,s],videoDecNumPliThrottledByAllLtrp:[915,s],videoDecNumSkippedFramesVp8:[616,s],videoDecNumSwitchesToAllLtrp:[617,s],videoDecOutputFrames:[173,s],videoDecRestart:[206,s],videoDecSkipPackets:[209,s],videoDecodePausedCount:[232,s],videoDowngradeCount:[273,s],videoEnabled:[163,o],videoEnabledAtCallStart:[270,o],videoEncAllLtrpTimeInMsec:[609,c],videoEncAvgBitrate:[221,s],videoEncAvgConsecutiveKfVp8:[605,u],videoEncAvgConsecutiveLtrpVp8:[606,u],videoEncAvgFps:[216,u],videoEncAvgFpsHq:[825,u],videoEncAvgFramesFromFoundLtrVp8:[604,u],videoEncAvgFramesFromUnfoundLtrVp8:[603,u],videoEncAvgPsnrKeyFrameVp8:[465,u],videoEncAvgPsnrLtrpFrameVp8:[469,u],videoEncAvgPsnrPFramePrevRefVp8:[474,u],videoEncAvgQpKeyFrameVp8:[466,u],videoEncAvgQpLtrpFrameVp8:[470,u],videoEncAvgQpPFramePrevRefVp8:[475,u],videoEncAvgSizeAllLtrpFrameVp8:[685,u],videoEncAvgSizeKeyFrameVp8:[464,u],videoEncAvgSizeLtrpFrameVp8:[468,u],videoEncAvgSizePFramePrevRefVp8:[473,u],videoEncAvgTargetFps:[215,u],videoEncAvgTargetFpsHq:[827,u],videoEncColorId:[213,s],videoEncDeviationAllLtrpFrameVp8:[686,u],videoEncDeviationPFramePrevRefVp8:[687,u],videoEncDiscardFrame:[217,s],videoEncDiscardFrameHq:[938,s],videoEncDropFrames:[179,s],videoEncDropFramesHq:[937,s],videoEncErrorFrames:[178,s],videoEncErrorFramesHq:[936,s],videoEncFatalErrorNum:[1049,s],videoEncInputFrames:[176,s],videoEncInputFramesHq:[934,s],videoEncKeyframes:[180,s],videoEncKeyframesHq:[939,s],videoEncKeyframesVp8:[463,s],videoEncKfErrCodecSwitchT:[731,c],videoEncKfIgnoreOldFrames:[729,s],videoEncKfQueueEmpty:[730,s],videoEncLatency:[224,c],videoEncLatencyHq:[826,c],videoEncLtrpFrameGenFailedVp8:[471,s],videoEncLtrpFramesVp8:[467,s],videoEncLtrpPoolCreateFailed:[491,o],videoEncLtrpToKfFallbackVp8:[494,s],videoEncModifyNum:[1050,s],videoEncName:[212,s],videoEncNumErrorLtrHoldFailedVp8:[600,s],videoEncNumErrorLtrHoldFailedVp810:[602,s],videoEncNumErrorLtrHoldFailedVp85:[601,s],videoEncNumSuccessHfFallbackVp8:[622,s],videoEncNumSwitchesToAllLtrp:[607,s],videoEncOutputFrames:[177,s],videoEncOutputFramesHq:[935,s],videoEncPFramePrevRefVp8:[472,s],videoEncRegularLtrpTimeInMsec:[608,c],videoEncRestart:[214,s],videoEncRestartPresetChange:[1046,s],videoEncRestartResChange:[1045,s],videoEncTimeOvershoot10PercH264:[363,c],videoEncTimeOvershoot10PercH265:[366,c],videoEncTimeOvershoot10PercVp8:[369,c],videoEncTimeOvershoot10PercVp9:[372,c],videoEncTimeOvershoot20PercH264:[364,c],videoEncTimeOvershoot20PercH265:[367,c],videoEncTimeOvershoot20PercVp8:[370,c],videoEncTimeOvershoot20PercVp9:[373,c],videoEncTimeOvershoot40PercH264:[365,c],videoEncTimeOvershoot40PercH265:[368,c],videoEncTimeOvershoot40PercVp8:[371,c],videoEncTimeOvershoot40PercVp9:[374,c],videoEncTimeSpentInFastH264Ms:[1026,c],videoEncTimeSpentInFasterH264Ms:[1025,c],videoEncTimeSpentInMediumH264Ms:[1027,c],videoEncTimeSpentInNegative10Vp8Ms:[1019,c],videoEncTimeSpentInNegative12Vp8Ms:[1018,c],videoEncTimeSpentInNegative4Vp8Ms:[1022,c],videoEncTimeSpentInNegative6Vp8Ms:[1021,c],videoEncTimeSpentInNegative8Vp8Ms:[1020,c],videoEncTimeSpentInSuperfastH264Ms:[1023,c],videoEncTimeSpentInVeryfastH264Ms:[1024,c],videoEncTimeUndershoot10PercH264:[375,c],videoEncTimeUndershoot10PercH265:[378,c],videoEncTimeUndershoot10PercVp8:[381,c],videoEncTimeUndershoot10PercVp9:[384,c],videoEncTimeUndershoot20PercH264:[376,c],videoEncTimeUndershoot20PercH265:[379,c],videoEncTimeUndershoot20PercVp8:[382,c],videoEncTimeUndershoot20PercVp9:[385,c],videoEncTimeUndershoot40PercH264:[377,c],videoEncTimeUndershoot40PercH265:[380,c],videoEncTimeUndershoot40PercVp8:[383,c],videoEncTimeUndershoot40PercVp9:[386,c],videoFecRecovered:[183,s],videoH264Time:[334,s],videoH265Time:[335,s],videoHeight:[189,s],videoInitRxBitrate16s:[904,u],videoInitRxBitrate2s:[901,u],videoInitRxBitrate4s:[902,u],videoInitRxBitrate8s:[903,u],videoInitialCodecScheme:[402,s],videoInitialCodecType:[321,s],videoLastCodecType:[404,s],videoLastSenderBwe:[185,u],videoMaxCombPsnr:[392,u],videoMaxEncodingPsnr:[411,u],videoMaxRxBitrate:[426,u],videoMaxScalingPsnr:[409,u],videoMaxTargetBitrate:[420,u],videoMaxTargetBitrateHq:[829,u],videoMaxTxBitrate:[425,u],videoMaxTxBitrateHq:[824,u],videoMinCombPsnr:[391,u],videoMinEncodingPsnr:[407,u],videoMinScalingPsnr:[406,u],videoMinTargetBitrate:[421,u],videoMinTargetBitrateHq:[830,u],videoNackSendDelay:[872,c],videoNewPktsBeforeNack:[871,s],videoNpsiGenFailed:[594,s],videoNpsiNoNack:[595,s],videoNumAvSyncDiscardFrames:[1010,s],videoNumH264Frames:[332,s],videoNumH265Frames:[333,s],videoPeerState:[275,D],videoPeerTriggeredPauseCount:[654,s],videoRenderAvgFps:[208,s],videoRenderConverterTs:[225,c],videoRenderDelayT:[196,c],videoRenderDupFrames:[888,s],videoRenderFreeze2xT:[304,c],videoRenderFreeze4xT:[305,c],videoRenderFreeze8xT:[306,c],videoRenderFreezeT:[235,c],videoRenderInitFreeze16sT:[908,c],videoRenderInitFreeze2sT:[905,c],videoRenderInitFreeze4sT:[906,c],videoRenderInitFreeze8sT:[907,c],videoRenderInitFreezeT:[526,c],videoRenderNumFreezes:[569,s],videoRenderNumSinceLastFreeze10s:[571,s],videoRenderNumSinceLastFreeze30s:[572,s],videoRenderNumSinceLastFreeze5s:[570,s],videoRenderSumTimeSinceLastFreeze:[568,c],videoRtcpAppRxFailed:[493,s],videoRtcpAppTxFailed:[492,s],videoRxBitrate:[169,u],videoRxBweHitTxBwe:[187,o],videoRxBytesRtcpApp:[489,u],videoRxFecBitrate:[219,u],videoRxFecFrames:[182,s],videoRxKfBeforeLtrpAfterRpsi:[485,s],videoRxLtrpFramesVp8:[460,s],videoRxNumCodecSwitch:[721,s],videoRxPackets:[201,s],videoRxPktErrorPct:[171,u],videoRxPktLossPct:[170,u],videoRxPktRtcpApp:[487,s],videoRxRtcpFir:[621,s],videoRxRtcpNack:[203,s],videoRxRtcpNpsi:[521,s],videoRxRtcpPli:[202,s],videoRxRtcpRpsi:[459,s],videoRxTotalBytes:[168,u],videoSelfState:[274,D],videoSenderBweDiffStddev:[954,u],videoSenderBweStddev:[348,u],videoTargetBitrateReaches1000kbpsT:[351,c],videoTargetBitrateReaches1500kbpsT:[435,c],videoTargetBitrateReaches2000kbpsT:[436,c],videoTargetBitrateReaches200kbpsT:[349,c],videoTargetBitrateReaches250kbpsT:[433,c],videoTargetBitrateReaches500kbpsT:[350,c],videoTargetBitrateReaches750kbpsT:[434,c],videoTotalBytesOnNonDefCell:[451,u],videoTxBitrate:[165,u],videoTxBitrateHq:[823,u],videoTxBytesRtcpApp:[488,u],videoTxFecBitrate:[218,u],videoTxFecFrames:[181,s],videoTxNumCodecSwitch:[720,s],videoTxPackets:[197,s],videoTxPacketsHq:[818,s],videoTxPktErrorPct:[167,u],videoTxPktErrorPctHq:[821,u],videoTxPktLossPct:[166,u],videoTxPktLossPctHq:[822,u],videoTxPktRtcpApp:[486,s],videoTxResendPackets:[198,s],videoTxResendPacketsHq:[819,s],videoTxRtcpFirEmptyJb:[620,s],videoTxRtcpNack:[200,s],videoTxRtcpNpsi:[520,s],videoTxRtcpPli:[199,s],videoTxRtcpPliHq:[820,s],videoTxRtcpRpsi:[458,s],videoTxTotalBytes:[164,u],videoTxTotalBytesHq:[817,u],videoUpdateEncoderFailureCount:[453,s],videoUpgradeCancelByTimeoutCount:[325,s],videoUpgradeCancelCount:[323,s],videoUpgradeCount:[272,s],videoUpgradeRejectByTimeoutCount:[326,s],videoUpgradeRejectCount:[324,s],videoUpgradeRequestCount:[271,s],videoWidth:[188,s],vpxLibUsed:[513,pt],waLongFreezeCount:[891,s],waReconnectFreezeCount:[890,s],waShortFreezeCount:[889,s],waVoipHistoryGetVideoTxBitrateResult:[845,s],waVoipHistoryGetVideoTxBitrateSuccess:[740,o],waVoipHistoryIpAddressNotAvailable:[834,o],waVoipHistoryIsCallRecordLoaded:[737,o],waVoipHistoryIsCallRecordSaved:[738,o],waVoipHistoryIsInitialized:[769,o],waVoipHistoryNumOfCallRecordFound:[771,s],waVoipHistoryNumOfCallRecordLoaded:[739,s],waVoipHistorySaveCallRecordConditionCheckStatus:[770,ht],warpHeaderRxTotalBytes:[656,u],warpHeaderTxTotalBytes:[655,u],warpRxPktErrorCount:[746,s],warpTxPktErrorCount:[745,s],weakCellularNetConditionDetected:[429,s],weakWifiNetConditionDetected:[430,s],weakWifiSwitchToDefNetSuccess:[397,s],weakWifiSwitchToDefNetSuccessByPeriodicalCheck:[395,s],weakWifiSwitchToDefNetTriggered:[396,s],weakWifiSwitchToDefNetTriggeredByPeriodicalCheck:[394,s],weakWifiSwitchToNonDefNetFalsePositive:[399,s],weakWifiSwitchToNonDefNetSuccess:[400,s],weakWifiSwitchToNonDefNetTriggered:[398,s],wifiRssiAtCallStart:[263,s],wpNotifyCallFailed:[64,s],wpSoftwareEcMatches:[65,o],xmppStatus:[3,Ut],xorCipher:[269,Ft]},[1,1,1],"regular"],CatalogBiz:[1722,{cartToggle:[13,o],catalogAppealReason:[4,l],catalogBizAction:[1,U],catalogEntryPoint:[7,F],catalogSessionId:[3,l],deepLinkOpenFrom:[8,$],errorCode:[5,s],isOrderMsgAttached:[10,o],orderId:[9,l],productCount:[6,s],productId:[2,l],productIds:[12,l],quantity:[11,s]},[1,1,1],"regular"],CatalogView:[1630,{bizPlatform:[16,E],cartToggle:[15,o],catalogEntryPoint:[7,F],catalogEventSampled:[8,o],catalogOwnerJid:[6,l],catalogReportReasonCode:[4,l],catalogSessionId:[2,l],catalogViewAction:[1,G],deepLinkOpenFrom:[9,$],isNewProductAddedToCart:[13,o],isOrderMsgAttached:[10,o],orderId:[11,l],productId:[5,l],quantity:[12,s]},[1,1,1],"regular"],ChatFilterEvent:[1616,{actionType:[1,B],filterType:[2,j],sessionId:[3,s]},[1,1,1],"regular"],ChatFolderOpen:[2808,{activityIndicatorCount:[2,s],folderType:[1,l],hasImportantMessages:[3,o]},[1,1,1],"regular"],ContactSend:[2234,{channel:[1,V],isMultiVcard:[2,o],messageSendResult:[3,Pe],messageSendT:[4,c],vcardDataSize:[5,s]},[1,1,1],"regular"],ContactUsSession:[470,{contactUsAutomaticEmail:[3,o],contactUsExitState:[1,H],contactUsFaq:[2,o],contactUsLogs:[4,o],contactUsMenuFaqT:[12,c],contactUsOutage:[5,o],contactUsOutageEmail:[6,o],contactUsProblemDescription:[7,l],contactUsScreenshotC:[19,u],contactUsT:[11,c],languageCode:[21,l]},[1,1,1],"regular"],DeepLinkOpen:[2136,{deepLinkOpenFrom:[2,$],deepLinkType:[3,z],isContact:[4,o],linkOwnerType:[5,Fe]},[1,1,1],"regular"],E2eMessageRecv:[478,{e2eCiphertextType:[5,ee],e2eCiphertextVersion:[6,s],e2eDestination:[4,te],e2eFailureReason:[2,ne],e2eSenderType:[8,re],e2eSuccessful:[1,o],messageMediaType:[7,Oe],offline:[9,o],retryCount:[3,s]},[1,20,20],"regular"],E2eMessageSend:[476,{e2eCiphertextType:[5,ee],e2eCiphertextVersion:[6,s],e2eDestination:[4,te],e2eFailureReason:[2,ne],e2eReceiverType:[8,J],e2eSuccessful:[1,o],encRetryCount:[9,s],messageMediaType:[7,Oe],retryCount:[3,s]},[1,5,5],"regular"],E2eRetryAfterDelivery:[894,{deviceType:[4,J],messageType:[1,Re],msgRetryCount:[3,s],retryRevoke:[2,o]},[1,1,1],"regular"],EditBusinessProfile:[1466,{businessProfileEntryPoint:[10,S],editBusinessProfileSessionId:[2,l],editProfileAction:[1,ae],editProfileActionField:[9,b],hasAddress:[5,o],hasCategory:[4,o],hasDescription:[3,o],hasEmail:[7,o],hasHours:[6,o],hasWebsite:[8,o]},[1,1,1],"regular"],EphemeralMessageTime:[2742,{zombieStateDuration:[1,s]},[1,1,1],"regular"],EphemeralPurgeCount:[2744,{messageCount:[1,s]},[1,1,1],"regular"],EphemeralSettingChange:[2370,{chatEphemeralityDuration:[1,s]},[1,1,1],"regular"],ForwardSend:[1728,{e2eCiphertextType:[12,ee],e2eCiphertextVersion:[11,s],ephemeralityDuration:[18,s],fastForwardEnabled:[5,o],isFrequentlyForwarded:[14,o],mediaCaptionPresent:[10,o],messageForwardAgeT:[4,c],messageIsFanout:[6,o],messageIsFastForward:[3,o],messageIsInternational:[9,o],messageMediaType:[2,Oe],messageSendT:[13,c],messageType:[1,Re],resendCount:[8,s],retryCount:[7,s],wouldBeFrequentlyForwardedAt3:[16,o],wouldBeFrequentlyForwardedAt4:[17,o]},[1,1,1],"regular"],GifFromProviderSent:[1124,{gifSearchProvider:[1,ue]},[1,1,1],"regular"],GifSearchCancelled:[1126,{gifSearchProvider:[1,ue]},[1,1,1],"regular"],GifSearchNoResults:[1128,{gifSearchProvider:[1,ue],inputLanguageCode:[3,l],languageCode:[2,l]},[1,1,1],"regular"],GifSearchResultTapped:[1122,{gifSearchProvider:[1,ue],rank:[2,s]},[1,1,1],"regular"],GifSearchSessionStarted:[1134,{gifSearchProvider:[1,ue]},[1,1,1],"regular"],HfmTextSearchComplete:[2186,{},[1,1,1],"regular"],LabelEvent:[1422,{itemsLabeledCount:[5,s],labelCount:[4,s],labelOperation:[2,de],labelTarget:[1,fe],predefinedLabelNumber:[3,s]},[1,1,1],"regular"],Login:[460,{androidKeystoreState:[10,_],connectionOrigin:[6,K],connectionT:[5,c],loginResult:[1,pe],loginT:[3,c],longConnect:[4,o],passive:[8,o],retryCount:[2,s],sequenceStep:[7,s],serverErrorCode:[9,s]},[1,1,1],"regular"],MdAppStateDirtyBits:[2520,{dirtyBitsFalsePositive:[2,o]},[1,20,1e3],"regular"],MdAppStateKeyRotation:[2518,{mdAppStateKeyRotationReason:[1,he]},[1,20,1e3],"regular"],MdAppStateMessageRange:[2522,{additionalMessagesCount:[1,s]},[1,20,1e3],"regular"],MdAppStateOfflineNotifications:[2602,{redundantCount:[1,s]},[1,20,1e3],"regular"],MdAppStateSyncDaily:[2300,{crossIndexConflictCount:[11,s],invalidActionCount:[4,s],keyRotationRemoveCount:[12,s],missingKeyCount:[9,s],mutationCount:[1,s],storedMutationCount:[7,s],unsetActionCount:[8,s],unsupportedActionCount:[5,s],uploadConflictCount:[10,s]},[1,1,1],"regular"],MdBadDeviceSentMessage:[2176,{dsmError:[2,Z],peerType:[1,J]},[1,1,1],"regular"],MdBootstrapAppStateDataDownloaded:[2294,{mdBootstrapContactsCount:[5,s],mdBootstrapPayloadSize:[4,s],mdBootstrapPayloadType:[2,_e],mdBootstrapStepDuration:[6,s],mdBootstrapStepResult:[7,me],mdSessionId:[1,l],mdStorageQuotaBytes:[8,s],mdStorageQuotaUsedBytes:[9,s],mdTimestamp:[3,s]},[1,1,1],"regular"],MdBootstrapDataApplied:[2298,{collection:[5,Y],mdBootstrapContactsCount:[8,s],mdBootstrapPayloadType:[3,_e],mdBootstrapSource:[2,ve],mdBootstrapStepDuration:[6,s],mdSessionId:[1,l],mdTimestamp:[4,s],usedSnapshot:[7,o]},[1,1,1],"regular"],MdBootstrapHistoryDataDownloaded:[2296,{mdBootstrapChatsCount:[6,s],mdBootstrapMessagesCount:[5,s],mdBootstrapPayloadSize:[4,s],mdBootstrapPayloadType:[2,_e],mdBootstrapStepDuration:[7,s],mdBootstrapStepResult:[8,me],mdHsOldestMessageTimestamp:[11,s],mdSessionId:[1,l],mdStorageQuotaBytes:[9,s],mdStorageQuotaUsedBytes:[10,s],mdTimestamp:[3,s]},[1,1,1],"regular"],MdCriticalEvent:[2746,{mdCriticalEventCode:[1,Ee]},[1,1,1],"regular"],MdDeviceSyncAck:[2180,{chatType:[1,ke],revoke:[2,o]},[1,1,1],"regular"],MdFatalError:[2304,{collection:[2,Y],mdFatalErrorCode:[1,Se]},[1,1,1],"regular"],MdLinkDeviceCompanion:[2576,{mdDurationS:[8,s],mdLinkDeviceCompanionErrorCode:[6,s],mdLinkDeviceCompanionStage:[4,ge],mdSessionId:[1,l],mdTimestampS:[7,s],mdWasUpgraded:[5,o]},[1,1,1],"regular"],MdPushnameValidation:[2302,{didWebUserChangeSyncd:[3,o],isSyncdPushnameEmpty:[2,o],matches:[1,o],validationCaller:[4,be],validationStage:[5,ye],webPlatform:[6,Te]},[1,1,1e3],"regular"],MdRetryFromUnknownDevice:[2178,{offline:[2,o],senderType:[1,J]},[1,1,1],"regular"],MediaDownload2:[1590,{connectionType:[31,W],debugMediaException:[24,l],debugMediaIp:[22,l],debugUrl:[23,l],downloadBytesTransferred:[20,u],downloadConnectT:[15,c],downloadHttpCode:[18,s],downloadIsReuse:[17,o],downloadIsStreaming:[19,o],downloadNetworkT:[16,c],downloadQuality:[37,X],downloadResumePoint:[14,s],downloadTimeToFirstByteT:[21,c],estimatedBandwidth:[36,u],isViewOnce:[41,o],mediaId:[38,s],networkStack:[30,De],overallAttemptCount:[4,s],overallBackendStore:[39,m],overallConnBlockFetchT:[10,c],overallConnectionClass:[29,l],overallCumT:[27,c],overallDecryptT:[12,c],overallDomain:[5,l],overallDownloadMode:[11,we],overallDownloadOrigin:[35,Q],overallDownloadResult:[25,Ae],overallFileValidationT:[13,c],overallIsEncrypted:[28,o],overallIsFinal:[26,o],overallMediaSize:[7,u],overallMediaType:[1,Oe],overallMmsVersion:[6,s],overallQueueT:[9,c],overallRetryCount:[3,s],overallT:[8,c],usedFallbackHint:[40,l]},[1,1,1],"regular"],MediaPicker:[1038,{chatRecipients:[16,s],isViewOnce:[22,o],mediaPickerChanged:[4,s],mediaPickerCroppedRotated:[10,s],mediaPickerDeleted:[3,s],mediaPickerDrawing:[11,s],mediaPickerFilter:[18,s],mediaPickerLikeDoc:[19,s],mediaPickerNotLikeDoc:[20,s],mediaPickerOrigin:[14,Ce],mediaPickerOriginThirdParty:[21,o],mediaPickerSent:[2,s],mediaPickerSentUnchanged:[5,s],mediaPickerStickers:[12,s],mediaPickerT:[15,c],mediaPickerText:[13,s],mediaType:[1,Oe],statusRecipients:[17,s]},[1,1,1],"regular"],MediaUpload2:[1588,{connectionType:[43,W],debugMediaException:[34,l],debugMediaIp:[32,l],debugUrl:[33,l],estimatedBandwidth:[45,u],finalizeConnectT:[28,c],finalizeHttpCode:[31,s],finalizeIsReuse:[30,o],finalizeNetworkT:[29,c],isViewOnce:[49,o],mediaId:[46,s],networkStack:[42,De],overallAttemptCount:[4,s],overallConnBlockFetchT:[10,c],overallConnectionClass:[41,l],overallCumT:[37,c],overallCumUserVisibleT:[38,c],overallDomain:[5,l],overallIsFinal:[36,o],overallIsForward:[16,o],overallIsManual:[13,o],overallLastUploadRetryPhase:[11,xe],overallMediaKeyReuse:[40,Ue],overallMediaSize:[7,u],overallMediaType:[1,Oe],overallMmsVersion:[6,s],overallOptimisticFlag:[12,Le],overallQueueT:[9,c],overallRetryCount:[3,s],overallT:[8,c],overallTranscodeT:[15,c],overallUploadMode:[39,Me],overallUploadOrigin:[44,ot],overallUploadResult:[35,Ie],overallUserVisibleT:[14,c],resumeConnectT:[17,c],resumeHttpCode:[20,s],resumeIsReuse:[19,o],resumeNetworkT:[18,c],uploadBytesTransferred:[27,u],uploadConnectT:[22,c],uploadHttpCode:[25,s],uploadIsReuse:[24,o],uploadIsStreaming:[26,o],uploadNetworkT:[23,c],uploadResumePoint:[21,s],uploadSource:[48,st],usedFallbackHint:[47,l]},[1,1,1],"regular"],MemoryStat:[1336,{hasVerifiedNumber:[7,o],numMessages:[8,u],privateBytes:[3,u],processType:[5,l],sharedBytes:[4,u],uptime:[6,u],workingSetPeakSize:[2,u],workingSetSize:[1,u]},[1,1,1],"regular"],MessageReceive:[450,{isViewOnce:[9,o],messageIsInternational:[4,o],messageIsOffline:[5,o],messageMediaType:[2,Oe],messageReceiveT0:[6,c],messageReceiveT1:[7,c],messageType:[1,Re],mutedGroupMessage:[8,o],numOfWebUrlsInTextMessage:[3,s]},[1,1,1],"regular"],MessageSend:[854,{e2eBackfill:[23,o],e2eCiphertextType:[10,ee],e2eCiphertextVersion:[9,s],ephemeralityDuration:[21,s],fastForwardEnabled:[15,o],isFromWamsys:[19,o],isViewOnce:[22,o],mediaCaptionPresent:[8,o],messageForwardAgeT:[14,c],messageIsFanout:[5,o],messageIsFastForward:[13,o],messageIsForward:[4,o],messageIsInternational:[7,o],messageIsRevoke:[24,o],messageMediaType:[3,Oe],messageSendOptUploadEnabled:[12,o],messageSendResult:[1,Pe],messageSendResultIsTerminal:[17,o],messageSendT:[11,c],messageType:[2,Re],resendCount:[16,s],retryCount:[6,s],stickerIsFirstParty:[18,o],thumbSize:[20,u]},[1,1,1],"regular"],PlaceholderActivity:[1980,{messageIsRevoke:[7,o],messageMediaType:[6,Oe],messageType:[5,Re],placeholderActionInd:[2,Be],placeholderChatTypeInd:[3,je],placeholderTimePeriod:[4,s],placeholderTypeInd:[1,Ye]},[1,1,1],"regular"],Ptt:[458,{pttDuration:[5,c],pttLock:[4,o],pttResult:[1,He],pttSize:[3,u],pttSource:[2,$e]},[1,1,1],"regular"],PttPlayback:[2044,{pttDuration:[12,c],pttMainThreadBlock:[7,o],pttPlayRequestT:[1,c],pttPlaybackFailed:[8,o],pttPlaybackOverallT:[4,c],pttPlaybackSpeed:[10,We],pttPlaybackSpeedCnt:[11,s],pttPlayer:[9,Ve],pttPlayerInitT:[2,c],pttPlayerPlayT:[3,c],pttSeekCnt:[13,s],pttTrigger:[5,qe],pttType:[6,ze]},[1,1,1],"regular"],QuickReply:[1468,{attachmentGifCount:[7,s],attachmentImageCount:[5,s],attachmentVideoCount:[6,s],quickReplyAction:[1,Qe],quickReplyCount:[2,s],quickReplyKeywordCount:[3,s],quickReplyKeywordMatched:[4,o],quickReplyOrigin:[9,Xe],quickReplyTranscodeResult:[8,Ze]},[1,1,1],"regular"],RoomsCreationFlow:[2202,{entryResult:[3,q],errorReason:[2,oe],roomsEntryPoint:[1,tt]},[1,1,1],"regular"],SendRevokeMessage:[1348,{messageMediaType:[2,Oe],messageType:[1,Re],revokeSendDelay:[3,s]},[1,1,1],"regular"],StickerCommonQueryToStaticServer:[2740,{httpResponseCode:[2,s],params:[3,l],queryType:[1,Je]},[1,1,1],"regular"],StickerSend:[1840,{stickerIsAnimated:[3,o],stickerIsFirstParty:[2,o],stickerSendOrigin:[1,rt]},[1,1,1],"regular"],UiAction:[472,{uiActionPreloaded:[2,o],uiActionT:[3,c],uiActionType:[1,it]},[1,1,1],"regular"],UserActivity:[1384,{userActivityBitmapHigh:[4,s],userActivityBitmapLen:[5,s],userActivityBitmapLow:[3,s],userActivitySessionCum:[7,s],userActivitySessionId:[1,l],userActivitySessionSeq:[6,s],userActivityStartTime:[2,s]},[1,1,1],"regular"],UserNotice:[2472,{userNoticeContentVersion:[2,s],userNoticeEvent:[3,dt],userNoticeId:[1,s]},[1,1,1],"regular"],UserNoticeError:[2474,{userNoticeContentVersion:[2,s],userNoticeErrorEvent:[3,ct],userNoticeId:[1,s]},[1,1,1],"regular"],ViewBusinessProfile:[1522,{businessProfileJid:[3,l],catalogSessionId:[6,l],linkedAccount:[5,T],scrollDepth:[4,s],viewBusinessProfileAction:[1,ft],websiteSource:[2,xt]},[1,1,1],"regular"],WebcAbpropsValidation:[2802,{abpropName:[1,l],abpropValue:[2,l],serverPropName:[3,l],serverPropValue:[4,l]},[1,1,1],"regular"],WebcAssetLoad:[1358,{webcAssetCacheType:[4,vt],webcAssetFromCache:[2,o],webcAssetLoadT:[3,c],webcAssetName:[1,l],webcAssetSize:[5,u]},[1,1,1],"regular"],WebcChatOpen:[864,{webcChatOpenBeforePaintT:[7,c],webcChatOpenPaintedT:[6,c],webcChatOpenT:[2,c],webcFinalRenderedMessageCount:[5,s],webcRenderedMessageCount:[4,s],webcUnreadCount:[1,u],webcWindowHeightFloat:[8,u]},[1,1,1],"regular"],WebcCryptoMedia:[1028,{webcCryptoElapsedT:[4,c],webcCryptoFileSize:[3,u],webcCryptoLibrary:[2,gt],webcCryptoType:[1,yt]},[1,1,1],"regular"],WebcDbOpen:[1940,{webcDbName:[1,l],webcDbOpenNumAttempts:[3,s],webcDbOpenWasSuccess:[2,o]},[1,1,1],"regular"],WebcEmojiOpen:[1166,{webcEmojiOpenTab:[1,l]},[1,1,1],"regular"],WebcFirstScreenEmojisLoad:[2144,{webcEmojisLoadT:[1,c],webcLoadedEmojisCount:[2,s]},[1,1,1],"regular"],WebcImgError:[1700,{webcImgErrorCode:[1,u]},[1,1,1],"regular"],WebcLogin:[1664,{webcBrowserNetworkType:[14,l],webcBrowserStorageQuotaBytes:[15,s],webcBrowserStorageQuotaUsedBytes:[16,s],webcLoginT:[3,c],webcPersistentLoginEnabled:[17,o],webcQrCodes:[1,s],webcQrLoadT:[2,c],webcSyncChatCount:[8,s],webcSyncChatSize:[10,s],webcSyncChatT:[9,c],webcSyncContactCount:[11,s],webcSyncContactSize:[13,s],webcSyncContactT:[12,c],webcSyncMessageCount:[5,s],webcSyncMessageSize:[7,s],webcSyncMessageT:[6,c],webcSyncT:[4,c]},[1,1,1],"regular"],WebcManualWebsocketAttempt:[896,{webcManualWebsocketAttemptSuccessful:[1,o]},[1,1,1],"regular"],WebcMediaAnalyzed:[912,{webcMediaAnalyzeT:[3,c],webcMediaExtensions:[2,l],webcMediaSupported:[1,o]},[1,1,1],"regular"],WebcMediaBlobCachePurge:[1956,{mediaBlobCacheItemCount:[4,s],mediaBlobCachePurgesSoFar:[3,s],mediaBlobCacheSizeLimit:[2,s],mediaBlobCacheUptimeT:[1,c]},[1,1,1],"regular"],WebcMediaErrorUnknownDetails:[2352,{mediaId:[1,s],webcMediaErrorName:[3,l],webcMediaOperation:[2,bt]},[1,1,1],"regular"],WebcMediaLoad:[1202,{webcMediaLoadResult:[2,St],webcMediaLoadT:[1,c]},[1,1,1],"regular"],WebcMediaRender:[1898,{messageMediaType:[9,Oe],webcBrowserNetworkType:[7,l],webcBrowserStorageQuotaBytes:[10,s],webcBrowserStorageQuotaUsedBytes:[11,s],webcChatPosition:[1,s],webcChatType:[2,mt],webcMediaStage:[5,Tt],webcMessageIndex:[3,s],webcMessageT:[8,c]},[1,1,1],"regular"],WebcMediaRmr:[1906,{messageMediaType:[10,Oe],webcBrowserNetworkType:[2,l],webcBrowserStorageQuotaBytes:[11,s],webcBrowserStorageQuotaUsedBytes:[12,s],webcChatPosition:[1,s],webcChatType:[9,mt],webcMediaRmrError:[8,o],webcMediaRmrT:[6,c],webcMediaSize:[7,s],webcMessageIndex:[3,s],webcMessageT:[5,c],webcRmrReason:[14,It],webcRmrStatusCode:[13,s]},[1,1,1],"regular"],WebcMediaStorePurge:[2112,{webcBrowserStorageQuotaBytes:[1,s],webcBrowserStorageQuotaUsedBytes:[2,s],webcCurrentTimestampT:[7,c],webcMediaStoreItemCount:[5,s],webcMediaStoreQuotaBytes:[3,s],webcMediaStoreQuotaUsedBytes:[4,s],webcPurgedItemTimestampT:[6,c]},[1,1,1],"regular"],WebcMemoryStat:[1188,{hasVerifiedNumber:[12,o],jsHeapSizeLimit:[9,s],numMessages:[8,u],totalJsHeapSize:[10,s],uptime:[6,u],usedJsHeapSize:[11,s]},[1,1,1],"regular"],WebcMenu:[2504,{webcMenuAction:[2,At],webcMenuItemLabel:[3,wt]},[1,1,1],"regular"],WebcMessageQuery:[1876,{webcAudioMessageCount:[14,s],webcBrowserNetworkType:[1,l],webcBrowserStorageQuotaBytes:[20,s],webcBrowserStorageQuotaUsedBytes:[21,s],webcChatPosition:[2,s],webcChatType:[13,mt],webcDocumentMessageCount:[16,s],webcEarliestMessageIndex:[11,s],webcEarliestMessageT:[12,c],webcMessageCount:[4,s],webcMessageQueryTrigger:[19,Mt],webcMessageQueryType:[3,Ct],webcOtherMessageCount:[18,s],webcPhotoMessageCount:[7,s],webcPttMessageCount:[15,s],webcQueryT:[9,c],webcResponseBytes:[10,s],webcStickerMessageCount:[17,s],webcTextMessageCount:[5,s],webcVideoMessageCount:[6,s]},[1,1,1],"regular"],WebcMessageSend:[2072,{messageIsForward:[3,o],messageMediaType:[2,Oe],messageSendT:[4,c],messageType:[1,Re]},[1,1,1],"regular"],WebcOfflineResume:[2628,{chatThreadCount:[9,s],decryptErrorCount:[4,s],isOfflineCompleteMissed:[11,o],offlineMessageCount:[2,s],offlineReceiptCount:[3,s],offlineSizeBytes:[8,s],webcLastStanzaT:[10,c],webcMainScreenLoadT:[7,c],webcOfflinePreviewT:[6,c],webcPageLoadT:[1,c],webcSocketConnectT:[5,c]},[1,1,1],"regular"],WebcPageLoad:[642,{webcAppcacheStatus:[29,_t],webcCached:[30,o],webcConnectEnd:[10,c],webcConnectStart:[9,c],webcDomComplete:[19,c],webcDomContentLoadedEventEnd:[18,c],webcDomContentLoadedEventStart:[17,c],webcDomInteractive:[16,c],webcDomLoading:[15,c],webcDomainLookupEnd:[8,c],webcDomainLookupStart:[7,c],webcExeDone:[23,c],webcExeStart:[22,c],webcFetchStart:[6,c],webcInitialMountT:[38,c],webcInitialNavMountT:[39,c],webcInitialPanel:[42,l],webcInitialPanelMountStartT:[43,c],webcInitialPanelMountT:[40,c],webcInitialPanelRenderT:[46,c],webcJsLoadT:[37,c],webcLoadEventEnd:[21,c],webcLoadEventStart:[20,c],webcMainScriptEnd:[45,c],webcMainScriptStart:[44,c],webcNativeLoadT:[36,c],webcNavigation:[32,Ot],webcPageLoadT:[34,c],webcParallellyFetched:[41,o],webcQrCode:[31,o],webcRedirectCount:[33,u],webcRedirectEnd:[5,c],webcRedirectStart:[4,c],webcRequestStart:[12,c],webcResponseEnd:[14,c],webcResponseStart:[13,c],webcSecureConnectionStart:[11,c],webcUnloadEventEnd:[3,c],webcUnloadEventStart:[2,c],webcWsAttempts:[28,u],webcWsNormal:[27,c],webcWsOpening:[24,c],webcWsPairing:[25,c],webcWsSyncing:[26,c]},[1,1,1],"regular"],WebcPageResume:[884,{webcResumeCount:[1,s]},[1,1,1],"regular"],WebcPhoneDisconnected:[878,{webcPhoneBbarShownT:[2,c],webcPhoneDisconnectedT:[1,c]},[1,1,1],"regular"],WebcProgressiveImage:[2226,{webcFirstRenderScans:[1,s],webcFirstRenderT:[2,c],webcFullQualityT:[4,c],webcMidQualityT:[3,c]},[1,1,10],"regular"],WebcRawPlatforms:[2416,{webcRawPlatform:[1,l]},[1,1,1],"regular"],WebcResourceLoad:[688,{webcResourceCached:[3,o],webcResourceDuration:[2,c],webcResourceName:[1,l]},[1,1,1],"regular"],WebcStatusSession:[1880,{webcStatusMutedItemCount:[4,s],webcStatusMutedRowCount:[7,s],webcStatusRecentItemCount:[2,s],webcStatusRecentRowCount:[5,s],webcStatusSessionId:[1,s],webcStatusViewedItemCount:[3,s],webcStatusViewedRowCount:[6,s]},[1,1,1],"regular"],WebcStatusSync:[1878,{webcStatusMutedItemCount:[4,s],webcStatusMutedRowCount:[7,s],webcStatusRecentItemCount:[2,s],webcStatusRecentRowCount:[5,s],webcStatusSyncT:[1,c],webcStatusViewedItemCount:[3,s],webcStatusViewedRowCount:[6,s]},[1,1,1],"regular"],WebcStatusView:[1882,{webcStatusLoadT:[6,c],webcStatusLoaded:[4,o],webcStatusMediaType:[5,kt],webcStatusPlaybackT:[8,c],webcStatusReplyCount:[9,s],webcStatusRowIndex:[3,s],webcStatusRowSection:[2,Pt],webcStatusSessionId:[1,s],webcStatusUnread:[10,o],webcStatusViewT:[7,c]},[1,1,1],"regular"],WebcStorageStat:[1504,{webcStorageQuota:[2,s],webcStorageUsage:[1,s]},[1,1,1],"regular"],WebcStreamModeChange:[770,{webcStreamMode:[1,Rt]},[1,1,1],"regular"],WebcUiFreeze:[1836,{webcUiFreezeFps:[1,u],webcUiFreezeT:[2,c]},[1,1,1],"regular"],WebcWamUpload:[916,{webcAvailableBbarTp:[3,u],webcAvailableNormalTp:[4,u],webcAvailableTp:[2,u],webcTotalT:[1,c],webcUnavailableBbarTp:[6,u],webcUnavailableNormalTp:[7,u],webcUnavailableTp:[5,u]},[1,1,1],"regular"],WebcWapRequest:[2006,{webcWapRequestAckT:[3,c],webcWapRequestDestination:[6,Dt],webcWapRequestKind:[5,Nt],webcWapRequestName:[8,l],webcWapRequestRecvT:[4,c],webcWapRequestResponseSize:[2,s],webcWapRequestSize:[7,s],webcWapRequestStatus:[9,s]},[1,1,10],"regular"],WebcWasmSupport:[1374,{webcWasmSupported:[1,o]},[1,1,1],"regular"],WebcWsOpen:[740,{webcWsOpenT:[1,c]},[1,1,1],"regular"]});var Bt=(0,a.default)((0,a.default)({},i.events),{METRICS:i.metrics,Global:Gt,WamEvent:i.WamEvent,AEC_MODE:d,AGC_MODE:f,ANDROID_CAMERA2_SUPPORT_LEVEL:p,ANDROID_CAMERA_API:h,ANDROID_KEYSTORE_STATE_TYPE:_,AUDIO_ENGINE_TYPE:v,BACKEND_STORE_TYPE:m,BANNER_OPERATIONS:g,BANNER_TYPES:y,BIZ_PLATFORM:E,BUSINESS_PROFILE_ENTRY_POINT:S,BUSINESS_PROFILE_FIELD:b,BUSINESS_TOOLS_LINKED_ACCOUNT_TYPE:T,CALL_FROM_UI:w,CALL_NETWORK_MEDIUM:A,CALL_RELAY_BIND_STATUS:C,CALL_RESULT_TYPE:O,CALL_SEGMENT_TYPE:M,CALL_SETUP_ERROR_TYPE:I,CALL_SIDE:k,CALL_TERM_REASON:P,CALL_TRANSPORT_TYPE:R,CALL_VIDEO_STATE:D,CALL_WAKEUP_SOURCE:N,CAMERA_PREVIEW_MODE:L,CAMERA_START_MODE_PARAMS:x,CATALOG_BIZ_ACTION:U,CATALOG_ENTRY_POINT:F,CATALOG_VIEW_ACTION:G,CHAT_FILTER_ACTION_TYPES:B,CHAT_FILTER_TYPES:j,COLLECTION:Y,CONNECTION_ORIGIN_TYPE:K,CONNECTION_TYPE:W,CONTACT_SEND_CHANNEL:V,CONTACT_US_EXIT_STATE:H,DEEP_LINK_OPEN_FROM:$,DEEP_LINK_TYPE:z,DESTINATION:q,DEVICE_TYPE:J,DOWNLOAD_ORIGIN_TYPE:Q,DOWNLOAD_QUALITY_TYPE:X,DSM_ERROR:Z,E2E_CIPHERTEXT_TYPE:ee,E2E_DESTINATION:te,E2E_FAILURE_REASON:ne,E2E_SENDER_TYPE:re,EDIT_PROFILE_ACTION:ae,END_CALL_CONFIRMATION_TYPE:ie,ERROR_REASON:oe,FIELD_STATS_ROW_TYPE:se,GIF_SEARCH_PROVIDER:ue,INCOMING_CALL_UI_ACTION_TYPE:le,INIT_BWE_SOURCE:ce,LABEL_OPERATIONS:de,LABEL_TARGETS:fe,LOGIN_RESULT_TYPE:pe,MD_APP_STATE_KEY_ROTATION_REASON_CODE:he,MD_BOOTSTRAP_PAYLOAD_TYPE:_e,MD_BOOTSTRAP_SOURCE:ve,MD_BOOTSTRAP_STEP_RESULT:me,MD_LINK_DEVICE_COMPANION_STAGE:ge,MD_PUSHNAME_VALIDATION_STAGE_CODE:ye,MD_SYNCD_CRITICAL_EVENT_CODE:Ee,MD_SYNCD_FATAL_ERROR_CODE:Se,MD_VALIDATION_CALLER_CHANNEL:be,MD_VALIDATION_WEB_PLATFORM:Te,MEDIA_DOWNLOAD_MODE_TYPE:we,MEDIA_DOWNLOAD_RESULT_TYPE:Ae,MEDIA_PICKER_ORIGIN_TYPE:Ce,MEDIA_TYPE:Oe,MEDIA_UPLOAD_MODE_TYPE:Me,MEDIA_UPLOAD_RESULT_TYPE:Ie,MESSAGE_CHAT_TYPE:ke,MESSAGE_SEND_RESULT_TYPE:Pe,MESSAGE_TYPE:Re,NETWORK_STACK_TYPE:De,NS_MODE:Ne,OPTIMISTIC_FLAG_TYPE:Le,OVERALL_LAST_UPLOAD_RETRY_PHASE_TYPE:xe,OVERALL_MEDIA_KEY_REUSE_TYPE:Ue,OWNER_TYPE:Fe,PEER_CALL_NETWORK_MEDIUM:Ge,PLACEHOLDER_ACTION:Be,PLACEHOLDER_CHAT_TYPE:je,PLACEHOLDER_TYPE:Ye,PLATFORM_TYPE:Ke,PTT_PLAYBACK_SPEED_TYPE:We,PTT_PLAYER_TYPE:Ve,PTT_RESULT_TYPE:He,PTT_SOURCE_TYPE:$e,PTT_STREAM_TYPE:ze,PTT_TRIGGER_TYPE:qe,QUERY_TYPE:Je,QUICK_REPLY_ACTION:Qe,QUICK_REPLY_ORIGIN:Xe,QUICK_REPLY_TRANSCODE_RESULT:Ze,RADIO_TYPE:et,ROOMS_ENTRY_POINT:tt,SRTP_LIBRARY_VERSION:nt,STICKER_SEND_ORIGIN_TYPE:rt,SW_AEC_TYPE:at,UI_ACTION_TYPE:it,UPLOAD_ORIGIN_TYPE:ot,UPLOAD_SOURCE_TYPE:st,UPNP_ADD_RESULT_CODE:ut,UPNP_REMOVE_RESULT_CODE:lt,USER_NOTICE_ERROR_EVENT:ct,USER_NOTICE_EVENT:dt,VIEW_BUSINESS_PROFILE_ACTION:ft,VPX_LIB:pt,WA_VOIP_HISTORY_SAVE_CALL_RECORD_CONDITION_CHECK_STATUS:ht,WEBC_APPCACHE_STATUS_CODE:_t,WEBC_ASSET_CACHE_TYPE_CODE:vt,WEBC_CHAT_TYPE:mt,WEBC_CRYPTO_LIBRARY_CODE:gt,WEBC_CRYPTO_TYPE_CODE:yt,WEBC_ENV_CODE:Et,WEBC_MEDIA_LOAD_RESULT_CODE:St,WEBC_MEDIA_OPERATION_CODE:bt,WEBC_MEDIA_STAGE_TYPE:Tt,WEBC_MENU_ITEM_LABEL:wt,WEBC_MENU_TYPE:At,WEBC_MESSAGE_QUERY_DIRECTION:Ct,WEBC_NAVIGATION_TYPE:Ot,WEBC_QUERY_TRIGGER_TYPE:Mt,WEBC_RMR_REASON_CODE:It,WEBC_STATUS_MEDIA_TYPE:kt,WEBC_STATUS_ROW_SECTION:Pt,WEBC_STREAM_MODE_CODE:Rt,WEBC_WAP_REQUEST_DESTINATION_CODE:Dt,WEBC_WAP_REQUEST_KIND_CODE:Nt,WEBC_WEB_PLATFORM_TYPE:Lt,WEBSITE_SOURCE_TYPE:xt,XMPP_STATUS:Ut,XOR_CIPHER_MODE:Ft});t.default=Bt},13528:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.defineEvents=function(e){for(var t in e){var n,r=e[t],a=r[2];n=a[2];var i,o="regular";if(r.length>3)o=null!==(i=r[3])&&void 0!==i?i:"regular";b({name:t,id:r[0],props:r[1],weight:n,wamChannel:o})}},t.defineGlobal=function(e){var t={},n=function(n){var r=e[n],a=(0,i.default)(r,3),o=a[0],s=a[1],u=a[2],l=void 0===u?["regular"]:u,c=g.defineGlobal(n,o,s,l);t[n]={type:c.validator,set:function(e){this.commitOnSet&&l.includes("regular")&&p.default.set(c,e)}}};for(var r in e)n(r);return new((0,f.defineTypeHash)("Global",t,T))},t.events=t.WamEvent=t.metrics=t.GlobalMetric=t.Metric=t.TYPES=void 0;var i=a(n(63038)),o=a(n(2205)),s=a(n(99842)),u=a(n(34575)),l=a(n(93913)),c=a(n(91080)),d=a(n(96486)),f=(n(95200),r(n(51365))),p=a(n(71830)),h=Object.freeze({BOOLEAN:"boolean",INTEGER:"integer",NUMBER:"number",STRING:"string",TIMER:"timer"});function _(e){return"number"==typeof e&&e===Math.floor(e)}t.TYPES=h;var v=function(){function e(t,n,r){(0,u.default)(this,e),this.name=t,this.id=n,this.type=r,this.setValidator()}return(0,l.default)(e,[{key:"setValidator",value:function(){var e=this.type;if("object"==typeof e){var t=d.default.invert(e);this.validator=function(e){return e in t}}else e===h.INTEGER||e===h.TIMER?this.validator=_:this.validator=e}}]),e}();t.Metric=v;var m=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r,a,i){var o;return(0,u.default)(this,n),(o=t.call(this,e,r,a)).channels=i,o}return n}(v);t.GlobalMetric=m;var g=new(function(){function e(){(0,u.default)(this,e),this._events={},this._globalMetrics=new Map}return(0,l.default)(e,[{key:"_key",value:function(e,t){return`${e}::${t}`}},{key:"getEvent",value:function(e,t){var n=this._key(e,t);return(0,c.default)(this._events[n],n)}},{key:"define",value:function(e,t,n,r){var a=this._key(e,t);return a in this._events||(this._events[a]=new v(t,n,r)),this._events[a]}},{key:"defineGlobal",value:function(e,t,n,r){return this._globalMetrics.has(e)||this._globalMetrics.set(e,new m(e,t,n,r)),(0,c.default)(this._globalMetrics.get(e),e)}},{key:"getGlobal",value:function(e){return(0,c.default)(this._globalMetrics.get(e),e)}}]),e}());t.metrics=g;var y=1,E=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this)).instanceId=y++,e.eventTime=Date.now(),e.commitTime=void 0,e}return(0,l.default)(n,[{key:"commit",value:function(){"private"!==this.wamChannel&&p.default.commit(this)}},{key:"setTime",value:function(e){this.eventTime=e||Date.now()}},{key:"setSequenceNumber",value:function(e){this.sequenceNumber=e}}]),n}(f.default);t.WamEvent=E;var S={};function b(e){var t=e.name,n=e.id,r=e.weight,a=e.props,i={id:n,weight:r,wamChannel:e.wamChannel},o={},s=[];for(var u in a){var l=a[u],c=g.define(t,u,l[0],l[1]);o[u]=c.validator,l[1]===h.TIMER&&s.push(u)}var p=(0,f.defineTypeHash)(t,o,E);s.forEach((function(e){i["mark"+d.default.upperFirst(e)]=function(t){this[e]=Date.now()-this.eventTime;t&&t.showInTimeline}})),d.default.extend(p.prototype,i),S[t]=p}t.events=S;var T=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).commitOnSet=!0,e}return n}(f.default)},29930:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.newMessageQueryEvent=function(e){return new i.default.WebcMessageQuery({webcResponseBytes:0,webcMessageCount:0,webcTextMessageCount:0,webcVideoMessageCount:0,webcPhotoMessageCount:0,webcAudioMessageCount:0,webcPttMessageCount:0,webcStickerMessageCount:0,webcDocumentMessageCount:0,webcOtherMessageCount:0,webcMessageQueryTrigger:e})},t.logMessageCounts=function(e,t){e.webcMessageCount+=t.length;for(var n=0,r=t[n];n<t.length;++n,r=t[n])switch(r.type){case o.CHAT:case o.LOCATION:case o.PAYMENT:case o.VCARD:case o.CIPHERTEXT:case o.MULTI_VCARD:case o.REVOKED:case o.OVERSIZED:e.webcTextMessageCount+=1;break;case o.IMAGE:case o.PRODUCT:e.webcPhotoMessageCount+=1;break;case o.VIDEO:e.webcVideoMessageCount+=1;break;case o.AUDIO:e.webcAudioMessageCount+=1;break;case o.PTT:e.webcPttMessageCount+=1;break;case o.STICKER:e.webcStickerMessageCount+=1;break;case o.DOCUMENT:e.webcDocumentMessageCount+=1;break;default:e.webcOtherMessageCount+=1}};var a=r(n(34263)),i=r(n(8643));var o=a.default.MSG_TYPE},29192:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineResumeReporter=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(8643)),s=new(function(){function e(){(0,a.default)(this,e),this.offlineResume=new o.default.WebcOfflineResume,this.offlineResume.offlineMessageCount=0,this.offlineResume.offlineReceiptCount=0,this.offlineResume.decryptErrorCount=0,this.offlineResume.isOfflineCompleteMissed=!1}return(0,i.default)(e,[{key:"logOfflineCount",value:function(e){this.offlineResume&&(this.offlineResume.offlineMessageCount=e.message,this.offlineResume.offlineReceiptCount=e.receipt)}},{key:"logOfflineDecryptionErrorCount",value:function(e){this.offlineResume&&(this.offlineResume.decryptErrorCount=e)}},{key:"logMainScreenLoadT",value:function(){this.offlineResume&&this.offlineResume.markWebcMainScreenLoadT()}},{key:"logOfflinePreviewT",value:function(){this.offlineResume&&this.offlineResume.markWebcOfflinePreviewT()}},{key:"logPageLoadT",value:function(){this.offlineResume&&this.offlineResume.markWebcPageLoadT()}},{key:"logSocketConnectT",value:function(){this.offlineResume&&this.offlineResume.markWebcSocketConnectT()}},{key:"logMissedOfflineComplete",value:function(){this.offlineResume&&(this.offlineResume.isOfflineCompleteMissed=!0)}},{key:"commit",value:function(){var e=this.offlineResume;e&&(__LOG__(2)`======== offline resume perf ========
message: ${10*Math.round(e.offlineMessageCount/10)}
receipt: ${10*Math.round(e.offlineReceiptCount/10)}
decryptError: ${e.decryptErrorCount}
pageLoadT: ${e.webcPageLoadT}
connectionT: ${e.webcSocketConnectT}
offlinePreviewT: ${e.webcOfflinePreviewT}
screenLoadT: ${e.webcMainScreenLoadT}
======================================`,e.commit(),this.offlineResume=null)}}]),e}());t.OfflineResumeReporter=s},58966:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.streamInfoChange=function(e,t,n){var r=Math.floor(window.performance.now());g[e]=r,n&&(g.socketSequence=t,u())},t.saveInitialPanelMountTime=function(e){o=e},t.setInitialScreen=function(e){if(null==m)return;m.set({webcInitialPanel:e})},t.onInitialRenderComplete=function(){s()},t.PageLoad=t.initialScreenTimer=t.mainScriptTimer=t.exeTimer=void 0;var o,s,u,l=i(n(59713)),c=i(n(34575)),d=i(n(93913)),f=i(n(91080)),p=i(n(8643)),h=a(n(95200)),_=i(n(98876)),v=i(n(71830)),m=new p.default.WebcPageLoad,g={},y=new r((function(e){return s=e})),E=new r((function(e){return u=e})),S=!1;function b(e){return window.performance&&window.performance.timing&&window.performance.timing.navigationStart?e-window.performance.timing.navigationStart:null}function T(){if(window.performance&&window.performance.timing&&window.performance.navigation){if(m){var e=m,t=window.performance.timing,n=window.performance.navigation,r=t.navigationStart,a=t.loadEventEnd-r;if(a<=0)return __LOG__(2)`MetricReporter:logPageLoad delayed`,void setTimeout(T,1e4);e.set({webcPageLoadT:a,webcUnloadEventStart:i("unloadEventStart"),webcUnloadEventEnd:i("unloadEventEnd"),webcRedirectStart:i("redirectStart"),webcRedirectEnd:i("redirectEnd"),webcFetchStart:i("fetchStart"),webcDomainLookupStart:i("domainLookupStart"),webcDomainLookupEnd:i("domainLookupEnd"),webcConnectStart:i("connectStart"),webcConnectEnd:i("connectEnd"),webcSecureConnectionStart:i("secureConnectionStart"),webcRequestStart:i("requestStart"),webcResponseStart:i("responseStart"),webcResponseEnd:i("responseEnd"),webcDomLoading:i("domLoading"),webcDomInteractive:i("domInteractive"),webcDomContentLoadedEventStart:i("domContentLoadedEventStart"),webcDomContentLoadedEventEnd:i("domContentLoadedEventEnd"),webcDomComplete:i("domComplete"),webcLoadEventStart:i("loadEventStart"),webcLoadEventEnd:i("loadEventEnd"),webcCached:t.fetchStart===t.domainLookupEnd,webcNavigation:n.type,webcRedirectCount:n.redirectCount,webcWsOpening:g.OPENING,webcWsPairing:g.PAIRING,webcWsSyncing:g.SYNCING,webcWsNormal:g.NORMAL,webcWsAttempts:g.socketSequence,webcQrCode:!g.SYNCING,webcParallellyFetched:window.PARALLEL_FETCH_SCRIPT,webcInitialPanelMountT:o-r}),e.commit(),m=null}}else __LOG__(2)`MetricReporter:logPageLoad metrics not provided by browser!`;function i(e){var n=t[e];return n&&b(n)}}r.all([y,E]).then((function(){T(),(0,_.default)(),S||(S=!0,v.default.resumeJobs())}));var w=function(){function e(t){(0,c.default)(this,e),this._hasStarted=!1,this._label=t.label,this._startProperty=t.startProperty,this._endProperty=t.endProperty}return(0,d.default)(e,[{key:"start",value:function(){this._hasStarted=!0,null!=m&&(m.set((0,l.default)({},this._startProperty,b(Date.now()))),this._measure=h.startMeasure(this._label))}},{key:"end",value:function(){null!=m&&(m.set((0,l.default)({},this._endProperty,b(Date.now()))),(0,f.default)(this._measure,"this._measure").end())}},{key:"hasStarted",value:function(){return this._hasStarted}}]),e}(),A=new w({label:"PageLoad.webcExe",startProperty:"webcExeStart",endProperty:"webcExeDone"});t.exeTimer=A;var C=new w({label:"PageLoad.webcMainScript",startProperty:"webcMainScriptStart",endProperty:"webcMainScriptEnd"});t.mainScriptTimer=C;var O=new w({label:"PageLoad.webcInitialPanelRender",startProperty:"webcInitialPanelMountStartT",endProperty:"webcInitialPanelRenderT"});t.initialScreenTimer=O;var M=(0,f.default)(m,"_PageLoad");t.PageLoad=M},54015:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=new(function(){function e(){(0,a.default)(this,e),this._resetNextSet=!1,this._value=0}return(0,i.default)(e,[{key:"get",value:function(){return this._value}},{key:"_checkReset",value:function(){this._resetNextSet&&(this._resetNextSet=!1,this._value=0,this.initialDisplayDate=null)}},{key:"inc",value:function(){return this._checkReset(),this.set(this._value+1)}},{key:"set",value:function(e){if(this._checkReset(),this._value!==e)return 1===e&&(this.initialDisplayDate=Math.floor(window.performance.now())),this._value=e,this.get()}},{key:"reset",value:function(){this._resetNextSet=!0}}]),e}());t.default=o},98876:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!(window.performance&&window.performance.timing&&window.performance.getEntriesByType))return void __LOG__(2)`MetricReporter:logResourceLoads metrics not provided by browser!`;var e=window.performance.timing.fetchStart===window.performance.timing.domainLookupEnd,t=window.performance.getEntriesByType("resource"),n=document.createElement("a");t.forEach((function(t){"xmlhttprequest"!==t.initiatorType&&(n.href=t.name,new a.default.WebcResourceLoad({webcResourceName:n.pathname+n.search+n.hash,webcResourceDuration:Math.round(t.duration),webcResourceCached:e}).commit())}))};var a=r(n(8643))},51365:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.defineTypeHash=function(e,t,n){var r={$className:{value:e}};for(var s in t){var u=t[s];if("string"!=typeof u&&"function"!=typeof u||(u={type:u}),!u||"object"!=typeof u)throw new Error(`${e} specified with non-object ${u}`);r[s]={enumerable:!0,get:l(s),set:c(s,u)}}var d=function(e){(0,a.default)(n,e);var t=(0,i.default)(n);function n(e){var r;return(0,o.default)(this,n),(r=t.call(this)).all={},e&&r.set(e),r}return n}(n);return Object.defineProperties(d.prototype,r),d},t.default=void 0;var a=r(n(2205)),i=r(n(99842)),o=r(n(34575)),s=r(n(93913)),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"set",value:function(e){for(var t in e)this[t]=e[t]}}]),e}();function l(e){return function(){return this.all[e]}}function c(e,t){var n=t.type,r=t.set;return function(t){if(t!==this.all[e]){if(null==t);else if("function"==typeof n){if(!n(t))throw __LOG__(2)`type-validator fails ${t}`,new TypeError(`${this.$className}.${e} type-validator failed`)}else if(typeof t!==n)throw new TypeError(`${this.$className}.${e} requires type ${n}, got ${t}`);r&&r.call(this,t),this.all[e]=t}}}t.default=u},71830:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,u,l,c,d,f,p,h,_,v,m,g,y=a(n(87757)),E=a(n(63038)),S=a(n(68551)),b=a(n(319)),T=a(n(48926)),w=a(n(91080)),A=a(n(96486)),C=n(97223),O=null,M=!1,I=5e4,k=1,P=function(){return k++};var R=0,D=[],N=!1,L=!1,x=null,U=0;function F(e,t){e.commitTime=null!=t?t:J(),e.sequenceNumber=U++}function G(e){if(!x||e){var t=i.info();x={appVersion:s.VERSION_BASE,platform:l.PLATFORM_TYPE.WEBCLIENT,browser:t.name||null,browserVersion:t.ua||null,deviceName:t.os||null,deviceVersion:t.version||null,webcPhonePlatform:u.platformField||null,webcEnv:l.WEBC_ENV_CODE[s.WAM_ENV],webcTabId:h.thisTabId,webcWebPlatform:l.WEBC_WEB_PLATFORM_TYPE[s.WAM_PLATFORM]},e&&Object.assign(x,e),l.Global.commitOnSet=!1,l.Global.set(x),l.Global.commitOnSet=!0}}function B(e){D.push(e),N&&m.onOrBefore(1e4)}function j(){N=!1,m.cancel()}function Y(){N=!0,D.length>0&&m.onOrBefore(1e4)}function K(){return W.apply(this,arguments)}function W(){return(W=(0,T.default)(y.default.mark((function e(){var t,n,r,a,i,s,u,l,f,p,h,v,m,T;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(j(),t=(0,b.default)(D),D=[],e.prev=3,G(),t.length,n=g||new _("regular",P(),x),g=n,r=0;r<t.length;r++)a=t[r],i=(0,S.default)(a),s=i[0],u=i.slice(1),s?(l=u[0],n.write(l)):(f=u,p=(0,E.default)(f,2),h=p[0],v=p[1],x[h.name]=v,n.set(h.id,v));if(m=J(),!(n.eventsWritten>0&&(n.size()>I||m>R+300||!L))){e.next=27;break}if(d()){e.next=22;break}if(!(n.buffer.size()>I)){e.next=19;break}g=null,e.next=21;break;case 19:return e.next=21,V();case 21:return e.abrupt("return");case 22:return null!=c&&(F(T=c.uploadEvent(),m),T.all,n.write(T)),e.next=25,$();case 25:e.next=29;break;case 27:return e.next=29,V();case 29:e.next=36;break;case 31:e.prev=31,e.t0=e.catch(3),__LOG__(3)`wam:executePending error ${String(e.t0&&e.t0.stack?e.t0.stack:e.t0)}`,o.upload({reason:"wam-error"}),g=null;case 36:return e.prev=36,Y(),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[3,31,36,39]])})))).apply(this,arguments)}function V(){return H.apply(this,arguments)}function H(){return(H=(0,T.default)(y.default.mark((function e(){var t,n,r,a;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(t=g.stringBuffer()){e.next=5;break}return e.abrupt("return");case 5:if(!(n=(0,w.default)(g,"context").unsavedPortion)||0!==n.eventsWritten){e.next=8;break}return e.abrupt("return");case 8:if(r=(0,w.default)(g,"context").saveKey,e.prev=9,!n){e.next=26;break}return e.next=13,v.update(r,t);case 13:if(a=e.sent,g){e.next=16;break}return e.abrupt("return");case 16:if(!a){e.next=21;break}(0,w.default)(g,"context").unsavedPortion=new _("regular",P(),x),e.next=24;break;case 21:return g=g.unsavedPortion,e.abrupt("return",V());case 24:e.next=32;break;case 26:return e.next=28,v.add(r,t);case 28:if(g){e.next=30;break}return e.abrupt("return");case 30:(0,w.default)(g,"context").unsavedPortion=new _("regular",P(),x);case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(9),__LOG__(3)`wam:save WamStorage failed to save ${String(e.t0)}`;case 37:case"end":return e.stop()}}),e,null,[[9,34]])})))).apply(this,arguments)}function $(){return z.apply(this,arguments)}function z(){return(z=(0,T.default)(y.default.mark((function e(){var t,n,a,i,o;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.deleteAll();case 3:t=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),t={},__LOG__(3)`wam:sendAllLogs failed to read because ${String(e.t0)}`;case 10:return n=t,g&&(g.unsavedPortion&&!(g.saveKey in n)&&(g=g.unsavedPortion),n[(0,w.default)(g,"context").saveKey]=g.stringBuffer()),e.next=14,r.all(A.default.map(n,q));case 14:if(a=e.sent,(i=A.default.filter(a)).length!==a.length&&(R=J(),L=!0),g&&!i.includes(g.saveKey)&&(g=null),0!==i.length){e.next=20;break}return e.abrupt("return");case 20:if(!((o=i.reduce((function(e,t){return e+n[t].length}),0))<I)){e.next=26;break}return e.next=24,r.all(A.default.map(i,(function(e){return v.add(e,n[e]).then((function(){}),(function(){}))})));case 24:e.next=28;break;case 26:g=null,__LOG__(3)`wam dropped ${i.length} buffers! (${o} bytes)`;case 28:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function q(e,t){return""===e||"["===e[0]?r.resolve():f(e,t)}function J(){return Math.floor(Date.now()/1e3)}var Q=A.default.mapValues({commit:function(e){null==e.commitTime||0===e.commitTime?0!==e.weight&&Math.random()*e.weight>1?e.commitTime=J():(e.$className,e.all,F(e),B([!0,e])):__LOG__(3)`wam:commit redundant commit! ${e.$className}`},set:function(e,t){e.name,String(t),B([!1,e,t])},resumeJobs:Y,initialize:G},(function(e){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];M?e.apply(void 0,r):(O||(O=[],self.setTimeout((function(){if(null!=O){i=n(21144).default,u=n(93743).default,o=n(70371),s=n(34263).default,l=n(8643).default,p=n(12035).ShiftTimer,h=n(71701),v=n(6055).Z,d=n(84541).Z,f=n(15913).Z,_=n(87629).Z,(0,C.isConnectedToPage)()&&(c=n(93571)),m=new p((function(){K()}));for(var e=0;e<(0,w.default)(O,"lazyJobs").length;e++)(0,w.default)(O,"lazyJobs")[e]();O=null,M=!0}}),0)),(0,w.default)(O,"lazyJobs").push((function(){e.apply(void 0,r)})))}}));t.default=Q},6055:(e,t,n)=>{"use strict";var r=n(95318);t.Z=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(63984)),s=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,null,[{key:"add",value:function(e,t){return o.default.idb().then((function(n){return n.wam.add({key:e,buffer:t,channel:"regular"},e)}))}},{key:"update",value:function(e,t){return o.default.idb().then((function(n){return n.wam.update(e,{key:e,buffer:t,channel:"regular"})})).then((function(e){return 0!==e}))}},{key:"deleteAll",value:function(){var e={};return o.default.idb().then((function(t){return t.wam.toCollection().modify((function(t){e[t.key]=t.buffer,delete this.value}))})).then((function(){return e}))}}]),e}();t.Z=s},93571:(e,t,n)=>{"use strict";var r=n(95318),a=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.monitor=function(e,t){f(e?t?"ab":"an":t?"ub":"un")},t.uploadEvent=function(){var e=new l.default.WebcWamUpload;if(i){f(s);var t=i.total;if(t>0){var n=i.an+i.ab,r=i.un+i.ub;e.set({webcTotalT:Math.ceil(i.total),webcAvailableTp:n/t,webcAvailableNormalTp:n?i.an/n:void 0,webcAvailableBbarTp:n?i.ab/n:void 0,webcUnavailableTp:r/t,webcUnavailableNormalTp:r?i.un/r:void 0,webcUnavailableBbarTp:r?i.ub/r:void 0})}c(s)}return e};var i,o,s,u=a(n(70496)),l=r(n(8643));function c(e){o=Date.now(),s=e,i={total:0,ab:0,an:0,ub:0,un:0}}function d(e){Date.now()-e>o?o+=e:i[s]-=e}function f(e){if(i){var t=Date.now(),n=Math.max(t-o,0);i.total+=n,i[e]+=n,o=t,s=e}else c(e),u.default.on(u.JS_HALT_EVENT,d)}},51173:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(8643)),s=new(function(){function e(){(0,a.default)(this,e),this._events=new Map}return(0,i.default)(e,[{key:"logSend",value:function(e){var t=e.tag;if(t)try{var n=e.getName(),r=n.startsWith("query")?o.default.WEBC_WAP_REQUEST_KIND_CODE.GET:o.default.WEBC_WAP_REQUEST_KIND_CODE.SET,a=e.isToPhone?o.default.WEBC_WAP_REQUEST_DESTINATION_CODE.PHONE:o.default.WEBC_WAP_REQUEST_DESTINATION_CODE.SERVER,i=e.data.byteLength||JSON.stringify(e.data).length;this._createEvent(t,{kind:r,destination:a,name:n,size:i})}catch(e){__LOG__(3)`WAPReporter: fail to log send`}}},{key:"logBasicSend",value:function(e,t){if(e)try{var n=o.default.WEBC_WAP_REQUEST_KIND_CODE.GET,r=o.default.WEBC_WAP_REQUEST_DESTINATION_CODE.SERVER,a=t[1].toLowerCase(),i=JSON.stringify(t).length;this._createEvent(e,{kind:n,destination:r,name:a,size:i})}catch(e){__LOG__(3)`WAPReporter: fail to log basic send`}}},{key:"logAck",value:function(e){if(e){var t=this._events.get(e);t&&t.markWebcWapRequestAckT({showInTimeline:!1})}}},{key:"logRecv",value:function(e,t,n){if(e){var r=this._events.get(e);r&&(r.webcWapRequestResponseSize=t,null!=n&&(r.webcWapRequestStatus=n),r.markWebcWapRequestRecvT({showInTimeline:!1}),r.commit(),this._events.delete(e))}}},{key:"delete",value:function(e){e&&this._events.delete(e)}},{key:"clear",value:function(){this._events.clear()}},{key:"_createEvent",value:function(e,t){var n=new o.default.WebcWapRequest({webcWapRequestKind:t.kind,webcWapRequestDestination:t.destination,webcWapRequestName:t.name,webcWapRequestSize:t.size});this._events.set(e,n)}}]),e}());t.default=s},71590:e=>{e.exports={Action:"keyboard_action",Event:"keyboard_event",Events:{LOGGED_IN:"logged_in",LOGGED_OUT:"logged_out",ARCHIVE:"archived",MUTE:"muted",PIN:"pinned",READ:"read",READ_ONLY:"read_only",CHAT_KIND:"chat_kind",ZOOM:"zoom",LAUNCH:"launch",BATCH_RENDER:"batch_render"}}},72733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppUserModelId=function(){return"win32"!==process.platform||process.windowsStore?null:"com.squirrel.WhatsApp.WhatsApp"}},65249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDoNotDisturb=function(){try{var e,t;if("darwin"===process.platform)return(null===(e=window.Native.MacOSNotificationState)||void 0===e?void 0:e.getDoNotDisturb())||(null===(t=window.Native.MacOSNotificationState)||void 0===t?void 0:t.getNotificationState())===a.SESSION_SCREEN_IS_LOCKED;if("win32"===process.platform){var n,o,s,u,l;if((null===(n=window.Native.WindowsNotificationState)||void 0===n?void 0:n.getNotificationState())!==a.QUNS_ACCEPTS_NOTIFICATIONS)return!0;var c=(0,r.getAppUserModelId)(),d=c&&"YES"===(null===(o=window.Native.WindowsFocusAssist)||void 0===o||null===(s=o.isPriority(c))||void 0===s?void 0:s.name),f=null===(u=window.Native.WindowsFocusAssist)||void 0===u?void 0:u.getFocusAssist().name;return!!(d&&f===i.ALARMS_ONLY||!d&&[i.PRIORITY_ONLY,i.ALARMS_ONLY].includes(f))||!!(null===(l=window.Native.WindowsQuiteHours)||void 0===l?void 0:l.getIsQuietHours())}}catch(e){__LOG__(3)`getDoNotDisturb failed with error ${e}`}return!1};var r=n(72733),a=n(54302).Mirrored(["UNKNOWN","SESSION_SCREEN_IS_LOCKED","SESSION_ON_CONSOLE_KEY","QUNS_NOT_PRESENT","QUNS_BUSY","QUNS_RUNNING_D3D_FULL_SCREEN","QUNS_PRESENTATION_MODE","QUNS_ACCEPTS_NOTIFICATIONS","QUNS_QUIET_TIME","QUNS_APP","UNKNOWN_ERROR"]),i=n(54302).Mirrored(["NOT_SUPPORTED","FAILED","OFF","PRIORITY_ONLY","ALARMS_ONLY"])},17192:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.playEndCallTone=function(){a.default.getGlobalSounds()&&o.play().catch((function(){}))};var a=r(n(30608)),i=r(n(34263)),o=new window.Audio(i.default.VOIP_END_CALL_TONE)},24775:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPending=function(){return null!=Ae&&Ae.hasPending()},t.stopCommsBeforeUnload=function(){(0,Se.stopComms)()},t.execApiCmd=Pe,t.default=t.InitialEmojisCompletionContext=t.Screen=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(63038)),l=i(n(43269)),c=i(n(34575)),d=i(n(93913)),f=i(n(2205)),p=i(n(99842)),h=i(n(94184)),_=n(12035),v=i(n(91080)),m=i(n(41143)),g=i(n(96486)),y=i(n(30381)),E=a(n(67294)),S=i(n(1073)),b=n(7696),T=i(n(62605)),w=(i(n(85954)),a(n(81198))),A=i(n(65179)),C=i(n(40462)),O=i(n(79140)),M=i(n(34541)),I=i(n(25960)),k=i(n(79037)),P=i(n(93743)),R=i(n(34263)),D=a(n(36268)),N=i(n(63984)),L=i(n(40145)),x=i(n(38869)),U=n(92618),F=n(75398),G=n(71701),B=i(n(22021)),j=i(n(76568)),Y=i(n(44905)),K=i(n(89115)),W=i(n(68390)),V=n(3646),H=i(n(2989)),$=i(n(73666)),z=a(n(23619)),q=i(n(11777)),J=n(58966),Q=n(80877),X=n(28115),Z=i(n(45978)),ee=i(n(46373)),te=n(75483),ne=i(n(63056)),re=i(n(99618)),ae=i(n(44055)),ie=i(n(14054)),oe=a(n(14094)),se=i(n(61198)),ue=a(n(34970)),le=i(n(91492)),ce=i(n(76409)),de=i(n(73358)),fe=i(n(4268)),pe=i(n(6497)),he=i(n(39873)),_e=n(39858),ve=i(n(7860)),me=a(n(17291)),ge=n(29192),ye=i(n(58626)),Ee=i(n(36262)),Se=n(4746),be=(i(n(76582)),i(n(14483))),Te=i(n(71830)),we=i(n(73598));ve.default.registerHandler((function(e){(0,V.requireHandleSocketMessage)().then((function(t){return t(e)}))}));var Ae,Ce=n(54302).Mirrored(["CLIENT_EXPIRED_DIALOG","ANOTHER_SESSION","UNSUPPORTED_TAKEOVER","QR","SYNCING","OFFLINE","PROXYBLOCK","CONFLICT","TOS_BLOCK","SMB_TOS_BLOCK","DEPRECATED_VERSION","MAIN","STARTUP","TEMP_BAN","LOGOUT"]);t.Screen=Ce;var Oe=!1,Me=!1;function Ie(e){"initialPanelMountTRecorded"===e&&(Oe=!0),"initialPanelRenderTRecorded"===e&&(Me=!0),Oe&&Me&&(0,J.onInitialRenderComplete)()}var ke=g.default.once((function(){(0,J.saveInitialPanelMountTime)(Date.now()),Ie("initialPanelMountTRecorded")}));function Pe(e){var t=e.cmdAndData,n=e.isExternal,r=t.resultType,a=t.data;return __LOG__(2)`main:execApiCmd:${r}`,(0,m.default)(null!=Ae,"Attempted to exec API command before main was loaded"),Ae.execApiCmd({cmd:r,untypedData:a,isExternal:n})}var Re=new x.default,De=(0,E.createContext)(Re);t.InitialEmojisCompletionContext=De;var Ne=function(e){(0,f.default)(i,e);var t,a=(0,p.default)(i);function i(){var e;(0,c.default)(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).contextMenuRef=(0,E.createRef)(),e.animate=!0,e.state={mode:oe.default.mode,updating:oe.default.clientExpired,hardExpired:oe.default.hardExpired,anotherSession:!1,takingOver:!1,isUnsupportedTakeover:!1,apiCmd:void 0,locale:K.default.getLocale(),mainLoaded:!1,socketProgressStep:0,theme:(0,ue.getTheme)(),systemThemeMode:(0,ue.getSystemThemeMode)(),isKeyboardUser:!1,initialLoadReady:!1,startLogout:!1,stayInSync:!ve.default.hasSynced},e._unsetIsKeyboardUser=function(){e.setState({isKeyboardUser:!1})},e._setIsKeyboardUser=function(){e.setState({isKeyboardUser:!0})},e._handlers={up:e._setIsKeyboardUser,down:e._setIsKeyboardUser,left:e._setIsKeyboardUser,right:e._setIsKeyboardUser,home:e._setIsKeyboardUser,end:e._setIsKeyboardUser,"command+up":e._setIsKeyboardUser,"command+down":e._setIsKeyboardUser,pageUp:e._setIsKeyboardUser,pageDown:e._setIsKeyboardUser,tab:e._setIsKeyboardUser,"shift+tab":e._setIsKeyboardUser,"shift+?":e._setIsKeyboardUser},e._setWamSystemInfo=new _.ShiftTimer((function(){if(we.default.isDataReady()){var t={networkIsWifi:!0,webcWebArch:we.default.getArch(),webcWebDeviceManufacturer:we.default.getDeviceManufacturer(),webcWebDeviceModel:we.default.getDeviceModel(),webcWebOsReleaseNumber:we.default.getOSRelease()};Te.default.initialize(t)}else e._setWamSystemInfo.onOrAfter(R.default.WAM_SYS_INFO_INIT_DELAY)})),e._setModeScheduler=new _.ShiftTimer((function(t){t!==e.state.mode&&e.setState({mode:t})})),e._handleStreamModeChange=function(){var t=oe.default.mode;e.state.mode!==oe.StreamMode.MAIN?e._setModeScheduler.onOrBefore(0,t):e._setModeScheduler.forceRunNow(t)},e._onClientExpired=function(){e.state.updating!==oe.default.clientExpired&&e.setState({updating:oe.default.clientExpired})},e._onHardExpired=function(){e.setState({hardExpired:oe.default.hardExpired})},e.onMouseDown=function(t){e._unsetIsKeyboardUser(),M.default.windowMouseDown(t)},e.onClick=function(t){e._unsetIsKeyboardUser(),M.default.windowClick(t)},e._handleWindowClick=function(t){var n,r=t.target;if(r&&"A"===r.nodeName){var a=r.getAttribute("href");if(a)if(!(null===(n=r.dataset)||void 0===n?void 0:n.nohandle)){var i=(0,Q.parseAPICmd)(a);"INVALID"!==i.resultType&&e._canExecApiCmd()&&Pe({cmdAndData:i,isExternal:!0})&&t.preventDefault()}}},e._handleSetTheme=function(t){if(e.state.theme!==t){var n,r=(0,l.default)(ue.THEME_ASSETS[t]);try{for(r.s();!(n=r.n()).done;){var a=n.value;w.default.loadAsset(a,w.LOAD_PRIORITY.THEME_ASSET_LOAD,!1)}}catch(e){r.e(e)}finally{r.f()}if(ne.default.wallpapersV2){var i=A.default.get("defaultPreference");if(i&&R.default.DEFAULT_CHAT_WALLPAPER!==i.wallpaperColor){var o=(0,_e.toggleWallpaperColor)(i.wallpaperColor,e.state.theme);i.set("wallpaperColor",o)}}(0,ue.setTheme)(t),e.setState({theme:t})}},e._handleSetSystemThemeMode=function(t){(0,ue.setSystemThemeMode)(t),e.setState({systemThemeMode:t})},e._mdReloadPageOnTakeOver=function(){__LOG__(2)`[md takeover] refreshing page on takeover`,window.Native.ipcRenderer.invoke("refresh-electron-window-for-refresh")},e._onReadyForMainScreen=function(){__LOG__(2)`DebouncedLoadingScreen: Ready for main screen`,e.setState({stayInSync:!1})},e._mdReloadPageWithUnsupportedTakeOver=function(){__LOG__(2)`[unsupported takeover] refreshing page with unsupported takeover`,window.location.reload()},e._getThemeContextValue=(0,$.default)((function(t){var n=t.theme,r=t.systemThemeMode;return{theme:n,setTheme:e._handleSetTheme,systemThemeMode:r,setSystemThemeMode:e._handleSetSystemThemeMode}})),e}return(0,d.default)(i,[{key:"componentDidMount",value:function(){var e=this;!0===(0,G.mdOptedIn)()&&(B.default.setFeature(B.default.F.MD_BACKEND,!0),B.default.setFeature(B.default.F.MD_ADV,!0),B.default.setFeature(B.default.F.MD_VOIP_GROUP,!1));var t=this.state.theme;(0,ue.applyThemeToUI)(t),Ue().then((function(e){w.default.setPlatform(e),w.default.loadInitialAssets(ue.THEME_ASSETS[t])})),r.all([r.all([(0,V.requireMain)(),Ue()]).then((function(e){var t=(0,u.default)(e,2),n=t[0],r=t[1];J.mainScriptTimer.start(),Ae=n(r),J.mainScriptTimer.end()})),(0,H.default)()]).then(X.loadProtoVersions).then((function(){M.default.mainLoaded(),e.setState({mainLoaded:!0})})).then((function(){return r.all([(0,V.requireEmojiAssetMapCreator)(),(0,V.requireEmojiConfig)(),Ue()])})).then((function(e){var t=(0,u.default)(e,3),n=t[0],r=t[1],a=t[2];w.default.setPlatform(a),w.default.initEmojiAsset(n(r)),Re.beginPreloadFallback()}));var a=this.props.listeners;a.add(M.default,"increment_progress",(function(){e._incProgress()})),a.add(M.default,"initial_load_ready",(function(){e.setState({initialLoadReady:!0})})),a.add(ie.default,"storage_not_enough_space",(function(){M.default.openModal(E.default.createElement(I.default,{onOK:function(){ve.default.logout()},okText:K.default.t(1826)},K.default.t(1798)))})),a.add(M.default,"account_temporarily_banned",(function(t){e.setState({temporaryBan:t})})),a.add(M.default,"starting_logout",(function(){e.setState({startLogout:!0})})),B.default.supportsFeature(B.default.F.MD_BACKEND)&&ge.OfflineResumeReporter.logPageLoadT(),a.add(oe.default,"change:clientExpired",this._onClientExpired),a.add(oe.default,"change:hardExpired",this._onHardExpired),a.add(oe.default,"change:mode",this._handleStreamModeChange);var i,o=window.Native,s=o.ipcRenderer,l=o.webFrame,c=n(71590),d=n(5693).default.require("WhatsAppWindow");if(l.setVisualZoomLevelLimits(1,1),s.send(`${c.Event}:${c.Events.LAUNCH}`),s.once(`${c.Event}:${c.Events.LAUNCH}`,(function(t,n){var r=(0,Q.parseAPICmd)(n);r.resultType!==b.APICmd.INVALID&&e._maybeExecApiCmd(r)})),s.on("open-url",(function(t,n){var r=(0,Q.parseAPICmd)(n);r.resultType!==b.APICmd.INVALID&&(e._maybeExecApiCmd(r),d.reveal(),window.focus())})),this._setWamSystemInfo.onOrAfter(R.default.WAM_SYS_INFO_INIT_DELAY),a.add(K.default,"locale_change",(function(t){__LOG__(2)`App:componentDidMount:rerenderUI locale change`,(0,G.setLangPref)(t),e.animate=!1,e.setState({locale:`${K.default.getLocale()}#${y.default.locale()}`})})),this._registerYesterdayTimer(),__LOG__(2)`App:componentDidMount:visibilityState: ${document.visibilityState}`,"prerender"===document.visibilityState?(0,he.default)(document,"visibilitychange").timeout(5e3).then((function(){return e._beginMutex(0)})).catch((function(){return e._beginMutex(0)})):this._beginMutex(0),window.Native.UpgradeTestHelper.isUpgradeTest)var f=window.Native.net.createConnection(2519,(function(){console.log("connection established for upgrade test"),setTimeout((function(){f.write("renderer_2.2126.11\n","utf8")}),15e3)}));this.props.listeners.add(window,"click",this._handleWindowClick,!0),this.props.listeners.add(window,"blur",(function(){e._unsetIsKeyboardUser()})),me.default.poll(me.checkForUpdates),this._logFirstRenderMountTime(),document.createElement=(i=document.createElement.bind(document),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("iframe"===e.toLowerCase()){__LOG__(3)`Modified a created iframe element to include sandbox attributes for security fix.`;var n=i(e,t);return n.sandbox=ne.default.webYouTubePlayerEnhancements?"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox":"allow-scripts allow-same-origin",n}return i(e,t)}),this.props.listeners.add(se.default,"system_theme_change",(function(t){e.state.systemThemeMode&&e._handleSetTheme(t)}))}},{key:"componentDidUpdate",value:function(e,t){!0===t.anotherSession&&!1===this.state.anotherSession?N.default.openDB().catch((function(e){__LOG__(3)`Failed to open indexeddb: ${e}`})):!1===t.anotherSession&&!0===this.state.anotherSession&&N.default.idb().then((function(e){return e.close()})).catch((function(){})),this._maybeExecApiCmd(this.state.apiCmd),this.state.mode!==oe.StreamMode.MAIN&&(this.animate=!0),this._logFirstRenderMountTime()}},{key:"componentWillUnmount",value:function(){this._setModeScheduler.cancel(),this._setWamSystemInfo&&this._setWamSystemInfo.cancel()}},{key:"_beginMutex",value:(t=(0,s.default)(o.default.mark((function e(){var t,n=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>1&&void 0!==n[1]&&n[1],!de.default.isLocalStorageBroken||!B.default.supportsFeature(B.default.F.MD_BACKEND)){e.next=9;break}return e.next=4,(0,te.isAnotherTabActive)();case 4:if(!e.sent){e.next=9;break}this.setState({isUnsupportedTakeover:!0});try{(0,Se.stopComms)()}catch(e){}return e.abrupt("return");case 9:(0,te.setTabActive)(),t&&pe.default.shouldForceUpdateOnTakeOver()&&pe.default.restart(),window.setTimeout((function(){ve.default.preload(),(0,be.default)(!0)}),0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_incProgress",value:function(){this.setState({socketProgressStep:this.state.socketProgressStep+1})}},{key:"_maybeExecApiCmd",value:function(e){if(e)return this._canExecApiCmd()?(Pe({cmdAndData:e,isExternal:!0}),void(null!=this.state.apiCmd&&this.setState({apiCmd:null}))):void(e!==this.state.apiCmd&&this.setState({apiCmd:e}))}},{key:"_canExecApiCmd",value:function(){return null!=Ae&&xe(this.state)===Ce.MAIN}},{key:"_logFirstRenderMountTime",value:function(){this.state.mode!==oe.StreamMode.SYNCING&&ke()}},{key:"_calculateProgress",value:function(){return 20*this.state.socketProgressStep}},{key:"_registerYesterdayTimer",value:function(){var e=this;S.default.setLocalTimeout((function(){__LOG__(2)`App:registerYesterdayTimer:rerenderUI relative timestamps`,__LOG__(2)`Local Clock: ${Date.now()}, Skew: ${O.default.getSkew()}`,M.default.midnight(),e._registerYesterdayTimer()}),(0,y.default)().endOf("day").valueOf())}},{key:"_getTemporaryBanReason",value:function(e){var t=(0,G.getMaybeMeUser)().user;switch(e){case 101:return K.default.t(1450,{phone:t});case 102:return K.default.t(1451);case 103:return K.default.t(1452,{phone:t});case 104:return K.default.t(1453);case 106:return K.default.t(1454);default:return K.default.t(1455)}}},{key:"_getUiAndIconCount",value:function(){var e=this;switch(xe(this.state)){case Ce.CLIENT_EXPIRED_DIALOG:return{ui:E.default.createElement(F.DefaultFavicon,null,E.default.createElement(C.default,null)),requiresBackendCheck:!1};case Ce.ANOTHER_SESSION:var t,n;return this.state.takingOver?(t=function(){},n=K.default.t(569)):(t=function(){B.default.supportsFeature(B.default.F.MD_BACKEND)?e._mdReloadPageOnTakeOver():e._beginMutex(0,!0)},n=K.default.t(408)),{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(k.default,{cancelText:K.default.t(1668),onCancel:window.open.bind(window,"https://www.whatsapp.com/","_self"),okText:n,onOK:t},K.default.t(1982))),requiresBackendCheck:!1};case Ce.UNSUPPORTED_TAKEOVER:return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(k.default,{okText:K.default.t(1937),onOK:this._mdReloadPageWithUnsupportedTakeOver},K.default.t(1936))),requiresBackendCheck:!1};case Ce.TEMP_BAN:var r=this.state.temporaryBan||{},a=r.code,i=r.expire,o=this._getTemporaryBanReason(a),s=y.default.duration(i,"seconds").humanize();return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(k.default,{cancelText:K.default.t(1015),onCancel:function(){__LOG__(2)`Banned accounts: user selected logout`,ve.default.logout()},okText:K.default.t(1784),onOK:window.open.bind(window,(0,U.getFaqUrl)())},E.default.createElement("div",null,o),E.default.createElement("div",null,K.default.t(1449,{duration:s})))),requiresBackendCheck:!0};case Ce.QR:return{ui:E.default.createElement(F.DefaultFavicon,null,E.default.createElement(z.default,{type:z.ModalType,key:"modal-manager"}),E.default.createElement(ee.default,{key:"qr-code",apiCmd:this.state.apiCmd})),extraClasses:T.default.isQR,requiresBackendCheck:!0};case Ce.STARTUP:case Ce.SYNCING:if(B.default.supportsFeature(B.default.F.MD_BACKEND)){var u=E.default.createElement(Ee.default,{initialLoadReady:this.state.initialLoadReady,onReady:this._onReadyForMainScreen});return{ui:E.default.createElement(F.DefaultFavicon,null,u),requiresBackendCheck:!0}}return{ui:E.default.createElement(F.DefaultFavicon,null,E.default.createElement(ae.default,{progress:this._calculateProgress()})),requiresBackendCheck:!0};case Ce.OFFLINE:return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(q.default,null)),requiresBackendCheck:!0};case Ce.PROXYBLOCK:return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(Z.default,null)),requiresBackendCheck:!0};case Ce.CONFLICT:return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(k.default,{cancelText:K.default.t(1015),onCancel:function(){return ve.default.logout()},okText:K.default.t(408),onOK:function(){return ve.default.takeover()}},K.default.t(1229))),requiresBackendCheck:!0};case Ce.TOS_BLOCK:return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(ce.default,{description:K.default.t(1931)})),requiresBackendCheck:!0};case Ce.SMB_TOS_BLOCK:return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(ce.default,{description:K.default.t(1904)},E.default.createElement(re.default,null))),requiresBackendCheck:!0};case Ce.DEPRECATED_VERSION:return{ui:E.default.createElement(F.ErrorFavicon,null,E.default.createElement(L.default,null)),requiresBackendCheck:!0};case Ce.LOGOUT:return{ui:E.default.createElement(F.DefaultFavicon,null,E.default.createElement(z.default,{type:z.ModalType,key:"modal-manager"}),E.default.createElement(ye.default,{key:"logout"})),requiresBackendCheck:!0};case Ce.MAIN:var l=(0,v.default)(Ae,"Main").MainComponent;return{ui:[E.default.createElement(le.default,{key:"toast-manager"}),E.default.createElement(z.default,{contextMenuRef:this.contextMenuRef,type:z.ModalType,key:"main-modal-manager"}),E.default.createElement(z.default,{type:z.MediaType,key:"media-modal-manager"}),E.default.createElement(D.default,{ref:this.contextMenuRef,type:D.Type.MENU,key:"context-menu-manager"}),E.default.createElement(D.default,{type:D.Type.TOOLTIP,key:"tooltip-manager"}),E.default.createElement(De.Provider,{key:"main",value:Re},E.default.createElement(l,{conn:P.default,animate:this.animate}))],extraClasses:T.default.isMain,requiresBackendCheck:!0}}}},{key:"render",value:function(){!function(e){if(J.initialScreenTimer.hasStarted())return;var t=xe(e);if(!function(e){return e!==Ce.SYNCING}(t))return;(0,J.setInitialScreen)(t),J.initialScreenTimer.start(),window.requestAnimationFrame((function(){J.initialScreenTimer.end(),Ie("initialPanelRenderTRecorded")}))}(this.state);var e=this.state.isKeyboardUser,t=this._getUiAndIconCount(),n=t.ui,r=t.extraClasses,a=t.requiresBackendCheck,i=K.default.isRTL(window.Native.appGetLocale()),o=(0,h.default)(T.default.wrapper,r,{"app-wrapper-native":!0,"safari-fix":de.default.isSafari,"edge-fix":de.default.isTrident,"os-ltr":!i,"os-rtl":i,"os-mac":de.default.os===R.default.OS_TYPE.MAC,"os-win":de.default.os===R.default.OS_TYPE.WINDOWS,"keyboard-user":e});a&&null!=Ae&&!(0,G.knowsPhone)()&&Ae.notificationBackend.shutdownAsNeeded();var s=E.default.createElement("div",{className:T.default.draggableHeader});return E.default.createElement(ue.default.Provider,{value:this._getThemeContextValue({theme:this.state.theme,systemThemeMode:this.state.systemThemeMode})},E.default.createElement(Y.default.Provider,{value:e},E.default.createElement(fe.default,{displayName:"App",uimState:fe.default.State.INACTIVE},E.default.createElement(j.default,{handlers:this._handlers,className:o,onMouseDownCapture:this.onMouseDown,onClickCapture:this.onClick,key:this.state.locale},undefined,s,n))))}}]),i}(E.Component);Ne.displayName="App";var Le=(0,W.default)(Ne);function xe(e){var t=e.anotherSession,n=e.isUnsupportedTakeover,r=e.updating,a=e.hardExpired,i=e.mainLoaded,o=e.mode;if(B.default.supportsFeature(B.default.F.MD_BACKEND)){var s;if(null===(s=e.temporaryBan)||void 0===s?void 0:s.banned)return Ce.TEMP_BAN;if(e.startLogout)return Ce.LOGOUT}if(r||a)return Ce.CLIENT_EXPIRED_DIALOG;if(n)return Ce.UNSUPPORTED_TAKEOVER;if(t)return Ce.ANOTHER_SESSION;switch(o){case oe.StreamMode.QR:return Ce.QR;case oe.StreamMode.SYNCING:return Ce.SYNCING;case oe.StreamMode.OFFLINE:return Ce.OFFLINE;case oe.StreamMode.PROXYBLOCK:return Ce.PROXYBLOCK;case oe.StreamMode.CONFLICT:return Ce.CONFLICT;case oe.StreamMode.TOS_BLOCK:return Ce.TOS_BLOCK;case oe.StreamMode.SMB_TOS_BLOCK:return Ce.SMB_TOS_BLOCK;case oe.StreamMode.DEPRECATED_VERSION:return Ce.DEPRECATED_VERSION;case oe.StreamMode.MAIN:return i?B.default.supportsFeature(B.default.F.MD_BACKEND)&&e.stayInSync?Ce.SYNCING:Ce.MAIN:Ce.STARTUP}throw new Error(`app:render Error invalid StreamMode: ${o}`)}function Ue(){return P.default.platform?r.resolve(P.default.platform):new r((function(e){var t=function(){var n=P.default.platform;null!=n&&(P.default.off("change:platform",t),e(n))};P.default.on("change:platform",t)}))}t.default=Le},90085:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(t,n,r){(0,a.default)(this,e),this.retryCount=0,this.asset=t,this.resolution=n,this.priority=r}return(0,i.default)(e,[{key:"getLoadUrlPromise",value:function(){return this._loadUrlPromise}},{key:"setLoadUrlPromise",value:function(e){this._loadUrlPromise=e}},{key:"getConsumerPromise",value:function(){return this._consumerPromise}},{key:"setConsumerPromise",value:function(e){this._consumerPromise=e}},{key:"getConsumerPromiseResolve",value:function(){return this._consumerPromiseResolve}},{key:"setConsumerPromiseResolve",value:function(e){this._consumerPromiseResolve=e}}]),e}();t.default=o},28165:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},46795:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getEmojiTypeFromPlatform=f,t.default=function(e){return function(t){return d(t,e)}};var a=r(n(96486)),i=n(93743),o=r(n(34263)),s=n(68386),u=o.default.EMOJI,l=u.EMOJI_TYPE,c=u.BUCKET_SIZE,d=a.default.memoize((function(e,t){for(var n=new Map,r=f(e),i=t[r],o=i.SELECTOR,u=Math.ceil(a.default.uniq(a.default.values(i.UNICODE_TO_EMOJI)).length/c),l=0;l<u;l+=1){var d=`emoji-${o}-b${l}`;n.set(d,{id:d,selectors:[`.emoji.${o}.b${l}`,`.emojik.${o}.b${l}`],low:{webp:(0,s.getEmojiSpritesPath)(r,l,64,"webp")},high:{webp:(0,s.getEmojiSpritesPath)(r,l,64,"webp")}})}return n}));function f(e){switch(e){case i.PLATFORMS.IPHONE:case i.PLATFORMS.SMBI:case i.PLATFORMS.IPAD:case i.PLATFORMS.IPOD:return l.APPLE;default:return l.WHATSAPP}}},38869:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(81198)),o=r(n(8643));t.default=function e(){var t=this;(0,a.default)(this,e),this._loadingEmojisCount=0,this._hasTriggeredEmojiPreload=!1,this.beginPreload=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t._hasTriggeredEmojiPreload||(t._hasTriggeredEmojiPreload=!0,window.setTimeout((function(){i.default.loadEmojis()}),e?1e3:0))},this.beginPreloadFallback=function(){window.setTimeout((function(){t.beginPreload(!1)}),5e3)},this.incrementLoadingEmojisCount=function(){t._hasTriggeredEmojiPreload||(t._firstScreenEmojisLoadEvent||(t._firstScreenEmojisLoadEvent=new o.default.WebcFirstScreenEmojisLoad({webcLoadedEmojisCount:0})),t._firstScreenEmojisLoadEvent.webcEmojisLoadT||(t._firstScreenEmojisLoadEvent.webcLoadedEmojisCount+=1),t._loadingEmojisCount+=1)},this.decrementLoadingEmojisCount=function(){if(!t._hasTriggeredEmojiPreload){t._loadingEmojisCount-=1;var e=t._firstScreenEmojisLoadEvent;if(0===t._loadingEmojisCount&&e){t.beginPreload(!0),e.markWebcEmojisLoadT(),e.commit();var n=e.webcEmojisLoadT;__LOG__(2)`EmojiCompletionTracker:firstScreenEmojis complete in ${n} ms`}}}}},81198:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AssetLoaderClass=t.default=t.AssetLoader=t.LOAD_PRIORITY=void 0;var o=i(n(319)),s=i(n(34575)),u=i(n(93913)),l=i(n(91080)),c=i(n(41143)),d=i(n(96486)),f=i(n(90085)),p=i(n(28165)),h=i(n(34263)),_=i(n(49315)),v=i(n(68511)),m=i(n(8513)),g=n(46795),y=a(n(82474)),E=i(n(8643)),S=i(n(39863)),b=a(n(59502)),T={INITIAL_EMOJI_LOAD:1,INITIAL_ASSET_LOAD:2,THEME_ASSET_LOAD:2,HELP_ANIMATED_DOODLE:2,LAZY_LOAD_EMOJI:2,NOTIFICATION_ICON:2};t.LOAD_PRIORITY=T;var w=h.default.EMOJI.EMOJI_TYPE,A=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;(0,s.default)(this,e),this._assetStyle=new v.default("asset-style"),this._requestedAssets={},this._loadingDataMap={},this._getEmojiForPlatform=null,this._currentResolution=_.default.currentRes,this._currentlyLoadingCount=0,this._queue=new S.default((function(e){return-e.priority})),this._hasLoggedDecrementBelowZero=!1,this._handleDpiChange=function(){var e=_.default.currentRes,n=t._currentResolution;e!==n&&(t._currentResolution=e,Object.keys(t._requestedAssets).forEach((function(e){t._cancelLoad(e,n)})),t._loadAssets(d.default.values(t._requestedAssets),T.INITIAL_EMOJI_LOAD,{forceCheck:!1}).catchType(r.CancellationError,(function(){})))},this._maxConcurrentRequests=n,window.addEventListener("dpichange",this._handleDpiChange)}return(0,u.default)(e,[{key:"initEmojiAsset",value:function(e){this._getEmojiForPlatform=e}},{key:"loadInitialAssets",value:function(e){var t=new E.default.WebcAssetLoad({webcAssetName:"initial-assets",webcAssetFromCache:!1,webcAssetCacheType:E.default.WEBC_ASSET_CACHE_TYPE_CODE.UNCACHED});this._loadAssets(e,T.INITIAL_ASSET_LOAD,{estimateStorage:!0}).then((function(){t.markWebcAssetLoadT(),t.commit();var e=t.webcAssetLoadT;__LOG__(2)`AssetLoader:loadInitialAssets complete in ${e}ms`})).catchType(r.CancellationError,(function(){__LOG__(2)`AssetLoader:loadInitialAssets cancelled by more recent request.`}))}},{key:"loadEmoji",value:function(e,t){if(this._getEmojiForPlatform&&this._currentPlatform){var n=this._getEmojiForPlatform(this._currentPlatform),a=m.default.getBucket(e),i=this._getEmojiPrefix(),o=n.get(`${i}b${a}`),s=this._currentResolution;return o?this.loadAsset(o,t,!1).catchType(r.CancellationError,(function(){__LOG__(2)`AssetLoader: loadEmoji Cancelled by more recent request: ${o.id}-${s}`})):r.reject(new Error("The given emoji glyph id was not found"))}return r.reject(new Error("emojiForPlatform or currentPlatform are not set"))}},{key:"loadEmojis",value:function(){var e=(0,l.default)(this._currentPlatform,"this._currentPlatform");(0,c.default)(null!=this._getEmojiForPlatform,"Emojis were loaded before initializing the emoji assets!");var t=(0,o.default)(this._getEmojiForPlatform(e).values()),n=new E.default.WebcAssetLoad({webcAssetName:"emojis",webcAssetFromCache:!1,webcAssetCacheType:E.default.WEBC_ASSET_CACHE_TYPE_CODE.UNCACHED});this._loadAssets(t,T.INITIAL_EMOJI_LOAD,{estimateStorage:!0}).then((function(){n.markWebcAssetLoadT(),n.commit();var e=n.webcAssetLoadT;__LOG__(2)`AssetLoader:loadEmojis complete in ${e}ms`})).catchType(r.CancellationError,(function(){__LOG__(2)`AssetLoader:loadEmojis cancelled by more recent request.`}))}},{key:"loadAsset",value:function(e,t){var n=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.id,o=_.default.currentRes,s=this._requestedAssets[i];if(s&&!d.default.isEqual(e,s))return r.reject(new Error(["Attempted to load an asset using an already used ID"].join("\n")));this._requestedAssets[i]=e,this._loadingDataMap[i]=this._loadingDataMap[i]||{};var u="high"===o?"low":"high";this._cancelLoad(i,u);var l=this._loadingDataMap[i][o];if(l&&!a)return l.promise;var c=new f.default(e,o,t),p=this._buildPromise(c),h=p.uncancellable().tap((function(t){var r=e.selectors;r&&n._assetStyle.setRule(`${r.join(", ")}`,{"background-image":`url('${t}')`})})).catch((function(e){var t=n._loadingDataMap[i][o],a=v!==t;if(a||(n._loadingDataMap[i][o]=null),e instanceof r.CancellationError&&(__LOG__(2)`Asset load cancelled by more recent request: ${i}-${o}`,a&&t))return t.promise;throw e}));c.setConsumerPromise(h);var v={promise:h,cancel:function(e){n._cancelUrlPromise(c,e)}};return this._loadingDataMap[i][o]=v,l&&l.cancel(!1),this._startLoad(),h}},{key:"_buildPromise",value:function(e){var t=this;return new r((function(n){e.setConsumerPromiseResolve(n),t._queue.push(e)})).cancellable()}},{key:"_startLoad",value:function(){var e=this;if(!(this._currentlyLoadingCount>=this._maxConcurrentRequests))for(var t=function(){var t=e._queue.pull();if(!t)return{v:void 0};e._currentlyLoadingCount+=1,(0,y.default)(t).then((function(){e._decrementCurrentlyLoadingCount(),e._startLoad()})).catchType(r.CancellationError,(function(){e._decrementCurrentlyLoadingCount(),e._startLoad()})).catch((function(n){e._decrementCurrentlyLoadingCount(),t.retryCount+=1;var r=b.expBackoff(t.retryCount,12e4,1e3,.1);setTimeout((function(){e._queue.push(t),e._startLoad()}),r),e._startLoad(),(0,y.getSupportedImageFormatUrl)(t).then((function(e){var t=e.split("/");__LOG__(3)`Asset: ${t[t.length-1]} failed. Retrying... ${n.toString()}`}))}))},n=0;n<this._maxConcurrentRequests-this._currentlyLoadingCount;n++){var a=t();if("object"==typeof a)return a.v}}},{key:"_cancelUrlPromise",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.getLoadUrlPromise();if(n){n.cancel();var r=e.getConsumerPromise();t&&r&&r.cancel()}this._startLoad()}},{key:"_cancelLoad",value:function(e,t){var n=this._loadingDataMap[e]&&this._loadingDataMap[e][t];n&&(this._loadingDataMap[e][t]=null,n.promise.isPending()&&n.cancel(!0))}},{key:"setPlatform",value:function(e){var t=this;if(e!==this._currentPlatform){this._currentPlatform=e;var n=((0,g.getEmojiTypeFromPlatform)(e)===w.APPLE?w.WHATSAPP:w.APPLE)===w.APPLE?"emoji-apple-":"emoji-wa-";if(Object.keys(this._requestedAssets).forEach((function(e){e.startsWith(n)&&(t._cancelLoad(e,"high"),t._cancelLoad(e,"low"))})),null!=this._getEmojiForPlatform){var r=(0,o.default)(this._getEmojiForPlatform(e).values());this._loadAssets(r,T.INITIAL_EMOJI_LOAD,{forceCheck:!1})}}}},{key:"_getEmojiPrefix",value:function(){return(0,g.getEmojiTypeFromPlatform)(this._currentPlatform)===w.APPLE?"emoji-apple-":"emoji-wa-"}},{key:"_loadAssets",value:function(e,t,n){var a=this,i=!1!==(n&&n.forceCheck),o=!0===(n&&n.estimateStorage);return r.all(e.map((function(e){return a.loadAsset(e,t,i)}))).then((function(e){return(0,p.default)({keep:d.default.values(a._requestedAssets),estimateStorage:o}),e}))}},{key:"_decrementCurrentlyLoadingCount",value:function(){this._currentlyLoadingCount<=0&&!this._hasLoggedDecrementBelowZero&&(this._hasLoggedDecrementBelowZero=!0,__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Tried to decrease _loadingCount below zero, would have been negative.")),this._currentlyLoadingCount=Math.max(0,this._currentlyLoadingCount-1)}}]),e}();t.AssetLoader=A;var C=new A;t.default=C;var O=A;t.AssetLoaderClass=O},82474:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedImageFormatUrl=m,t.default=function(e){var t=new c.default,n=m(e).then((function(n){var a;return p.default.waitIfOffline({signal:(new c.default).signal}).then((function(){return a=Date.now(),(0,f.default)(n,{signal:t.signal})})).cancellable().catchType(r.CancellationError,(function(e){return t.abort(),r.reject(e)})).then((function(t){var i=e.getConsumerPromiseResolve();if(!t.ok||!i)return r.reject(new v(n,t.status,Date.now()-a));i(n)})).cancellable()}));return e.setLoadUrlPromise(n),n},t.LoadUrlError=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=n(1838),l=a(n(91080)),c=a(n(35340)),d=a(n(15136)),f=a(n(68024)),p=a(n(67890)),h="default",_="webp",v=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r,a){var o;return(0,i.default)(this,n),(o=t.call(this,`Failed to load url. StatusCode: ${r}. Duration: ${a} ms`)).url=e,o.statusCode=r,o}return n}((0,u.customError)("LoadUrlError"));function m(e){return(0,d.default)().cancellable().then((function(t){var n=e.asset,r=e.resolution,a=t&&n[r][_]?_:h;return(0,l.default)(n[r][a],"asset[resolution][format]")}))}t.LoadUrlError=v},74690:(e,t,n)=>{var r=n(87757),a=n(48926);function i(){return(i=a(r.mark((function e(){var t,i,o,s,u,l,c,d,f,p,h,_,v,m,g,y,E,S,b,T,w,A,C;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.Promise=n(60077).default,(0,n(98529).default)(),window.__LOG__=n(43906).log,window.SEND_LOGS=n(70371).sendLogs,window.onerror=n(13664).HC,window.Promise.onPossiblyUnhandledRejection=n(13664).e2,t=n(2977).default,i=n(34263).default,o=n(73358).default,s="1"===(null==t?void 0:t.getItem(i.KEY_LOGOUT_DIRTY_BIT)),u="true"===(null==t?void 0:t.getItem(i.KEY_MD_OPTED_IN)),l=!(null==t?void 0:t.getItem(i.KEY_LAST_WID_MD))&&!(null==t?void 0:t.getItem(i.KEY_LAST_WID)),c=n(99867).Z,!(s||l&&u)){e.next=25;break}return e.prev=15,e.next=18,c();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),__LOG__(4,void 0,new Error,void 0,["bootstrap_qr"])`Preemptive db delete failed with error ${e.t0}`;case 23:e.next=26;break;case 25:try{n(43906).default.clearLogsPreemptive()}catch(e){}case 26:if(!s){e.next=32;break}return d=window.Native.ipcRenderer,null==t||t.clear(),e.abrupt("return",d.invoke("refresh-electron-window-on-logout"));case 32:return f=n(3646),(0,f.requireMain)(),p=n(58966),(h=p.exeTimer).start(),_=n(35643).default,v=n(73935),m=n(67294),o.isSafari&&o.browserVersion.startsWith("13.")&&(_(document.body,"document.body").className+=" text-rendering-bug-fix"),n(42053),window.Velocity=n(12641),n(38161),window.WebFont=n(75933),n(64950),g=n(31785),y=n(68831).Z,g.set(y),E=n(88828),S=E.isFunction,["getSelection","open","focus"].forEach((function(e){var t=Object.getPrototypeOf(window)[e];S(t)&&window[e]!==t&&(window[e]=t)})),b=n(70371),window.Debug||(window.Debug={}),window.Debug.uploadLogs=b.upload,e.prev=53,T=n(63984).default,e.next=57,T.loadUserIdb();case 57:return e.prev=57,n(89115).default.init(n(71701).getLangPref()).then(a(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,79140));case 2:e.sent.default.setIs24HourBasedOnLocale();case 4:case"end":return e.stop()}}),e)})))),n(43906).default,w=n(8643).default,n(5693).default,window.Native.addListener("AutoLauncher:toggle",(function(e){return w.Global.webcNativeAutolaunch=e})),A=n(24775),C=A.default,A.hasPending,window.Debug.VERSION=i.VERSION_STR,window.Debug.DESKTOP_BETA=!1,window.Debug.BUILD_ID=i.BUILD_ID,n(21144).default,window.onbeforeunload=function(){},window.addEventListener("dragover",(function(e){e.preventDefault()})),window.addEventListener("drop",(function(e){e.preventDefault()})),n(57140).loadSVGData(),(0,n(6852).Z)()||(v.render(m.createElement(C,null),_(document.getElementById("app"),"document.getElementById('app')")),h.end()),e.finish(57);case 76:case"end":return e.stop()}}),e,null,[[15,20],[53,,57,76]])})))).apply(this,arguments)}!function(){i.apply(this,arguments)}()},83180:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genId=function(e){return d.default.uniqueId(e||"action_toast")},t.ActionToast=t.ActionType=t.ToastPosition=void 0;var i=a(n(93913)),o=a(n(81506)),s=a(n(2205)),u=a(n(99842)),l=a(n(34575)),c=n(53615),d=a(n(96486)),f=r(n(67294)),p=a(n(34541)),h=n(92631),_={LEFT:"LEFT",RIGHT:"RIGHT"};t.ToastPosition=_;t.ActionType=function e(t,n){if((0,l.default)(this,e),!t)throw new Error("ActionType must have text!");this.text=t,n&&(this.action=n.actionText,this.handler=n.actionHandler)};var v=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={currentInitialAction:e.props.initialAction,actionType:e.props.initialAction,pending:!0},e._actionPromise=null,e.onAction=function(){e.state.actionType&&e.state.actionType.handler&&e.state.actionType.handler().catch((function(){}))},e.onDismiss=function(){p.default.closeToast((0,o.default)(e))},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this._runAction(this.props.pendingAction)}},{key:"componentDidUpdate",value:function(e){e.pendingAction!==this.props.pendingAction&&this._runAction(this.props.pendingAction)}},{key:"_runAction",value:function(e){var t=this,n={};this._actionPromise&&this._actionPromise.control.cancel(),this._actionPromise=e.addRejectControl("cancel",(function(){return n})).then((function(e){t.setState({actionType:e,pending:!1})})).catchConditional((function(e){return e!==n}),(function(e){t.setState({actionType:e,pending:!1})})).then((function(){return(0,c.delayMs)(t.props.settleDuration)})).addRejectControl("cancel",(function(){return n})).then((function(){p.default.closeToast(t)})).catchConditional((function(e){return e===n}),(function(){})).endWithControls("cancel")}},{key:"render",value:function(){var e,t,n=this.state.actionType;return n?(n.action&&n.handler&&(t=f.default.createElement(h.ToastActionBtn,{buttonText:n.action,onClick:this.onAction})),this.state.pending||(e=f.default.createElement(h.ToastDismissBtn,{onClick:this.onDismiss})),f.default.createElement(h.ToastBody,{toastPosition:this.props.toastPosition,actionText:n.text,actionBtn:t,dismissBtn:e})):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.initialAction;return n!==t.currentInitialAction?{currentInitialAction:n,actionType:n,pending:!0}:null}}]),n}(f.Component);t.ActionToast=v,v.defaultProps={settleDuration:5e3,toastPosition:_.LEFT},v.displayName="ActionToast"},16973:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67154)),i=r(n(59713)),o=r(n(63038)),s=r(n(94184)),u=r(n(67294)),l=r(n(97930)),c=r(n(44889)),d=n(32002),f=r(n(87729)),p=r(n(51912)),h=r(n(4645)),_=r(n(10394));var v=function(e){var t,n,r=e.a8nText,v=e.children,m=e.className,g=e.disabled,y=e.onClick,E=e.nowrap,S=e.spinner,b=e.type,T=(0,_.default)(y,{disabled:g}),w=(0,o.default)(T,2),A=w[0],C=w[1],O=(0,p.default)(),M=(0,o.default)(O,2),I=M[0],k=M[1],P=(0,h.default)(A,I);switch(b){case"primary":n="white";break;case"secondary":case"plain-white":case"simplified":n="highlight";break;default:n="default"}return g&&(n="default"),u.default.createElement("div",(0,a.default)({},C,{"data-a8n":l.default.key(r),className:(0,s.default)(c.default.button,(t={},(0,i.default)(t,c.default.primary,"primary"===b),(0,i.default)(t,c.default.secondary,"secondary"===b),(0,i.default)(t,c.default.plainWhite,"plain-white"===b),(0,i.default)(t,c.default.disabled,g),(0,i.default)(t,c.default.nowrap,E),(0,i.default)(t,c.default.simplified,"simplified"===b),(0,i.default)(t,c.default.warning,"warning"===b),(0,i.default)(t,c.default.strong,"strong"===b),(0,i.default)(t,c.default.strongPrimary,"strong-primary"===b),(0,i.default)(t,c.default.itemFocused,k),t),m),ref:P}),u.default.createElement(d.FlexRow,{align:"center",justify:"center"},u.default.createElement(d.FlexItem,{a8nText:l.default.key("content")},null!=v?v:null),S?u.default.createElement(d.FlexItem,{a8nText:l.default.key("spinner"),className:c.default.spinner},u.default.createElement(f.default,{color:n,size:16})):null))};t.default=v},76:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children,n=e.href,r=e.onClick,s=e.title,u=e.className;return i.default.createElement("a",{className:(0,a.default)(u,o.default.link),href:null!=n?n:void 0,onClick:function(e){null!=n&&(e.metaKey||e.altKey)||(e.preventDefault(),r(e))},role:"button",rel:"noreferrer noopener",target:"_blank",title:s},t)};var a=r(n(94184)),i=r(n(67294)),o=r(n(37892))},34541:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Cmd=t.APP_STATE_SYNC_COMPLETED=void 0;var i=a(n(81109)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(41143)),d=a(n(96486)),f=a(n(35340)),p=n(2277),h=a(n(34263)),_=a(n(61713)),v=a(n(28681)),m=a(n(22021)),g=n(89305);t.APP_STATE_SYNC_COMPLETED="app_state_sync_completed";var y=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).isMainLoaded=!1,e.uiBusy=0,e._clearUiBusy=d.default.debounce((function(){e.uiBusy&&(__LOG__(2)`cmd:clearUIBusy uibusy timeout`,e.uiBusy=0,e._triggerIdleEvent())}),1e3,{maxWait:5e3}),e._triggerIdleEvent=S((function(){(0,c.default)(0===e.uiBusy,`ui_idle triggered when uiBusy is ${e.uiBusy}`),0===e.uiBusy&&(e._clearUiBusy.cancel(),e.trigger("ui_idle"))})),e}return(0,s.default)(n,[{key:"mainLoaded",value:function(){this.isMainLoaded=!0,this.trigger("main_loaded")}},{key:"incrementProgress",value:function(){__LOG__(2)`Cmd: incrementProgress`,this.trigger("increment_progress")}},{key:"initialLoadReady",value:function(){__LOG__(2)`Cmd: initialLoadReady`,this.trigger("initial_load_ready")}},{key:"logSocketSummary",value:function(){this.trigger("log_socket_summary")}},{key:"muteAll",value:function(e,t){this.trigger("mute_all",e,t)}},{key:"muteChat",value:function(e,t){this.trigger("mute_chat",(0,g.unproxy)(e),t)}},{key:"muteChats",value:function(e,t,n){var r=e.map((function(e){return(0,g.unproxy)(e)}));this.trigger("mute_chats",r,t,n)}},{key:"deleteOrExitChat",value:function(e,t){this.trigger("delete_or_exit_chat",(0,g.unproxy)(e),t)}},{key:"clearChat",value:function(e,t){this.trigger("clear_chat",(0,g.unproxy)(e),t)}},{key:"archiveChat",value:function(e,t){this.trigger("archive_chat",(0,g.unproxy)(e),t)}},{key:"pinChat",value:function(e,t){this.trigger("pin_chat",(0,g.unproxy)(e),t)}},{key:"pinChats",value:function(e,t){var n=e.map((function(e){return(0,g.unproxy)(e)}));this.trigger("pin_chats",n,t)}},{key:"markChatUnread",value:function(e,t){this.trigger("mark_chat_unread",(0,g.unproxy)(e),t)}},{key:"msgInfoDrawer",value:function(e){this.trigger("msg_info_drawer",(0,g.unproxy)(e))}},{key:"chatSearch",value:function(e){this.trigger("chat_search",(0,g.unproxy)(e))}},{key:"chatInfoDrawer",value:function(e,t,n){this.trigger("chat_info_drawer",(0,g.unproxy)(e),t,n)}},{key:"attachMediaDrawer",value:function(e){var t=(0,i.default)((0,i.default)({},e),{},{chat:(0,g.unproxy)(e.chat)});this.trigger("attach_media_drawer",t)}},{key:"attachProduct",value:function(e){this.trigger("attach_product",e)}},{key:"verificationDrawer",value:function(e){this.trigger("verification_drawer",e)}},{key:"liveLocationDrawer",value:function(e,t){this.trigger("live_location_drawer",e,t)}},{key:"expiredLocationDrawer",value:function(e){this.trigger("expired_location_drawer",e)}},{key:"mediaViewerModal",value:function(e){var t=e.msg,n=e.getZoomNode,r=e.currentTime,a=e.highlightedMsgIds;this.trigger("media_viewer_modal",{msg:t,getZoomNode:n,currentTime:r,highlightedMsgIds:a})}},{key:"openMediaViewerForAlbumMedia",value:function(e){this.trigger("open_media_viewer_for_album_media",e)}},{key:"productImageViewerModal",value:function(e,t){this.trigger("product_image_viewer_modal",e,t)}},{key:"ephemeralDrawer",value:function(e){this.trigger("ephemeral_drawer",e)}},{key:"sendStarMsgs",value:function(e,t,n,r){this.trigger("send_star_msgs",(0,g.unproxy)(e),t,n,r)}},{key:"sendUnstarMsgs",value:function(e,t,n,r){this.trigger("send_unstar_msgs",(0,g.unproxy)(e),t,n,r)}},{key:"sendDeleteMsgs",value:function(e,t,n,r,a){this.trigger("send_delete_msgs",(0,g.unproxy)(e),t,n,r,a)}},{key:"sendRevokeMsgs",value:function(e,t,n,r,a){this.trigger("send_revoke_msgs",(0,g.unproxy)(e),t,n,r,a)}},{key:"_openChat",value:function(e,t){var n=this,a=(0,g.unproxy)(e);return new r((function(e){n.trigger("open_chat",a,t,e)})).addCancelControl().catch((function(e){throw __LOG__(2)`Unexpected openChat error: ${String(e)}`,e}))}},{key:"openChatAt",value:function(e,t){var n=this,a=(0,g.unproxy)(e);if(!t)return this.openChatBottom(a);this.setUiBusy(!0,"open_chat_at");var i=this._openChat(a,t).then((function(e){var t,a;if(e)if(e.wasVisible)t=function(){return n._scrollToFocusedMsg({pos:"offset",offset:e.offset})},a=function(){return n._scrollToFocusedMsg({pos:"center",animate:!0,duration:h.default.MSG_FOCUS_SCROLL_ANIMATION_DURATION,easing:[.7,0,.3,1]})};else switch(t=function(){return n._scrollToFocusedMsg({pos:e.alignAt})},e.alignAt){case"top":case"bottom":a=function(){return n._scrollToFocusedMsg({pos:"center",animate:!0,duration:h.default.MSG_FOCUS_SCROLL_ANIMATION_DURATION,easing:[.88,.64,.13,.99]})};break;case"center":default:a=function(){return r.resolve()}}else t=function(){return n._scrollToFocusedMsg({pos:"center"})},a=function(){return r.resolve()};return t().then(a)})).then((function(){n.flashFocusedMsg()})).then((function(){return!0})).catchType(r.CancellationError,(function(){return!1}));return i.finally((function(){n.setUiBusy(!1,"open_chat_at")})),i}},{key:"openChatFromUnread",value:function(e){var t,n=this,a=(0,g.unproxy)(e);if(a.unreadMsgAnchor&&(t={collection:a.unreadMsgAnchor.msgChunk,promise:r.resolve(),msg:a.unreadMsgAnchor,isUnreadDivider:a.shouldShowUnreadDivider}),t||a.unreadCount>0){this.setUiBusy(!0,"open_from_unread");var i=this._openChat(a,t).then((function(){return n._scrollToFocusedMsg({pos:"top",offset:-120})})).then((function(){return!0})).catchType(r.CancellationError,(function(){return!1}));return i.finally((function(){n.setUiBusy(!1,"open_from_unread")})),i}return this.openChatBottom(a)}},{key:"openChatBottom",value:function(e){var t,n=this,a=(0,g.unproxy)(e);this.setUiBusy(!0,"open_bottom"),a.msgs.length>0&&(t={collection:a.msgs,msg:a.msgs.last(),isUnreadDivider:!1});var i=this._openChat(a,t).then((function(){return n._scrollChatToBottom()})).then((function(){return!0})).catchType(r.CancellationError,(function(){return!1}));return i.finally((function(){n.setUiBusy(!1,"open_bottom")})),i}},{key:"scrollToPtt",value:function(e){var t=this,n=(0,g.unproxy)(e.chat),a={collection:e.chat.msgs,msg:e,key:e.id,highlightMsg:!1};this.setUiBusy(!0,"open_chat_at");var i=this._openChat(n,a).then((function(){return t._scrollToFocusedMsg({pos:"center",animate:!0,duration:h.default.MSG_FOCUS_SCROLL_ANIMATION_DURATION,easing:[.7,0,.3,1]})})).then((function(){return!0})).catchType(r.CancellationError,(function(){return!1}));return i.finally((function(){t.setUiBusy(!1,"open_chat_at")})),i}},{key:"_scrollToFocusedMsg",value:function(e){var t=this;return new r((function(n){t.trigger("scroll_to_focused_msg",n,e)})).catch((function(e){__LOG__(3)`Unexpected scrollToFocusedMsg error: ${String(e)}`}))}},{key:"_scrollChatToBottom",value:function(){var e=this;return new r((function(t){e.trigger("scroll_chat_to_bottom",t)})).catch((function(e){__LOG__(3)`Unexpected scrollChatToBottom error: ${String(e)}`}))}},{key:"flashFocusedMsg",value:function(){var e=this;setTimeout((function(){e.trigger("flash_focused_msg")}),0)}},{key:"updateChatlistSelection",value:function(e){var t=(0,g.unproxy)(e);this.trigger("update_chatlist_selection",t)}},{key:"closeChat",value:function(e){var t=(0,g.unproxy)(e);this.trigger("close_chat",t)}},{key:"focusChatTextInput",value:function(e){var t=(0,g.unproxy)(e);t?this.trigger("focus_chat_text_input_"+t.id.toString()):this.trigger("focus_chat_text_input")}},{key:"setChatCtwaContextLinkData",value:function(e,t){this.trigger("chat_set_ctwa_context_link_data_"+e.id.toString(),t)}},{key:"focusShowMsg",value:function(e){this.trigger("focus_show_msg",e)}},{key:"enterChatTextInput",value:function(e){var t=(0,g.unproxy)(e);this.trigger("enter_chat_text_input_"+t.id.toString())}},{key:"focusNextChat",value:function(e){this.trigger("focus_next_chat",e)}},{key:"focusPrevChat",value:function(e){this.trigger("focus_prev_chat",e)}},{key:"focusChatList",value:function(){this.trigger("focus_chat_list")}},{key:"focusChatSearch",value:function(){this.trigger("focus_chat_search")}},{key:"pasteChatTextInput",value:function(e,t){var n=(0,g.unproxy)(e);this.trigger("paste_chat_text_input_"+n.id.toString(),t)}},{key:"startGroupCall",value:function(e,t){var n=(0,g.unproxy)(e);this.trigger("voip_start_group_call",n,t)}},{key:"closeStatusViewer",value:function(){this.trigger("close_status_viewer")}},{key:"sendPasteToCompose",value:function(e,t){var n=(0,g.unproxy)(e);this.trigger("send_paste_to_compose_"+n.id.toString(),t)}},{key:"login",value:function(e){this.trigger("login",e)}},{key:"logout",value:function(){var e=m.default.supportsFeature(m.default.F.MD_BACKEND);m.default.resetFeatures(),m.default.setFeature(m.default.F.MD_BACKEND,e),m.default.setFeature(m.default.F.MD_ADV,e),m.default.setFeature(m.default.F.MD_VOIP_GROUP,e&&!1),this.trigger("logout")}},{key:"openContextMenu",value:function(e,t){this.trigger("open_context_menu",e,t)}},{key:"closeContextMenu",value:function(e){this.trigger("close_context_menu",e)}},{key:"openTooltip",value:function(e,t){this.trigger("open_tooltip",e,t)}},{key:"closeTooltip",value:function(e){this.trigger("close_tooltip",e)}},{key:"openToast",value:function(e){this.trigger("open_toast",e)}},{key:"closeToast",value:function(e){this.trigger("close_toast",e)}},{key:"alertNewMsg",value:function(e){this.trigger("alert_new_msg",e)}},{key:"newMediaMsg",value:function(e){this.trigger("new_media_msg",e)}},{key:"alertCall",value:function(e,t,n,r,a){this.trigger("alert_call",e,t,n,r,a)}},{key:"cancelCall",value:function(e){this.trigger("cancel_call",e)}},{key:"windowError",value:function(){}},{key:"cannotReachPhone",value:function(){}},{key:"sentPing",value:function(){}},{key:"openModal",value:function(e,t){this.trigger("open_modal",e,t)}},{key:"closeModal",value:function(e){this.trigger("close_modal",e)}},{key:"openModalMedia",value:function(e,t){this.trigger("open_media",e,t)}},{key:"closeModalMedia",value:function(){this.trigger("close_media")}},{key:"setDrawerContext",value:function(e,t){this.trigger(`update_context_${e}`,t)}},{key:"openDrawerRight",value:function(e,t,n,r){this.trigger("open_drawer_right",e,t,n,void 0,r)}},{key:"openDrawerMid",value:function(e,t,n,r,a){this.trigger("open_drawer_mid",e,t,n,r,a)}},{key:"openDrawerLeft",value:function(e,t,n,r){this.trigger("open_drawer_left",e,t,n,void 0,r)}},{key:"existsDrawerRight",value:function(e){this.trigger("exists_drawer_right",e)}},{key:"existsDrawerMid",value:function(e){this.trigger("exists_drawer_mid",e)}},{key:"existsDrawerLeft",value:function(e){this.trigger("exists_drawer_left",e)}},{key:"closeDrawerRight",value:function(){this.trigger("close_drawer_right")}},{key:"closeDrawerMid",value:function(){this.trigger("close_drawer_mid")}},{key:"closeDrawerLeft",value:function(){this.trigger("close_drawer_left")}},{key:"onPanesWillChange",value:function(e){this.trigger("panes_will_change",e)}},{key:"onPanesDidChange",value:function(e){this.trigger("panes_did_change",e)}},{key:"openGroupInviteModal",value:function(e){this.trigger("open_group_invite_modal",e)}},{key:"openGroupV4InviteRequestFlow",value:function(e,t,n,r){this.trigger("open_group_v4_invite_request_flow",e,t,n,r)}},{key:"mediaPlaying",value:function(e){this.trigger("mediaPlaying",e)}},{key:"pttRecording",value:function(){this.trigger("pttRecording")}},{key:"pttPlaying",value:function(e){this.trigger("pttPlaying",e)}},{key:"uiResize",value:function(){this.trigger("resize")}},{key:"setUiBusy",value:function(e){var t=this.uiBusy||0;e?(++t,this._clearUiBusy(),this._triggerIdleEvent.cancel()):t&&--t,this.uiBusy=t,0===t&&(this._clearUiBusy.cancel(),this._triggerIdleEvent())}},{key:"windowMouseDown",value:function(e){this.trigger("window_mousedown",e)}},{key:"windowClick",value:function(e){this.trigger("window_click",e)}},{key:"midnight",value:function(){this.trigger("midnight")}},{key:"textsizeChange",value:function(e){this.trigger("textsize_change",e)}},{key:"scrollMessages",value:function(){this.trigger("scroll_messages")}},{key:"getConversationHeaderOffset",value:function(e){this.trigger("get_conversation_header_offset",e)}},{key:"floaterEscapeOverlap",value:function(e,t){this.trigger("floater_escape_overlap",e,t)}},{key:"autoplayPTT",value:function(e){this.trigger("sequential_playback_ptt",e)}},{key:"refreshMessages",value:function(){this.trigger("refresh_messages")}},{key:"serverPropsUpdated",value:function(){this.trigger("server_props_updated")}},{key:"storageInitializationError",value:function(){this.trigger("storage_initialization_error")}},{key:"restartBackend",value:function(){this.trigger("md_restart_backend")}},{key:"downgradeWebclient",value:function(){this.trigger("md_downgrade_webclient")}},{key:"upgradeToMDInternal",value:function(){this.trigger("upgrade_to_md")}},{key:"upgradeToMDProd",value:function(){this.trigger("upgrade_to_md_prod")}},{key:"refreshQR",value:function(){this.trigger("md_refresh_qr")}},{key:"setSocketState",value:function(e){this.trigger("set_socket_state",e)}},{key:"socketStreamDisconnected",value:function(){this.trigger("socket_stream_disconnected")}},{key:"openSocketStream",value:function(){this.trigger("open_socket_stream")}},{key:"readyForMainStreamMode",value:function(){this.trigger("main_stream_mode_ready")}},{key:"onInitialChatHistorySynced",value:function(){this.trigger("on_initial_chat_synced")}},{key:"onRecentChatHistorySynced",value:function(){this.trigger("on_recent_chat_history_synced")}},{key:"onFullChatHistorySynced",value:function(){this.trigger("on_full_chat_history_synced")}},{key:"onHistorySyncChunkProcessed",value:function(e){this.trigger("new_history_sync_chunk_processed",e)}},{key:"onOfflineProgressUpdate",value:function(){this.trigger("offline_progress_update")}},{key:"criticalSyncDone",value:function(){this.trigger("on_critical_sync_done")}},{key:"onTemporaryBan",value:function(e){this.trigger("account_temporarily_banned",e)}},{key:"onStartingLogout",value:function(){this.trigger("starting_logout")}},{key:"handleFatalError",value:function(){this.trigger("handle_fatal_error")}}]),n}(v.default);t.Cmd=y;var E=new y;function S(e){var t,n=function(){if(!t){var n=(t=new f.default).signal;(0,_.default)({signal:n}).then((function(){n.aborted||(t=null,e())}),(function(e){if(e.name!==p.ABORT_ERROR)throw e}))}};return n.cancel=function(){t&&(t.abort(),t=null)},n}t.default=E},36268:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ContextMenuManager=t.Type=void 0;var i=a(n(81109)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=r(n(67294)),d=a(n(34541)),f=r(n(75300)),p=a(n(68390)),h=a(n(15848)),_=a(n(3609)),v=a(n(38512)),m={MENU:"MENU",TOOLTIP:"TOOLTIP"};t.Type=m;var g={originX:0,originY:0,offsetX:0,offsetY:0,dirX:f.DirX.RIGHT,dirY:f.DirY.BOTTOM,type:f.MenuType.dropdown},y=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={},e._setRefMenuContainer=function(t){e._refMenuContainer=t},e._setRefDropdown=function(t){e._refDropdown=t},e.onClose=function(t){(!t||e.state.menu&&e.state.menu.uim===t)&&e.setState({menu:void 0})},e._onOpen=function(t,n){var r=e.state.menu;r&&r.uim&&r.uim.pop(),r=(0,i.default)((0,i.default)((0,i.default)({},g),t),{},{key:Math.random(),isTemporaryRender:!0}),t.event&&(r=(0,i.default)((0,i.default)({},r),{},{originX:t.event.clientX,originY:t.event.clientY,offsetX:null!=t.offsetX?t.offsetX:10,offsetY:null!=t.offsetY?t.offsetY:10}),t.event.stopPropagation()),e.setState({menu:r},(function(){var t;n(null===(t=e._refMenuContainer)||void 0===t?void 0:t.getElement()),e._setDirection()}))},e.isOpen=function(){return null!=e.state.menu},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.type===m.MENU?"open_context_menu":"open_tooltip";this.props.listeners.add(d.default,e,this._onOpen);var t=this.props.type===m.MENU?"close_context_menu":"close_tooltip";this.props.listeners.add(d.default,t,this.onClose)}},{key:"_setDirection",value:function(){if(this._refDropdown){var e=this._refDropdown.clientWidth,t=this._refDropdown.clientHeight+10,n=window.innerWidth,r=window.innerHeight;if(this.state.menu){var a=this.state.menu,o=a.anchor,s=a.originX,u=a.originY,l=a.offsetX,c=a.offsetY,d=a.dirX,p=a.dirY,h=s,_=s,v=u,m=u;if(o&&o instanceof HTMLElement){var g=o.getBoundingClientRect();h=g.left,_=g.right,m=g.bottom,v=g.top}var y=d;y===f.DirX.RIGHT&&h+e>n&&_-e>0?y=f.DirX.LEFT:y===f.DirX.LEFT&&_-e<0&&h+e<n&&(y=f.DirX.RIGHT);var E=p;E===f.DirY.BOTTOM&&m+t+c>r&&v-t>0?E=f.DirY.TOP:E===f.DirY.TOP&&v-t<0&&m+t+c<r&&(E=f.DirY.BOTTOM);var S,b=y===f.DirX.RIGHT?h:_;S=E===f.DirY.TOP?v:m;var T=l,w=c;o||(y===f.DirX.LEFT&&(T=0),E===f.DirY.TOP&&(w=0)),this.setState({menu:(0,i.default)((0,i.default)({},this.state.menu),{},{dirX:y,dirY:E,originX:b,originY:S,offsetX:T,offsetY:w,isTemporaryRender:!1})})}}}},{key:"render",value:function(){var e,t=this,n="dropdown";if(this.state.menu){var r=this.state.menu,a=r.menu,i=r.key,o=r.originX,s=r.originY,u=r.offsetX,l=r.offsetY,d=r.dirX,p=r.dirY,m=r.type,g=r.autoFocus,y=r.findFirstItem,E=r.horizontal,S=r.isTemporaryRender,b=r.theme,T=Array.isArray(a)?a.map((function(e){return(0,c.cloneElement)(e,{theme:b})})):a;e=c.default.createElement(f.default,{origin:{x:o+u,y:s+l},onRef:this._setRefDropdown,type:m,key:"key-"+i,dirX:d,dirY:p,horizontal:E,autoFocus:g,findFirstItem:y,isTemporaryRender:S},c.default.createElement(h.default,{ref:this._setRefMenuContainer},T)),n="picker"===m?"dropdown-picker":"dropdown"}return c.default.createElement(_.default.Consumer,null,(function(r){return c.default.createElement(_.default.Provider,{value:t.state.menu&&t.state.menu.uim||r},c.default.createElement(v.default,{transitionName:n},e))}))}}]),n}(c.Component);t.ContextMenuManager=y,y.displayName="ContextMenuManager";var E=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"isOpen",value:function(){return this.getComponent().isOpen()}}]),n}((0,p.default)(y));t.default=E},74362:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.APP_TEXT_MIMETYPE=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(96486)),s=n(76705),u=r(n(88963)),l=r(n(70915)),c=r(n(6774)),d=r(n(21304)),f=n(36474);t.APP_TEXT_MIMETYPE="application/whatsapp";var p=function(){function e(t){(0,a.default)(this,e),this._value=t||""}return(0,i.default)(e,[{key:"append",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._value=[this.toString(),e].filter((function(e){return e})).join(t),this}},{key:"prepend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._value=[e,this.toString()].filter((function(e){return e})).join(t),this}},{key:"toString",value:function(){return this._value}}]),e}(),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;(0,a.default)(this,e),this._innerAppText=new p(t),this._appTextTemplate=n}return(0,i.default)(e,null,[{key:"fromEl",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.isCopyable)(t),r=n?(0,s.getAppTextTemplateData)(t):null;return new e("",r)}},{key:"getTemplate",value:function(t){var n=t;if(!n)return null;if(!(n instanceof HTMLElement)){if(!n.parentElement)return null;n=n.parentElement}for(var r=new e("${appText}"),a=n,i=5,o=0,u=!1;a&&o<i;)a instanceof HTMLElement&&(0,s.isCopyable)(a)?(r=e.fromEl(a,!0).append(r.toString()),u=u||!r.isPlainText(),i=5):o++,a=a.parentElement;return u?r.toString():null}}]),(0,i.default)(e,[{key:"append",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._innerAppText.append(e,t),this}},{key:"prepend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._innerAppText.prepend(e,t),this}},{key:"isPlainText",value:function(){return Boolean(!this._appTextTemplate&&""!==this._appTextTemplate)}},{key:"toString",value:function(){return this._appTextTemplate||""===this._appTextTemplate?this._appTextTemplate.replace(/\$\{appText\}/g,this._innerAppText.toString()):this._innerAppText.toString()}}]),e}(),_=function(){function e(t,n){(0,a.default)(this,e);var r=t||"";this._plainText=new p(r),n&&(this._appText=new h(r,n))}return(0,i.default)(e,[{key:"append",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.hasAppText()?(this._appText=this._appText||new h(this.toPlainString()),this._appText.append(e.toAppString(),t)):this.hasAppText()&&this._appText.append(e.toAppString(),t),this._plainText.append(e.toPlainString(),t),this}},{key:"appendPlainText",value:function(t){return this.append(new e(t)),this}},{key:"prepend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.hasAppText()?(this._appText=this._appText||new h(this.toPlainString()),this._appText.prepend(e.toAppString(),t)):this.hasAppText()&&this._appText.prepend(e.toAppString(),t),this._plainText.prepend(e.toPlainString(),t),this}},{key:"hasAppText",value:function(){return Boolean(this._appText)}},{key:"toAppText",value:function(){return this.hasAppText()?this._appText:new h(this.toPlainString())}},{key:"toPlainString",value:function(){return this._plainText.toString()}},{key:"toAppString",value:function(){return this.hasAppText()?this._appText.toString():this.toPlainString()}}],[{key:"_copyableChildrenToClipboard",value:function(t){var n=this,r=(0,s.findCopyableChildren)(t);return o.default.reduceRight(r,(function(e,t){return e.prepend(n.fromEl(t),"\n")}),new e)}},{key:"_pruneRangeNodes",value:function(e,t,n){for(var r=t.cloneContents().childNodes,a=(0,l.default)(t),i=[],o=[],s=0;s<r.length;s++){var u=r[s],c=a[s]&&a[s].parentElement;(n||(0,f.isSelectable)(a[s])||(0,f.hasSelectableChildren)(u))&&(e.contains(a[s])||c&&c.contains(e))&&(i.push(u),o.push(a[s]))}a=o;var d=n;if(1===(r=i).length){var p=r[0];(d=d||(0,f.isSelectable)(a[0]))||(r=(0,f.findSelectableChildren)(p,d),d=!1)}return{rangeNodes:r,parentIsSelectable:d}}},{key:"fromCopyableEl",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,s.getPrePlainTextData)(t)||"",i=new e(a),u=(0,s.getPlainTextData)(t),l=(0,s.getAppTextTemplateData)(t),d=new e("",l);return u||""===u?(d.appendPlainText(u),i.append(d)):r||(0,f.isSelectable)(t)?(o.default.reduceRight(t.childNodes,(function(e,t){var r=(0,c.default)(t,"div")?"\n":"";return e.prepend(n.fromSelectableNode(t),r)}),d),i.append(d)):(d.append(this._copyableChildrenToClipboard(t)),i.append(d))}},{key:"fromEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,s.isCopyable)(e)||t?this.fromCopyableEl(e,t):this._copyableChildrenToClipboard(e)}},{key:"fromNode",value:function(t,n){return t instanceof HTMLElement?this.fromEl(t,n):n?this.fromSelectableNode(t):new e}},{key:"fromRange",value:function(t,n){var r=this,a=n.commonAncestorContainer,i=new e("",h.getTemplate(a)),s=(0,f.isSelectAll)(a)?a:(0,f.findSelectAllParent)(a);if(s instanceof HTMLElement)return i.append(this.fromCopyableEl(s));var u=this._pruneRangeNodes(t,n,(0,f.isSelectable)(a)),l=u.parentIsSelectable,c=u.rangeNodes;return o.default.reduceRight(c,(function(e,t){var n=l?"":"\n",a=r.fromNode(t,l);return e.prepend(a,n)}),i)}},{key:"fromSelectableNode",value:function(t){var n=this;if((0,d.default)(t))return new e(t.textContent);if(!(t instanceof HTMLElement))return new e;var r=new e;return(0,u.default)(t,(function(e){return(0,d.default)(e)||(0,s.isCopyable)(e)?[]:Array.from(e.childNodes)}),(function(e){var t;(0,s.isCopyable)(e)&&e instanceof HTMLElement?(t=n.fromCopyableEl(e,!0),r.append(t)):(0,d.default)(e)&&r.appendPlainText(e.textContent)})),r}},{key:"fromSelection",value:function(t,n){var r=this,a=new e;return o.default.range(n.rangeCount).map((function(e){var a=n.getRangeAt(e);return r.fromRange(t,a)})).reduce((function(e,t){return e.append(t,"\n")}),a)}}]),e}();t.default=_},76705:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isCopyable=function(e){return e instanceof HTMLElement&&(0,d.default)(e,h)},t.getPrePlainTextData=function(e){return e.dataset[g]},t.getPlainTextData=function(e){return e.dataset[v]},t.getAppTextTemplateData=function(e){return e.dataset[E]},t.findCopyableChildren=function(e){var t=Array.from(e.querySelectorAll(h));return t.filter((function(e){return!t.some((function(t){return t!==e&&t.contains(e)}))}))},t.CopyableCode=function(e){return l.default.createElement("code",T(e))},t.CopyableDel=function(e){return l.default.createElement("del",T(e))},t.CopyableDiv=function(e){return l.default.createElement("div",T(e))},t.CopyableEm=function(e){return l.default.createElement("em",T(e))},t.CopyableLink=function(e){var t=T(e),n=t.href;if(n&&!f.default.hasValidUrlScheme(n))return l.default.createElement("span",null);return l.default.createElement("a",t)},t.CopyableSpan=function(e){return l.default.createElement("span",T(e))},t.CopyableStrong=function(e){return l.default.createElement("strong",T(e))},t.CopyableUl=function(e){return l.default.createElement("ul",T(e))},t.default=t.CopyableImg=t.PLAIN_TEXT_DATA_ATTR=t.COPYABLE_CSS_SELECTOR=t.COPYABLE_CSS_CLASS=void 0;var i=a(n(81109)),o=a(n(67154)),s=a(n(6479)),u=a(n(94184)),l=r(n(67294)),c=a(n(66655)),d=a(n(74221)),f=a(n(69267)),p="copyable-text";t.COPYABLE_CSS_CLASS=p;var h=".copyable-text";t.COPYABLE_CSS_SELECTOR=h;var _="data-plain-text",v=(0,c.default)(_);t.PLAIN_TEXT_DATA_ATTR=v;var m="data-pre-plain-text",g=(0,c.default)(m),y="data-app-text-template",E=(0,c.default)(y);var S=(0,l.forwardRef)((function(e,t){var n,r=e.forwardedRef,a=T((0,s.default)(e,["forwardedRef"]));return l.default.createElement("img",(0,o.default)({ref:null!=r?r:t},a,{alt:null!==(n=a.alt)&&void 0!==n?n:""}))}));t.CopyableImg=S;var b=(0,l.forwardRef)((function(e,t){var n=e.element,r=(0,s.default)(e,["element"]);return l.default.createElement(n,(0,o.default)({},T(r),{ref:t}))}));function T(e){var t=e.plainText,n=e.prePlainText,r=e.appTextTemplate,a=(0,s.default)(e,["plainText","prePlainText","appTextTemplate"]),o=(0,i.default)({},a);return o.className=(0,u.default)(a.className,p),null!=t&&(o[_]=t),null!=n&&(o[m]=n),null!=r&&(o[y]=r),o}t.default=b},25428:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67154)),o=a(n(81109)),s=a(n(6479)),u=a(n(94184)),l=r(n(67294)),c=r(n(74362)),d=a(n(97922)),f=(0,l.forwardRef)((function(e,t){var n=e.canCut,r=e.children,a=e.className,c=(0,s.default)(e,["canCut","children","className"]),f=(0,o.default)((0,o.default)({},c),{},{className:(0,u.default)(a,d.default.noop,"copyable-area"),onCopy:h,onCut:n?_:void 0});return l.default.createElement("div",(0,i.default)({},f,{ref:t}),r)}));function p(e){var t=e.currentTarget;if(!(t instanceof HTMLElement))return!1;var n=c.default.fromSelection(t,window.getSelection());e.clipboardData.setData("text/plain",n.toPlainString());try{e.clipboardData.setData(c.APP_TEXT_MIMETYPE,n.toAppString())}catch(e){}return!0}function h(e){p(e,window.getSelection())&&(e.stopPropagation(),e.preventDefault())}function _(e){var t=window.getSelection();p(e)&&(t.deleteFromDocument(),e.stopPropagation(),e.preventDefault(),e.target.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))}t.default=f},36474:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectableElement=function(e,t){var n=document.createElement(e);n.setAttribute("class",_),(t||""===t)&&(n.dataset[c.PLAIN_TEXT_DATA_ATTR]=t);return n},t.isSelectable=E,t.isSelectAll=S,t.findSelectableChildren=function(e,t){if(!(e instanceof HTMLElement))return[];if(t||E(e))return Array.from(e.childNodes);var n=Array.from(e.querySelectorAll(v));return n.filter((function(e){return!n.some((function(t){return t!==e&&t.contains(e)}))}))},t.hasSelectableChildren=function(e){if(!(e instanceof HTMLElement))return!1;return!!e.querySelector(v)},t.findSelectAllParent=function(e){if(!b(e))return null;var t,n=e,r=0;for(;n&&r<5;){if(S(n)&&n instanceof HTMLElement){t=n;break}n=n.parentElement,r++}return t},t.SelectableCode=function(e){var t=A(e);return e.selectable?l.default.createElement(c.CopyableCode,t):l.default.createElement("code",t)},t.SelectableDel=function(e){var t=A(e);return e.selectable?l.default.createElement(c.CopyableDel,t):l.default.createElement("del",t)},t.SelectableDiv=function(e){var t=A(e);return e.selectable?l.default.createElement(c.CopyableDiv,t):l.default.createElement("div",t)},t.SelectableEm=function(e){var t=A(e);return e.selectable?l.default.createElement(c.CopyableEm,t):l.default.createElement("em",t)},t.SelectableLink=function(e){var t=A(e),n=e.href;if(n&&!p.default.hasValidUrlScheme(n))return l.default.createElement("span",null);return e.selectable?l.default.createElement(c.CopyableLink,t):l.default.createElement("a",t)},t.SelectableSpan=function(e){var t=A(e);return e.selectable?l.default.createElement(c.CopyableSpan,t):l.default.createElement("span",t)},t.SelectableStrong=function(e){var t=A(e);return e.selectable?l.default.createElement(c.CopyableStrong,t):l.default.createElement("strong",t)},t.SelectableUl=function(e){var t=A(e);return e.selectable?l.default.createElement(c.CopyableUl,t):l.default.createElement("ul",t)},t.default=t.SelectableImg=t.SELECTABLE_INPUT_CSS_CLASS=t.SELECTABLE_CSS_SELECTOR=t.SELECTABLE_CSS_CLASS=void 0;var i=a(n(59713)),o=a(n(67154)),s=a(n(6479)),u=a(n(94184)),l=r(n(67294)),c=r(n(76705)),d=a(n(74221)),f=a(n(8581)),p=a(n(69267)),h="selectable-text";t.SELECTABLE_CSS_CLASS=h;var _=`${c.COPYABLE_CSS_CLASS} selectable-text`,v=".selectable-text";t.SELECTABLE_CSS_SELECTOR=v;var m=_;t.SELECTABLE_INPUT_CSS_CLASS=m;var g="select-all",y=".select-all";function E(e){return!!e&&(e instanceof HTMLElement?(0,d.default)(e,v)||(0,d.default)(e,".selectable-text *"):E(e.parentElement))}function S(e){return!!e&&(e instanceof HTMLElement?(0,d.default)(e,y):S(e.parentElement))}function b(e){return!!e&&(e instanceof HTMLElement?(0,d.default)(e,".select-all *"):b(e.parentElement))}var T=(0,l.forwardRef)((function(e,t){e.forwardedRef;var n,r=(0,s.default)(e,["forwardedRef"]),a=A(r);return r.selectable?l.default.createElement(c.CopyableImg,(0,o.default)({forwardedRef:t},a)):l.default.createElement("img",(0,o.default)({ref:t},a,{alt:null!==(n=r.alt)&&void 0!==n?n:""}))}));t.SelectableImg=T;var w=(0,l.forwardRef)((function(e,t){var n=e.element,r=(0,s.default)(e,["element"]),a=A(r);return r.selectable?l.default.createElement(c.default,(0,o.default)({element:n},a,{ref:t})):l.default.createElement(n,(0,o.default)({},a,{ref:t}))}));function A(e){var t,n=e.className,r=e.plainText,a=e.prePlainText,o=e.appTextTemplate,l=e.selectable,c=e.selectAll,d=(0,s.default)(e,["className","plainText","prePlainText","appTextTemplate","selectable","selectAll"]);return l&&(d.plainText=r,d.prePlainText=a,d.appTextTemplate=o),d.className=(0,u.default)(n,f.default.noop,(t={},(0,i.default)(t,h,l),(0,i.default)(t,g,l&&c),t)),d}t.default=w},75300:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DirY=t.DirX=t.MenuType=t.EMOJI_PICKER_WIDTH=void 0;var i=a(n(59713)),o=a(n(319)),s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=a(n(94184)),f=a(n(91080)),p=a(n(96486)),h=r(n(67294)),_=a(n(34541)),v=a(n(85722)),m=a(n(23257)),g=a(n(80413)),y=a(n(31722)),E=a(n(17957)),S=a(n(76568)),b=a(n(89115)),T=parseInt(m.default["-emoji-picker-width"].replace(/px$/,""),10);t.EMOJI_PICKER_WIDTH=T;t.MenuType={dropdown:"dropdown",dropdown_menu:"dropdown_menu",dropdown_text:"dropdown_text",menu:"menu",picker:"picker",emoji_picker:"emoji_picker",sticker_picker:"sticker_picker",color_picker:"color_picker",tooltip:"tooltip"};var w={RIGHT:"RIGHT",LEFT:"LEFT"};t.DirX=w;var A={TOP:"TOP",BOTTOM:"BOTTOM"};t.DirY=A;var C=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={showShortcuts:!1,keyboard:!1,selected:null},e._setRefDropdown=function(t){e._refDropdown=t,e.props.onRef&&e.props.onRef(t)},e._setRefList=function(t){e._refList=t},e._floaterEscapeOverlap=function(){e._refList&&e._refDropdown&&!e.props.isTemporaryRender&&_.default.floaterEscapeOverlap(e._refDropdown,10)},e.onMouseMove=function(){y.default.focus(e._refDropdown),e.setState({keyboard:!1})},e._selectPrevious=function(t){O(t);var n=e._getActiveChildren(),r=n.activeChildren,a=n.currentlyFocusedIndex;0!==r.length&&e._focusNewActiveChild(r,a-1)},e.selectNext=function(t){O(t);var n=e._getActiveChildren(),r=n.activeChildren,a=n.currentlyFocusedIndex;0!==r.length&&e._focusNewActiveChild(r,a+1)},e._getActiveChildren=function(){var t=(0,o.default)((0,f.default)(e._refList,"_this._refList").querySelectorAll("li:not(.dropdown-item-disabled)"));return{activeChildren:t,currentlyFocusedIndex:t.indexOf(e.state.selected)}},e._focusNewActiveChild=function(t,n){var r=(n<0?t.length-1:n)%t.length;y.default.focus(t[r]),e.setState({keyboard:!0,selected:t[r]})},e.close=function(t){t.preventDefault();var n=e.props.uim;n&&n.uie.requestDismiss()},e.default=function(t){var n=e.props.onDefault;if(n){g.default.shouldIndicateFocus();var r=e.props.uim;r&&r.uie.requestDismiss(),n(t)}},e._resetSelected=function(t){t.stopPropagation(),y.default.focus(e._refDropdown),e.setState({selected:void 0})},e}return(0,u.default)(n,[{key:"getElement",value:function(){return this._refDropdown}},{key:"_allowKeyboard",value:function(){var e=this.props.type;return"emoji_picker"!==e&&"sticker_picker"!==e&&"color_picker"!==e&&"dropdown_text"!==e}},{key:"componentDidMount",value:function(){if(this._floaterEscapeOverlap(),this._allowKeyboard()){var e=this.props,t=e.autoFocus,n=e.children,r=e.findFirstItem;if(t){var a,i,o=null===(a=this._refList)||void 0===a?void 0:a.querySelector("[tabindex]");r&&o||this._refList&&this._refList.firstChild instanceof HTMLDivElement&&o?i=o:this._refList&&this._refList.children.length>0?i=this._refList.children[0]:null!=n&&(i=h.Children.toArray(n)[0]),y.default.focus(i),this.setState({keyboard:!0,selected:i})}else y.default.focus(this._refDropdown)}}},{key:"componentDidUpdate",value:function(e){e.isTemporaryRender&&!this.props.isTemporaryRender&&this._floaterEscapeOverlap()}},{key:"getStyle",value:function(){var e=this.props,t={},n=e.flipOnRTL&&b.default.isRTL()?e.dirX===w.LEFT?w.RIGHT:w.LEFT:e.dirX,r=e.dirY,a=n===w.RIGHT?w.LEFT:w.RIGHT,i=r===A.TOP?A.BOTTOM:A.TOP;if(t[v.default.prefix("transformOrigin")]=i+" "+a,!e.origin)return p.default.merge(t,e.style);if(n===w.RIGHT?t.left=e.origin.x:t.right=window.innerWidth-e.origin.x,r===A.BOTTOM){var o;t.top=e.origin.y;var s=null===(o=this._refDropdown)||void 0===o?void 0:o.offsetHeight;if(null!=s){var u=window.innerHeight-s-32;t.top=Math.min(u,(0,f.default)(e.origin,"p.origin").y)}}else t.bottom=window.innerHeight-e.origin.y;return p.default.merge(t,e.style)}},{key:"render",value:function(){var e,t=this.props,n=t.type,r=(0,d.default)((e={},(0,i.default)(e,m.default.container,"dropdown"===n||"dropdown_menu"===n||"emoji_picker"===n||"sticker_picker"===n||"color_picker"===n||"dropdown_text"===n),(0,i.default)(e,m.default.right,"dropdown_menu"===n),(0,i.default)(e,m.default.icons,"menu"===n),(0,i.default)(e,m.default.picker,"picker"===n),(0,i.default)(e,m.default.emoji,"emoji_picker"===n),(0,i.default)(e,m.default.sticker,"sticker_picker"===n),(0,i.default)(e,m.default.colorPicker,"color_picker"===n),(0,i.default)(e,m.default.text,"dropdown_text"===n),(0,i.default)(e,m.default.tooltip,"tooltip"===n),(0,i.default)(e,m.default.inverse,("picker"===n||"emoji_picker"===n||"sticker_picker"===n||"color_picker"===n||"dropdown_text"===n||"tooltip"===n)&&t.dirX===w.LEFT),(0,i.default)(e,m.default.inverseVertical,("emoji_picker"===n||"sticker_picker"===n||"color_picker"===n||"dropdown_text"===n)&&t.dirY===A.TOP),e)),a="picker"===n||"emoji_picker"===n||"sticker_picker"===n||"dropdown_text"===n||"tooltip"===n?h.default.createElement("div",{className:m.default.nib,"data-animate-dropdown-nib":!0}):null;if(this._allowKeyboard()){var o={enter:this.default,tab:O,"shift+tab":O,up:function(){},down:function(){}};return t.horizontal?(o[b.default.LR("left","right")]=this._selectPrevious,o[b.default.LR("right","left")]=this.selectNext,o[b.default.LR("up","down")]=this._selectPrevious,o[b.default.LR("down","up")]=this.selectNext):(o.up=this._selectPrevious,o.down=this.selectNext,o[b.default.LR("left","right")]=this.close,o[b.default.LR("right","left")]=this.default),h.default.createElement(S.default,{onRef:this._setRefDropdown,handlers:o,className:r,style:this.getStyle(),onMouseMove:this.state.keyboard?this.onMouseMove:null,onMouseUp:this._resetSelected},h.default.createElement("ul",{ref:this._setRefList,className:m.default.items},t.children),a)}return h.default.createElement("div",{ref:this._setRefDropdown,className:r,style:this.getStyle()},t.children,a)}}]),n}(h.Component);function O(e){e.stopPropagation(),e.preventDefault()}C.defaultProps={type:"dropdown",dirX:w.RIGHT,dirY:A.BOTTOM},C.displayName="Dropdown";var M=(0,E.default)(C);t.default=M},33079:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var i=a(n(67154)),o=a(n(59713)),s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=a(n(94184)),f=r(n(67294)),p=a(n(97930)),h=a(n(19328)),_=a(n(17957)),v=a(n(76568)),m=a(n(27259)),g=n(88828),y=(0,m.default)({COMPACT:null,MUTED:null});t.ThemeOptions=y;var E=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,focus:!1},e.onMouseEnter=function(){e.setState({hover:!0})},e.onMouseLeave=function(){e.setState({hover:!1})},e.onFocus=function(){e.setState({focus:!0})},e.onBlur=function(){e.setState({focus:!1})},e.onClick=function(t){e.onAction(t)},e.onKeyboardActivation=function(t){t.repeat||e.onAction(t)},e.onAction=function(t){var n=e.props.action;if(n&&!(!1===n(t))){var r=e.props.uim;r&&r.uie.requestDismiss()}},e}return(0,u.default)(n,[{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.tooltip,a=t.type,s=t.disabled,u=void 0!==s&&s,l=t.theme,c=this.state,_=c.hover,m=c.focus,E=(_||m)&&null!=r?r:null,b=(0,g.isString)(n)?f.default.createElement("div",{className:(0,d.default)(h.default.ellipsify,h.default.action,(0,o.default)({},h.default.compact,l===y.COMPACT)),role:"button","aria-label":n},n):n,T={enter:this.onKeyboardActivation,space:this.onKeyboardActivation},w=(0,d.default)(h.default.item,h.default.shortcut,(e={},(0,o.default)(e,h.default.hover,_||m),(0,o.default)(e,h.default.text,"text"===a),(0,o.default)(e,h.default.emoji,"emoji"===a||"emoji-grid"===a),(0,o.default)(e,h.default.emojiGrid,"emoji-grid"===a),(0,o.default)(e,h.default.icon,"icon"===a),(0,o.default)(e,h.default.disabled,u||l===y.MUTED),e)),A=u?{}:{handlers:T,onContextMenu:S,onMouseDown:S,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onFocus,onBlur:this.onBlur};return f.default.createElement(v.default,(0,i.default)({component:"li","data-a8n":p.default.key(this.props.a8n),className:w,"data-animate-dropdown-item":!0},A),b,f.default.createElement("div",null,E))}}]),n}(f.PureComponent);function S(e){e.preventDefault()}E.defaultProps={type:"text"},E.displayName="DropdownItem";var b=(0,_.default)(E);t.default=b},40167:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(94184)),c=r(n(67294)),d=n(24775),f=r(n(81198)),p=a(n(8513)),h=a(n(34432)),_=p.default.getGlyphId,v=p.default.getStyle,m=p.default.getCssClasses,g=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.emoji,t=this.context,n=_(e);null!=n&&(t.incrementLoadingEmojisCount(),f.default.loadEmoji(n,f.LOAD_PRIORITY.LAZY_LOAD_EMOJI).finally((function(){t.decrementLoadingEmojisCount()})))}},{key:"render",value:function(){var e,t,n=this.props,r=n.className,a=n.element,i=n.emoji,o=n.selectable,s=n.selected,u=n.size,d=n.src,f=n.onLoad,p=n.tabIndex,g=_(i);if(null==g)return null;d||(e=v(g,u),t=m(g,u));var y=(0,l.default)(r,t,{selected:s});return"span"===a?c.default.createElement("span",{className:y,style:e,onLoad:f,tabIndex:p,"data-unicode":this.props["data-unicode"],"data-variant":this.props["data-variant"],"data-emoji-index":this.props["data-emoji-index"]}):c.default.createElement(h.default,{alt:i,className:y,draggable:!1,onLoad:f,plainText:i,selectable:o,style:e,src:d})}}]),n}(c.Component);t.default=g,g.contextType=d.InitialEmojisCompletionContext,g.displayName="Emoji"},41769:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_SIZE=void 0;var i=a(n(63038)),o=a(n(81109)),s=a(n(59713)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=a(n(94184)),p=r(n(56678)),h=a(n(91080)),_=a(n(96486)),v=r(n(67294)),m=a(n(34541)),g=a(n(8513)),y=a(n(94870)),E=a(n(50875)),S=n(12518),b=a(n(89115)),T=a(n(68390)),w=a(n(36474)),A=n(38628),C=a(n(73358)),O={SMALL:"SMALL",LARGE:"LARGE"};t.EMOJI_SIZE=O;var M=4096;function I(e){return g.default.containsEmoji(e.substring(0,M))}var k=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={text:e.props.text||"",ellipsified:null},e.refContainer=(0,v.createRef)(),e._registeredListener=!1,e._registerResizeListener=function(){e._registeredListener||(e._registeredListener=!0,e.props.listeners.add(window,"resize",e._recompute),e.props.listeners.add(m.default,"resize",e._recompute))},e._unregisterResizeListener=function(){e._registeredListener&&(e._registeredListener=!1,e.props.listeners.remove(window,"resize",e._recompute),e.props.listeners.remove(m.default,"resize",e._recompute))},e._recompute=_.default.debounce((function(){e.setState({ellipsified:null},e.ellipsify)}),10),e._ellipsifyCheck=function(){return I(e.state.text)&&e.ellipsify()},e.ellipsify=function(){var t=e.refContainer.current;if(t){var n=(0,h.default)(t.parentElement,"node.parentElement"),r=t.querySelectorAll("img");if(r.length){var a=t.clientWidth;t.style.overflow="visible";var i=t.clientWidth!==a;if(t.style.overflow="hidden",i){var o=Boolean(b.default.isRTL())===Boolean(e.props.dirMismatch),s=r[D(r,o?n.clientWidth-L(n,t)-12:12,o)];e.setState({ellipsified:R(t,s)})}}}},e._buildBidiModel=function(e){return e.reduce((function(e,t){if("string"==typeof t){var n=t.split(/(\r?\n|\r)/g).map((function(e){return{dir:p.dir(e),content:e}}));return e.concat(n)}return e.push({content:t}),e}),[])},e._explodeOutputByLines=function(t,n){var r=e.props.direction,a=[],i=e._buildBidiModel(t),o=[],s=r;"auto"!==r&&"inherit"!==r||(s=null);for(var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null==s||null==r||s===r,i=n?null:s,u=!n||"rtl"===s!==b.default.isRTL(),l=u?y.default.dirMismatch:null;a.push(v.default.createElement("span",{key:e,dir:i,className:l},o,t?"…":null))},l=0;l<i.length;l++){var c=i[l];s!==c.dir&&null!=s&&void 0!==c.dir&&(u(l),o=[]),void 0!==c.dir&&(s=c.dir),o.push(c.content)}return u(i.length,n),a},e.componentDidMount=function(){!C.default.supportsEmojiEllipsification&&e.props.ellipsify&&I(e.state.text)&&e._registerResizeListener(),!C.default.supportsEmojiEllipsification&&e.props.ellipsify&&e._ellipsifyCheck()},e.render=function(){var t;if(!e.state.text)return null;var n=e.props,r=n.onClick,a=n.ellipsify,i=n.dirMismatch,o=n.inferLinesDirection,u=n.inlineblock,l=n.direction,c=n.textLimit,d=n.multiline,p=n.breakWord,h=e.state.ellipsified?e.state.ellipsified:e.state.text,_="inherit"===l?null:l||"auto",m=!!e.props.selectable,g=e.props.formatters||S.Configuration.EmojiOnly({selectable:m}),b=c||1/0;a&&h.length>M&&b>M&&(b=M);var T=(0,f.default)(e.props.className,(t={},(0,s.default)(t,y.default.ellipsify,!!a),(0,s.default)(t,y.default.inlineblock,!!u),(0,s.default)(t,y.default.clickable,!!r),(0,s.default)(t,y.default.dirMismatch,i&&!o),(0,s.default)(t,y.default.multiline,d),(0,s.default)(t,y.default.breakWord,p),t)),C=(0,E.default)(h,g,A.JSXSerializer,void 0,b),O=!!e.state.ellipsified||h.length>b,I=e.props.inferLinesDirection?e._explodeOutputByLines(C,O):C;return v.default.createElement(w.default,{className:T,dir:_,element:e.props.element,onClick:r,ref:e.refContainer,selectable:m,title:e.props.titlify?e.state.text:void 0},I)},e}return(0,l.default)(n,[{key:"getContainerElement",value:function(){return this.refContainer.current}},{key:"getWidth",value:function(){var e=this.refContainer.current;return e?e.getBoundingClientRect().width:0}},{key:"componentDidUpdate",value:function(e,t){!C.default.supportsEmojiEllipsification&&this.props.ellipsify&&t.text!==this.state.text&&(I(this.state.text)?(this._recompute(),this._registerResizeListener()):this._unregisterResizeListener())}},{key:"componentWillUnmount",value:function(){this._recompute.cancel()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r=null,a=null!==(n=e.text)&&void 0!==n?n:"";return a!==t.text&&(r={text:a}),C.default.supportsEmojiEllipsification||!e.ellipsify||null==r||I(a)||(r=(0,o.default)((0,o.default)({},r),{},{ellipsified:null})),r}}]),n}(v.PureComponent);k.defaultProps={element:"span",emojiSize:O.SMALL,textLimit:1/0};var P=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"getWidth",value:function(){return this.getComponent().getWidth()}},{key:"getContainerElement",value:function(){return this.getComponent().getContainerElement()}}]),n}((0,T.default)(k));function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{found:!1};if(e===t)return n.found=!0,"";if(e instanceof HTMLImageElement)return e.alt;if(e.nodeType===Node.TEXT_NODE)return e.nodeValue;for(var r=N(e),a="",o=0;o<e.childNodes.length&&(a+=R(e.childNodes[o],t,n),!n.found);)o++;if(null==r)return a;var s=(0,i.default)(r,2),u=s[0],l=s[1];return`${u}${a}${l}`}function D(e,t,n){for(var r=0;r<e.length;){var a=e[r];if(n&&a.offsetLeft+a.clientWidth>=t)break;if(!n&&a.offsetLeft<=t)break;r++}return r}function N(e){if(e instanceof Element)switch(e.tagName){case"CODE":return["```","```"];case"STRONG":return["*","*"];case"EM":return["_","_"];case"DEL":return["~","~"];case"LI":return["* ",""];default:return null}return null}function L(e,t){for(var n=0,r=e.childNodes,a=0;a<r.length;a++){var i=r[a];if(i===t)break;n+=i instanceof Element?i.clientWidth:0}return n}t.default=P},19129:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.openExternalLink=function(e){if(!p.default.hasValidUrlScheme(e))return void(e.toLowerCase().startsWith("javascript:")&&(__LOG__(4,void 0,new Error,!0)`Bad url: ${e}`,SEND_LOGS("URL error")));var t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noopener noreferrer",t.style.display="none",document&&document.body&&document.body.appendChild(t);t.click(),document&&document.body&&document.body.removeChild(t)},t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(34263)),d=(a(n(77793)),a(n(6535))),f=n(30564),p=a(n(69267)),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._elRef=(0,l.createRef)(),e._onKeyDown=function(t){var n;(0,d.default)(t)&&(null===(n=e._elRef.current)||void 0===n||n.click())},e}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.href,a=e.isLongTemplateUrl,i=e.onClick;return p.default.hasValidUrlScheme(r)?a?l.default.createElement("a",{ref:this._elRef,rel:"noopener noreferrer",className:n,href:r,target:"_blank",onClick:i,onKeyDown:this._onKeyDown},(0,f.substring)(r,0,c.default.TEMPLATE_URL_START),l.default.createElement("span",null,"…"),(0,f.substring)(r,r.length-c.default.TEMPLATE_URL_END,r.length)):l.default.createElement("a",{ref:this._elRef,rel:"noopener noreferrer",className:n,href:r,target:"_blank",onClick:i,onKeyDown:this._onKeyDown},t):(r.toLowerCase().startsWith("javascript:")&&(__LOG__(4,void 0,new Error,!0)`Bad url: ${r}`,SEND_LOGS("URL error")),l.default.createElement("a",null))}}]),n}(l.PureComponent);t.default=h,h.displayName="ExternalLink"},75398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultFavicon=function(e){var t=e.children;return(0,r.useEffect)((function(){(0,a.setTitleAndIcon)(0)}),[]),t},t.ErrorFavicon=function(e){var t=e.children;return(0,r.useEffect)((function(){(0,a.setTitleAndIcon)(-1)}),[]),t};var r=n(67294),a=n(1119)},32002:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FlexItem",{enumerable:!0,get:function(){return d.FlexItem}}),t.FlexColumn=t.FlexRow=t.FlexContainer=void 0;var i=a(n(67154)),o=a(n(59713)),s=a(n(94184)),u=r(n(67294)),l=a(n(97930)),c=a(n(70202)),d=n(28053),f=(0,u.forwardRef)((function(e,t){var n,r=e.a8nText,a=e.align,i=void 0===a?"start":a,d=e.as,f=void 0===d?"div":d,p=e.direction,h=e.justify,_=void 0===h?"start":h,v=e.wrap,m=void 0===v?"nowrap":v,g=e.children,y=e.className,E=e.style;return u.default.createElement(f,{className:(0,s.default)((n={},(0,o.default)(n,c.default.flex,!0),(0,o.default)(n,c.default.justifyStart,"start"===_),(0,o.default)(n,c.default.justifyCenter,"center"===_),(0,o.default)(n,c.default.justifyEnd,"end"===_),(0,o.default)(n,c.default.justifyAll,"all"===_),(0,o.default)(n,c.default.justifyAround,"around"===_),(0,o.default)(n,c.default.justifyEvenly,"evenly"===_),(0,o.default)(n,c.default.directionVertical,"vertical"===p),(0,o.default)(n,c.default.directionHorizontal,"horizontal"===p),(0,o.default)(n,c.default.directionVerticalReverse,"vertical-reverse"===p),(0,o.default)(n,c.default.directionHorizontalReverse,"horizontal-reverse"===p),(0,o.default)(n,c.default.alignStart,"start"===i),(0,o.default)(n,c.default.alignCenter,"center"===i),(0,o.default)(n,c.default.alignEnd,"end"===i),(0,o.default)(n,c.default.alignStretch,"stretch"===i),(0,o.default)(n,c.default.alignBaseline,"baseline"===i),(0,o.default)(n,c.default.wrap,"wrap"===m),(0,o.default)(n,c.default.wrapReverse,"wrap-reverse"===m),n),y),ref:t,style:E,"data-a8n":l.default.key(r)},g)}));t.FlexContainer=f,f.displayName="FlexContainer";var p=(0,u.forwardRef)((function(e,t){return u.default.createElement(f,(0,i.default)({},e,{direction:"horizontal",ref:t}),e.children)}));t.FlexRow=p,p.displayName="FlexRow";var h=(0,u.forwardRef)((function(e,t){return u.default.createElement(f,(0,i.default)({},e,{direction:"vertical",ref:t}),e.children)}));t.FlexColumn=h,h.displayName="FlexColumn"},28053:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.FlexItem=void 0;var i=a(n(81109)),o=a(n(59713)),s=a(n(94184)),u=r(n(67294)),l=a(n(74453)),c=a(n(37112)),d=(0,u.forwardRef)((function(e,t){var n,r=e.a8nText,a=e.align,d=void 0===a?"auto":a,f=e.as,p=void 0===f?"div":f,h=e.basis,_=e.className,v=e.children,m=e.order,g=e.grow,y=e.shrink,E=e.style,S={flexBasis:"string"==typeof h||null==h?h:`${h}px`,flexGrow:g,flexShrink:y,order:m};return u.default.createElement(p,{className:(0,s.default)((n={},(0,o.default)(n,c.default.flexItem,!0),(0,o.default)(n,c.default.alignAuto,"auto"===d),(0,o.default)(n,c.default.alignStart,"start"===d),(0,o.default)(n,c.default.alignCenter,"center"===d),(0,o.default)(n,c.default.alignEnd,"end"===d),(0,o.default)(n,c.default.alignStretch,"stretch"===d),n),_),"data-a8n":r,ref:t,style:(0,i.default)((0,i.default)({},E),(0,l.default)(S))},v)}));t.FlexItem=d,d.displayName="FlexItem"},51912:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.useState)(!1),t=(0,a.default)(e,2),n=t[0],r=t[1],u=(0,s.useFocusVisibility)();return[(0,o.useFocus)({onFocusChange:r}),n&&u]};var a=r(n(63038)),i=n(67294),o=n(62488),s=n(22885)},37807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),(0,r.useCallback)((function(){return e.current}),[])};var r=n(67294)},49434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,r.useRef)();null==t.current&&(t.current=e());return t};var r=n(67294)},19247:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useListener=function(e,t,n,r){var i=(0,a.useRef)(n),s=(0,a.useRef)(null);return(0,a.useEffect)((function(){i.current=n}),[n]),(0,a.useEffect)((function(){return o(s,e,t,(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];null===(e=i.current)||void 0===e||e.call.apply(e,[i].concat(n))}),r)}),[e,t]),function(){var e;null===(e=s.current)||void 0===e||e.disengage()}},t.useListenerRef=function(e,t,n,r){var i=(0,a.useRef)(n),s=(0,a.useRef)(null);return(0,a.useEffect)((function(){i.current=n}),[n]),(0,a.useEffect)((function(){var n=e.current;if(null!=n)return o(s,n,t,(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];null===(e=i.current)||void 0===e||e.call.apply(e,[i].concat(n))}),r)}),[e,t]),function(){var e;null===(e=s.current)||void 0===e||e.disengage()}};var a=n(67294),i=r(n(77785));function o(e,t,n,r,a){if(null==t)return e.current=null,function(){};var o=new i.default(t,n,r,a);return o.engage(),e.current=o,function(){o.disengage(),e.current=null}}},4645:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.useMemo)((function(){return function(e){var n,r=(0,a.default)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=i&&("function"!=typeof i?"object"!=typeof i?(__LOG__(4,void 0,new Error,!0)`mergeRefs cannot handle refs that are not a function or a react ref`,SEND_LOGS("react-bad-ref")):i.current=e:i(e))}}catch(e){r.e(e)}finally{r.f()}}}),[].concat(t))};var a=r(n(43269)),i=n(67294)},33819:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,d.unproxy)(e),i=(0,l.useRef)();function o(){return null==i.current&&(i.current=new c.default(null!=n?n:"Hook(useModelValues)",r.proxyName,t,!0,!0)),i.current}var s=(0,l.useState)((function(){var e=o(),t=e.getModelAndValidate(r);if(!t)throw new f(e.name);return e.createProxy(t)})),u=(0,a.default)(s,2),p=u[0],h=u[1],_=(0,l.useCallback)((function(e,t){var n=e.getModelAndValidate(t);if(!n)throw new f(e.name);h(e.createProxy(n))}),[]);(0,l.useEffect)((function(){var e=o(),t=e.getModel(r);return e.attachConcern(t,p.proxyBitMask,_),function(){e.detachConcern(t,_)}}),[r,p,_]);var v=(0,l.useState)(r),m=(0,a.default)(v,2),g=m[0],y=m[1];if(g!==r){var E=o();E.detachConcern(g,_);var S=E.getModelAndValidate(r);if(!S)throw new f(E.name);y(S),h(E.createProxy(S))}return p},t.StateHookMissingModelError=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(2205)),s=r(n(99842)),u=r(n(65957)),l=n(67294),c=r(n(18138)),d=n(89305),f=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,`Received a null value for model key: ${e}`)).name="StateHookMissingModelError",r}return n}((0,u.default)(Error));t.StateHookMissingModelError=f},10394:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=(0,a.useRef)(),s=!0===(null==t?void 0:t.disabled),u=s?o:e;return[function(e){r.current=e},{"aria-disabled":null!==(n=null==t?void 0:t.disabled)&&void 0!==n?n:void 0,onClick:u,onKeyPress:function(e){var t;(0,i.default)(e)&&(e.stopPropagation(),e.preventDefault(),null===(t=r.current)||void 0===t||t.click())},role:"button",tabIndex:s?-1:0}]};var a=n(67294),i=r(n(6535));function o(){}},34432:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(2205)),l=i(n(99842)),c=a(n(67294)),d=i(n(34263)),f=a(n(98569)),p=i(n(42027)),h=i(n(28577)),_=i(n(73878)),v=n(36474),m=i(n(69267)),g=new _.default,y=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._refNative=(0,c.createRef)(),a.getElement=function(){return a._refNative.current},a.onLoad=function(e){var t=e.target;if(t instanceof HTMLImageElement){var n=a.getImgElement();n&&n.complete&&a._showImgElement(n),a.props.onLoad&&a.props.onLoad({target:t}),a.setState({loading:!1})}},a.onError=function(e){a.setState({available:!1});var t=a.props,n=t.src,i=t.crossOrigin,o=t.noXHR,s=t.hasPrivacyChecks;if(n&&function(e){return"/"===e[0]||m.default.isHttp(e)}(n)){var u,l=a.retry;if(l)if(E(l,a.props)){if(!l.noXHR)return;u=l}else{l.release()&&g.remove(l),u=new h.default(n,i,o,s)}else u=new h.default(n,i,o,s);a.retry=u,g.enqueue(u).checkpoint(a.props.rejectOnUnmount()).then((function(){u===a.retry&&a.setState({available:!0})})).catchTypes(f.ServerStatusError,f.GaveUpRetry,(function(e){u===a.retry&&(a.props.rejectOnUnmount().isRejected()||(a.setState({available:!1,error:e}),a.props.onError&&a.props.onError(e)))})).catchTypes(f.Unmount,r.CancellationError,(function(){}))}else a.setState({error:e.error})},a.onContextMenu=function(e){a.props.disableContextMenu&&e.preventDefault()},a.state={src:e.src,available:!0,error:null,loading:!0},a}return(0,s.default)(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){return e.src!==t.src?{src:e.src,available:!0}:null}}]),(0,s.default)(n,[{key:"componentDidMount",value:function(){if(this.props.src){var e=this.getImgElement();e&&!e.complete&&this._hideImgElement(e)}}},{key:"componentDidUpdate",value:function(e){if(E(e,this.props)||this._cancelRetry(),this.props.src){var t=this.getImgElement();t&&!t.complete&&this._hideImgElement(t)}}},{key:"componentWillUnmount",value:function(){this._cancelRetry()}},{key:"_cancelRetry",value:function(){if(this.retry){var e=this.retry;e.release()&&g.remove(e)}}},{key:"getImgElement",value:function(){return this._refNative.current}},{key:"_showImgElement",value:function(e){"visible"!==e.style.visibility&&(e.style.visibility="visible")}},{key:"_hideImgElement",value:function(e){"hidden"!==e.style.visibility&&(e.style.visibility="hidden")}},{key:"render",value:function(){var e=this.props,t=e.alt,n=e.className,r=e.crossOrigin,a=e.draggable,i=e.onClick,o=e.onMouseMove,s=e.plainText,u=e.selectable,l=e.src,f=e.style,p=e.renderLoading,h=e.renderError,_=this.state,m=_.available,g=_.error,y=_.loading;if(g&&h)return h(g);var E=Boolean(m&&l);return c.default.createElement(c.default.Fragment,null,c.default.createElement(v.SelectableImg,{ref:this._refNative,plainText:s||"",selectable:Boolean(u),crossOrigin:r?"anonymous":void 0,onError:E?this.onError:function(){},onLoad:E?this.onLoad:function(){},src:E&&null!=l?l:d.default.ONE_BY_ONE_TRANS_GIF,alt:t,className:n,draggable:a,onClick:i,onMouseMove:o,style:f,onContextMenu:this.onContextMenu}),y&&p&&p())}}]),n}(c.Component);function E(e,t){return e.src===t.src&&e.crossOrigin===t.crossOrigin&&e.noXHR===t.noXHR&&e.hasPrivacyChecks===t.hasPrivacyChecks}y.defaultProps={crossOrigin:!0,noXHR:!1,hasPrivacyChecks:!0},y.displayName="Img";var S=(0,p.default)(y);t.default=S},28577:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=a(n(98569)),l=i(n(8643)),c=i(n(89428)),d=function(){function e(t,n,r,a){(0,o.default)(this,e),this.src=t,this.crossOrigin=n,this.noXHR=r,this.hasPrivacyChecks=a,this.generation=0,this.refCount=0,this.inProgress=!1}return(0,s.default)(e,[{key:"key",value:function(){return`co:${this.crossOrigin?"Y":"N"},noXHR:${this.noXHR?"Y":"N"},src:${this.src}`}},{key:"sendXHR",value:function(){var e=this;if(this.noXHR)return r.resolve(!0);var t=this.src;return this.inProgress=!0,this._xhrPromise=c.default.get(t).timeout(3e4,"ImgRetryTimeout"),this._xhrPromise.then((function(e){var n=e.status;if(n>=200&&n<400)return!0;if(n>=500)return __LOG__(2)`Img:Retry ${t} failed with error code ${n}. Retrying.`,new l.default.WebcImgError({webcImgErrorCode:n}).commit(),!1;throw __LOG__(2)`Img:Retry ${t} failed with error code ${n}. Not retrying.`,new l.default.WebcImgError({webcImgErrorCode:n}).commit(),new u.ServerStatusError(null,t,n)})).catch((function(e){if(e instanceof u.ServerStatusError)throw e;return!1})).finally((function(){e.inProgress=!1}))}},{key:"release",value:function(){return this.refCount--,this.refCount<=0&&(this._xhrPromise&&this._xhrPromise.cancel(),!0)}},{key:"shouldRetain",value:function(){return this.refCount>0}}]),e}();t.default=d},73878:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(91080)),l=i(n(35340)),c=a(n(98569)),d=n(42594),f=i(n(67890)),p=a(n(59502)),h=function(){function e(){(0,o.default)(this,e),this._queue=new Map,this._inDelay=new Map,this._numInProgress=0}return(0,s.default)(e,[{key:"enqueue",value:function(e){var t=this._queue.get(e.key());if(t){if(e.hasPrivacyChecks!==t.hasPrivacyChecks){var n=`Img:hasPrivacyChecks shouldn't change ${e.key()}`;return r.reject(n)}return t.refCount++,t.promise}return e.promise=new r((function(t,n){e.resolve=t,e.reject=n})),e.refCount++,this._addToQueue(e),e.promise}},{key:"remove",value:function(e){var t=e.key();this._queue.delete(t);var n=this._inDelay.get(t);n&&(n.cancel(),this._inDelay.delete(t))}},{key:"_addToQueue",value:function(e){var t=this,n=e.generation;if(e.generation++,n>10){var a=`Stop retrying ${e.src} after 10 times`;throw new c.GaveUpRetry(a)}var i=e.key();if(0===n)this._queue.set(i,e),this._startProcessing();else{var o=p.expDelaySec(n,60,0).cancellable().catchType(r.CancellationError,(function(){}));this._inDelay.set(e.key(),o),o.then((function(){t._inDelay.delete(i),t._queue.set(i,e),t._startProcessing()}))}}},{key:"_startProcessing",value:function(){var e=this;this._waitPromise||(this._waitPromise=f.default.waitIfOffline({signal:(new l.default).signal}).then((function(){e._waitPromise=null,d.UIBusyTasks.enqueue((function(){e._processRetries()}))})))}},{key:"_processRetries",value:function(){for(var t,n=this._queue.values();(t=n.next())&&!t.done&&!(this._numInProgress>e.maxInProgressRetry());){var r=t.value;this._processRetry((0,u.default)(r,"retry"))}}},{key:"_processRetry",value:function(e){var t=this;e.inProgress||(e.promise.isPending()?(this._numInProgress++,e.sendXHR().then((function(n){t._queue.delete(e.key()),n?e.resolve():e.shouldRetain()&&t._addToQueue(e)})).catch((function(n){t._queue.delete(e.key()),e.reject(n)})).finally((function(){t._numInProgress--}))):this._queue.delete(e.key()))}}],[{key:"maxInProgressRetry",value:function(){return 20}}]),e}();t.default=h},45425:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(96486)),c=r(n(67294)),d=a(n(89115)),f=n(36474),p=/(.*?)__(\w+?)__/g,h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"translate",value:function(){var e,t,n=this.props,r=n.id,a=n.plural,i=n.params,o=d.default.t(r,{_plural:a});if(!i||l.default.isEmpty(i))return o;for(var s=[];e=p.exec(o);){var u=e;s.push(u[1]);var f=u[2];if(f&&null!=i[f]){var h=Array.isArray(i[f])?i[f].map((function(e,t){return c.default.createElement(c.default.Fragment,{key:`child_${t}`},e)})):c.default.createElement(c.default.Fragment,{key:f},i[f]);s.push(h)}t=u.index+u[0].length}return"number"==typeof t&&t<o.length&&s.push(o.slice(t)),0===s.length?o:s}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.wrapInHiddenToken;return c.default.createElement(f.SelectableSpan,{dir:d.default.isRTL()?"rtl":"ltr",selectable:!n,onClick:t},this.translate())}}]),n}(c.PureComponent);t.default=h,h.defaultProps={wrapInHiddenToken:!0},h.displayName="L10n"},60482:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UnknownDataError=t.DEFAULT_ITEM_HEIGHT=t.DEFAULT_ITEM_WIDTH=void 0;var i=a(n(59713)),o=a(n(81109)),s=a(n(93913)),u=a(n(34575)),l=a(n(2205)),c=a(n(99842)),d=a(n(94184)),f=n(1838),p=a(n(96486)),h=r(n(67294)),_=a(n(28662)),v=n(42594),m=a(n(43340)),g=a(n(94821)),y=a(n(39973)),E=a(n(38512));t.DEFAULT_ITEM_WIDTH=72;t.DEFAULT_ITEM_HEIGHT=72;var S=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(e){return(0,u.default)(this,n),t.call(this,`Unknown data encountered while rendering. Item key: ${e.itemKey}`)}return n}((0,f.customError)("UnknownDataError"));t.UnknownDataError=S;var b=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(e){var r;(0,u.default)(this,n),(r=t.call(this,e)).keyPool=new m.default,r.hanging=!1,r.pointerEvents=!0,r.setRefList=function(e){r.refList=e},r.setListLength=function(){r.setState({renderedListLength:r.state.listLength})},r.getListLength=function(){return r.state.renderedListLength},r.onLayout=function(e){var t=r.refList;if(t){var a="horizontal"===r.props.direction?t.getBoundingClientRect().left-e.position.left:t.getBoundingClientRect().top-e.position.top,i=Math.max(a,0),s="horizontal"===r.props.direction?e.width:e.height,u=n.computeIndexes(r.props,(0,o.default)((0,o.default)({},r.state),{},{offsetFromStart:i,bodyDimension:s})),l=u.firstIndex,c=u.lastIndex;r.setState({firstIndex:l,lastIndex:c,bodyDimension:s,offsetFromStart:i})}},r.onScroll=function(){r.animationFrame?r.hanging=!0:(r.hanging=!1,r.animationFrame=requestAnimationFrame(r._onScroll))},r._onScroll=function(){r.disablePointerEvents();var e=r.props.flatListController.getScrollFromStart();if(null==e)throw new Error("FlatList:ScrollEvent thrown while container is unmounted");var t=Math.max(e,0),a=n.computeIndexes(r.props,(0,o.default)((0,o.default)({},r.state),{},{scrollFromStart:t}));r.setState({scrollFromStart:t,firstIndex:a.firstIndex,lastIndex:a.lastIndex},r.onFinishScroll)},r.onFinishScroll=function(){r.animationFrame=void 0,r.enablePointerEvents(),r.hanging&&r.onScroll()},r.enablePointerEvents=p.default.debounce((function(){if(r.animationFrame)return r.enablePointerEvents();null!=r.busyId&&(v.UIBusyTasks.clearBusy(r.busyId),delete r.busyId),r.props.onPointerEventsOn&&r.props.onPointerEventsOn();var e=r.refList;e&&(e.style.pointerEvents="auto"),r.pointerEvents=!1}),150);var a=n.computeDataAndListLength(e),i=a.enhancedData,s=a.listLength;return r.state={firstIndex:0,lastIndex:0,scrollFromStart:0,offsetFromStart:0,bodyDimension:0,enhancedData:i,listLength:s,renderedListLength:s},r}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.props.flatListController.registerList({handleLayout:this.onLayout,handleScroll:this.onScroll})}},{key:"componentWillUnmount",value:function(){this.props.flatListController.unregisterList(),this.enablePointerEvents.cancel(),this.cancelScroll()}},{key:"cancelScroll",value:function(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0,this.hanging=!1)}},{key:"disablePointerEvents",value:function(){if(this.busyId=v.UIBusyTasks.setBusy(this.busyId),!this.pointerEvents){this.props.onPointerEventsOff&&this.props.onPointerEventsOff();var e=this.refList;e&&(e.style.pointerEvents="none"),this.pointerEvents=!0}}},{key:"scrollIntoViewIfNeeded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.state,r=n.enhancedData,a=n.scrollFromStart,i=n.bodyDimension;if(e<0||e>=r.length)throw new Error("Invalid Index.");var o=r[e].offset;(o<a-t||o>a+i+t)&&this.props.flatListController.setScrollFromStart(o)}},{key:"getComponents",value:function(){var e=this,t=this.props,r=t.reorderAnimationsEnabled,a=t.renderItem,i=t.defaultItemWidth,s=t.defaultItemHeight,u=this.state,l=u.firstIndex,c=u.lastIndex,d=this.state.enhancedData.slice(l,c+1);return this.keyPool.recycleKeysAndMap(d).map((function(t,u){var l=t.rctKey,c=t.data,d="horizontal"===e.props.direction?{width:n.getItemWidth(c,i)}:{height:n.getItemHeight(c,s)};return h.default.createElement(y.default,{key:l,data:(0,o.default)((0,o.default)({},c),d),animate:!!r&&g.default.shouldAnimate,zIndex:e.state.enhancedData.length-u-1,renderItem:a,listDirection:e.props.direction})}))}},{key:"render",value:function(){var e,t=this.props.role,n="horizontal"===this.props.direction?{width:this.state.renderedListLength}:{height:this.state.renderedListLength};return h.default.createElement("div",{className:(0,d.default)(this.props.className),ref:this.setRefList},h.default.createElement("div",{"aria-label":this.props["aria-label"],className:(0,d.default)(_.default.viewport,(e={},(0,i.default)(e,_.default.horizontalListViewport,"horizontal"===this.props.direction),(0,i.default)(e,_.default.verticalListViewport,"vertical"===this.props.direction),e)),role:t,"aria-rowcount":this.props["aria-rowcount"],style:n},this.props.itemEnterAnimationsEnabled?h.default.createElement(E.default,{transitionName:"fade",onAnimationComplete:this.setListLength},this.getComponents()):this.getComponents()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=n.computeDataAndListLength(e),a=r.enhancedData,i=r.listLength,s=n.computeIndexes(e,(0,o.default)((0,o.default)({},t),{},{enhancedData:a,listLength:i})),u={enhancedData:a,listLength:i,firstIndex:s.firstIndex,lastIndex:s.lastIndex};return(!e.itemEnterAnimationsEnabled||i>=t.renderedListLength)&&(u.renderedListLength=i),u}},{key:"computeDataAndListLength",value:function(e){var t=0;return{enhancedData:e.data.map((function(r){var a=(0,o.default)((0,o.default)({},r),{},{offset:t}),i=n.getDimension(r,e.direction,e.defaultItemWidth,e.defaultItemHeight);return t+=i,a})),listLength:t}}},{key:"getDimension",value:function(e,t,r,a){return"horizontal"===t?n.getItemWidth(e,r):n.getItemHeight(e,a)}},{key:"getItemWidth",value:function(e,t){return null!=e.width&&e.width>0?e.width:t}},{key:"getItemHeight",value:function(e,t){return null!=e.height&&e.height>0?e.height:t}},{key:"computeIndexes",value:function(e,t){var r=t.bodyDimension,a=t.offsetFromStart,i=t.scrollFromStart,o=t.listLength,s=t.enhancedData;if(void 0===r||void 0===a)throw new Error("FlatList:Computing FlatList without a valid Container");for(var u=e.extraItems,l=e.forceConsistentRenderCount,c=e.direction,d=e.defaultItemWidth,f=e.defaultItemHeight,p=0,h=0;h<s.length;h++){var _=s[h],v=n.getDimension(_,c,d,f);if(a+_.offset+v>i){p=h;break}}for(var m=s.length-1,g=l?Math.min(s[p].offset+r,o):Math.min(i+r,o+a),y=p;y<s.length;y++){var E=s[y],S=n.getDimension(E,c,d,f);if(a+E.offset+S>=g){m=y;break}}var b=u,T=u-p;T>0&&(b+=T);var w=u,A=m+u-s.length;return A>0&&(w+=A),{firstIndex:Math.max(p-w,0),lastIndex:Math.min(m+b,s.length-1)}}}]),n}(h.Component);t.default=b,b.defaultProps={defaultItemHeight:72,defaultItemWidth:72,forceConsistentRenderCount:!0,extraItems:5,initialScrollFromStart:0,reorderAnimationsEnabled:!0},b.displayName="FlatList"},55959:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67154)),o=a(n(6479)),s=a(n(81109)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=a(n(91080)),p=r(n(67294)),h=a(n(74086)),_=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._setRefObserver=function(t){e._refObserver=t,e.props.onRef&&e.props.onRef(t)},e.getScrollFromStart=function(){var t=e._refObserver;if(t)return"horizontal"===e.props.direction?t.scrollLeft:t.scrollTop},e.setScrollFromStart=function(t){var n=e._refObserver;n&&("horizontal"===e.props.direction?n.scrollLeft=t:n.scrollTop=t)},e._handleRegisterList=function(){var t=(0,f.default)(e._refObserver,"_this._refObserver");e.props.flatListControllers.forEach((function(e){return e.triggerLayout({position:t.getBoundingClientRect(),width:t.clientWidth,height:t.clientHeight})}))},e._handleScroll=function(t){var n=e.props,r=n.flatListControllers,a=n.onScroll;a&&a(t),r.forEach((function(e){return e.triggerScroll()}))},e._handleResize=function(t){var n=e.props,r=n.flatListControllers,a=n.onLayout,i=(0,f.default)(e._refObserver,"_this._refObserver"),o=(0,s.default)((0,s.default)({},t),{},{position:i.getBoundingClientRect()});r.forEach((function(e){return e.triggerLayout(o)})),a&&a(o)},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.flatListControllers,r=t.scrollOffset;n.forEach((function(t){return t.registerContainer({getScrollFromStart:e.getScrollFromStart,setScrollFromStart:e.setScrollFromStart,onRegisterList:e._handleRegisterList})})),void 0!==r&&this.setScrollFromStart(r)}},{key:"componentWillUnmount",value:function(){this.props.flatListControllers.forEach((function(e){return e.unregisterContainer()}))}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.flatListControllers,e.onScroll,e.onLayout,e.onRef,e.scrollOffset,(0,o.default)(e,["children","flatListControllers","onScroll","onLayout","onRef","scrollOffset"]));return p.default.createElement(h.default,(0,i.default)({},n,{onResize:this._handleResize,onScroll:this._handleScroll,onRef:this._setRefObserver}),t)}}]),n}(p.Component);t.default=_,_.displayName="FlatListContainer"},50842:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"registerContainer",value:function(e){this._containerAPI=e,this._listHandlers&&e.onRegisterList()}},{key:"unregisterContainer",value:function(){delete this._containerAPI}},{key:"triggerScroll",value:function(){this._listHandlers&&this._listHandlers.handleScroll()}},{key:"triggerLayout",value:function(e){this._listHandlers&&this._listHandlers.handleLayout(e)}},{key:"registerList",value:function(e){this._listHandlers=e,this._containerAPI&&this._containerAPI.onRegisterList()}},{key:"unregisterList",value:function(){delete this._listHandlers}},{key:"getScrollFromStart",value:function(){if(this._containerAPI)return this._containerAPI.getScrollFromStart()}},{key:"setScrollFromStart",value:function(e){this._containerAPI&&this._containerAPI.setScrollFromStart(e)}}]),e}();t.default=o},43340:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(319)),i=r(n(34575)),o=r(n(93913)),s=r(n(91080)),u=r(n(96486)),l=function(){function e(){(0,i.default)(this,e),this._rctKeyToData=new Map,this._keyToRctKey=new Map}return(0,o.default)(e,[{key:"_genNewKeys",value:function(e){var t=e-this._rctKeyToData.size;if(t<=0)return[];for(var n=[],r=0;r<e&&(this._rctKeyToData.has(r)||(n.push(r),t!==n.length));r++);return n}},{key:"recycleKeysAndMap",value:function(e){var t=this,n=new Map,r=new Map,i=this._genNewKeys(e.length),o=new Set(this._rctKeyToData.keys()),l=[];e.forEach((function(e){var a=t._keyToRctKey.get(e.itemKey);void 0!==a?(r.set(e.itemKey,a),n.set(a,e),o.delete(a)):l.push(e)}));var c=[].concat((0,a.default)(i),(0,a.default)(o));l.forEach((function(e){var t=c.pop();r.set(e.itemKey,t),n.set(t,e)}));var d=u.default.sortBy(e,[function(e){return r.get(e.itemKey)}]).map((function(e){return{rctKey:(0,s.default)(r.get(e.itemKey),"keyToRctKey.get(item.itemKey)"),data:e}}));return this._rctKeyToData=n,this._keyToRctKey=r,d}}]),e}();t.default=l},94821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={shouldAnimate:!0};"darwin"===process.platform&&(n.shouldAnimate=document.hasFocus(),window.addEventListener("focus",(function(){n.shouldAnimate=!0})),window.addEventListener("blur",(function(){n.shouldAnimate=!1})));var r=n;t.default=r},39973:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),o=a(n(59713)),s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=r(n(67294)),f=a(n(96774)),p=a(n(85722)),h=a(n(60322)),_=p.default.prefix("transform"),v=p.default.prefix("transition"),m=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={shouldAnimate:!0,prevItemKey:null,prevRowOffset:null},e}return(0,u.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.animate!==e.animate||this.props.zIndex!=this.props.zIndex||this.props.renderItem!==e.renderItem||this.state.shouldAnimate!==t.shouldAnimate||!(0,f.default)(this.props.data,e.data)}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.zIndex,r=this.state.shouldAnimate?`${_} 200ms ease-in-out`:"none",a="horizontal"===this.props.listDirection?(0,o.default)({width:t.width},_,`translateX(${t.offset}px)`):(0,o.default)({height:t.height},_,`translateY(${t.offset}px)`),s=(0,i.default)((0,o.default)({zIndex:n},v,r),a),u=this.props.renderItem(t);return d.default.createElement("div",{className:h.default.item,style:s},u)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,i.default)((0,i.default)({},t),{},{prevItemKey:e.data.itemKey,prevRowOffset:e.data.offset,shouldAnimate:g(e,t)})}}]),n}(d.Component);function g(e,t){if(!e.animate)return!1;var n=t.prevItemKey;return e.data.itemKey===n&&e.data.offset!==t.prevRowOffset}t.default=m,m.displayName="ListItem"},16548:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(80648));t.default=function(e){var t=e.max,n=void 0===t?100:t,r=e.value;return a.default.createElement("progress",{value:r,max:n,dir:"ltr",className:i.default.progress})}},46373:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(59713)),s=i(n(87757)),u=i(n(48926)),l=i(n(34575)),c=i(n(93913)),d=i(n(2205)),f=i(n(99842)),p=i(n(94184)),h=a(n(67294)),_=i(n(97930)),v=n(7696),m=i(n(21144)),g=i(n(34541)),y=i(n(25960)),E=i(n(93743)),S=i(n(34263)),b=i(n(19129)),T=n(92618),w=n(71701),A=i(n(22021)),C=i(n(89115)),O=i(n(45425)),M=i(n(68390)),I=i(n(67890)),k=i(n(54015)),P=i(n(31516)),R=i(n(66937)),D=a(n(78603)),N=n(36474),L=i(n(87729)),x=i(n(75131)),U=i(n(35997)),F=i(n(38512)),G=i(n(23306)),B=a(n(7860)),j=n(93239),Y=n(92827),K=n(1018),W=n(68691),V=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var r;return(0,l.default)(this,n),(r=t.call(this,e)).onStateChange=function(){r.setState({offline:!I.default.online,expired:B.default.state===B.STATE.UNPAIRED_IDLE,refValid:B.default.state===B.STATE.UNPAIRED})},r._onQRExpiry=function(){A.default.supportsFeature(A.default.F.MD_BACKEND)?g.default.refreshQR():B.default.poke()},r._onRememberMeChange=function(e){B.default.isIncognito||G.default.setRememberMe(e.target.checked).catch((function(){})),(0,w.setRememberMe)(e.target.checked),r.setState({rememberMe:(0,w.getRememberMe)()})},r.state={rememberMe:(0,w.getRememberMe)(),expired:B.default.state===B.STATE.UNPAIRED_IDLE,offline:!I.default.online,refValid:B.default.state===B.STATE.UNPAIRED},r}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.props.listeners.add(B.default,"change:state change:online",this.onStateChange)}},{key:"render",value:function(){var e;e=this.state.offline?h.default.createElement($,null,h.default.createElement("div",{className:R.default.qrButton,key:"expiry"},h.default.createElement("div",{className:R.default.qrButtonIcon},h.default.createElement(x.default,{name:"connection"})),C.default.t(521))):this.state.expired?h.default.createElement($,null,h.default.createElement("button",{className:R.default.qrButton,key:"expiry",onClick:this._onQRExpiry},h.default.createElement("div",{className:R.default.qrButtonIcon},h.default.createElement(x.default,{name:"refresh-large"})),C.default.t(964))):this.state.refValid?h.default.createElement($,null):h.default.createElement("div",{className:R.default.qrcode},h.default.createElement(L.default,null));var t,n=this.state.rememberMe?null:h.default.createElement("div",{className:(0,p.default)(R.default.tip,R.default.rememberMeTip)},C.default.t(873));if(this.props.apiCmd)switch(this.props.apiCmd.resultType){case v.APICmd.GROUP_INVITE:t=h.default.createElement("div",{className:R.default.groupInviteTip},h.default.createElement("div",{className:R.default.tip},C.default.t(816)));break;case v.APICmd.MSG_SEND:t=h.default.createElement("div",{className:R.default.groupInviteTip},h.default.createElement("div",{className:R.default.tip},C.default.t(1081)))}var r=h.default.createElement("strong",null,h.default.createElement(O.default,{id:963,params:{android_menu_icon:h.default.createElement(q,null)}})),a=h.default.createElement("strong",null,h.default.createElement(O.default,{id:966,params:{iphone_settings_icon:h.default.createElement(J,null)}})),i=h.default.createElement("strong",null,C.default.t(972)),o=h.default.createElement(O.default,{id:968,params:{android_menu:r,iphone_settings:a,whatsapp_web_menu_item:i}}),s=h.default.createElement("div",{className:"landing-header"});return h.default.createElement("div",{className:"landing-wrapper"},s,h.default.createElement("div",{className:"landing-window"},h.default.createElement("div",{className:"landing-main"},h.default.createElement("div",{className:R.default.qrWrapper},h.default.createElement("div",{className:R.default.text},h.default.createElement("div",{className:(0,p.default)("landing-title",R.default.headline)},C.default.t(970)),h.default.createElement("ol",{className:R.default.list},h.default.createElement("li",{className:R.default.listItem},C.default.t(967)),h.default.createElement("li",{className:R.default.listItem},o),h.default.createElement("li",{className:R.default.listItem},C.default.t(969)))),h.default.createElement("div",{className:R.default.qr},t,e),h.default.createElement(b.default,{href:(0,T.getLoginFaqUrl)(),className:R.default.hint},C.default.t(965)),A.default.supportsFeature(A.default.F.MD_BACKEND)?null:h.default.createElement("div",{className:R.default.toggle},h.default.createElement(F.default,{transitionName:"fade_sifo"},n),h.default.createElement("label",null,h.default.createElement("input",{type:"checkbox",name:"rememberMe",checked:this.state.rememberMe,onChange:this._onRememberMeChange}),C.default.t(1014))))),undefined,undefined,undefined,undefined,undefined,undefined))}}]),n}(h.Component);V.displayName="QRCode";var H=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var a;return(0,l.default)(this,n),(a=t.call(this,e))._setRefContainer=function(e){a._containerElement=e},a._genQR=function(){var e=a._containerElement;return null==e?r.resolve():a.getData().then((function(t){t&&(k.default.inc(),a.qr?a.qr.makeCode(t):a.qr=new P.default(e,{text:t,colorDark:"#122e31",width:S.default.QR_EDGE,height:S.default.QR_EDGE,correctLevel:P.default.CorrectLevel.L}),e.removeAttribute("title"),e.setAttribute("data-ref",t))}))},a.copy=function(){var e=window.getSelection(),t=document.getElementsByClassName(R.default.codeCopy).item(0);t&&(e.selectAllChildren(t),document.execCommand("copy")),g.default.closeModal()},a.onMouseMove=function(){a.state.disableCursor&&a.setState({disableCursor:!1}),a._disableCursor()},a.onMouseLeave=function(){a._disableCursor.cancel(),a.setState({disableCursor:!1})},a.onContextMenu=function(e){e.stopPropagation(),e.preventDefault(),a.getData().then((function(e){g.default.openModal(h.default.createElement(y.default,{onOK:a.copy,okText:"Copy to Clipboard"},h.default.createElement(N.SelectableSpan,{className:R.default.codeCopy,selectable:!0},e)))}))},a._disableCursor=a.props.debounce((function(){a.setState({disableCursor:!0})}),100),a.state={disableCursor:!1},a}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this._genQR(),this.props.listeners.add(E.default,"change:ref",this._genQR),g.default.initialLoadReady()}},{key:"componentWillUnmount",value:function(){k.default.reset()}},{key:"getData",value:function(){if(E.default.connected)return r.resolve(void 0);var e=E.default.ref;if(A.default.supportsFeature(A.default.F.MD_BACKEND))return K.waSignalStore.getRegistrationInfo().then(function(){var t=(0,u.default)(s.default.mark((function t(n){var r,a,i,o;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.waNoiseInfo.get();case 2:if((r=t.sent)&&r.staticKeyPair&&n){t.next=6;break}return __LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Empty noiseInfo or empty regInfo"),t.abrupt("return",null);case 6:return a=(0,Y.encodeB64)(r.staticKeyPair.pubKey),i=(0,Y.encodeB64)(n.identityKeyPair.pubKey),o=(0,W.getADVSecretKey)(),t.abrupt("return",e+","+a+","+i+","+o);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());var t=m.default.id();return r.resolve().then((function(){var n=D.getOrGenerate();return e+","+n+","+t}))}},{key:"render",value:function(){var e=this.props.children,t=(0,p.default)(R.default.qrcode,(0,o.default)({},R.default.idle,!!e)),n=this.state.disableCursor&&null==e?{cursor:"none"}:null;return h.default.createElement("div",{ref:this._setRefContainer,"data-a8n":_.default.key("qrcode"),className:t,onContextMenu:null,style:n,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},h.default.createElement(F.default,{transitionName:"scale"},e),h.default.createElement("div",{className:R.default.codeLogo},h.default.createElement(Q,null)))}}]),n}(h.Component);H.displayName="Qrcode";var $=(0,U.default)((0,M.default)(H)),z=(0,M.default)(V);t.default=z;var q=function(){return h.default.createElement("span",{className:R.default.icon},h.default.createElement("svg",{height:"24px",viewBox:"0 0 24 24",width:"24px"},h.default.createElement("rect",{fill:"#f2f2f2",height:"24",rx:"3",width:"24"}),h.default.createElement("path",{d:"m12 15.5c.825 0 1.5.675 1.5 1.5s-.675 1.5-1.5 1.5-1.5-.675-1.5-1.5.675-1.5 1.5-1.5zm0-2c-.825 0-1.5-.675-1.5-1.5s.675-1.5 1.5-1.5 1.5.675 1.5 1.5-.675 1.5-1.5 1.5zm0-5c-.825 0-1.5-.675-1.5-1.5s.675-1.5 1.5-1.5 1.5.675 1.5 1.5-.675 1.5-1.5 1.5z",fill:"#818b90"})))},J=function(){return h.default.createElement("span",{className:R.default.icon},h.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},h.default.createElement("rect",{fill:"#F2F2F2",width:"24",height:"24",rx:"3"}),h.default.createElement("path",{d:"M12 18.69c-1.08 0-2.1-.25-2.99-.71L11.43 14c.24.06.4.08.56.08.92 0 1.67-.59 1.99-1.59h4.62c-.26 3.49-3.05 6.2-6.6 6.2zm-1.04-6.67c0-.57.48-1.02 1.03-1.02.57 0 1.05.45 1.05 1.02 0 .57-.47 1.03-1.05 1.03-.54.01-1.03-.46-1.03-1.03zM5.4 12c0-2.29 1.08-4.28 2.78-5.49l2.39 4.08c-.42.42-.64.91-.64 1.44 0 .52.21 1 .65 1.44l-2.44 4C6.47 16.26 5.4 14.27 5.4 12zm8.57-.49c-.33-.97-1.08-1.54-1.99-1.54-.16 0-.32.02-.57.08L9.04 5.99c.89-.44 1.89-.69 2.96-.69 3.56 0 6.36 2.72 6.59 6.21h-4.62zM12 19.8c.22 0 .42-.02.65-.04l.44.84c.08.18.25.27.47.24.21-.03.33-.17.36-.38l.14-.93c.41-.11.82-.27 1.21-.44l.69.61c.15.15.33.17.54.07.17-.1.24-.27.2-.48l-.2-.92c.35-.24.69-.52.99-.82l.86.36c.2.08.37.05.53-.14.14-.15.15-.34.03-.52l-.5-.8c.25-.35.45-.73.63-1.12l.95.05c.21.01.37-.09.44-.29.07-.2.01-.38-.16-.51l-.73-.58c.1-.4.19-.83.22-1.27l.89-.28c.2-.07.31-.22.31-.43s-.11-.35-.31-.42l-.89-.28c-.03-.44-.12-.86-.22-1.27l.73-.59c.16-.12.22-.29.16-.5-.07-.2-.23-.31-.44-.29l-.95.04c-.18-.4-.39-.77-.63-1.12l.5-.8c.12-.17.1-.36-.03-.51-.16-.18-.33-.22-.53-.14l-.86.35c-.31-.3-.65-.58-.99-.82l.2-.91c.03-.22-.03-.4-.2-.49-.18-.1-.34-.09-.48.01l-.74.66c-.39-.18-.8-.32-1.21-.43l-.14-.93a.426.426 0 00-.36-.39c-.22-.03-.39.05-.47.22l-.44.84-.43-.02h-.22c-.22 0-.42.01-.65.03l-.44-.84c-.08-.17-.25-.25-.48-.22-.2.03-.33.17-.36.39l-.13.88c-.42.12-.83.26-1.22.44l-.69-.61c-.15-.15-.33-.17-.53-.06-.18.09-.24.26-.2.49l.2.91c-.36.24-.7.52-1 .82l-.86-.35c-.19-.09-.37-.05-.52.13-.14.15-.16.34-.04.51l.5.8c-.25.35-.45.72-.64 1.12l-.94-.04c-.21-.01-.37.1-.44.3-.07.2-.02.38.16.5l.73.59c-.1.41-.19.83-.22 1.27l-.89.29c-.21.07-.31.21-.31.42 0 .22.1.36.31.43l.89.28c.03.44.1.87.22 1.27l-.73.58c-.17.12-.22.31-.16.51.07.2.23.31.44.29l.94-.05c.18.39.39.77.63 1.12l-.5.8c-.12.18-.1.37.04.52.16.18.33.22.52.14l.86-.36c.3.31.64.58.99.82l-.2.92c-.04.22.03.39.2.49.2.1.38.08.54-.07l.69-.61c.39.17.8.33 1.21.44l.13.93c.03.21.16.35.37.39.22.03.39-.06.47-.24l.44-.84c.23.02.44.04.66.04z",fill:"#818b90"})))},Q=function(){return h.default.createElement("span",{className:R.default.icon},h.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 64 64"},h.default.createElement("path",{fill:"#FFF",d:"M6.525 43.936a29.596 29.596 0 0 1-3.039-13.075C3.494 14.568 16.755 1.313 33.05 1.313c7.904.004 15.328 3.082 20.91 8.666 5.581 5.586 8.653 13.01 8.65 20.907-.007 16.294-13.266 29.549-29.558 29.549a29.648 29.648 0 0 1-12.508-2.771L1.391 62.687l5.134-18.751z"}),h.default.createElement("path",{fill:"#123033",d:"M50.801 13.135c-4.739-4.742-11.039-7.354-17.752-7.357-13.837 0-25.094 11.253-25.099 25.085a25.039 25.039 0 0 0 3.349 12.541l-3.56 12.999 13.304-3.488a25.084 25.084 0 0 0 11.996 3.054h.011c13.83 0 25.088-11.256 25.095-25.087.002-6.703-2.607-13.005-7.344-17.747zM33.05 51.733h-.008a20.866 20.866 0 0 1-10.62-2.906l-.762-.452-7.894 2.07 2.108-7.694-.497-.789a20.802 20.802 0 0 1-3.189-11.097c.004-11.496 9.361-20.85 20.87-20.85a20.73 20.73 0 0 1 14.746 6.115 20.733 20.733 0 0 1 6.104 14.752c-.006 11.497-9.363 20.851-20.858 20.851z"}),h.default.createElement("path",{fill:"#123033",d:"M25.429 19.26a8.65 8.65 0 0 0-1.028.011 2.352 2.352 0 0 0-.95.255c-.221.114-.427.277-.75.582-.305.288-.481.54-.668.782a6.974 6.974 0 0 0-1.443 4.291l.001.003a8.243 8.243 0 0 0 .844 3.607c1.043 2.307 2.763 4.746 5.035 7.008a24.676 24.676 0 0 0 1.657 1.6 24.145 24.145 0 0 0 9.814 5.229s.751.179 1.391.218c.021.001.04.003.061.003a9.207 9.207 0 0 0 1.422-.033 5.086 5.086 0 0 0 2.129-.59c.423-.225.623-.337.978-.561 0 0 .11-.072.319-.23.345-.257.558-.438.845-.736.211-.22.394-.479.534-.772.2-.417.401-1.213.481-1.874.061-.505.042-.781.036-.952-.011-.275-.238-.558-.487-.678l-1.486-.668s-2.222-.967-3.581-1.587a1.278 1.278 0 0 0-.452-.104c-.341-.021-.723.068-.966.324v-.004c-.013-.001-.182.145-2.031 2.385-.102.122-.341.387-.754.362a1.086 1.086 0 0 1-.185-.029 3.402 3.402 0 0 1-.49-.17c-.316-.134-.427-.185-.643-.278l-.013-.006a15.361 15.361 0 0 1-4.013-2.556 15.88 15.88 0 0 1-.927-.885c-1.074-1.041-1.953-2.148-2.607-3.24-.035-.06-.09-.146-.15-.242-.107-.174-.225-.381-.262-.523-.095-.376.157-.678.157-.678s.622-.68.911-1.05c.278-.356.518-.704.671-.952.301-.484.39-.982.238-1.37a216.767 216.767 0 0 0-2.219-5.215c-.156-.339-.598-.589-1.005-.636a6.284 6.284 0 0 0-.414-.041"})))}},74086:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67154)),o=a(n(6479)),s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=a(n(94184)),f=r(n(67294)),p=a(n(96153)),h=a(n(19912)),_=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._setRefResizeObserver=function(t){e._refResizeObserver=t,e.props.onRef&&e.props.onRef(t)},e._handleResize=function(t,n){e._refResizeObserver&&(null!=e._prevDimensions&&e._prevDimensions.width===t&&e._prevDimensions.height===n||(e._prevDimensions={height:n,width:t},e.props.onResize({height:n,width:t})))},e}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=(e.onResize,e.onRef,(0,o.default)(e,["children","className","onResize","onRef"]));return f.default.createElement("div",(0,i.default)({className:(0,d.default)(p.default.container,n),ref:this._setRefResizeObserver},r),t,f.default.createElement(h.default,{onResize:this._handleResize}))}}]),n}(f.PureComponent);t.default=_,_.displayName="ResizeObserver"},19912:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ResizeSensor=void 0;var i,o,s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=a(n(43269)),f=r(n(67294)),p=a(n(91033)),h=a(n(98850));function _(){return null==i&&(i=new p.default((function(e){var t,n=(0,d.default)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.contentRect,i=a.width,o=a.height,s=v().get(r.target);null!=s&&s(i,o)}}catch(e){n.e(e)}finally{n.f()}}))),i}function v(){return null==o&&(o=new WeakMap),o}var m=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._resizeObserver=_(),e._observerMap=v(),e._handleDiv=function(t){var n=e._sensorEl;t!==n&&null!=n&&(e._resizeObserver.unobserve(n),e._observerMap.delete(n)),e._sensorEl=t,null!=t&&(e._observerMap.set(t,e._handleResize),e._resizeObserver.observe(t))},e._handleResize=function(t,n){e.props.onResize(t,n)},e}return(0,u.default)(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return f.default.createElement("div",{ref:this._handleDiv,className:h.default.sensor})}}]),n}(f.Component);t.ResizeSensor=m,m.displayName="ResizeSensor";var g=m;t.default=g},34748:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pluginContext=function(){return Symbol("rte-plugin")},t.default=void 0;var a=r(n(34575)),i=r(n(93913));var o=function(){function e(){(0,a.default)(this,e),this._internalHandlers=new Map}return(0,i.default)(e,[{key:"initialize",value:function(e){this.ctx=e}},{key:"registerHandler",value:function(e,t,n){var r=this._internalHandlers.get(t)||new Map;r.set(e,n),this._internalHandlers.set(t,r)}},{key:"unregisterHandler",value:function(e,t){var n=this._internalHandlers.get(t);n&&(n.delete(e),n.size||this._internalHandlers.delete(t))}},{key:"handle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this._internalHandlers.get(e);return!!n&&s(n).some((function(e){return e.apply(null,t)}))}}]),e}();function s(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}t.default=o},14360:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,n=new u.default,r=(0,d.default)([l.default,n,f.default]);return t=e=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return n}(r),e.EmojiSuggestions=(0,p.default)(c.default,{plugin:n}),t};var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=a(n(64036)),l=a(n(35189)),c=a(n(6067)),d=r(n(58590)),f=a(n(57126)),p=a(n(99360))},72386:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(33079)),d=a(n(41769)),f=a(n(37349)),p=n(12518),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.unicode,r=e.action,a=e.children;return l.default.createElement("div",{className:f.default.gridContainer},l.default.createElement("span",{className:f.default.baseEmoji},l.default.createElement(c.default,{type:"emoji-grid",key:"base",a8n:"mi-emoji-variant",action:function(e){return r(e,n,t)}},l.default.createElement(d.default,{text:t,formatters:p.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))),l.default.createElement("div",{className:f.default.options},a))}}]),n}(l.Component);t.default=h,h.displayName="GridPicker"},91445:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.reduce((function(e,t){var n=t.handlers;return n?(Object.keys(n).forEach((function(r){e[r]||(e[r]=[]);var a=n[r];null!=a&&e[r].push([t,a])})),e):e}),{});return Object.keys(n).reduce((function(e,r){var i=n[r];return e[r]=function(e,t){return function(n){e.some((function(e){var r=(0,a.default)(e,2),i=r[0],o=r[1].call(i,n,t);return!!n.defaultPrevented||!0===o&&(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!0)}))}}(i,t),e}),{})};var a=r(n(63038))},34249:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.reduce((function(e,t){var n=t.hooks;return n?(Object.keys(n).forEach((function(r){e[r]||(e[r]=[]),e[r].push([t,n[r]])})),e):e}),{});return Object.keys(n).reduce((function(e,r){return e[r]=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.forEach((function(e){var n=(0,a.default)(e,2),i=n[0],o=n[1];return o.call.apply(o,[i].concat(r,[t]))}))}}(n[r],t),e}),{})};var a=r(n(63038))},68851:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.reduce((function(e,t){var n=t.hotkeys;return n?(Object.keys(n).forEach((function(r){e[r]||(e[r]=[]),e[r].push([t,n[r]])})),e):e}),{});return Object.keys(n).reduce((function(e,r){return e[r]=function(e,t){return function(n){e.some((function(e){var r=(0,a.default)(e,2),i=r[0],o=r[1].call(i,n,t);return!!n.defaultPrevented||!0===o&&(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!0)}))}}(n[r],t),e}),{})};var a=r(n(63038))},99220:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=window.getSelection();if(!n||!n.rangeCount)return null;var r=n.getRangeAt(0);if(!r.collapsed)return null;var i=r.startContainer,o=r.startOffset;if(i===e){var s=i.childNodes,u=s.length;if(t===a.FORWARD&&o>u||t===a.BACKWARD&&!o)return null;var l=t===a.BACKWARD?1:0,c=s[o-l];return c instanceof Element?c:null}var d=i.length===o;if(t===a.BACKWARD&&o)return null;if(t===a.FORWARD&&!d)return null;var f=t===a.BACKWARD?"previousSibling":"nextSibling",p=i[f];return p instanceof Element?p:null},t.Direction=void 0;var a=(0,r(n(27259)).default)({FORWARD:void 0,BACKWARD:void 0});t.Direction=a},21361:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.metaKey||e.shiftKey||e.altKey||e.ctrlKey}},42215:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(1!==t.rangeCount)return;if(!t.getRangeAt(0).collapsed)return;var r=t.anchorNode,l=t.anchorOffset;if(r&&r===e.refInput){if(-1===(l-=1))return;r=r.childNodes[l],l=r.textContent.length}r=(0,s.default)(r)?u(r):r,(0,a.default)(r,(function(e){var t=u(e);return t?[t]:[]}),(function(e){var t,a;if((0,o.isEmojiEl)(e))return t=i.default.fromNode(e,!0).toPlainString(),n(t,0,t);var s=(a=e===r?e.textContent.slice(0,l):e.textContent).lastIndexOf("\n"),u=s>=0;u&&(a=a.slice(s+1));for(var c=a.length-1;c>=0;c--)if(t=a.charAt(c),n(t,c,a))return!0;return!!u||void 0}))};var a=r(n(36183)),i=r(n(74362)),o=n(35189),s=r(n(40869));function u(e){var t=e;do{if((t=t&&t.previousSibling)&&t.nodeType!==Node.TEXT_NODE&&!(0,o.isEmojiEl)(t))return null}while(t&&(0,s.default)(t));return t}},74314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t;for(;n>0;)e.modify("extend","backward","character"),n--}},76588:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=[],r=e.cloneNode(!0).firstChild;for(;r;){switch(r.nodeType){case s:var a=o(r,t);if(a){n.push(a(r));break}switch(r.tagName){case"P":case"BR":case"PRE":n.push("\n");break;case"DIV":r.firstChild&&3!==r.firstChild.nodeType||n.push("\n")}break;case u:n.push(r.nodeValue)}if(r.hasChildNodes())r=r.firstChild;else{for(;r&&!r.nextSibling;)if((r=r.parentNode)===e){r=null;break}r&&(r=r.nextSibling)}}return n.join("")};var a=r(n(63038));function i(e,t){return e.msMatchesSelector?e.msMatchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.matches(t)}function o(e,t){for(var n=0;n<t.length;++n){var r=t[n].serializers;if(r)for(var o=0;o<r.length;++o){var s=(0,a.default)(r[o],2),u=s[0],l=s[1];if(i(e,u))return l}}return null}var s=1,u=3},4315:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(76588)),i=function(e,t){t.focusNode||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("serializeTextBeforeCursor requires selection.focusNode"));var n=document.createRange();n.setStart(e,0),n.setEnd(t.focusNode,t.focusOffset);var r=n.cloneContents();return(0,a.default)(r,[])};t.default=i},47973:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.reduce((function(e,t){var n=t.parsers;return n?n.reduce((function(e,t){return t(e)}),e):e}),a.default.escape(e))};var a=r(n(96486))},99360:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67154)),i=r(n(67294)),o=function(e,t){var n,r;function o(n){return i.default.createElement(e,(0,a.default)({},n,t))}return o.displayName=`Wrapper(${null!==(n=null!==(r=e.displayName)&&void 0!==r?r:e.name)&&void 0!==n?n:"Component"})`,o};t.default=o},29470:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r(n(27259)).default)({CHANGE:void 0,MOUNT:void 0,INPUT:void 0});t.default=a},89642:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINIMUM_LOADING_TIME=t.convertTabToMood=t.StickerTabs=t.ValidMoods=t.INPUT_SHOW_POINT=t.INPUT_HIDE_POINT=t.INPUT_BAR_SCROLL_FAST=t.INPUT_BAR_SCROLL_SENSITIVITY=t.INPUT_BAR_TOTAL_HEIGHT=t.SCROLL_THROTTLE_TIME=t.SCROLL_CLICK_TIME_GAP=void 0;t.SCROLL_CLICK_TIME_GAP=1e3;t.SCROLL_THROTTLE_TIME=100;t.INPUT_BAR_TOTAL_HEIGHT=63;t.INPUT_BAR_SCROLL_SENSITIVITY=5;t.INPUT_BAR_SCROLL_FAST=15;t.INPUT_HIDE_POINT=44.099999999999994;t.INPUT_SHOW_POINT=94.5;var r=n(54302).Mirrored(["LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.ValidMoods=r;var a=n(54302).Mirrored(["RECENTS","LOVE","GREETINGS","HAPPY","SAD","ANGRY","CELEBRATE"]);t.StickerTabs=a;t.convertTabToMood=function(e){var t=e;return r.isValid(t)?r.cast(t):null};t.MINIMUM_LOADING_TIME=1500},547:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(52555)),i=(0,r(n(27259)).default)(a.default);t.default=i},38914:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=t.EMOJI_HEIGHT=t.SIDE_MARGIN=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(34541)),d=n(75300),f=a(n(8513)),p=a(n(40167)),h=a(n(30240)),_=a(n(75385)),v=a(n(31722)),m=a(n(76568)),g=a(n(68390)),y=a(n(62740)),E=a(n(4268)),S=a(n(29358)),b=parseInt(h.default["-side-margin"],10);t.SIDE_MARGIN=b;var T=parseInt(h.default["-emoji-height"],10);t.EMOJI_HEIGHT=T;var w=parseInt(h.default["-emoji-width"],10);t.EMOJI_WIDTH=w;var A=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={skinTonePicker:null},e._lastFocusedElement=null,e._closeSkinTonePicker=function(){var t=e.state.skinTonePicker&&e.state.skinTonePicker.anchor;t&&t instanceof HTMLElement&&e._focusElement(t),e.setState({skinTonePicker:null})},e._setEmojiVariant=function(t,n,r){O(t),_.default.setVariant(n,r),e._handleEmoji(n)},e._clearPickerTimer=function(){e._pickerTimer&&clearTimeout(e._pickerTimer)},e._showContextMenu=function(t,n,r){var a=f.default.getSkinToneBase(t);a&&e.setState({skinTonePicker:{menu:l.default.createElement(y.default,{base:a,action:e._setEmojiVariant,unicode:t}),anchor:n,type:"picker",dirX:d.DirX.RIGHT,dirY:d.DirY.TOP,horizontal:!0,autoFocus:r,findFirstItem:!0}})},e._handleEmoji=function(t){var n=t;if(f.default.getSkinToneBase(n)){var r=_.default.getVariantIfExists(n);if(null!=r)n=r;else if(e.props.allowVariantPrompt)return!0}e.props.onEmoji(n)},e._handleEmojiArrowDown=function(t){O(t);var n=M(t);null!=n&&e.props.focusBelow&&e.props.focusBelow(n)},e._handleEmojiArrowLeft=function(t){O(t);var n=M(t);if(null!=n){var r=n-1;r<0?e.props.focusAbove(e.props.numColumns-1):e.focusEmojiAt(r)}},e._handleEmojiArrowRight=function(t){O(t);var n=M(t);if(null!=n){var r=n+1;r>=e.props.emojis.length?e.props.focusBelow&&e.props.focusBelow(0):e.focusEmojiAt(r)}},e._handleEmojiArrowUp=function(t){O(t);var n=M(t);null!=n&&e.props.focusAbove(n)},e._handleEmojiEnter=function(t){O(t);var n=M(t);e._selectEmojiAt(n)},e._handleClick=function(t){O(t);var n=M(t);e._selectEmojiAt(n)},e._handleContextMenu=function(t){O(t);var n=e._getEmojiUnicode(t);n&&t.target instanceof HTMLElement&&e._showContextMenu(n,t.target)},e._handleMouseDown=function(t){O(t),e.state.skinTonePicker&&e.setState({skinTonePicker:null});var n=t.target;if(n instanceof HTMLElement){var r=e._getEmojiUnicode(t);r&&e._startPickerTimer(r,n)}},e._setRefEmojis=function(t){e._refEmojis=t},e}return(0,o.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.emojis!==e.emojis||this.state.skinTonePicker!==t.skinTonePicker}},{key:"componentDidMount",value:function(){var e=this;this.props.listeners.add(_.default,"add remove change:variant",(function(){return e.forceUpdate()}))}},{key:"componentDidUpdate",value:function(e,t){t.skinTonePicker&&this.state.skinTonePicker&&this._closeSkinTonePicker()}},{key:"focusEmojiAt",value:function(e){var t=this._getRefEmojiAt(e);t&&this._focusElement(t)}},{key:"selectFirstEmoji",value:function(){this._selectEmojiAt(0)}},{key:"restoreFocus",value:function(){this._lastFocusedElement&&this._focusElement(this._lastFocusedElement)}},{key:"_focusElement",value:function(e){var t=parseInt(e.dataset.emojiIndex,10);isNaN(t)||(v.default.focus(e,{preventScroll:!0}),this.props.onEmojiFocus(e),this._lastFocusedElement=e)}},{key:"_selectEmojiAt",value:function(e){if(null!=e){var t=this.props.emojis[e];if(t){var n=this._getRefEmojiAt(e);if(n)this._clearPickerTimer(),this._handleEmoji(t)&&this._showContextMenu(t,n,!0)}}}},{key:"_getEmojiUnicode",value:function(e){var t=M(e);if(null!=t){var n=this.props.emojis[t];return n||null}}},{key:"_getRefEmojiAt",value:function(e){var t=this.props.emojis.length-1,n=Math.max(Math.min(e,t),0);if(null!=this._refEmojis)return this._refEmojis.children[n]}},{key:"_startPickerTimer",value:function(e,t){var n=this;this._clearPickerTimer(),this._pickerTimer=setTimeout((function(){delete n._pickerTimer,n.props.listeners.addOnce(c.default,"window_click",O),n._showContextMenu(e,t)}),250),this.props.listeners.addOnce(window,"mouseup",this._clearPickerTimer,!0)}},{key:"render",value:function(){var e;this.state.skinTonePicker&&(e=l.default.createElement(E.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker,requestRecentFocusOnUnmount:!1},l.default.createElement(S.default,{tooltip:this.state.skinTonePicker})));var t=this.props.emojis;return t.length?l.default.createElement("div",{className:h.default.panel},l.default.createElement(m.default,{onMouseDown:this._handleMouseDown,onClick:this._handleClick,onContextMenu:this._handleContextMenu,handlers:{up:this._handleEmojiArrowUp,down:this._handleEmojiArrowDown,left:this._handleEmojiArrowLeft,right:this._handleEmojiArrowRight,enter:this._handleEmojiEnter,space:this._handleEmojiEnter}},l.default.createElement("div",{ref:this._setRefEmojis,className:h.default.section},t.map((function(e,t){var n=_.default.getVariantIfExists(e);return l.default.createElement(p.default,{element:"span",emoji:n||e,size:"large",key:e,tabIndex:"-1","data-emoji-index":t})})))),e):null}}]),n}(l.Component);A.displayName="EmojiRow";var C=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"focusEmojiAt",value:function(e){this.getComponent().focusEmojiAt(e)}},{key:"selectFirstEmoji",value:function(){this.getComponent().selectFirstEmoji()}},{key:"restoreFocus",value:function(){this.getComponent().restoreFocus()}}]),n}((0,g.default)(A));function O(e){e.preventDefault(),e.stopPropagation()}function M(e){if(!(e.target instanceof HTMLElement))return null;var t=parseInt(e.target.dataset.emojiIndex,10);return isNaN(t)?null:t}t.default=C},10931:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(59713)),s=i(n(34575)),u=i(n(93913)),l=i(n(2205)),c=i(n(99842)),d=i(n(94184)),f=i(n(96486)),p=a(n(67294)),h=i(n(8513)),_=i(n(14160)),v=i(n(63494)),m=i(n(76568)),g=i(n(98483)),y=i(n(89115)),E=i(n(73666)),S=i(n(25506)),b=i(n(47169)),T=a(n(50562)),w=i(n(38512)),A=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._fastScroll=!1,e._scrollFromAnimation=!1,e._scrollFromFocus=!1,e._lastScrollTop=e.props.displayCache.scrollTop,e._lastSectionId=e.props.displayCache.sectionId,e.state={scrolledToTop:0===e.props.displayCache.scrollTop,searchText:e.props.defaultSearchText||"",showSearchInput:e.props.displayCache.showSearchInput},e._handleEmojiFocus=function(t,n){e._scrollFromFocus=!0,e._scrollFromFocusHandlerTimeoutID&&clearTimeout(e._scrollFromFocusHandlerTimeoutID),e._scrollFromFocusHandlerTimeoutID=setTimeout((function(){e._scrollFromFocus=!1}),200);var r=n.scrollTop,a=t.getBoundingClientRect().top-n.getBoundingClientRect().top+r,i=a-n.clientHeight+t.clientHeight+2,o=e.state.showSearchInput?a-T.TOTAL_SEARCH_HEIGHT:a-2;n.scrollTop=f.default.clamp(r,i,o)},e._handleListFocusAbove=function(){e._focusSearchAndScrollToTop()},e._handleListScroll=function(t){var n=t-e._lastScrollTop;if(e._lastScrollTop=t,!e._scrollFromFocus&&!e._scrollFromAnimation&&!e._checkScrollTop()){var r=Math.abs(n);e._fastScroll=r>15;var a=n>=0?1:-1,i=0===t;t<T.TOTAL_SEARCH_HEIGHT?e.setState({scrolledToTop:i,showSearchInput:!0}):r<5||(e.state.showSearchInput?1===a&&e.setState({scrolledToTop:i,showSearchInput:!1}):-1===a&&e.setState({scrolledToTop:i,showSearchInput:!0}))}},e._handleListSection=function(t){e._scrollFromAnimation||(e._lastSectionId=t,e.props.onSection(t))},e._handleSearchResultsFocusAbove=function(){e._focusSearchAndScrollToTop()},e._handleSearchChange=function(t,n){e.props.onChange&&e.props.onChange(t,n),e.setState({searchText:t})},e._handleScrollListFocusUp=function(){e._focusSearchAndScrollToTop()},e._handleSearchDownKey=function(){if(e.state.searchText){if(!e._refSearchResults)return;e._refSearchResults.focusFirstVisibleEmoji()}else e._refScrollList&&e._refScrollList.focusFirstVisibleEmoji(T.TOTAL_SEARCH_HEIGHT)},e._handleSearchEnterKey=function(){e.state.searchText&&e._refSearchResults&&e._refSearchResults.selectFirstVisibleEmoji()},e._handleShiftTabKey=function(t){if(t.preventDefault(),t.stopPropagation(),e._refSearchInput)return e._refSearchInput.hasFocus()?void e.props.onFocusPrev():e.focusSearchInput()},e._handleTabKey=function(t){if(t.preventDefault(),t.stopPropagation(),e._refSearchInput)return e._refSearchInput.hasFocus()?void e.props.onFocusNext():e.focusSearchInput()},e._setRefSearchInput=function(t){e._refSearchInput=t},e._setRefScrollList=function(t){e._refScrollList=t},e._setRefSearchResults=function(t){e._refSearchResults=t},e._getSectionListDataMemoized=(0,E.default)((function(e){return e.sectionIds.map((function(e){return{sectionId:e,emojis:"RECENT"===e?C():h.default.getEmojisInCategory(e)}}))}),(function(e,t){return e.sectionIds===t.sectionIds||f.default.isEqual(e.sectionIds,t.sectionIds)})),e._getSearchResultsDataMemoized=(0,E.default)((function(e){var t=e.searchText;return[{sectionId:v.default.SEARCH_RESULT,emojis:(0,_.default)(f.default.trimEnd(t))}]})),e}return(0,u.default)(n,[{key:"componentWillUnmount",value:function(){this.props.onDisplayCache&&this.props.onDisplayCache({scrollTop:this._lastScrollTop,sectionId:this._lastSectionId,showSearchInput:this.state.showSearchInput})}},{key:"focusSearchInput",value:function(e){var t=this;if(!this._refSearchInput)return this._fastScroll=!0,void this.setState({showSearchInput:!0},(function(){return t.focusSearchInput(!0)}));this._refSearchInput.focus(e)}},{key:"scrollToSection",value:function(e){var t=this;return this._lastSectionId=e,new r((function(e){t._fastScroll=!0,t.setState({searchText:"",showSearchInput:!0},e)})).then((function(){t._scrollFromAnimation=!0;var n=t._refScrollList?t._refScrollList.scrollToSection(e,0-T.TOTAL_SEARCH_HEIGHT):r.resolve();return n.finally((function(){n===t._animationPromise&&(t._scrollFromAnimation=!1,t._checkScrollTop()||t.state.showSearchInput&&t.setState({scrolledToTop:0===t._lastScrollTop}))})),t._animationPromise=n,n}))}},{key:"_checkScrollTop",value:function(){var e=0===this._lastScrollTop;return e&&this.setState({scrolledToTop:e,showSearchInput:!0}),e}},{key:"_focusSearchAndScrollToTop",value:function(){var e=this;this._scrollFromFocus=!0,this._scrollFromFocusHandlerTimeoutID&&clearTimeout(this._scrollFromFocusHandlerTimeoutID),this._scrollFromFocusHandlerTimeoutID=setTimeout((function(){e._scrollFromFocus=!1}),200),this.focusSearchInput(),this._refScrollList&&this._refScrollList.scrollToTop()}},{key:"_stopEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){return p.default.createElement(m.default,{handlers:{tab:this._handleTabKey,"shift+tab":this._handleShiftTabKey}},p.default.createElement("div",{className:g.default.bodyContainer},this._renderSearchInput(),this._renderSearchResults(),p.default.createElement("div",{className:(0,d.default)(g.default.list,(0,o.default)({},g.default.hidden,!!this.state.searchText))},p.default.createElement(T.default,{data:this._getSectionListData(),width:this.props.width,onFocusUp:this._handleScrollListFocusUp,initialScrollTop:this.props.displayCache.scrollTop,searchInputVisible:this.state.showSearchInput,focusAbove:this._handleListFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,onScroll:this._handleListScroll,onSection:this._handleListSection,ref:this._setRefScrollList,showTitles:!0}))))}},{key:"_renderSearchInput",value:function(){var e=null;this.state.showSearchInput&&(e=p.default.createElement(b.default,{label:y.default.t(1330),onChange:this._handleSearchChange,onUpKey:this.props.onFocusUp,onDownKey:this._handleSearchDownKey,onEnterKey:this._handleSearchEnterKey,ref:this._setRefSearchInput,shadow:!this.state.scrolledToTop,value:this.state.searchText||""}));var t=this._fastScroll?"emoji-search-slide-away-fast":"emoji-search-slide-away";return p.default.createElement(w.default,{transitionName:t,className:g.default.search},e)}},{key:"_renderSearchResults",value:function(){return this.state.searchText?p.default.createElement("div",{className:g.default.list},p.default.createElement(T.default,{data:this._getSearchResultsData(),width:this.props.width,initialScrollTop:0,searchInputVisible:!0,focusAbove:this._handleSearchResultsFocusAbove,onEmoji:this.props.onEmoji,onEmojiFocus:this._handleEmojiFocus,ref:this._setRefSearchResults,showTitles:!1})):null}},{key:"_getSectionListData",value:function(){return this._getSectionListDataMemoized({sectionIds:this.props.sectionIds})}},{key:"_getSearchResultsData",value:function(){var e=(this.state.searchText||"").replace(/^\s+/,"");return this._getSearchResultsDataMemoized({searchText:e})}}]),n}(p.PureComponent);function C(){return f.default.uniq(S.default.reduce((function(e,t){var n=h.default.getSkinToneBase(t.id)||t.id;return null!=h.default.getGlyphId(n)&&e.push(n),e}),[]))}t.default=A,A.displayName="EmojiPanelContent"},50562:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.findEmojiRowAt=k,t.getNumColumns=P,t.default=t.TOTAL_SEARCH_HEIGHT=void 0;var o,s=a(n(34575)),u=a(n(93913)),l=a(n(2205)),c=a(n(99842)),d=a(n(59713)),f=n(53615),p=a(n(96486)),h=i(n(67294)),_=a(n(547)),v=i(n(38914)),m=a(n(63494)),g=a(n(60482)),y=a(n(55959)),E=a(n(50842)),S=a(n(89115)),b=a(n(73666)),T=a(n(80325)),w=a(n(77478)),A=parseInt(T.default["-total-search-height"],10);t.TOTAL_SEARCH_HEIGHT=A;var C,O=parseInt(T.default["-title-height"],10),M=(o={},(0,d.default)(o,m.default.SEARCH_RESULT,(function(){throw new Error("Search results should not be shown with a title.")})),(0,d.default)(o,m.default.RECENT,(function(){return S.default.t(1224)})),(0,d.default)(o,_.default.SMILEYS_PEOPLE,(function(){return S.default.t(652)})),(0,d.default)(o,_.default.ANIMALS_NATURE,(function(){return S.default.t(648)})),(0,d.default)(o,_.default.FOOD_DRINK,(function(){return S.default.t(650)})),(0,d.default)(o,_.default.ACTIVITY,(function(){return S.default.t(647)})),(0,d.default)(o,_.default.TRAVEL_PLACES,(function(){return S.default.t(654)})),(0,d.default)(o,_.default.OBJECTS,(function(){return S.default.t(651)})),(0,d.default)(o,_.default.SYMBOLS,(function(){return S.default.t(653)})),(0,d.default)(o,_.default.FLAGS,(function(){return S.default.t(649)})),o);C=parseInt(T.default["-scrollbar-width"].replace(/px$/,""),10);var I=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(e){var r;return(0,s.default)(this,n),(r=t.call(this,e))._rowComponents=new Map,r._flatListController=new E.default,r._renderBlanks=!1,r._getRowsAndSectionDataMemoized=(0,b.default)((function(e){var t=e.numColumns,n=e.data,r=e.showTitles,a=A,i={},o=[];return n.forEach((function(e,s){var u=e.sectionId,l=e.emojis,c=0,d=a;if(0!==l.length){r&&(o.push({kind:"title",itemKey:`section_${u}_title`,index:o.length,title:M[u](),sectionId:u,height:O,offsetTop:a}),c+=O,a+=O);var f=p.default.chunk(l,t),h=s===n.length-1;f.forEach((function(e,t){var n=t===f.length-1&&!h?v.EMOJI_HEIGHT+parseInt(T.default["-section-bottom-margin"],10):v.EMOJI_HEIGHT;o.push({kind:"emojis",itemKey:`section_${u}_emoji_${t}`,index:o.length,emojis:e,sectionId:u,height:n,offsetTop:a}),c+=n,a+=n})),i[u]={height:c,offsetTop:d}}})),{rows:o,sectionData:i}})),r._handleEmojiFocus=function(e){var t=r._refScrollContainer;t&&r.props.onEmojiFocus(e,t)},r._handleScroll=function(){r._animationFrameID||(r._animationFrameID=requestAnimationFrame(r._handleScrollOnAnimationFrame))},r._handleScrollOnAnimationFrame=function(){if(delete r._animationFrameID,r._refScrollContainer){var e=r._refScrollContainer.scrollTop;r.props.onScroll&&r.props.onScroll(e);var t=r._getSectionIdFromScrollTop(e);t&&r.props.onSection&&r.props.onSection(t)}},r._setRefScrollContainer=function(e){r._refScrollContainer=e},r._renderRow=function(e){switch(e.kind){case"title":return h.default.createElement("div",{className:T.default.title},e.title);case"emojis":return h.default.createElement(v.default,{emojis:e.emojis,focusAbove:function(t){var n,a;1===e.index&&(null===(n=(a=r.props).onFocusUp)||void 0===n||n.call(a)),r._focusEmojiAt(e.index,-1,t)},focusBelow:function(t){r._focusEmojiAt(e.index,1,t)},numColumns:r._getNumColumns(),onEmoji:r.props.onEmoji,onEmojiFocus:r._handleEmojiFocus,ref:function(t){t?r._rowComponents.set(e.itemKey,t):r._rowComponents.delete(e.itemKey)},allowVariantPrompt:e.sectionId!==m.default.RECENT});default:throw e.kind,new Error(`Invalid row kind: ${e.kind}`)}},r._getRowsAndSectionData(),r}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this._refScrollContainer&&this._refScrollContainer.scrollTop!==this.props.initialScrollTop&&(this._refScrollContainer.scrollTop=this.props.initialScrollTop)}},{key:"focusFirstVisibleEmoji",value:function(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.focusEmojiAt(0)}},{key:"scrollToSection",value:function(e,t){var n=this,a=this._refScrollContainer;if(!a)return r.resolve();var i=this._getRowsAndSectionData().sectionData[e];if(!i)return r.resolve();var o=i.offsetTop;if(a.scrollTop===o)return r.resolve();if(this._activeAnimation){if(this._activeAnimation.sectionId===e)return this._activeAnimation.promise;(0,w.default)(this._activeAnimation.scrollTarget,"stop"),this._activeAnimation&&this._activeAnimation.promise.cancel()}if(a.scrollTop===o)return r.resolve();var s=document.createElement("div");s.style.position="absolute",s.style.top=`${o+(t||0)}px`,s.style.left="0px",a.appendChild(s);var u=(0,w.default)(s,"scroll",{container:a,duration:300,easing:[.99,.13,.13,.99]}).then((function(){})).then((function(){return(0,f.delayMs)(100)}));return this._activeAnimation={promise:u,sectionId:e,scrollTarget:s},u.finally((function(){a.removeChild(s),n._activeAnimation&&n._activeAnimation.promise===u&&delete n._activeAnimation})),u}},{key:"scrollToTop",value:function(){this._refScrollContainer&&(this._refScrollContainer.scrollTop=0)}},{key:"selectFirstVisibleEmoji",value:function(e){var t=this._getFirstVisibleEmojiRowComponent(e||0);t&&t.selectFirstEmoji()}},{key:"_getCurrentSearchInputHeight",value:function(){return this.props.searchInputVisible?A:0}},{key:"_getNumColumns",value:function(){return P(this.props.width)}},{key:"_getRowsAndSectionData",value:function(){return this._getRowsAndSectionDataMemoized({numColumns:this._getNumColumns(),data:this.props.data,showTitles:this.props.showTitles})}},{key:"_getFirstVisibleEmojiRowComponent",value:function(e){if(this._refScrollContainer){var t=this._refScrollContainer.scrollTop+e,n=this._getEmojiRowFromScrollTop(t);if(n)return this._rowComponents.get(n.itemKey)}}},{key:"_getEmojiRowFromScrollTop",value:function(e){return this._getRowsAndSectionData().rows.map((function(e){return"emojis"===e.kind?e:null})).filter(Boolean).find((function(t){return t.offsetTop+t.height>e}))}},{key:"_getSectionIdFromScrollTop",value:function(e){var t=this._getEmojiRowFromScrollTop(e+this._getCurrentSearchInputHeight());if(t)return t.sectionId}},{key:"_focusEmojiAt",value:function(e,t,n){var r=k(this._getRowsAndSectionData().rows,e,t);if(r){var a=this._rowComponents.get(r.itemKey);a&&a.focusEmojiAt(n)}}},{key:"render",value:function(){var e,t=this._getRowsAndSectionData().rows,n=Math.min(t.length,2);return(this.props.onScroll||this.props.onSection)&&(e=this._handleScroll),h.default.createElement(y.default,{onScroll:e,className:T.default.container,onRef:this._setRefScrollContainer,flatListControllers:[this._flatListController]},h.default.createElement(g.default,{data:t,reorderAnimationsEnabled:!1,forceConsistentRenderCount:!1,flatListController:this._flatListController,direction:"vertical",extraItems:n,initialScrollFromStart:this.props.initialScrollTop,renderItem:this._renderRow}))}}]),n}(h.PureComponent);function k(e,t,n){for(var r=n<0?-1:1,a=t+n;a>=0&&a<e.length;){var i=e[a];if("emojis"===i.kind)return i;a+=r}}function P(e){var t=e-2*v.SIDE_MARGIN-C;return Math.floor(t/v.EMOJI_WIDTH)}t.default=I,I.displayName="EmojiSectionScrollList"},72982:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o.default.createElement(u.default,{name:l[e.sectionId]})},t.sectionIdToIcon=void 0;var a,i=r(n(59713)),o=r(n(67294)),s=r(n(63494)),u=r(n(75131)),l=(a={},(0,i.default)(a,s.default.RECENT,"panel-recent"),(0,i.default)(a,s.default.SMILEYS_PEOPLE,"panel-emoji-people"),(0,i.default)(a,s.default.ANIMALS_NATURE,"panel-emoji-nature"),(0,i.default)(a,s.default.FOOD_DRINK,"panel-emoji-food"),(0,i.default)(a,s.default.ACTIVITY,"panel-emoji-activity"),(0,i.default)(a,s.default.TRAVEL_PLACES,"panel-emoji-travel"),(0,i.default)(a,s.default.OBJECTS,"panel-emoji-objects"),(0,i.default)(a,s.default.SYMBOLS,"panel-emoji-symbols"),(0,i.default)(a,s.default.FLAGS,"panel-emoji-flags"),a);t.sectionIdToIcon=l},91461:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=r(n(67294)),d=a(n(63494)),f=a(n(89115)),p=a(n(72982)),h=r(n(15618)),_=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._handleClick=function(t){e.props.onClick(e.props.sectionId,t)},e}return(0,s.default)(n,[{key:"render",value:function(){var e,t=(e={},(0,i.default)(e,d.default.RECENT,f.default.t(1224)),(0,i.default)(e,d.default.SMILEYS_PEOPLE,f.default.t(652)),(0,i.default)(e,d.default.ANIMALS_NATURE,f.default.t(648)),(0,i.default)(e,d.default.FOOD_DRINK,f.default.t(650)),(0,i.default)(e,d.default.ACTIVITY,f.default.t(647)),(0,i.default)(e,d.default.TRAVEL_PLACES,f.default.t(654)),(0,i.default)(e,d.default.OBJECTS,f.default.t(651)),(0,i.default)(e,d.default.SYMBOLS,f.default.t(653)),(0,i.default)(e,d.default.FLAGS,f.default.t(649)),e),n=this.props.sectionId,r=t[n];return c.default.createElement(h.default,{onClick:this.props.onClick,sectionId:this.props.sectionId,selected:this.props.selected,showFocusIndicator:this.props.showFocusIndicator,theme:h.THEMES.MENU,title:r,onRef:this.props.onRef},c.default.createElement(p.default,{sectionId:n}))}}]),n}(c.PureComponent);t.default=_,_.displayName="EmojiSectionTab"},63494:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERED_TAB_SECTION_IDS=t.default=void 0;var a,i=r(n(319)),o=r(n(59713)),s=r(n(81109)),u=r(n(34263)).default.EMOJI,l=u.CATEGORIES,c=u.ORDERED_CATEGORY_IDS,d=(0,s.default)((0,s.default)({RECENT:"RECENT"},l),{},{SEARCH_RESULT:"SEARCH_RESULT"}),f=d;t.default=f;var p=[(a={},(0,o.default)(a,d.RECENT,d.RECENT),(0,o.default)(a,d.SMILEYS_PEOPLE,d.SMILEYS_PEOPLE),(0,o.default)(a,d.ANIMALS_NATURE,d.ANIMALS_NATURE),(0,o.default)(a,d.FOOD_DRINK,d.FOOD_DRINK),(0,o.default)(a,d.ACTIVITY,d.ACTIVITY),(0,o.default)(a,d.TRAVEL_PLACES,d.TRAVEL_PLACES),(0,o.default)(a,d.OBJECTS,d.OBJECTS),(0,o.default)(a,d.SYMBOLS,d.SYMBOLS),(0,o.default)(a,d.FLAGS,d.FLAGS),a).RECENT].concat((0,i.default)(c));t.ORDERED_TAB_SECTION_IDS=p},8916:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EMOJI_WIDTH=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(91080)),c=a(n(96486)),d=r(n(67294)),f=a(n(34541)),p=n(75300),h=a(n(8513)),_=a(n(40167)),v=a(n(78666)),m=a(n(75385)),g=a(n(17957)),y=a(n(76568)),E=a(n(68390)),S=a(n(62740)),b=a(n(35997)),T=a(n(4268)),w=a(n(29358)),A=parseInt(v.default["-emoji-width"].replace(/px$/,""),10);t.EMOJI_WIDTH=A;var C=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selectedIndex:0,skinTonePicker:null},e.emojiList=null,e._rowLength=0,e._emojiPanelRef=(0,d.createRef)(),e._emojisRef=(0,d.createRef)(),e._windowResized=function(){var t=e._getEmojiRowLength();if(e._rowLength!==t){e._rowLength=t;var n=e.state.selectedIndex>=t?t-1:e.state.selectedIndex;e.setState({selectedIndex:n})}},e._onEmojiClick=function(t){if(M(t),t.target instanceof HTMLElement){var n=t.target.dataset.unicode;if(n)if(h.default.getSkinToneBase(n)){var r=e._getEmojiVariant(n);r?e.onEmoji(r):e.onContextMenu(t)}else e.onEmoji(n)}},e._onEmojiMouseDown=function(t){if(M(t),t.target instanceof HTMLElement){var n=t.target.dataset.unicode;n&&h.default.getSkinToneBase(n)&&e._startPickerTimer(t)}},e.onEmoji=function(t){e.props.onEmoji(t),e.releaseFocus()},e.releaseFocus=function(){e.props.onFocusRelease&&e.props.onFocusRelease()},e._getEmojiVariant=function(e){return h.default.getSkinToneBase(e)?m.default.getVariant(e):null},e._setEmojiVariant=function(t,n,r){M(t),e.onEmoji(r),m.default.setVariant(n,r);var a=e.props.uim;return a&&(a.pop(!1,!1),a.uie.requestDismiss()),!1},e.onContextMenu=function(t){M(t);var n=t.target;if(n instanceof HTMLElement){var r=n.dataset.unicode;r&&h.default.getSkinToneBase(r)&&e._onContextMenu(r,n)}},e._onContextMenu=function(t,n,r){e._clearPickerTimer();var a=(0,l.default)(h.default.getSkinToneBase(t),"Emoji.getSkinToneBase(unicode)");e.setState({skinTonePicker:{menu:d.default.createElement(S.default,{base:a,action:e._setEmojiVariant,unicode:t}),anchor:n,type:"picker",dirX:p.DirX.RIGHT,dirY:p.DirY.TOP,horizontal:!0,autoFocus:r,findFirstItem:!0}},(function(){var t=e.props.onSkinTonePicker;t&&t(!0)}))},e._closeSkinTonePicker=function(){e.setState({skinTonePicker:null},(function(){var t=e.props.onSkinTonePicker;t&&t(!1)}))},e._clearPickerTimer=function(){null!=e._pickerTimer&&(e.props.clearTimeout(e._pickerTimer),e._pickerTimer=null)},e._startPickerTimer=function(t){M(t),e._clearPickerTimer();var n=t.target;if(n instanceof HTMLElement){var r=n.dataset.unicode;e._pickerTimer=e.props.setTimeout((function(){e.props.listeners.addOnce(f.default,"window_click",M),e._onContextMenu(r,n)}),250),e.props.listeners.addOnce(window,"mouseup",e._clearPickerTimer,!0)}},e._getEmojiRowLength=function(){var t=e._emojiPanelRef.current&&e._emojiPanelRef.current.offsetWidth;return null==t?8:Math.floor(t/A)},e.onEmojiArrowLeft=function(t){e._onEmojiArrow(t,"left")},e.onEmojiArrowRight=function(t){e._onEmojiArrow(t,"right")},e._onEmojiArrow=function(t,n){if(M(t),t.target instanceof HTMLElement){var r=t.target.dataset.emojiIndex;if(r){r=Number(r);var a=e.props.emojiList,i=r;switch(n){case"left":r>0&&(i=r-1);break;case"right":if(r+1>=a.length)return;i=r+1}e.setState({selectedIndex:i})}}},e._renderEmojiList=function(t){var n=t,r=e._getEmojiRowLength();n&&n.length>r&&(n=n.slice(0,r));var a=c.default.map(n,(function(t,n){var r=e._getEmojiVariant(t),a=e.state.selectedIndex===n&&!e.state.skinTonePicker;return d.default.createElement(_.default,{element:"span",emoji:r||t,size:"large",key:t,"data-unicode":t,"data-variant":r,tabIndex:"-1","data-emoji-index":n,selected:a})}));return d.default.createElement(y.default,{onMouseDown:e._onEmojiMouseDown,onClick:e._onEmojiClick,onContextMenu:e.onContextMenu},d.default.createElement("div",{className:v.default.panel,ref:e._emojisRef},a))},e.onEmojiEnter=function(t){if(M(t),t.target instanceof HTMLElement){var n=t.target.dataset.emojiIndex;if(n&&e.props.emojiList){var r=e.props.emojiList[Number(n)];e._keyboardSelectEmoji(t,r)}}},e._keyboardSelectEmoji=function(t,n){if(h.default.getSkinToneBase(n)){var r=e._getEmojiVariant(n);if(r)e.onEmoji(r);else{if(M(t),!(t.target instanceof HTMLElement))return;e._onContextMenu(n,t.target,!0)}}else e.onEmoji(n)},e}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(e,t){this.state.skinTonePicker&&this.state.skinTonePicker===t.skinTonePicker&&this._closeSkinTonePicker()}},{key:"componentDidMount",value:function(){var e=this;this.props.listeners.add(m.default,"add remove change:variant",(function(){return e.forceUpdate()}));var t=this.props.debounce(this._windowResized,100);this.props.listeners.add(window,"resize",t),this._windowResized()}},{key:"_getEmojiAtIndex",value:function(e){var t;return null!==(t=this.props.emojiList[e])&&void 0!==t?t:null}},{key:"_getEmojiElement",value:function(e){if(!(e<0)&&this._emojisRef.current){var t=this._emojisRef.current.children;if(!(e>=t.length))return t[e]}}},{key:"render",value:function(){var e;return this.state.skinTonePicker&&(e=d.default.createElement(T.default,{displayName:"SkinTonePicker",popable:!0,escapable:!0,requestDismiss:this._closeSkinTonePicker},d.default.createElement(w.default,{tooltip:this.state.skinTonePicker}))),d.default.createElement("div",{ref:this._emojiPanelRef},this._renderEmojiList(this.props.emojiList),e)}},{key:"moveSelectionLeft",value:function(){this.setState({selectedIndex:Math.max(this.state.selectedIndex-1,0)})}},{key:"moveSelectionRight",value:function(){this.setState({selectedIndex:Math.min(this.state.selectedIndex+1,this._getEmojiRowLength()-1,this.props.emojiList.length-1)})}},{key:"pickSelectedEmoji",value:function(){var e=this._getEmojiAtIndex(this.state.selectedIndex);if(e)if(h.default.getSkinToneBase(e)){var t=this._getEmojiVariant(e);if(t)this.onEmoji(t);else{var n=this._getEmojiElement(this.state.selectedIndex);n&&this._onContextMenu(e,n,!0)}}else this.onEmoji(e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{selectedIndex:Math.min(t.selectedIndex,e.emojiList.length-1)}}}]),n}(d.Component);C.displayName="BaseEmojiSuggestionsPanel";var O=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"moveSelectionLeft",value:function(){this.getComponent().moveSelectionLeft()}},{key:"moveSelectionRight",value:function(){this.getComponent().moveSelectionRight()}},{key:"pickSelectedEmoji",value:function(){this.getComponent().pickSelectedEmoji()}}]),n}((0,g.default)((0,E.default)((0,b.default)(C))));function M(e){e&&(e.preventDefault(),e.stopPropagation())}t.default=O},93868:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DISP_LOCATION=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=r(n(67294)),f=n(75300),p=a(n(10931)),h=r(n(63494)),_=a(n(51460)),v=a(n(68390)),m=a(n(86539)),g=a(n(25506)),y=a(n(91461)),E={COMPOSE_BOX:"COMPOSE_BOX",DROPDOWN:"DROPDOWN"};t.DISP_LOCATION=E;var S=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(e){var r,a;return(0,o.default)(this,n),(r=t.call(this,e))._refDiv=(0,d.createRef)(),r.getElement=function(){return r._refDiv.current},r._sectionIds=0===g.default.length?h.ORDERED_TAB_SECTION_IDS.filter((function(e){return e!==h.default.RECENT})):h.ORDERED_TAB_SECTION_IDS,r._refMenuTabs=new Map,r._handleEmojiPanelFocusUp=function(){var e;null===(e=r._refMenuTabs.get(r.state.selectedSectionId))||void 0===e||e.focus(),r.setState({focusedTabIndex:r._sectionIds.indexOf(r.state.selectedSectionId)})},r._handleEmojiPanelFocusEnter=function(e){null==e||e.preventDefault();var t=r._sectionIds[r.state.focusedTabIndex];r.setState({focusedTabIndex:-1}),r._handleMenuTabClick(t)},r._handleEmojiPanelFocusNext=function(){var e,t=(r.state.focusedTabIndex+1)%r._sectionIds.length,n=r._sectionIds[t];null===(e=r._refMenuTabs.get(n))||void 0===e||e.focus(),r.setState({focusedTabIndex:t})},r._handleEmojiPanelFocusPrev=function(){var e,t=(r._sectionIds.length+r.state.focusedTabIndex-1)%r._sectionIds.length,n=r._sectionIds[t];null===(e=r._refMenuTabs.get(n))||void 0===e||e.focus(),r.setState({focusedTabIndex:t})},r._handleFocusLeave=function(){r.setState({focusedTabIndex:-1}),r._focusSearchInput()},r._handleMenuTabClick=function(e,t){var n,a;r._selectSection(e),null===(n=(a=r.props).onChange)||void 0===n||n.call(a,""),r._focusSearchInput(),null==t||t.preventDefault()},r._handlePanelSection=function(e){r._animationPromise||r.state.selectedSectionId!==e&&r.setState({selectedSectionId:e})},r._onEmoji=function(e){g.default.increment(e),r.props.onEmoji(e)},r._onChange=function(e,t){var n,a;null===(n=(a=r.props).onChange)||void 0===n||n.call(a,e,t),r.setState({})},r._setRefContent=function(e){r._refContent=e},r._renderEmojiTab=function(e,t){return d.default.createElement(y.default,{key:e,onClick:r._handleMenuTabClick,sectionId:e,selected:t,showFocusIndicator:-1!==r.state.focusedTabIndex,onRef:function(t){r._refMenuTabs.set(e,t)}})},r._scrollSectionIds=r._sectionIds,a=r.props.displayCache?r.props.displayCache:{scrollTop:0,sectionId:r._sectionIds[0],showSearchInput:!0},r._displayCache=a,r.state={selectedSectionId:a.sectionId,focusedTabIndex:-1},r}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.listeners.uiIdle((function(){e.restoreFocus()}))}},{key:"restoreFocus",value:function(e){this._focusSearchInput(e)}},{key:"_focusSearchInput",value:function(e){this._refContent&&this._refContent.focusSearchInput(e)}},{key:"_selectSection",value:function(e){this.state.selectedSectionId!==e&&(this.setState({selectedSectionId:e}),this._scrollToSection(e))}},{key:"_scrollToSection",value:function(e){var t=this;if(this._refContent){var n=this._refContent.scrollToSection(e);this._animationPromise=n,n.finally((function(){n===t._animationPromise&&delete t._animationPromise}))}}},{key:"render",value:function(){var e,t=(0,c.default)(_.default.emojiPanel,(0,i.default)({},_.default.panelDropdown,this.props.displayLocation===E.DROPDOWN)),n=this.props.width,r=void 0===n?f.EMOJI_PICKER_WIDTH:n;return d.default.createElement("div",{className:t,ref:this._refDiv},d.default.createElement(m.default,{selectedSectionId:this.state.selectedSectionId,sectionIds:this._sectionIds,renderSectionTab:this._renderEmojiTab,showTabHighlight:!(null===(e=this.props.defaultSearchText)||void 0===e?void 0:e.trim()),onFocusPrev:this._handleEmojiPanelFocusPrev,onFocusNext:this._handleEmojiPanelFocusNext,onFocusLeave:this._handleFocusLeave,onEnter:this._handleEmojiPanelFocusEnter}),d.default.createElement(p.default,{displayCache:this._displayCache,width:r,onDisplayCache:this.props.onDisplayCache,onFocusUp:this._handleEmojiPanelFocusUp,onFocusPrev:this.props.onFocusPrev,onFocusNext:this.props.onFocusNext,onEmoji:this._onEmoji,onSection:this._handlePanelSection,ref:this._setRefContent,sectionIds:this._scrollSectionIds,onChange:this._onChange,defaultSearchText:this.props.defaultSearchText}))}}]),n}(d.PureComponent);S.defaultProps={displayLocation:E.DROPDOWN},S.displayName="EmojiPanel";var b=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"restoreFocus",value:function(e){this.getComponent().restoreFocus(e)}}]),n}((0,v.default)(S));t.default=b},74674:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SKIN_TONE_VARIATIONS=void 0;var a=r(n(8513)),i=[""].concat(a.default.skinToneVariations);t.SKIN_TONE_VARIATIONS=i},41538:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(94184)),c=r(n(67294)),d=a(n(64827)),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._handleMouseDown=function(e){e.stopPropagation()},e}return(0,o.default)(n,[{key:"render",value:function(){return c.default.createElement("div",{className:(0,l.default)(d.default.container,this.props.className),onMouseDown:this._handleMouseDown},this.props.children)}}]),n}(c.PureComponent);t.default=f,f.displayName="MenuContainer"},86539:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(41538)),d=a(n(74453)),f=a(n(76568)),p=a(n(85054)),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e,t=this,n=-1,r=this.props.sectionIds.map((function(e,r){var a=!1;return e===t.props.selectedSectionId&&(t.props.showTabHighlight?(n=r,a=!0):n=-1),t.props.renderSectionTab(e,a)}));return l.default.createElement(f.default,{component:"div",handlers:(0,d.default)({"shift+tab":this.props.onFocusPrev,tab:this.props.onFocusNext,down:this.props.onFocusLeave,left:this.props.onFocusPrev,right:this.props.onFocusNext,enter:this.props.onEnter,space:this.props.onEnter})},l.default.createElement(c.default,null,l.default.createElement(p.default,{numTabs:this.props.sectionIds.length,selectedTabIndex:n,animate:null===(e=this.props.showTabHighlight)||void 0===e||e}),r))}}]),n}(l.Component);t.default=h,h.displayName="PanelMenu"},15618:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEMES=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=a(n(96486)),f=r(n(67294)),p=a(n(31722)),h=a(n(30462)),_={CAROUSEL:"CAROUSEL",CAROUSEL_END:"CAROUSEL_END",MENU:"MENU"};t.THEMES=_;var v=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._setRefTab=function(t){var n,r;e._refTab=t,null===(n=(r=e.props).onRef)||void 0===n||n.call(r,t)},e._handleClick=function(t){e.props.onClick&&e.props.onClick(e.props.sectionId,t)},e}return(0,s.default)(n,[{key:"focus",value:function(){this._refTab&&(this.hasFocus()||p.default.focus(this._refTab))}},{key:"hasFocus",value:function(){return!!document.activeElement&&this._refTab===document.activeElement}},{key:"_getStyle",value:function(e){return d.default.isEqual(this._style,e)||(this._style=e),this._style}},{key:"render",value:function(){var e,t=this.props,n=t.theme,r=t.title;return f.default.createElement("div",{ref:this._setRefTab,role:"button",className:(0,c.default)(h.default.tab,(e={},(0,i.default)(e,h.default.menu,n===_.MENU),(0,i.default)(e,h.default.carousel,n===_.CAROUSEL||n===_.CAROUSEL_END),(0,i.default)(e,h.default.carouselEnd,n===_.CAROUSEL_END),(0,i.default)(e,h.default.selected,this.props.selected),(0,i.default)(e,h.default.highlightOnFocus,this.props.showFocusIndicator),e)),onClick:this._handleClick,style:this._getStyle({width:this.props.width,transform:this.props.transform}),title:r,tabIndex:"0"},this.props.children)}}]),n}(f.PureComponent);t.default=v,v.displayName="MenuTab"},85054:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=a(n(96486)),f=r(n(67294)),p=a(n(89115)),h=a(n(71414)),_=100,v=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._isRTL=p.default.isRTL()?-1:1,e.state={height:"4px",transform:`translateX(${e.props.selectedTabIndex*_*e._isRTL}%)`,animateWithTransform:Boolean(e.props.animate)},e}return(0,s.default)(n,[{key:"componentDidUpdate",value:function(e){d.default.isEqual(e,this.props)||(-1===e.selectedTabIndex&&this.props.selectedTabIndex!==e.selectedTabIndex?this.setState({animateWithTransform:!1}):this.setState({animateWithTransform:this.props.animate}),-1!==this.props.selectedTabIndex?this.setState({transform:`translateX(${this.props.selectedTabIndex*_*this._isRTL}%)`,height:"4px"}):-1!==e.selectedTabIndex&&-1===this.props.selectedTabIndex&&this.setState({height:"0px"}))}},{key:"render",value:function(){var e;return f.default.createElement("div",{className:(0,c.default)(h.default.menuTabsMarker,(e={},(0,i.default)(e,h.default.hide,this.props.hide),(0,i.default)(e,h.default.animate,!this.state.animateWithTransform&&this.props.animate),(0,i.default)(e,h.default.animateWithTransform,this.state.animateWithTransform),e)),style:{width:_/this.props.numTabs+"%",transform:this.state.transform,height:this.state.height}})}}]),n}(f.PureComponent);v.displayName="MenuTabMarker";var m=v;t.default=m},47169:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HEIGHT=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=r(n(67294)),f=a(n(97930)),p=a(n(34263)),h=a(n(80413)),_=a(n(31722)),v=a(n(76568)),m=a(n(89115)),g=a(n(97802)),y=n(36474),E=a(n(75131)),S=a(n(73358));t.HEIGHT=56;var b=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.value||"",tabFocused:!!e.props.tabFocused},e._handleChange=function(t){var n=t.target.value;e.setState({value:n}),e.props.onChange&&e.props.onChange(n,t)},e._handleClearButtonClick=function(t){e.setState({value:""}),e.props.onChange&&e.props.onChange("",t)},e._handleUpKey=function(t){t.stopPropagation(),t.preventDefault(),e.props.onUpKey&&e.props.onUpKey(t)},e._handleDownKey=function(t){t.stopPropagation(),t.preventDefault(),e.props.onDownKey&&e.props.onDownKey(t)},e._handleEnterKey=function(t){t.preventDefault(),t.stopPropagation(),e.props.onEnterKey&&e.props.onEnterKey(t)},e._handleFocus=function(){e.focus()},e._setRefInput=function(t){e._refInput=t},e._setRefInputContainer=function(t){e._refInputContainer=t},e}return(0,s.default)(n,[{key:"focus",value:function(e){this._refInput&&(this.hasFocus()||(_.default.focus(this._refInput),e&&h.default.indicateFocus(this._refInputContainer)))}},{key:"hasFocus",value:function(){return!!document.activeElement&&this._refInput===document.activeElement}},{key:"render",value:function(){var e,t=null;return this.state.value&&!this.props.tabFocused&&(t=d.default.createElement("button",{className:g.default.cancelIcon,onClick:this._handleClearButtonClick},d.default.createElement(E.default,{name:"x-alt-small"}))),d.default.createElement(v.default,{handlers:{enter:this._handleEnterKey,up:this._handleUpKey,down:this._handleDownKey},"data-tab":p.default.TAB_ORDERS.PANEL_SEARCH_INPUT,className:(0,c.default)(g.default.searchRow,(e={},(0,i.default)(e,g.default.ffFix,S.default.isGecko),(0,i.default)(e,g.default.rowShadow,this.props.shadow),e)),key:"search-input",onFocus:this._handleFocus},d.default.createElement("label",{ref:this._setRefInputContainer,className:g.default.rowInput},d.default.createElement("div",{className:g.default.inputContainer},d.default.createElement("input",{"data-a8n":f.default.key("input-emoji-search"),ref:this._setRefInput,className:(0,c.default)(g.default.inputEmojiSearch,y.SELECTABLE_INPUT_CSS_CLASS),type:"text",role:"searchbox",dir:m.default.isRTL()?"rtl":"ltr",value:this.props.tabFocused?"":this.state.value,title:this.props.label,placeholder:this.props.label,onMouseDown:function(e){e.stopPropagation()},onChange:this._handleChange}),t)))}}],[{key:"getDerivedStateFromProps",value:function(e){return{value:e.value,tabFocused:e.tabFocused}}}]),n}(d.PureComponent);t.default=b,b.displayName="PanelSearchInput"},58590:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseInput=void 0;var i=a(n(67154)),o=a(n(59713)),s=a(n(63038)),u=a(n(319)),l=a(n(34575)),c=a(n(93913)),d=a(n(81506)),f=a(n(2205)),p=a(n(99842)),h=a(n(94184)),_=r(n(56678)),v=a(n(91080)),m=r(n(67294)),g=a(n(97930)),y=a(n(34748)),E=a(n(34263)),S=a(n(91445)),b=a(n(34249)),T=a(n(68851)),w=a(n(93802)),A=a(n(85411)),C=a(n(43302)),O=a(n(31722)),M=a(n(29470)),I=a(n(76568)),k=a(n(89115)),P=a(n(56051)),R=n(36474),D=a(n(76588)),N=a(n(4315)),L=a(n(47973)),x=n(30564),U=function(e){(0,f.default)(n,e);var t=(0,p.default)(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).__changeDueToReset=!1,e.__isMounted=!0,e.__isComposing=!1,e.containerRef=null,e.selection=e.props.initialSelection,e.state={direction:Y(e.props.initialValue||""),focused:!1,value:e.props.initialValue||""},e.trigger=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e._hookMap[t];r&&r.apply(void 0,(0,u.default)(n))},e.serializeTextBeforeCursor=function(){return(0,N.default)(e.refInput||document.createElement("span"),window.getSelection())},e._hasFocus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.refInput;if(!t)return!1;var n=document,r=n.activeElement;return!!r&&(r===t||t.contains(r))},e.forceFocus=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e.props.readOnly&&e.__isMounted){var n=(0,d.default)(e),r=n.refInput;if(r){var a=e._hasFocus(r);if(!a||t)if(a||O.default.focus(r),!t&&e.selection)e._restoreSelection(e.selection);else{var i=window.getSelection();i&&i.rangeCount&&(i.selectAllChildren(r),i.collapseToEnd())}}}},e.focus=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e._hasFocus()&&!t||setTimeout((function(){e.forceFocus(t)}),0)},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.__changeDueToReset=!0,e.selection=null,e._setValue(t)},e._setValue=function(t){if(t!==e.state.value){var n=t||"";e.setState({value:n,direction:Y(n)},(function(){e.trigger(M.default.CHANGE,[n]),e.props.onChange&&e.props.onChange(n)}))}},e.onSelect=function(){e.selection=e.getSelection(),e.props.onSelect&&e.props.onSelect(e.selection)},e.shouldComponentUpdate=function(t,n){var r=n.value,a=n.focused,i=n.direction;null!=e.refInput&&e.props.readOnly!==t.readOnly&&e.refInput.setAttribute("contentEditable",String(!t.readOnly));var o=K(t);if(null!=e.refInput&&o!==K(e.props)&&(null==o?e.refInput.removeAttribute("data-tab"):e.refInput.setAttribute("data-tab",o.toString())),a!==e.state.focused&&e.containerRef&&(a?e.containerRef.classList.add("focused"):e.containerRef.classList.remove("focused")),i!==e.state.direction&&e.refInput&&e.refInput.setAttribute("dir",i),e.__changeDueToReset){e.__changeDueToReset=!1;var s=(0,L.default)(r,e._plugins);e.refInput&&(e.refInput.innerHTML=s)}var u=!r.length&&!!e.state.value.length,l=!!r.length&&!e.state.value.length;if(!l&&!u)return!1;var c=l?"hidden":"visible";return e._refPlaceholder&&e._refPlaceholder.setAttribute("style",`visibility: ${c}`),!1},e.componentWillUnmount=function(){e.__isMounted=!1,e.refInput&&(e.refInput.restoreFocus=null)},e.onInput=function(){var t=(0,d.default)(e).refInput,n=t?(0,D.default)(t,e._plugins):"",r=e.props.multiline&&"\n"!==n?n:n.replace(/\n$/,""),a=e.props.maxLength;if(null!=a&&(0,x.numCodepoints)(r)>a){var i=e.selection;return t&&(t.innerHTML=(0,L.default)(e.state.value,e._plugins)),void(i&&e._restoreSelection(i))}e.trigger(M.default.INPUT),e._setValue(r)},e.onPaste=function(t){t.preventDefault(),t.stopPropagation();var n=new C.default(t.clipboardData),r=e.props,a=r.onFiles,i=r.onTextPaste;n.hasFiles()&&a&&a(n)||n.hasText()&&n.getText(e.props.textPasteMimePriority).then((function(t){if(t&&(!i||!i(t))){var n=e.length-e._selectionLength,r=e.props.maxLength;if(null!=r&&n+(0,x.numCodepoints)(t)>r){var a=e.props.onMaxPasteExceeded;return a&&a()}e.replaceSelection(t)}}))},e._onBeforeInput=function(t){if(e.props.readOnly)return!0;var n=e.props.maxLength;if(null==n)return!1;var r=t.data.charCodeAt(0);if(8===r||127===r)return!1;var a=n+e._selectionLength-e.length;return(0,x.numCodepoints)(t.data)>a},e.onKeyDown=function(t){return!(!e.props.onKeyDown||!e.props.onKeyDown(t))||13===t.which&&(e.props.multiline&&B(t)?(""===e.state.value.trim()&&e.cursorIsAtStart()||e._insertNewLineAtSelection(),!0):(e.props.onEnter&&e.props.onEnter(t),!0))},e.componentDidMount=function(){e.refInput&&(e.refInput.restoreFocus=e.focus),e.trigger(M.default.MOUNT)},e.onBlur=function(t){e.setState({focused:!1}),e.props.onBlur&&e.props.onBlur(t)},e.onFocus=function(t){e.setState({focused:!0}),e.props.onFocus&&e.props.onFocus(t)},e._onCompositionStart=function(){return!(e.__isComposing=!0)},e._onCompositionEnd=function(){return e.__isComposing=!1},e.setRefContainer=function(t){e.containerRef=t},e._setRefPlaceholder=function(t){e._refPlaceholder=t},e.setRefInput=function(t){e.refInput=t},e.getRefInput=function(){return e.refInput},e}return(0,c.default)(n,[{key:"serialize",value:function(e){var t=e||this.state.value;return this._plugins.reduce((function(e,t){var n=(0,s.default)(e,2),r=n[0],a=n[1];return t.serialize?t.serialize(r,a):[r,a]}),[t,{}])}},{key:"_adjustScrollAfterModification",value:function(e,t,n){var r=e.scrollHeight;r<=e.clientHeight||(e.scrollTop=(n||0)+(r-t))}},{key:"_ensureFocus",value:function(e){this._hasFocus(e)||(O.default.focus(e),this.selection&&this._restoreSelection(this.selection))}},{key:"replaceSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.refInput;if(!this.props.readOnly&&null!=n){this._ensureFocus(n);var r=this._trimToFit(e);if(r.length||t){this.props.multiline||(r=r.replace(/\r?\n/g,""));var a=window.getSelection().getRangeAt(0);j(a,n)&&(r=`\n${r}`),a.deleteContents();var i=n.scrollHeight,o=n.scrollTop;document.execCommand("insertHTML",!1,(0,L.default)(r,this._plugins)),this.onSelect(),this._adjustScrollAfterModification(n,i,o)}}}},{key:"_insertNewLineAtSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.props.multiline&&this._insertTextAtSelection("\n"+e)}},{key:"_insertTextAtSelection",value:function(e){var t=this.refInput;if(this.props.multiline&&!this.props.readOnly&&null!=t){this._ensureFocus(t);var n=t.scrollHeight,r=t.scrollTop,a=this.cursorIsAtEnd(),i=document.createTextNode(e),o=window.getSelection(),s=o.getRangeAt(0);if(s.deleteContents(),s.insertNode(i),/^\n/.test(e)&&n===t.scrollHeight&&a){s.setStartBefore(i);var u=document.createTextNode("\n");s.insertNode(u)}s.setStartAfter(i),s.setEndAfter(i),s.collapse(!1),o.removeAllRanges(),o.addRange(s),t.normalize(),this._adjustScrollAfterModification(t,n,r),t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}}},{key:"deleteSelection",value:function(){this.replaceSelection("",!0)}},{key:"_restoreSelection",value:function(e){var t=this.refInput;if(t){var n=e.anchorIndex,r=e.focusIndex,a=e.anchorOffset,i=e.focusOffset,o=t.childNodes,s=-1===n?t:o[n],u=-1===r?t:o[r];if(s&&u)try{if(s===u&&a>i){var l=[i,a];a=l[0],i=l[1]}var c=document.createRange();c.setStart(s,a),c.setEnd(u,i);var d=window.getSelection();d.removeAllRanges(),d.addRange(c);try{var f=document.createRange();f.setStart(u,i),f.setEnd(u,i);var p=f.getBoundingClientRect(),h=p.bottom,_=p.top,v=this.refInput&&this.refInput.getBoundingClientRect()||{},m=v.bottom,g=v.top;if(_>=g&&h<=m)return;this.refInput&&(this.refInput.scrollTop+=h<g?_-g:h-m)}catch(e){}}catch(e){this.focus(!0)}}}},{key:"getSelection",value:function(){var e=this.refInput;if(!e||document.activeElement!==e)return null;for(var t,n=window.getSelection(),r=n.anchorNode,a=n.anchorOffset,i=n.focusNode,o=n.focusOffset,s=e.childNodes,u=-1,l=-1,c=0;(u<0||l<0)&&(t=s[c++]);)r===t&&(u=c-1),i===t&&(l=c-1);return{anchorIndex:u,anchorOffset:a,focusIndex:l,focusOffset:o}}},{key:"_trimToFit",value:function(e){var t=this.props.maxLength;if(null==t)return e;var n=t+this._selectionLength-this.length;return n<=0?"":(0,x.substring)(String(e),0,n)}},{key:"cursorIsAtEnd",value:function(){return null!=this.refInput&&(!(!this.state.focused||""!==this.state.value)||(0,w.default)(this.refInput))}},{key:"cursorIsAtStart",value:function(){return!(!this.state.focused||""!==this.state.value)||(0,A.default)(this.refInput)}},{key:"isFocused",value:function(){return this.state.focused}},{key:"blur",value:function(){(0,v.default)(this.refInput,"this.refInput").blur()}},{key:"select",value:function(){var e=(0,v.default)(this.refInput,"this.refInput"),t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}},{key:"render",value:function(){var e,t,n=this.props.placeholder,r=this.state,a=r.value,s=r.direction,u=a.length>0?"hidden":"visible",l=(0,h.default)(P.default.input,(e={},(0,o.default)(e,P.default.compose,"compose"===this.props.theme),(0,o.default)(e,P.default.default,"default"===this.props.theme||"media-caption"===this.props.theme||"text-input"===this.props.theme),(0,o.default)(e,P.default.large,"large"===this.props.theme),(0,o.default)(e,P.default.media,"media-caption"===this.props.theme),(0,o.default)(e,P.default.invite,"v4-invite-caption"===this.props.theme),(0,o.default)(e,P.default.small,"small"===this.props.theme),(0,o.default)(e,P.default.status,"status-reply"===this.props.theme),(0,o.default)(e,P.default["list-search"],"list-search"===this.props.theme),(0,o.default)(e,P.default.textInput,"text-input"===this.props.theme),(0,o.default)(e,P.default.mediaEditorTextInput,"media-editor-text-input"===this.props.theme),e));return m.default.createElement(I.default,{className:l,handlers:this._hotKeyMap,onRef:this.setRefContainer},m.default.createElement("div",{"data-a8n":g.default.key("pluggable-input-placeholder"),className:(0,h.default)(P.default.placeholder,(0,o.default)({},P.default.mediaEditorTextInputPlaceholder,"media-editor-text-input"===this.props.theme)),ref:this._setRefPlaceholder,style:{visibility:u}},n),m.default.createElement("div",(0,i.default)({},this._handlerMap,{"data-a8n":null!==(t=g.default.key(this.props.a8n))&&void 0!==t?t:g.default.key("pluggable-input-body"),className:(0,h.default)(P.default.body,R.SELECTABLE_INPUT_CSS_CLASS),contentEditable:!this.props.readOnly,dangerouslySetInnerHTML:{__html:(0,L.default)(a,this._plugins)},"data-tab":K(this.props),dir:s,ref:this.setRefInput,spellCheck:this.props.spellCheck,style:this.props.style})))}},{key:"value",get:function(){return this.state.value}},{key:"_selectionLength",get:function(){if(this.props.readOnly)return 0;this._hasFocus(this.refInput)||O.default.focus(this.refInput);var e=window.getSelection();return e.rangeCount?(0,x.numCodepoints)((0,D.default)(e.getRangeAt(0).cloneContents(),this._plugins)):0}},{key:"length",get:function(){return(0,x.numCodepoints)(this.state.value)}},{key:"isComposing",get:function(){return this.__isComposing}}]),n}(m.Component);t.BaseInput=U,U.displayName="BaseInput";t.default=function(e){return function(t){(0,f.default)(r,t);var n=(0,p.default)(r);function r(){var t;(0,l.default)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i)))._plugins=[].concat((0,u.default)(e.map((function(e){return e instanceof y.default&&e.initialize((0,d.default)(t)),e}))),[G((0,d.default)(t))]),t._handlerMap=(0,S.default)(t._plugins,(0,d.default)(t)),t._hookMap=(0,b.default)(t._plugins,(0,d.default)(t)),t._hotKeyMap=(0,T.default)(t._plugins,(0,d.default)(t)),t}return r}(U)};var F=["onBeforeInput","onBlur","onCompositionEnd","onCompositionStart","onFocus","onInput","onKeyDown","onPaste","onSelect"];function G(e){return{handlers:(t=e,n=F,n.reduce((function(e,n){return Array.isArray(n)?e[n[0]]=t[n[1]]:e[n]=t[n],e}),{}))};var t,n}function B(e){return 13===e.which&&(e.shiftKey||e.altKey||e.ctrlKey)}function j(e,t){var n=e.startOffset,r=e.startContainer;return 0===n&&r!==t&&(!(!r||!r.previousSibling)&&"\n"===r.previousSibling.textContent.slice(-1))}function Y(e){return _.dir(e)||k.default.LR("ltr","rtl")}function K(e){var t=e.tabOrder,n=e.readOnly;return null!=t?t:n?null:E.default.TAB_ORDERS.COMPOSE_BOX_INPUT}},6067:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ThemeOptions=void 0;var i=a(n(59713)),o=a(n(63038)),s=a(n(94184)),u=r(n(67294)),l=a(n(34541)),c=a(n(14160)),d=a(n(75886)),f=a(n(8916)),p=a(n(73722)),h=a(n(21361)),_=a(n(27259)),v=a(n(25506)),m=a(n(4268)),g=a(n(92169)),y=a(n(38512)),E=(0,_.default)({MEDIA_CAPTION:null,EMOJI_INPUT:null});t.ThemeOptions=E;var S=function(e){var t,n=(0,u.useState)(""),r=(0,o.default)(n,2),a=r[0],_=r[1],S=(0,u.useState)(""),b=(0,o.default)(S,2),T=b[0],w=b[1],A=(0,u.useState)(null),C=(0,o.default)(A,2),O=C[0],M=C[1],I=(0,u.useRef)(),k=function(){_(""),w(""),M(null)},P=function(e){if(!(0,h.default)(e)){var t=I.current;return t?(e.preventDefault(),e.stopPropagation(),t.pickSelectedEmoji(),!1):void 0}};(0,g.default)(e.plugin,p.default.EMOJI_SEARCH,(function(t){var n=t?t.trim():t,r=T,a=e.chat;if(a&&a.isGroup&&n&&n.includes("@"))return M(null),void _("");if(!r||!n.startsWith(r))if(n.length<2){if(!O)return;_(n),M(""===n?null:(0,c.default)(n))}else{var i=(0,c.default)(n);i.length?(_(n),w(null),M(i)):(_(n),M(null))}})),(0,g.default)(e.plugin,p.default.EMOJI_INACTIVE,k),(0,g.default)(e.plugin,p.default.EMOJI_ENTER,P),(0,g.default)(e.plugin,p.default.EMOJI_LEFT,(function(e){if(!(0,h.default)(e)){var t=I.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionLeft())}})),(0,g.default)(e.plugin,p.default.EMOJI_RIGHT,(function(e){if(!(0,h.default)(e)){var t=I.current;t&&(e.preventDefault(),e.stopPropagation(),t.moveSelectionRight())}})),(0,g.default)(e.plugin,p.default.EMOJI_TAB,P);var R=O?u.default.createElement(m.default,{displayName:"EmojiSuggestions",escapable:!0,requestDismiss:function(){_(""),w(a),M(null)},requestFocus:function(){e.plugin.ctx.focus()}},u.default.createElement("div",{className:(0,s.default)(d.default.overlayContainer,(t={},(0,i.default)(t,d.default.mediaCaption,e.theme===E.MEDIA_CAPTION),(0,i.default)(t,d.default.emojiInput,e.theme===E.EMOJI_INPUT),t))},u.default.createElement("div",{className:d.default.resultsContainer,"data-list-scroll-container":"false"},u.default.createElement("div",{className:d.default.emojiSearch,onKeyPress:function(t){t.preventDefault();var n=e.chat;n&&l.default.pasteChatTextInput(n,String.fromCharCode(t.charCode))},onKeyDown:function(t){return"Backspace"===t.key&&(t.preventDefault(),document.execCommand("delete"),e.plugin.ctx.focus()),!1}},u.default.createElement("div",{className:d.default.searchBody,key:"RECENT"},u.default.createElement(f.default,{ref:I,key:a,onEmoji:function(t){v.default.increment(t),e.plugin.handleSelect(t)},onFocusRelease:k,onSkinTonePicker:e.onSkinTonePicker,emojiList:O})))))):null;return u.default.createElement(y.default,{component:"div",className:d.default.positioningContainer,transitionName:"emoji-search-panel-slide-up"},R)};t.default=S},73722:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,r(n(27259)).default)({EMOJI_ENTER:void 0,EMOJI_INACTIVE:void 0,EMOJI_LEFT:void 0,EMOJI_RIGHT:void 0,EMOJI_SEARCH:void 0,EMOJI_TAB:void 0});t.default=a},64036:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(34748)),c=r(n(8513)),d=r(n(73722)),f=r(n(29470)),p=r(n(42215)),h=r(n(74314)),_={ArrowLeft:d.default.EMOJI_LEFT,ArrowRight:d.default.EMOJI_RIGHT,Enter:d.default.EMOJI_ENTER,Tab:d.default.EMOJI_TAB},v=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).hooks=(0,a.default)({},f.default.CHANGE,(function(e,t){""===t.refInput.textContent&&this.handle(d.default.EMOJI_INACTIVE)})),e.handlers={onKeyDown:function(e,t){var n=this;8!==e.keyCode&&e.repeat&&(this._lastSyncKeyDownWasRepeat=!0,setTimeout((function(){delete n._lastSyncKeyDownWasRepeat}),0));var r=_[e.key];return!!r&&this.handle(r,[e,t])},onSelect:function(e,t){if(this.ctx.isComposing)return!1;if(this._lastSyncKeyDownWasRepeat)return!1;var n=window.getSelection();if(!n.modify)return!1;var r=m(t,n);return r?(r=r.slice(1),this.handle(d.default.EMOJI_SEARCH,[r]),!1):this.handle(d.default.EMOJI_INACTIVE)}},e}return(0,o.default)(n,[{key:"handleSelect",value:function(e){this.ctx.forceFocus(),m(this.ctx,window.getSelection(),!0)&&(this.ctx.replaceSelection(e),this.handle(d.default.EMOJI_INACTIVE))}}]),n}(l.default);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null,a=null,i="",o=0,s=null;return(0,p.default)(e,t,(function(e,t,n){if("@"===e||" "===e&&" "===a)return!0;if(":"===a)if(" "===r);else{if(c.default.isEmoji(e))return s=i,!0;if(/\W/.test(e))return s=n.slice(t+1)+i,!0}return 0===t&&(i=n+i),r=a,a=e,(o+=1)>=50||void 0})),!s&&o<50&&":"===a&&(s=i),n&&s&&s.length&&(0,h.default)(t,s.length),s}t.default=v},35189:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isEmojiEl=function(e){return!!e&&(e instanceof HTMLElement&&!!e.dataset.isEmoji)},t.default=void 0;var i=a(n(59713)),o=a(n(94184)),s=n(53615),u=a(n(34541)),l=a(n(34263)),c=a(n(8513)),d=a(n(29470)),f=n(36474),p=!1;var h={serializers:[["img.emoji",function(e){return e.getAttribute("alt")||""}]],parsers:[function(e){return e.replace(c.default.emojiRegex(),(function(e,t){var n=function(e){var t=c.default.getGlyphId(e);if(null==t)return null;var n=(0,f.createSelectableElement)("img",e);n.setAttribute("alt",e),n.setAttribute("draggable","false"),n.setAttribute("class",(0,o.default)(n.getAttribute("class"),c.default.getCssClasses(t)));var r=c.default.getStyle(t);return Object.assign(n.style,r),n.setAttribute("src",l.default.ONE_BY_ONE_TRANS_GIF),n.dataset.isEmoji="true",n}(t);return n?n.outerHTML:""}))}],hooks:(0,i.default)({},d.default.MOUNT,(function(){p||(p=!0,new r((function(e){0===u.default.uiBusy&&e(),u.default.once("ui_idle",(function(){e()}))})).then((function(){return(0,s.delayMs)(0)})).then((function(){document.execCommand("enableObjectResizing",!1,!1)})).catch((function(){})))})),handlers:{onBeforeInput:function(e,t){var n=c.default.emojiRegex().exec(e.data);return!!n&&(e.cancelable&&t.replaceSelection(n[0]),!0)},onClick:function(e){if(!e.target)return!1;var t=e.target.getAttribute("class");if(!t||!~t.indexOf("emoji"))return!1;var n=window.getSelection(),r=new Range;return e.pageX<e.target.x+e.target.width/2?(r.setStartBefore(e.target),r.setEndBefore(e.target)):(r.setStartAfter(e.target),r.setEndAfter(e.target)),n.removeAllRanges(),n.addRange(r),!0}}};t.default=h},71446:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.isComposing)return!1;var n=window.getSelection();return function(e,t,n){if(!t.modify)return!1;if(1!==t.rangeCount)return!1;var r=c.backwardsEmojiTextsTrie,a=e.data||"";if(!(r=r.get(a)))return!1;if(!t.getRangeAt(0).collapsed)return!1;var d=a,f=null,p=null;if((0,u.default)(n,t,(function(e,t,n){return(0,i.default)(r,"Trie ptr somehow not set"),!(r=r.get(e))||(r.hasChildren()?void(0===t&&(d=n+d)):(d=n.slice(t)+d,(p=(0,c.default)(d))&&(f=d),!0))})),!f)return!1;var h=n.serializeTextBeforeCursor();if((0,o.isInsideCodeBlock)(h))return!1;(0,l.default)(t,f.length-1),n.replaceSelection(p||"");var _=n.refInput,v=(0,s.default)(_,s.Direction.BACKWARD);if(!v)return!0;return v.dataset.replacedEmojiText=f,!0}(e,n,t)};var i=a(n(41143)),o=n(73797),s=r(n(99220)),u=a(n(42215)),l=a(n(74314)),c=r(n(75974))},35783:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(8===e.keyCode)return function(e,t){if(t.isComposing)return!1;var n=window.getSelection();return function(e,t,n){if(!t.modify)return!1;var r=n.refInput,i=(0,a.default)(r,a.Direction.BACKWARD);if(!i)return!1;if(o=i,!Boolean(o&&o.dataset&&o.dataset.replacedEmojiText))return!1;var o;t.modify("extend","backward","character"),t.modify("move","backward","character");var s=i.dataset.replacedEmojiText,u=i.parentNode;if(!u)return!1;u.replaceChild(document.createTextNode(s+" "),i);for(var l=s.length,c=0;c<l+1;c++)t.modify("extend","forward","character"),t.modify("move","forward","character");return!1}(0,n,t)}(0,t);return!1};var a=r(n(99220))},57126:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(34748)),u=r(n(71446)),l=r(n(35783)),c=new(function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){var e;(0,a.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handlers={onBeforeInput:u.default,onKeyDown:l.default},e}return n}(s.default));t.default=c},75974:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=s[e];n&&(t=a.default.getSkinToneBase(n)&&i.default.getVariant(n));return t||n},t.backwardsEmojiTextsTrie=void 0;var a=r(n(8513)),i=r(n(75385)),o=r(n(57500)),s={"(y)":"👍","(Y)":"👍","(n)":"👎","(N)":"👎",":-)":"🙂",":-(":"🙁",":-p":"😛",":-P":"😛",":-|":"😐",":-\\":"😕",":-D":"😀",":-*":"😘",":-o":"😮","<3":"❤️","^_^":"😁",">_<":"😆",";-)":"😉"};var u=Object.keys(s),l=o.default.fromBackwardsStrings(u);t.backwardsEmojiTextsTrie=l},31518:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(12095)),d=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.children;return l.default.createElement("div",{className:c.default.container}," ",e," ")}}]),n}(l.Component);t.default=d,d.displayName="RowPicker"},62740:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(33079)),d=r(n(8513)),f=a(n(41769)),p=a(n(72386)),h=n(12518),_=a(n(31518)),v=n(74674),m=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.unicode,r=e.action,a=(0,d.isBaseCoupleEmoji)(t),i=(a?(0,d.getPermutations)(v.SKIN_TONE_VARIATIONS.slice(1),2):v.SKIN_TONE_VARIATIONS.map((function(e){return[e]}))).reduce((function(e,n){var r=d.default.getSkinToneVariant(t,n);return r?(e.push(r),e):e}),[]).filter((function(e){return d.default.isEmoji(e)})).map((function(e,t){return l.default.createElement(c.default,{type:a?"emoji-grid":"emoji",key:e+t,a8n:"mi-emoji-variant",action:function(t){return r(t,n,e)}},l.default.createElement(f.default,{text:e,formatters:h.Configuration.LargeEmojiOnly(),tabIndex:"-1"}))}));return a?l.default.createElement(p.default,{base:t,action:r,unicode:n},i):l.default.createElement(_.default,null,i)}}]),n}(l.Component);t.default=m,m.displayName="SkinTonePicker"},92169:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,o.default)(i.pluginContext),s=(0,a.useRef)(n);s.current=n,(0,a.useEffect)((function(){var n=r.current;return e.registerHandler(n,t,(function(){return s.current.apply(s,arguments)})),function(){return e.unregisterHandler(n,t)}}),[e,t,r])};var a=n(67294),i=n(34748),o=r(n(49434))},79134:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(96486)),c=r(n(67294)),d=a(n(80413)),f=a(n(31722)),p=a(n(80178)),h=a(n(26490)),_=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._refRotateFocus=(0,c.createRef)(),e.getElement=function(){return e._refRotateFocus.current},e.onKeyDown=function(t){if(!t.metaKey&&!t.ctrlKey){if("Tab"===t.key)return e.onRotateFocus(t);var n=e._refRotateFocus.current;if(n&&n===document.activeElement){var r=n.querySelector("input[data-tab]");r&&(d.default.shouldIndicateFocus(),v(r))}}},e.onRotateFocus=function(t){var n=1;t&&(t.stopPropagation(),t.preventDefault(),n=t.shiftKey?-1:1,d.default.shouldIndicateFocus());var r=e._refRotateFocus.current;if(r){var a=Array.from(r.querySelectorAll("[data-tab]"));if(a.length){a=l.default.sortBy(a,(function(e){return parseInt(e.getAttribute("data-tab"),10)||0}));var i=0,o=document.activeElement;o&&(i=(0,p.default)(a,a.findIndex((function(e){return e.contains(o)}))+n));var s=a[i];d.default.shouldIndicateFocus(),v(s)}}},e}return(0,o.default)(n,[{key:"render",value:function(){return c.default.createElement("div",{ref:this._refRotateFocus,style:this.props.style,className:h.default.container,onKeyDown:this.onKeyDown,tabIndex:"-1"},this.props.children)}}]),n}(c.Component);function v(e){e.restoreFocus?e.restoreFocus():f.default.focus(e)}t.default=_,_.displayName="RotateFocus"},61321:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=n(88388),d=a(n(24694)),f=a(n(60033)),p=n(54302).Mirrored(["FORWARD","REVERSE"]),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._refRotateFocus=(0,l.createRef)(),e.getElement=function(){return e._refRotateFocus.current},e.onKeyDown=function(t){if(!t.metaKey&&!t.ctrlKey)return t.key===d.default.KEYBOARD_EVENT_KEY_VALUE.TAB?e.onRotateFocus(t):void 0},e.onRotateFocus=function(t){var n=e._refRotateFocus.current;if(n){var r=t.shiftKey?p.REVERSE:p.FORWARD,a=(0,c.tabbable)(n);if(!(a.length<1)){var i=a[0],o=a[a.length-1],s=document.activeElement;r===p.FORWARD&&s===o?(t.preventDefault(),i.focus()):r!==p.REVERSE||s!==i&&s!==n||(t.preventDefault(),o.focus())}}},e}return(0,o.default)(n,[{key:"render",value:function(){return l.default.createElement("div",{ref:this._refRotateFocus,className:f.default.container,onKeyDown:this.onKeyDown,tabIndex:"-1",onBlur:this.props.onBlur,role:"dialog"},this.props.children)}}]),n}(l.Component);t.default=h,h.displayName="RotateFocusModal"},99618:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(76)),o=r(n(34263)),s=n(19129),u=r(n(89115)),l=r(n(69267));t.default=function(){var e=l.default.build(o.default.SMB_TOS_LEARN_MORE_LINK,{lg:u.default.getLocale()});return a.default.createElement(i.default,{href:e,onClick:function(t){t.preventDefault(),setTimeout((function(){return(0,s.openExternalLink)(e)}),10)}},u.default.t(919))}},87729:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.colorOptions=t.styleThemeOptions=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=r(n(67294)),f=a(n(27259)),p=a(n(89195)),h=(0,f.default)({noop:null});t.styleThemeOptions=h;var _=(0,f.default)({default:null,highlight:null,solidwhite:null,white:null,accent:null});t.colorOptions=_;var v=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this.props,n=t.size,r=t.stroke,a=t.styleThemes,o=t.color,s=t.outgoingMsg,u=40+r,l=(0,c.default)(p.default.path,p.default[o],(e={},(0,i.default)(e,p.default.in,!1===s),(0,i.default)(e,p.default.out,s),e));return d.default.createElement("svg",{className:(0,c.default)(p.default.container,a&&a.map((function(e){return p.default[e]}))),width:n,height:n,viewBox:"0 0 "+u+" "+u,role:"status"},d.default.createElement("circle",{className:l,cx:u/2,cy:u/2,r:20,fill:"none",strokeWidth:r}))}}]),n}(d.PureComponent);t.default=v,v.defaultProps={color:_.default,size:65,stroke:4},v.displayName="Spinner"},18138:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(43269)),u=n(44800),l=a(n(56727));n(7075);var c=n(82057),d=r(n(14094));function f(e,t,n,r){var a,i={$ProxyState$ComponentName:{value:e},proxyBitMask:{value:(0,u.genBitMask)(t.prototype.mirrorMask,n)}},o=(0,s.default)(n);try{var l=function(){var t=a.value,n={enumerable:!0,get:function(){return this.$ProxyState$state.get(t)},set:function(){__LOG__(4,void 0,new Error)`READ ONLY: Cannot write to proxied property "${t}", created in <${e} />, it is not writable.`}};r||(n.set=function(e){this.$ProxyState$state.set(t,e)}),i[t]=n};for(o.s();!(a=o.n()).done;)l()}catch(e){o.e(e)}finally{o.f()}function c(e){t.call(this,e)}return c.prototype=Object.create(t.prototype,i),c.prototype.constructor=c,c}var p=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,i.default)(this,e),this.componentName=t,this.name=n,this._isStrong=a,this.keys=r;var s=c.ProxyStates[n];s||(__LOG__(4,void 0,new Error,!0)`Unknown StateHOC concern type "${n}"`,SEND_LOGS("state-hoc-error")),this._proxyClass=s,this._limitedAccessProxyClass=f(t,s,r,o)}return(0,o.default)(e,[{key:"getModel",value:function(e){return e instanceof this._proxyClass?e.$ProxyState$state:e}},{key:"getModelAndValidate",value:function(e){var t,n=e instanceof this._proxyClass?e.$ProxyState$state:e;return n?n instanceof l.default?n:(__LOG__(4,void 0,new Error,!0)`${this.componentName} given invalid object for ${this.name}: ${t=n,"string"==typeof t?t:t.toString?t.toString():"Invalid Object"}`,SEND_LOGS("state-hoc-error"),null):(d.default.mode===d.StreamMode.MAIN&&(__LOG__(4,void 0,new Error,!0)`${this.componentName} was not supplied the ${this.name} model with keys ${String(this.keys)}.`,SEND_LOGS("state-hoc-error")),null)}},{key:"createProxy",value:function(e){return new this._limitedAccessProxyClass(e)}},{key:"attachConcern",value:function(e,t,n){e.incObservers(!this._isStrong),e.mirror.addListener(n,t,this)}},{key:"detachConcern",value:function(e,t){e.decObservers(),e.mirror.removeListener(t)}}]),e}();t.default=p},14054:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StorageCommand=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(r(n(28681)).default);t.StorageCommand=s;var u=new s;t.default=u},75131:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,n=e.color,r=e.directional,s=e.display,u=e.containerRef,l=e.name,c=e["aria-label"],d=e.title,f=e.style;return a.default.createElement(o.default,{"aria-label":c,className:t,color:n,containerRef:u,isRTL:!!r&&i.default.isRTL(),display:s,name:l,title:d,style:f})};var a=r(n(67294)),i=r(n(89115)),o=r(n(57140))},57140:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.loadSVGData=E,t.loadSpecificSVG=function(e){return E().then((function(){return i[e]}))},t.default=void 0;var i,o,s=a(n(67154)),u=a(n(59713)),l=a(n(6479)),c=a(n(34575)),d=a(n(93913)),f=a(n(2205)),p=a(n(99842)),h=a(n(94184)),_=n(53615),v=n(80835),m=r(n(67294)),g=a(n(55535)),y=r(n(59502));function E(){return o||(o=(0,v.promiseLoop)((function(e,t,r){var a=(0,_.delayMs)(y.expBackoff(r,12e4,1e3,.1));return n.e(5512).then(n.bind(n,96210)).then((function(t){i=t.default,e()})).catch((function(){return a}))})))}var S=function(e){(0,f.default)(n,e);var t=(0,p.default)(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loaded:!!i},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.loaded||(this.loading=E().cancellable().then((function(){e.setState({loaded:!0})})).catch((function(){})))}},{key:"componentWillUnmount",value:function(){this.loading&&this.loading.cancel()}},{key:"render",value:function(){var e,t=this.props,n=t["aria-label"],r=t.name,a=t.isRTL,o=t.className,c=t.display,d=t.containerRef,f=(0,l.default)(t,["aria-label","name","isRTL","className","display","containerRef"]);if(i&&!i[r])throw new Error("Missing SVG for '"+r+"'!");var p=i?{__html:i[r]}:void 0,_=this.props.color?g.default[this.props.color]:null,v=(0,h.default)(_,o,(e={},(0,u.default)(e,g.default.reverse,a),(0,u.default)(e,g.default.inline,"inline"===c),e));return m.default.createElement("span",(0,s.default)({"data-testid":r,"aria-label":n,ref:d,"data-icon":r,className:v,dangerouslySetInnerHTML:p},f))}}]),n}(m.PureComponent);t.default=S,S.displayName="SVGBase"},28770:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l,t.TextHeader=function(e){var t=e.level,n=void 0===t?"1":t,r=(0,i.default)(e,["level"]);return s.default.createElement(l,(0,a.default)({as:c[n]},r))},t.TextParagraph=function(e){return s.default.createElement(l,(0,a.default)({as:"p"},e))},t.TextDiv=function(e){return s.default.createElement(l,(0,a.default)({as:"div"},e))},t.TextSpan=function(e){return s.default.createElement(l,(0,a.default)({as:"span"},e))};var a=r(n(67154)),i=r(n(6479)),o=r(n(94184)),s=r(n(67294)),u=r(n(58425));function l(e){var t,n,r,a,i=null!==(t=e.as)&&void 0!==t?t:"span",l=e.theme?u.default[e.theme]:null,c=e.color?u.default[`color-${e.color}`]:null,d=u.default[`weight-${null!==(n=e.weight)&&void 0!==n?n:"normal"}`],f=null!=e.customSize?null:null!==(r=e.size)&&void 0!==r?r:"14",p=null!=f?u.default[`size-${f}`]:null;return null!=e.customSize&&(a={fontSize:"string"==typeof e.customSize?e.customSize:`${e.customSize}px`}),s.default.createElement(i,{className:(0,o.default)(l,c,p,d,e.className),style:a},e.children)}var c={1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"}},79077:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TextInputCustomStyleThemes=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=r(n(67294)),f=n(75300),p=a(n(14360)),h=a(n(93868)),_=n(6067),v=r(n(41769)),m=a(n(76568)),g=a(n(27259)),y=a(n(89115)),E=a(n(87729)),S=a(n(75131)),b=a(n(65690)),T=a(n(4268)),w=a(n(88117)),A=n(30564),C=a(n(23225)),O=a(n(38512)),M=(0,g.default)({groupInfoName:null,desaturated:null,noErrorInfo:null});t.TextInputCustomStyleThemes=M;var I=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={active:e.props.startActive||!1,locked:!e.props.startActive&&!!e.props.lockable,emojiPicker:null},e.emojiInputComponent=(0,p.default)(),e._refInputLine=(0,d.createRef)(),e._refEmojiPanel=(0,d.createRef)(),e.isSkinTonePickerOpen=!1,e.onEmojiPicker=function(t){t&&(t.preventDefault(),t.stopPropagation());var n=d.default.createElement(h.default,{onEmoji:e.onEmoji,onFocusNext:e.restoreFocus,onFocusPrev:e.restoreFocus});e.setState({emojiPicker:{menu:n,dirY:f.DirY.TOP,type:"emoji_picker",anchor:t.target}}),e.restoreFocus()},e.onEmojiPickerClose=function(){e.setState({emojiPicker:null})},e.onRestoreEmojiPickerFocus=function(){var t;null===(t=e._refEmojiPanel.current)||void 0===t||t.restoreFocus()},e.onEmoji=function(t){var n;null===(n=e._refInputLine.current)||void 0===n||n.replaceSelection(t)},e.onEnter=function(t){e.props.lockable&&e._onSaveAndLock(),e.props.onEnter&&!e.props.multiline&&(t.persist(),e.props.onEnter(t))},e.onChange=function(t){e.props.onChange&&e.props.onChange(t)},e.restoreFocus=function(){var t;null===(t=e._refInputLine.current)||void 0===t||t.focus()},e.onFocus=function(t){var n,r=t.relatedTarget;r instanceof HTMLElement&&t.currentTarget instanceof HTMLElement&&!t.currentTarget.contains(r)&&(null===(n=e._refInputLine.current)||void 0===n||n.focus())},e.onBlur=function(t){e.isSkinTonePickerOpen||(e.state.active&&e.setState({active:!1}),e.props.onBlur&&e.props.onBlur(t))},e.onFocus=function(t){t.stopPropagation(),e.state.active||e.setState({active:!0}),e.props.onFocus&&e.props.onFocus(t)},e.onSkinTonePicker=function(t){e.isSkinTonePickerOpen=t},e._onUnlock=function(){e.props.onBeginEdit&&e.props.onBeginEdit(),e.setState({locked:!1})},e._onSaveAndLock=function(){var t=!(!e.props.lowProfile&&e.props.error);e.props.validate&&t&&(t=e.props.validate(e.props.value)),t?(e.props.onSave&&e.props.onSave(),e.setState({locked:!0})):e.props.onError&&e.props.onError()},e.onCancel=function(){e.props.onCancel&&e.props.onCancel(),e.setState({locked:!0})},e._showEmptyValuePlaceholder=function(){var t=e.props.value;return(!t||""===t)&&e.props.emptyValuePlaceholder&&e.state.locked},e.isEditing=function(){return e.props.editable&&!e.state.locked},e._renderEmojiText=function(){var t=e.props,n=t.renderEmojiTextInLockMode,r=t.value;if(n&&r){var a=n.textLimit,i=n.readMoreText,o=n.onReadMore,s=n.formatters;return d.default.createElement("div",{className:b.default.emojiText},d.default.createElement(v.default,{text:r,selectable:!0,emojiSize:v.EMOJI_SIZE.SMALL,textLimit:a,formatters:s}),(0,A.numCodepoints)(r)>a&&d.default.createElement("span",{className:b.default.more,role:"button",onClick:o},` ${i}`))}},e.onEmojiFocus=function(){e.state.emojiPicker&&e.onRestoreEmojiPickerFocus()},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.props.focusOnMount&&this.restoreFocus()}},{key:"componentDidUpdate",value:function(e,t){t.locked||!e.editable||this.props.editable||this.onCancel();var n=this._refInputLine.current;this.isEditing()&&!this.props.managed||(null==n?void 0:n.value)===this.props.value||null==n||n.reset(this.props.value||"")}},{key:"render",value:function(){var e,t,r,a,o,s,u=this.props.maxLength||n.defaultProps.maxLength,l=this.isEditing(),f=l&&!!this.props.error&&!this.props.lowProfile,p=this.props.customStyleThemes,h=void 0===p?[]:p,v={container:(0,c.default)(b.default.textInput,h&&h.map((function(e){return b.default[e]})),(e={},(0,i.default)(e,b.default.noPlaceholder,!this.props.placeholder),(0,i.default)(e,b.default.invite,"v4-invite-caption"===this.props.theme),(0,i.default)(e,b.default.active,l),(0,i.default)(e,b.default.small,"small"===this.props.theme),(0,i.default)(e,b.default.inputLarge,"large"===this.props.theme),e)),label:(0,c.default)(b.default.labelText,(t={},(0,i.default)(t,b.default.float,!!this.props.value),(0,i.default)(t,b.default.hideFloatingLabel,!!this.props.hideFloatingLabel),t)),inputWrapper:(0,c.default)(b.default.wrapper,(r={},(0,i.default)(r,b.default.textError,f),(0,i.default)(r,b.default.invite,"v4-invite-caption"===this.props.theme),(0,i.default)(r,b.default.textActive,this.state.active),(0,i.default)(r,b.default.locked,this.state.locked),r)),infoWrapper:(0,c.default)(b.default.infoStrip,(a={},(0,i.default)(a,b.default.textError,f),(0,i.default)(a,b.default.textActive,this.state.active),a))};this.props.lockable&&(this.props.pending?s=d.default.createElement("div",{className:(0,c.default)(b.default.iconSpinner,b.default.iconMain),key:"spinner"},d.default.createElement(E.default,{size:18,stroke:6,color:"highlight"})):this.state.locked?this.props.editable?s=d.default.createElement("div",{className:b.default.iconMain,onClick:this._onUnlock,key:"btn-edit",title:y.default.t(641)},d.default.createElement(S.default,{name:"pencil",directional:!0})):this.props.editRestrictionInfo&&!this.props.editable&&(s=d.default.createElement("div",{className:b.default.iconMain,onClick:this.props.editRestrictionInfo,key:"btn-info"},d.default.createElement(S.default,{name:"info"}))):s=d.default.createElement("div",{className:b.default.iconMain,onClick:this._onSaveAndLock,key:"btn-done",title:y.default.t(536)},d.default.createElement(S.default,{name:"checkmark"})),o=this.props.lockable?d.default.createElement(O.default,{className:b.default.iconMainContainer,transitionName:"pop"},s):null);var g,M=l&&this.props.supportsEmoji?d.default.createElement(C.default,{className:(0,c.default)(b.default.emojiBtn),onClick:this.onEmojiPicker,key:"emoji-btn",onFocus:this.onEmojiFocus},d.default.createElement(S.default,{name:"emoji-input"})):null;if(this.props.showRemaining){var I=(0,A.numCodepoints)(this.props.value||"");g=u-I<50&&l?d.default.createElement("div",{className:(0,c.default)(b.default.charCounter),key:"counter"},y.default.n(u-I)):null}var k,P,R=this.props.supportsEmoji||this.props.showRemaining?d.default.createElement(O.default,{className:b.default.iconsEditContainer,transitionName:"pop"},g,M):null,D=this.props.lowProfile?null:d.default.createElement("div",{className:v.infoWrapper},d.default.createElement("div",{className:b.default.errorText},f?this.props.error:null));this.props.lockable&&!this.state.locked?(this.state.emojiPicker&&(P=d.default.createElement(T.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.onEmojiPickerClose,requestFocus:this.onRestoreEmojiPickerFocus},d.default.createElement(w.default,{contextMenu:this.state.emojiPicker}))),k=d.default.createElement(T.default,{displayName:"TextInput",escapable:!0,requestFocus:this.restoreFocus,requestDismiss:this.onCancel},d.default.createElement("div",null,P))):!this.props.lockable&&this.state.emojiPicker&&(k=d.default.createElement(T.default,{displayName:"EmojiPicker",escapable:!0,popable:!0,requestDismiss:this.onEmojiPickerClose,requestFocus:this.onRestoreEmojiPickerFocus},d.default.createElement(w.default,{contextMenu:this.state.emojiPicker})));var N,L,x=this.props.editable&&!this.state.locked,U=this.props,F=U.emptyValuePlaceholder,G=U.renderEmojiTextInLockMode,B=this.emojiInputComponent,j=x||!G,Y=j?d.default.createElement(B,{a8n:this.props.a8n,ref:this._refInputLine,initialValue:this.props.value,theme:this.props.theme||"default",multiline:this.props.multiline,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onEnter:this.onEnter,onFiles:this.props.onFiles,spellCheck:this.props.spellCheck,maxLength:this.props.maxLength,readOnly:!x,placeholder:this.props.inputPlaceholder}):this._renderEmojiText();return this.props.placeholder&&(N=(!this.props.value||!this.props.hideFloatingLabel)&&d.default.createElement("span",{className:v.label},this.props.placeholder),L=d.default.createElement("div",{className:b.default.spacer})),d.default.createElement(m.default,{className:v.container,onFocus:this.onFocus},N,L,d.default.createElement("div",{className:v.inputWrapper},Y,this._showEmptyValuePlaceholder()&&d.default.createElement("div",{className:b.default.emptyValPlaceholder},F),R,o),j&&d.default.createElement(B.EmojiSuggestions,{theme:_.ThemeOptions.EMOJI_INPUT,onSkinTonePicker:this.onSkinTonePicker}),D,k)}}]),n}(d.Component);t.default=I,I.defaultProps={maxLength:25,editable:!0},I.displayName="TextInput"},92631:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genId=function(e){return f.default.uniqueId(e||"toast")},t.default=t.ToastBody=t.ToastDismissBtn=t.ToastActionBtn=t.Toast=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(81506)),l=a(n(2205)),c=a(n(99842)),d=a(n(94184)),f=a(n(96486)),p=r(n(67294)),h=a(n(34541)),_=a(n(75131)),v=a(n(35997)),m=a(n(30849));var g=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).delay=e.props.setTimeout((function(){h.default.closeToast((0,u.default)(e))}),e.props.duration),e.onDismiss=function(){h.default.closeToast((0,u.default)(e)),e.props.onDismiss&&e.props.onDismiss()},e}return(0,s.default)(n,[{key:"getId",value:function(){return this.props.id}},{key:"restartDelay",value:function(){var e=this;this.props.clearTimeout(this.delay),this.delay=this.props.setTimeout((function(){h.default.closeToast(e)}),this.props.duration)}},{key:"render",value:function(){var e,t=this.props,n=t.msg,r=t.action;return r&&(e=p.default.createElement(y,{buttonText:r.actionText,onClick:r.dismiss?this.onDismiss:r.onAction,theme:r.theme})),p.default.createElement(E,{actionText:n,actionBtn:e})}}]),n}(p.PureComponent);t.Toast=g,g.defaultProps={duration:4e3},g.displayName="Toast";var y=function(e){var t=e.buttonText,n=e.onClick,r=e.theme;return p.default.createElement("button",{className:(0,d.default)(m.default.button,(0,i.default)({},m.default.btnSuccess,"success"===r)),onClick:n},t)};t.ToastActionBtn=y;t.ToastDismissBtn=function(e){e.buttonText;var t=e.onClick;return p.default.createElement("button",{className:m.default.close,onClick:t},p.default.createElement(_.default,{name:"x-alt"}))};var E=function(e){var t=e.toastPosition,n=e.actionText,r=e.actionBtn,a=e.dismissBtn,o=(0,d.default)(m.default.toast,(0,i.default)({},m.default.right,"RIGHT"===t));return p.default.createElement("div",{className:o},p.default.createElement("span",null,n),r,a)};t.ToastBody=E;var S=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"restartDelay",value:function(){var e=this.getComponent();e&&e.restartDelay()}}]),n}((0,v.default)(g));t.default=S},91492:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(94184)),c=a(n(96486)),d=r(n(67294)),f=a(n(34541)),p=a(n(68390)),h=a(n(45599)),_=a(n(92631)),v=a(n(33802)),m=a(n(73358)),g=a(n(38512)),y=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={toasts:{}},e._refToasts=new Map,e._setRefToast=function(t,n){n?e._refToasts.set(t,n):e._refToasts.delete(t)},e._setToastRefCache=new h.default(e._setRefToast),e.openToast=function(t){var n;(n=e._refToasts.get(t.props.id))&&n instanceof _.default?n.restartDelay():(e.state.toasts[t.props.id]=t,e.setState({toasts:e.state.toasts}))},e.closeToast=function(t){var n=e.state.toasts;n[t.props.id]&&e.setState({toasts:c.default.omit(n,t.props.id)})},e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.props.listeners.add(f.default,"open_toast",this.openToast),this.props.listeners.add(f.default,"close_toast",this.closeToast)}},{key:"componentDidUpdate",value:function(e,t){this._animateEnter=Object.keys(t.toasts).length>Object.keys(this.state.toasts).length}},{key:"render",value:function(){var e=this,t=this._animateEnter,n=c.default.sortBy(this.state.toasts,"id").reverse().map((function(n,r){var a=r<3?v.default[`slide${r}`]:v.default.slide3;return 0!==r||t||(a=""),d.default.createElement("div",{key:n.props.id,ref:e._setToastRefCache.getRefSetter(n.props.id),className:(0,l.default)(v.default.wrapper,a)},(0,d.cloneElement)(n))})),r=m.default.isTrident?"fade_sifo":"toast-transition";return d.default.createElement(g.default,{transitionName:r},n)}}]),n}(d.Component);y.displayName="ToastManager";var E=(0,p.default)(y);t.default=E},4268:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(81506)),u=a(n(2205)),l=a(n(99842)),c=r(n(67294)),d=a(n(99934)),f=a(n(37618)),p=a(n(3609)),h=null,_=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this,e,r))._didMount=!1,a._pendingRequestFocus=!1,a._requestFocusTimeout=null,a._refAnchorElement=(0,c.createRef)(),a._setRefChild=function(e){var t="function"==typeof(null==e?void 0:e.getComponent)?e.getComponent():e;a._refChild=t,a.props.children&&"function"==typeof a.props.children.ref&&a.props.children.ref(t)},a.uim=a.context?a.context.branch((0,s.default)(a)):new f.default(void 0,(0,s.default)(a)),a}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(e){e.uimState!==this.props.uimState&&(this.uim.state=this.props.uimState)}},{key:"componentWillUnmount",value:function(){h&&this._requestFocusTimeout===h&&(clearTimeout(h),h=null),this.uim.pop(!0,this.props.requestRecentFocusOnUnmount)}},{key:"activate",value:function(){this.uim.activate()}},{key:"popable",value:function(){return this.props.popable}},{key:"escapable",value:function(){return this.props.escapable}},{key:"requestDismiss",value:function(e){this.props.requestDismiss&&this.props.requestDismiss(e)}},{key:"componentDidMount",value:function(){var e=this.props.requestFocus;this._didMount=!0,e&&this._pendingRequestFocus&&this._maybeCallRequestFocus()}},{key:"requestFocus",value:function(){this.props.requestFocus&&this._didMount?this._maybeCallRequestFocus():this._pendingRequestFocus=!0}},{key:"getDisplayName",value:function(){return this.props.displayName}},{key:"getRef",value:function(){return this._refChild}},{key:"getUIMState",value:function(){return this.props.uimState}},{key:"getNode",value:function(){var e=this._refChild;if(null!=e){if(e instanceof HTMLElement)return e;var t="";try{var n=e.getElement();if(null==n||n instanceof HTMLElement)return n;t=`Non HTML element received:\n${(0,d.default)(n.constructor)}`}catch(e){t=`${e.message}:\n${e.stack}`}__LOG__(4,void 0,new Error,!0)`UIE received a child component that does not have a compatible API:\n${t}`,SEND_LOGS("uie-bad-child-api");var r=this._refAnchorElement.current;if((null==r?void 0:r.previousElementSibling)instanceof HTMLElement)return r.previousElementSibling}return null}},{key:"render",value:function(){var e=this.props.children;if(!e)return null;var t=(0,c.cloneElement)(e,{ref:this._setRefChild});return c.default.createElement(p.default.Provider,{value:this.uim},t,c.default.createElement("div",{ref:this._refAnchorElement,style:{display:"none"},hidden:!0}))}},{key:"_maybeCallRequestFocus",value:function(){var e=this,t=this.props.requestFocus;t&&(h&&clearTimeout(h),this._requestFocusTimeout=h=setTimeout((function(){t(),e._requestFocusTimeout=h=null}),0))}}]),n}(c.Component);t.default=_,_.State=f.default.State,_.defaultProps={uimState:f.default.State.ACTIVE,requestRecentFocusOnUnmount:!0},_.contextType=p.default,_.displayName="UIE"},15848:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=(0,a.forwardRef)((function(e,t){var n=e.children,r=(0,a.useRef)();return(0,a.useImperativeHandle)(t,(function(){return{getElement:function(){return r.current}}})),a.default.createElement("div",{ref:r},n)}));t.default=i},88117:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=n(67294),c=r(n(34541)),d=r(n(17957)),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=(0,a.default)((0,a.default)({},this.props.contextMenu),{},{uim:this.props.uim});c.default.openContextMenu(t,(function(t){e.element=t}))}},{key:"componentWillUnmount",value:function(){c.default.closeContextMenu(this.props.uim)}},{key:"getElement",value:function(){return this.element}},{key:"render",value:function(){return null}}]),n}(l.Component);f.displayName="UIEMenu";var p=(0,d.default)(f);t.default=p},29358:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=n(67294),c=r(n(34541)),d=r(n(17957)),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=(0,a.default)((0,a.default)({},this.props.tooltip),{},{uim:this.props.uim});c.default.openTooltip(t,(function(t){e.element=t}))}},{key:"componentWillUnmount",value:function(){c.default.closeTooltip(this.props.uim)}},{key:"getElement",value:function(){return this.element}},{key:"render",value:function(){return null}}]),n}(l.Component);f.displayName="UIETooltip";var p=(0,d.default)(f);t.default=p},23225:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.a8nText,n=e.className,r=e.children,f=e.disabled,p=e.onClick,h=e.title,_=e.type,v=void 0===_?"button":_,m=e.onFocus,g=(0,o.default)(e,["a8nText","className","children","disabled","onClick","title","type","onFocus"]),y=(0,d.default)(),E=(0,i.default)(y,2),S=E[0],b=E[1],T={};null!=g["aria-label"]&&(T["aria-label"]=g["aria-label"]);null!=g["aria-pressed"]&&(T["aria-pressed"]=g["aria-pressed"]);return u.default.createElement("button",(0,a.default)({className:(0,s.default)(c.default.button,b&&c.default.focused,n),"data-a8n":l.default.key(t),disabled:!0===f,onClick:p,onFocus:m,ref:S,title:h,type:v},T),r)};var a=r(n(67154)),i=r(n(63038)),o=r(n(6479)),s=r(n(94184)),u=r(n(67294)),l=r(n(97930)),c=r(n(90657)),d=r(n(51912))},73811:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SIZE=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=r(n(67294)),f=a(n(34263)),p=a(n(49315)),h=a(n(40167)),_=a(n(8513)),v=n(12512),m=a(n(34432)),g=a(n(57312)),y=a(n(68390)),E=n(36474),S=_.default.getGlyphId,b=_.default.getGlyphPath,T=_.default.markGlyphCached,w=_.default.isGlyphCached,A=v.LARGE_EMOJI_SIZE;t.SIZE=A;var C="large",O="xlarge",M=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(e){var r;(0,o.default)(this,n),(r=t.call(this,e))._onHighResLoaded=function(){var e=S(r.props.emoji);null!=e&&T(e),r.setState({highResLoaded:!0})};var a=S(e.emoji),i=Boolean(null!=a&&w(a));return r.state={highResLoaded:i},r}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.listeners.add(window,"dpichange",(function(){var t=S(e.props.emoji),n=Boolean(null!=t&&w(t));e.setState({highResLoaded:n})}))}},{key:"render",value:function(){var e,t=this.props,n=t.emoji,r=t.size,a=t.animation,o=t.element,s=t.selectable,u=this.state.highResLoaded,l=S(n);if(null==l)return null;var _,v=(0,c.default)((e={},(0,i.default)(e,g.default.medium,r===A.MEDIUM),(0,i.default)(e,g.default.large,r===A.LARGE),(0,i.default)(e,g.default.xlarge,r===A.XLARGE),e));_=r===A.XLARGE?O:C;var y=b(l,_)[p.default.currentRes];if(u&&a)return d.default.createElement(o,{className:g.default.animation},d.default.createElement(E.SelectableImg,{alt:n,className:(0,c.default)(g.default.highRes,v),draggable:!1,plainText:n,selectable:Boolean(s),src:f.default.ONE_BY_ONE_TRANS_GIF}),d.default.createElement(m.default,{className:(0,c.default)(g.default.highRes,v,g.default.heartbeat),draggable:!1,selectable:!1,src:y}));var T=u?void 0:d.default.createElement(h.default,{key:"low-res",className:(0,c.default)(g.default.lowRes,v),emoji:n,selectable:s}),w=d.default.createElement(h.default,{key:"high-res",className:(0,c.default)(g.default.highRes,v,(0,i.default)({},g.default.invisible,!u)),emoji:n,selectable:s,src:y,onLoad:this._onHighResLoaded});return d.default.createElement("span",{className:g.default.wrapper},T,w)}}]),n}(d.Component);M.defaultProps={animation:!1,element:"div",size:A.MEDIUM},M.displayName="LargeEmoji";var I=(0,y.default)(M);t.default=I},99934:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e?e:e&&(e.displayName||e.name)||"Component"}},67780:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GetRef=function(e){return function(t){t?"function"==typeof t._getComponent?e(t._getComponent()):e(t):e(void 0)}},t._getComponent=function(){var e=this.component||this.refs.component;if("function"==typeof e._getComponent)return e._getComponent();return e},t.WrappedComponent=t.HOCRef=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(91080)),c=n(67294);t.HOCRef="component";var d=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).setComponent=function(e){r.component=e},r.state=(0,a.default)({},r.state),r}return(0,o.default)(n,[{key:"componentDidCatch",value:function(e,t){__LOG__(4,void 0,new Error,!0)`${e.stack}\n${t.componentStack}`,SEND_LOGS("component-did-catch")}},{key:"getComponent",value:function(){return this.component instanceof n?this.component.getComponent():(0,l.default)(this.component,"this.component")}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(c.Component);t.WrappedComponent=d},68390:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r;return n=t=function(t){(0,i.default)(r,t);var n=(0,o.default)(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).listeners=new m,e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.listeners.internalUseOnlyMarkMounted()}},{key:"componentWillUnmount",value:function(){this.listeners.internalUseOnlyMarkUnmounted()}},{key:"_getComponent",value:function(){return _._getComponent.call(this)}},{key:"render",value:function(){return this.state.hasError?null:l.default.createElement(e,(0,a.default)({ref:this.setComponent},this.props,{listeners:this.listeners}))}}]),r}(_.WrappedComponent),t.defaultProps=null!==(r=e.defaultProps)&&void 0!==r?r:void 0,t.displayName=`Listener(${(0,h.default)(e)})`,n},t.Listeners=void 0;var a=r(n(67154)),i=r(n(2205)),o=r(n(99842)),s=r(n(34575)),u=r(n(93913)),l=r(n(67294)),c=r(n(35340)),d=n(2277),f=r(n(34541)),p=r(n(61713)),h=r(n(99934)),_=n(67780),v=r(n(77785)),m=function(){function e(){var t=this;(0,s.default)(this,e),this._mounted=!1,this._unmounted=!1,this._listeners=new Set,this._remove=function(e){e.disengage(),t._listeners.delete(e)}}return(0,u.default)(e,[{key:"_add",value:function(e){this._unmounted?__LOG__(3)`Listener added after unmounting`:(this._listeners.add(e),this._mounted&&e.engage())}},{key:"internalUseOnlyMarkMounted",value:function(){this._mounted=!0,this._listeners.forEach((function(e){e.engage()}))}},{key:"internalUseOnlyMarkUnmounted",value:function(){this._unmounted=!0,this._listeners.forEach(this._remove),this._abortController&&this._abortController.abort()}},{key:"add",value:function(e,t,n,r){var a=this,i=new v.default(e,t,(function(){a._unmounted||n.apply(this,arguments)}),r,n);this._add(i)}},{key:"addOnce",value:function(e,t,n,r){var a=this,i=new v.default(e,t,(function(){a._remove(i),a._unmounted||n.apply(this,arguments)}),r,n);this._add(i)}},{key:"remove",value:function(e,t,n,r){var a=this;this._listeners.forEach((function(i){i.represents(e,t,n,r)&&a._remove(i)}))}},{key:"uiIdle",value:function(e){f.default.uiBusy?this.addOnce(f.default,"ui_idle",e):(this._abortController=this._abortController||new c.default,(0,p.default)({signal:this._abortController.signal}).then((function(){e()}),(function(e){if(e.name!==d.ABORT_ERROR)throw e})))}},{key:"testsOnlyGetListeners",value:function(){return this._listeners}}]),e}();t.Listeners=m},42027:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a;return n=t=function(t){(0,l.default)(a,t);var n=(0,c.default)(a);function a(){var e;(0,s.default)(this,a);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i)))._isUnmounted=!1,e.rejectOnUnmount=function(){return e._rejectPromise||(e._rejectPromise=new r((function(t,n){e._rejector=n})),e._rejectPromise.catch((function(){})),e._isUnmounted&&e._rejector(new f.Unmount)),e._rejectPromise},e}return(0,u.default)(a,[{key:"componentWillUnmount",value:function(){this._isUnmounted=!0,this._rejectPromise&&this._rejector(new f.Unmount)}},{key:"_getComponent",value:function(){return h._getComponent.call(this)}},{key:"render",value:function(){return this.state.hasError?null:d.default.createElement(e,(0,o.default)({ref:this.setComponent,rejectOnUnmount:this.rejectOnUnmount},this.props))}}]),a}(h.WrappedComponent),t.defaultProps=null!==(a=e.defaultProps)&&void 0!==a?a:void 0,t.displayName=`Promise(${(0,p.default)(e)})`,n};var o=i(n(67154)),s=i(n(34575)),u=i(n(93913)),l=i(n(2205)),c=i(n(99842)),d=i(n(67294)),f=a(n(98569)),p=i(n(99934)),h=n(67780)},44589:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,_,v=(0,p.default)(e);t||n||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`StateHOC wrapping class with no concerns, check ${v}`));var m=[];if(t)for(var g in t)m.push(new f.default(v,g,t[g],!0));if(n)for(var y in n)t&&t.hasOwnProperty(y)&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS(`Component has marked "${y}" as both a normal and weak concern, check ${v}`)),m.push(new f.default(v,y,n[y],!1));return _=r=function(t){(0,l.default)(r,t);var n=(0,c.default)(r);function r(e){var t;(0,s.default)(this,r),(t=n.call(this,e))._rr=function(e,n){t.setState((function(t){return{proxies:(0,o.default)((0,o.default)({},t.proxies),{},(0,i.default)({},e.name,e.createProxy(n)))}}))};for(var a={},u=!1,l=0;l<m.length;l++){var c=m[l],d=c.name,f=c.getModelAndValidate(r._getModelOrProxy(d,e));if(f){var p=c.createProxy(f);c.attachConcern(f,p.proxyBitMask,t._rr),a[d]=p}else u=!0}return t.state={props:e,proxies:a,hasBroken:u},t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){if(!this.state.hasBroken)for(var t=0;t<m.length;t++){var n=m[t],a=n.name,i=n.getModel(r._getModelOrProxy(a,e)),o=n.getModelAndValidate(r._getModelOrProxy(a,this.props));if(i!==o&&(n.detachConcern(i,this._rr),o)){var s=this.state.proxies[a];n.attachConcern(o,s.proxyBitMask,this._rr)}}}},{key:"componentWillUnmount",value:function(){if(!this.state.hasBroken)for(var e=0;e<m.length;e++){var t=m[e];t.detachConcern(t.getModel(r._getModelOrProxy(t.name,this.props)),this._rr)}}},{key:"_getComponent",value:function(){return h._getComponent.call(this)}},{key:"render",value:function(){var t=this.state,n=t.proxies,r=t.hasBroken,i=t.hasError;return r||i?null:d.default.createElement(e,(0,a.default)({ref:this.setComponent},this.props,n))}}],[{key:"_getModelOrProxy",value:function(e,t){return t[e]}},{key:"getDerivedStateFromProps",value:function(e,t){var n=(0,o.default)({},t.proxies),a=!1;if(!t.hasBroken)for(var i=t.props,s=0;s<m.length;s++){var u=m[s],l=u.name,c=u.getModel(r._getModelOrProxy(l,i)),d=u.getModelAndValidate(r._getModelOrProxy(l,e));c!==d&&(d?n[l]=u.createProxy(d):a=!0)}return{props:e,proxies:n,hasBroken:a}}}]),r}(h.WrappedComponent),r.displayName=`State(${v})`,_};var a=r(n(67154)),i=r(n(59713)),o=r(n(81109)),s=r(n(34575)),u=r(n(93913)),l=r(n(2205)),c=r(n(99842)),d=r(n(67294)),f=r(n(18138)),p=r(n(99934)),h=n(67780)},89305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unproxy=function(e){if(null==e?void 0:e.$ProxyState$state)return e.$ProxyState$state;return e}},35997:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;return n=t=function(t){(0,u.default)(r,t);var n=(0,l.default)(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a)))._timers=new Map,e._timerId=0,e._unmounted=!1,e.setInterval=function(t,n){e._unmounted&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Setting interval after unmount"));var r=++e._timerId,a=window.setInterval(t,n);return e._timers.set(r,(function(){window.clearInterval(a),e._timers.delete(r)})),r},e.clearInterval=function(t){var n=e._timers.get(t);n&&n()},e.setTimeout=function(t,n){e._unmounted&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Setting timeout after unmount"));var r=e._cbWrapper(t),a=(0,i.default)(r,2),o=a[0],s=a[1],u=window.setTimeout(s,n);return e._timers.set(o,(function(){window.clearTimeout(u),e._timers.delete(o)})),o},e.clearTimeout=function(t){var n=e._timers.get(t);n&&n()},e.requestAnimationFrame=function(t){e._unmounted&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Requesting animation frame after unmount"));var n=e._cbWrapper(t),r=(0,i.default)(n,2),a=r[0],o=r[1],s=window.requestAnimationFrame(o);return e._timers.set(a,(function(){window.cancelAnimationFrame(s),e._timers.delete(a)})),a},e.cancelAnimationFrame=function(t){var n=e._timers.get(t);n&&n()},e.throttle=function(t,n,r){e._unmounted&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Throttling after unmount"));var a=e._cbWrapper(t),o=(0,i.default)(a,2),s=o[0],u=o[1],l=c.default.throttle(u,n,r),d=l.cancel.bind(l);l.cancel=function(){d(),e._timers.delete(s)};var f=function(){e._unmounted||(e._timers.set(s,l.cancel),l.apply(void 0,arguments))};return f.cancel=l.cancel,f.flush=l.flush,f},e.debounce=function(t,n,r){e._unmounted&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Debouncing after unmount"));var a=e._cbWrapper(t),o=(0,i.default)(a,2),s=o[0],u=o[1],l=c.default.debounce(u,n,r),d=l.cancel.bind(l),f=l.flush.bind(l);l.cancel=function(){d(),e._timers.delete(s)},l.flush=function(){f()};var p=function(){e._unmounted||(e._timers.set(s,l.cancel),l.apply(void 0,arguments))};return p.cancel=l.cancel,p.flush=l.flush,p},e._cbWrapper=function(t){var n=++e._timerId;return[n,function(){e._timers.delete(n),t.apply(void 0,arguments)}]},e}return(0,s.default)(r,[{key:"_getComponent",value:function(){return p._getComponent.call(this)}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,this._timers.forEach((function(e){return e()}))}},{key:"render",value:function(){return this.state.hasError?null:d.default.createElement(e,(0,a.default)({ref:this.setComponent,setInterval:this.setInterval,clearInterval:this.clearInterval,setTimeout:this.setTimeout,clearTimeout:this.clearTimeout,requestAnimationFrame:this.requestAnimationFrame,cancelAnimationFrame:this.cancelAnimationFrame,debounce:this.debounce,throttle:this.throttle},this.props))}}]),r}(p.WrappedComponent),t.displayName=`Timer(${(0,f.default)(e)})`,n};var a=r(n(67154)),i=r(n(63038)),o=r(n(34575)),s=r(n(93913)),u=r(n(2205)),l=r(n(99842)),c=r(n(96486)),d=r(n(67294)),f=r(n(99934)),p=n(67780)},3646:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.requireMain=function(){return u().then((function(e){return e.requireMain()}))},t.requireContactCollection=function(){return u().then((function(e){return e.requireContactCollection()}))},t.requireLoadProtoVersions=function(){return u().then((function(e){return e.requireLoadProtoVersions()}))},t.requireHandleSocketMessage=function(){return u().then((function(e){return e.requireHandleSocketMessage()}))},t.requireEmojiConfig=function(){return u().then((function(e){return e.requireEmojiConfig()}))},t.requireEmojiAssetMapCreator=function(){return u().then((function(e){return e.requireEmojiAssetMapCreator()}))},t.requireStatusV3Collection=function(){return u().then((function(e){return e.requireStatusV3Collection()}))},t.requireClearAppStates=function(){return u().then((function(e){return e.requireClearAppStates()}))},t.requireLabelCollection=function(){return u().then((function(e){return e.requireLabelCollection()}))},t.requireChatCollection=function(){return u().then((function(e){return e.requireChatCollection()}))},t.requireMsgCollection=function(){return u().then((function(e){return e.requireMsgCollection()}))},t.requireStickerPackCollection=function(){return u().then((function(e){return e.requireStickerPackCollection()}))},t.requireCallCollection=function(){return u().then((function(e){return e.requireCallCollection()}))},t.requireVoip=function(){return u().then((function(e){return e.requireVoip()}))},t.requireVoipCommonDisabled=function(){return u().then((function(e){return e.requireVoipCommonDisabled()}))},t.requireSetHandlers=function(){return u().then((function(e){return e.requireSetHandlers()}))};var a=r(n(96486)),i=r(n(35340)),o=r(n(14534));var s={minTimeout:1e3,maxTimeout:12e4,retries:1/0,signal:(new i.default).signal};var u=a.default.once((function(){return(0,o.default)(s,(function(e,t){return Promise.all([n.e(9451),n.e(7964)]).then(n.bind(n,27596)).catch((function(n){return __LOG__(3)`failed to load main bundle`,10===t&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("failed to load main bundle")),e(n)}))}))}))},2989:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(String.prototype.normalize)return r.resolve();return(0,o.promiseLoop)((function(e,t,r){var a=(0,i.delayMs)(s.expBackoff(r,12e4,1e3,.1));return n.e(9191).then(n.t.bind(n,31457,23)).then((function(){return e()})).catch((function(){return a}))}))};var i=n(53615),o=n(80835),s=a(n(59502))},77785:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(85722)),s=r(n(28681));function u(e){return e instanceof s.default}var l=function(){function e(t,n,r,i,s){(0,a.default)(this,e),this._hasEngaged=!1,this._hasDisengaged=!1,this.source=t,this.cb=r,this.capture=i,this._cbIdentifier=s,u(t)||"function"==typeof t.on?this.event=n:this.event=o.default.prefix(n,t)}return(0,i.default)(e,[{key:"engage",value:function(){if(!this._hasEngaged&&!this._hasDisengaged){this._hasEngaged=!0;var e=this.source,t=this.event;u(e)||"function"==typeof e.on?(e.on(t,this.cb),"function"==typeof e.incObservers&&e.incObservers()):this.capture?e.addEventListener(t,this.cb,this.capture):e.addEventListener(t,this.cb)}}},{key:"disengage",value:function(){if(!this._hasDisengaged&&(this._hasDisengaged=!0,this._hasEngaged)){var e=this.source,t=this.event;u(e)||"function"==typeof e.off?(e.off(this.event,this.cb),"function"==typeof e.decObservers&&e.decObservers()):this.capture?e.removeEventListener(t,this.cb,this.capture):e.removeEventListener(t,this.cb)}}},{key:"represents",value:function(e,t,n,r){if(this.source!==e)return!1;if(this.event!==t)return!1;if(this._cbIdentifier!==n)return!1;if(r&&"object"==typeof r){var a=this.capture;return!(!a||"object"!=typeof a)&&(a.passive===r.passive&&a.capture===r.capture)}return this.capture===r}}]),e}();t.default=l},76582:()=>{},40462:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=n(53615),c=n(80835),d=r(n(67294)),f=a(n(35340)),p=a(n(1073)),h=a(n(8762)),_=a(n(25960)),v=a(n(89115)),m=a(n(55090)),g=a(n(67890)),y=a(n(87729)),E=r(n(59502)),S=r(n(6497)),b=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={giveUp:!1},e}return(0,o.default)(n,[{key:"update",value:function(){var e=this;return(0,c.promiseLoop)((function(t,n,r){var a=(0,l.delayMs)(E.expBackoff(r,12e4,1e3,.1));return g.default.waitIfOffline({signal:(new f.default).signal}).then((function(){return S.default.update(void 0,!0,0).then((function(n){return n===S.DownloadState.UPDATE_NOT_AVAILABLE?(e.setState({giveUp:!0}),t()):n===S.DownloadState.UPDATE_DOWNLOADED?(S.default.restart(),t()):r>=3?(e.setState({giveUp:!0}),t()):a}))}))}))}},{key:"componentDidMount",value:function(){var e=this;process.mas||process.windowsStore||(this.update(),this.timeout=p.default.setLocalTimeout((function(){e.setState({giveUp:!0})}),Date.now()+18e5))}},{key:"componentWillUnmount",value:function(){p.default.clearTimeout(this.timeout)}},{key:"render",value:function(){var e;return process.mas||process.windowsStore?(e=process.mas?v.default.t(615):v.default.t(622),d.default.createElement(_.default,{cover:!0,title:v.default.t(612),okText:v.default.t(611),onOK:S.default.manualDownload.bind(S.default)},e)):this.state.giveUp?d.default.createElement(_.default,{cover:!0,title:v.default.t(619),okText:v.default.t(617),onOK:S.default.manualDownload.bind(S.default)},v.default.t(618)):d.default.createElement(m.default,{cover:!0,title:v.default.t(621)},d.default.createElement("span",null,v.default.t(620)),d.default.createElement("div",{className:h.default.pending},d.default.createElement(y.default,{stroke:4,size:40,color:"highlight"})))}}]),n}(d.Component);b.displayName="ClientExpiredDialog";var T=b;t.default=T},25960:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(16973)),d=a(n(76568)),f=a(n(89115)),p=a(n(55090)),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._setRefEl=function(t){e._refEl=t},e.onOK=function(t){t.stopPropagation(),t.preventDefault(),e.props.onOK&&e.props.onOK()},e.onCancel=function(t){t.stopPropagation(),t.preventDefault(),e.props.onCancel&&e.props.onCancel()},e}return(0,o.default)(n,[{key:"getElement",value:function(){this._refEl}},{key:"render",value:function(){var e=this.props.onOK?l.default.createElement(c.default,{a8nText:"popup-controls-ok",type:"primary",onClick:this.onOK,disabled:this.props.okDisabled,spinner:!0===this.props.okSpinner},this.props.okText||f.default.t(1826)):null,t=this.props.onCancel?l.default.createElement(c.default,{a8nText:"popup-controls-cancel",type:this.props.onOK?"secondary":"primary",onClick:this.onCancel},this.props.cancelText||f.default.t(1657)):null,n={escape:this.props.onCancel?this.onCancel:function(){}},r=l.default.createElement(l.default.Fragment,null,t,e);return l.default.createElement(d.default,{handlers:n,onRef:this._setRefEl},l.default.createElement(p.default,{actions:r,children:this.props.children,cover:this.props.cover,onDragChange:this.props.onDragChange,onDrop:this.props.onDrop,type:this.props.type,title:this.props.title}))}}]),n}(l.Component);t.default=h,h.displayName="ConfirmPopup"},79037:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children,n=e.cancelText,r=e.onCancel,o=e.okText,s=e.onOK;return a.default.createElement(i.default,{cover:!0,children:t,cancelText:n,onCancel:r,okText:o,onOK:s})};var a=r(n(67294)),i=r(n(25960))},44419:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(59713)),o=a(n(81109)),s=a(n(63038)),u=n(53615),l=r(n(67294)),c=a(n(34541)),d=a(n(66028)),f=r(n(20707)),p=a(n(37807)),h=n(19247),_=a(n(7860)),v=n(54302).Mirrored(["INITIAL_LOAD","CONNECTING","FAKE_FILL","DOWNLOADING","ORGANIZING"]),m=n(54302).Mirrored(["NOT_STARTED","STARTED","PAST_MIN_TIME"]),g=function(e){var t=e.onReady,n=e.onLogout,r=e.initialLoadReady,a=(0,p.default)(),g=(0,l.useRef)(!1),y=(0,l.useState)(r?f.Stage.CONNECTING:f.Stage.INITIAL_LOAD),E=(0,s.default)(y,2),S=E[0],b=E[1],T=(0,l.useState)({INITIAL_LOAD:r?m.PAST_MIN_TIME:m.NOT_STARTED,CONNECTING:m.NOT_STARTED,FAKE_FILL:m.NOT_STARTED,DOWNLOADING:m.NOT_STARTED,ORGANIZING:m.NOT_STARTED}),w=(0,s.default)(T,2),A=w[0],C=w[1],O=(0,l.useState)(0),M=(0,s.default)(O,2),I=M[0],k=M[1],P=(0,l.useState)(null),R=(0,s.default)(P,2),D=R[0],N=R[1];(0,h.useListener)(c.default,"offline_progress_update",(function(){A.CONNECTING===m.PAST_MIN_TIME&&k(d.default.getOfflineDeliveryProgress());var e=d.default.getHasMessagesToDownload();null==D&&null!=e&&N(e)}));var L=(0,l.useCallback)((function(e,t){return C((function(t){return(0,o.default)((0,o.default)({},t),{},(0,i.default)({},e,m.STARTED))})),__LOG__(2)`DebouncedLoadingScreen: ${e} - starts minimum display time`,(0,u.delayMs)(t).then((function(){a()&&(C((function(t){return(0,o.default)((0,o.default)({},t),{},(0,i.default)({},e,m.PAST_MIN_TIME))})),__LOG__(2)`DebouncedLoadingScreen: ${e} - ends minimum display time`)}))}),[a]),x=A.CONNECTING,U=A.DOWNLOADING,F=A.ORGANIZING,G=A.FAKE_FILL,B=A.INITIAL_LOAD;return(0,l.useEffect)((function(){if(F===m.PAST_MIN_TIME)g.current||(t(),g.current=!0);else if(U===m.PAST_MIN_TIME&&I>=100&&F===m.NOT_STARTED)(0,u.delayMs)(450).then((function(){a()&&(b(f.Stage.ORGANIZING),L(v.ORGANIZING,800))}));else if(x===m.PAST_MIN_TIME&&null!=D&&U===m.NOT_STARTED&&G===m.NOT_STARTED){var e=d.default.getFinishedDownloading();D&&!e?(b(f.Stage.DOWNLOADING),k(d.default.getOfflineDeliveryProgress()),L(v.DOWNLOADING,450)):(k(100),L(v.FAKE_FILL,450).then((function(){a()&&(_.default.hasSynced?g.current||(t(),g.current=!0):(b(f.Stage.ORGANIZING),L(v.ORGANIZING,800)))})))}else r&&B===m.PAST_MIN_TIME&&x===m.NOT_STARTED?(b(f.Stage.CONNECTING),L(v.CONNECTING,1500)):B===m.NOT_STARTED&&L(v.INITIAL_LOAD,500)}),[I,t,D,L,a,r,x,U,F,G,B]),(0,l.useMemo)((function(){return l.default.createElement(f.default,{stage:S,progress:I,onLogout:n})}),[S,I,n])};t.default=g},40145:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(25960)),o=r(n(89115)),s=r(n(7860));t.default=function(){return a.default.createElement(i.default,{cover:!0,cancelText:o.default.t(1015),onCancel:s.default.logout.bind(s.default,!0),okText:o.default.t(962),onOK:s.default.poke.bind(s.default)},o.default.t(1231))}},87176:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(83322));function d(e){if(e.dataTransfer){try{if(!e.dataTransfer.dropEffect)return}catch(e){return}e.dataTransfer.effectAllowed&&(e.nativeEvent.dataTransfer.dropEffect="copy")}}var f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isDragging:!1,fromDrop:!1,blockDrop:!1},e.onDragStart=function(){e.props.disableFromWithin&&e.setState({blockDrop:!0})},e.onDragEnd=function(){e.props.disableFromWithin&&e.setState({blockDrop:!1})},e.onDrop=function(t){t.preventDefault(),t.stopPropagation(),e.setState({isDragging:!1,fromDrop:!0}),e.props.onDrop&&!e.state.blockDrop&&e.props.onDrop(t)},e.onDragOver=function(t){t.preventDefault(),t.stopPropagation(),e.state.isDragging||e.state.blockDrop||(e.setState({isDragging:!0,fromDrop:!1}),d(t))},e.onDragLeave=function(t){t.preventDefault(),t.stopPropagation(),e.state.isDragging&&e.setState({isDragging:!1,fromDrop:!1})},e}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.isDragging,a=n.fromDrop,i=this.props.onDragChange;t.isDragging!==r&&i&&i(r,a)}},{key:"render",value:function(){return l.default.createElement("div",{key:"mask",className:c.default.mask,style:this.state.isDragging?{}:{display:"none"},onDragLeave:this.onDragLeave,onDrop:this.onDrop})}}]),n}(l.PureComponent);t.default=f,f.displayName="DragAndDrop"},20707:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Stage=void 0;var i=a(n(59713)),o=a(n(94184)),s=r(n(67294)),u=a(n(16973)),l=a(n(89115)),c=a(n(45425)),d=a(n(24326)),f=a(n(16548)),p=n(54302).Mirrored(["INITIAL_LOAD","CONNECTING","DOWNLOADING","ORGANIZING"]);t.Stage=p;var h=function(){return s.default.createElement("span",null,s.default.createElement("svg",{width:"250px",height:"52px",viewBox:"0 0 250 52",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("g",{className:d.default.dots},s.default.createElement("circle",{fill:"#B6B6B6",cx:"65.7636689",cy:"21.1046108",r:"3.65625"}),s.default.createElement("circle",{fill:"#B6B6B6",cx:"81.0791876",cy:"19.3283142",r:"3.65625"}),s.default.createElement("circle",{fill:"#B6B6B6",cx:"96.3947063",cy:"17.7846275",r:"3.65625"}),s.default.createElement("circle",{fill:"#B6B6B6",cx:"111.710225",cy:"17.5274031",r:"3.65625"}),s.default.createElement("circle",{fill:"#B6B6B6",cx:"127.025744",cy:"17.6118619",r:"3.65625"}),s.default.createElement("circle",{fill:"#B6B6B6",cx:"142.341262",cy:"18.4196288",r:"3.65625"}),s.default.createElement("circle",{fill:"#B6B6B6",cx:"157.656781",cy:"19.9893339",r:"3.65625"}),s.default.createElement("circle",{fill:"#B6B6B6",cx:"172.9723",cy:"22.0657859",r:"3.65625"})),s.default.createElement("path",{className:d.default.laptop,d:"M190.14097 4.7518926h48.227869l.281462-.00596781c1.058365-.00288774 2.664865.25185461 2.695721 2.87464716.142823 12.13996425 0 22.28077555 0 34.40910725 0 .06028-.024112.168784-.036168.217008l-16.394805-.0086927c-12.47317.0007215-24.136918.0136044-37.78743-.0033633l-.010915-6.2953341c-.030319-9.5718533-.105914-18.2714581.010915-28.31872515.033356-2.86867935 1.976535-2.91690333 3.013351-2.86867935zm20.097267 4.28597465l-19.256815-.00079524.002426 4.98254029c-.000422 6.5558423-.012657 12.8111695-.002954 19.3619492l.011919 4.9777941h46.536157l.008754-4.9777414c.010547-8.1882109.002637-15.913459.002637-24.3331514l-27.302124-.01059555zM179.195421 44.6572387c.397848-.036168.807752-.024112 1.2056-.024112 9.620684 0 19.241369-.012056 28.862053 0 .132616.4701838.54252 1.6393289 1.036816 1.6393289 3.255119.012056 4.510238 0 7.765357 0 .542519.036168.988591-1.1450331 1.133263-1.6513849 9.910029 0 19.820057.012056 29.730086.012056.084392.012056.265232.036168.349624.048224-.016075.2571945-.016075 1.0085894 0 2.2541846 0 1.4209691-1.193544 1.8201689-1.965128 2.1215688-.421959.1205599-.868031.1326159-1.289991.1928959h-63.560505c-.651024-.072336-1.350272-.108504-1.916904-.4701838-.566631-.2893439-1.000647-.7595278-1.350271-1.2779356v-2.8446419z",fill:"currentColor"}),s.default.createElement("path",{className:d.default.logo,d:"M37.7314595,31.1612046 C37.0876293,30.8391042 33.9223475,29.2816062 33.332139,29.0666255 C32.7419305,28.8517683 32.3127104,28.7444016 31.8834903,29.3887258 C31.4542703,30.0332973 30.2204788,31.4835521 29.8447567,31.91339 C29.4692818,32.3428571 29.0936834,32.3968494 28.4499768,32.0745019 C27.8060232,31.7521544 25.7314595,31.0723707 23.272278,28.8787027 C21.3582085,27.171583 20.0661004,25.0632896 19.6905019,24.4185946 C19.315027,23.7741467 19.6505946,23.4257297 19.9729421,23.1046178 C20.2625483,22.8161235 20.6167722,22.352556 20.9386255,21.9767104 C21.2606023,21.6007413 21.3678456,21.3320154 21.5824556,20.9026718 C21.7970657,20.472834 21.6898224,20.0968649 21.528834,19.7746409 C21.3678456,19.452417 20.0801853,16.2831815 19.543722,14.993915 C19.0210965,13.7387491 18.4903166,13.9087567 18.0950733,13.8887413 C17.7199691,13.870085 17.2902548,13.8661313 16.8611583,13.8661313 C16.4319382,13.8661313 15.7343629,14.0272433 15.144278,14.6716911 C14.5540695,15.3163861 12.8908108,16.8740077 12.8908108,20.0429961 C12.8908108,23.2121081 15.1978996,26.2734826 15.5198765,26.7031969 C15.8417297,27.1330348 20.0597992,33.6360772 26.5184865,36.4250193 C28.05461,37.0883707 29.2539305,37.4846023 30.1888494,37.7811274 C31.7312742,38.2713822 33.1348263,38.2021931 34.2440772,38.0363861 C35.4810811,37.8515521 38.0533127,36.478888 38.5898996,34.9750116 C39.1263629,33.470888 39.1263629,32.1818687 38.9653745,31.91339 C38.8045097,31.6447876 38.3752896,31.4835521 37.7314595,31.1612046 M25.9838765,47.2013591 L25.9752278,47.2013591 C22.1322625,47.1998763 18.3629343,46.1674749 15.0745946,44.2160926 L14.2926332,43.7519074 L6.18674906,45.8782394 L8.35027028,37.9751042 L7.84111198,37.1648494 C5.69723552,33.7549343 4.56500386,29.8139923 4.56660833,25.767166 C4.57130502,13.9587954 14.1789652,4.35187645 25.9924016,4.35187645 C31.7128649,4.35385328 37.0902239,6.58458689 41.1338378,10.6327722 C45.1773282,14.680834 47.4028724,20.0618996 47.4007737,25.7843398 C47.3959539,37.5936988 37.7882934,47.2013591 25.9838765,47.2013591 M44.2112742,7.556695 C39.3464092,2.68614672 32.8767258,0.00271814672 25.9836293,0 C11.7809421,0 0.221652509,11.5584247 0.215969112,25.7654363 C0.21411583,30.3069652 1.40058687,34.7397683 3.65553668,38.6475984 L-4.61852778e-14,52 L13.6596757,48.4167413 C17.4233205,50.4695597 21.6607876,51.5516293 25.9733745,51.5531121 L25.9838765,51.5531121 L25.984,51.5531121 C40.1852046,51.5531121 51.7456062,39.9934517 51.7512912,25.7860695 C51.7538842,18.9011274 49.0761392,12.4271197 44.2112742,7.556695",fill:"currentColor"})))},_=function(){return s.default.createElement("span",null,s.default.createElement("svg",{width:"10px",height:"12px",viewBox:"0 0 10 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M5.00847986,1.6 C6.38255462,1.6 7.50937014,2.67435859 7.5940156,4.02703389 L7.59911976,4.1906399 L7.599,5.462 L7.75719976,5.46214385 C8.34167974,5.46214385 8.81591972,5.94158383 8.81591972,6.53126381 L8.81591972,9.8834238 C8.81591972,10.4731038 8.34167974,10.9525438 7.75719976,10.9525438 L2.25767996,10.9525438 C1.67527998,10.9525438 1.2,10.4731038 1.2,9.8834238 L1.2,6.53126381 C1.2,5.94158383 1.67423998,5.46214385 2.25767996,5.46214385 L2.416,5.462 L2.41679995,4.1906399 C2.41679995,2.81636129 3.49135449,1.68973395 4.84478101,1.60510326 L5.00847986,1.6 Z M5.00847986,2.84799995 C4.31163824,2.84799995 3.73624912,3.38200845 3.6709675,4.06160439 L3.6647999,4.1906399 L3.663,5.462 L6.35,5.462 L6.35111981,4.1906399 C6.35111981,3.53817142 5.88169076,2.99180999 5.26310845,2.87228506 L5.13749818,2.85416626 L5.00847986,2.84799995 Z",fill:"currentColor"})))},v=function(e){var t,n;(0,s.useEffect)((function(){var e=document.getElementById("initial_startup");e&&e.parentNode&&e.parentNode.removeChild(e)}),[]);var r,a=e.stage===p.INITIAL_LOAD,v=(0,o.default)(d.default.container,(t={},(0,i.default)(t,d.default.containerFixed,!e.debug),(0,i.default)(t,d.default.initialLoad,a),(0,i.default)(t,d.default.web,!1),t)),m=e.stage===p.ORGANIZING,g=e.stage===p.DOWNLOADING,y=(0,o.default)(d.default.graphic,(n={},(0,i.default)(n,d.default.organizing,m),(0,i.default)(n,d.default.shimmering,a||m),n)),E=(0,o.default)(d.default.logout,(0,i.default)({},d.default.showWarning,g)),S=(0,o.default)(d.default.warning,(0,i.default)({},d.default.showWarning,g));switch(e.stage){case p.INITIAL_LOAD:r=l.default.t(1980);break;case p.CONNECTING:r=l.default.t(569);break;case p.DOWNLOADING:r=s.default.createElement(c.default,{id:980,params:{progress:e.progress}});break;case p.ORGANIZING:r=l.default.t(1221)}return s.default.createElement("div",{className:v},s.default.createElement("div",{className:y},s.default.createElement(h,null)),s.default.createElement("div",{className:d.default.progress},s.default.createElement(f.default,{value:e.progress,max:100})),s.default.createElement("div",{className:d.default.main},r),s.default.createElement("div",{className:d.default.secondary},s.default.createElement(_,null),"  ",l.default.t(640)),null!=e.onLogout&&s.default.createElement("div",{className:E},s.default.createElement(u.default,{type:"plain-white",onClick:e.onLogout},l.default.t(1015))),s.default.createElement("div",{className:S},l.default.t(981)))};t.default=v},58626:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(89115)),o=r(n(79436)),s=r(n(87729)),u=n(28770),l=function(){return a.default.createElement("div",{className:o.default.background},a.default.createElement("div",{className:o.default.mainWrapper},a.default.createElement(s.default,{size:50,stroke:4,color:"highlight"}),a.default.createElement(u.TextDiv,{className:o.default.logoutTitle,size:"32"},i.default.t(1788)),a.default.createElement(u.TextDiv,{theme:"muted"},i.default.t(1789))))};t.default=l},55090:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TowerModalType=t.FlexModalType=t.BoxModalType=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=a(n(96486)),f=r(n(67294)),p=a(n(97930)),h=a(n(25428)),_=a(n(87176)),v=a(n(17152)),m="box",g="flex",y="guide",E="tower",S="auto",b="invite",T="columnButtons",w=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).setDragAndDropRef=function(t){e.dragAndDropRef=t},e.onDragOver=function(t){e.dragAndDropRef&&e.dragAndDropRef.onDragOver(t)},e.onDragStart=function(t){e.dragAndDropRef&&e.dragAndDropRef.onDragStart(t)},e.onDragEnd=function(t){e.dragAndDropRef&&e.dragAndDropRef.onDragEnd(t)},e}return(0,s.default)(n,[{key:"render",value:function(){var e,t,n=this.props,r=null!=n.title?f.default.createElement("div",{"data-a8n":p.default.key("popup-title"),className:v.default.popupTitle},n.title):null,a=(0,c.default)(v.default.popup,(e={},(0,i.default)(e,v.default.popupFlexInvite,n.type===b),(0,i.default)(e,v.default.popupBox,n.type===m),(0,i.default)(e,v.default.popupFlex,n.type===g),(0,i.default)(e,v.default.popupTower,n.type===E),(0,i.default)(e,v.default.popupAuto,n.type===S),(0,i.default)(e,v.default.popupColumnButtons,n.type===T),e)),o=d.default.isEmpty(n.actions)?null:f.default.createElement("div",{className:v.default.popupControls},n.actions),s=(0,c.default)("overlay",v.default.backdrop,(t={},(0,i.default)(t,v.default.backdropCover,n.cover),(0,i.default)(t,v.default.popupGuide,n.type===y),t)),u=f.default.createElement("div",{className:v.default.popupContainer},f.default.createElement("div",{className:a,"data-animate-modal-popup":!0},f.default.createElement("div",{className:v.default.popupBody,"data-animate-modal-body":!0},r,f.default.createElement("div",{"data-a8n":p.default.key("popup-contents"),className:v.default.popupContents},n.children),o)));return f.default.createElement(h.default,{className:s,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,ref:n.onRef,"data-animate-modal-backdrop":!0},n.onDrop&&f.default.createElement(_.default,{ref:this.setDragAndDropRef,disableFromWithin:!0,onDragChange:n.onDragChange,onDrop:n.onDrop}),u)}}]),n}(f.PureComponent);w.displayName="Modal";var A=m;t.BoxModalType=A;var C=g;t.FlexModalType=C;var O=E;t.TowerModalType=O;var M=w;t.default=M},23619:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MediaType=t.ModalType=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(96486)),c=r(n(67294)),d=a(n(34541)),f=a(n(31722)),p=a(n(68390)),h=a(n(79134)),_=a(n(61321)),v=a(n(4268)),m=a(n(3609)),g=a(n(38512)),y="modal",E="none",S="modal";t.ModalType=S;t.MediaType="media";var b=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={flow:void 0,modalId:null,transition:y,uim:void 0,blockClose:!1},e.setRefUIE=function(t){e.refUIE=t},e.openFlow=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.transition||y,a=n.uim,i=n.blockClose;e.state.flow&&(r=E);var o=l.default.uniqueId(`ModalManager${e.props.type}`),s=t;e.props.type===S&&(s=(0,c.cloneElement)(t,{requestFocus:e._focusOnContainer})),e.setState({flow:s,modalId:o,transition:r,uim:a,blockClose:i})},e.closeFlow=function(t){if(e.state.flow){var n={flow:void 0,modalId:null};t&&(n.transition=t),e.setState(n)}},e.requestFocus=function(){if(e.refUIE){var t=e.refUIE.getNode();t&&!t.contains(document.activeElement)&&f.default.focus(t)}},e._focusOnContainer=function(){if(e.refUIE){var t=e.refUIE.getNode();t&&f.default.focus(t)}},e.requestDismiss=function(t){t===e.state.modalId&&e.closeFlow()},e.shouldRequestFocus=function(t){var n,r=t.relatedTarget,a=null===(n=e.props.contextMenuRef)||void 0===n?void 0:n.current,i=!!a&&a.isOpen();return r instanceof HTMLElement&&!t.currentTarget.contains(r)&&!i},e._onBlurHandler=function(t){e.shouldRequestFocus(t)&&e.requestFocus()},e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.props.listeners.add(d.default,`open_${this.props.type}`,this.openFlow),this.props.listeners.add(d.default,`close_${this.props.type}`,this.closeFlow)}},{key:"componentDidUpdate",value:function(e){e.type!==this.props.type&&(e.listeners.remove(d.default,`open_${e.type}`,this.openFlow),e.listeners.remove(d.default,`close_${e.type}`,this.closeFlow),this.props.listeners.add(d.default,`open_${this.props.type}`,this.openFlow),this.props.listeners.add(d.default,`close_${this.props.type}`,this.closeFlow))}},{key:"render",value:function(){var e=this,t=this.state,n=t.flow,r=t.modalId,a=t.transition,i=t.blockClose;return n&&(n=c.default.createElement(v.default,{displayName:`Modal${l.default.upperFirst(this.props.type)}`,escapable:!i,key:r,ref:this.setRefUIE,requestFocus:this.requestFocus,requestDismiss:this.requestDismiss.bind(null,r)},this.props.type===S?c.default.createElement(_.default,{onBlur:this._onBlurHandler},n):c.default.createElement(h.default,null,n))),c.default.createElement(m.default.Consumer,null,(function(t){return c.default.createElement(m.default.Provider,{value:e.state.uim||t},c.default.createElement(g.default,{transitionName:a},n))}))}}]),n}(c.Component);b.displayName="ModalManager";var T=(0,p.default)(b);t.default=T},11777:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(89115)),o=r(n(55090));t.default=function(){return a.default.createElement(o.default,{title:i.default.t(549),cover:!0},i.default.t(974))}},45978:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(25960)),o=n(19129),s=n(92618),u=r(n(89115));function l(){(0,o.openExternalLink)((0,s.getCannotConnectFaqUrl)())}t.default=function(){return a.default.createElement(i.default,{cover:!0,title:u.default.t(418),okText:u.default.t(919),onOK:l},u.default.t(548))}},50464:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(63038)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(94184)),d=n(31988),f=a(n(96486)),p=r(n(67294)),h=n(70371),_=a(n(34541)),v=a(n(25960)),m=a(n(93743)),g=a(n(34263)),y=n(14656),E=n(71701),S=a(n(76568)),b=a(n(89115)),T=r(n(46515)),w=a(n(7984)),A=a(n(75131)),C=a(n(79077)),O=r(n(92631)),M=g.default.SEND_LOGS_MAX_EMAIL_LENGTH,I=g.default.SEND_LOGS_MAX_SUBJECT_LENGTH,k=g.default.SEND_LOGS_MIN_DESC_LENGTH,P=g.default.SEND_LOGS_MAX_DESC_LENGTH,R=g.default.SEND_LOGS_MAX_SCREENSHOTS,D=g.default.SEND_LOGS_MAX_SCREENSHOT_SIZE;function N(){return"win32"===process.platform?m.default.isSMB?b.default.t(1385):b.default.t(1386):"darwin"===process.platform?m.default.isSMB?b.default.t(1374):b.default.t(1375):b.default.t(1367)}var L=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e,r;(0,o.default)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(r=t.call.apply(t,[this].concat(i))).state={email:"",emailError:void 0,confirmEmail:"",confirmEmailError:void 0,subject:N(),subjectError:void 0,description:null!==(e=r.props.description)&&void 0!==e?e:"",descriptionError:void 0,screenshots:[],isDragging:!1},r._setAttachButton=function(e){r._attachButton=e},r._setEmailAddr=function(e){r._emailAddrInput=e},r.onSend=function(){var e={},t=r.state,n=t.email,a=t.confirmEmail,i=t.subject,o=t.description,s=t.screenshots,u=n.trim(),l=a.trim();if(r._validateEmail(u)||(e.emailError=b.default.t(1370)),r._validateConfirmEmail(l)||(e.confirmEmailError=b.default.t(1371)),r.validateDescription(o)||(e.descriptionError=b.default.t(1382)),r._validateSubject(i)||(e.subjectError=b.default.t(1379)),f.default.isEmpty(e)){r.setState({email:u,confirmEmail:l,emailError:void 0,confirmEmailError:void 0,descriptionError:void 0,subjectError:void 0}),s.map((function(e){e.url&&(URL.revokeObjectURL(e.url),delete e.url)}));var c=(0,E.getMaybeMeUser)(),v=c?(0,d.formatPhone)(c.user):null,m=i.trim()||b.default.t(1367);(0,h.uploadUserReport)(v,u,m,o,s),r.props.onSend&&r.props.onSend({subject:m,description:o,numScreenshots:s.length}),_.default.closeModal(),_.default.openToast(p.default.createElement(O.default,{msg:b.default.t(1378),id:(0,O.genId)()}))}else e.email=u,e.confirmEmail=l,r.setState(e)},r.onCancel=function(){r.props.onCancel&&r.props.onCancel(),_.default.closeModal()},r.onSubjectChange=function(e){var t={subject:e,subjectError:r.state.subjectError};r.state.subjectError&&r._validateSubject(t.subject)&&(t.subjectError=void 0),r.setState(t)},r._onSubjectBlur=function(){var e;r._validateSubject(r.state.subject)||(e=b.default.t(1379)),r.state.subjectError!==e&&r.setState({subjectError:e})},r.onDescriptionChange=function(e){var t={description:e,descriptionError:r.state.descriptionError};r.state.descriptionError&&r.validateDescription(t.description)&&(t.descriptionError=void 0),r.setState(t)},r._onDescriptionBlur=function(){var e;!r.state.description&&!r.state.descriptionError||r.validateDescription(r.state.description)||(e=b.default.t(1382)),r.state.descriptionError!==e&&r.setState({descriptionError:e})},r._onEmailChange=function(e){var t={email:e,emailError:r.state.emailError};r.state.emailError&&r._validateEmail(t.email)&&(t.emailError=void 0),r.setState(t)},r._onEmailBlur=function(){var e,t=r.state.email.trim(),n={};!r.state.email&&!r.state.emailError||r._validateEmail(t)||(e=b.default.t(1370)),r.state.emailError!==e&&(n.emailError=e),r.state.email!==t&&(n.email=t),f.default.isEmpty(n)||r.setState(n)},r._onConfirmEmailChange=function(e){var t={confirmEmail:e,confirmEmailError:r.state.confirmEmailError};r.state.confirmEmailError&&r._validateConfirmEmail(t.confirmEmail)&&(t.confirmEmailError=void 0),r.setState(t)},r._onConfirmEmailBlur=function(){var e,t=r.state.confirmEmail.trim(),n={};!r.state.confirmEmail&&!r.state.confirmEmailError||r._validateConfirmEmail(t)||(e=b.default.t(1371)),r.state.confirmEmailError!==e&&(n.confirmEmailError=e),r.state.confirmEmail!==t&&(n.confirmEmail=t),f.default.isEmpty(n)||r.setState(n)},r._validateEmail=function(e){return T.validateEmail(e)},r._validateConfirmEmail=function(e){return r.state.email===e},r.validateDescription=function(e){return e.length>k},r._validateSubject=function(){return!0},r.onFilePick=function(e){e.preventDefault(),e.stopPropagation(),r._reachMaxScreenshots()||(0,y.getFiles)(e,"image/*").then((function(e){r._attachButton&&(r._attachButton.value="");var t=e.filter((function(e){return e.size<=D}));t.length<e.length&&_.default.openToast(p.default.createElement(O.default,{msg:b.default.t(1373),id:(0,O.genId)()}));var n=r.state.screenshots.concat(t).slice(0,R);n.map((function(e){e.url||(e.url=URL.createObjectURL(e))})),r.setState({screenshots:n})}))},r.onDragChange=function(e){r.setState({isDragging:e})},r._handleAttachClick=function(){r._attachButton&&!r._reachMaxScreenshots()&&r._attachButton.click()},r.stopPropagation=function(e){e.stopPropagation()},r}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this._emailAddrInput&&this._emailAddrInput.restoreFocus()}},{key:"componentWillUnmount",value:function(){this.state.screenshots.map((function(e){var t=e.url;return t&&URL.revokeObjectURL(t)}))}},{key:"_reachMaxScreenshots",value:function(){return this.state.screenshots.length>=R}},{key:"_deleteScreenshot",value:function(e){var t=this.state.screenshots.slice(),n=t.splice(e,1),r=(0,i.default)(n,1)[0];r.url&&URL.revokeObjectURL(r.url),this.setState({screenshots:t})}},{key:"_getScreenshotsList",value:function(){var e=this,t=this.state.screenshots.map((function(t,n){if(!t.url)return null;var r=`url(${t.url})`;return p.default.createElement("div",{key:`screenshot-${n}`,className:w.default.screenshotsImg,style:{backgroundImage:r}},p.default.createElement("button",{className:w.default.btnDelete,onClick:function(){e._deleteScreenshot(n)}},p.default.createElement(A.default,{name:"x-alt"})))}));return t.length?p.default.createElement("div",{className:w.default.screenshotPreview},t):null}},{key:"_getScreenshotAction",value:function(){if(this._reachMaxScreenshots()){var e=R;return p.default.createElement("div",{className:(0,c.default)(w.default.action,w.default.disabled)},b.default.t(1381,{count:e,_plural:e}))}return this.state.isDragging?p.default.createElement("div",{className:w.default.action},b.default.t(1376)):p.default.createElement("div",{className:w.default.action,onClick:this._handleAttachClick},b.default.t(1377))}},{key:"render",value:function(){var e={enter:this.stopPropagation},t=p.default.createElement("div",{className:w.default.screenshots},this._getScreenshotsList(),this._getScreenshotAction(),p.default.createElement("input",{accept:"image/*",type:"file",multiple:!0,onClick:this.stopPropagation,onChange:this.onFilePick,ref:this._setAttachButton,disabled:this._reachMaxScreenshots()}));return p.default.createElement(v.default,{title:b.default.t(1380),okText:b.default.t(1366),onOK:this.onSend,onCancel:this.onCancel,onDrop:this.onFilePick,onDragChange:this.onDragChange},p.default.createElement(S.default,{handlers:e},p.default.createElement(C.default,{ref:this._setEmailAddr,value:this.state.email,error:this.state.emailError,maxLength:M,onChange:this._onEmailChange,onBlur:this._onEmailBlur,placeholder:b.default.t(1368)}),p.default.createElement(C.default,{editable:!0,value:this.state.confirmEmail,error:this.state.confirmEmailError,maxLength:M,onChange:this._onConfirmEmailChange,onBlur:this._onConfirmEmailBlur,placeholder:b.default.t(1369)}),p.default.createElement(C.default,{value:this.state.subject,error:this.state.subjectError,maxLength:I,onChange:this.onSubjectChange,onBlur:this._onSubjectBlur,placeholder:b.default.t(1372)}),p.default.createElement(C.default,{value:this.state.description,error:this.state.descriptionError,maxLength:P,onChange:this.onDescriptionChange,onBlur:this._onDescriptionBlur,placeholder:b.default.t(610),multiline:!0}),t))}}]),n}(p.Component);t.default=L,L.displayName="SendLogsPopup"},44055:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(96486)),c=a(n(30381)),d=r(n(67294)),f=a(n(25960)),p=n(19129),h=n(92618),_=a(n(89115)),v=a(n(68390)),m=r(n(20707)),g=a(n(39326)),y=r(n(14094)),E=a(n(35997)),S=a(n(7860)),b=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e))._forceUpdate=function(){r.forceUpdate()},r._retried=function(){null!=r.timeout&&(r.props.clearTimeout(r.timeout),r.timeout=null),null!=r.interval&&(r.props.clearInterval(r.interval),r.interval=null),r.setState({retriable:!1}),r.startTimeout()},r._allowRetry=function(){r.setState({retriable:!0}),r.interval=r.props.setInterval(r._forceUpdate,1e3)},r.retry=function(){S.default.poke(),r._retried()},r._onLearnMoreClick=function(){(0,p.openExternalLink)((0,h.getCannotConnectFaqUrl)())},r.state={retriable:!1},r}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.startTimeout();var e=document.getElementById("initial_startup");e&&e.parentNode&&e.parentNode.removeChild(e),this.props.listeners.add(y.default,"change:displayInfo",this._forceUpdate),this.props.listeners.add(S.default,"change:retryTimestamp",this._retried)}},{key:"startTimeout",value:function(){this.timeout=this.props.setTimeout(this._allowRetry,3e3)}},{key:"logout",value:function(){__LOG__(2)`Startup: user selected logout`,S.default.logout()}},{key:"render",value:function(){var e,t,n,r,a=this.props.progress;switch(y.default.displayInfo){case y.StreamInfo.OPENING:e=_.default.t(570),t=_.default.t(974),r=this.logout;break;case y.StreamInfo.PAIRING:case y.StreamInfo.TIMEOUT:e=_.default.t(1462),t=d.default.createElement("span",null,_.default.t(975)," ",d.default.createElement("span",{className:g.default.action,onClick:this._onLearnMoreClick,role:"button"},_.default.t(919))),r=this.logout;break;case y.StreamInfo.SYNCING:case y.StreamInfo.CONNECTING:return d.default.createElement(m.default,{progress:a,stage:m.Stage.INITIAL_LOAD});default:return y.default.mode===y.StreamMode.MAIN?d.default.createElement(m.default,{progress:a,stage:m.Stage.INITIAL_LOAD}):null}var i=this.state.retriable;if(i){var o=S.default.retryTimestamp-Date.now();if(isNaN(o)||o<1)n=_.default.t(1319),l.default.defer((function(){return S.default.poke()}));else if(o<6e4){var s=Math.ceil(o/1e3);n=_.default.t(1321,{number:s,_plural:s})}else n=_.default.t(1320,{duration:c.default.duration(o).humanize()})}else n=_.default.t(1319);return d.default.createElement(f.default,{cover:!0,title:e,okText:_.default.t(1317),onOK:i?this.retry:function(){},cancelText:r?_.default.t(1015):null,onCancel:r},n,d.default.createElement("hr",{className:g.default.divider}),d.default.createElement("div",{className:g.default.textTip},t))}}]),n}(d.PureComponent);b.displayName="Startup";var T=(0,E.default)((0,v.default)(b));t.default=T},36262:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(25960)),d=a(n(44419)),f=a(n(89115)),p=a(n(68390)),h=a(n(57525)),_=r(n(14094)),v=a(n(35997)),m=a(n(7860)),g=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e))._forceUpdate=function(){r.forceUpdate()},r._startInterval=function(){r.interval=r.props.setInterval(r._forceUpdate,1e3)},r}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.startTimeout();var e=document.getElementById("initial_startup");e&&e.parentNode&&e.parentNode.removeChild(e),this.props.listeners.add(_.default,"change:displayInfo",this._forceUpdate)}},{key:"startTimeout",value:function(){this.timeout=this.props.setTimeout(this._startInterval,6e3)}},{key:"logout",value:function(){__LOG__(2)`Startup: user selected logout`,m.default.logout()}},{key:"render",value:function(){var e,t;switch(_.default.displayInfo){case _.StreamInfo.OPENING:case _.StreamInfo.PAIRING:case _.StreamInfo.TIMEOUT:e=f.default.t(570),t=f.default.t(974);break;case _.StreamInfo.SYNCING:case _.StreamInfo.CONNECTING:return l.default.createElement(d.default,{initialLoadReady:this.props.initialLoadReady,onReady:this.props.onReady,onLogout:this.logout});default:return _.default.mode===_.StreamMode.MAIN?l.default.createElement(d.default,{initialLoadReady:this.props.initialLoadReady,onReady:this.props.onReady,onLogout:this.logout}):null}return l.default.createElement(c.default,{cover:!0,title:e,cancelText:f.default.t(1015),onCancel:this.logout},l.default.createElement("hr",{className:h.default.divider}),l.default.createElement("div",{className:h.default.textTip},t))}}]),n}(l.PureComponent);g.displayName="StartupMd";var y=(0,v.default)((0,p.default)(g));t.default=y},90902:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(63038)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=r(n(67294)),d=a(n(34541)),f=a(n(25960)),p=r(n(19129)),h=n(92618),_=a(n(89115)),v=a(n(43047)),m=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onOK=function(){d.default.closeModal()},e.onCancel=function(){var t=e.props.link.href;(0,p.openExternalLink)(t),d.default.closeModal()},e}return(0,s.default)(n,[{key:"_renderHostname",value:function(){var e=this.props.link,t=e.suspiciousCharacters,n=e.domain.split("."),r=[];return n.forEach((function(e,a){var i=!1,o=e.split("").map((function(e,n){var r=t&&t.has(e);i=r||i;var o=r?v.default.suspiciousCharacter:void 0;return c.default.createElement("span",{key:`${a}-${n}-${e}`,className:o},e)})),s=i?v.default.suspiciousHostname:void 0,u=c.default.createElement("span",{key:`${a}-${e}`,className:s},o);r.push(u),a+1!==n.length&&r.push(c.default.createElement("span",{key:`${a}`},"."))})),r}},{key:"render",value:function(){var e=this.props.link,t=e.href,n=e.domain,r=t.split(n),a=(0,i.default)(r,2),o=a[0],s=a[1];return c.default.createElement(f.default,{title:_.default.t(1444),okText:_.default.t(1657),cancelText:_.default.t(1446),onOK:this.onOK,onCancel:this.onCancel},c.default.createElement("div",{className:v.default.explanation},_.default.t(1447)+" ",c.default.createElement(p.default,{href:(0,h.getSuspiciousLinkFaqUrl)()},_.default.t(919))),c.default.createElement("div",{className:v.default.url},o,this._renderHostname(),s))}}]),n}(c.PureComponent);t.default=m,m.displayName="SuspiciousLinkPopup"},76409:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(67294)),c=a(n(25960)),d=a(n(89115)),f=a(n(7860)),p=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return l.default.createElement(c.default,{cover:!0,cancelText:d.default.t(1015),onCancel:f.default.logout.bind(f.default,!0),okText:d.default.t(962),onOK:f.default.poke.bind(f.default)},this.props.description," ",this.props.children)}}]),n}(l.Component);p.displayName="TOS";var h=p;t.default=h},13664:(e,t,n)=>{"use strict";var r=n(95318),a=n(20862);t.HC=function(e,t,r,a,o){if(u.some((function(t){var n=t.partialUserAgent,r=t.partialMsg;return l.includes(n)&&String(e).includes(r)})))return __LOG__(3)`Ignored Error: ${e||(o||"").toString()}`,!0;try{n(37618).default.pprint(!0)}catch(e){__LOG__(3)`UIM Print Failed!`}var d;d=t&&"number"==typeof r?` (${t}:${r}:${a})`:t?` (${t})`:"";if("Script error."===e&&!o)return s.default.logUncaughtError(`${d} ${e}`),t&&i.upload({reason:"script-error",hasTaggedMessage:!0}),!1;var f=o instanceof Error&&o.stack?o:`${e||`Given: ${String(o)}`}`;if(s.default.logUncaughtError(f),!c(o))return!0;return i.upload({reason:null,hasTaggedMessage:!0}),!0},t.e2=function(e,t){if(s.default.logUncaughtError(e,t),!c(e))return;var n=e instanceof Error&&e.stack?null:`unhandled-rejection: ${e}`;i.upload({reason:n,hasTaggedMessage:!0})};var i=a(n(70371)),o=n(98569),s=r(n(43906)),u=[{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36",partialMsg:"Cannot read property 'style' of null"},{partialUserAgent:"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.78 Safari/537.36",partialMsg:"Unexpected token :"},{partialUserAgent:"Firefox/52.0,,Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.4) Gecko/20100101 Firefox/52.0",partialMsg:"Cannot read property 'style' of undefined"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1.1 Safari/605.1.15",partialMsg:"is not an object"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36",partialMsg:"Cannot read property 'getElementsByTagName' of undefined"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36",partialMsg:"Can't find variable: dismissKeyboard"},{partialUserAgent:"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.78 Safari/537.36",partialMsg:"ReferenceError: None is not defined"},{partialUserAgent:"Chrome",partialMsg:"ResizeObserver loop limit exceeded"}],l=window.navigator.userAgent;function c(e){return!(e instanceof o.DbOnLogoutAbort)}},2443:(e,t,n)=>{"use strict";var r=n(95318),a=r(n(8181)),i=r(n(43906)),o=window.Native.ipcRenderer;a.default.init().timeout(5e3).finally((function(){n(74690)})),o.on("electron_stream",(function(e,t){t.extraTags.unshift("main-process"),i.default.logImpl(t.level,t.msg,void 0,t.attachedToSendLogs,t.extraTags)})),o.on("electron_stream_sendlogs",(function(e,t){n(70371).sendLogs(t)})),o.send("electron_stream")},75483:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setTabActive=function(){u=!0},t.getIsTabActive=function(){return u},t.isAnotherTabActive=function(){return l.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=r(n(80717)),s=r(n(73294)),u=!1;function l(){return(l=(0,i.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=navigator.serviceWorker)||!t.controller){e.next=13;break}return e.prev=2,e.next=5,s.default.request(t.controller,o.default.ACTIVE_TAB);case 5:return n=e.sent,e.abrupt("return",n.some((function(e){return!0===e.isActive})));case 9:return e.prev=9,e.t0=e.catch(2),__LOG__(4,void 0,new Error,!0)`error: ${e.t0}`,SEND_LOGS("ACTIVE_TAB service worker call failed"),e.abrupt("return",!1);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}},34970:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getTheme=function(){var e;if(c())return s.default.currentTheme;return null!==(e=(0,o.getTheme)())&&void 0!==e?e:i.default.DEFAULT_THEME},t.setTheme=l,t.getSystemThemeMode=c,t.setSystemThemeMode=d,t.applyThemeToUI=f,t.default=t.THEME_ASSETS=void 0;var a=n(67294),i=r(n(34263)),o=n(71701),s=r(n(61198)),u={light:[{id:"bg-chat-light",selectors:["[data-asset-chat-background-light]"],low:{default:n(33557)},high:{default:n(33557)}},{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{default:n(29347)},high:{default:n(29347)}},{id:"intro-connection-light",selectors:["[data-asset-intro-image-light]"],low:{default:n(5250)},high:{default:n(12891)}}],dark:[{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{default:n(29347)},high:{default:n(29347)}},{id:"intro-connection-dark",selectors:["[data-asset-intro-image-dark]"],low:{default:n(35729)},high:{default:n(74548)}}]};function l(e){(0,o.setTheme)(e),f(e)}function c(){var e;return null===(e=(0,o.getSystemThemeMode)())||void 0===e||e}function d(e){(0,o.setSystemThemeMode)(e)}function f(e){var t=document.body;t&&("dark"===e?t.classList.add("dark"):t.classList.remove("dark"))}t.THEME_ASSETS=u;var p={theme:s.default.currentTheme,systemThemeMode:!0,setTheme:l,setSystemThemeMode:d},h=(0,a.createContext)(p);t.default=h},41144:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ATTACH_MEDIA_STATE=void 0;var o=i(n(81109)),s=i(n(34575)),u=i(n(93913)),l=i(n(16525)),c=i(n(29754)),d=i(n(2205)),f=i(n(99842)),p=a(n(56727)),h=a(n(98569)),_=n(19059),v=n(16952),m=i(n(1447)),g=i(n(8643)),y=n(16551),E=i(n(74984)),S=(n(67298),{READY:"ready",PROCESSING:"processing",ERROR:"error"});t.ATTACH_MEDIA_STATE=S;var b=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,p.prop)(),e.file=(0,p.prop)(),e.uiProcessed=(0,p.prop)(!1),e.fileOrigin=(0,p.prop)(),e.isVcardOverMmsDocument=(0,p.prop)(!1),e.state=(0,p.session)(),e.mediaPrep=(0,p.session)(),e.mimetype=(0,p.session)(),e.originalMimetype=(0,p.session)(),e.processPromise=(0,p.session)(),e.exception=(0,p.session)(),e.caption=(0,p.session)(),e.type=(0,p.session)(y.TYPE.UNKNOWN),e.mediaEditorData=(0,p.session)(),e.editedFile=(0,p.session)(),e._mediaEditorUndoStack=(0,p.session)((function(){return[]})),e._mediaEditorRedoStack=(0,p.session)((function(){return[]})),e.preview=(0,p.session)(),e.fullPreview=(0,p.session)(),e.fullPreviewSize=(0,p.session)(),e.filename=(0,p.session)(),e.documentPageCount=(0,p.session)(),e.isGif=(0,p.session)(),e.gifAttribution=(0,p.session)(),e.previewable=(0,p.derived)(e._previewable,["preview","fullPreview","type","filename","fullPreviewSize","mimetype"]),e.filesize=(0,p.derived)(e._filesize,["file"]),e.fileExt=(0,p.derived)(e._fileExt,["filename"]),e}return(0,u.default)(n,[{key:"_previewable",value:function(){if(!this.type||!this.mimetype||!this.fullPreview)return!1;switch(this.type){case y.TYPE.DOCUMENT:return!!this.filename;case y.TYPE.IMAGE:case y.TYPE.VIDEO:return!(!this.fullPreviewSize||!this.preview);case y.TYPE.AUDIO:case y.TYPE.PTT:case y.TYPE.UNKNOWN:return!0;default:throw new Error(`Unsupported attach media type ${this.type}`)}}},{key:"_filesize",value:function(){return this.file instanceof E.default?this.file.size():this.file instanceof Blob?this.file.size:null}},{key:"_fileExt",value:function(){return this.filename?(0,_.getFileExtension)(this.filename):null}},{key:"initialize",value:function(){if((0,l.default)((0,c.default)(n.prototype),"initialize",this).call(this),!(this.file instanceof r))throw new Error("cannot process non-promise file");this.processAttachment(this.file)}},{key:"processAttachment",value:function(e){this.state=S.PROCESSING,this.processPromise=this._processAttachmentPromiseHelper(e).then((function(){}))}},{key:"_processAttachmentData",value:function(e){if(this.fileOrigin===g.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY){var t=e.file.name;return(0,_.copyFile)(e.file).then((function(n){return(0,o.default)((0,o.default)({},e),{},{filename:t,file:n})}))}return r.resolve(e)}},{key:"_processAttachmentPromiseHelper",value:function(e){var t=this;return e.then((function(e){return t._processAttachmentData(e)})).then((function(e){t.set(e);var n={},r=e.file,a=e.filename,i=e.isGif,o=e.gifAttribution,s=e.isVcardOverMmsDocument,u=e.documentPageCount;i?(n.asGif=!0,n.gifAttribution=o):e.type===_.FILETYPE.DOCUMENT&&(n.asDocument=!0,n.filename=a,n.isVcardOverMmsDocument=s,n.documentPageCount=u),n.precomputedFields={fullHeight:e.fullPreviewSize?e.fullPreviewSize.height:void 0,fullWidth:e.fullPreviewSize?e.fullPreviewSize.width:void 0,preview:e.preview,duration:e.duration};var l=E.default.createFromData(r,r.type),c=(0,v.prepRawMedia)(l,n);return t.set({mediaPrep:c}),c.waitForPrep().then((function(n){var r=n.documentPreview,a=n.mediaBlob instanceof E.default?window.URL.createObjectURL(n.mediaBlob.forceToBlob()):window.URL.createObjectURL(n.mediaBlob),i={file:n.mediaBlob,fullPreview:a,type:n.type,filename:n.filename,mimetype:n.mimetype,originalMimetype:e.mimetype,preview:n.preview,state:S.READY,isGif:n.isGif,fullPreviewSize:void 0,documentPageCount:u,isVcardOverMmsDocument:n.isVcardOverMmsDocument};n.fullWidth&&n.fullHeight&&(i.fullPreviewSize={height:n.fullHeight,width:n.fullWidth}),n.type===y.TYPE.IMAGE&&(i.preview=a),n.type===y.TYPE.DOCUMENT&&r&&(i.fullPreview=r.url,i.preview=r.thumbUrl,i.fullPreviewSize={height:r.height,width:r.width},i.documentPageCount=r.pdfPages),t.set(i),t.previewable||(__LOG__(4,void 0,new Error,!0)`Invariant violated, processed file is not previewable`,SEND_LOGS("AttachMedia processFile"))}))})).catchTypes(h.InvalidMediaFileType,h.InvalidImageFileType,(function(n){if(t.isGif||t.type===_.FILETYPE.DOCUMENT)throw n;return t._processAttachmentPromiseHelper(e.then((function(e){return e.type=_.FILETYPE.DOCUMENT,e})))})).catchTypes3(m.default,h.MediaFileFailedLoad,h.MediaFileEmpty,(function(e){return t.set({exception:e,state:S.ERROR}),t})).catch((function(){return __LOG__(3)`AttachMedia:processFile convert unexpected error to InvalidMediaFileType:`,t.set({exception:new h.InvalidMediaFileType,state:S.ERROR}),t}))}},{key:"sendToChat",value:function(e,t){if(!this.mediaPrep)return r.reject(new Error("MediaPrep not available"));if(this.state===S.ERROR)return r.reject(new Error(this.exception));if(!(this.state!==S.PROCESSING||this.previewable&&t.addEvenWhilePreparing))return r.reject(new Error("Media still processing"));if(this.state===S.READY)return this.mediaPrep.sendToChat(e,t);var n={mimetype:this.mimetype};switch(this.type){case y.TYPE.VIDEO:n.isGif=this.isGif,n.gifAttribution=this.gifAttribution;case y.TYPE.IMAGE:n.width=this.fullPreviewSize.width,n.height=this.fullPreviewSize.height,n.body=this.preview,t.placeholderProps=n;break;case y.TYPE.DOCUMENT:n.pageCount=this.documentPageCount,n.filename=this.filename,n.body=this.preview,t.placeholderProps=n;break;case y.TYPE.AUDIO:case y.TYPE.PTT:}return this.mediaPrep.sendToChat(e,t)}},{key:"getFileType",value:function(){if(!(this.file instanceof Blob||this.file instanceof File))throw new Error("expected file to be a Blob or File");return(0,_.typeFromMimetype)(this.file.type)}},{key:"isViewableOnce",value:function(){return new Set([y.TYPE.IMAGE,y.TYPE.VIDEO]).has(this.type)&&!this.isGif}},{key:"delete",value:function(){this.fullPreview&&window.URL.revokeObjectURL(this.fullPreview),(0,l.default)((0,c.default)(n.prototype),"delete",this).call(this)}},{key:"updateMediaEditorData",value:function(e,t){return this.mediaEditorData===e||(t.undoable&&(this._mediaEditorUndoStack.push(this.mediaEditorData),this._mediaEditorRedoStack=[]),this.mediaEditorData=e),this.mediaEditorData}},{key:"undoMediaEditorData",value:function(){this.canUndoMediaEditorData()&&(this._mediaEditorRedoStack.push(this.mediaEditorData),this.mediaEditorData=this._mediaEditorUndoStack.pop())}},{key:"redoMediaEditorData",value:function(){this.canRedoMediaEditorData()&&(this._mediaEditorUndoStack.push(this.mediaEditorData),this.mediaEditorData=this._mediaEditorRedoStack.pop())}},{key:"canUndoMediaEditorData",value:function(){return this._mediaEditorUndoStack.length>0}},{key:"canRedoMediaEditorData",value:function(){return this._mediaEditorRedoStack.length>0}},{key:"updateEditedFile",value:function(e){this.editedFile=e}},{key:"updatePreview",value:function(e){window.URL.revokeObjectURL(this.preview),this.preview=e}},{key:"updateFullPreview",value:function(e){window.URL.revokeObjectURL(this.fullPreview),this.fullPreview=e}},{key:"updateCaption",value:function(e){this.caption=e}}]),n}(p.default);b.Proxy="attachMedia";var T=(0,p.defineModel)(b);t.default=T},34215:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(81506)),l=i(n(16525)),c=i(n(29754)),d=i(n(2205)),f=i(n(99842)),p=a(n(41144)),h=i(n(60619)),_=i(n(34263)),v=a(n(98569)),m=n(19059),g=i(n(89115)),y=i(n(81931)),E=i(n(1447)),S=i(n(63056)),b=i(n(10560)),T=m.FILETYPE.IMAGE,w=m.FILETYPE.VIDEO,A=m.FILETYPE.DOCUMENT,C=m.FILETYPE.AUDIO,O=p.ATTACH_MEDIA_STATE.READY,M=p.ATTACH_MEDIA_STATE.ERROR,I=p.ATTACH_MEDIA_STATE.PROCESSING,k=1,P=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(e){var r,a=e.chatParticipantCount;return(0,o.default)(this,n),(r=t.call(this)).errorMsgs=null,r.ignored=0,r.mediaPickerStatsLogger=new y.default,r.selection=new b.default([],(function(e){return e.id}),"prev"),r.mediaPickerStatsLogger.chatRecipients=a,r.listenTo(r.selection,"all",r._handleSelectionEvents.bind((0,u.default)(r))),r}return(0,s.default)(n,[{key:"_handleSelectionEvents",value:function(e,t){"focus"!==t&&!1!==t||this.trigger("active-change")}},{key:"removeSingleton",value:function(e,t){e&&(t||this.mediaPickerStatsLogger.logDelete(e.id),e.url&&window.URL.revokeObjectURL(e.url),e.original&&e.original.url&&window.URL.revokeObjectURL(e.original.url))}},{key:"remove",value:function(e,t){var r=this,a=(0,l.default)((0,c.default)(n.prototype),"remove",this).call(this,e,t);return a.forEach((function(e){return r.removeSingleton(e,t)})),this.selection.init(this.getPreviewableMedias(),!0),a}},{key:"delete",value:function(){var e=this;(0,l.default)((0,c.default)(n.prototype),"delete",this).call(this),this.forEach((function(t){return e.removeSingleton(t)})),this.selection.init(this.getPreviewableMedias(),!0)}},{key:"reorder",value:function(e,t){return this.reorderMutate(e,t),this.selection.init(this.getPreviewableMedias(),!0),this.getPreviewableMedias()}},{key:"replace",value:function(e,t){var n=this.get(e);if(n){var r=this.indexOf(n),a=n.caption;this.remove(n,{silent:!0}),n.delete();var i=new p.default({id:e,caption:a,file:this._normalizeAttachment(t)});return this.add(i,r?{at:r}:{}),i.processPromise}}},{key:"getValidMedias",value:function(){return this.filter((function(e){return e.state===O||e.state===I}))}},{key:"getPreviewableMedias",value:function(){return this.filter((function(e){return e.previewable}))}},{key:"getActive",value:function(){return this.selection.getVal()}},{key:"setActive",value:function(e){this.selection.setVal(e)}},{key:"unsetActive",value:function(){this.selection.unset()}},{key:"setNextAsActive",value:function(){var e=this.selection.list.length-1;return-1===this.selection.index||this.selection.index===e||this.selection.setNext(),this.selection.getVal()}},{key:"setPrevAsActive",value:function(){return-1===this.selection.index||0===this.selection.index||this.selection.setPrev(),this.selection.getVal()}},{key:"processAttachments",value:function(e,t){var n=this,a=this.getPreviewableMedias().length,i=e.length+a>_.default.MAX_FILES?Math.max(_.default.MAX_FILES-a,0):e.length,o=e.length-i;0===i?o&&this.trigger("max_upload_limit",o):this.ignore(o);var s=e.slice(0,i).map((function(e){return new p.default({id:k++,file:n._normalizeAttachment(e),fileOrigin:t})}));this.add(s);var u=this.getActive();return this.unsetActive(),r.all(e).then((function(){n._attemptToSetNextActiveFromAdded(s,u)})),r.all(s.map((function(e){return e.processPromise}))).then((function(){return s.forEach((function(e){return n._logMediaAdd(e,t)})),n._attemptToSetNextActiveFromAdded(s,u)}))}},{key:"_attemptToSetNextActiveFromAdded",value:function(e,t){if(!this.getActive()&&!this.getModelsArray().some((function(e){return e.state===I&&!e.previewable}))){var n=e.find((function(e){return e.previewable}));n||(n=t),this.selection.init(this.getPreviewableMedias()),n&&this.setActive(n)}}},{key:"_logMediaAdd",value:function(e,t){if(null!=t){var n=e.isGif?"gif":e.type;this.mediaPickerStatsLogger.logAdd(e.id,n,t)}}},{key:"_normalizeAttachment",value:function(e){return r.resolve(e).then((function(e){return e.filename||(e.filename=e.file.name),e.mimetype||(e.mimetype=e.file.type),e.type||(e.type=(0,m.typeFromMimetype)(e.file.type)),!e.type&&e.mimetype&&(e.type=(0,m.typeFromMimetype)(e.mimetype)),e}))}},{key:"ignore",value:function(e){e>0&&(this.ignored+=e)}},{key:"uiProcessMsgs",value:function(){var e,t=[],n=0,r=0,a=0,i=0,o=0,s=0,u=0,l=0,c=0,d=0,f=0,p=!1,h=g.default.filesize(S.default.media),m=g.default.filesize(S.default.maxFileSize),y=g.default.filesize(1024*S.default.vcardMaxSizeKb);if(this.forEach((function(t){if(!t.uiProcessed&&(!e&&t.previewable&&(e=t),t.state!==I&&(t.uiProcessed=!0,t.state===M)))if(t.exception instanceof E.default)switch(t.getFileType()){case T:n+=1;break;case w:r+=1;break;case C:a+=1;break;case A:t.isVcardOverMmsDocument?o+=t.documentPageCount:i+=1}else if(t.exception instanceof v.MediaFileEmpty)switch(t.getFileType()){case T:s+=1;break;case w:u+=1;break;case C:l+=1;break;case A:t.isVcardOverMmsDocument?d+=t.documentPageCount:c+=1}else t.exception instanceof v.MediaFileFailedLoad?p=!0:f+=1})),n>0&&t.push(g.default.t(883,{number:n,_plural:n,maxSize:h})),r>0&&t.push(g.default.t(1527,{number:r,_plural:r,maxSize:h})),a>0&&t.push(g.default.t(252,{number:a,_plural:a,maxSize:h})),i>0&&t.push(g.default.t(629,{number:i,_plural:i,maxSize:m})),o>0&&t.push(g.default.t(580,{_plural:o,maxSize:y})),s>0&&t.push(g.default.t(875,{number:s,_plural:s})),u>0&&t.push(g.default.t(1525,{number:u,_plural:u})),l>0&&t.push(g.default.t(247,{number:l,_plural:l})),c>0&&t.push(g.default.t(628,{number:c,_plural:c})),d>0&&t.push(g.default.t(579,{number:d,_plural:d})),f>0&&t.push(g.default.t(741,{number:f,_plural:f})),p&&(t=[]).push(g.default.t(1006)),t.length>1){t=[];var b=n+r+a+i,O=s+u+l+c,k=b+O+f;0===f?(0!==b&&t.push(g.default.t(742,{number:b,_plural:b,maxSize:m})),0!==O&&t.push(g.default.t(738,{number:O,_plural:O}))):t.push(g.default.t(740,{number:k,_plural:k}))}var P=t.join(" ");this.errorMsgs=P,this.ignore(this.getPreviewableMedias().length-_.default.MAX_FILES);var R=this.ignored;return this.ignored=0,R&&this.trigger("max_upload_limit",R),f>0&&this.trigger("files_not_supported"),{errorMsgs:P}}},{key:"canSend",value:function(){return!this.getModelsArray().some((function(e){return e.state===I&&!e.previewable}))}}]),n}(h.default);t.default=P,P.model=p.default},79075:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=n(91183),f=a(n(17093)),p=r(n(56727)),h=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isMicrophoneAvailable=(0,p.prop)(!1),e.isSpeakerAvailable=(0,p.prop)(!1),e.isVideoAvailable=(0,p.prop)(!1),e}return(0,o.default)(n,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this)}},{key:"refreshDeviceList",value:function(e){this._deviceList=e,this.isVideoAvailable=f.default.getAvailableDevices(e,d.AVDeviceType.Video).length>0,this.isMicrophoneAvailable=f.default.getAvailableDevices(e,d.AVDeviceType.AudioInput).length>0,this.isSpeakerAvailable=f.default.getAvailableDevices(e,d.AVDeviceType.AudioOutput).length>0}}]),n}(p.default),_=new((0,p.defineModel)(h));t.default=_},84782:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=a(n(12717)),d=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e}return(0,o.default)(r,[{key:"contact",value:function(){return n(48629).default.gadd(this.id)}},{key:"getCollection",value:function(){return n(76088).default}}]),r}(l.default);d.Proxy="blocklist",d.idClass=c.default;var f=(0,l.defineModel)(d);t.default=f},76088:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlocklistCollection=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),u=r(n(99842)),l=r(n(60619)),c=r(n(84782)),d=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).listenTo((0,o.default)(e),"add",e.blockContact),e.listenTo((0,o.default)(e),"remove",e.unblockContact),e}return(0,i.default)(n,[{key:"blockContact",value:function(e){e.contact().isContactBlocked=!0}},{key:"unblockContact",value:function(e){e.contact().isContactBlocked=!1}}]),n}(l.default);t.BlocklistCollection=d,d.model=c.default;var f=new d;t.default=f},4781:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BUSINESS_CATEGORY_EMPTY_STR_ID=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=a(n(12717));t.BUSINESS_CATEGORY_EMPTY_STR_ID="__empty_query__";var d=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.categories=(0,l.prop)(),e}return(0,o.default)(r,[{key:"getCollection",value:function(){return n(35771).default}}]),r}(l.default);d.Proxy="BusinessCategoriesResult",d.idClass=c.default;var f=(0,l.defineModel)(d);t.default=f},35771:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessCategoriesResultCollection=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(60619)),l=r(n(4781)),c=n(14011),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"_find",value:function(e){return(0,c.queryBusinessCategories)(e).then((function(t){return new l.default({id:e,categories:t})}))}}]),n}(u.default);t.BusinessCategoriesResultCollection=d,d.model=l.default,d.staleCollection=!0;var f=new d;t.default=f},16271:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULTS=t.default=t.MAX_BUSINESS_CATEGORIES=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=a(n(12717));t.MAX_BUSINESS_CATEGORIES=3;var d=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.tag=(0,l.prop)(),e.description=(0,l.prop)(),e.categories=(0,l.prop)(),e.profileOptions=(0,l.prop)(),e.email=(0,l.prop)(),e.website=(0,l.prop)(),e.latitude=(0,l.prop)(),e.longitude=(0,l.prop)(),e.businessHours=(0,l.prop)(),e.catalogStatus=(0,l.prop)(),e.address=(0,l.prop)(),e.structuredAddress=(0,l.prop)(),e.stale=(0,l.session)(!0),e}return(0,o.default)(r,[{key:"markStale",value:function(){this.stale=!0,this.hasObservers()&&this.getCollection().find(this.id)}},{key:"getCollection",value:function(){return n(93250).default}},{key:"isValid",value:function(){return Array.isArray(this.categories)}}]),r}(l.default);d.Proxy="businessProfile",d.idClass=c.default;var f=(0,l.defineModel)(d);t.default=f;t.DEFAULTS={description:null,email:null,website:null}},93250:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProfileCollection=t.CATALOG_EXISTS=void 0;var a=r(n(63038)),i=r(n(81109)),o=r(n(34575)),s=r(n(93913)),u=r(n(2205)),l=r(n(99842)),c=r(n(60619)),d=r(n(16271)),f=n(14011),p=n(79984);t.CATALOG_EXISTS="catalog_exists";var h=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"_find",value:function(e){return this._findAndParse(e,{queryCatalog:!0})}},{key:"_update",value:function(e){return this._findAndParse(e,{queryCatalog:!1})}},{key:"_findAndParse",value:function(e,t){var n=t.queryCatalog,r=this.gadd(e);return(0,f.queryBusinessProfile)([{wid:r.id,tag:r.tag}]).then((function(t){if(!Array.isArray(t))return __LOG__(3)`Received invalid business profile response`,null;if(0===t.length)return __LOG__(2)`Store:BusinessProfile:find No businessProfile found for ${String(e)}`,{id:e};var r=t[0],a={id:r.wid,tag:r.tag},o=r.profile;return o?(0,i.default)((0,i.default)({},(0,p.parseBusinessProfile)({id:r.wid,profile:o,queryCatalog:n})),a):a}))}},{key:"fetchBizProfile",value:function(e){var t=this.get(e);return t&&t.markStale(),this.find(e)}},{key:"onResume",value:function(){var e=this;this.filter((function(e){return e.stale&&e.hasObservers()})).map((function(t){return e.find(t.id)}))}},{key:"handle",value:function(e){var t=(0,a.default)(e,1)[0];t&&null!=t.tag||__LOG__(3)`Store:BusinessProfile:handle Received invalid update from server`;var n=this.gadd(t.wid);t.tag!==n.tag&&n.markStale()}},{key:"getValid",value:function(e){var t=this.get(e);if(null==t?void 0:t.isValid())return t}}]),n}(c.default);t.BusinessProfileCollection=h,h.model=d.default,h.staleCollection=!0;var _=new h;t.default=_},58435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMMERCE_EXPERIENCE_TYPES=t.BUSINESS_HOUR_MODES=t.DAYS_OF_WEEK=void 0;t.DAYS_OF_WEEK=["sun","mon","tue","wed","thu","fri","sat"];t.BUSINESS_HOUR_MODES={OPEN_24H:"open_24h",SPECIFIC_HOURS:"specific_hours",APPOINTMENT_ONLY:"appointment_only"};var r=n(54302)({CATALOG:"catalog",NONE:"none",SHOP:"shop"});t.COMMERCE_EXPERIENCE_TYPES=r},79984:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseBusinessProfile=t.goToCommerceManager=t.goToShop=t.hasShop=t.hasCatalog=t.CATALOG_EXISTS=void 0;var i=a(n(81109)),o=a(n(6479)),s=a(n(21144)),u=r(n(16271)),l=n(58435),c=a(n(10725)),d=a(n(48629)),f=a(n(63056)),p="catalog_exists";t.CATALOG_EXISTS=p;var h=function(e){var t;return(null==e||null===(t=e.profile_options)||void 0===t?void 0:t.commerce_experience)===l.COMMERCE_EXPERIENCE_TYPES.CATALOG||(null==e?void 0:e.catalog_status)===p};t.hasCatalog=function(e){var t;return e&&e instanceof u.default?(null===(t=e.profileOptions)||void 0===t?void 0:t.commerceExperience)===l.COMMERCE_EXPERIENCE_TYPES.CATALOG||e.catalogStatus===p:h(e)};t.hasShop=function(e){var t,n;return(null==e||null===(t=e.profileOptions)||void 0===t?void 0:t.commerceExperience)===l.COMMERCE_EXPERIENCE_TYPES.SHOP&&Boolean(null==e||null===(n=e.profileOptions)||void 0===n?void 0:n.shopURL)};t.goToShop=function(e){var t,n=null==e||null===(t=e.profileOptions)||void 0===t?void 0:t.shopURL;n&&s.default.open(n)};t.goToCommerceManager=function(e){var t,n=null==e||null===(t=e.profileOptions)||void 0===t?void 0:t.commerceManagerURL;s.default.open(n||"https://business.facebook.com/commerce_manager/")};var _=function(e){return h(e)||f.default.shopsProductGrid&&function(e){var t,n;return(null==e||null===(t=e.profile_options)||void 0===t?void 0:t.commerce_experience)===l.COMMERCE_EXPERIENCE_TYPES.SHOP&&Boolean(null==e||null===(n=e.profile_options)||void 0===n?void 0:n.shop_url)}(e)};t.parseBusinessProfile=function(e){var t=e.profile,n=e.id,r=e.queryCatalog;if(!t)return{id:n};var a,s,f,p,h=t.business_hours,v=t.catalog_status,m=t.structured_address,g=t.profile_options,y=t.address,E=(0,o.default)(t,["business_hours","catalog_status","structured_address","profile_options","address"]),S={};return S.businessHours=h?(s=(a=h).config,f=a.timezone,p={},s.forEach((function(e){var t=e.day_of_week,n=e.mode;if(n===l.BUSINESS_HOUR_MODES.SPECIFIC_HOURS){var r=e.open_time,a=e.close_time;p[t]||(p[t]={mode:n,hours:[]}),null!=r&&null!=a&&p[t].hours&&p[t].hours.push([r,a])}else p[t]={mode:n}})),{config:p,timezone:f}):null,g&&(S.profileOptions={},S.profileOptions.commerceExperience=g.commerce_experience,S.profileOptions.cartEnabled=g.cart_enabled,null!=g.shop_url&&(S.profileOptions.shopURL=g.shop_url),null!=g.commerce_manager_url&&(S.profileOptions.commerceManagerURL=g.commerce_manager_url)),_(t)&&(S.catalogStatus=v,r&&c.default.findCarouselCatalog(n).then((function(e){var t=Array.isArray(e)?e[0]:e;d.default.assertGet(n).businessCatalog=t})).catch((function(){return __LOG__(3)`Store:BusinessProfile:missing catalog`}))),m?S.structuredAddress={streetAddress:m.street_address,cityId:m.city_id,localizedCityName:m.localized_city_name,zipCode:m.zip_code}:S.address=y||null,(0,i.default)((0,i.default)((0,i.default)((0,i.default)({},u.DEFAULTS),E),S),{},{id:n})}},83662:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.displayText=(0,u.prop)(),e.selected=(0,u.session)(!1),e}return n}(u.default);l.Proxy="replyButton";var c=(0,u.defineModel)(l);t.default=c},23280:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ButtonCollection=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(60619)),u=r(n(83662)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(s.default);t.ButtonCollection=l,l.model=u.default;var c=l;t.default=c},52433:(e,t,n)=>{"use strict";var r=n(95318),a=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,u,l,c,d,f,p=r(n(59713)),h=r(n(34575)),_=r(n(93913)),v=r(n(2205)),m=r(n(99842)),g=a(n(56727)),y=r(n(96675)),E=r(n(34541)),S=r(n(93743)),b=r(n(63805)),T=n(14423),w=function(e){(0,v.default)(r,e);var t=(0,m.default)(r);function r(){var e;(0,h.default)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,g.prop)(),e.peerJid=(0,g.prop)(),e.offerTime=(0,g.prop)(),e.isVideo=(0,g.prop)(!1),e.isGroup=(0,g.prop)(!1),e.groupCallParticipants=(0,g.prop)(),e.canHandleLocally=(0,g.prop)(!1),e.outgoing=(0,g.prop)(!1),e.webClientShouldHandle=(0,g.prop)(!1),e.participants=(0,g.collection)(y.default),e.callInfo=(0,g.prop)(),e._state=(0,g.prop)(),e._ringTimeout=(0,g.prop)(),e}return(0,_.default)(r,[{key:"getState",value:function(){return this._state}},{key:"setState",value:function(e){var t,r=e;(t=this._state,r in C[t||"EMPTY"])&&(this.webClientShouldHandle||r===T.CALL_STATES.INCOMING_RING||(r=T.CALL_STATES.HANDLED_REMOTELY,f||(f=n(78919).default),f.callEndByHandledRemotely(this.id)),this._state=r,this.handleNotification())}},{key:"handleNotification",value:function(){var e=this.getState();!S.default.tosShowCallNotification||!this.peerJid||b.default.isVoiceCallEnabled()&&!this.isVideo||b.default.isVideoCallEnabled()&&this.isVideo||(e===T.CALL_STATES.INCOMING_RING?E.default.alertCall(this.peerJid,this.id,this.isVideo,this.isGroup,this.canHandleLocally):E.default.cancelCall(this.peerJid))}},{key:"getCollection",value:function(){return n(68950).default}}]),r}(g.default);w.Proxy="call";var A=(0,g.defineModel)(w);t.default=A;var C={EMPTY:(i={},(0,p.default)(i,T.CALL_STATES.INCOMING_RING,!0),(0,p.default)(i,T.CALL_STATES.OUTGOING_CALLING,!0),(0,p.default)(i,T.CALL_STATES.CONNECTING,!0),(0,p.default)(i,T.CALL_STATES.REJECTED,!0),(0,p.default)(i,T.CALL_STATES.HANDLED_REMOTELY,!0),(0,p.default)(i,T.CALL_STATES.ENDED,!0),(0,p.default)(i,T.CALL_STATES.FAILED,!0),i),INCOMING_RING:(o={},(0,p.default)(o,T.CALL_STATES.HANDLED_REMOTELY,!0),(0,p.default)(o,T.CALL_STATES.CONNECTING,!0),(0,p.default)(o,T.CALL_STATES.ACTIVE,!0),(0,p.default)(o,T.CALL_STATES.REJECTED,!0),(0,p.default)(o,T.CALL_STATES.ENDED,!0),(0,p.default)(o,T.CALL_STATES.REMOTE_CALL_IN_PROGRESS,!0),(0,p.default)(o,T.CALL_STATES.FAILED,!0),o),OUTGOING_CALLING:(s={},(0,p.default)(s,T.CALL_STATES.OUTGOING_RING,!0),(0,p.default)(s,T.CALL_STATES.CONNECTING,!0),(0,p.default)(s,T.CALL_STATES.ENDED,!0),(0,p.default)(s,T.CALL_STATES.FAILED,!0),(0,p.default)(s,T.CALL_STATES.ACTIVE,!0),(0,p.default)(s,T.CALL_STATES.NOT_ANSWERED,!0),(0,p.default)(s,T.CALL_STATES.REMOTE_CALL_IN_PROGRESS,!0),s),OUTGOING_RING:(u={},(0,p.default)(u,T.CALL_STATES.CONNECTING,!0),(0,p.default)(u,T.CALL_STATES.ACTIVE,!0),(0,p.default)(u,T.CALL_STATES.REJECTED,!0),(0,p.default)(u,T.CALL_STATES.ENDED,!0),(0,p.default)(u,T.CALL_STATES.FAILED,!0),(0,p.default)(u,T.CALL_STATES.NOT_ANSWERED,!0),u),CONNECTING:(l={},(0,p.default)(l,T.CALL_STATES.ACTIVE,!0),(0,p.default)(l,T.CALL_STATES.ENDED,!0),(0,p.default)(l,T.CALL_STATES.REMOTE_CALL_IN_PROGRESS,!0),(0,p.default)(l,T.CALL_STATES.FAILED,!0),l),CONNECTION_LOST:(c={},(0,p.default)(c,T.CALL_STATES.ACTIVE,!0),(0,p.default)(c,T.CALL_STATES.ENDED,!0),(0,p.default)(c,T.CALL_STATES.FAILED,!0),c),ACTIVE:(d={},(0,p.default)(d,T.CALL_STATES.ENDED,!0),(0,p.default)(d,T.CALL_STATES.FAILED,!0),(0,p.default)(d,T.CALL_STATES.CONNECTION_LOST,!0),d),HANDLED_REMOTELY:{},ENDED:{},REJECTED:{},REMOTE_CALL_IN_PROGRESS:{},FAILED:{},NOT_ANSWERED:{}}},68950:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CallCollection=void 0;var o=i(n(63038)),s=i(n(81109)),u=i(n(34575)),l=i(n(93913)),c=i(n(2205)),d=i(n(99842)),f=n(11365),p=i(n(96486)),h=i(n(60619)),_=i(n(52433)),v=i(n(34263)),m=i(n(22021)),g=i(n(43968)),y=i(n(87189)),E=n(65249),S=i(n(63056)),b=i(n(63805)),T=a(n(42183)),w=n(66279),A=n(17192),C=n(14423),O=i(n(79075)),M=(v.default.VOIP_LOG_COLOR,null),I=null,k=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).pendingOffers={},e.pendingVoipCapChecks={},e}return(0,l.default)(a,[{key:"handleQuery",value:function(){return r.resolve()}},{key:"handle",value:function(e){var t=this;M&&I||(M=n(78919).default,I=n(78919).checkVoipCapability);var a=e.shift();if(a.data&&a.data[0]){var i=T.default.parseCallSignalingMsg(a);if(!i)return;var u={};(m.default.supportsFeature(m.default.F.DESKTOP_VOIP_VOICE_CALL)||S.default.webVoip)&&(Array.isArray(a.data[0])&&(a.data=a.data[0]),(0,T.base64DecodeRecursively)(a.data),u={peer_jid:i.peer_jid,payload:a.data,peer_platform:i.peer_platform,peer_app_version:i.peer_version,epoch_msec:null!=i.t?String(1e3*i.t):void 0,elapsed_msec:null!=i.e?String(1e3*i.e):void 0,is_offline:a.data[1].offline});var l=i.call_id,c=null,d=null,p=null,h=JSON.parse(JSON.stringify(a)),_=h.data[2]&&h.data[2].find((function(e){return"enc"===e[0]}));_&&(_[2]="xxx bytes"),__LOG__(2)`voip:incoming_signaling(peer):${JSON.stringify(i)}:`;var v=!1;switch(i.type){case w.TYPE.OFFER:if((0,E.getDoNotDisturb)()&&!y.default.isFocused)return void __LOG__(2)`CallCollection:handle: ignoring incoming call offer because do not disturb mode is enabled or screen is locked`;if(!O.default.isMicrophoneAvailable||!O.default.isSpeakerAvailable)return void __LOG__(2)`CallCollection:handle: ignoring incoming call offer because one of audio devices not detected`;if(v=!0,c=i.isVideoCall,d=i.isGroupCall_DEPRECATED,p=i.t,M.isInitialized()){this.pendingVoipCapChecks[l]=r.all([I((0,s.default)({},i)),(0,g.default)()]).then((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];return n&&r}));var A=a.data[2]&&a.data[2].find((function(e){return"enc"===e[0]}));this.pendingOffers[l]=new f.Resolvable,this.pendingOffers[l].promise.then((function(e){e&&T.default.receiveCallOfferKey(e,A)}))}}this.pendingVoipCapChecks[l]?this.pendingVoipCapChecks[l].then((function(e){var n;n=!d&&(c?e&&(b.default.isVideoCallEnabled()||S.default.webVoip):e),t.processIncomingCall(l,a.from,{isVideo:c,isGroupCall:d,canHandleLocally:n,offerTime:p}),n&&t.pendingOffers[l]&&(b.default.isVoiceCallEnabled()||S.default.webVoip)?t.pendingOffers[l].promise.then((function(){var e;null===(e=M)||void 0===e||e.handleIncomingSignalingMessage(i,u)})):t.cleanupPendingOffer(l)})).finally((function(){delete t.pendingVoipCapChecks[l]})):this.pendingOffers[l]?(v&&this.processIncomingCall(l,a.from),(b.default.isVoiceCallEnabled()||S.default.webVoip)&&this.pendingOffers[l].promise.then((function(){var e;null===(e=M)||void 0===e||e.handleIncomingSignalingMessage(i,u)}))):(v&&this.processIncomingCall(l,a.from,{isVideo:c,isGroupCall:d,canHandleLocally:!1,offerTime:p}),M.isInitialized()&&(b.default.isVoiceCallEnabled()||S.default.webVoip)&&M.handleIncomingSignalingMessage(i,u))}else switch(__LOG__(2)`voip:incoming_signaling(paired phone):${JSON.stringify(a)}:`,a.type){case"offer_key":var k=this.pendingOffers[a.id];k&&a.key instanceof ArrayBuffer?k.resolve(a.key):__LOG__(3)`received offer_key: no pending offer`;break;case"accept":case"reject":case"terminate":var P=this.get(a.id);P&&P.setState(C.CALL_STATES.ENDED),this.cleanupPendingOffer(a.id)}}},{key:"processIncomingCall",value:function(e,t,n){if(null==this.get(e)){var r=n,a={id:e};null!=t&&(a.peerJid=t),r&&(r=p.default.omitBy(r,(function(e){return null==e})),p.default.merge(a,r)),this.add(a,{merge:!0})}else __LOG__(2)`voip:processIncomingCall: Attempting to add existing call with call ID`}},{key:"cleanupPendingOffer",value:function(e){delete this.pendingOffers[e]}},{key:"setActiveCall",value:function(e){var t,n=this.activeCall&&!e,r=null===(t=this.activeCall)||void 0===t?void 0:t.webClientShouldHandle;this.activeCall=e,this.trigger("change:activeCall",e),n&&r&&(0,A.playEndCallTone)()}}]),a}(h.default);t.CallCollection=k,k.model=_.default;var P=new k;t.default=P},81986:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.callId=(0,u.prop)(),e.isIncoming=(0,u.prop)(!1),e.isRinging=(0,u.prop)(!1),e.isInterrupted=(0,u.prop)(!1),e.isMuted=(0,u.prop)(!1),e.isTrafficStopped=(0,u.prop)(!1),e.isInvitingToGroupCall=(0,u.prop)(!1),e.isVideoStopped=(0,u.prop)(!1),e.isVideoPaused=(0,u.prop)(!1),e.isVideoDecodePaused=(0,u.prop)(!1),e.isVideoDecodeStarted=(0,u.prop)(!1),e.isOfferingVideoUpgrade=(0,u.prop)(!1),e}return n}(u.default);l.Proxy="callParticipant";var c=(0,u.defineModel)(l);t.default=c},96675:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(96486)),u=r(n(60619)),l=r(n(81986)),c=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(u.default);t.default=c,c.model=l.default,c.comparator=function(e,t){return e.id===t.id?0:s.default.lt(e.id,t.id)?-1:1}},18729:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=a(n(23928)),p=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,d.prop)(),e.products=(0,d.prop)(),e.itemCount=(0,d.prop)(),e.total=(0,d.prop)(),e.currency=(0,d.prop)(),e.message=(0,d.prop)(),e}return(0,o.default)(r,[{key:"countTotals",value:function(){var e=this.cartItemCollection.reduce((function(e,t){var n;return e.currency.add(t.currency),{itemCount:e.itemCount+t.quantity,total:e.total+t.quantity*(null!==(n=t.priceAmount1000)&&void 0!==n?n:0),currency:e.currency}}),{itemCount:0,total:0,currency:new Set}),t=1===e.currency.size,n={itemCount:e.itemCount,total:t?e.total:null,currency:t?e.currency.values().next().value:null};this.set(n,{silent:!0})}},{key:"initialize",value:function(){(0,s.default)((0,u.default)(r.prototype),"initialize",this).call(this),this.cartItemCollection=new f.default,this.listenTo(this,"change:cartItemCollection",this.countTotals)}},{key:"getCollection",value:function(){return n(73293).default}}]),r}(d.default);p.Proxy="cart";var h=(0,d.defineModel)(p);t.default=h},73293:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CartCollection=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(60619)),c=a(n(18729)),d=a(n(93743)),f=n(71701),p=a(n(22021)),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this)).imageWidth=100,a.imageHeight=100,null!=e&&(a.imageWidth=e),null!=r&&(a.imageHeight=r),a}return(0,o.default)(n,[{key:"saveToCache",value:function(){if(!p.default.supportsFeature(p.default.F.MD_BACKEND))try{if(!d.default.shouldSaveToCache())return;var e=this.reduce((function(e,t){var n=t.cartItemCollection,r=t.itemCount,a=t.total,i=t.currency,o=t.id,s=t.message,u=n.map((function(e){return{id:e.id,priceAmount1000:e.priceAmount1000,currency:e.currency,name:e.name,quantity:e.quantity,imageHash:e.imageHash}}));return u.length>0&&e.push({id:o,products:u,itemCount:r,total:a,currency:i,message:s}),e}),[]);!0,(0,f.setCollection)(n.cachePolicy.id,e,true)}catch(e){__LOG__(3)`Error while saving carts to cache, ${String(e)}`}}},{key:"initializeFromCache",value:function(e){var t=this;try{(e||[]).forEach((function(e){var n=new c.default({id:e.id,itemCount:e.itemCount,total:e.total,currency:e.currency,message:e.message});n.cartItemCollection.add(e.products),t.add(n,{merge:!0})}))}catch(e){__LOG__(3)`Error while restoring carts from cache, ${String(e)}`}}},{key:"findCart",value:function(e){return this.gadd(e)}}]),n}(l.default);t.CartCollection=h,h.model=c.default,h.cachePolicy={id:"cart_collection",policy:l.CACHE_POLICY.LOAD,delay:2e3};var _=new h;t.default=_},26829:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_QUANTITY=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727));t.MAX_QUANTITY=99;var c=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.priceAmount1000=(0,l.prop)(),e.currency=(0,l.prop)(),e.name=(0,l.prop)(),e.quantity=(0,l.prop)(),e.imageHash=(0,l.prop)(),e.imageCdnUrl=(0,l.prop)(),e}return(0,o.default)(r,[{key:"getCollection",value:function(){return n(73293).default}}]),r}(l.default);c.Proxy="cart-item";var d=(0,l.defineModel)(c);t.default=d},23928:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CartItemCollection=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(60619)),u=r(n(26829)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(s.default);t.CartItemCollection=l,l.model=u.default;var c=l;t.default=c},54654:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getForwardedMessageFields=Ue,t.default=t.CHAT_KIND=t.KIND=t.ConversationEndOfHistoryTransferModelPropType=void 0;var o=i(n(43269)),s=i(n(87757)),u=i(n(48926)),l=i(n(319)),c=i(n(34575)),d=i(n(93913)),f=i(n(16525)),p=i(n(29754)),h=i(n(2205)),_=i(n(99842)),v=n(53615),m=n(80835),g=i(n(91080)),y=i(n(96486)),E=i(n(67294)),S=n(4976),b=n(83180),T=i(n(1073)),w=n(4159),A=n(56727),C=i(n(6333)),O=i(n(22419)),M=i(n(37294)),I=i(n(80961)),k=i(n(23169)),P=i(n(72631)),R=i(n(50220)),D=i(n(79140)),N=i(n(34541)),L=i(n(93743)),x=i(n(34263)),U=i(n(70167)),F=i(n(48629)),G=i(n(48633)),B=n(41150),j=n(14650),Y=i(n(3130)),K=a(n(98569)),W=n(71701),V=i(n(22021)),H=i(n(8685)),$=i(n(89115)),z=n(48186),q=i(n(65122)),J=n(16952),Q=i(n(8643)),X=i(n(16551)),Z=i(n(66312)),ee=n(29930),te=i(n(5315)),ne=n(81452),re=i(n(30608)),ae=n(39077),ie=n(29843),oe=i(n(34254)),se=n(86912),ue=i(n(99838)),le=i(n(75554)),ce=n(20643),de=n(48862),fe=n(83537),pe=(n(67298),n(82565)),he=n(86729),_e=i(n(63056)),ve=n(37475),me=a(n(76408)),ge=i(n(91322)),ye=a(n(59502)),Ee=i(n(76319)),Se=n(35562),be=n(29846),Te=n(55182),we=n(77215),Ae=i(n(61110)),Ce=i(n(23306)),Oe=i(n(12717)),Me=i(n(7860)),Ie=n(26083),ke=n(48399),Pe=n(16115),Re=n(75793),De=n(54302)({COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:0,COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:1,INCOMPLETE:2});t.ConversationEndOfHistoryTransferModelPropType=De;var Ne=3e5,Le={GROUP:"group",BROADCAST:"broadcast",CHAT:"chat"};t.CHAT_KIND=t.KIND=Le;var xe=function(e){(0,h.default)(xe,e);var t,a,i,ge=(0,_.default)(xe);function xe(){var e;(0,c.default)(this,xe);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=ge.call.apply(ge,[this].concat(n))).id=(0,A.prop)(),e.t=(0,A.prop)(),e.unreadCount=(0,A.prop)(0),e.archive=(0,A.prop)(),e.isReadOnly=(0,A.prop)(),e.isAnnounceGrpRestrict=(0,A.prop)(),e.modifyTag=(0,A.prop)(),e.muteExpiration=(0,A.prop)(0),e.name=(0,A.prop)(),e.notSpam=(0,A.prop)(),e.pin=(0,A.prop)(),e.labels=(0,A.prop)(),e.changeNumberOldJid=(0,A.prop)(),e.changeNumberNewJid=(0,A.prop)(),e.lastReceivedKey=(0,A.prop)(),e.ephemeralDuration=(0,A.prop)(),e.ephemeralSettingTimestamp=(0,A.prop)(),e.disappearingModeInitiator=(0,A.prop)(),e.createdLocally=(0,A.session)(),e.pendingAction=(0,A.session)(),e.formattedTitle=(0,A.session)(),e.active=(0,A.session)(),e.pausedTimerId=(0,A.session)(),e.presenceResendTimerId=(0,A.session)(),e.recording=(0,A.session)(),e.typing=(0,A.session)(),e.colors=(0,A.session)(),e.composeContents=(0,A.session)((function(){return{}})),e.attachMediaContents=(0,A.session)(),e.squelch=(0,A.session)(),e.pendingSeenCount=(0,A.session)(0),e.unreadMsgAnchor=(0,A.session)(),e.markedUnread=(0,A.session)(),e.trusted=(0,A.session)(),e.canSend=(0,A.session)(),e.promises=(0,A.session)((function(){return{}})),e.ftsCache=(0,A.session)((function(){return{}})),e.composeQuotedMsg=(0,A.session)(),e.composeQuotedMsgRemoteJid=(0,A.session)(),e.quotedMsgAdminGroupJid=(0,A.session)(),e.groupMetadata=(0,A.session)(),e.presence=(0,A.session)(),e.mute=(0,A.session)(),e.contact=(0,A.session)(),e.liveLocation=(0,A.session)(),e.liveLocationQueried=(0,A.session)(!1),e.ackedProps=(0,A.session)((function(){return{}})),e.mediaCount=(0,A.session)(0),e.linkCount=(0,A.session)(0),e.docCount=(0,A.session)(0),e.productCount=(0,A.session)(0),e.unreadMentionsOfMe=(0,A.prop)(),e.msgUnsyncedButtonReplyMsgs=(0,A.prop)(),e.vcardDismissed=(0,A.session)(!1),e.endOfHistoryTransfer=(0,A.session)(!1),e.endOfHistoryTransferType=(0,A.prop)(),e.hasEstablishedE2EESession=(0,A.session)(!1),e.pendingInitialLoading=(0,A.session)(!0),e.kind=(0,A.derived)(e._kind),e.isUser=(0,A.derived)(e._isUser),e.isPSA=(0,A.derived)(e._isPSA),e.isGroup=(0,A.derived)(e._isGroup),e.isBroadcast=(0,A.derived)(e._isBroadcast),e.canUnread=(0,A.derived)(e._canUnread),e.hasUnread=(0,A.derived)(e._hasUnread,["unreadCount"]),e.optimisticUnreadCount=(0,A.derived)(e._optimisticUnreadCount,["unreadCount","pendingSeenCount"]),e.shouldShowUnreadDivider=(0,A.derived)(e._shouldShowUnreadDivider,["unreadCount","unreadMsgAnchor"]),e.shouldAppearInList=(0,A.derived)(e._shouldAppearInList,["createdLocally","msgs","msgsLength"]),e.previewMessage=(0,A.derived)(e._previewMessage,["msgs","msgsChanged"]),e.showChangeNumberNotification=(0,A.derived)(e._showChangeNumberNotification,["changeNumberOldJid","changeNumberNewJid","id","isUser"]),e.shouldShowUnreadInTitle=(0,A.derived)(e._shouldShowUnreadInTitle,["isGroup","archive","optimisticUnreadCount","muteExpiration"]),e}return(0,d.default)(xe,[{key:"initialize",value:function(){var e=this;(0,f.default)((0,p.default)(xe.prototype),"initialize",this).call(this),this.addQueue=new H.default,this.sendQueue=new H.default,this._ephemeralMessagesToDelete=new Set,this._ephemeralMessageTimerIds=new Map,this._promises=null,this.msgs.msgLoadState.contextLoaded=!0,this.addChild("presence",oe.default.gadd(this.id));var t=re.default.get(this.id);if(t?this.addChild("mute",t):this.addChild("mute",re.default.gadd({id:this.id,expiration:this.muteExpiration})),this.listenTo(this.mute,"change:expiration",this.updateMuteExpiration),this.addChild("contact",F.default.gadd(this.id)),this.name&&!this.contact.name){var n={name:this.name};this.isGroup?this.contact.set(n):(0,be.updateLocal)(this.contact.id,n).then((function(){e.contact.set(n)}))}if(this.listenTo(this.contact,"change:name",this.updateTitle),this.listenTo(this.contact,"change:isContactBlocked",this.updateCanSend),this.isGroup&&(this.trusted=!0),this.isGroup||this.isBroadcast){var r,a=this.getGroupMetadataCollection();if(this.isBroadcast&&!a.get(this.id)&&(r=!0),this.addChild("groupMetadata",a.gadd(this.id)),this.listenTo(this.groupMetadata,"change:stale change:announce",this.updateIsAnnounceGrpRestrict),this.listenTo(this.groupMetadata.participants,"change:isAdmin add remove",this.updateIsAnnounceGrpRestrict),this.listenTo(this.groupMetadata,"change:trusted change:stale",this.isTrusted),this.listenTo(this.groupMetadata,"change:participants change:stale",this.updateReadOnly),this.listenTo(this.groupMetadata.participants,"change:contact.formattedShortName",this.updateTitle),V.default.supportsFeature(V.default.F.MD_BACKEND)&&(0,S.getABPropConfigValue)("group_catch_up")&&this.unreadMentionsOfMe){var i=this.unreadMentionsOfMe.map((function(e){return new Ee.default({id:e.id,timestamp:e.timestamp})}));this.groupMetadata.unreadMentionMetadata.addUnreadMentions(i,Se.MessageType.PERSISTANCE_LOAD)}this.updateReadOnly(),this.updateIsAnnounceGrpRestrict();var o=this.id;this.listenTo(this,"change:isReadOnly",(function(){this.isTrusted(),this.updateCanSend(),ue.default.update(o).catchType(j.WebdDrop,(function(){})),a.update(o).catchType(j.WebdDrop,(function(){}))})),this.listenTo(this,"change:isAnnounceGrpRestrict",this.updateCanSend),this.listenTo(this,"change:archive",(function(){!0===e.archive&&(0,w.shouldEnableArchiveV2)()&&(0,ve.setArchiveEnabledSetting)(!0)})),r&&a.update(o).catchType(j.WebdDrop,(function(){}))}else this.listenTo(this.presence,"change:isOnline",(function(){return(0,ie.presenceOnlineChanged)(e)})),this.listenTo(this.contact,"change:isMyContact",this.isTrusted);var s=this.getCollection();s.notSpam[this.id]&&!this.notSpam&&(0,pe.sendNotSpam)(this).catch((function(){})),s.notSpam[this.id]=!!this.notSpam,this.notSpam||this.listenTo(this,"change:notSpam",this.onNotSpamChange),this.updateTitle(),this.isTrusted(),this.updateCanSend(),this.listenTo(this.msgs,"add",this.onNewMsg),this.listenTo(this.msgs,"update_sort_time",this.updateSortTime),this.listenTo(this.msgs,"bulk_add",this.addMediaMsgs),this.listenTo(this.msgs,"add",this._deregisterExpiredViewOnceMessage),this.listenTo(this.msgs,"bulk_add",this.deregisterExpiredViewOnceBulkMessages),this.listenTo(this.msgs,"add remove change:ephemeralExpirationTimestamp",this._resetEphemeralMessageExpirationTimer),this.listenTo(this.msgs,"bulk_add",(function(t){t.forEach((function(t){e._resetEphemeralMessageExpirationTimer(t)}))})),this.listenTo(this,"change:msgs",this.resetMediaMsgs),this._saveAssignedColors=y.default.debounce(this.saveAssignedColors,1e3),this.listenTo(this,"change:active",this.onActiveUpdate),this.pendingAction=0,this.listenTo(this,"change:t change:modifyTag",this._clearFtsCache),this.listenTo($.default,"locale_change",(function(){e.updateTitle()})),L.default.isSMB&&(0,z.initializeLabels)(this)}},{key:"_kind",value:function(){return Oe.default.isGroup(this.id)?Le.GROUP:Oe.default.isBroadcast(this.id)?Le.BROADCAST:Oe.default.isUser(this.id)?Le.CHAT:void __LOG__(2)`chat:unknown kind id:${this.id.toString()}`}},{key:"_isUser",value:function(){return Oe.default.isUser(this.id)}},{key:"_isPSA",value:function(){return Oe.default.isPSA(this.id)}},{key:"_isGroup",value:function(){return Oe.default.isGroup(this.id)}},{key:"_isBroadcast",value:function(){return Oe.default.isBroadcast(this.id)}},{key:"isSupportGroup",value:function(){return this.isGroup&&this.groupMetadata.support}},{key:"_canUnread",value:function(){return!this.isBroadcast}},{key:"_hasUnread",value:function(){return 0!==this.unreadCount}},{key:"_optimisticUnreadCount",value:function(){var e=this.unreadCount,t=this.pendingSeenCount;return e===x.default.MARKED_AS_UNREAD?e:Math.max(0,e-t)}},{key:"_shouldShowUnreadDivider",value:function(){if(0===this.unreadCount)return!1;if(this.unreadMsgAnchor){var e=this.unreadMsgAnchor.msgChunk,t=e?e.getModelsArray():[];return this.unreadMsgAnchor!==t.find((function(e){return e.isUnreadType}))}return!this.msgs.msgLoadState.noEarlierMsgs||this.msgs.filter((function(e){return e.isUnreadType})).length!==this.unreadCount}},{key:"_shouldAppearInList",value:function(){if(V.default.supportsFeature(V.default.F.MD_BACKEND)&&this.isBroadcast)return!1;if(this._shouldAppearInListLatched)return!0;if(Oe.default.isStatusV3(this.id))return!1;var e=this.msgs.some((function(e){var t=e.type===x.default.MSG_TYPE.GROUPS_V4_INVITE&&e.from.equals((0,W.getMaybeMeUser)()),n=e.type===x.default.MSG_TYPE.E2E_NOTIFICATION&&"encrypt"===e.subtype;return!t&&!n&&e.type!==x.default.MSG_TYPE.CALL_LOG&&!e.isBizNotification&&"change_number"!==e.subtype}));return this._shouldAppearInListLatched=!this.createdLocally||e,this._shouldAppearInListLatched}},{key:"_previewMessage",value:function(){for(var e=this.msgs.length-1;e>=0;e--){var t=this.msgs.at(e);if(t&&t.type!==x.default.MSG_TYPE.E2E_NOTIFICATION)return t}if(this.msgs.length>0)return this.msgs.last()}},{key:"_showChangeNumberNotification",value:function(){if(!V.default.supportsFeature(V.default.F.CHANGE_NUMBER_V_2))return!1;var e=this.changeNumberOldJid,t=this.changeNumberNewJid,n=this.id;if(!this.isUser)return!1;if(!e&&!t)return!1;var r=F.default.get(t||n);return!r||!r.isMyContact}},{key:"_shouldShowUnreadInTitle",value:function(){var e=!!this.muteExpiration;if(this.archive)return!1;if(this.optimisticUnreadCount<=0)return!1;if(!this.isGroup)return!e;if(!e)return!0;if(!this.msgs||0===this.msgs.length)return!1;for(var t=!1,n=this.msgs,r=this.optimisticUnreadCount,a=Math.max(0,n.length-r);a<n.length;a++){var i=this.msgs.at(a);if(i){var o=(0,W.getMaybeMeUser)();if(i.isMentioned(o)||i.isQuoted(o)){var s=this.getCollection().get(i.sender);if(!s||!s.muteExpiration){t=!0;break}}}}return t}},{key:"set",value:function(e,t,n){return"string"==typeof e?"muteExpiration"===e&&this.mute&&this.mute.setMute(t):e.hasOwnProperty("muteExpiration")&&this.mute&&this.mute.setMute(e.muteExpiration),(0,f.default)((0,p.default)(xe.prototype),"set",this).call(this,e,t,n)}},{key:"addPendingAction",value:function(e){var t=this;if(e.isPending()){var n=function(){t.decPending()};e.then(n,n),this.pendingAction++}}},{key:"decPending",value:function(){this.pendingAction>0?this.pendingAction--:(__LOG__(2)`chat:onPendingActionUpdate pendingAction value is invalid`,this.pendingAction=0)}},{key:"onActiveUpdate",value:function(){var e=this;this.isGroup&&this.active&&(this.squelch=-1),this.presence.chatActive=this.active,this.active||(this.msgs.filter((function(e){return(0,we.isExpired)(e.safe())})).forEach(J.deregisterMsg),V.default.supportsFeature(V.default.F.MD_BACKEND)&&(0,Pe.removeExpiredMessagesFromHistory)((0,l.default)(this._ephemeralMessagesToDelete)),this._ephemeralMessagesToDelete.forEach((function(t){e._ephemeralMessagesToDelete.delete(t),t.delete({skipUpdatingSortTime:!0,doNotResetLastReceived:!0})})))}},{key:"onPendingActionUpdate",value:function(){this.pendingAction<0&&(__LOG__(2)`chat:onPendingActionUpdate pendingAction value is invalid`,this.pendingAction=0)}},{key:"onNotSpamChange",value:function(){this.getCollection().notSpam[this.id]=this.notSpam,this.isTrusted(),this.notSpam&&this.stopListening(this,"change:notSpam")}},{key:"hasMaybeSentMsgToChat",value:function(){return this.getAllMsgs().some((function(e){return e.isSentByMe}))}},{key:"isTrusted",value:function(){var e=!1;return this.isGroup?e=this.isReadOnly||this.notSpam||this.groupMetadata.isTrusted():this.isBroadcast?e=!0:this.isUser&&(e=this.notSpam||this.contact.isMyContact),!e&&this.hasMaybeSentMsgToChat()&&(e=!0),this.trusted=e}},{key:"updateMuteExpiration",value:function(){var e=this,t=Number(this.mute.expiration);(0,Te.updateLocal)(this.id,{muteExpiration:t}).then((function(){return e.muteExpiration=t}))}},{key:"updateTitle",value:function(){this.isBroadcast?this.formattedTitle=this.contact.name||this.groupMetadata.participants.map((function(e){return e.contact.formattedShortName})).join(", "):this.isUser?this.formattedTitle=this.contact.getFormattedUser()||"":this.isGroup&&(this.formattedTitle=this.contact.name)}},{key:"title",value:function(){return this.isGroup?this.formattedTitle||$.default.t(1471):this.formattedTitle}},{key:"updateCanSend",value:function(){return this.isReadOnly||this.isAnnounceGrpRestrict?this.canSend=!1:this.isUser?this.canSend=!(this.contact.isContactBlocked||this.isPSA):this.canSend=!0}},{key:"delete",value:function(){(0,f.default)((0,p.default)(xe.prototype),"delete",this).call(this),this.getCollection().remove(this.id),this.cancelPendingPromises(),this.presence.delete(),this.liveLocation&&this.liveLocation.delete(),N.default.closeChat(this),this.groupMetadata&&this.groupMetadata.delete(),this.mediaMsgs&&this.mediaMsgs.delete(),this.linkMsgs&&this.linkMsgs.delete(),this.docMsgs&&this.docMsgs.delete(),this.productMsgs&&this.productMsgs.delete();var e=this.starredMsgs;e&&(e.delete(),e.stopListening(),e.reset()),this.receivedVcardMsgs&&this.receivedVcardMsgs.delete(),(0,W.deleteComposeContents)(this.id)}},{key:"isDirty",value:function(){return 0!==this.unreadCount}},{key:"resetMediaMsgs",value:function(){var e=this.mediaMsgs,t=this.linkMsgs,n=this.docMsgs,r=this.productMsgs;e&&(e.delete(),e.queryMedia({chat:this})),t&&(t.delete(),t.queryLinks(this)),n&&(n.delete(),n.queryDocs(this)),r&&(r.delete(),r.queryProducts(this))}},{key:"isMsgForMediaCollection",value:function(e){return e.isMedia&&!e.isViewOnce}},{key:"addMediaMsgs",value:function(e,t){var n=this;if(e){var r=Array.isArray(e)?e:[e],a=[],i=[],o=[],s=[];r.forEach((function(e){n.isMsgForMediaCollection(e)&&a.push(e),e.asDoc&&o.push(e),e.linkPreview&&i.push(e),null!=e.asProduct&&s.push(e)})),this.mediaMsgs&&a.length&&this.mediaMsgs.add(a,t),this.linkMsgs&&i.length&&this.linkMsgs.add(i,t),this.docMsgs&&o.length&&this.docMsgs.add(o,t),this.productMsgs&&s.length&&this.productMsgs.add(s,t)}}},{key:"onNewMsg",value:function(e){var t=this;if(e){var n=r.resolve();e.isSentByMe&&!this.notSpam&&(n=(0,Te.updateLocal)(this.id,{notSpam:!0}).then((function(){return t.notSpam=!0}))),"i"!==e.eventType&&n.then((function(){var n={};return V.default.supportsFeature(V.default.F.MD_BACKEND)||(n.t=e.t),t.promises.updateSortTime&&t.promises.updateSortTime.cancel(),t.updateMediasCountOnMsg(e),t.archive&&(0,w.shouldUnarchiveChat)(e.isSentByMe)&&(n.archive=!1),t.promises.setArchive&&t.promises.setArchive.cancel(),e.isSentByMe?t.markedUnread=!1:((0,C.default)({id:t.id,participant:e.author,type:"paused"},!1),V.default.supportsFeature(V.default.F.MD_BACKEND)||"a"!==e.eventType&&"d"!==e.eventType||(n.unreadCount=t.unreadCount+1||1)),(0,Te.updateLocal)(t.id,n).then((0,u.default)(s.default.mark((function e(){var r,a,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V.default.supportsFeature(V.default.F.MD_BACKEND)){e.next=14;break}return e.prev=1,e.next=4,(0,ke.getChatMeta)(t.id);case 4:r=e.sent,a=r.unreadCount,i=r.timestamp,n.t=i,n.unreadCount=a,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),__LOG__(4,void 0,new Error)`onNewMsg: unable to find metadata from chat table for id:${t.id.toString()}`;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))))})).then((function(n){e.isSentByMeFromWeb&&e.sendDeferred?t.setAndKeepPrevious(n,e.sendDeferred.promise):t.set(n);var r=G.default.get(t.id);if(r&&(r.timestamp=D.default.globalUnixTime()),"gp2"!==e.type||"add"!==e.subtype&&"create"!==e.subtype||t.getGroupMetadataCollection().trigger(`group_participant_change_${(0,W.getMaybeMeUser)().toString()}`,t.id),!e.isSentByMe){switch(e.eventType){case"d":case"a":"d"===e.eventType&&N.default.alertNewMsg(e),t.msgs.length<x.default.MSG_PRELOAD_THRESHOLD&&t.loadEarlierMsgs(void 0,Q.default.WEBC_QUERY_TRIGGER_TYPE.NEW_MESSAGE_PREFETCH).catchType(j.E404,(function(){})).catch((function(e){__LOG__(2)`chat:onNewMsg failed\n${e}`}));break;case"n":e.type===x.default.MSG_TYPE.CALL_LOG&&N.default.alertNewMsg(e);break;case"s":if("gp2"===e.type&&"add"===e.subtype&&(0,W.getMaybeMeUser)().equals(e.recipients[0])&&!t.contact.name)return;N.default.alertNewMsg(e),t.getGroupMetadataCollection().trigger(`group_participant_change_${(0,W.getMaybeMeUser)().toString()}`,t.id)}var a=e.mediaData;!a||"image"!==a.type&&"video"!==a.type||N.default.newMediaMsg(e),V.default.supportsFeature(V.default.F.MD_BACKEND)&&n.unreadCount&&(0,Ie.processOrphanPeerReceipt)(e.id)}}))}}},{key:"canPin",value:function(){if(this.archive)return!1;var e=this.promises&&this.promises.setArchive;return!e||!e.archive}},{key:"canArchive",value:function(){return!this.isBroadcast||V.default.supportsFeature(V.default.F.ARCHIVE_BROADCAST)}},{key:"sendDismissChangeNumber",value:function(){var e=this;if(this.promises.sendDismissChangeNumber)return this.promises.sendDismissChangeNumber;var t=V.default.supportsFeature(V.default.F.MD_BACKEND)?r.resolve({status:200,_duplicate:null}):Ce.default.sendConversationDismissChangeNumber(this.id);this.promises.sendDismissChangeNumber=t;var n=new b.ActionType($.default.t(68)),a=t.then((function(e){return 200===e.status?new b.ActionType($.default.t(67)):e.status>=400?new b.ActionType($.default.t(66)):void 0})).catch((function(){return __LOG__(3)`models:chat:sendDismissChangeNumber dropped`,new b.ActionType($.default.t(66),{actionText:$.default.t(201),actionHandler:e.sendDismissChangeNumber.bind(e)})}));return N.default.openToast(E.default.createElement(b.ActionToast,{id:(0,b.genId)(),initialAction:n,pendingAction:a})),t.then((function(t){if(200===t.status&&!t._duplicate)return(0,Te.updateLocal)(e.id,{changeNumberNewJid:void 0,changeNumberOldJid:void 0}).then((function(){e.changeNumberOldJid=e.changeNumberNewJid=void 0}))})).finally((function(){e.promises.sendDismissChangeNumber=null}))}},{key:"setComposeContents",value:function(e){this.composeContents=e}},{key:"getSessionPersistedComposeContents",value:function(){return(0,W.getComposeContents)(this.id)}},{key:"getComposeContents",value:function(){return y.default.isEmpty(this.composeContents)?this.getSessionPersistedComposeContents()||{}:this.composeContents}},{key:"setAttachMediaContents",value:function(e){this.attachMediaContents=e}},{key:"preload",value:function(){1===this.msgs.length&&this.loadEarlierMsgs().catchType(j.E404,(function(){})).catch((function(e){__LOG__(2)`chat:preload failed\n${e}`}))}},{key:"onEmptyMRM",value:function(){__LOG__(2)`models:Chat:removeMsg 0 messages left, querying...`,this.loadEarlierMsgs().catchType(j.E404,(function(){})).catch((function(e){__LOG__(2)`chat:onEmptyMRM failed\n${e}`}))}},{key:"loadEarlierMsgs",value:(i=(0,u.default)(s.default.mark((function e(t,n){var a,i,o,u,l=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V.default.supportsFeature(V.default.F.MD_BACKEND)){e.next=3;break}return e.next=3,this.waitForChatLoading();case 3:if(a=t,i=null!=n?n:Q.default.WEBC_QUERY_TRIGGER_TYPE.USER_SCROLL,a||(a=this.msgs),!a.msgLoadState.noEarlierMsgs){e.next=8;break}return e.abrupt("return",r.resolve());case 8:if(!a.msgLoadState.isLoadingEarlierMsgs){e.next=10;break}return e.abrupt("return",a.loadEarlierPromise);case 10:return o=a?a.head():null,u=function(){return o?o.msgChunk:a},e.abrupt("return",this._loadMsgs("before",a,i).then((function(e){var t=u();return t&&Array.isArray(e)&&e.length<x.default.PAGE_SIZE&&(t.msgLoadState.noEarlierMsgs=!V.default.supportsFeature(V.default.F.MD_BACKEND)||l.endOfHistoryTransferType!==De.INCOMPLETE),t&&l.isMostRecentCMC(t)&&l.trigger("msgs:loadEarlier"),e})));case 13:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"isMostRecentCMC",value:function(e){return this.msgs===e}},{key:"loadRecentMsgs",value:function(e){var t=e;return t||(t=this.msgs),this.isMostRecentCMC(t)?r.resolve():t.msgLoadState.isLoadingRecentMsgs?t.loadRecentPromise:this._loadMsgs("after",t,Q.default.WEBC_QUERY_TRIGGER_TYPE.USER_SCROLL)}},{key:"_loadMsgs",value:function(e,t,n){var r,a={};(r="after"===e?t.last():t.head())?a=r.id.clone():a.remote=this.id,a.count=x.default.PAGE_SIZE,a.direction=e;var i=(0,ee.newMessageQueryEvent)(n);return this._loadMsgsPromiseLoop(r,t,Z.default.findQuery.bind(Z.default,a,{logOnSend:function(e){i.webcResponseBytes+=e.binarySize}}),e,i)}},{key:"_updateMsgLoadState",value:function(e,t,n){var r=e&&e.msgChunk&&e.msgChunk!==t;t.msgLoadState.contextLoaded=!0,e&&r&&((0,g.default)(e.msgChunk,"msg.msgChunk").msgLoadState.contextLoaded=!0),"after"===n?t.msgLoadState.isLoadingRecentMsgs=!1:"before"===n?t.msgLoadState.isLoadingEarlierMsgs=!1:"around"===n&&(t.msgLoadState.isLoadingAroundMsgs=!1)}},{key:"_loadMsgsPromiseLoop",value:function(e,t,n,a,i){var o=this,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=performance.now();"after"===a?(t.msgLoadState.isLoadingRecentMsgs=!0,i.webcMessageQueryType=Q.default.WEBC_MESSAGE_QUERY_DIRECTION.LOAD_NEXT):"before"===a?(t.msgLoadState.isLoadingEarlierMsgs=!0,i.webcMessageQueryType=Q.default.WEBC_MESSAGE_QUERY_DIRECTION.LOAD_PREV):"around"===a&&(t.msgLoadState.isLoadingAroundMsgs=!0,i.webcMessageQueryType=Q.default.WEBC_MESSAGE_QUERY_DIRECTION.LOAD_AROUND),i.webcBrowserNetworkType=(0,ae.getEffectiveNetworkType)(),i.webcChatType=this.getWebcChatType(),"number"==typeof this.initialIndex&&(i.webcChatPosition=this.initialIndex);var l=(0,m.promiseLoop)((function(s,l,c){var d=(0,v.delayMs)(ye.expBackoff(c,12e4,1e3,.1)),f=r.resolve();return V.default.supportsFeature(V.default.F.MD_BACKEND)||"CONNECTED"===Me.default.stream||(f=(0,Ae.default)(Me.default,"change:stream",(function(){return"CONNECTED"===Me.default.stream}))),f.then((function(){return o.regCancellablePromise(n()).then((function(n){var r;i.webcQueryT=Math.ceil(performance.now()-u),Array.isArray(n[0])?(r=n[0][0],n.forEach((function(e){return(0,ee.logMessageCounts)(i,e)}))):(r=n[0],(0,ee.logMessageCounts)(i,n)),r&&(i.webcEarliestMessageT=r.t,r.msgChunk===o.msgs&&(i.webcEarliestMessageIndex=o.msgs.length-1)),(0,Y.default)().then((function(e){e&&(i.webcBrowserStorageQuotaBytes=e.quota,i.webcBrowserStorageQuotaUsedBytes=e.usage)})).finally((function(){return i.commit()})),o._updateMsgLoadState(e,t,a),s(n)}))})).catchConditional((function(e){return!(e instanceof r.CancellationError)}),(function(n){return c>3||404===n?(o._updateMsgLoadState(e,t,a),__LOG__(3)`chat:loadMsgs:error ${String(n)}`,404===n?r.reject(new j.E404):r.reject(new K.GaveUpRetry(`Gave up msg fetch after ${c} tries`))):d}))}),0).catchType(K.GaveUpRetry,(function(){return[]})).catchType(j.E404,(function(e){if(s)return[];throw e}));return"after"===a?t.loadRecentPromise=l:"before"===a?t.loadEarlierPromise=l:"around"===a&&(t.loadAroundPromise=l),l}},{key:"getSearchContext",value:function(e,t){var n,r=this,a=null;e instanceof X.default?a=e:e instanceof te.default&&(n=e);var i=a?a.msgChunk:void 0,o=Math.trunc(x.default.PAGE_SIZE/3*2);if(!i||!i.msgLoadState.contextLoaded){i||(i=new k.default,this.msgChunks.push(i),a&&i.add(a));var s=a?a.id.clone():n.clone();s.count=o;var u=function(){if(a)return a.msgChunk;if(null!=n){var e=Z.default.get(n);return e&&e.msgChunk?e.msgChunk:i}return i},l=(0,ee.newMessageQueryEvent)(Q.default.WEBC_QUERY_TRIGGER_TYPE.SEARCH_RESULT_CLICK);this._loadMsgsPromiseLoop(a,i,Z.default.getContext.bind(Z.default,s,u,(function(e){l.webcResponseBytes+=e.binarySize})),"around",l,null==t).then((function(e){var t=u();t&&i&&t!==i&&r.notifyMsgCollectionMerge(t,i,t);var s=e[0],l=n?Z.default.get(n):a;l&&Array.isArray(s)&&s.length<o&&((0,g.default)(l.msgChunk,"loadedMsg.msgChunk").msgLoadState.noEarlierMsgs=!V.default.supportsFeature(V.default.F.MD_BACKEND)||r.endOfHistoryTransferType!==De.INCOMPLETE,i&&l.msgChunk!==i&&(i.msgLoadState.noEarlierMsgs=!V.default.supportsFeature(V.default.F.MD_BACKEND)||r.endOfHistoryTransferType!==De.INCOMPLETE))})).catch((function(){t&&(t.isQuotedMsgAvailable=!1)}))}return{collection:i,msg:a,key:n,highlightMsg:!0}}},{key:"sendStarMsgs",value:function(e,t){var n=this;return this.promises.sendStarMsgs?this.promises.sendStarMsgs:this.promises.sendStarMsgs=(0,he.sendStarMsgs)(this.id,e,t).then((function(){e.forEach((function(e){e.set("star",t)})),t?(0,me.addStarredMsgs)(e):(0,me.removeStarredMsgs)(e)})).finally((function(){n.promises.sendStarMsgs=null}))}},{key:"sendRevokeMsgs",value:function(e,t){var n=this;return this.promises.sendRevokeMsgs?this.promises.sendRevokeMsgs:this.promises.sendRevokeMsgs=r.all(e.map((function(e){return(0,ce.sendRevoke)(e,t)}))).finally((function(){n.promises.sendRevokeMsgs=null}))}},{key:"sendDeleteMsgs",value:function(e,t){var n=this;return this.promises.sendDeleteMsgs||(this.promises.sendDeleteMsgs=(0,de.sendDeleteMsgs)(e,t,this.id).then((function(){return e.forEach((function(e){e.delete()})),e.length})).catchType(j.ServerStatusCodeError,(function(){var t=0;return e.forEach((function(e){(e.ack===x.default.ACK.FAILED||e.isExpired())&&(e.delete(),t++)})),t})).finally((function(){n.promises.sendDeleteMsgs=null}))),this.promises.sendDeleteMsgs}},{key:"deleteMsgs",value:function(e,t){this.deleteMsgsBeforeMsgInclusive(void 0,!e,t)}},{key:"deleteMsgsOlderThan",value:function(e,t,n){var r=this.msgs,a=r.head();!a||a.t>=e||((a=r.last())&&a.t<e?this.deleteMsgs(t,n):this.deleteMsgsPartial((function(r){return r&&(n&&!(0,ne.msgMatchesType)(r,n)||r.star&&!t||r.t>=e||r.isPersistent)})))}},{key:"deleteMsgsBeforeMsgInclusive",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(e){if(!this.msgs.get(e.id))return;t=this.msgs.indexOf(e)}else t=this.msgs.length;var a=function(e,a){return r&&!(0,ne.msgMatchesType)(e,r)||e.msgChunk===this.msgs&&a>t||n&&e.star||e.isPersistent&&n};this.deleteMsgsPartial(a,!0)}},{key:"deleteMsgsPartial",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.unreadCount;if(this.getAllCMCs().forEach((function(r){var a=r.filter((function(n,r,a){return!e.apply(t,[n,r,a])}));r.remove(a,void 0,n),a.forEach((function(e){e.delete()}))})),y.default.clone(this.msgChunks).forEach((function(e){0===e.length&&t.removeMsgsCollection(e)})),this.msgs.length>0){var a=r>this.msgs.length?this.msgs.length:r;(0,Te.updateLocal)(this.id,{unreadCount:a}).then((function(){t.unreadCount=a,t.msgs.msgLoadState.noEarlierMsgs=!V.default.supportsFeature(V.default.F.MD_BACKEND)||t.endOfHistoryTransferType!==De.INCOMPLETE}))}}},{key:"getFirstMsgWithStatus",value:function(){return this.msgs.getModelsArray().find((function(e){return!e.isNotification&&(e.isSentByMe||e.type===x.default.MSG_TYPE.PTT||e.isViewOnce||e.isEphemeral)}))}},{key:"getLastReceivedMsg",value:function(){for(var e=this.msgs.length-1;e>=0;e--){var t=this.msgs.at(e);if(t&&(!t.local||t.ack>x.default.ACK.CLOCK))return t}}},{key:"getLastReceivedNonExpiredMsg",value:function(e){for(var t=this.msgs.length-1;t>=0;t--){var n=this.msgs.at(t);if(n&&(!n.local||n.ack>x.default.ACK.CLOCK)&&(!n.isEphemeral||null!=n.ephemeralExpirationTimestamp&&n.ephemeralExpirationTimestamp>e))return n}}},{key:"getLastMsgKeyForAction",value:function(){var e,t=this.msgs.last();return t&&(e=!this.lastReceivedKey||t.id.fromMe&&t.local&&t.ack===x.default.ACK.CLOCK?t.id:this.lastReceivedKey),e||void 0}},{key:"getLastTimestampMsg",value:function(){for(var e=this.msgs.length-1;e>=0;e--){var t=this.msgs.at(e);if(t&&"i"!==(0,ne.eventTypeFromMsgType)(t))return t}}},{key:"getWebcChatType",value:function(){switch(this.kind){case Le.CHAT:return Q.default.WEBC_CHAT_TYPE.INDIVIDUAL;case Le.GROUP:return Q.default.WEBC_CHAT_TYPE.GROUP;case Le.BROADCAST:return Q.default.WEBC_CHAT_TYPE.BROADCAST_LIST;default:throw new TypeError(`Invalid Chat.kind ${String(this.kind)}`)}}},{key:"deregisterExpiredViewOnceBulkMessages",value:function(e){e.forEach(this._deregisterExpiredViewOnceMessage)}},{key:"_deregisterExpiredViewOnceMessage",value:function(e){(0,we.isExpired)(e.safe())&&(0,J.deregisterMsg)(e)}},{key:"_resetEphemeralMessageExpirationTimer",value:function(e){var t=this;if(_e.default.ephemeralMessages){T.default.clearTimeout(this._ephemeralMessageTimerIds.get(e)),this._ephemeralMessageTimerIds.delete(e),this._ephemeralMessagesToDelete.delete(e);var n=e.ephemeralExpirationTimestamp;if(null!=n&&this.msgs.includes(e)){var r=function(){t._ephemeralMessageTimerIds.delete(e),t.active?t._ephemeralMessagesToDelete.add(e):(V.default.supportsFeature(V.default.F.MD_BACKEND)&&(0,Pe.removeExpiredMessagesFromHistory)([e]),e.delete({skipUpdatingSortTime:!0,doNotResetLastReceived:!0}))};if(e.isExpired())r();else{var a=T.default.setGlobalTimeout(r,1e3*n);this._ephemeralMessageTimerIds.set(e,a)}}}}},{key:"sendProductMessage",value:(a=(0,u.default)(s.default.mark((function e(t,n){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.sendProductMessage)(this,t,n);case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"sendGroupInviteMessage",value:function(e,t,n,r,a,i){var o=(0,W.getMaybeMeUser)(),s={ack:x.default.ACK.CLOCK,from:o,id:new te.default({from:o,to:this.id,id:(0,le.default)(),participant:void 0,selfDir:"out"}),local:!0,self:"out",t:D.default.globalUnixTime(),to:this.id,type:"groups_v4_invite",isNewMsg:!0,inviteGrpJpegThum:i,inviteCode:n,inviteCodeExp:r,inviteGrp:e,inviteGrpName:t,comment:a};return(0,fe.addAndSendMsgToChat)(this,s)[1]}},{key:"_isMediaMsg",value:function(e){return Boolean(e.asMms&&!e.ctwaContext)}},{key:"_forwardMessageAndSendToChat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._isMediaMsg(e))return(0,J.forwardMediaMsg)(e,this,n).then(void 0);var a=Ue(e),i=(0,W.getMaybeMeUser)(),o=void 0;V.default.supportsFeature(V.default.F.MD_BACKEND)?t.isGroup()&&(o=(0,Re.toUserWid)(i)):o=void 0;var s=new te.default({from:i,to:t,id:(0,le.default)(),participant:o,selfDir:"out"});if(e.ctwaContext&&(a.body=e.ctwaContext.sourceUrl,a.type=x.default.MSG_TYPE.CHAT,a.mediaObject=void 0),_e.default.ephemeralMessages){this.isEphemeralSettingOn()&&(a.ephemeralDuration=this.getEphemeralSetting());var u=this.getEphemeralSettingTimestamp();null!=u&&(a.ephemeralSettingTimestamp=u);var l=this.getDisappearingModeInitiator();null!=l&&(a.disappearingModeInitiator=l)}return Object.assign(a,{id:s,from:i,t:D.default.globalUnixTime(),to:t,ack:x.default.ACK.CLOCK,participant:void 0,local:!0,self:"out",isNewMsg:!0,star:!1,isForwarded:e.isForwarded||!e.isSentByMe,forwardedFromWeb:!0,forwardingScore:e.getForwardingScoreWhenForwarded(),multicast:n}),(0,fe.addAndSendMsgToChat)(this,a),r.resolve()}},{key:"forwardMessages",value:(t=(0,u.default)(s.default.mark((function e(t){var n,r,a,i,u,l,c,d=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]&&d[1],r=this.id,!(a=this.contact).isUser||!a.isBlocked()){e.next=5;break}throw new U.default("Forwarded to contact is blocked",a);case 5:i=[],u=(0,o.default)(t),e.prev=7,u.s();case 9:if((l=u.n()).done){e.next=21;break}return c=l.value,e.prev=11,e.next=14,this._forwardMessageAndSendToChat(c,r,n);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),this._isMediaMsg(c)&&i.push(c);case 19:e.next=9;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(7),u.e(e.t1);case 26:return e.prev=26,u.f(),e.finish(26);case 29:return e.abrupt("return",i);case 30:case"end":return e.stop()}}),e,this,[[7,23,26,29],[11,16]])}))),function(){return t.apply(this,arguments)})},{key:"updateReadOnly",value:function(){var e=this;if(!this.isSupportGroup()||!this.isReadOnly){var t=r.resolve();if(this.isGroup&&!this.groupMetadata.stale){var n=!1;n=V.default.supportsFeature(V.default.F.MD_BACKEND)?!this.groupMetadata.participants.get((0,W.getMeUser)()):!this.groupMetadata.participants.get((0,W.getMaybeMeUser)()),t=(0,Te.updateLocal)(this.id,{isReadOnly:n}).then((function(){return e.isReadOnly=n}))}t.then((function(){e.isBroadcast&&e.updateTitle()}))}}},{key:"updateIsAnnounceGrpRestrict",value:function(){var e=this;if(this.isGroup&&!this.groupMetadata.stale){var t=this.groupMetadata.participants.get((0,W.getMaybeMeUser)()),n=t&&!t.isAdmin&&this.groupMetadata.announce;(0,Te.updateLocal)(this.id,{isAnnounceGrpRestrict:n}).then((function(){return e.isAnnounceGrpRestrict=n}))}}},{key:"sortMsgs",value:function(e){var t=e.map((function(e){var t=(0,g.default)(e.msgChunk,"msg.msgChunk");return{msg:e,chunkT:(0,g.default)(t.at(0),"chunk.at(0)").t,index:t.indexOf(e)}}));return y.default.orderBy(t,["chunkT","index"]).map((function(e){return e.msg}))}},{key:"waitForChatLoading",value:function(){var e=this,t=r.resolve();return V.default.supportsFeature(V.default.F.MD_BACKEND)&&this.pendingInitialLoading&&(t=(0,Ae.default)(this,"change:pendingInitialLoading",(function(){return!e.pendingInitialLoading}))),t}},{key:"_updateAssignedColor",value:function(){if(this.colors){var e=this.groupMetadata.participants,t=this.colors,n=y.default.difference(Object.keys(t),e.map((function(e){return e.id.toString()})).map(q.default));n.forEach((function(e){delete t[e]})),n.length&&this._saveAssignedColors()}}},{key:"loadAssignedColors",value:function(){return this.groupMetadata&&this.listenTo(this.groupMetadata.participants,"remove reset",this._updateAssignedColor),(0,W.getGroupParticipantAssignedColor)(this.id)||{}}},{key:"saveAssignedColors",value:function(){var e=this.colors;e&&(0,W.setGroupParticipantAssignedColor)(this.id,e)}},{key:"assignedColor",value:function(e){var t,n=this.colors||(this.colors=this.loadAssignedColors()),r=(0,q.default)(e.toString());if(t=n[r])return t;var a={};y.default.forOwn(n,(function(e,t){a[e]?a[e].push(t):a[e]=[t]}));for(var i=Number.POSITIVE_INFINITY,o=1;o<x.default.NUM_COLORS;o++){if(!a[o]){t=o;break}a[o].length<i&&(i=a[o].length,t=o)}return n[r]=t,this._saveAssignedColors(),t}},{key:"unstarAll",value:function(){var e=this.getAllMsgs();e.forEach((function(e){e&&(e.star=!1)})),(0,me.removeStarredMsgs)(e)}},{key:"constructMediaMsgs",value:function(e){return e?e.isViewOnce?new I.default:(this.getMediaMsgs().includes(e)||e.msgChunk===this.msgs?(t=this.getMediaMsgs()).hasMediaAfter=!1:t=new I.default,t.includes(e)||(e.msgChunk?t.add(e.msgChunk.filter(this.isMsgForMediaCollection)):t.add(e)),t):this.getMediaMsgs();var t}},{key:"fts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;if(1===n){var a=this.ftsCache[e];if(a)return a;var i=Z.default.search(e,n,r,this.id);this.ftsCache[e]=i;var o=function(){t.ftsCache[e]=null};return setTimeout(o,Ne),i.catch(o),i}return Z.default.search(e,n,r,this.id)}},{key:"_clearFtsCache",value:function(){this.ftsCache={}}},{key:"updateSortTime",value:function(){var e=this;this.promises.updateSortTime||(this.promises.updateSortTime=this.regCancellablePromise((0,v.delayMs)(0)).then((function(){var t=e.getLastTimestampMsg();return t?(e.t=t.t,r.resolve()):e.msgs.msgLoadState.noEarlierMsgs||e.pendingMsgs?r.resolve():e.loadEarlierMsgs()})).then((function(t){if(t){var n=e.getLastTimestampMsg();e.t=n?n.t:void 0}})).catch((function(){})).finally((function(){e.promises.updateSortTime=void 0})))}},{key:"removeFromCollection",value:function(e){e.star&&(0,me.removeStarredMsgs)([e]),e.isMedia&&this.mediaMsgs?this.mediaMsgs.remove(e):e.getLinks().length&&this.linkMsgs?this.linkMsgs.remove(e):e.asDoc&&this.docMsgs?this.docMsgs.remove(e):null!=e.asProduct&&this.productMsgs&&this.productMsgs.remove(e),this.updateMediasCountOnMsg(e,!0)}},{key:"getMediaMsgs",value:function(){return this.mediaMsgs||(this.mediaMsgs=new I.default),this.mediaMsgs}},{key:"getLinkMsgs",value:function(){return this.linkMsgs||(this.linkMsgs=new M.default),this.linkMsgs}},{key:"getDocMsgs",value:function(){return this.docMsgs||(this.docMsgs=new O.default),this.docMsgs}},{key:"getParticipantCount",value:function(){var e;return(null===(e=this.groupMetadata)||void 0===e?void 0:e.participants.length)||1}},{key:"getProductMsgs",value:function(){return this.productMsgs||(this.productMsgs=new P.default),this.productMsgs}},{key:"getReceivedVcardMsgs",value:function(){return this.contact.isMyContact||!this.contact.isUser?null:(this.receivedVcardMsgs||(this.receivedVcardMsgs=new R.default,this.receivedVcardMsgs.parent=this),this.receivedVcardMsgs)}},{key:"dismissVcard",value:function(){this.vcardDismissed=!0}},{key:"updateMediasCountOnMsg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(V.default.supportsFeature(V.default.F.MEDIAS_COUNT)){var n=t?-1:1;e.isMedia&&(this.mediaCount+=n);var r=e.getLinks().length;r&&(this.linkCount+=n*r),e.asDoc&&(this.docCount+=n)}}},{key:"resetMediasCount",value:function(e){V.default.supportsFeature(V.default.F.MEDIAS_COUNT)&&(null!=e.mediaCount&&(this.mediaCount=e.mediaCount),null!=e.linkCount&&(this.linkCount=e.linkCount),null!=e.docCount&&(this.docCount=e.docCount))}},{key:"getStarredMsgs",value:function(){var e=this,t=this.starredMsgs;return t||(this.starredMsgs=t=new me.StarredMsgCollection,this.starredMsgs.add(me.default.filter((function(t){return t.chat===e})))),t}},{key:"setAndKeepPrevious",value:function(e,t){var n=this,r=Object.keys(e);r.forEach((function(e){e in n.ackedProps||(n.ackedProps[e]=n[e])})),t.finally((function(){r.forEach((function(e){delete n.ackedProps[e]}))})),this.set(e)}},{key:"getAckedPhoneProps",value:function(){return{wid:this.id,mute:this.mute.expiration,active:this.active,isReadOnly:this.isReadOnly,modifyTag:this.modifyTag,unreadCount:this.unreadCount,ephemeralDuration:this.ephemeralDuration,ephemeralSettingTimestamp:this.ephemeralSettingTimestamp,changeNumberOldJid:this.changeNumberOldJid,changeNumberNewJid:this.changeNumberNewJid,archive:"archive"in this.ackedProps?this.ackedProps.archive:this.archive,notSpam:"notSpam"in this.ackedProps?this.ackedProps.notSpam:this.notSpam,pin:"pin"in this.ackedProps?this.ackedProps.pin:this.pin}}},{key:"regCancellablePromise",value:function(e){var t=this;return this._promises||(this._promises=[]),this._promises.push(e),e.cancellable().finally((function(){t._promises=y.default.without(t._promises,e),t._promises&&0===t._promises.length&&(t._promises=null)}))}},{key:"cancelPendingPromises",value:function(){this._promises&&this._promises.length>0&&(this._promises.forEach((function(e){e.cancel()})),this._promises=null)}},{key:"matchFilter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!y.default.isEmpty(e)||(e.label?this.labels&&this.labels.includes(e.label):e.kind===x.default.SMB_SEARCH_FILTERS.UNREAD?!!this.hasUnread:e.kind===this.kind)}},{key:"getEphemeralSetting",value:function(){if(!_e.default.ephemeralMessages)return null;var e=this.isGroup?this.groupMetadata.ephemeralDuration:this.ephemeralDuration;return null==e||0===e?null:e}},{key:"getEphemeralSettingTimestamp",value:function(){return _e.default.ephemeralMessages?this.isGroup||0===this.ephemeralSettingTimestamp?null:this.ephemeralSettingTimestamp:null}},{key:"isEphemeralSettingOn",value:function(){if(!_e.default.ephemeralMessages)return!1;var e=this.getEphemeralSetting();return null!=e&&0!==e}},{key:"shouldShowEphemeralSetting",value:function(){if(!_e.default.ephemeralMessages)return!1;if(!_e.default.ephemeralMessagesSetting)return!1;if(!V.default.supportsAnyFeature(V.default.F.EPHEMERAL_MESSAGES,V.default.F.MD_BACKEND))return!1;if(this.isGroup){var e=this.groupMetadata.participants.getSuperAdmin();if(e&&e.contact.isEnterprise)return!1;if(!this.groupMetadata.canSetEphemeralSetting()&&!this.isEphemeralSettingOn())return!1}return!this.isBroadcast&&!this.contact.isEnterprise}},{key:"getDisappearingModeInitiator",value:function(){var e;return V.default.isDisappearingModeEnabled()?null!==(e=this.disappearingModeInitiator)&&void 0!==e?e:B.DisappearingModeInitiator.ChangedInChat:null}},{key:"getCollection",value:function(){return n(26671).default}},{key:"getGroupMetadataCollection",value:function(){return n(13361).default}}]),xe}(ge.default);function Ue(e){var t,n=["buttons","caption","broadcast","ephemeralDuration","ephemeralSettingTimestamp","ephemeralStartTimestamp","ephemeralOutOfSync","dynamicReplyButtons","replyButtons","isMdHistoryMsg"];return!0===e.isDynamicReplyButtonsMsg&&e.type===x.default.MSG_TYPE.CHAT||(n=["footer"].concat((0,l.default)(n))),(null===(t=e.quotedMsg)||void 0===t?void 0:t.type)!==x.default.MSG_TYPE.PRODUCT&&(n=["quotedMsg","quotedParticipant","quotedRemoteJid","quotedStanzaID"].concat((0,l.default)(n))),y.default.omit(e.toJSON(),n)}xe.Proxy="chat",xe.idClass=Oe.default;var Fe=(0,A.defineModel)(xe);t.default=Fe},49295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){var n=e.pin||0,r=t.pin||0;if(n||r)return n!==r?n>r?-1:1:e.id.toString()<t.id.toString()?-1:1;var a=e.t||0,i=t.t||0;return a!==i?a>i?-1:1:e.id.toString()<t.id.toString()?-1:1};t.default=n},26671:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ChatCollection=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(81109)),l=i(n(34575)),c=i(n(93913)),d=i(n(81506)),f=i(n(16525)),p=i(n(29754)),h=i(n(2205)),_=i(n(99842)),v=n(53615),m=n(46154),g=i(n(96486)),y=a(n(60619)),E=n(99703),S=i(n(54654)),b=i(n(49295)),T=a(n(93743)),w=i(n(34263)),A=i(n(48629)),C=n(52818),O=n(41150),M=n(14650),I=n(42355),k=i(n(56186)),P=i(n(68168)),R=n(71701),D=n(92407),N=i(n(22021)),L=n(42594),x=i(n(6705)),U=i(n(5315)),F=i(n(37498)),G=i(n(40113)),B=i(n(50785)),j=n(93001),Y=n(30941),K=n(45909),W=i(n(58695)),V=i(n(68624)),H=i(n(96297)),$=n(29846),z=i(n(61110)),q=i(n(12717)),J=a(n(7860)),Q=function(e){(0,h.default)(i,e);var t,a=(0,_.default)(i);function i(){var e;return(0,l.default)(this,i),(e=a.call(this)).notSpam={},e.promises={sendUnstarAll:null},e._sortEnabled=!1,e._viewOnceCleanupTaskQueue=new Set,e.enableSortListener(),e.listenTo(J.default,"change:stream",(function(){J.default.stream===J.STREAM.RESUMING&&e.forEach((function(e){e.pendingMsgs=!1}))})),e.listenToOnce((0,d.default)(e),"sort",g.default.debounce(e.setIndexes,100)),e._scheduleViewOnceMediaCleanup(),e}return(0,c.default)(i,[{key:"_scheduleViewOnceMediaCleanup",value:function(){var e=this;clearTimeout(this._viewOnceCleanupTimeout),this._viewOnceCleanupTimeout=setTimeout((function(){L.IdleCallbackTasks.enqueue((function(){e._runViewOnceMediaCleanup(),e._scheduleViewOnceMediaCleanup()}))}),18e5)}},{key:"_runViewOnceMediaCleanup",value:function(){var e=this;this.forEach((function(t){var n=t.id;e._viewOnceCleanupTaskQueue.has(n)||(L.IdleCallbackTasks.enqueue((function(){e._viewOnceCleanupTaskQueue.delete(n);var t=e.get(n);!1===(null==t?void 0:t.active)&&t.deregisterExpiredViewOnceBulkMessages(t.msgs)})),e._viewOnceCleanupTaskQueue.add(n))}))}},{key:"enableSortListener",value:function(e){this._sortEnabled||(this.listenTo(this,"change:t change:pin change:shouldAppearInList",this.sort),e&&this.sort(),this._sortEnabled=!0)}},{key:"disableSortListener",value:function(){this._sortEnabled&&(this.stopListening(null,null,this.sort),this._sortEnabled=!1)}},{key:"setIndexes",value:function(){this.forEach((function(e,t){e.initialIndex=t}))}},{key:"active",value:function(){var e=this.filter((function(e){return e.active}))[0];return e||void 0}},{key:"find",value:function(e){return N.default.supportsFeature(N.default.F.MD_BACKEND)?this._findMD(e):(0,f.default)((0,p.default)(i.prototype),"find",this).call(this,e)}},{key:"_find",value:function(e){var t=N.default.isDisappearingModeEnabled()?(0,D.getDisappearingModeSettingForChat)(e):null,n={id:e,createdLocally:!0};return null!=t&&(n=(0,u.default)((0,u.default)({},n),{},{ephemeralDuration:t.duration,ephemeralSettingTimestamp:t.settingTimestamp,disappearingModeInitiator:t.initiatedByMe?O.DisappearingModeInitiator.InitiatedByMe:O.DisappearingModeInitiator.InitiatedByOther})),r.resolve(n)}},{key:"_findQuery",value:function(e){var t=this,a={};return(0,I.find)(!!e.retry,a).then((function(e){if("preempted"===e)return r.reject("chats preempted");if(T.default.platform===T.PLATFORMS.IPHONE||T.default.platform===T.PLATFORMS.SMBI){var i=n(66312).default;g.default.isEmpty(e)?i.trigger(w.default.COLLECTION_HAS_SYNCED):setTimeout((function(){i.trigger(w.default.COLLECTION_HAS_SYNCED)}),2500)}return t.trigger(w.default.COLLECTION_HAS_SYNCED,a),r.resolve(e)}))}},{key:"_findMD",value:(t=(0,s.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.get(t))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,(0,I.findLocal)(String(t));case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",this.gadd(n));case 8:return e.next=10,(0,f.default)((0,p.default)(i.prototype),"find",this).call(this,t);case 10:if(!(n=e.sent)){e.next=15;break}return e.next=14,(0,C.createLocal)(n.id,{id:n.id.toString(),t:n.t,unreadCount:n.unreadCount,archive:n.archive,isReadOnly:n.isReadOnly,modifyTag:n.modifyTag,notSpam:n.notSpam,pin:n.pin,changeNumberOldJid:null!=n.changeNumberOldJid?n.changeNumberOldJid.toString():void 0,changeNumberNewJid:null!=n.changeNumberNewJid?n.changeNumberNewJid.toString():void 0,muteExpiration:n.muteExpiration,endOfHistoryTransferType:n.endOfHistoryTransferType});case 14:n.pendingInitialLoading=!1;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"sync",value:function(){this.findQuery({}).catchType(M.WebdDrop,(function(){}));var e=n(66312).default;return r.all([(0,z.default)(this,w.default.COLLECTION_HAS_SYNCED),e.hasSynced()])}},{key:"getKeysForResyncMsgs",value:function(){return this.filter((function(e){return e.shouldAppearInList})).map((function(e){var t=e.getAckedPhoneProps(),n=e.lastReceivedKey;return n&&(t.id=n.id,t.fromMe=n.fromMe.toString(),t.participant=n.participant),t}))}},{key:"resyncMessages",value:function(){var e=this;__LOG__(2)`ChatStore:resyncMessages`;var t=this.getKeysForResyncMsgs();return(0,j.resyncMessages)(t).then((function(t){if(t.status>=400)return __LOG__(3)`ChatStore:resyncMessages resume error ${t.status}`,r.reject(new Error("ChatStore:resyncMessages resume error "+t.status));__LOG__(2)`ChatStore:resyncMessages resume success`;try{e.disableSortListener(),t.data.forEach((function(t){if(t.disableUnreadAnchor=!1,t.firstUnreadKey=void 0,t.keys&&1===t.keys.length){var n=t.keys[0];t.firstUnreadKey=new U.default({id:n[0],fromMe:n[1],participant:n[2],remote:t.id})}if("delete"!==t.type&&!q.default.isPSA(t.id)){var r=A.default.get(t.id);if(r){if(t.name){var a={name:t.name};(0,$.updateLocal)(r.id,a).then((function(){r.set(a)}))}}else A.default.add({id:t.id,name:t.name})}var i=e.get(t.id);if(i)if("clear"===t.type){i.resetMediaMsgs();var o=[];i.msgs.forEach((function(e){return o.push(e)})),i.msgChunks.length&&i.msgChunks.forEach((function(e){e.forEach((function(e){return o.push(e)}))})),i.set({t:t.t,unreadCount:t.unreadCount,createdLocally:!1,archive:t.archive,isReadOnly:t.isReadOnly,modifyTag:t.modifyTag,msgs:[],notSpam:t.notSpam,unreadMsgAnchor:void 0,disableUnreadAnchor:t.disableUnreadAnchor,pendingMsgs:t.pendingMsgs,pin:t.pin,changeNumberOldJid:t.changeNumberOldJid,changeNumberNewJid:t.changeNumberNewJid,muteExpiration:t.muteExpiration,ephemeralDuration:t.ephemeralDuration,ephemeralSettingTimestamp:t.ephemeralSettingTimestamp}),o.forEach((function(e){e.delete()})),__LOG__(2)`model:chat:resume: cleared chat for ${t.id}`}else"delete"===t.type?(i.delete(),__LOG__(2)`model:chat:resume: deleted chat for ${t.id}`):i.set(t,{merge:!0});else e.add(t)})),e.enableSortListener(!0)}catch(e){__LOG__(3)`model:chat:resume error in processing reply:${String(e)}`}(0,v.delayMs)(100).then((function(){N.default.supportsFeature(N.default.F.USER_NOTICE)&&F.default.sync(!0),N.default.supportsFeature(N.default.F.SETTINGS_SYNC)&&W.default.sync(!0),t.checksum&&(0,Y.resyncContacts)(t.checksum),t.statusChecksum&&n(66005).default.sync(t.statusChecksum),t.quickRepliesChecksum&&G.default.sync(t.quickRepliesChecksum),t.labelsChecksum&&x.default.sync(t.labelsChecksum),t.stickerPackChecksum&&H.default.sync(t.stickerPackChecksum),null!=t.recentStickersChecksum&&B.default.sync(t.recentStickersChecksum),null!=t.starredStickersChecksum&&V.default.sync(t.starredStickersChecksum)})).catch((function(e){__LOG__(3)`model:chat:resume error in processing checksum:${String(e)}`}))})).catchType(M.WebdDrop,(function(e){return __LOG__(3)`ChatStore:resyncMessages resume dropped`,r.reject(e)}))}},{key:"unstarAllMessages",value:function(e,t){return(0,K.unstarAllMessages)(e,t)}},{key:"forwardMessagesToChats",value:function(e,t){var a=r.all(e.map((function(e){return(0,m.promiseProps)({message:e,canForward:e.canForward()&&(null!=n(66312).default.get(e.id)||e.isEphemeral)})})));return r.all(t.filter((function(e){return e.canSend})).map((function(e){var t;return t=e.isUser&&e.contact.isBlocked()?(0,E.unblockContact)(e.contact):r.resolve(!0),r.all([a,t]).spread((function(t){var n=g.default.map(g.default.filter(t,{canForward:!0}),"message"),r=g.default.map(g.default.filter(t,{canForward:!1}),"message");return(0,m.promiseProps)({chat:e,undelivered:e.forwardMessages(n,!0),canForward:n,cannotForward:r})}))}))).then((function(e){var t=g.default.compact(e.map((function(e){var t=e.chat,n=e.undelivered,r=e.canForward,a=e.cannotForward,i=null;return(n.length||a.length)&&(i=(0,k.default)({chat:t,undelivered:n,canForward:r,cannotForward:a})),i?{chat:t,reason:i}:null})));if(t.length)throw new P.default(t);return!0}))}},{key:"saveToCache",value:function(){if(T.default.shouldSaveToCache()){var e=i.cachePolicy.id;__LOG__(2)`ChatCollection:saveToCache save: ${String(e)}`;var t=this.map((function(e,t){var n=e.toJSON(),r=t<20?Math.min(e.unreadCount+20,50):Math.min(Math.max(3,e.unreadCount),20);return n.msgs=e.msgs?e.msgs.slice(-r).map((function(e){return g.default.pickBy(e.toJSON(),(function(e){return void 0!==e}))})):[],n}));(0,R.setCollection)(e,t,!0)}}},{key:"onResume",value:function(){var e=this.active();e&&e.presence.subscribe()}},{key:"delete",value:function(){(0,f.default)((0,p.default)(i.prototype),"delete",this).call(this),this.listenToOnce(this,"sort",g.default.debounce(this.setIndexes,100))}}]),i}(y.default);t.ChatCollection=Q,Q.model=S.default,Q.comparator=b.default,Q.cachePolicy={id:"chat",policy:y.CACHE_POLICY.IMMEDIATE,trigger:"add sort remove reset change:id change:t change:unreadCount change:archive change:isReadOnly change:isAnnounceGrpRestrict change:modifyTag change:muteExpiration change:name change:notSpam change:pin change:changeNumberOldJid change:changeNumberNewJid change:lastReceivedKey change:msg:ack msgs:loadEarlier"};var X=new Q;t.default=X},22419:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=i(n(60619)),p=i(n(34263)),h=n(14650),_=a(n(98569)),v=i(n(16551)),m=i(n(66312)),g=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).hasDocBefore=!0,e}return(0,s.default)(n,[{key:"delete",value:function(){(0,u.default)((0,l.default)(n.prototype),"delete",this).call(this),this.stopListening(),this.reset()}},{key:"queryDocs",value:function(e,t){var n=this;if(t)return this.queryDocBefore||(this.queryDocBefore=m.default.queryMedia(t.id.remote,p.default.MEDIA_QUERY_LIMIT,"before",t.id,"document").then((function(e){return(!e||e.length<p.default.MEDIA_QUERY_LIMIT)&&(n.hasDocBefore=!1),n.add(e.filter(y),{at:0}),{length:e.length}})).catchTypes(h.WebdDrop,_.ProtoVersionUndefined,(function(){})).catchEqualTo(404,(function(){})).finally((function(){n.queryDocBefore=null,n.trigger("query_doc_before")})),this.trigger("query_doc_before")),this.queryDocBefore;var a=e.msgs;if(0===this.length){if(!a||0===a.length)return this.hasDocBefore=!1,new r((function(e){e({eof:!0})}));this.add(a.filter(y),{at:0})}if(e.msgs.msgLoadState.noEarlierMsgs)return this.hasDocBefore=!1,new r((function(e){e({eof:!0})}));if(this.length<=2*p.default.MEDIA_QUERY_LIMIT){var i=0===this.length?a.head():this.head();return this.queryDocs(e,i)}return new r((function(e){e({eof:!1})}))}}]),n}(f.default);function y(e){return null!=e.asDoc&&!e.isVcardOverMmsDocument}t.default=g,g.model=v.default},37294:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=n(80835),p=i(n(60619)),h=i(n(34263)),_=n(14650),v=a(n(98569)),m=i(n(16551)),g=i(n(66312)),y=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).hasLinkBefore=!0,e}return(0,s.default)(n,[{key:"delete",value:function(){(0,u.default)((0,l.default)(n.prototype),"delete",this).call(this),this.stopListening(),this.reset()}},{key:"queryLinks",value:function(e,t){var n=this;if(t)return this.queryLinkBefore||(this.queryLinkBefore=g.default.queryMedia(t.id.remote,h.default.MEDIA_QUERY_LIMIT,"before",t.id,"url").then((function(e){return(!e||e.length<h.default.MEDIA_QUERY_LIMIT)&&(n.hasLinkBefore=!1),n.add(e,{at:0}),n.createLinksAndAddMsgs(e),{length:e.length}})).catchTypes(_.WebdDrop,v.ProtoVersionUndefined,(function(){})).catchEqualTo(404,(function(){})).finally((function(){n.queryLinkBefore=null,n.trigger("query_link_before")})),this.trigger("query_link_before")),this.queryLinkBefore;var a=e.msgs.getModelsArray();if(0===this.length){if(!a||0===a.length)return this.hasLinkBefore=!1,new r((function(e){e({eof:!0})}));this.add(a.filter((function(e){return e.getLinks().length>0})),{at:0}),this.createLinksAndAddMsgs(a)}if(e.msgs.msgLoadState.noEarlierMsgs)return this.hasLinkBefore=!1,new r((function(e){e({eof:!0})}));if(this.length<=2*h.default.MEDIA_QUERY_LIMIT){var i=0===this.length?e.msgs.head():this.head();return this.queryLinks(e,i)}return new r((function(e){e({eof:!1})}))}},{key:"createLinksAndAddMsgs",value:function(e){var t=this,n=[];(0,f.promiseLoop)((function(t,r,a){if(e.length!==a){var i=e[a];i.getLinks().length&&n.push(i)}else t()})).then((function(){t.add(n),t.trigger("query_link_before")}))}}]),n}(p.default);t.default=y,y.model=m.default,y.comparator=function(e,t){return e.t-t.t}},80961:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=i(n(60619)),p=i(n(34263)),h=n(14650),_=a(n(98569)),v=i(n(16551)),m=i(n(66312)),g="before",y="after";function E(e){return e.isMedia&&!e.isViewOnce}var S=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).hasMediaBefore=!0,e.hasMediaAfter=!0,e}return(0,s.default)(n,[{key:"delete",value:function(){(0,u.default)((0,l.default)(n.prototype),"delete",this).call(this),this.stopListening()}},{key:"getAfter",value:function(e){var t=this.indexOf(e);return t<0||t===this.length-1?null:this.at(t+1)}},{key:"getBefore",value:function(e){var t=this.indexOf(e);return t<=0?null:this.at(t-1)}},{key:"loadEarlierMedias",value:function(){var e=this.head();e&&this.queryMedia({msg:e})}},{key:"loadRecentMedias",value:function(){var e=this.last();e&&this.queryMedia({msg:e,direction:y})}},{key:"loadMoreAroundIfNeeded",value:function(e){if(e&&!e.isViewOnce){var t=this.indexOf(e);t<20&&this.hasMediaBefore&&this.loadEarlierMedias(),this.length-t<20&&this.hasMediaAfter&&this.loadRecentMedias()}}},{key:"queryMedia",value:function(e){var t,n=this,a=e.chat,i=e.msg,o=null!==(t=e.direction)&&void 0!==t?t:g;if(!i&&a){var s=a.msgs;if(!s||0===s.length)return this.hasMediaBefore=!1,new r((function(e){e({eof:!0})}));this.add(s.filter(E),{at:0});var u=this.toArray();if(a.msgs.msgLoadState.noEarlierMsgs)return this.hasMediaBefore=!1,new r((function(e){e({eof:!0})}));if(u.length<=2*p.default.MEDIA_QUERY_LIMIT){var l=0===u.length?s.head():u[0];return this.queryMedia({chat:a,msg:l})}return new r((function(e){e({eof:!1})}))}if(i&&o===g){if(this.queryMediaBefore)return this.queryMediaBefore;var c=0;return this.queryMediaBefore=m.default.queryMedia(i.id.remote,p.default.MEDIA_QUERY_LIMIT,o,i.isMedia?i.id:void 0).then((function(e){var t=e.messages;(!t||t.length<p.default.MEDIA_QUERY_LIMIT)&&(n.hasMediaBefore=!1);var r=[];t&&t.length>0&&(r=t.filter(E)),n.add(r,{at:0});var i={mediaCount:e.mediaCount,linkCount:e.linkCount,docCount:e.docCount};return a&&a.resetMediasCount(i),{length:c=r.length}})).catchTypes(h.WebdDrop,_.ProtoVersionUndefined,(function(){})).catchEqualTo(404,(function(){})).finally((function(){n.queryMediaBefore=null,n.trigger("query_media_before",c)})),this.trigger("query_media_before",0),this.queryMediaBefore}if(i&&o===y)return this.queryMediaAfter?this.queryMediaAfter:this.queryMediaAfter=m.default.queryMedia(i.id.remote,p.default.MEDIA_QUERY_LIMIT,o,i.id).then((function(e){var t=e.messages;(!t||t.length<p.default.MEDIA_QUERY_LIMIT)&&(n.hasMediaAfter=!1);var r=[];t&&t.length>0&&(r=t.filter(E)),n.add(r);var i={mediaCount:e.mediaCount,linkCount:e.linkCount,docCount:e.docCount};return a&&a.resetMediasCount(i),{length:r.length}})).catchTypes(h.WebdDrop,_.ProtoVersionUndefined,(function(){})).catchEqualTo(404,(function(){})).finally((function(){n.queryMediaAfter=null,n.trigger("query_media_after")}))}}]),n}(f.default);t.default=S,S.model=v.default},23169:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgLoadState=void 0;var i=a(n(81109)),o=a(n(93913)),s=a(n(81506)),u=a(n(16525)),l=a(n(29754)),c=a(n(34575)),d=a(n(2205)),f=a(n(99842)),p=a(n(41143)),h=a(n(60619)),_=r(n(56727)),v=a(n(34263)),m=a(n(16551)),g=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).noEarlierMsgs=(0,_.prop)(),e.isLoadingEarlierMsgs=(0,_.prop)(),e.isLoadingRecentMsgs=(0,_.prop)(),e.isLoadingAroundMsgs=(0,_.prop)(),e.contextLoaded=(0,_.prop)(),e}return n}(_.default);g.Proxy="msgLoad";var y=(0,_.defineModel)(g);t.MsgLoadState=y;var E=function(e){(0,d.default)(r,e);var t=(0,f.default)(r);function r(){var e;return(0,c.default)(this,r),(e=t.call(this)).msgLoadState=new y({noEarlierMsgs:!1,isLoadingEarlierMsgs:!1,isLoadingRecentMsgs:!1,isLoadingAroundMsgs:!1,contextLoaded:!1}),e.listenTo((0,s.default)(e),"add remove reset sort",e.triggerChangeLast),e}return(0,o.default)(r,[{key:"delete",value:function(){this.stopListening(),(0,u.default)((0,l.default)(r.prototype),"delete",this).call(this),this.msgLoadState.delete()}},{key:"triggerChangeLast",value:function(e,t,n){var r=this.last();if(this._last!==r){this._last=r;var a=!1;t&&t.includes(e)&&n&&n.add&&!n.remove&&(a=!0),this.trigger("change:last",r,a)}}},{key:"add",value:function(e,t){var a,o,s=this;return Array.isArray(e)?1===e.length&&(a=e[0]):a=e,null!=a&&a.type===v.default.MSG_TYPE.E2E_NOTIFICATION&&"encrypt"===a.subtype?(o=(0,u.default)((0,l.default)(r.prototype),"add",this).call(this,e,(0,i.default)((0,i.default)({},t),{},{at:0})))&&this.trigger("insert_msgs",o,t):o=(0,u.default)((0,l.default)(r.prototype),"add",this).call(this,e,t),n(66312).default.add(o,t).forEach((function(e){e&&s.isModel(e)&&(e.msgChunk=s)})),o&&this.trigger("bulk_add",o,t),o}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(0,u.default)((0,l.default)(r.prototype),"remove",this).call(this,e,t),i=!!t&&t.silent,o=a.filter((function(e){return!!e}));return o.length&&!i&&(this.trigger("remove_msgs",o,t),n||this.trigger("update_sort_time")),a}},{key:"replace",value:function(e){var t=this;this.msgLoadState=e.msgLoadState,this.loadRecentPromise=e.loadRecentPromise,this.loadEarlierPromise=e.loadEarlierPromise,this.loadAroundPromise=e.loadAroundPromise;var n=e.getModelsArray();this.set(n,{silent:!0,merge:!1}),n.forEach((function(e){t.isModel(e)&&(e.msgChunk=t)})),this.trigger("bulk_add",n)}},{key:"onMsgLoadStateChange",value:function(e){var t,n=this,r=function(){e()},a=function(){(0,p.default)(null!=t,"prevMsgLoadState cannot be null after bulk_add"),t.off("change",r);var a=n.msgLoadState;a.on("change",r),t=a,e()};(t=this.msgLoadState).on("change",r),this.on("bulk_add",a);var i=function(){(0,p.default)(null!=t,"prevMsgLoadState cannot be null when unsubscribing"),n.off("bulk_add",a),t.off("change",r)};return function(){var e=i;e&&(i=null,e())}}}]),r}(h.default);t.default=E,E.model=m.default},49462:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_PREFERENCE=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=a(n(12717)),d="defaultPreference";t.DEFAULT_PREFERENCE=d;var f=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.wallpaperColor=(0,l.prop)(),e.saveToCameraRoll=(0,l.prop)(),e.showDoodle=(0,l.prop)(),e}return(0,o.default)(r,[{key:"getCollection",value:function(){return n(65179).default}}]),r}(l.default);f.Proxy="chatPreference",f.idClass=c.default,f.allowedIds=[d];var p=(0,l.defineModel)(f);t.default=p},65179:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(319)),o=a(n(34575)),s=a(n(93913)),u=a(n(16525)),l=a(n(29754)),c=a(n(2205)),d=a(n(99842)),f=r(n(60619)),p=r(n(49462)),h=a(n(34263)),_=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"initializeFromCache",value:function(e){this.add([{id:p.DEFAULT_PREFERENCE,wallpaperColor:h.default.DEFAULT_CHAT_WALLPAPER,saveToCameraRoll:!0,showDoodle:!0}].concat((0,i.default)(e||[])),{merge:!0})}},{key:"get",value:function(e){return(0,u.default)((0,l.default)(n.prototype),"get",this).call(this,e)||(0,u.default)((0,l.default)(n.prototype),"get",this).call(this,p.DEFAULT_PREFERENCE)}},{key:"delete",value:function(){(0,u.default)((0,l.default)(n.prototype),"delete",this).call(this),this.add({id:p.DEFAULT_PREFERENCE,wallpaperColor:h.default.DEFAULT_CHAT_WALLPAPER,saveToCameraRoll:!0,showDoodle:!0})}}]),n}(f.default);_.model=p.default,_.cachePolicy={id:h.default.KEY_CHAT_PREFERENCE_COLLECTION,policy:f.CACHE_POLICY.LOAD,delay:1e3};var v=new _;t.default=v},72631:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(60619)),f=a(n(16551)),p=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).hasProductBefore=!0,e}return(0,o.default)(n,[{key:"delete",value:function(){(0,s.default)((0,u.default)(n.prototype),"delete",this).call(this),this.stopListening(),this.reset()}},{key:"queryProducts",value:function(e){var t=e.msgs;return this.hasProductBefore=!1,this.add(t.filter((function(e){return null!=e.asProduct})),{at:0}),r.resolve()}}]),n}(d.default);t.default=p,p.model=f.default,p.comparator=function(e,t){return e.t-t.t}},50220:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(60619)),c=n(14650),d=a(n(22021)),f=a(n(16551)),p=a(n(66312)),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).syncPromise=null,e.isSynced=!1,e}return(0,o.default)(n,[{key:"onResume",value:function(){this.isSynced=!1,this.sync(this.parent)}},{key:"sync",value:function(e){var t=this;return d.default.supportsFeature(d.default.F.INDEX_RECEIVED_VCARD)?this.isSynced?r.resolve():(this.syncPromise||(this.syncPromise=p.default.queryVcard(e.id).then((function(e){return t.add(e)})).catchType(c.E499,(function(){})).catch((function(){})).finally((function(){t.isSynced=!0,t.syncPromise=null}))),this.syncPromise):(this.isSynced=!0,r.resolve())}}]),n}(l.default);t.default=h,h.model=f.default,h.resumeOnAvailable=!0},45019:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(92937)),l=r(n(76319)),c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"oldestUnreadMention",value:function(){var e,t=null!==(e=this.last())&&void 0!==e?e:null;return t&&this.remove(t),t}}]),n}(u.default);t.default=c,c.model=l.default,c.comparator=function(e,t){return t.timestamp-e.timestamp}},44923:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return l.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(86386)),u=a(n(5493));function l(){return(l=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.allSettled([(0,s.default)(),u.default.clear()]);case 2:e.sent.forEach((function(e){if("rejected"===e.status)throw e.reason}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},91323:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.handle=function(e){var t=(0,i.default)(e,1)[0];switch(t.type){case"const":u.default[t.key]=t.value;break;case"read":if(t.isStatus){_.default.handle([t]);break}case"unread":var n=o.default.get(t.jid);n&&("read"===t.type?(0,v.markSeen)(n):"unread"===t.type&&(0,v.markUnseen)(n));break;case"log":s.upload({reason:"server-requested",immediate:!0,force:!0,isHighPri:!0});break;case"privacy":if(t.jid){var r=f.default.get(t.jid);r&&r.reset(),p.default.update(t.jid).catchType(c.WebdDrop,(function(){})),h.default.update(t.jid).catchType(c.WebdDrop,(function(){}))}else __LOG__(3)`Store:Cmd:handle:privacy no jid`;break;case"identity":if(t.jid){var a=l.default.get(t.jid);a?(0,d.updateIdentity)(a,t):__LOG__(3)`Store:Cmd:handle:identity no contact`}else __LOG__(3)`Store:Cmd:handle:identity no jid`;break;default:__LOG__(3)`Store:Cmd:handle:unknown ${t.type}`}};var i=a(n(63038)),o=a(n(26671)),s=r(n(70371)),u=a(n(34263)),l=a(n(48629)),c=n(14650),d=n(27454),f=a(n(34254)),p=a(n(99838)),h=a(n(43454)),_=a(n(66005)),v=n(54865)},7075:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(76088)),i=r(n(35771)),o=r(n(93250)),s=r(n(68950)),u=r(n(10725)),l=r(n(26671)),c=r(n(65179)),d=r(n(48629)),f=r(n(48633)),p=r(n(75385)),h=r(n(13361)),_=r(n(6705)),v=r(n(90481)),m=r(n(66312)),g=r(n(44982)),y=r(n(30608)),E=r(n(64616)),S=r(n(34254)),b=r(n(99838)),T=r(n(40113)),w=r(n(25506)),A=r(n(50785)),C=r(n(77943)),O=r(n(20243)),M=r(n(76408)),I=r(n(68624)),k=r(n(43454)),P=r(n(66005)),R=r(n(94353)),D=r(n(22767)),N={Blocklist:a.default,BusinessCategoryResult:i.default,BusinessProfile:o.default,Call:s.default,Catalog:u.default,Chat:l.default,ChatPreference:c.default,Contact:d.default,ConversionTuple:f.default,EmojiVariant:p.default,GroupMetadata:h.default,Label:_.default,LiveLocation:v.default,Msg:m.default,MsgInfo:g.default,Mute:y.default,Order:E.default,Presence:S.default,ProfilePicThumb:b.default,QuickReply:T.default,RecentEmoji:w.default,RecentSticker:A.default,StarredGifMsg:O.default,StarredMsg:M.default,StarredSticker:I.default,Status:k.default,StatusV3:P.default,Sticker:R.default,StickerSearch:D.default,RecentStickerMD:C.default};t.default=N},93743:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Conn=t.PLATFORMS=void 0;var i=a(n(63038)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(96486)),d=r(n(56727)),f=a(n(34541)),p=a(n(34263)),h=n(71701),_=a(n(22021)),v=a(n(43968)),m=a(n(89115)),g=n(3646),y=a(n(8643)),E=a(n(63805)),S={ANDROID:"android",BB:"bb",BBX:"bbx",IPAD:"ipad",IPHONE:"iphone",IPOD:"ipod",S40:"s40",SMBA:"smba",SMBI:"smbi",SYMBIAN:"symbian",WP7:"wp7"};t.PLATFORMS=S;var b=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,d.prop)(),e.ref=(0,d.prop)(),e.refTTL=(0,d.prop)(),e.refId=(0,d.prop)(),e.wid=(0,d.prop)(),e.connected=(0,d.prop)(),e.protoVersion=(0,d.prop)(),e.clientToken=(0,d.prop)(),e.serverToken=(0,d.prop)(),e.secret=(0,d.prop)(),e.isResponse=(0,d.prop)(),e.battery=(0,d.prop)(),e.plugged=(0,d.prop)(),e.lc=(0,d.prop)(),e.lg=(0,d.prop)(),e.locales=(0,d.prop)(),e.is24h=(0,d.prop)(),e.platform=(0,d.prop)(),e.phone=(0,d.prop)(),e.tos=(0,d.prop)(),e.smbTos=(0,d.prop)(0),e.pushname=(0,d.prop)(),e.blockStoreAdds=(0,d.session)(!1),e.isVoipInitialized=(0,d.session)(!1),e.refExpiry=(0,d.derived)(e._refExpiry,["ref","refTTL"]),e.locale=(0,d.derived)(e._locale,["lg","lc"]),e.localesList=(0,d.derived)(e._localesList,["locales","lg","lc"]),e.allLocales=(0,d.derived)(e._allLocales,["localesList"]),e.allLanguages=(0,d.derived)(e._allLanguages,["localesList"]),e.platformField=(0,d.derived)(e._platformField,["platform"]),e.tosShowCallNotification=(0,d.derived)(e._tosShowCallNotification,["tos"]),e.isSMB=(0,d.derived)(e._isSMB,["platform"]),e}return(0,s.default)(n,[{key:"_refExpiry",value:function(){return Date.now()+this.refTTL}},{key:"_locale",value:function(){return this.formatLocale(this.lg,this.lc)}},{key:"_localesList",value:function(){return this.locales&&this.locales.length?this.locales.split(",").map((function(e){var t=e.split("-"),n=(0,i.default)(t,2),r=n[0],a=n[1];return r?[r,a]:null})).filter(Boolean):this.lg?[[this.lg,this.lc]]:[]}},{key:"_allLocales",value:function(){var e=this;return c.default.uniq(this.localesList.map((function(t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return e.formatLocale(r,a)}))).filter(Boolean)}},{key:"_allLanguages",value:function(){return c.default.uniq(this.localesList.map((function(e){var t=(0,i.default)(e,2),n=t[0];t[1];return n})))}},{key:"_platformField",value:function(){return"wp7"===this.platform?y.default.PLATFORM_TYPE.WP:this.platform&&y.default.PLATFORM_TYPE[this.platform.toUpperCase()]||y.default.PLATFORM_TYPE.UNKNOWN}},{key:"_tosShowCallNotification",value:function(){return _.default.supportsFeature(_.default.F.MD_BACKEND)||this.tos<2}},{key:"_isSMB",value:function(){return this.platform===S.SMBA||this.platform===S.SMBI}},{key:"initialize",value:function(){var e=this;d.default.prototype.initialize.call(this),this.listenTo(this,"change:locale",(function(e,t){m.default.setLocale(t,p.default.L10N_PRIORITY.PHONE)})),this.listenTo(this,"change:plugged",c.default.debounce((function(){y.default.Global.webcPhoneCharging=e.plugged}),5e3,{leading:!0})),this.listenTo(this,"change:phone",(function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mcc,n=e.mnc;t&&"string"==typeof t&&(t=parseInt(t,10));n&&"string"==typeof n&&(n=parseInt(n,10));y.default.Global.set({mcc:null!=t?t:null,mnc:null!=n?n:null,webcPhoneDeviceManufacturer:e.device_manufacturer||null,webcPhoneDeviceModel:e.device_model||null,webcPhoneOsBuildNumber:e.os_build_number||null,webcPhoneOsVersion:e.os_version||null,webcPhoneAppVersion:e.wa_version||null})}(e.phone)})),this.listenTo(this,"me_ready",this.updateVoipAvailability),this.listenTo(_.default,_.default.FEATURE_CHANGE_EVENT,this.updateVoipAvailability),this.listenTo(this,"change:platform",this.handlePlatformChange),this.listenTo(f.default,"server_props_updated",this.updateVoipAvailability)}},{key:"delete",value:function(){(0,h.setPushname)(),(0,h.setVersion)(),this.clear()}},{key:"canSetMyPushname",value:function(){return!this.isSMB}},{key:"updateVoipAvailability",value:function(){var e=this;__LOG__(2)`Conn: updateVoipAvailability`,(0,g.requireVoip)().then((function(t){if(!E.default.isVoiceCallEnabled()&&!E.default.isVideoCallEnabled())return __LOG__(2)`Conn: updateVoipAvailability, Voip GK false`,t.cleanup(),void(e.isVoipInitialized=!1);e.id&&(0,h.getMaybeMeUser)()?(0,v.default)().then((function(n){n?(__LOG__(2)`Conn: updateVoipAvailability, isSystemCapableOfVoip true`,t.init().then((function(n){__LOG__(2)`Conn: updateVoipAvailability, Voip initialized`,e.isVoipInitialized=n,n&&t.updateAudioVideoSwitch()}))):(__LOG__(2)`Conn: updateVoipAvailability, isSystemCapableOfVoip false`,t.cleanup(),e.isVoipInitialized=!1)})):(__LOG__(2)`Conn: updateVoipAvailability, getMaybeMeUser undefined`,t.cleanup(),e.isVoipInitialized=!1)}))}},{key:"handlePlatformChange",value:function(){__LOG__(2)`Conn: platform change: ${this.platform}`,this.platform&&(0,h.setLastMobilePlatform)(this.platform)}},{key:"formatLocale",value:function(e,t){return e?t?e.toLowerCase()+"-"+t.toUpperCase():e.toLowerCase():null}},{key:"shouldSaveToCache",value:function(){return!!(0,h.getMe)()&&!!this.id}}]),n}(d.default);t.Conn=b,b.Proxy="conn";var T=new((0,d.defineModel)(b))({id:"1"});t.default=T},33310:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]");t.default=n},17956:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(33310)),f=r(n(56727)),p=a(n(76088)),h=n(89761),_=a(n(93743)),v=a(n(34263)),m=n(34612),g=n(71701),y=n(31230),E=a(n(89115)),S=n(48186),b=a(n(65122)),T=a(n(99838)),w=n(35444),A=a(n(43454)),C=a(n(12717)),O=a(n(78422)),M=/^[^0-9]+$/,I=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,f.prop)(),e.name=(0,f.prop)(),e.shortName=(0,f.prop)(),e.pushname=(0,f.prop)(),e.type=(0,f.prop)("in"),e.verifiedName=(0,f.prop)(),e.isBusiness=(0,f.prop)(),e.isEnterprise=(0,f.prop)(),e.verifiedLevel=(0,f.prop)(),e.privacyMode=(0,f.prop)(),e.statusMute=(0,f.prop)(),e.sectionHeader=(0,f.prop)(),e.labels=(0,f.prop)(),e.disappearingModeDuration=(0,f.prop)(),e.disappearingModeSettingTimestamp=(0,f.prop)(),e.isContactBlocked=(0,f.session)(!1),e.verificationString=(0,f.session)(),e.verificationBinary=(0,f.session)(),e.pendingAction=(0,f.session)(),e.promises=(0,f.session)((function(){return{}})),e.status=(0,f.session)(),e.profilePicThumb=(0,f.session)(),e.businessProfile=(0,f.session)(),e.commonGroups=(0,f.session)(),e.liveLocations=(0,f.session)(),e.businessCatalog=(0,f.session)(),e.locale=(0,f.session)(),e.notifyName=(0,f.derived)(e._notifyNameFunction,["pushname","isBusiness","verifiedLevel","verifiedName"]),e.mentionName=(0,f.derived)(e._mentionName,["isMyContact","isBusiness","verifiedLevel","name","notifyName"]),e.displayName=(0,f.derived)(e._displayName,["id","mentionName","isMe"]),e.userid=(0,f.derived)(e._userid),e.userhash=(0,f.derived)(e._userhash),e.searchName=(0,f.derived)(e._searchName,["name","id","locale"]),e.searchVerifiedName=(0,f.derived)(e._searchVerifiedName,["verifiedLevel","verifiedName"]),e.header=(0,f.derived)(e._header,["name"]),e.isMe=(0,f.derived)(e._isMe),e.isUser=(0,f.derived)(e._isUser),e.isGroup=(0,f.derived)(e._isGroup),e.isBroadcast=(0,f.derived)(e._isBroadcast),e.isPSA=(0,f.derived)(e._isPSA),e.formattedShortNameWithNonBreakingSpaces=(0,f.derived)(e._formattedShortNameWithNonBreakingSpaces,["shortName","formattedName","id","locale"]),e.formattedShortName=(0,f.derived)(e._formattedShortName,["shortName","formattedName","id","locale"]),e.formattedName=(0,f.derived)(e._formattedName,["name","id","locale","verifiedLevel","verifiedName"]),e.formattedUser=(0,f.derived)(e._formattedUser,["name","id","locale","verifiedLevel","verifiedName"]),e.isWAContact=(0,f.derived)(e._isWAContact,["type"]),e.isMyContact=(0,f.derived)(e._isMyContact,["name"]),e.showBusinessCheckmarkAsPrimary=(0,f.derived)(e._showBusinessCheckmarkAsPrimary,["isBusiness","verifiedLevel","name","verifiedName"]),e.showBusinessCheckmarkAsSecondary=(0,f.derived)(e._showBusinessCheckmarkAsSecondary,["isBusiness","verifiedLevel","name","verifiedName"]),e}return(0,o.default)(r,[{key:"_notifyNameFunction",value:function(){return this.isBusiness&&this.verifiedLevel!==v.default.VERIFIED_LEVEL.HIGH?this.verifiedName:this.pushname}},{key:"_mentionName",value:function(){return!this.isMyContact&&this.isBusiness&&this.verifiedLevel!==v.default.VERIFIED_LEVEL.HIGH?null:this.name||this.notifyName}},{key:"_displayName",value:function(){return this.isMe&&_.default.pushname?_.default.pushname:this.mentionName||(0,O.default)(this.id)}},{key:"_userid",value:function(){return this.isUser?C.default.user(this.id):null}},{key:"_userhash",value:function(){return this.isUser?(0,b.default)((this.id.user||"")+"WA_ADD_NOTIF"):null}},{key:"_searchName",value:function(){return C.default.isPSA(this.id)?E.default.accentFold(E.default.t(1975)):this.name?E.default.accentFold(this.name):null}},{key:"_searchVerifiedName",value:function(){return this.verifiedLevel!==v.default.VERIFIED_LEVEL.HIGH?null:this.verifiedName?E.default.accentFold(this.verifiedName):null}},{key:"_header",value:function(){if(this.name){var e=this.name.toLowerCase(),t=d.default.exec(e);if(t&&0===t.index||t&&M.test(e.slice(t.index))){var n=t[0],r=E.default.removeAccents(n);return(0,m.getCollator)().compare(r,n)?n:r}return"#"}}},{key:"_isMe",value:function(){return this.id.equals((0,g.getMaybeMeUser)())}},{key:"_isUser",value:function(){return C.default.isUser(this.id)}},{key:"_isGroup",value:function(){return C.default.isGroup(this.id)}},{key:"_isBroadcast",value:function(){return C.default.isBroadcast(this.id)}},{key:"_isPSA",value:function(){return C.default.isPSA(this.id)}},{key:"_formattedShortNameWithNonBreakingSpaces",value:function(){return this.id?this.isMe?E.default.t(1964):this.shortName||this.formattedName&&this.formattedName.replace(/\s/g," "):""}},{key:"_formattedShortName",value:function(){return this.id?this.isMe?E.default.t(1964):this.shortName||this.formattedName:""}},{key:"_formattedName",value:function(){return this.id?this.isMe?E.default.t(1964):C.default.isPSA(this.id)?E.default.t(1975):this.name?this.name:this.verifiedLevel===v.default.VERIFIED_LEVEL.HIGH&&this.verifiedName?this.verifiedName:this.isUser?(0,O.default)(this.id):"":""}},{key:"_formattedUser",value:function(){return this.getFormattedUser()}},{key:"_isWAContact",value:function(){return this.isUser&&"in"===this.type}},{key:"_isMyContact",value:function(){return!!(this.isUser&&this.name&&this.name.length)}},{key:"_showBusinessCheckmarkAsPrimary",value:function(){return this.isBusiness&&this.verifiedLevel===v.default.VERIFIED_LEVEL.HIGH&&(this.name===this.verifiedName||!this.name)}},{key:"_showBusinessCheckmarkAsSecondary",value:function(){return this.isBusiness&&this.verifiedLevel===v.default.VERIFIED_LEVEL.HIGH&&Boolean(this.name)&&this.name!==this.verifiedName}},{key:"initialize",value:function(){var e=this;(0,s.default)((0,u.default)(r.prototype),"initialize",this).call(this),this.id&&(this.isMe&&this.addChild("status",A.default.gadd(this.id)),this.isMe&&this.addChild("profilePicThumb",T.default.gadd(this.id)),(this.isBusiness||this.isMe&&_.default.isSMB)&&this.addChild("businessProfile",n(93250).default.gadd(this.id)),this.listenTo(this,"change:isBusiness",(function(){return(0,h.onIsBusinessChange)(e)})),this.isMe&&this.listenTo(_.default,"change:pushname",(function(){e.set({pushname:_.default.pushname})})),this.listenTo(E.default,"locale_change",(function(){e.locale=E.default.getLocale()})),this.listenTo(this,"change:name",this.updateShortName),this.isContactBlocked=!!p.default.get(this.id),this.pendingAction=0,_.default.isSMB&&(0,S.initializeLabels)(this))}},{key:"updateShortName",value:function(){if(this.isUser&&this.name&&!this.shortName){var e=(0,w.getShortName)(this.name);e&&this.set("shortName",e)}}},{key:"getStatus",value:function(){return C.default.user(this.id)||__LOG__(2)`contact:getStatus for non-user ${this.id.toString()}`,this.status=A.default.gadd(this.id)}},{key:"getProfilePicThumb",value:function(){return this.profilePicThumb=T.default.gadd(this.id)}},{key:"addPendingAction",value:function(e){var t=this;if(e.isPending()){var n=function(){t.decPending()};e.then(n,n),this.pendingAction++}return e}},{key:"decPending",value:function(){this.pendingAction>0?this.pendingAction--:(__LOG__(2)`contact:onPendingActionUpdate pendingAction value is invalid`,this.pendingAction=0)}},{key:"isBlocked",value:function(){return!!p.default.get(this.id)}},{key:"searchMatch",value:function(e,t,n){var r;return(0,y.canDisplayLabel)()&&n?!(e&&this.searchName&&!this.searchName.includes(e))&&Boolean(null===(r=this.labels)||void 0===r?void 0:r.includes(n)):!!e&&(!(!this.searchName||!this.searchName.includes(e))||(!(!this.userid||!this.userid.includes(e))||(!!(t&&this.userid&&this.userid.includes(t))||(!(!this.searchVerifiedName||!this.searchVerifiedName.includes(e))||!(!this.pushname||!E.default.accentFold(this.pushname).includes(e))))))}},{key:"getFormattedUser",value:function(){return this.id?C.default.isPSA(this.id)?E.default.t(1975):this.name?this.name:this.verifiedLevel===v.default.VERIFIED_LEVEL.HIGH&&this.verifiedName?this.verifiedName:(0,O.default)(this.id):""}},{key:"set",value:function(e,t,n){var a=(0,s.default)((0,u.default)(r.prototype),"set",this).call(this,e,t,n);if("string"!=typeof e&&t&&t.merge&&a){if(a.isPSA)return a;!e.name&&a.name&&(a.unset("name"),a.unset("shortName")),!e.verifiedName&&a.verifiedName&&a.unset("verifiedName")}return a}},{key:"getCollection",value:function(){return n(48629).default}},{key:"setNotMyContact",value:function(){this.name&&this.set("name",void 0)}}]),r}(f.default);I.Proxy="contact",I.idClass=C.default;var k=(0,f.defineModel)(I);t.default=k},48629:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ContactCollection=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(81506)),l=i(n(2205)),c=i(n(99842)),d=i(n(16525)),f=i(n(29754)),p=i(n(96486)),h=a(n(60619)),_=n(9654),v=i(n(34263)),m=i(n(17956)),g=i(n(34612)),y=n(14650),E=n(78843),S=n(1794),b=n(71701),T=i(n(89115)),w=i(n(42839)),A=i(n(61110)),C=a(n(7860)),O=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e,r,a;return(0,o.default)(this,n),(a=t.call(this))._contactHashes=new w.default,a.checksum=void 0,a._frequentContacts={},a._sort=p.default.debounce((function(){return(0,d.default)((e=(0,u.default)(a),(0,f.default)(n.prototype)),"sort",e).call(e)}),1e3),a._silentSort=p.default.debounce((function(){return(0,d.default)((r=(0,u.default)(a),(0,f.default)(n.prototype)),"sort",r).call(r,{silent:!0})}),1e3),a.listenTo(T.default,"locale_change",a.sort),a.listenTo((0,u.default)(a),"change:name",a.sort),a.listenTo(C.default,"change:stream",(function(){C.default.stream===C.STREAM.RESUMING&&a.forEach((function(e){e.unset("verificationString"),e.unset("verificationBinary")}))})),a.listenTo((0,u.default)(a),"add",a.contactAdded),a.listenTo((0,u.default)(a),"remove",a.contactRemoved),a}return(0,s.default)(n,[{key:"sort",value:function(e){return e&&e.silent?this._silentSort():this._sort()}},{key:"ensureSorted",value:function(){this._sort.flush()}},{key:"initializeFromCache",value:function(e){e&&(__LOG__(2)`Store:Contact init from cache`,this.add(e,{silent:!0,merge:!0}))}},{key:"contactAdded",value:function(e){this._contactHashes.put(e)}},{key:"contactRemoved",value:function(e){this._contactHashes.remove(e)}},{key:"contactHashLength",value:function(){return this._contactHashes.length}},{key:"delete",value:function(){(0,d.default)((0,f.default)(n.prototype),"delete",this).call(this),this.setChecksum(),delete this.checksum,this._frequentContacts={},(0,S.setFrequent)({}).catch((function(){})),this._contactHashes.clear()}},{key:"isFilteredContact",value:function(e){return!!e.name&&!e.isMe&&!e.isPSA&&e.isWAContact}},{key:"getFilteredContacts",value:function(){return this.filter((function(e){return e.name&&!e.isMe&&!e.isPSA&&e.isWAContact}))}},{key:"_find",value:function(e){var t=this.get(e);return t?r.resolve(t):r.resolve({id:e})}},{key:"_findQuery",value:function(e){return(0,E.contactFindQuery)(e)}},{key:"sync",value:function(){return this.findQuery({}).catchType(y.WebdDrop,(function(){})),(0,A.default)(this,v.default.COLLECTION_HAS_SYNCED)}},{key:"updateFrequentContacts",value:function(e){this._frequentContacts=e}},{key:"frequentContacts",value:function(e,t){var n=this,r=e&&this._frequentContacts[e];if(r||(r=this._frequentContacts.message),!r)return[];var a=t&&t.id;return r.map((function(e){return n.get(e)})).filter((function(e){return!!e&&!e.id.equals(a)}))}},{key:"getUserCount",value:function(){return this.map((function(e){return e.isUser?1:0})).reduce((function(e,t){return e+t}),0)}},{key:"setChecksum",value:function(e){this.checksum=e,(0,b.setContactChecksum)(this.checksum),(0,_.setChecksum)(e).catch((function(){}))}},{key:"resolveWidsFromHash",value:function(e){return this._contactHashes.get(e)}}]),n}(h.default);t.ContactCollection=O,O.model=m.default,O.comparator=g.default,O.cachePolicy={id:"contact",policy:h.CACHE_POLICY.IMMEDIATE,trigger:"add\n        sort\n        remove\n        reset\n        change:id\n        change:name\n        change:shortName\n        change:pushname\n        change:type\n        change:verifiedName\n        change:isBusiness\n        change:isEnterprise\n        change:verifiedLevel\n        change:statusMute\n        change:sectionHeader\n        change:isContactBlocked\n        change:labels\n        change:disappearingModeDuration\n        change:disappearingModeSettingTimestamp"};var M=new O;t.default=M},34612:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getCollator=function(){return a},t.default=void 0;var a,i=r(n(34541)),o=r(n(34263)),s=n(71701);u(),i.default.on("set_locale",u);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.default.L10N.DEFAULT;if(self.Intl&&self.Intl.Collator){var t=self.Intl.Collator([e],{sensitivity:"base"});a={compare:function(e,n){try{return t.compare(e,n)}catch(e){return 0}}}}else a={compare:function(e,t){return e.localeCompare(t)}}}var l=function(e,t){var n=e.id.toString(),r=t.id.toString(),i=(0,s.getMaybeMeUser)(),o=i&&i.toString();if(n===o)return 1;if(r===o)return-1;var u=e.name,l=t.name;if(!u&&l)return 1;if(u&&!l)return-1;if(u&&l&&e.header&&t.header){var c=a.compare(e.header,t.header);return 0===c?a.compare(u,l):c}return n&&r?n.localeCompare(r):-1};t.default=l},35444:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getShortName=function(e){if(null==e)return null;var t=e.split(/\s/),n=(0,a.default)(t,1)[0];if(i.default.exec(n))return n;return __LOG__(2)`[short-name] unable to get short name for contact: ${e}`,null};var a=r(n(63038)),i=r(n(33310))},42839:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(91080)),s=r(n(96486)),u=r(n(12717)),l=function(){function e(){(0,a.default)(this,e),this._map={},this.length=0}return(0,i.default)(e,[{key:"put",value:function(t){var n=e.getSidelistHash(t);if(n&&!this._map[n]){if(this._map[n]){var r=this._map[n];r instanceof u.default?this._map[n]=[r,t.id]:r instanceof Array&&r.push(t.id)}else this._map[n]=t.id;this.length++}}},{key:"remove",value:function(t){var n=e.getSidelistHash(t);if(n&&this._map[n]){var r=(0,o.default)(this._map[n],"this._map[hash]");r instanceof u.default?delete this._map[n]:r instanceof Array&&s.default.remove(r,(function(e){return e.equals(t.id)})),this.length++}}},{key:"get",value:function(e){var t=this._map[e];return t instanceof u.default?[t]:t}},{key:"clear",value:function(){this._map={},this.length=0}}],[{key:"getSidelistHash",value:function(e){return e.isUser?"string"==typeof e.userhash&&e.userhash.slice?e.userhash.slice(0,4):(__LOG__(3)`Store:Contact can't call slice on contact.userhash`,null):null}}]),e}();t.default=l},86608:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ConversionTupleExpiry=t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=n(17643),f=a(n(1073)),p=r(n(56727)),h=a(n(79140)),_=a(n(12717)),v=604800;t.ConversionTupleExpiry=v;var m=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,p.prop)(),e.conversionData=(0,p.prop)(),e.conversionSource=(0,p.prop)(),e.timestamp=(0,p.prop)((function(){return h.default.globalUnixTime()})),e.alarmId=(0,p.session)(),e}return(0,o.default)(r,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(r.prototype),"initialize",this).call(this),this.listenTo(this,"change:timestamp",this._setExpiryTimer),this._setExpiryTimer()}},{key:"_setExpiryTimer",value:function(){var e=this,t=this.timestamp+v;if(t<0)return __LOG__(3)`Invalid conversionTuple timer`,void this.delete();this.alarmId=f.default.setLocalTimeout((function(){e.delete()}),1e3*t,this.alarmId)}},{key:"_clearAlarm",value:function(){this.alarmId&&(f.default.clearTimeout(this.alarmId),this.alarmId=void 0)}},{key:"elapsedSeconds",value:function(){return h.default.globalUnixTime()-this.timestamp}},{key:"formatTuple",value:function(){var e={conversionDelaySeconds:this.elapsedSeconds()};return this.conversionData&&(e.conversionData=this.conversionData),this.conversionSource&&(e.conversionSource=this.conversionSource),e}},{key:"toJSON",value:function(){var e=this.serialize(),t=e.conversionData;if(t instanceof ArrayBuffer){var n=new d.Binary(t);e.conversionData=n.readString(t.byteLength)}return e}},{key:"delete",value:function(){(0,s.default)((0,u.default)(r.prototype),"delete",this).call(this),this.getCollection().remove(this.id),this._clearAlarm()}},{key:"getCollection",value:function(){return n(48633).default}}]),r}(p.default);m.Proxy="conversionTuple",m.idClass=_.default;var g=(0,p.defineModel)(m);t.default=g},48633:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(60619)),c=a(n(79140)),d=r(n(86608)),f=n(80877),p=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"initializeFromCache",value:function(e){if(e){var t=c.default.globalUnixTime()-d.ConversionTupleExpiry,n=e.filter((function(e){return e.timestamp-t>0})).map((function(e){var t=(0,f.parseConversionData)(e.conversionData);return t?e.conversionData=t:delete e.conversionData,e}));this.add(n),this.saveToCache()}}}]),n}(l.default);p.model=d.default,p.cachePolicy={id:"conversion_tuple",policy:l.CACHE_POLICY.LOAD,delay:1e3};var h=new p;t.default=h},12859:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.variant=(0,u.prop)(),e}return n}(u.default);l.Proxy="emojiVariant";var c=(0,u.defineModel)(l);t.default=c},75385:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmojiVariantCollection=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(60619)),c=a(n(34263)),d=a(n(8513)),f=a(n(12859)),p=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"setVariant",value:function(e,t){var n=d.default.getSkinToneBase(e);if(!n)throw new Error("attempt to store variantless emoji");this.gadd({id:n,variant:t})}},{key:"getVariant",value:function(e){if(d.default.getSkinToneBase(e)){var t=this.get(e);return t?d.default.normalizeEmoji(t.variant):null}throw new Error("attempt to get variantless emoji")}},{key:"getVariantIfExists",value:function(e){if(d.default.getSkinToneBase(e)){var t=this.get(e);return t?d.default.normalizeEmoji(t.variant):null}return null}}]),n}(l.default);t.EmojiVariantCollection=p,p.model=f.default,p.cachePolicy={id:c.default.KEY_EMOJI_VARIANT_COLLECTION,policy:l.CACHE_POLICY.LOAD,delay:1e3};var h=new p;t.default=h},52889:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.weight=(0,u.prop)(),e}return n}(u.default);l.Proxy="recentEmoji";var c=(0,u.defineModel)(l);t.default=c},25506:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RecentEmojiCollection=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(81506)),l=i(n(16525)),c=i(n(29754)),d=i(n(2205)),f=i(n(99842)),p=i(n(96486)),h=a(n(60619)),_=i(n(34263)),v=i(n(8513)),m=n(14650),g=i(n(22021)),y=i(n(52889)),E=n(88828),S=i(n(23306)),b=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,o.default)(this,n),(e=t.call(this)).dirty=!1,e._throttledSync=p.default.throttle((function(e){e.sync()}),36,{leading:!1}),e.listenTo((0,u.default)(e),"change:weight change:length",p.default.debounce(e._sortTrimScale,100)),e}return(0,s.default)(n,[{key:"_sortTrimScale",value:function(){var e=this.length;e&&(this.sort(),e>36&&this.remove(this.models.slice(36)))}},{key:"delete",value:function(){(0,l.default)((0,c.default)(n.prototype),"delete",this).call(this),this.dirty=!1,this._throttledSync.cancel()}},{key:"sync",value:function(){var e=this;return this.findQuery({},{set:!0}).finally((function(){e.dirty=!1})).catchType(m.WebdDrop,(function(){})).catchConditional(E.isString,(function(){}))}},{key:"_findQuery",value:function(){return g.default.supportsFeature(g.default.F.RECENT_EMOJI_SYNC)&&!g.default.supportsFeature(g.default.F.MD_BACKEND)?S.default.recentEmojiQuery(this.dirty?this.toArray():void 0).then((function(e){return Array.isArray(e)?(e.forEach((function(e){e.id=v.default.normalizeAllEmojis(e.id)})),r.resolve(e)):(__LOG__(3)`models:recentEmoji:findQuery error`,r.reject("recent emoji fetch error"))})):r.reject("gk recent emoji sync unsupported")}},{key:"throttledSync",value:function(){g.default.supportsFeature(g.default.F.RECENT_EMOJI_SYNC)&&(__LOG__(2)`models:RecentEmoji:throttledSync dirty: ${String(this.dirty)}`,this._throttledSync(this))}},{key:"increment",value:function(e){var t=v.default.getSkinToneBase(e)||e;this.get(t)||this.add({id:t,weight:0}),this.forEach((function(e){e.id===t?e.weight+=1:e.weight*=.9})),this.dirty=!0,this.throttledSync()}}]),n}(h.default);t.RecentEmojiCollection=b,b.cachePolicy={id:_.default.KEY_RECENT_EMOJI_COLLECTION,policy:h.CACHE_POLICY.LOAD,delay:2e3},b.comparator=function(e,t){return e.weight>t.weight?-1:1},b.model=y.default;var T=new b;t.default=T},59982:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=n(12035),p=a(n(56727)),h=i(n(34263)),_=i(n(48629)),v=n(14650),m=n(71701),g=i(n(22021)),y=i(n(31239)),E=i(n(57380)),S=i(n(35562)),b=i(n(23306)),T=i(n(12717)),w=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).participants=(0,p.collection)(y.default),e.pendingParticipants=(0,p.collection)(E.default),e.id=(0,p.prop)(),e.creation=(0,p.prop)(),e.owner=(0,p.prop)(),e.desc=(0,p.prop)(),e.descId=(0,p.prop)(),e.descTime=(0,p.prop)(),e.descOwner=(0,p.prop)(),e.restrict=(0,p.prop)(),e.announce=(0,p.prop)(),e.noFrequentlyForwarded=(0,p.prop)(),e.ephemeralDuration=(0,p.prop)(),e.size=(0,p.prop)(),e.support=(0,p.prop)(),e.uniqueShortNameMap=(0,p.prop)(),e.stale=(0,p.session)(!0),e.trusted=(0,p.session)(!0),e.inviteCode=(0,p.session)(),e.groupInviteCodePromise=(0,p.session)(),e.revokeGroupInvitePromise=(0,p.session)(),e.revokeGroupV4AddInvitePromise=(0,p.session)(),e.groupInviteLink=(0,p.derived)(e._groupInviteLink,["inviteCode"]),e}return(0,s.default)(a,[{key:"_groupInviteLink",value:function(){return this.inviteCode?`${h.default.GROUP_INVITE_LINK_URL}${this.inviteCode}`:null}},{key:"hasUniqueShortNameMention",value:function(e){var t;if(!this.uniqueShortNameMap||!e.shortName||!e.isMyContact)return!1;var n=this._normalizeShortName(e.shortName);return null!==(t=this.uniqueShortNameMap.get(n))&&void 0!==t&&t}},{key:"_normalizeShortName",value:function(e){return e.toLowerCase().trim()}},{key:"delete",value:function(){(0,u.default)((0,l.default)(a.prototype),"delete",this).call(this),this.getCollection().remove(this.id),this.participants.delete()}},{key:"canSetSubject",value:function(){return!!this.participants.iAmMember()&&((this.participants.iAmAdmin()||!g.default.supportsFeature(g.default.F.GROUPS_V_3)||!0!==this.restrict)&&!this.support)}},{key:"canSetDescription",value:function(){return!!g.default.supportsFeature(g.default.F.GROUPS_V_3)&&(!(!this.participants.iAmMember()||!this.participants.iAmAdmin()&&this.restrict)&&!this.support)}},{key:"canSetGroupProperty",value:function(){return!!g.default.supportsFeature(g.default.F.GROUPS_V_3)&&(!!this.participants.iAmAdmin()&&!this.support)}},{key:"canSetEphemeralSetting",value:function(){return g.default.isEphemeralAllowGroupMembersEnabled()?!(!this.participants.iAmMember()||!this.participants.iAmAdmin()&&this.restrict)&&!this.support:this.participants.iAmAdmin()&&!this.support}},{key:"initialize",value:function(){p.default.prototype.initialize.call(this),this.listenTo(this.participants,"change:isAdmin change:isSuperAdmin change:contact.isMyContact sort remove reset",this.isTrusted),this.listenTo(this.participants,"add remove reset",this.triggerParticipantsChange),this.listenTo(this,"change:owner",this.isTrusted),this.isTrusted(),g.default.supportsFeature(g.default.F.DROP_LAST_NAME_MENTIONS)&&(this._updateUniqueShortNameMapTimer=this._createUniqueNameMapShiftTimer(),this.listenTo(this.participants,"change:contact.shortName",this.onParticipantShortNameUpdated)),this.uniqueShortNameMap=new Map,this.unreadMentionMetadata=new S.default}},{key:"onParticipantShortNameUpdated",value:function(){this._updateUniqueShortNameMapTimer.debounce(a.UPDATE_NAME_MAP_DEBOUNCE_TIME)}},{key:"triggerParticipantsChange",value:function(){g.default.supportsFeature(g.default.F.DROP_LAST_NAME_MENTIONS)&&this._updateUniqueShortNameMapTimer.debounce(a.UPDATE_NAME_MAP_DEBOUNCE_TIME),this.trigger("change:participants")}},{key:"_createUniqueNameMapShiftTimer",value:function(){var e=this;return new f.ShiftTimer((function(){var t=new Map;e.participants&&e.participants.forEach((function(n){if(n.contact.shortName&&n.contact.isMyContact){var r=e._normalizeShortName(n.contact.shortName);t.has(r)?t.set(r,!1):t.set(r,!0)}})),e.uniqueShortNameMap=t}))}},{key:"isTrusted",value:function(){if(this.stale)return this.trusted;if(!this.owner)return this.trusted=!1;if(this.support)return this.trusted=!0;var e=(0,m.getMaybeMeUser)();if(T.default.equals(this.owner,e))return this.trusted=!0;if(this.owner){var t=_.default.get(this.owner);if(t&&t.isMyContact)return this.trusted=!0}return this.trusted=!1}},{key:"revokeGroupV4AddInvite",value:function(e){var t=this;if(this.revokeGroupV4AddInvitePromise)return this.revokeGroupV4AddInvitePromise;var n=this.id.toString(),r=(0,m.getMaybeMeUser)().toString(),a=this.pendingParticipants;return this.revokeGroupV4AddInvitePromise=b.default.revokeGroupV4Invite(e,n,r).then((function(t){return t.status>=200&&t.status<300&&a.remove(e),t.status})).catch((function(){__LOG__(3)`models:groupMetadata:participantCollection:revokeGroupV4AddInvite failed`})).finally((function(){t.revokeGroupV4AddInvitePromise=null}))}},{key:"queryGroupV4PendingInvite",value:function(){var e=this;if(g.default.supportsFeature(g.default.F.MD_BACKEND))return r.resolve();var t=(0,m.getMaybeMeUser)().toString(),n=this.id.toString();return b.default.findGroupPendingInvitesFromPhone(t,n).then((function(t){e.collection&&e.collection.add({id:e.id,pendingParticipants:t.participants},{merge:!0})})).catchType(v.WebdDrop,(function(){}))}},{key:"getCollection",value:function(){return n(13361).default}}]),a}(p.default);w.Proxy="groupMetadata",w.idClass=T.default,w.UPDATE_NAME_MAP_DEBOUNCE_TIME=200;var A=(0,p.defineModel)(w);t.default=A},13361:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(2205)),l=i(n(99842)),c=i(n(96486)),d=i(n(60619)),f=i(n(26671)),p=n(14650),h=a(n(98569)),_=i(n(22021)),v=n(75040),m=i(n(59982)),g=n(41379),y=n(69056),E=i(n(23306)),S=i(n(12717)),b=n(75793),T=function(e){(0,u.default)(a,e);var t=(0,l.default)(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"onResume",value:function(){var e=this;c.default.union(f.default.where({active:!0}).filter((function(e){return e.isGroup||e.isBroadcast})),f.default.where({isBroadcast:!0})).forEach((function(t){e.find(t.id).catchTypes(p.WebdDrop,h.ProtoVersionUndefined,(function(){}))}))}},{key:"_find",value:function(e){var t=this;if(S.default.isGroup(e)){var a=n(26671).default.get(e);return a&&a.isReadOnly?_.default.supportsFeature(_.default.F.MD_BACKEND)?(__LOG__(3)`queryGroupFromPhone: not implemented for MD`,r.resolve({id:e})):(0,g.queryGroupFromPhone)(e):(0,v.getGroupMetadataFromStorage)(e).then((function(t){return t?r.resolve(t):(0,y.sendQueryGroup)(e)}))}return S.default.isBroadcast(e)?_.default.supportsFeature(_.default.F.MD_BACKEND)?(__LOG__(3)`contactFindBroadcast: not implemented for MD`,r.resolve({id:e})):E.default.contactFindBroadcast(e).then((function(n){if(200===n.status){var a=t.get(e);return a&&!a.stale?r.resolve(a):{id:e,participants:n.recipients}}return 404===n.status?(__LOG__(3)`models:GroupMetadataCollection:_find:False broadcast list query`,{id:e}):(__LOG__(3)`models:GroupMetadataCollection:_find:bclist error: ${n.status}`,r.reject(new Error("models:GroupMetadataCollection:_find:bclist error: "+n.status)))})):(__LOG__(2)`groupMetadata:find trying to fetch non-group/bclist wid ${e.toString()}`,r.reject(new Error(`groupMetadata:find trying to fetch non-group/bclist wid ${e.toString()}`)))}},{key:"_handle",value:function(e){return e}},{key:"handlePendingInvite",value:function(e){var t=e.gid,n=e.participants;this.add({id:(0,b.createWid)(t),pendingParticipants:n},{merge:!0})}}]),a}(d.default);T.model=m.default,T.staleCollection=!0;var w=new T;t.default=w},17362:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(67294).createContext)(null);t.default=r},40245:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=a(n(48629)),p=a(n(12717)),h=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,d.prop)(),e.isAdmin=(0,d.prop)(),e.isSuperAdmin=(0,d.prop)(),e.contact=(0,d.session)(),e.hasSenderKey=(0,d.session)(!1),e}return(0,o.default)(n,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.addChild("contact",f.default.gadd(this.id))}}]),n}(d.default);h.Proxy="participant",h.idClass=p.default;var _=(0,d.defineModel)(h);t.default=_},31239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(16525)),u=r(n(29754)),l=r(n(2205)),c=r(n(99842)),d=r(n(96486)),f=r(n(26671)),p=r(n(92937)),h=n(35315),_=n(71701),v=r(n(22021)),m=r(n(89115)),g=r(n(40245)),y=r(n(91305)),E=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,n),(r=t.call(this,e,i))._debouncedSort=d.default.debounce((function(){return r.sort()}),1e3),r.sendForNeededAddRequest=function(e){var t=r.parent.id,n=f.default.assertGet(t),a=n.groupMetadata.desc;(0,h.sendForNeededAddRequest)(e,n.formattedTitle||n.name,a,r.parent.id)},r.listenTo((0,o.default)(r),"change:contact.name",r._debouncedSort),r.listenTo(m.default,"locale_change",r._debouncedSort),r}return(0,i.default)(n,[{key:"delete",value:function(){this.forEach((function(e){e.delete()})),this.stopListening(),this.reset()}},{key:"ensureSorted",value:function(){this._debouncedSort.flush()}},{key:"set",value:function(e,t){var r=t||{};return r.isParticipantCollectionAdd||(r.remove=!0),(0,s.default)((0,u.default)(n.prototype),"set",this).call(this,e,r)}},{key:"add",value:function(e,t){var r=t||{};return r.isParticipantCollectionAdd=!0,(0,s.default)((0,u.default)(n.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(){return!!this.iAmAdmin()}},{key:"canPromote",value:function(e){return!!e&&(!(0,_.getMaybeMeUser)().equals(e.id)&&(!!this.iAmAdmin()&&!e.isAdmin))}},{key:"canDemote",value:function(e){return!!e&&(!!this.iAmAdmin()&&(!(0,_.getMaybeMeUser)().equals(e.id)&&(!(v.default.supportsFeature(v.default.F.GROUPS_V_3)&&e.isSuperAdmin)&&!!e.isAdmin)))}},{key:"canRemove",value:function(e){return!!e&&(!(0,_.getMaybeMeUser)().equals(e.id)&&!!this.iAmAdmin())}},{key:"canVerifyIdentity",value:function(e){return!!v.default.supportsFeature(v.default.F.MD_BACKEND)&&(!!e&&!(0,_.getMaybeMeUser)().equals(e.id))}},{key:"iAmMember",value:function(){return 1===this.filter((function(e){return e.id.equals((0,_.getMaybeMeUser)())})).length}},{key:"iAmRestrictedMember",value:function(){var e=this.parent.id;return f.default.assertGet(e).groupMetadata.restrict&&!this.iAmAdmin()}},{key:"iAmAdmin",value:function(){return 1===this.filter((function(e){return e.id.equals((0,_.getMaybeMeUser)())&&e.isAdmin})).length}},{key:"iAmSuperAdmin",value:function(){return 1===this.filter((function(e){return e.id.equals((0,_.getMaybeMeUser)())&&e.isSuperAdmin})).length}},{key:"getAdmins",value:function(){return this.where({isAdmin:!0})}},{key:"getSuperAdmin",value:function(){return this.findFirst((function(e){return e.isSuperAdmin}))}}]),n}(p.default);t.default=E,E.model=g.default,E.comparator=y.default},91305:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34612)),i=function(e,t){return(0,a.default)(e.contact,t.contact)};t.default=i},57380:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(16525)),u=r(n(29754)),l=r(n(2205)),c=r(n(99842)),d=r(n(96486)),f=r(n(92937)),p=r(n(89115)),h=r(n(40245)),_=r(n(91305)),v=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,n),(r=t.call(this,e,i))._debouncedSort=d.default.debounce((function(){return r.sort()}),1e3),r.listenTo((0,o.default)(r),"change:contact.name",r._debouncedSort),r.listenTo(p.default,"locale_change",r._debouncedSort),r}return(0,i.default)(n,[{key:"delete",value:function(){this.forEach((function(e){e.delete()})),this.stopListening(),this.reset()}},{key:"ensureSorted",value:function(){this._debouncedSort.flush()}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.isParticipantCollectionAdd||(t.remove=!0),(0,s.default)((0,u.default)(n.prototype),"set",this).call(this,e,t)}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.isParticipantCollectionAdd=!0,(0,s.default)((0,u.default)(n.prototype),"add",this).call(this,e,t)}}]),n}(f.default);t.default=v,v.model=h.default,v.comparator=_.default},35562:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MessageType=t.UnreadMentionState=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=n(54654),d=a(n(45019)),f=n(54302).Mirrored(["INIT","SYNCING","COMPLETE","INCOMPLETE"]);t.UnreadMentionState=f;var p=n(54302).Mirrored(["NEW_MESSAGE","PERSISTANCE_LOAD","HISTORYC_SYNC_CHUNK"]);t.MessageType=p;var h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._unreadMentionCollection=(0,l.prop)(),e}return(0,o.default)(n,[{key:"initialize",value:function(){this._currentUnreadMentionState=f.INIT,this._unreadMentionCollection=new d.default,this._expectedUnreadMentionsCount=0}},{key:"historicSyncStateUpdated",value:function(e){switch(e){case c.ConversationEndOfHistoryTransferModelPropType.COMPLETE_BUT_MORE_MESSAGES_REMAIN_ON_PRIMARY:this._updateStateCompletedSyncAndIncomplete();break;case c.ConversationEndOfHistoryTransferModelPropType.COMPLETE_AND_NO_MORE_MESSAGE_REMAIN_ON_PRIMARY:this._updateStateCompletedSyncAndComplete();break;case c.ConversationEndOfHistoryTransferModelPropType.INCOMPLETE:this._updateStateSyncing()}}},{key:"_updateStateSyncing",value:function(){this._expectedUnreadMentionsCount===this._unreadMentionCollection.length?this._currentUnreadMentionState=f.COMPLETE:this._currentUnreadMentionState=f.SYNCING}},{key:"_updateStateCompletedSyncAndIncomplete",value:function(){this._updateUnreadMentionState()}},{key:"_updateStateCompletedSyncAndComplete",value:function(){this._updateUnreadMentionState()}},{key:"_updateUnreadMentionState",value:function(){this._expectedUnreadMentionsCount===this._unreadMentionCollection.length?this._currentUnreadMentionState=f.COMPLETE:this._currentUnreadMentionState=f.INCOMPLETE}},{key:"setInitialUnreadMentionsCount",value:function(e){this._expectedUnreadMentionsCount=e}},{key:"addUnreadMentions",value:function(e,t){if(t===p.NEW_MESSAGE){var n=Array.isArray(e)?e.length:1;this._expectedUnreadMentionsCount+=n}this._unreadMentionCollection.add(e)}},{key:"getCurrentState",value:function(){return this._currentUnreadMentionState}}]),n}(l.default),_=(0,l.defineModel)(h);t.default=_},17864:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.intColorToHex=y,t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=a(n(56727)),p=a(n(93743)),h=i(n(34263)),_=i(n(22021)),v=i(n(57466)),m=n(81172),g=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).id=(0,f.prop)(),e.name=(0,f.prop)(),e.colorIndex=(0,f.prop)(),e.color=(0,f.prop)(),e.count=(0,f.prop)(),e.stale=(0,f.session)(!0),e.hexColor=(0,f.derived)(e._hexColor,["color","colorIndex"]),e}return(0,s.default)(a,[{key:"initialize",value:function(){(0,u.default)((0,l.default)(a.prototype),"initialize",this).call(this),this.labelItemCollection=new v.default,this._triggerLabelUpdate(),this.listenTo(this,"change:name",this._triggerLabelUpdate),this.listenTo(this,"change:color",this._triggerLabelUpdate),this.listenTo(this,"change:colorIndex",this._triggerLabelUpdate),this.listenTo(this,"change:count",this._triggerLabelUpdate),_.default.supportsFeature(_.default.F.MD_BACKEND)&&(this.listenTo(this.labelItemCollection,"add",this._handleLabelItemCollectionUpdate),this.listenTo(this.labelItemCollection,"remove",this._handleLabelItemCollectionUpdate))}},{key:"_hexColor",value:function(){if(_.default.supportsFeature(_.default.F.MD_BACKEND)){var e=this.colorIndex;if(null==e)return;return p.default.platform===p.PLATFORMS.SMBI?h.default.IPHONE_LABEL_COLOR_PALETTE[e]:h.default.ANDROID_LABEL_COLOR_PALETTE[e]}if(this.color)return y(this.color)}},{key:"_find",value:function(e){return r.resolve({id:e})}},{key:"_triggerLabelUpdate",value:function(){this.name&&n(6705).default.trigger(`label_updated_${this.id}`)}},{key:"_handleLabelItemCollectionUpdate",value:function(){var e=this.labelItemCollection.filter((function(e){return e.parentType!==m.LabelItemParentType.Contact})).length;this.count=String(e)}}]),a}(f.default);function y(e){return`#${(parseInt(e,10)>>>0).toString(16).slice(-6)}`}g.Proxy="label";var E=(0,f.defineModel)(g);t.default=E},6705:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LabelCollection=t.LABEL_PROPERTIES=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(81506)),l=i(n(16525)),c=i(n(29754)),d=i(n(2205)),f=i(n(99842)),p=n(53615),h=n(80835),_=i(n(96486)),v=i(n(67294)),m=n(83180),g=i(n(60619)),y=i(n(34541)),E=i(n(93743)),S=i(n(68374)),b=n(14650),T=a(n(98569)),w=n(71701),A=i(n(89115)),C=i(n(17864)),O=n(64550),M=n(81172),I=n(48186),k=i(n(8643)),P=a(n(59502)),R=i(n(61110)),D=i(n(23306)),N=i(n(7860)),L=n(8498),x=i(n(22021)),U=Object.freeze({NAME:"name",COLOR:"color"});t.LABEL_PROPERTIES=U;var F=Object.freeze({UPDATING:"updating",SUCCEEDED:"succeeded",FAILED:"failed"}),G=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,o.default)(this,n),(e=t.call(this)).checksum=void 0,e.listenTo((0,u.default)(e),"remove",e.handleRemove),e}return(0,s.default)(n,[{key:"initializeAssociationsFromCache",value:function(e){e.forEach((function(e){var t=e.labelId,n=e.associationId,r=e.type;(0,I.addToLabelCollection)(n,[t],r===L.LabelAssociationType.Jid?M.LabelItemParentType.Chat:M.LabelItemParentType.Msg)}))}},{key:"addNewLabel",value:function(e,t){(0,O.logLabelOperationEvent)(k.default.LABEL_OPERATIONS.ADD,1,k.default.LABEL_TARGETS.LABEL);var n=D.default.createLabel(e,t),r=new m.ActionType(A.default.t(42,{labelName:e})),a=(0,m.genId)(),i=n.then((function(t){return 200===t.status?new m.ActionType(A.default.t(160,{labelName:e})):new m.ActionType(A.default.t(159,{labelName:e}))})).catch((function(){return __LOG__(3)`addingNewLabel dropped`,new m.ActionType(A.default.t(159,{labelName:e}))}));return y.default.openToast(v.default.createElement(m.ActionToast,{id:a,initialAction:r,pendingAction:i})),n}},{key:"removeAllLabelsMD",value:function(e){return this.addOrRemoveLabelsMD((e.labels||[]).map((function(e){return{type:"remove",id:e}})),[e])}},{key:"addOrRemoveLabelsMD",value:function(e,t){x.default.supportsFeature(x.default.F.MD_BACKEND)&&e.forEach((function(e){var n=e.id,r=e.type;t.forEach((function(e){var t=(0,I.getParentTypeFromModel)(e),a=e.id.toString();"add"===r?(0,I.addToLabelCollection)(a,[n],t):(0,I.removeLabelFromCollection)(a,n,t)}))}))}},{key:"addOrRemoveLabels",value:function(e,t){var n=this,r=(0,m.genId)(),a=new m.ActionType(A.default.t(39,{count:e.length,_plural:e.length})),i=(0,S.default)(e,t).then((function(){n.addOrRemoveLabelsMD(e,t)})).then((function(){return new m.ActionType(A.default.t(41,{count:e.length,_plural:e.length}))})).catch((function(){return __LOG__(3)`addingNewLabel dropped`,new m.ActionType(A.default.t(40))}));y.default.openToast(v.default.createElement(m.ActionToast,{id:r,initialAction:a,pendingAction:i}))}},{key:"deleteLabel",value:function(e){(0,O.logLabelOperationEvent)(k.default.LABEL_OPERATIONS.DELETE,1,k.default.LABEL_TARGETS.LABEL);var t=D.default.deleteLabel(e),n=this.get(e);if(n){var r=n.name,a=new m.ActionType(A.default.t(94,{labelName:r})),i=(0,m.genId)(),o=t.then((function(e){return 200===e.status?new m.ActionType(A.default.t(93,{labelName:r})):new m.ActionType(A.default.t(92,{labelName:r}))})).catch((function(){return __LOG__(3)`addingNewLabel dropped`,new m.ActionType(A.default.t(92,{labelName:r}))}));return y.default.openToast(v.default.createElement(m.ActionToast,{id:i,initialAction:a,pendingAction:o})),t}__LOG__(2)`deleteLabel - label does not exist`}},{key:"_getActionLabelUpdateString",value:function(e,t){switch(e){case U.NAME:return t===F.UPDATING?A.default.t(133):t===F.SUCCEEDED?A.default.t(135):A.default.t(134);case U.COLOR:return t===F.UPDATING?A.default.t(130):t===F.SUCCEEDED?A.default.t(132):A.default.t(131)}return""}},{key:"updateLabel",value:function(e,t){var n=this;(0,O.logLabelOperationEvent)(k.default.LABEL_OPERATIONS.EDIT,1,k.default.LABEL_TARGETS.LABEL);var r=D.default.editLabel(e.id,e.name,e.color),a=new m.ActionType(this._getActionLabelUpdateString(t,F.UPDATING)),i=(0,m.genId)(),o=r.then((function(e){return 200===e.status?new m.ActionType(n._getActionLabelUpdateString(t,F.SUCCEEDED)):new m.ActionType(n._getActionLabelUpdateString(t,F.FAILED))})).catch((function(){return __LOG__(3)`updatingLabel dropped`,new m.ActionType(n._getActionLabelUpdateString(t,F.FAILED))}));return y.default.openToast(v.default.createElement(m.ActionToast,{id:i,initialAction:a,pendingAction:o})),r}},{key:"getNewLabelColor",value:function(){return D.default.queryNextLabelColor().then((function(e){return e.labelColors[0].color})).catch((function(){}))}},{key:"getLabelColorPalette",value:function(){return this.labelColorPalette=this.labelColorPalette||(0,w.getSmbLabelPalette)(),this.labelColorPalette&&this.labelColorPalette.waVersion===E.default.phone.wa_version?r.resolve(this.labelColorPalette.colors):this._getColorPaletteLoop().then((function(e){var t=e.labelColors.map((function(e){return e.color}));return(0,w.setSmbLabelPalette)({colors:t,waVersion:E.default.phone.wa_version}),t})).catch((function(){}))}},{key:"_getColorPaletteLoop",value:function(){return(0,h.promiseLoop)((function(e,t,n){var a=(0,p.delayMs)(P.expBackoff(n,12e4,1e3,.1));return("CONNECTED"===N.default.stream?r.resolve():(0,R.default)(N.default,"change:stream",(function(){return"CONNECTED"===N.default.stream}))).then((function(){return D.default.queryLabelPalette().then((function(t){e(t)}))})).catchConditional((function(e){return!(e instanceof r.CancellationError)}),(function(e){return n>3||404===e?(__LOG__(3)`labels:loadLabelPalette:error ${String(e)}`,404===e?r.reject(new b.E404):r.reject(new T.GaveUpRetry(`Gave up loading label palette ${n} tries`))):a}))}),0)}},{key:"handleRemove",value:function(e){e.labelItemCollection.toArray().forEach((function(e){var t=e.parentId,n=e.parentType,r=e.labelId,a=(0,I.getParentCollection)(n).get(t);a&&(a.labels=_.default.remove(a.labels,(function(e){return e!==r})))}))}},{key:"onResume",value:function(){var e=this;this.filter((function(e){return e.hasObservers()})).forEach((function(t){e.find(t.id).catchType(b.WebdDrop,(function(){}))}))}},{key:"delete",value:function(){(0,l.default)((0,c.default)(n.prototype),"delete",this).call(this),delete this.checksum}},{key:"sync",value:function(e){if(!e||this.checksum!==e)return this.findQuery({}).catchTypes(b.WebdDrop,T.ProtoVersionUndefined,(function(){}))}},{key:"handle",value:function(e){var t;if(e.checksum&&this.updateChecksum(e.checksum),e.labels&&e.labels[0]&&e.labels[0].labelUpdates)return e.labels[0].labelUpdates.forEach((function(e){e.collection.forEach((function(n){n!==M.LabelItemParentType.Msg&&n!==M.LabelItemParentType.Chat||(t=!0);var r=e.id,a=(0,I.getParentCollection)(n).get(e.id);a&&(a.labels&&a.labels.forEach((function(t){e.labels.includes(t)||(0,I.removeLabelFromCollection)(r,t,n)})),a.labels=e.labels)}))})),void(t&&this.trigger("bulk_msg_chat_label_change"));var n=[],r=[];e.labels.forEach((function(e){"delete"===e.type?n.push(e.label):r.push(e.label)})),this.remove(n.map((function(e){return e.id}))),this.add(r,{merge:!0})}},{key:"_findQuery",value:function(){var e=this;return D.default.queryLabels().then((function(t){return t.checksum&&e.updateChecksum(t.checksum),t.labels}))}},{key:"_find",value:function(){return this._findQuery()}},{key:"updateChecksum",value:function(e){this.checksum=e}},{key:"getLabelsForModel",value:function(e,t){return this.filter((function(n){return n.labelItemCollection.get((0,I.createLabelItemId)(e,n.id,t))})).map((function(e){return e.id}))}}]),n}(g.default);t.LabelCollection=G,G.model=C.default,G.staleCollection=!0,G.resumeOnAvailable=!0;var B=new G;t.default=B},808:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=(n(81172),function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.parentType=(0,u.prop)(),e.parentId=(0,u.prop)(),e.labelId=(0,u.prop)(),e}return n}(u.default));l.Proxy="labelItem";var c=(0,u.defineModel)(l);t.default=c},57466:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LabelItemCollection=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),u=r(n(99842)),l=r(n(96486)),c=r(n(60619)),d=r(n(22021)),f=r(n(808)),p=n(48186),h=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;return(0,a.default)(this,n),e=t.call(this),d.default.supportsFeature(d.default.F.MD_BACKEND)&&(e.listenTo((0,o.default)(e),"add",e._handleAdd),e.listenTo((0,o.default)(e),"remove",e._handleRemove)),e}return(0,i.default)(n,[{key:"_handleAdd",value:function(e){this._handleChange(e,!0)}},{key:"_handleRemove",value:function(e){this._handleChange(e,!1)}},{key:"_handleChange",value:function(e,t){var n=(0,p.getParentCollection)(e.parentType).get(e.parentId);if(n){var r=n.labels||[];t?r.includes(e.labelId)||(n.labels=[e.labelId].concat(r)):n.labels=l.default.without(r,e.labelId)}}}]),n}(c.default);t.LabelItemCollection=h,h.model=f.default;var _=h;t.default=_},60619:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CACHE_POLICY",{enumerable:!0,get:function(){return _.CACHE_POLICY_TYPE}}),t.default=void 0;var o=i(n(81109)),s=i(n(34575)),u=i(n(93913)),l=i(n(81506)),c=i(n(16525)),d=i(n(29754)),f=i(n(2205)),p=i(n(99842)),h=i(n(96486)),_=n(54477),v=i(n(92937)),m=i(n(93743)),g=n(14650),y=a(n(98569)),E=n(71701),S=i(n(14094)),b=n(88828),T=a(n(7860)),w="QUERY",A="FIND",C="UPDATE",O=(new Object).toString(),M={id:"none",policy:_.CACHE_POLICY_TYPE.NONE},I=function(e){(0,f.default)(n,e);var t=(0,p.default)(n);function n(){var e;return(0,s.default)(this,n),(e=t.call(this))._inflight={},e._cachePolicy=(0,_.createCachePolicy)((0,l.default)(e),e.constructor.cachePolicy||M),e._staleCollection=e.constructor.staleCollection||!1,e._resumeOnAvailable=e.constructor.resumeOnAvailable||!1,(!0===e._staleCollection||(0,b.isFunction)(e.onResume))&&(e.listenTo(T.default,"change:stream",e._handleStreamChange),e.listenTo(T.default,"didResume",e._onResume),e._resumeOnAvailable&&e.listenTo(S.default,"change:available",(function(){S.default.available&&e._needsUpdate&&e._onResume()}))),e._cachePolicy.enableCaching(),e._cachePolicy.constructor.policy===_.CACHE_POLICY_TYPE.LOAD&&e.listenTo(m.default,"me_ready",e._updateFromCache),e}return(0,u.default)(n,[{key:"initializeFromCache",value:function(e){this.add(e)}},{key:"saveToCache",value:function(){if(m.default.shouldSaveToCache()){var e=this._cachePolicy.id;__LOG__(2)`baseCollection:saveToCache save: ${String(e)}`,(0,E.setCollection)(e,this.toJSON(),this._cachePolicy.constructor.policy===_.CACHE_POLICY_TYPE.IMMEDIATE)}}},{key:"add",value:function(e,t){var r=this;if(e){if(m.default.blockStoreAdds)throw new g.LogoutDrop("adding to store when blocking store adds");var a=Array.isArray(e)?e:[e];if(a.every((function(e){return e&&e.isState}))){var i=h.default.reject(a,(function(e){return r.get(e.id)}));return i.length&&(0,c.default)((0,d.default)(n.prototype),"add",this).call(this,i,t),a}}return(0,c.default)((0,d.default)(n.prototype),"add",this).call(this,e,t)}},{key:"findQuery",value:function(e,t){return this._query(w,e,t)}},{key:"find",value:function(e,t){return e?this._query(A,e,t):(__LOG__(4,void 0,new Error,!0)`Called find without an id`,SEND_LOGS("find-without-id"),r.reject("called find without an id"))}},{key:"update",value:function(e,t){return e?this._query(C,e,t):(__LOG__(4,void 0,new Error,!0)`Called update without an id`,SEND_LOGS("update-without-id"),r.reject("called update without an id"))}},{key:"handle",value:function(e){var t=this._handle(e.shift());if(this._staleCollection){var n=Array.isArray(t)?t:[t];h.default.compact(n).forEach((function(e){e.stale=!1}))}this.add(t,{merge:!0})}},{key:"gadd",value:function(e,t){if(this.modelClass.prototype.isIdType(e)){var n=this.get(e);return n||this.add({id:e},t)[0]}if(e&&e.id){var r=t||{};return r.merge=!0,this.add(e,r)[0]}throw new Error("gadd called without an id attr (id)")}},{key:"gaddUp",value:function(e){var t,n=this._staleCollection;if(this.modelClass.prototype.isIdType(e)){var r={stale:n,id:e};t=this.get(e)||this.add(r,{merge:!0})[0]}else e&&e.id&&(this.get(e.id)&&(n=!1),e=(0,o.default)({stale:n},e),t=this.add(e,{merge:!0})[0]);if(t){var a=t;return t.stale&&this.find(t.id).catchType(g.WebdDrop,(function(){})),a}throw new Error(".gaddUp called without an id attr (id)")}},{key:"delete",value:function(){this._inflight={},this.reset()}},{key:"isStateStale",value:function(e){var t=this.get(e);return!!t&&t.stale}},{key:"_handleResume",value:function(){switch(T.default.stream){case T.STREAM.DISCONNECTED:if(!this._staleCollection)return;this.forEach((function(e){e&&(e.stale=!0)}));break;case T.STREAM.RESUMING:case T.STREAM.SYNCING:case T.STREAM.CONNECTED:}}},{key:"_onResume",value:function(){(0,b.isFunction)(this.onResume)&&(this._resumeOnAvailable&&!S.default.available?this._needsUpdate=!0:(this.onResume(),this._needsUpdate=!1))}},{key:"_query",value:function(e,t,n){var a=this,i=(0,b.isString)(t)?t:t.toString();i===O&&(i=h.default.uniqueId("collection_query_"));var o=e===w?void 0:this.get(t),s="force-"+i;return(this._inflight[s]&&e===A||e===C)&&(i=s),this._inflight[i]?e===A&&o&&!o.stale?r.resolve(o):this._inflight[i]:!o||o&&o.stale||e===C?this._inflight[i]=this._serverQuery(e,t,n).finally((function(){delete a._inflight[i]})).catchType(g.LogoutDrop,(function(e){__LOG__(3)`LogoutDrop error: ${e.toString()}`})).catchConditional(b.isString,(function(e){__LOG__(2)`baseCollection:query query promise rejected: ${String(e)}`})).catchType(g.WebdDrop,(function(e){throw __LOG__(3)`WebdDrop error: ${e.toString()}`,e})):r.resolve(o)}},{key:"_serverQuery",value:function(e,t,n){var r,a=this;if(e===C)r=this._update(t);else if(e===A)r=this._find(t);else{var i=n&&n.logOnSend;r=this._findQuery(t,i)}return r.then((function(e){if(a._staleCollection){var t=Array.isArray(e)?e:[e];h.default.compact(t).forEach((function(e){void 0===e.stale&&(e.stale=!1)}))}var r;if(r=n&&n.set?a.set(e):a.add(e,{merge:!0}),Array.isArray(e))return r;if(r[0])return r[0];throw new y.ModelCreateError("Unknown",e)}))}},{key:"_update",value:function(e){return this._find(e)}},{key:"_handleStreamChange",value:function(){this._handleResume(),this._cachePolicy.constructor.policy===_.CACHE_POLICY_TYPE.LOAD&&this._updateFromCache()}},{key:"_updateFromCache",value:function(){var e=this._cachePolicy.id;this._cachePolicy.disableCaching(),m.default.shouldSaveToCache()&&(__LOG__(2)`baseCollection:initFromCache load: ${String(e)}`,this.initializeFromCache((0,E.getCollection)(e)),this._cachePolicy.enableCaching())}}]),n}(v.default);t.default=I},44800:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genMirrorMask=function(e){var t={},n=0,r=function(e){t[`change:${e}`]=n++};e.props&&Object.keys(e.props).forEach(r);e.session&&Object.keys(e.session).forEach(r);e.derived&&Object.keys(e.derived).forEach(r);return t},t.genBitMask=function(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[`change:${t[r]}`],i=Math.floor(a/32);c(n,i+1),n[i]|=1<<a%32}return n},t.default=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=r(n(96486));var u=function(){function e(t){(0,i.default)(this,e),this.state=t}return(0,o.default)(e,[{key:"destructor",value:function(){this.state.off("all",this.onGatherEvent,this)}},{key:"initListener",value:function(){this.state.on("all",this.onGatherEvent,this),this.masks=[],this.listeners=[],this.changeEvents=[]}},{key:"onGatherEvent",value:function(e){if("change"===e){if(!this.changeEvents.filter(Boolean).length)return;this.onChange(),this.changeEvents=[]}else{var t=this.state.mirrorMask[e];if(void 0===t)return;var n=t/32|0;c(this.changeEvents,n+1),this.changeEvents[n]|=1<<(t%32|0)}}},{key:"onChange",value:function(){var e=this.state,t=this.changeEvents;s.default.zip(this.masks,this.listeners).forEach((function(n){for(var r=(0,a.default)(n,2),i=r[0],o=r[1],s=Math.min(t.length,i.length),u=0;u<s;u++)if(t[u]&i[u]){var l=(0,a.default)(o,2),c=l[0],d=l[1];null!=c&&null!=d&&c(d,e);break}}))}},{key:"addListener",value:function(e,t,n){this.listeners||this.initListener(),this.masks.push(t),this.listeners.push([e,n])}},{key:"removeListener",value:function(e){for(var t=this.listeners,n=0;n<t.length;n++)t[n][0]===e&&(t[n][0]=null,t[n][1]=null,l(this.masks,n),l(t,n))}}]),e}();function l(e,t){e[t]=e[e.length-1],e.pop()}function c(e,t){if(!(t<=e.length))for(var n=t-e.length,r=0;r<n;r++)e.push(0)}t.default=u},56727:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.defineModel=function(e){var t=(0,y.convert)(e),n=(0,y.stateExtend)(T,t);if(e.Proxy){var r=(0,_.genMirrorMask)(t);n.prototype.mirrorMask=r,n.prototype.proxyName=e.Proxy,(0,E.default)(e.Proxy,t,r)}return n},Object.defineProperty(t,"prop",{enumerable:!0,get:function(){return y.prop}}),Object.defineProperty(t,"session",{enumerable:!0,get:function(){return y.session}}),Object.defineProperty(t,"derived",{enumerable:!0,get:function(){return y.derived}}),Object.defineProperty(t,"collection",{enumerable:!0,get:function(){return y.collection}}),t.default=void 0;var i=a(n(319)),o=a(n(59713)),s=a(n(63038)),u=a(n(81109)),l=a(n(34575)),c=a(n(93913)),d=a(n(78585)),f=a(n(2205)),p=a(n(99842)),h=a(n(96486)),_=r(n(44800)),v=a(n(34541)),m=n(14650),g=a(n(28681)),y=n(16242),E=a(n(82057)),S=n(88828),b=/^change:/,T=function(e){(0,f.default)(r,e);var t=(0,p.default)(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,l.default)(this,r),(n=t.call(this)).stale=(0,y.session)(!1),n.__fired=null,n.__changes=null,n.__initialized=!1,a._internalInitializationDoNotUse)return(0,d.default)(n);n.stale=e&&e.stale||n.getDefault("stale"),n.parent=a.parent,n.collection=a.collection,n._initDeriveds(),n._initCollections();var i=n.__defaults,o=i?(0,u.default)((0,u.default)({},i),e):e;return o&&!w(o)&&n.set(o,(0,u.default)({silent:!0},a)),n.initialize(),n.__initialized=!0,n}return(0,c.default)(r,[{key:"initialize",value:function(){if(this.collection&&this.id&&!this.collection.modelClass.prototype.isIdType(this.id))throw new Error(`Model id:${String(this.id)} is wrong type`);this._uiObservers=0,this.mirrorMask&&(this.mirror=new _.default(this))}},{key:"_refreshStaleModel",value:function(){if(this._uiObservers||!this.stale){if(!this.getCollection)throw new Error("base_model:_refreshStaleModel getCollection does not exist");this.getCollection().find(this.id).catch(m.WebdDrop,(function(){}))}}},{key:"incObservers",value:function(e){(this._uiObservers++,e)||n(67890).default.online&&this.stale&&(v.default.uiBusy?this.listenToOnce(v.default,"ui_idle",this._refreshStaleModel):this._refreshStaleModel())}},{key:"decObservers",value:function(){this._uiObservers>0&&this._uiObservers--,0===this._uiObservers&&this.stopListening(v.default,"ui_idle",this._refreshStaleModel)}},{key:"hasObservers",value:function(){return this._uiObservers>0}},{key:"addChild",value:function(e,t){var n={};n[e]=t,this.set(n,{silent:!0}),this.listenTo(t,"all",this._getCachedEventBubblingHandler(e))}},{key:"get",value:function(e){return this[e]}},{key:"set",value:function(e,t,n){var r=n;return"string"==typeof e?this._set(e,t,r):(r=t)&&r.merge?this._set(h.default.omitBy(e,h.default.isUndefined),r):this._set(e,r)}},{key:"_markChange",value:function(e){this.__initialized&&(this._getChanges().push(e),this.__fired&&(this.__fired[e]=!1))}},{key:"_set",value:function(e,t,n){for(var r=this,a=!!this.__changes,u=(0,S.isString)(e)?[(0,o.default)({},e,t),n]:[e,t],l=(0,s.default)(u,2),c=l[0],d=l[1],f=Object.keys(c).reduce((function(e,t){var n=r._setKV(t,c[t],d);return n&&e.push.apply(e,(0,i.default)(n)),e}),[]),p=0,h=function(){if(p++>5)throw new Error("Circular derived properties / event listeners");var e=r._topo;if(!e)throw new Error("_topo unexpectedly undefined");var t,n,a=(t=e,n=new Set(f),t.filter((function(e){return n.has(e)})));f=a.reduce((function(e,t,n){var o=r._setD(t,a.slice(n+1));return o&&e.push.apply(e,(0,i.default)(o)),e}),[])};f&&f.length>0;)h();if(!(d&&d.silent)&&this.hasUnfiredChanges()){for(var _=this.__fired={},v=this._getChanges(),m=v.length;v.length;){var g=v.shift();if(!_[g]){_[g]=!0;var y=this._definition[g].evt;(this.isListening(y)||this.isListening("all"))&&this.trigger(y,this,this[g])}}(m&&this.isListening("change")||this.isListening("all"))&&this.trigger("change",this)}return a||(this.__changes&&(this.__changes=null),this.__fired&&(this.__fired=null)),this}},{key:"_setKV",value:function(e,t,n){if(this._collections[e])this[e].set(t,n);else{var r=this._definition[e];if(r){if(r.attr===y.Attr.DERIVED)throw new Error(`Attempting to directly set derived property: ${e}`);var a=r.sk;if(t!==this[e]){this[a]=t,this._markChange(e);var i=this._deps;return i&&i[e]?i[e]:void 0}}else this[e]=t}}},{key:"_setD",value:function(e,t){var n,r,a=this._definition[e],i=a.sk,o=a.fn.call(this);if(this[i]!==o&&(this[i]=o,this._markChange(e),this._deps&&this._deps[e])){var s=(n=this._deps[e],r=new Set(t),n.filter((function(e){return!r.has(e)})));if(s.length)return s}}},{key:"hasUnfiredChanges",value:function(){var e=this.__fired,t=this.__changes;if(!t)return!1;if(!e)return!0;for(var n=0;n<t.length;n++)if(!e[t[n]])return!0;return!1}},{key:"_getChanges",value:function(){return this.__changes||(this.__changes=[])}},{key:"_initDeriveds",value:function(){var e=this;this.__derived.forEach((function(t){e[e._definition[t].sk]=y.INIT}))}},{key:"_initCollections",value:function(){var e=this;h.default.forOwn(this._collections,(function(t,n){e[n]=new t(null,{parent:e})}))}},{key:"unset",value:function(e,t){var n=Array.isArray(e)?e:[e];this.set(h.default.zipObject(n),t)}},{key:"clear",value:function(){this.unset([].concat((0,i.default)(this.__props),(0,i.default)(this.__session)))}},{key:"delete",value:function(){this.stopListening()}},{key:"reset",value:function(){this.set(this.__defaults)}},{key:"toJSON",value:function(){return this.serialize()}},{key:"serialize",value:function(){for(var e=this,t={},n=0;n<this.__props.length;n++)t[this.__props[n]]=this[this.__props[n]];return h.default.forOwn(this._collections,(function(n,r){t[r]=e[r].serialize()})),t}},{key:"getDefault",value:function(e){var t=this._definition[e];if(t){var n=t.default;return(0,S.isFunction)(n)?n():n}}},{key:"_getCachedEventBubblingHandler",value:function(e){return function(t,n,r){b.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],n,r):"change"===t&&this.trigger("change",this)}.bind(this)}}],[{key:"isIdType",value:function(e){return!(!this.allowedIds||!this.allowedIds.includes(e))||(this.idClass?e instanceof this.idClass:"string"==typeof e)}}]),r}(g.default);function w(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}t.default=T},58418:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CACHE_POLICY_TYPE=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(28681)),l={LOAD:"LOAD",IMMEDIATE:"IMMEDIATE",NONE:"NONE"};t.CACHE_POLICY_TYPE=l;var c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this))._collection=e,i._id=r,i}return(0,i.default)(n,[{key:"enableCaching",value:function(){}},{key:"disableCaching",value:function(){}},{key:"collection",get:function(){return this._collection}},{key:"id",get:function(){return this._id}}]),n}(u.default);t.default=c,c.policy=l.NONE},38342:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(96486)),c=r(n(58418)),d=a(n(22021)),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this,e,r.id))._trigger=r.trigger||"all",a._saveToCache=l.default.debounce(a.saveToCache,0),a}return(0,o.default)(n,[{key:"saveToCache",value:function(){d.default.supportsFeature(d.default.F.MD_BACKEND)}},{key:"enableCaching",value:function(){this.listenTo(this.collection,this._trigger,this._saveToCache)}},{key:"disableCaching",value:function(){this.stopListening(this.collection,this._trigger,this._saveToCache)}}]),n}(c.default);t.default=f,f.policy=c.CACHE_POLICY_TYPE.IMMEDIATE},54477:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createCachePolicy=function(e,t){switch(t.policy){case"LOAD":return new o.default(e,t);case"IMMEDIATE":return new i.default(e,t);case"NONE":return new s.default(e,t)}return new s.default(e,{id:"none",policy:"NONE"})},Object.defineProperty(t,"CACHE_POLICY_TYPE",{enumerable:!0,get:function(){return a.CACHE_POLICY_TYPE}});var a=n(58418),i=r(n(38342)),o=r(n(46844)),s=r(n(30616))},46844:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(96486)),c=r(n(58418)),d=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e,r){var a;return(0,i.default)(this,n),(a=t.call(this,e,r.id))._trigger=r.trigger||"all",a._delay=r.delay,a._saveToCache=l.default.debounce(a.saveToCache,a._delay),a}return(0,o.default)(n,[{key:"saveToCache",value:function(){this.collection.saveToCache()}},{key:"enableCaching",value:function(){this.listenTo(this.collection,this._trigger,this._saveToCache)}},{key:"disableCaching",value:function(){this.stopListening(this.collection,this._trigger,this._saveToCache)}}]),n}(c.default);t.default=d,d.policy=c.CACHE_POLICY_TYPE.LOAD},30616:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(58418)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){return(0,i.default)(this,n),t.call(this,e,r.id)}return n}(u.default);t.default=l,l.policy=u.CACHE_POLICY_TYPE.NONE},92937:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=n(87641),c=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,n),e=t.call(this),r.parent&&(e.parent=r.parent);var a=e.constructor,o=a.model,s=a.comparator;if(!o)throw new Error("Collection initialized without model!");return e.modelClass=o,s&&(e._comparator=s),e._reset(),e}return(0,o.default)(n,[{key:"add",value:function(e,t){var n;return n=Array.isArray(e)?e.slice():e?[e]:[],this.set(n,(0,a.default)({merge:!1,add:!0,remove:!1},t))}},{key:"set",value:function(e,t){if(!e)return __LOG__(3)`collection:set called with no models`,[];for(var n,r,i,o,s,u,l=(0,a.default)({add:!0,remove:!0,merge:!0},t),c=this._comparator&&!1!==l.sort,d=[],f=[],p={},h=l.add,_=l.merge,v=l.remove,m=null!=l.at?l.at:void 0,g=!(c||!h||!v)&&[],y=0,E=e.length;y<E;y++)if(o=e[y],this.isModel(o)&&(r=o),n=o.id){if(i=this.get(n)){var S=i;v&&(p[i.id.toString()]=!0),_&&(o=r&&o===r?r.attributes:o,S.set(o,l)),e[y]=S}else if(h){if(!(r=e[y]=this._prepareModel(o,l)))continue;var b=r;d.push(b),this._addReference(b)}if(r=i||r){var T=r;!g||r.id&&p[r.id.toString()]||g.push(T),p[T.id.toString()]=!0}}else __LOG__(3)`collection:set model has no id`;if(v){for(var w=0,A=this.length;w<A;w++){var C=r=this._models[w];p[r.id.toString()]||f.push(C)}f.length&&this.remove(f,(0,a.default)({},l))}if(d.length||g&&g.length)if(c&&(s=!0),"number"==typeof m)(u=this._models).splice.apply(u,[m,0].concat(d));else for(var O=g||d,M=0,I=O.length;M<I;M++)this._models.push(O[M]);if(s&&this.sort({silent:!0}),!l.silent){for(var k=0,P=d.length;k<P;k++)(r=d[k]).trigger?r.trigger("add",r,this,l):this.trigger("add",r,this,l);(s||g&&g.length)&&this.trigger("sort",this,l)}return e}},{key:"remove",value:function(e){for(var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Array.isArray(e)?e.slice():[e],s=[],u=0,l=o.length;u<l;u++)if((a=o[u])&&(r=a instanceof this.modelClass?a.id:a,t=s[u]=this.get(r))){var c=t;this._deIndex(t),n=this._models.indexOf(t),this._models.splice(n,1),i.silent||(i.index=n,c.trigger?c.trigger("remove",t,this,i):this.trigger("remove",t,this,i)),this._removeReference(c)}return s}},{key:"reset",value:function(){for(var e=0,t=this._models.length;e<t;e++)this._removeReference(this._models[e]);this._reset(),this.trigger("reset",this)}},{key:"sort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._comparator)throw new Error("Cannot sort without comparator");return this._models.sort(this._comparator.bind(this)),e.silent||this.trigger("sort",this,e),this}},{key:"replaceId",value:function(e,t){var n=this.get(e);n&&(this._removeFromIndex(e),n.set({id:t}),this._addIndex(n))}},{key:"reorderMutate",value:function(e,t){(0,l.arrayMoveMutate)(this._models,e,t)}},{key:"get",value:function(e){return this._index[e]}},{key:"assertGet",value:function(e){var t=this._index[e];return t||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Collection:assertGet no result")),t}},{key:"at",value:function(e){return this._models[e]}},{key:"serialize",value:function(){return this.map((function(e){return e.toJSON()}))}},{key:"toJSON",value:function(){return this.serialize()}},{key:"isModel",value:function(e){return e instanceof this.modelClass}},{key:"includes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t?e instanceof this.modelClass&&null!=this.get(e.id):this._models.includes(e,t)}},{key:"indexOf",value:function(e,t){return this._models.indexOf(e,t)}},{key:"lastIndexOf",value:function(e,t){return this._models.lastIndexOf(e,t)}},{key:"every",value:function(e){return this._models.every(e)}},{key:"some",value:function(e){return this._models.some(e)}},{key:"forEach",value:function(e){this._models.forEach(e)}},{key:"map",value:function(e){return this._models.map(e)}},{key:"filter",value:function(e){return this._models.filter(e)}},{key:"findFirst",value:function(e){return this._models.find(e)}},{key:"reduce",value:function(e,t){return this._models.reduce(e,t)}},{key:"slice",value:function(e,t){return this._models.slice(e,t)}},{key:"where",value:function(e){return this.filter((function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0}))}},{key:"head",value:function(){return this._models[0]}},{key:"last",value:function(){return this._models[this._models.length-1]}},{key:"toArray",value:function(){return this._models.slice()}},{key:"getModelsArray",value:function(){return this._models}},{key:"reorder",value:function(e,t){return(0,l.arrayMove)(this._models,e,t)}},{key:"_reset",value:function(){this._models=[],this._index={}}},{key:"_prepareModel",value:function(e,t){if(this.isModel(e))return e.collection||(e.collection=this),e;var n=(0,a.default)((0,a.default)({},t),{},{collection:this});try{return new this.modelClass(e,n)}catch(e){return void __LOG__(3)`collection:_prepareModel exception: ${e.stack}`}}},{key:"_addReference",value:function(e){this._addIndex(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)}},{key:"_removeReference",value:function(e){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)}},{key:"_addIndex",value:function(e){this._index[e.id]=e}},{key:"_deIndex",value:function(e){delete this._index[e.id]}},{key:"_removeFromIndex",value:function(e){this.get(e)&&delete this._index[e]}},{key:"_onModelEvent",value:function(e,t,n,r){var a=e.indexOf(":"),i=-1===a?e:e.slice(0,a);("add"!==i&&"remove"!==i||n===this)&&("destroy"===i&&this.remove(t,r),this.trigger.apply(this,arguments))}},{key:"length",get:function(){return this._models.length}},{key:"isCollection",get:function(){return!0}},{key:"models",get:function(){return this._models}}]),n}(r(n(28681)).default);t.default=c},16242:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t={default:e,type:v};return t},t.session=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t={default:e,type:m};return t},t.derived=function(e,t){return{fn:e,deps:t,type:g}},t.collection=function(e){return{val:e,type:y}},t.convert=function(e){var t=new e({},{_internalInitializationDoNotUse:!0}),n={name:e.name||"Unknown",props:{},session:{},derived:{},collections:{},isIdType:e.isIdType};e.Collection&&(n.Collection=e.Collection);e.idClass&&(n.idClass=e.idClass);e.allowedIds&&(n.allowedIds=e.allowedIds);var r=new Set(["constructor"]),a=new Set(["collection","parent","__changes","__fired","__initialized"]);(function(e){var t=[];for(var n in e)"function"!=typeof e[n]&&t.push([n,e[n]]);return t})(t).forEach((function(t){var i=(0,u.default)(t,2),o=i[0],s=i[1];if(!a.has(o))switch(s.type){case v:n.props[o]=E(s);break;case m:n.session[o]=E(s);break;case g:n.derived[o]=c.default.omit(s,"type"),r.add(s.fn.name);break;case y:n.collections[o]=s.val;break;default:throw new Error(`Invalid defineModel Class type for ${e.name}:${o}.`)}}));var i=function(e){var t={},n=Object.getPrototypeOf({}),r=e;Object.getOwnPropertyNames(r).forEach((function(e){"function"==typeof r[e]&&(t[e]=r[e])}));for(;(r=Object.getPrototypeOf(r))&&r!==n;)Object.getOwnPropertyNames(r).forEach((function(e){e in t||(t[e]=r[e])}));return t}(t);return r.forEach((function(e){delete i[e]})),Object.assign(n,i),n},t.stateExtend=function(e,t){var n=(0,l.default)(t.name,"protoDef.name");delete t.name;var r=function(e,t){return(0,a.default)({},t,function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return n}(e))[t]}(e,n),u=r.prototype,f=u.__props=[],_=u.__session=[],v=u.__derived=[],m=u._collections={},g=u._definition={},y=u._derived={};c.default.forOwn(t.props,(function(e,t){f.push(t),b(u,t,e,h.PROP)})),c.default.forOwn(t.session,(function(e,t){_.push(t),b(u,t,e,h.SESSION)})),c.default.forOwn(t.derived,(function(e,t){v.push(t),function(e,t,n){var r=S(t),a=n.fn;e._definition[t]=e._derived[t]={sk:r,evt:"change:"+t,attr:h.DERIVED,fn:a,deps:n.deps},Object.defineProperty(e,t,{get:function(){var e=this[r];if(e!==p)return e;var t=a.call(this);return this[r]=t,t},set:function(){throw new TypeError(`'${t}' is a derived property, it can't be set directly.`)}})}(u,t,e)})),c.default.forOwn(t.collections,(function(e,t){m[t]=e})),Object.assign(u,c.default.omit(t,["props","session","derived","collections"]));var E=f.concat(_),T=E.length;Object.defineProperties(u,{attributes:{get:function(){for(var e={},t=0;t<T;++t)e[E[t]]=this[E[t]];return e}},isState:{get:function(){return!0},set:function(){throw new Error("attempt to set isState")}}});for(var w={},A=0;A<T;A++){var C=E[A];"default"in g[C]&&(w[C]=p)}c.default.isEmpty(w)||(u.__defaults=w);if(v.length){var O=[],M={},I={};c.default.forOwn(y,(function(e,t){I[t]=!0,c.default.forOwn(e.deps,(function(e){I[e]=!0,(M[e]||(M[e]=[])).push(t),O.push([t,e])}))})),O.length&&(u._deps=M,u._topo=d.default.array(Object.keys(I),O).reverse())}return r},t.NO_DEFAULT_VALUE=t.Attr=t.INIT=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(2205)),s=r(n(99842)),u=r(n(63038)),l=r(n(91080)),c=r(n(96486)),d=r(n(94633)),f=n(88828),p={sentinel:"DEFAULT VALUE PLACEHOLDER"};t.INIT=p;var h={PROP:"PROP",SESSION:"SESSION",DERIVED:"DERIVED"};t.Attr=h;var _=Symbol("NO_DEFAULT_VALUE");t.NO_DEFAULT_VALUE=_;var v="Props",m="Session",g="Derived",y="Collection";function E(e){var t=e.default;return t===_?{}:{default:t}}function S(e){return"__x_"+e}function b(e,t,n,r){if(!c.default.isObject(n))throw new Error("Invalid Prop/Session definition.");var a={sk:S(t),evt:`change:${t}`,attr:r};void 0!==n.default&&(a.default=n.default),e._definition[t]=a;var i=(0,f.isFunction)(a.default);if(null!=a.default&&!i){if(Array.isArray(a.default))throw new Error("Do not return mutable types as default values as they are shared. Type: Array provided.");if(c.default.isObject(a.default))throw new Error("Do not return mutable types as default values as they are shared. Type: $FlowFixMeObjectType provided.")}var o=a.sk;Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){var e=this[o];return e!==p?e:i?this[o]=a.default():a.default}})}},82057:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProxyStates=void 0;var a=r(n(319)),i=r(n(6479)),o={};t.ProxyStates=o;t.default=function(e,t,n){var r=t.props,s=t.session,u=t.collections,l=t.derived,c=(0,i.default)(t,["props","session","collections","derived"]),d=function(e){this.$ProxyState$state=e},f={};[r,s,u,l].forEach((function(e){e&&Object.keys(e).forEach((function(e){f[e]={get:function(){return __LOG__(4,void 0,new Error,!0)`Cannot read proxy property "${e}" created in <${this.$ProxyState$ComponentName}/>. Make sure it is in your list of concerns.`,SEND_LOGS("Invalid ProxyState Access"),this.$ProxyState$state[e]},set:function(t){__LOG__(4,void 0,new Error,!0)`Cannot write proxy property "${e}" created in <${this.$ProxyState$ComponentName}/>. Make sure it is in your list of concerns.`,SEND_LOGS("Invalid ProxyState Write"),this.$ProxyState$state[e]=t}}}))})),f.proxyName={value:e},f.mirrorMask={value:n},f.isProxyOf={value:function(e){return this.$ProxyState$state===e}},["set","get"].concat((0,a.default)(Object.keys(c))).forEach((function(e){f[e]={value:function(){var t=this.$ProxyState$state;return t[e].apply(t,arguments)}}})),(d.prototype=Object.create(null,f)).constructor=d,o[e]=d}},34724:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=i(n(67294)),p=n(83180),h=a(n(56727)),_=i(n(26671)),v=i(n(34541)),m=n(14650),g=a(n(98569)),y=n(71701),E=i(n(89115)),S=i(n(35749)),b=i(n(23306)),T=i(n(12717)),w=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).id=(0,h.prop)(),e.duration=(0,h.prop)(),e.participants=(0,h.collection)(S.default),e.active=(0,h.session)(!1),e.keepAliveTimer=(0,h.session)(),e.stopPromise=(0,h.session)(),e}return(0,s.default)(a,[{key:"initialize",value:function(){var e=this;(0,u.default)((0,l.default)(a.prototype),"initialize",this).call(this),this.listenTo(this.participants,"remove reset",(function(){e.hasParticipants()||e.delete()}));var t=_.default.get(this.id);t&&!t.liveLocation&&(t.liveLocation=this)}},{key:"delete",value:function(){(0,u.default)((0,l.default)(a.prototype),"delete",this).call(this),this.stopViewingMap(),this.participants.delete(),this.getCollection().remove(this.id);var e=_.default.get(this.id);e&&(e.liveLocation=void 0)}},{key:"hasParticipants",value:function(){return this.participants.length>0}},{key:"startViewingMap",value:function(){this.active||(this.active=!0,this._updateLiveLocations(),this._startKeepAlive())}},{key:"stopViewingMap",value:function(){this.active&&(this.active=!1,this._pauseLiveLocations(),this._stopKeepAlive())}},{key:"userHasLiveLocation",value:function(e){return!!this.participants.get(e)}},{key:"iHaveLiveLocation",value:function(){return this.userHasLiveLocation((0,y.getMaybeMeUser)())}},{key:"stopMyLiveLocation",value:function(e){var t=this;if(!this.iHaveLiveLocation())return r.reject(new g.ActionError);if(this.stopPromise)return this.stopPromise;var n=this.stopPromise=b.default.disableLiveLocation(this.id),a=new p.ActionType(E.default.t(140)),i=e||(0,p.genId)(),o=n.then((function(e){return 200===e.status?new p.ActionType(E.default.t(139)):e.status>=400?new p.ActionType(E.default.t(136)):void 0})).catch((function(){return __LOG__(3)`models:liveLocation:disableLiveLocation dropped`,new p.ActionType(E.default.t(136),{actionText:E.default.t(201),actionHandler:t.stopMyLiveLocation.bind(t,i)})}));return v.default.openToast(f.default.createElement(p.ActionToast,{id:i,initialAction:a,pendingAction:o})),n.then((function(e){if(200===e.status&&!e._duplicate){var n=t.participants.get((0,y.getMaybeMeUser)());n&&n.disable()}})).finally((function(){t.stopPromise=null}))}},{key:"_updateLiveLocations",value:function(){this.getCollection().update(this.id).catch((function(){}))}},{key:"_pauseLiveLocations",value:function(){b.default.unsubscribeLiveLocation(this.id).catchType(m.WebdDrop,(function(){}))}},{key:"_sendKeepAlive",value:function(){b.default.subscribeLiveLocation(this.id,!1).catchType(m.WebdDrop,(function(){}))}},{key:"_startKeepAlive",value:function(){if(null==this.keepAliveTimer){var e=this.duration;null!=e&&0!==e&&(this.keepAliveTimer=window.setInterval(this._sendKeepAlive.bind(this),1e3*e))}}},{key:"_stopKeepAlive",value:function(){null!=this.keepAliveTimer&&(window.clearInterval(this.keepAliveTimer),this.keepAliveTimer=null)}},{key:"getCollection",value:function(){return n(90481).default}}]),a}(h.default);w.Proxy="liveLocation",w.idClass=T.default;var A=(0,h.defineModel)(w);t.default=A},90481:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LiveLocationCollection=void 0;var i=a(n(81109)),o=a(n(34575)),s=a(n(93913)),u=a(n(2205)),l=a(n(99842)),c=a(n(60619)),d=a(n(79140)),f=a(n(34263)),p=a(n(48629)),h=n(14650),_=a(n(34724)),v=n(88828),m=a(n(23306)),g=a(n(12717)),y=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"_find",value:function(e){var t=this;return g.default.isUser(e)||g.default.isGroup(e)?m.default.subscribeLiveLocation(e,!0).then((function(n){if(n.status&&n.status>=400)return 499===n.status?__LOG__(2)`liveLocation:subscribe query not implemented on the phone`:__LOG__(3)`model:LiveLocation:_find error ${n.status}`,r.reject(n.status);var a=(0,v.isNumber)(n.duration)?n.duration:void 0,o=n.participants?n.participants.map((function(e){return(0,i.default)((0,i.default)({},t._extractLocationFields(e)),{},{id:e.id,expiration:0===e.expiration?1/0:e.expiration})})):[];return{id:e,duration:a,participants:o}})):r.reject(new Error("invalid wid for live location: "+e))}},{key:"getActive",value:function(e){var t=this;return g.default.isUser(e)||g.default.isGroup(e)?m.default.queryActiveLiveLocation(e).then((function(n){if(n.status&&n.status>=400)return 499===n.status?__LOG__(2)`liveLocation:participant query not implemented on the phone`:__LOG__(3)`model:LiveLocation:getActive error ${n.status}`,r.reject(n.status);if(n.participants&&n.participants.length){var a=n.participants.map((function(e){return{id:e.id,expiration:0===e.expiration?1/0:e.expiration}}));t.add({id:e,participants:a},{merge:!0})}})).catchType(h.WebdDrop,(function(){})):r.reject(new Error("invalid wid for live location: "+e))}},{key:"onResume",value:function(){var e=this;this.filter((function(e){return e.active&&e.hasParticipants()})).forEach((function(t){e.update(t.id)}))}},{key:"handle",value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){switch(e.type){case"update":var n=t._extractLocationFields(e),r=p.default.get(e.jid);r&&r.liveLocations&&r.liveLocations.forEach((function(e){return e.set(n)}));break;case"disable":var a=t.get(e.chat);if(a){var i=a.participants.get(e.jid);i&&(e.seq>i.sequence||-1===e.seq)&&i.disable()}break;default:__LOG__(3)`models:liveLocation:handle unknown type: ${e.type}`}})):__LOG__(3)`models:liveLocation:handle unrecognized payload`}},{key:"processMsg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.type===f.default.MSG_TYPE.LOCATION&&e.isLive||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("collection:liveLocation trying to process non live-location msg"));var n=e.id.remote,r=e.lat,a=e.lng,i=e.accuracy,o=e.speed,s=e.degrees,u=e.sequence,l=e.comment,c=e.shareDuration,p=e.t;if(p&&c){var h=p+c;if(!(h<=d.default.globalUnixTime())){var _={id:e.sender,lat:r,lng:a,accuracy:i,speed:o,degrees:s,sequence:u,comment:l,expiration:h,lastUpdated:p,msg:e};-1===u&&delete _.sequence;var v=this.get(n);if(v){var m=v.participants.get(_.id);if(t)return void(m&&m.lastUpdated<=_.lastUpdated&&m.set(_));if(m&&v.participants.removeParticipant(m),v.hasParticipants())return void v.participants.add(_)}this.add({id:n,participants:[_]})}}}},{key:"removeMsg",value:function(e){e.type===f.default.MSG_TYPE.LOCATION&&e.isLive||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("collection:liveLocation trying to remove non live-location msg"));var t=e.id.remote,n=e.sender,r=this.get(t);r&&r.participants.remove(n)}},{key:"_extractLocationFields",value:function(e){return void 0===e.lat||void 0===e.lng?{}:{lastUpdated:d.default.globalUnixTime()-e.elapsed,lat:e.lat,lng:e.lng,accuracy:e.accuracy,speed:e.speed,degrees:e.degrees,comment:e.comment}}}]),n}(c.default);t.LiveLocationCollection=y,y.model=_.default,y.staleCollection=!0,y.resumeOnAvailable=!0;var E=new y;t.default=E},99192:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(1073)),f=r(n(56727)),p=a(n(79140)),h=a(n(48629)),_=n(71701),v=n(33258),m=n(88828),g=a(n(12717)),y=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,f.prop)(),e.msg=(0,f.prop)(),e.lat=(0,f.prop)(),e.lng=(0,f.prop)(),e.accuracy=(0,f.prop)(),e.speed=(0,f.prop)(),e.degrees=(0,f.prop)(),e.sequence=(0,f.prop)(),e.comment=(0,f.prop)(),e.expiration=(0,f.prop)(),e.lastUpdated=(0,f.prop)(),e.contact=(0,f.session)(),e.expireTimerId=(0,f.session)(),e.disabled=(0,f.session)(!1),e.isMe=(0,f.derived)(e._isMe,["id"]),e.valid=(0,f.derived)(e._valid,["lat","lng"]),e}return(0,o.default)(n,[{key:"_isMe",value:function(){return this.id.equals((0,_.getMaybeMeUser)())}},{key:"_valid",value:function(){return t=this.lat,(0,m.isNumber)(t)&&t>=-90&&t<=90&&(e=this.lng,(0,m.isNumber)(e)&&e>=-180&&e<=180);var e,t}},{key:"initialize",value:function(){(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.addChild("contact",h.default.gadd(this.id)),(0,v.addLiveLocation)(this.contact,this),this.listenTo(this,"change:expiration",this._setExpireTimer),this._setExpireTimer()}},{key:"delete",value:function(){(0,s.default)((0,u.default)(n.prototype),"delete",this).call(this),this._disableMsg(),(0,v.removeLiveLocation)(this.contact,this),this._clearExpireTimer()}},{key:"remainingTime",value:function(){return this.expiration-p.default.globalUnixTime()}},{key:"elapsedTime",value:function(){return p.default.globalUnixTime()-this.lastUpdated}},{key:"disable",value:function(){this.disabled=!0}},{key:"_disableMsg",value:function(){var e=this.msg;e&&(e.shareDuration=p.default.globalUnixTime()-e.t-1)}},{key:"_setExpireTimer",value:function(){this.expiration&&(this.remainingTime()<=0?this._expire():this.expireTimerId=d.default.setGlobalTimeout(this._expire.bind(this),1e3*this.expiration,this.expireTimerId))}},{key:"_clearExpireTimer",value:function(){d.default.clearTimeout(this.expireTimerId),this.expireTimerId=null}},{key:"_expire",value:function(){this.disable()}}]),n}(f.default);y.Proxy="liveLocationParticipant",y.idClass=g.default;var E=(0,f.defineModel)(y);t.default=E},35749:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),u=r(n(99842)),l=r(n(60619)),c=r(n(34612)),d=n(71701),f=r(n(99192)),p=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).listenTo((0,o.default)(e),"change:disabled",(function(t){t.disabled&&e.removeParticipant(t)})),e}return(0,i.default)(n,[{key:"delete",value:function(){var e=this;this.forEach((function(t){return e.removeParticipant(t)}))}},{key:"validLocations",value:function(){return this.filter((function(e){return e.valid}))}},{key:"removeParticipant",value:function(e){this.remove(e),e.delete()}}]),n}(l.default);t.default=p,p.model=f.default,p.comparator=function(e,t){var n=(0,d.getMaybeMeUser)();return e.contact.id.equals(n)?-1:t.contact.id.equals(n)?1:(0,c.default)(e.contact,t.contact)}},87189:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isFocused=(0,d.session)(!0),e}return(0,o.default)(n,[{key:"initialize",value:function(){var e,t;(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),null===(e=window.Native)||void 0===e||e.addListener("BrowserWindow:focus",this._onFocus),null===(t=window.Native)||void 0===t||t.addListener("BrowserWindow:blur",this._onBlur)}},{key:"delete",value:function(){var e,t;null===(e=window.Native)||void 0===e||e.removeListener("BrowserWindow:focus",this._onFocus),null===(t=window.Native)||void 0===t||t.removeListener("BrowserWindow:blur",this._onBlur),(0,s.default)((0,u.default)(n.prototype),"delete",this).call(this)}},{key:"_onFocus",value:function(){this.isFocused=!0}},{key:"_onBlur",value:function(){this.isFocused=!1}}]),n}(d.default);f.Proxy="mainWindowState";var p=new((0,d.defineModel)(f));t.default=p},16551:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createProductInquiry=function(e,t,n,r){var a=function(e){return new ie(e)}({ack:C.default.ACK.CLOCK,id:new K.default({id:"product_inquiry",remote:t,fromMe:!0}),from:t,t:T.default.globalUnixTime(),type:re.PRODUCT,title:e.name,description:e.description,businessOwnerJid:t.toString({legacy:!0}),productId:e.id.toString(),url:e.url,productImageCount:e.productImageCollection.length,body:n.preview&&n.preview._b64,currencyCode:e.currency,priceAmount1000:e.priceAmount1000,salePriceAmount1000:e.salePriceAmount1000,sessionId:r});return a.mediaData.set(n),a},t.default=t.TYPE=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(63038)),l=i(n(34575)),c=i(n(93913)),d=i(n(16525)),f=i(n(29754)),p=i(n(2205)),h=i(n(99842)),_=n(19087),v=n(11365),m=a(n(56678)),g=i(n(91080)),y=n(31988),E=i(n(96486)),S=a(n(56727)),b=n(47792),T=i(n(79140)),w=i(n(34541)),A=i(n(93743)),C=i(n(34263)),O=i(n(48629)),M=(n(41150),n(676)),I=i(n(8513)),k=n(43179),P=i(n(3130)),R=n(71701),D=n(87847),N=i(n(22021)),L=i(n(89115)),x=n(48186),U=n(42810),F=a(n(46515)),G=a(n(16952)),B=i(n(28719)),j=n(87261),Y=i(n(8643)),K=i(n(5315)),W=a(n(81452)),V=n(80877),H=n(79603),$=n(67298),z=i(n(63056)),q=n(88828),J=n(30564),Q=n(98593),X=n(38210),Z=n(77215),ee=i(n(61110)),te=i(n(12717)),ne=i(n(78422)),re=C.default.MSG_TYPE;t.TYPE=re;var ae=function(e){(0,p.default)(i,e);var t,a=(0,h.default)(i);function i(){var e;(0,l.default)(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).id=(0,S.prop)(),e.rowId=(0,S.prop)(),e.body=(0,S.prop)(),e.type=(0,S.prop)(),e.subtype=(0,S.prop)(),e.t=(0,S.prop)(),e.notifyName=(0,S.prop)(),e.from=(0,S.prop)(),e.to=(0,S.prop)(),e.author=(0,S.prop)(),e.self=(0,S.prop)("in"),e.ack=(0,S.prop)(),e.invis=(0,S.prop)(),e.isNewMsg=(0,S.prop)(),e.star=(0,S.prop)(!1),e.recvFresh=(0,S.prop)(),e.caption=(0,S.prop)(),e.interactiveAnnotations=(0,S.prop)(),e.clientUrl=(0,S.prop)(),e.loc=(0,S.prop)(),e.lat=(0,S.prop)(),e.lng=(0,S.prop)(),e.isLive=(0,S.prop)(),e.accuracy=(0,S.prop)(),e.speed=(0,S.prop)(),e.degrees=(0,S.prop)(),e.comment=(0,S.prop)(),e.sequence=(0,S.prop)(),e.shareDuration=(0,S.prop)(),e.finalLat=(0,S.prop)(),e.finalLng=(0,S.prop)(),e.finalAccuracy=(0,S.prop)(),e.finalThumbnail=(0,S.prop)(),e.finalSpeed=(0,S.prop)(),e.finalDegrees=(0,S.prop)(),e.finalTimeOffset=(0,S.prop)(),e.deprecatedMms3Url=(0,S.prop)(),e.directPath=(0,S.prop)(),e.mimetype=(0,S.prop)(),e.duration=(0,S.prop)(),e.filehash=(0,S.prop)(),e.encFilehash=(0,S.prop)(),e.size=(0,S.prop)(),e.filename=(0,S.prop)(),e.streamingSidecar=(0,S.prop)(),e.mediaKey=(0,S.prop)(),e.mediaKeyTimestamp=(0,S.prop)(),e.pageCount=(0,S.prop)(),e.isGif=(0,S.prop)(),e.gifAttribution=(0,S.prop)(),e.isViewOnce=(0,S.prop)(),e.streamable=(0,S.prop)(),e.width=(0,S.prop)(),e.height=(0,S.prop)(),e.thumbnailDirectPath=(0,S.prop)(),e.thumbnailSha256=(0,S.prop)(),e.thumbnailEncSha256=(0,S.prop)(),e.thumbnailHeight=(0,S.prop)(),e.thumbnailWidth=(0,S.prop)(),e.scanLengths=(0,S.prop)(),e.scansSidecar=(0,S.prop)(),e.isFromTemplate=(0,S.prop)(!1),e.devicesAdded=(0,S.prop)(),e.devicesRemoved=(0,S.prop)(),e.isThisDeviceAdded=(0,S.prop)(),e.firstFrameLength=(0,S.prop)(),e.firstFrameSidecar=(0,S.prop)(),e.isAnimated=(0,S.prop)(),e.canonicalUrl=(0,S.prop)(),e.matchedText=(0,S.prop)(),e.thumbnail=(0,S.prop)(),e.thumbnailHQ=(0,S.prop)(),e.richPreviewType=(0,S.prop)(),e.doNotPlayInline=(0,S.prop)(),e.title=(0,S.prop)(),e.description=(0,S.prop)(),e.businessOwnerJid=(0,S.prop)(),e.productId=(0,S.prop)(),e.currencyCode=(0,S.prop)(),e.priceAmount1000=(0,S.prop)(),e.salePriceAmount1000=(0,S.prop)(),e.retailerId=(0,S.prop)(),e.url=(0,S.prop)(),e.productImageCount=(0,S.prop)(),e.sessionId=(0,S.prop)(),e.recipients=(0,S.prop)(),e.broadcast=(0,S.prop)(),e.quotedMsg=(0,S.prop)(),e.quotedStanzaID=(0,S.prop)(),e.quotedRemoteJid=(0,S.prop)(),e.quotedParticipant=(0,S.prop)(),e.mentionedJidList=(0,S.prop)(),e.footer=(0,S.prop)(),e.hydratedButtons=(0,S.prop)(),e.buttons=(0,S.prop)(),e.selectedId=(0,S.prop)(),e.selectedIndex=(0,S.prop)(),e.multicast=(0,S.prop)(),e.urlText=(0,S.prop)(),e.urlNumber=(0,S.prop)(),e.clearMedia=(0,S.prop)(),e.isVcardOverMmsDocument=(0,S.prop)(!1),e.vcardList=(0,S.prop)(),e.vcardFormattedName=(0,S.prop)(),e.protocolMessageKey=(0,S.prop)(),e.templateParams=(0,S.prop)(),e.textColor=(0,S.prop)(),e.backgroundColor=(0,S.prop)(),e.font=(0,S.prop)(),e.isForwarded=(0,S.prop)(!1),e.forwardingScore=(0,S.prop)(),e.labels=(0,S.prop)(),e.paymentCurrency=(0,S.prop)(),e.paymentAmount1000=(0,S.prop)(),e.paymentMessageReceiverJid=(0,S.prop)(),e.paymentTransactionTimestamp=(0,S.prop)(),e.paymentStatus=(0,S.prop)(),e.paymentTxnStatus=(0,S.prop)(),e.paymentNoteMsg=(0,S.prop)(),e.paymentRequestMessageKey=(0,S.prop)(),e.paymentExpiryTimestamp=(0,S.prop)(),e.ephemeralStartTimestamp=(0,S.prop)(),e.ephemeralDuration=(0,S.prop)(),e.ephemeralSettingTimestamp=(0,S.prop)(),e.ephemeralOutOfSync=(0,S.prop)(),e.ephemeralSharedSecret=(0,S.prop)(),e.disappearingModeInitiator=(0,S.prop)(),e.bizPrivacyStatus=(0,S.prop)(),e.privacyModeWhenSent=(0,S.prop)(),e.verifiedBizName=(0,S.prop)(),e.inviteCode=(0,S.prop)(),e.inviteCodeExp=(0,S.prop)(),e.inviteGrp=(0,S.prop)(),e.inviteGrpName=(0,S.prop)(),e.inviteGrpJpegThum=(0,S.prop)(),e.sellerJid=(0,S.prop)(),e.message=(0,S.prop)(),e.orderTitle=(0,S.prop)(),e.itemCount=(0,S.prop)(),e.orderId=(0,S.prop)(),e.surface=(0,S.prop)(),e.status=(0,S.prop)(),e.token=(0,S.prop)(),e.totalAmount1000=(0,S.prop)(),e.totalCurrencyCode=(0,S.prop)(),e.historySyncMetaData=(0,S.prop)(),e.mdDowngrade=(0,S.prop)(),e.isSendFailure=(0,S.prop)(),e.appStateSyncKeyShare=(0,S.prop)(),e.appStateSyncKeyRequest=(0,S.prop)(),e.appStateFatalExceptionNotification=(0,S.prop)(),e.broadcastParticipants=(0,S.prop)(),e.broadcastEphSettings=(0,S.prop)(),e.broadcastId=(0,S.prop)(),e.ctwaContext=(0,S.prop)(),e.list=(0,S.prop)(),e.listResponse=(0,S.prop)(),e.productListItemCount=(0,S.prop)(),e.productHeaderImageRejected=(0,S.prop)(!1),e.sendDeferred=(0,S.session)(),e.local=(0,S.session)(),e.search=(0,S.session)(),e.msgChunk=(0,S.session)(),e.phoneUploading=(0,S.session)(),e.startOfDay=(0,S.session)(),e.startOfDaySkew=(0,S.session)(),e._quotedMsgObj=(0,S.session)(),e.isQuotedMsgAvailable=(0,S.session)(!0),e.senderObj=(0,S.session)(),e.mediaData=(0,S.session)(),e.forwardedFromWeb=(0,S.session)(!1),e.isDynamicReplyButtonsMsg=(0,S.prop)(!1),e.dynamicReplyButtons=(0,S.prop)(),e.replyButtons=(0,S.prop)(),e.buttonsResponse=(0,S.prop)(),e.selectedButtonId=(0,S.prop)(),e.interactiveMessage=(0,S.prop)(),e.isMdHistoryMsg=(0,S.prop)(!1),e._links=(0,S.session)((function(){return[]})),e._headerLinks=(0,S.session)((function(){return[]})),e._footerLinks=(0,S.session)((function(){return[]})),e.linksIndexParsed=(0,S.session)(0),e._waitForPhoneUploadPromise=(0,S.session)(),e.chat=(0,S.derived)(e._chat),e.hasTemplateButtons=(0,S.derived)(e._hasTemplateButtons,["buttons"]),e.ephemeralExpirationTimestamp=(0,S.derived)(e._ephemeralExpirationTimestamp,["t","subtype","ephemeralStartTimestamp","ephemeralDuration"]),e.isEphemeral=(0,S.derived)(e._isEphemeral,["ephemeralDuration","type","subtype"]),e.isQuickReply=(0,S.derived)(e._isQuickReply,["buttons"]),e.isFutureproof=(0,S.derived)(e._isFutureproof,["type","subtype"]),e.isGroupMsg=(0,S.derived)(e._isGroupMsg),e.isStatusV3=(0,S.derived)(e._isStatusV3),e.isPSA=(0,S.derived)(e._isPSA),e.isRTL=(0,S.derived)(e._isRTL,["dir"]),e.asProductInquiry=(0,S.derived)(e._asProductInquiry),e.statusV3TextBg=(0,S.derived)(e._statusV3TextBg),e.isSentByMe=(0,S.derived)(e._isSentByMe),e.isSentByMeFromWeb=(0,S.derived)(e._isSentByMeFromWeb,["isUserCreatedType"]),e.isInternational=(0,S.derived)(e._isInternational),e.isNotification=(0,S.derived)(e._isNotification,["type","subtype"]),e.asGroupNotification=(0,S.derived)(e._asGroupNotification,["type"]),e.asBroadcastNotification=(0,S.derived)(e._asBroadcastNotification,["type"]),e.isBizNotification=(0,S.derived)(e._isBizNotification,["type","subtype"]),e.asProduct=(0,S.derived)(e._asProduct,["type"]),e.asAlbumAsset=(0,S.derived)(e._asAlbumAsset,["type","isNotification","caption","isForwarded","asRevoked","isGif","quotedMsg","ctwaContext","isViewOnce"]),e.asGroupedSticker=(0,S.derived)(e._asGroupedSticker,["type","isNotification","asRevoked","quotedMsg","ctwaContext"]),e.isMedia=(0,S.derived)(e._isMedia,["type"]),e.asDoc=(0,S.derived)(e._asDoc,["type"]),e.asImage=(0,S.derived)(e._asImage,["type"]),e.asVideo=(0,S.derived)(e._asVideo,["type"]),e.asMms=(0,S.derived)(e._asMms,["type"]),e.asUrl=(0,S.derived)(e._asUrl,["type","subtype"]),e.asRevoked=(0,S.derived)(e._asRevoked,["type"]),e.asViewOnce=(0,S.derived)(e._asViewOnce,["type","isViewOnce"]),e.asVisualMedia=(0,S.derived)(e._asVisualMedia,["type"]),e.numTimesForwarded=(0,S.derived)(e._numTimesForwarded,["isForwarded","forwardingScore"]),e.isFrequentlyForwarded=(0,S.derived)(e._isFrequentlyForwarded,["numTimesForwarded"]),e.eventType=(0,S.derived)(e._eventType,["type","invis","isNewMsg"]),e.sender=(0,S.derived)(e._sender),e.text=(0,S.derived)(e._text,["type","body","caption","comment","isLive","paymentNoteMsg","subtype"]),e.containsEmoji=(0,S.derived)(e._containsEmoji,["text"]),e.isFailed=(0,S.derived)(e._isFailed,["isSentByMe","ack","mdDowngrade","isSendFailure"]),e.vcard=(0,S.derived)(e._vcard,["type","body"]),e.isUnsentMedia=(0,S.derived)(e._isUnsentMedia,["ack","asMms","isSentByMe"]),e.dir=(0,S.derived)(e._dir,["type","text","subtype"]),e.rtl=(0,S.derived)(e._rtl,["type","text","subtype"]),e.linkPreview=(0,S.derived)(e._linkPreview,["matchedText","body","title","description"]),e.isGroupsV4InviteExpired=(0,S.derived)(e._isGroupsV4InviteExpired,["type","inviteCode","inviteCodeExp"]),e.isPersistent=(0,S.derived)(e._isPersistent),e.isUnreadType=(0,S.derived)(e._isUnreadType,["type"]),e.isUserCreatedType=(0,S.derived)(e._isUserCreatedType,["type"]),e.supportsMessageFooter=(0,S.derived)(e._supportsMessageFooter,["isDynamicReplyButtonsMsg","isFromTemplate"]),e.supportsMessageFooterLinks=(0,S.derived)(e._supportsMessageFooterLinks,["type","isDynamicReplyButtonsMsg"]),e.hasBodyOrFooter=(0,S.derived)(e._hasBodyOrFooter,["text","footer"]),e.initialPageSize=(0,S.derived)(e._initialPageSize,["isFrequentlyForwarded"]),e.productListHeaderImage=(0,S.derived)(e._productListHeaderImage,["productHeaderImageRejected","list"]),e}return(0,c.default)(i,[{key:"_chat",value:function(){return this._getChatCollection().get(this.id.remote)}},{key:"_hasTemplateButtons",value:function(){return this.isFromTemplate&&null!=this.buttons&&this.buttons.length>0}},{key:"_ephemeralExpirationTimestamp",value:function(){var e=this.ephemeralDuration,t=this.ephemeralStartTimestamp,n=this.t,r=this.subtype,a=this.id.fromMe;return(0,D.getEphemeralExpirationTimestamp)(e,t,n,r,a)}},{key:"_isEphemeral",value:function(){return(this.type!==re.PROTOCOL||"ephemeral_setting"!==this.subtype)&&(null!=this.ephemeralDuration&&0!==this.ephemeralDuration)}},{key:"_isQuickReply",value:function(){if(!this.hasTemplateButtons)return!1;if(null==this.buttons)return!1;var e=this.buttons.at(0);return null!=e&&e.subtype===C.default.TEMPLATE_BUTTON_SUBTYPE.QUICK_REPLY}},{key:"_isFutureproof",value:function(){return this.type===re.UNKNOWN||this.type===re.PAYMENT&&"futureproof"===this.subtype}},{key:"_isGroupMsg",value:function(){return te.default.isGroup(this.from)||te.default.isGroup(this.to)}},{key:"_isStatusV3",value:function(){return te.default.isStatusV3(this.id.remote)}},{key:"_isPSA",value:function(){return te.default.isPSA(this.id.remote)}},{key:"_isRTL",value:function(){return"rtl"===this.dir||void 0===this.dir&&L.default.isRTL()}},{key:"_asProductInquiry",value:function(){var e=this.safe();return e.type===C.default.MSG_TYPE.PRODUCT&&e.id&&e.id.id.startsWith(C.default.PRODUCT_INQUIRY_TYPE)?e:null}},{key:"_statusV3TextBg",value:function(){if(!this.isStatusV3)return null;var e=this.backgroundColor;return e?`rgba(${e>>16&255}, ${e>>8&255}, ${255&e}, ${e>>24&255})`:null}},{key:"_isSentByMe",value:function(){return"in"!==this.id.self&&!this.isNotification&&te.default.equals(this.from,(0,R.getMaybeMeUser)())}},{key:"_isSentByMeFromWeb",value:function(){return this.id.fromMe&&this.local&&this.isUserCreatedType}},{key:"_isInternational",value:function(){var e,t=this.id.fromMe?this.to.toString({legacy:!0}):this.from.toString({legacy:!0}),n=null===(e=(0,R.getMaybeMeUser)())||void 0===e?void 0:e.toString({legacy:!0});return t&&n?(0,y.phoneCC)(t)!==(0,y.phoneCC)(n):(__LOG__(3)`Msg: could not derive isInternational as some data is missing`,!1)}},{key:"_isNotification",value:function(){return W.isNotification(this.type,this.subtype)}},{key:"_asGroupNotification",value:function(){var e=this.safe();switch(e.type){case re.GROUP_NOTIFICATION:case re.GP2:return e;default:return null}}},{key:"_asBroadcastNotification",value:function(){var e=this.safe();return e.type===re.BROADCAST_NOTIFICATION?e:null}},{key:"_isBizNotification",value:function(){if(this.type===re.NOTIFICATION_TEMPLATE){if(b.BIZ_SYSTEM_MSG_SUBTYPES.includes(this.subtype))return!0;if(b.BIZ_SYSTEM_MSG_SUBTYPES_V2.includes(this.subtype))return!0;switch(this.subtype){case"verified_initial_unknown":case"verified_initial_low":case"verified_initial_high":case"verified_transition_any_to_none":case"verified_transition_any_to_high":case"verified_transition_high_to_low":case"verified_transition_high_to_unknown":case"verified_transition_unknown_to_low":case"verified_transition_low_to_unknown":case"verified_transition_none_to_low":case"verified_transition_none_to_unknown":case"biz_verified_transition_top_to_bottom":case"biz_verified_transition_bottom_to_top":case"biz_intro_top":case"biz_intro_bottom":case"biz_name_change":case"biz_move_to_consumer_app":case"biz_two_tier_migration_top":case"biz_two_tier_migration_bottom":return!0;default:return!1}}return!1}},{key:"_asProduct",value:function(){var e=this.safe();return"product"===e.type?e:null}},{key:"_asAlbumAsset",value:function(){var e=this.safe();return e.type!==C.default.MSG_TYPE.IMAGE&&(e.type!==C.default.MSG_TYPE.VIDEO||!0===e.isGif)||e.isNotification||e.caption||e.asRevoked||e.quotedMsg||e.ctwaContext||e.isViewOnce?null:e}},{key:"_asGroupedSticker",value:function(){var e=this.safe();return e.type!==C.default.MSG_TYPE.STICKER||e.isNotification||e.asRevoked||e.quotedMsg||e.ctwaContext?null:e}},{key:"_isMedia",value:function(){return["image","video","audio"].includes(this.type)}},{key:"_asDoc",value:function(){var e=this.safe();return e.type===C.default.MSG_TYPE.DOCUMENT?e:null}},{key:"_asImage",value:function(){var e=this.safe();return e.type===C.default.MSG_TYPE.IMAGE?e:null}},{key:"_asVideo",value:function(){var e=this.safe();return e.type===C.default.MSG_TYPE.VIDEO?e:null}},{key:"_asMms",value:function(){var e=this.safe();return(0,W.typeIsMms)(e)?e:null}},{key:"_asUrl",value:function(){var e=this.safe();return(0,W.typeIsUrl)(e)?e:null}},{key:"_asRevoked",value:function(){var e=this.safe();return e.type===re.REVOKED?e:null}},{key:"_asViewOnce",value:function(){var e=this.asVisualMedia;return(null==e?void 0:e.isViewOnce)?e:null}},{key:"_asVisualMedia",value:function(){var e=this.safe();return e.type===C.default.MSG_TYPE.IMAGE||e.type===C.default.MSG_TYPE.VIDEO?e:null}},{key:"_numTimesForwarded",value:function(){return this.forwardingScore?this.forwardingScore||0:this.isForwarded?1:0}},{key:"_isFrequentlyForwarded",value:function(){return this.numTimesForwarded>=C.default.FREQUENTLY_FORWARDED_SENTINEL}},{key:"_eventType",value:function(){if(!this.isNewMsg)return"i";var e=(0,W.eventTypeFromMsgType)(this);return this.invis?"i"===e?"i":"n":e}},{key:"_sender",value:function(){return this.isSentByMe?this.from:this.isGroupMsg||this.isStatusV3?this.author:this.from}},{key:"_text",value:function(){var e;if(this.isFromTemplate||this.isDynamicReplyButtonsMsg)return this.type===re.CHAT?this.body:this.caption;switch(this.type){case re.CHAT:return this.body;case re.IMAGE:case re.VIDEO:return this.caption;case re.LOCATION:return this.isLive?this.comment:void 0;case re.PAYMENT:var t=this.paymentNoteMsg;return t?t.body:void 0;case re.GROUPS_V4_INVITE:return this.comment;case re.LIST:return null===(e=this.list)||void 0===e?void 0:e.description;case re.PRODUCT:return E.default.truncate(this.title,{length:C.default.MAX_REPLY_PRODUCT_TITLE_LENGTH});case re.HSM:case re.TEMPLATE_BUTTON_REPLY:return this.body;default:return}}},{key:"_containsEmoji",value:function(){var e=this.text;return!!e&&I.default.containsEmoji(e)}},{key:"_isFailed",value:function(){var e=this.isSentByMe&&this.ack<C.default.ACK.CLOCK;return N.default.supportsFeature(N.default.F.MD_BACKEND)?e||!!this.mdDowngrade||!!this.isSendFailure:e}},{key:"_vcard",value:function(){if(this.type===re.VCARD)try{return(0,X.parseVcard)(this.body)}catch(e){return}}},{key:"_isUnsentMedia",value:function(){return this.ack<C.default.ACK.SENT&&null!=this.asMms&&this.isSentByMe}},{key:"_dir",value:function(){return this.type===re.VCARD?this.subtype?m.dir(this.subtype):void 0:this.text?m.dir(this.text):void 0}},{key:"_rtl",value:function(){return this.type===re.VCARD?!!this.subtype&&"rtl"===m.dir(this.subtype):!!this.text&&"rtl"===m.dir(this.text)}},{key:"_linkPreview",value:function(){return(0,q.isString)(this.matchedText)&&(!E.default.isEmpty(this.title)||!E.default.isEmpty(this.description))&&this.body.includes(this.matchedText)}},{key:"_isGroupsV4InviteExpired",value:function(){if(this.type!==C.default.MSG_TYPE.GROUPS_V4_INVITE)return!1;if(!this.inviteCode)return!0;var e=(new Date).getTime()/1e3;return parseInt(e,10)>=parseInt(this.inviteCodeExp,10)}},{key:"_isPersistent",value:function(){return this.type===re.E2E_NOTIFICATION&&"encrypt"===this.subtype}},{key:"_isUnreadType",value:function(){return[re.CHAT,re.IMAGE,re.VIDEO,re.AUDIO,re.PTT,re.DOCUMENT,re.VCARD,re.LOCATION,re.CIPHERTEXT,re.OVERSIZED,re.MULTI_VCARD,re.REVOKED,re.UNKNOWN,re.STICKER,re.PRODUCT,re.GROUPS_V4_INVITE].includes(this.type)}},{key:"_isUserCreatedType",value:function(){return[re.PROTOCOL,re.CHAT,re.LOCATION,re.VCARD,re.MULTI_VCARD,re.IMAGE,re.VIDEO,re.AUDIO,re.PTT,re.DOCUMENT,re.STICKER,re.PRODUCT,re.GROUPS_V4_INVITE,re.ORDER].includes(this.type)}},{key:"_supportsMessageFooter",value:function(){return this.isFromTemplate||this.isDynamicReplyButtonsMsg}},{key:"_supportsMessageFooterLinks",value:function(){return this.isDynamicReplyButtonsMsg||this.type===re.LIST}},{key:"_hasBodyOrFooter",value:function(){return null!=this.text||null!=this.footer}},{key:"_initialPageSize",value:function(){return this.isFrequentlyForwarded?C.default.FREQUENTLY_FORWARDED_INITIAL_PAGE_SIZE:C.default.INITIAL_PAGE_SIZE}},{key:"_productListHeaderImage",value:function(){var e,t,n,r;return!0===this.productHeaderImageRejected?null:null!==(e=null===(t=this.list)||void 0===t||null===(n=t.productListInfo)||void 0===n||null===(r=n.headerImage)||void 0===r?void 0:r.jpegThumbnail)&&void 0!==e?e:null}},{key:"initialize",value:function(){var e,t=this;if((0,d.default)((0,f.default)(i.prototype),"initialize",this).call(this),this._pendingAckUpdate=new _.PromiseQueue,this.sender)this.addChild("senderObj",O.default.gadd(this.sender));else switch(this.type){case re.NOTIFICATION:case re.NOTIFICATION_TEMPLATE:case re.GROUP_NOTIFICATION:case re.GP2:case re.BROADCAST_NOTIFICATION:case re.E2E_NOTIFICATION:case re.CALL_LOG:case re.PROTOCOL:break;default:__LOG__(2)`msg:msg with no sender id:${this.id.toString()}, from:${this.from.toString()}, author:${this.author&&this.author.toString()}, type:${this.type}`}this.mentionedJidList=this.mentionedJidList||[],this.mentionedJidList.forEach((function(e){return O.default.gadd(e)}));var r=this.getCollection();(e=r.preAck[this.id])&&(__LOG__(2)`Msg:initialize updating msg with out of order ack`,this.updateAck(e.ack,e.t),delete r.preAck[this.id]),this.type===re.CIPHERTEXT&&this.listenToOnce(this,"change:type",this.onCiphertextDecrypted),this.mediaObject=void 0,W.typeIsMms(this)&&(this._createMediaDataChild(),this.isViewOnce&&!(0,Z.isUnviewed)(this.safe())||G.registerMsg(this)),this.isSentByMeFromWeb&&(this.sendDeferred=new v.Resolvable,this.sendDeferred.promise.finally((function(){t.sendDeferred=null}))),this.isLive&&n(90481).default.processMsg(this,!1),A.default.isSMB&&(0,x.initializeLabels)(this),this.isViewOnce&&(this.listenTo(this,"change:ack",this.onViewOnceMediaStatusChanged),this.listenTo(this.mediaData,"change:mediaStage",this.onViewOnceMediaStatusChanged))}},{key:"_getLinks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(n>=r)return[t,r];var a=(0,J.firstNCodepoints)(e,r),i=!1,o=F.findLinks(a,i,this.sender);if((0,J.numCodepoints)(e)>r&&o.length>0){var s=o[o.length-1],u=(0,J.numCodepoints)(a.slice(0,s.index)),l=u+(0,J.numCodepoints)(s.url);l===r&&(o=F.findLinks(e,i,this.sender))}return[o,r]}},{key:"getLinks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initialPageSize+1,t=this.text;if(null==t)return this._links;var n=this._getLinks(t,this._links,this.linksIndexParsed,e),r=(0,u.default)(n,2),a=r[0],i=r[1];return this.linksIndexParsed=i,this._links=a}},{key:"_displayHeaderLinksForListMessages",value:function(){var e,t;return"list"===this.type&&(null===(e=this.list)||void 0===e?void 0:e.listType)===M.ListMessageListType.SINGLE_SELECT&&null!=(null===(t=this.list)||void 0===t?void 0:t.title)}},{key:"_displayHeaderLinksForNonListMessages",value:function(){return!0===this.isDynamicReplyButtonsMsg&&null!=this.title}},{key:"_getHeaderLinks",value:function(e){if(this._headerLinks.length>0)return this._headerLinks;var t=this._getLinks(e,this._headerLinks),n=(0,u.default)(t,1)[0];return this._headerLinks=n}},{key:"getHeaderLinks",value:function(){var e;return this._displayHeaderLinksForListMessages()?this._getHeaderLinks((null===(e=this.list)||void 0===e?void 0:e.title)||""):this._displayHeaderLinksForNonListMessages()?this._getHeaderLinks(this.title):[]}},{key:"getFooterLinks",value:function(){if(!this.supportsMessageFooterLinks||null==this.footer)return[];if(this._footerLinks.length>0)return this._footerLinks;var e=this._getLinks(this.footer,this._footerLinks),t=(0,u.default)(e,1)[0];return this._footerLinks=t}},{key:"getGalleryLinks",value:function(){return E.default.uniqBy(this.getLinks(),"href").filter((function(e){return e.isHttp}))}},{key:"getSuspiciousLinks",value:function(){return this.getLinks().filter((function(e){return e.suspiciousCharacters&&e.suspiciousCharacters.size}))}},{key:"_createMediaDataChild",value:function(){this.addChild("mediaData",new B.default)}},{key:"hasSymbol",value:function(){return["image","video","audio","ptt","location","vcard","multi_vcard","document","ciphertext","oversized","unknown","call_log","revoked","sticker","payment","groups_v4_invite","product","order"].includes(this.type)}},{key:"mayFail",value:function(){return this.isSentByMe&&this.ack<C.default.ACK.SENT}},{key:"isUnsentPhoneMsg",value:function(){return!this.local&&this.isSentByMe&&this.ack<C.default.ACK.SENT}},{key:"canReply",value:function(){return!(this.type===re.LIST&&!(0,W.listMsgCanRender)(this))&&(this.chat.canSend&&!this.mayFail()&&!this.isNotification&&this.type!==re.UNKNOWN&&this.type!==re.CIPHERTEXT&&this.type!==re.OVERSIZED&&this.type!==re.REVOKED&&this.interactiveButtonsReleased())}},{key:"canPrivateReply",value:function(){return!this.mayFail()&&!this.isNotification&&this.type!==re.UNKNOWN&&this.type!==re.CIPHERTEXT&&this.type!==re.OVERSIZED&&this.type!==re.REVOKED&&!this.isSentByMe&&this.isGroupMsg&&this.interactiveButtonsReleased()}},{key:"canPrivateReplyInRestrictedGrp",value:function(){return!!this.chat.isAnnounceGrpRestrict&&!this.chat.isReadOnly&&!this.mayFail()&&!this.isSentByMe&&!this.isNotification&&this.type!==re.UNKNOWN&&this.type!==re.CIPHERTEXT&&this.type!==re.OVERSIZED&&this.type!==re.REVOKED&&this.interactiveButtonsReleased()}},{key:"canForward",value:function(){var e;if(this.type===re.CIPHERTEXT)return!1;if(this.type===re.OVERSIZED)return!1;if(this.type===re.REVOKED)return!1;if(this.type===re.UNKNOWN)return!1;if(this.type===re.PAYMENT)return!1;if(this.type===re.LIST)return(null===(e=this.list)||void 0===e?void 0:e.listType)===M.ListMessageListType.PRODUCT_LIST&&(0,W.listMsgCanRender)(this);if(this.type===re.GROUPS_V4_INVITE)return!1;if(this.type===re.LOCATION&&this.isLive)return!1;if(this.type===re.ORDER)return!1;if(!this.interactiveButtonsReleased())return!1;if(this.ack<C.default.ACK.SENT&&this.isSentByMe)return!1;if(this.asMms){var t=this.mediaData;if(t.mediaStage===j.MEDIA_DATA_STAGE.EXISTS)return!0;if(t.mediaStage===j.MEDIA_DATA_STAGE.ERROR_MISSING)return!1;if(t.mediaStage===j.MEDIA_DATA_STAGE.ERROR_UNSUPPORTED)return!1;if(t.mediaStage!==j.MEDIA_DATA_STAGE.RESOLVED&&(this.type===re.IMAGE||this.type===re.VIDEO||this.type===re.PTT))return!1;if(this.isViewOnce)return!1;if(this.isUnsentMedia)return!1}return!0}},{key:"canQuickForward",value:function(){return!(!this.canForward()||this.isFrequentlyForwarded||0!==this.getSuspiciousLinks().length||this.type===C.default.MSG_TYPE.PTT||this.type===C.default.MSG_TYPE.STICKER||!this.interactiveButtonsReleased())&&(null!=this.asMms||this.linkPreview||this.type===C.default.MSG_TYPE.VCARD||this.type===C.default.MSG_TYPE.LOCATION||null!=this.ctwaContext)}},{key:"canStar",value:function(){return!(this.type===re.LIST&&!(0,W.listMsgCanRender)(this))&&(!this.isNotification&&!this.isFutureproof&&!this.isViewOnce&&this.type!==re.REVOKED&&!(this.ack<C.default.ACK.SENT&&this.isSentByMe)&&this.interactiveButtonsReleased())}},{key:"interactiveButtonsReleased",value:function(){return this.isFromTemplate||!this.hasTemplateButtons&&this.type!==C.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY}},{key:"isGroupLeave",value:function(){return"gp2"===this.type&&("leave"===this.subtype||"remove"===this.subtype)&&te.default.equals(this.recipients[0],(0,R.getMaybeMeUser)())}},{key:"isTrusted",value:function(){return!!te.default.equals(this.sender,(0,R.getMaybeMeUser)())||(!(!this.senderObj||!this.senderObj.isMyContact)||(this.isGroupMsg?this.chat.isTrusted():this.chat.notSpam))}},{key:"getVcardWids",value:function(){return this.type!==re.VCARD?null:(0,X.vcardWids)(this.vcard)}},{key:"getLocObject",value:function(){var e=this.loc;if(e){var t=e.split("\n"),n=(0,u.default)(t,2),r=n[0],a=n[1];return{name:r,addr:void 0===a?null:a}}return null}},{key:"resumeRemoteUpload",value:function(){var e=this;return this.isUnsentPhoneMsg()&&!this.phoneUploading&&((0,H.sendMsgRecord)(this).then((function(t){t!==$.SendMsgResult.OK&&(e.phoneUploading=!1)})),this.phoneUploading=!0),this.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:Y.default.WEBC_RMR_REASON_CODE.MSG_CLICK,isUserInitiated:!0})}},{key:"forceRMR",value:function(){return r.reject(new Error("unimplemented forceRMR"))}},{key:"isForcingRMR",value:function(){return!1}},{key:"cancelDownload",value:function(){G.cancelDownloadMsg(this)}},{key:"resumeUpload",value:function(){return this.mediaData.mediaStage!==j.MEDIA_DATA_STAGE.NEED_UPLOAD&&(__LOG__(4,void 0,new Error,!0)`resumeUpload called while state was ${this.mediaData.mediaStage}`,SEND_LOGS("resume-non-need-upload")),G.resumeUploadMsg(this)}},{key:"cancelUpload",value:function(){G.cancelUploadMsg(this)}},{key:"waitForPhoneUpload",value:(t=(0,s.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Boolean(this.mediaData.filehash)||this.isUnsentPhoneMsg()){e.next=2;break}return e.abrupt("return");case 2:return this._waitForPhoneUploadPromise||(this._waitForPhoneUploadPromise=(0,ee.default)(this.mediaData,"change:mediaStage change:filehash",(function(){return Boolean(t.mediaData.filehash)&&!t.isUnsentPhoneMsg()}))),e.next=5,this._waitForPhoneUploadPromise;case 5:this._waitForPhoneUploadPromise=null;case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"downloadMedia",value:function(e){var t=this;if(this.asRevoked)return r.resolve();var n=e.downloadEvenIfExpensive,a=e.rmrReason,i=e.isUserInitiated;if(this.asMms||(__LOG__(4,void 0,new Error,!0)`id: ${this.id.toString()} type: ${this.type}`,SEND_LOGS("media-fault: downloadMedia msg is not mms type")),this.isUnsentPhoneMsg()){var o=this._waitForPhoneUploadPromise;return o||(o=this._waitForPhoneUploadPromise=(0,ee.default)(this.mediaData,"change:mediaStage change:filehash",(function(){return!!t.mediaData.filehash&&!t.isUnsentPhoneMsg()})).then((function(){t._waitForPhoneUploadPromise=null}))),o.then((function(){return t.downloadMedia(e)}))}return G.downloadMsg({msg:this,isUserClick:a===Y.default.WEBC_RMR_REASON_CODE.MSG_CLICK,downloadEvenIfExpensive:n,rmrReason:a,rmrData:this._getRmrData(a),mode:i?"manual":"auto"})}},{key:"_getRmrData",value:function(e){var t={webcRmrReason:e,webcMessageT:this.t},n=this.chat;if(n){t.webcChatType=n.getWebcChatType(),null!=n.initialIndex&&(t.webcChatPosition=n.initialIndex);var r=this.msgChunk;r&&r===n.msgs&&(t.webcMessageIndex=r.length-r.indexOf(this)-1)}return t}},{key:"applyUpdate",value:function(e){var t=this;return e.type&&this.type!==e.type&&W.typeIsMms(e)?(this.type!==re.CIPHERTEXT&&(__LOG__(4,void 0,new Error,!0)`updated ${this.id.toString()} from ${this.type} to ${String(e.type)}`,SEND_LOGS("invalid-type-update")),this._createMediaDataChild(),G.registerMsgEarly(this,e),G.prepareMsg(this).then((function(){t.set(e)})).catch((function(e){__LOG__(4,void 0,new Error,!0)`error = ${String(e)}`,SEND_LOGS("preregister-error")}))):(this.set(e),this.isLive&&n(90481).default.processMsg(this,!0),this.paymentTransactionTimestamp&&this.getCollection().updateLastTransactionTime(this.id.remote,this.paymentTransactionTimestamp),r.resolve())}},{key:"waitForPrep",value:function(){return W.typeIsMms(this)?G.prepareMsg(this):r.resolve()}},{key:"delete",value:function(e){(0,d.default)((0,f.default)(i.prototype),"delete",this).call(this),n(76408).default.remove(this),this.isLive&&n(90481).default.removeMsg(this),this.getCollection().remove(this.id),this.msgChunk&&this.msgChunk.remove(this.id,{},Boolean(e&&e.skipUpdatingSortTime)),W.typeIsMms(this)&&G.deregisterMsg(this),n(6705).default.removeAllLabelsMD(this);var t=this._getChatCollection().get(this.id.remote);if(t){if(t.unreadMsgAnchor===this&&(t.unreadMsgAnchor=void 0),(!e||!e.doNotResetLastReceived)&&t.lastReceivedKey===this.id){var r=void 0,a=t.getLastReceivedMsg();a&&(r=a.id),(0,U.setLastReceivedKey)(t.id,r).then((function(){t.lastReceivedKey=r}))}t.composeQuotedMsg===this&&(t.composeQuotedMsg=null)}}},{key:"quotedMsgObj",value:function(){if(!this.quotedMsg&&!this.paymentRequestMessageKey)return null;if(this._quotedMsgObj){var e=this.getCollection();return W.getOriginalQuotedMsgIfPossible(this._quotedMsgObj,e)}if(this.quotedMsg)this._quotedMsgObj=this._getQuotedMsgObj();else{if(!this.paymentRequestMessageKey)return null;this._quotedMsgObj=this._getQuotedPaymentRequestMsg()}var t=this.getCollection();return W.getOriginalQuotedMsgIfPossible(this._quotedMsgObj,t)}},{key:"_getQuotedMsgObj",value:function(){var e=(0,R.getMaybeMeUser)(),t=!this.quotedParticipant||te.default.equals(this.quotedParticipant,e),n=t?"out":"in",r=this.quotedRemoteJid?this.quotedRemoteJid:this.id.remote,a={id:this.quotedStanzaID,from:t?e:r,to:t?r:e,self:n,author:(0,g.default)(this.quotedParticipant,"this.quotedParticipant"),remote:r};return!(te.default.isGroup(a.from)||te.default.isGroup(a.to))&&!te.default.isStatusV3(r)||te.default.equals(e,this.quotedParticipant)&&!N.default.supportsFeature(N.default.F.MD_BACKEND)||(a.participant=(0,g.default)(this.quotedParticipant,"this.quotedParticipant")),Object.assign(a,this.quotedMsg),W.createQuotedMsg(a)}},{key:"_getQuotedPaymentRequestMsg",value:function(){if(!this.paymentRequestMessageKey)return null;var e=this.paymentRequestMessageKey.remote?this.paymentRequestMessageKey.remote:this.id.remote,t=this.paymentRequestMessageKey.fromMe,n=null!=this.paymentRequestMessageKey.self?this.paymentRequestMessageKey.self:t?"out":"in",r=this.paymentRequestMessageKey.participant||this.paymentMessageReceiverJid,a={id:this.paymentRequestMessageKey.id,from:t?(0,R.getMaybeMeUser)():e,to:t?e:(0,R.getMaybeMeUser)(),self:n,participant:r,author:r,remote:e,amount1000:this.paymentAmount1000,currency:this.paymentCurrency,receiverJid:this.sender,type:this.type,subtype:"request"};return W.createQuotedMsg(a)}},{key:"getQuotedMsgAdminGroupJid",value:function(){return null==this.quotedMsg?this.quotedRemoteJid:null}},{key:"msgContextInfo",value:function(e){var t=E.default.omit(this.toJSON(),["id","t","notifyName","from","to","author","self","ack","invis","isNewMsg","star","recvFresh","recipients","broadcast","quotedMsg","quotedStanzaID","quotedRemoteJid","quotedParticipant","senderObj","multicast","replyButtons"]),n=null;return e&&!this.id.remote.equals(e)&&(n=this.id.remote),{quotedMsg:t,quotedParticipant:this.sender,quotedStanzaID:this.id.id,quotedRemoteJid:n}}},{key:"displayName",value:function(e,t){if(!this.sender)return"";if(this.sender.equals((0,R.getMaybeMeUser)()))return L.default.t(1964);var n=this.senderObj,r=e?n.shortName:void 0;if(r)return r;if(n.name)return n.name;var a=t&&this.notifyName?" ~"+this.notifyName:"";return(0,ne.default)(this.sender)+a}},{key:"isQuoted",value:function(e){var t=this.quotedMsgObj();return!!t&&t.sender.equals(e)}},{key:"isMentioned",value:function(e){return!!this.mentionedJidList&&this.mentionedJidList.findIndex((function(t){return t.equals(e)}))>-1}},{key:"mentionMap",value:function(){if(!this.mentionedJidList)return null;if(!this.mentionedJidList.length)return null;var e={};return this.mentionedJidList.forEach((function(t){e[`@${te.default.user(t)||""}`]=O.default.gadd(t)})),e}},{key:"updateAck",value:function(e,t){var n=this,r=this.ack;N.default.supportsFeature(N.default.F.MD_BACKEND)&&this.chat.isGroup&&this.isMdHistoryMsg&&e>=C.default.ACK.RECEIVED||((0,q.isNumber)(e)&&(void 0===r||e>r||e===C.default.ACK.FAILED)?(this.ack=e,e>=1&&null!=t&&null==this.ephemeralStartTimestamp&&this.updateEphemeralStartTimestamp(t),"ephemeral_setting"===this.subtype&&1===e&&null!=t&&(0,k.updateEphemeralSettingTimestamp)(this.chat,t),this._pendingAckUpdate.enqueue((function(){return(0,Q.updateLocal)(n.id,{ack:e})}))):e===C.default.ACK.FAILED&&this.ack===C.default.ACK.CLOCK&&(this.ack=C.default.ACK.FAILED,this.phoneUploading=!1,this._pendingAckUpdate.enqueue((function(){return(0,Q.updateLocal)(n.id,{ack:e})}))))}},{key:"avParams",value:function(){return G.mediaMetadata(this)}},{key:"resend",value:function(){var e=this;if(this.isFailed){var t={ack:C.default.ACK.CLOCK};return N.default.supportsFeature(N.default.F.MD_BACKEND)&&(t.isSendFailure=!1,t.mdDowngrade=!1),this._pendingAckUpdate.enqueue((function(){return(0,Q.updateLocal)(e.id,t).then((function(){e.set(t)}))})),this.asMms?this.isSentByMeFromWeb?this.resumeUpload():this.resumeRemoteUpload():(0,H.sendMsgRecord)(this)}return r.resolve()}},{key:"onCiphertextDecrypted",value:function(){if(!this.isStatusV3){var e=this.chat,t=e.msgs.length,n=e.msgs.indexOf(this);-1!==n&&t-n<=10&&w.default.alertNewMsg(this)}}},{key:"onViewOnceMediaStatusChanged",value:function(){if(this.isViewOnce&&null!=this.mediaData){var e=this.isSentByMe&&this.ack>=C.default.ACK.SENT&&this.mediaData.mediaStage===j.MEDIA_DATA_STAGE.RESOLVED,t=!this.isSentByMe&&this.ack>=C.default.ACK.PLAYED;(e||t)&&(this.stopListening(this,"change:ack",this.onViewOnceMediaStatusChanged),this.stopListening(this.mediaData,"change:mediaStage",this.onViewOnceMediaStatusChanged),G.deregisterMsg(this))}}},{key:"canRevoke",value:function(){return this.id.fromMe&&this.isUserCreatedType&&(!te.default.isBroadcast(this.id.remote)||"iphone"===A.default.platform)&&!this.broadcast&&Math.trunc(+new Date/1e3)-this.t<=C.default.REVOKE_WINDOW&&!this.isUnsentPhoneMsg()&&!this.isUnsentMedia}},{key:"getWamMessageType",value:function(){return this.isStatusV3?Y.default.MESSAGE_TYPE.STATUS:this.isGroupMsg?Y.default.MESSAGE_TYPE.GROUP:te.default.isBroadcast(this.id.remote)?Y.default.MESSAGE_TYPE.BROADCAST:Y.default.MESSAGE_TYPE.INDIVIDUAL}},{key:"getWamMediaType",value:function(){var e,t;if(!0===this.isDynamicReplyButtonsMsg)return Y.default.MEDIA_TYPE.BUTTON_MESSAGE;switch(this.type){case re.IMAGE:return Y.default.MEDIA_TYPE.PHOTO;case re.VIDEO:return this.mediaData.isGif?Y.default.MEDIA_TYPE.GIF:Y.default.MEDIA_TYPE.VIDEO;case re.AUDIO:return Y.default.MEDIA_TYPE.AUDIO;case re.PTT:return Y.default.MEDIA_TYPE.PTT;case re.DOCUMENT:return Y.default.MEDIA_TYPE.DOCUMENT;case re.UNKNOWN:return Y.default.MEDIA_TYPE.FUTURE;case re.LOCATION:return this.isLive?Y.default.MEDIA_TYPE.LIVE_LOCATION:Y.default.MEDIA_TYPE.LOCATION;case re.VCARD:return Y.default.MEDIA_TYPE.CONTACT;case re.MULTI_VCARD:return Y.default.MEDIA_TYPE.CONTACT_ARRAY;case re.CHAT:return this.linkPreview?(0,V.matchCatalogUrl)(this.matchedText)?Y.default.MEDIA_TYPE.CATALOG_LINK:(0,V.matchProductUrl)(this.matchedText)?Y.default.MEDIA_TYPE.PRODUCT_LINK:Y.default.MEDIA_TYPE.URL:Y.default.MEDIA_TYPE.NONE;case re.STICKER:return Y.default.MEDIA_TYPE.STICKER;case re.PRODUCT:return Y.default.MEDIA_TYPE.PRODUCT_IMAGE;case re.LIST:switch(null!==(e=null===(t=this.list)||void 0===t?void 0:t.listType)&&void 0!==e?e:M.ListMessageListType.UNKNOWN){case M.ListMessageListType.SINGLE_SELECT:return Y.default.MEDIA_TYPE.LIST;case M.ListMessageListType.PRODUCT_LIST:return Y.default.MEDIA_TYPE.PRODUCT_LIST;default:return Y.default.MEDIA_TYPE.NONE}case re.LIST_RESPONSE:return Y.default.MEDIA_TYPE.LIST_REPLY;case re.BUTTONS_RESPONSE:return Y.default.MEDIA_TYPE.BUTTON_RESPONSE_MESSAGE;case re.ORDER:return Y.default.MEDIA_TYPE.ORDER;default:return Y.default.MEDIA_TYPE.NONE}}},{key:"getForwardingScoreWhenForwarded",value:function(){if(!z.default.frequentlyForwardedMessages)return this.numTimesForwarded;var e=this.numTimesForwarded+(this.id.fromMe?0:1);return e>=z.default.frequentlyForwardedThreshold?C.default.FREQUENTLY_FORWARDED_SENTINEL:e}},{key:"updateEphemeralStartTimestamp",value:function(e){var t=this;return(0,Q.updateLocal)(this.id,{ephemeralStartTimestamp:e}).then((function(){t.ephemeralStartTimestamp=e}))}},{key:"isExpired",value:function(){return null!=this.ephemeralExpirationTimestamp&&this.ephemeralExpirationTimestamp<=T.default.globalUnixTime()}},{key:"_logStorageEstimate",value:function(e){return(0,P.default)().then((function(t){t&&(e.webcBrowserStorageQuotaBytes=t.quota,e.webcBrowserStorageQuotaUsedBytes=t.usage)}))}},{key:"getCollection",value:function(){return n(66312).default}},{key:"_getChatCollection",value:function(){return n(26671).default}},{key:"isDownloadable",value:function(){var e;return!this.asRevoked&&(!this.isViewOnce&&(this.type===C.default.MSG_TYPE.VCARD||this.type===C.default.MSG_TYPE.MULTI_VCARD||!!(null===(e=this.mediaData)||void 0===e?void 0:e.isDownloadable())&&this.type!==C.default.MSG_TYPE.STICKER))}},{key:"safe",value:function(){return this}},{key:"unsafe",value:function(){return this}}]),i}(S.default);ae.Proxy="msg",ae.idClass=K.default;var ie=(0,S.defineModel)(ae),oe=ie;t.default=oe},77315:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=a(n(5315)),c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.unsyncedButtonReplies=(0,u.prop)(),e}return n}(u.default);c.Proxy="msgButtonReplyMsg",c.idClass=l.default;var d=(0,u.defineModel)(c);t.default=d},14225:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(60619)),u=r(n(77315)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(s.default);t.default=l,l.model=u.default},66312:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgCollection=void 0;var o=i(n(81109)),s=i(n(34575)),u=i(n(93913)),l=i(n(81506)),c=i(n(16525)),d=i(n(29754)),f=i(n(2205)),p=i(n(99842)),h=n(46154),_=i(n(91080)),v=i(n(60619)),m=i(n(34263)),g=n(676),y=n(14650),E=n(65105),S=n(71701),b=i(n(16551)),T=i(n(14225)),w=i(n(5315)),A=n(77576),C=i(n(65150)),O=n(88828),M=i(n(61110)),I=i(n(23306)),k=i(n(12717)),P=n(75793),R=a(n(7860)),D=function(e){(0,f.default)(a,e);var t=(0,p.default)(a);function a(){var e;return(0,s.default)(this,a),(e=t.call(this)).lastReceivedReceipt={},e.lastReceivedPaymentTransaction={},e.preAck={},e.pendingAdd={},e.ftsCache={},e.productListMessagesPrefetchChain=r.resolve([]),e.onSearchTag=function(t){e.pendingSearchTag=t},e.listenTo(R.default,"change:stream",(function(){R.default.stream===R.STREAM.DISCONNECTED&&(this.preAck={})})),e.listenTo((0,l.default)(e),"remove",e.removeFromCollection),e}return(0,u.default)(a,[{key:"removeFromCollection",value:function(e){e.chat&&e.chat.removeFromCollection(e)}},{key:"_findQuery",value:function(e,t){var a,i=this;switch(e.direction){case"before":case"after":a=e.direction;break;default:a="before"}var o={add:a,isHistory:!0};return(0,E.msgFindQuery)(a,e,t,void 0).then((function(t){return t.status>=400?(__LOG__(3)`model:Msg:findQuery error ${t.status}`,r.reject(t.status)):(t.forEach((function(e){e.invis=!0})),__LOG__(2)`model:Msg:findQuery:got:${t.length}:${e.direction}`,i.processMultipleMessages(e.remote,t,o,(function(){var t=i.get(e),r=n(26671).default.get(e.remote);return t?t.msgChunk:r?r.msgs:void 0})))}))}},{key:"add",value:function(e,t){var n=(Array.isArray(e)?e:[e]).filter((function(e){return null==e.ephemeralDuration||0===e.ephemeralDuration||!new b.default(e).isExpired()})),r=(0,c.default)((0,d.default)(a.prototype),"add",this).call(this,n,t);return this._syncTemplateButtonClickState(r),this._syncQuickReplyButtonClickState(r),this._prefetchProductListMessages(r),r}},{key:"_prefetchProductListMessages",value:function(e){var t=n(63760).default;this.productListMessagesPrefetchChain=e.filter((function(e){var t,n;return null!=e&&e.isNewMsg&&e.type===m.default.MSG_TYPE.LIST&&(null===(t=e.list)||void 0===t?void 0:t.listType)===g.ListMessageListType.PRODUCT_LIST&&null!=(null===(n=e.list)||void 0===n?void 0:n.productListInfo)})).reduce((function(e,n){var r,a;if(null==n)return e;var i=n.isForwarded?n.businessOwnerJid:n.from.toString({legacy:!0}),o=null===(r=n.list)||void 0===r?void 0:r.productListInfo;if(null==i||null==o)return e;var s=t.getOrAdd(n.id,o,i,null===(a=n.list)||void 0===a?void 0:a.title);return null==s||0!==s.productCollection.getModelsArray().length||s.isFetching()?e:e.then((function(){return t.update(s.id)}))}),this.productListMessagesPrefetchChain)}},{key:"_syncTemplateButtonClickState",value:function(e){for(var t=this,n=function(n){var r=e[n];if(!r)return"continue";var a=r.chat;if(r.type===m.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY&&null!=r.selectedIndex&&r.sender.equals((0,S.getMaybeMeUser)())){null==a.msgUnsyncedButtonReplyMsgs&&(a.msgUnsyncedButtonReplyMsgs=new T.default);var i=a.msgUnsyncedButtonReplyMsgs,o=r.quotedMsgObj();if(!o)return"continue";var s=i.get(o.id);s||(i.add({id:o.id,unsyncedButtonReplies:new C.default}),s=i.get(o.id));var u=(0,_.default)(s,"buttonReplyMsg").unsyncedButtonReplies;u.add(r);var l=t.get(o.id);if(l&&l.buttons){var c=l.buttons.get(`${(0,_.default)(r.selectedIndex,"msg.selectedIndex")}`);c&&(c.selected=!0),u.remove(r)}}else if(r.isFromTemplate&&r.buttons){var d=a.msgUnsyncedButtonReplyMsgs;if(null==d)return"continue";var f=d.get(r.id);f&&(f.unsyncedButtonReplies.forEach((function(e){var t=(0,_.default)(r.buttons,"msg.buttons").get(`${(0,_.default)(e.selectedIndex,"replyMsg.selectedIndex")}`);t&&(t.selected=!0)})),f.unsyncedButtonReplies.delete())}},r=0;r<e.length;r++)n(r)}},{key:"_syncQuickReplyButtonClickState",value:function(e){for(var t=this,n=function(n){var r=e[n];if(!r)return"continue";if(r.type===m.default.MSG_TYPE.BUTTONS_RESPONSE&&null!=r.selectedButtonId&&r.sender.equals((0,S.getMaybeMeUser)())){var a=r.quotedMsgObj();if(!a)return"continue";var i=t.get(a.id);if(i&&i.replyButtons){var o=i.replyButtons.get(r.selectedButtonId);o&&(o.selected=!0)}}else if(r.isDynamicReplyButtonsMsg&&r.replyButtons&&r.replyButtons.every((function(e){return!e.selected}))&&r.chat){var s=Math.max(0,r.chat.msgs.models.length-1e3);r.chat.msgs.getModelsArray().slice(s).filter((function(e){var t;return e.type===m.default.MSG_TYPE.BUTTONS_RESPONSE&&null!=e.selectedButtonId&&e.sender.equals((0,S.getMaybeMeUser)())&&(null===(t=e.quotedMsgObj())||void 0===t?void 0:t.id.toString())===r.id.toString()})).map((function(e){return e.selectedButtonId})).forEach((function(e){var t,n=null===(t=r.replyButtons)||void 0===t?void 0:t.get(e);null!=n&&(n.selected=!0)}))}},r=0;r<e.length;r++)n(r)}},{key:"getStarred",value:function(e,t,n,a){var i=this,o={count:"number"!=typeof t||isNaN(t)?m.default.PAGE_SIZE:t,chat:e||void 0,remote:n&&n.remote,id:n&&n.id,fromMe:n&&n.fromMe,participant:n&&n.participant,media:a?"gif":void 0},s={add:"search"};return(0,E.msgFindQuery)("star",o).then((function(e){var t=e.status;return e.status>=400?(499===t?__LOG__(2)`model:Msg:getStarred error 499 (unimplemented)`:__LOG__(3)`model:Msg:getStarred error ${t}`,r.reject(t)):i.processMultipleMessages(void 0,e,s)}))}},{key:"getMessagesById",value:function(e){var t=this;return(0,E.msgFindByIds)(e).then((function(e){return(0,h.promiseProps)({messages:t.processMultipleMessages(void 0,e,{add:"search"}),eof:!0,canceled:!1})}))}},{key:"queryVcard",value:function(e){var t=this;return(0,E.queryVcard)(e).then((function(e){return 499===e.status?(__LOG__(2)`model:Msg:queryVcard error 499 (unimplemented)`,r.reject(new y.E499)):t.processMultipleMessages(void 0,e,{add:"search"})}))}},{key:"incrementalStarredUpdate",value:function(e){return this.processMultipleMessages(void 0,e,{add:"search"})}},{key:"search",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=`${e}__${i.label||i.kind||""}`;if(1!==n||a)return this._search(e,n,r,a,i.label,i.kind);var s=this.ftsCache[o];if(s)return s;var u=this._search(e,n,r,a,i.label,i.kind);this.ftsCache[o]=u;var l=function(){t.ftsCache[o]=null};return setTimeout(l,m.default.FTS_TTL),u.catch(l),u}},{key:"_search",value:function(e,t,n,a,i,o){var s=this,u={searchTerm:e,page:(0,O.isNumber)(t)&&0!==t?t:1,count:(0,O.isNumber)(n)&&0!==n?n:m.default.PAGE_SIZE,remote:a,tagToCancel:a?this.pendingSearchTag:void 0,label:i,kind:o},l={add:"search"};return(0,E.msgFindQuery)("search",u,void 0,this.onSearchTag).then((function(e){if(u.tagToCancel===s.pendingSearchTag&&(s.pendingSearchTag=void 0),499===e.status)return(0,h.promiseProps)({messages:r.resolve([]),eof:!1,canceled:!0});if(404===e.status)return r.reject(new y.E404);if(e.status>=400)return __LOG__(3)`model:Msg:search error ${e.status}`,r.reject(e.status);var t=Array.isArray(e)?e:e.messages,n=!!Array.isArray(e)||e.eof;return(0,h.promiseProps)({messages:s.processMultipleMessages(void 0,t,l),eof:n,canceled:!1})}))}},{key:"queryMedia",value:function(e,t,n,a,i){var o=this,s={remote:e,count:(0,O.isNumber)(t)&&0!==t?t:m.default.PAGE_SIZE,id:a&&a.id,fromMe:a&&a.fromMe,participant:a&&a.participant,direction:n||"before",media:i},u={add:"search"};return(0,E.msgFindQuery)("media",s).then((function(e){return e.status>=400?(__LOG__(3)`model:Msg:media error ${e.status}`,r.reject(e.status)):i?o.processMultipleMessages(void 0,e,{add:"search"}):(0,h.promiseProps)({docCount:e.docCount,linkCount:e.linkCount,mediaCount:e.mediaCount,messages:o.processMultipleMessages(void 0,e.messages,u)})}))}},{key:"getContext",value:function(e,t,n){var a=this,i=this.get(e);if(i)return r.all([(0,E.msgFindQuery)("before",e,n),(0,E.msgFindQuery)("after",e,n)]).spread((function(n,o){return Array.isArray(n)&&Array.isArray(o)?(i.search=!1,r.all([a.processMultipleMessages(e.remote,n,{add:"before",isHistory:!0},t),a.processMultipleMessages(e.remote,o,{add:"after",isHistory:!0},t)])):(__LOG__(3)`model:msg:getContext fetch error`,r.reject(n.status||o.status))}));var o={add:"after",isHistory:!0};return(0,E.msgFindQuery)("after",e,n).then((function(n){return Array.isArray(n)?k.default.isStatusV3(n[0].id.remote)?r.reject("statusV3, stop querying before the msg"):a.processMultipleMessages(e.remote,n,o,t):(__LOG__(3)`model:msg:getContext:after fetch error`,r.reject(n.status))})).then((function(t){var i=(0,_.default)(t[0],"after[0]"),o=i.id.clone();o.count=e.count+1;var s={add:"before",isHistory:!0};return r.all([(0,E.msgFindQuery)("before",o,n).then((function(t){return Array.isArray(t)?t[t.length-1].id.equals(e)?a.processMultipleMessages(e.remote,t,s,(function(){return i.msgChunk})):(__LOG__(3)`model:msg:getContext:before ctx message mismatch`,r.reject(405)):(__LOG__(3)`model:msg:getContext:before fetch error`,r.reject(t.status))})),r.resolve(t)])}))}},{key:"hasSynced",value:function(){return(0,M.default)(this,m.default.COLLECTION_HAS_SYNCED)}},{key:"delete",value:function(){(0,c.default)((0,d.default)(a.prototype),"delete",this).call(this),this.lastReceivedReceipt={},this.lastReceivedPaymentTransaction={},this.preAck={}}},{key:"getKeysForResyncReceipts",value:function(){var e=[],t=(0,o.default)((0,o.default)({},this.lastReceivedReceipt),this.lastReceivedPaymentTransaction);for(var r in t){var a=(0,P.createWid)(r),i=n(26671).default.get(a),s=void 0;if(i&&(s=i.getFirstMsgWithStatus()),s){var u=s.id;u.t=this.lastReceivedReceipt[a]||s.t||0,u.payT=this.lastReceivedPaymentTransaction[a],e.push(u)}else __LOG__(3)`Msg:resyncReceipts wid in lastReceivedReceipt, but no msg: ${a.toString()}`}return e}},{key:"resyncReceipts",value:function(){var e=this;__LOG__(2)`Msg:resyncReceipts`;var t=this.getKeysForResyncReceipts();return 0===t.length?r.resolve():I.default.resyncReceipts(t).then((function(t){Array.isArray(t)?(__LOG__(2)`Msg:resyncReceipts success`,t.forEach((function(t){e.updateLastReceipt(t.id,t.t),e.updateLastTransactionTime(t.id,t.payT),t.acks.forEach((function(n){var r=n.id,a=n.fromMe,i=n.participant,o=n.status,s=n.t;if(null!=r&&null!=a&&null!=o){var u=new w.default({fromMe:a,remote:t.id,id:r,participant:i}),l=e.get(u);l&&(l.isEphemeral&&s?l.updateEphemeralStartTimestamp(s):l.updateAck(o))}else __LOG__(3)`Msg:resyncReceipts invalid response: ${JSON.stringify(n)}`})),t.msgs.length>0&&e.processMultipleMessages(t.id,t.msgs,{update:!0,isHistory:!1}).catchType(y.LogoutDrop,(function(){}))}))):__LOG__(3)`Msg:resyncReceipts error`})).catchTypes3(y.LogoutDrop,y.EphemeralDrop,y.BrowserReplacedDrop,(function(){})).catch((function(e){throw __LOG__(3)`Msg:resyncReceipts dropped ${String(e)} ${e?e.stack:"no stack"}`,new Error("Msg:resyncReceipts dropped")}))}},{key:"updateLastReceipt",value:function(e,t){var n=this.lastReceivedReceipt[e];t&&(!n||t>n)&&(this.lastReceivedReceipt[e]=t)}},{key:"updateLastTransactionTime",value:function(e,t){var n=this.lastReceivedPaymentTransaction[e];t&&(!n||t>n)&&(this.lastReceivedPaymentTransaction[e]=t)}},{key:"processMultipleMessages",value:function(e,t,n,r){var a=this,i=function(){return(0,A._processMultipleMessages)(e,t,n,r)};if(e){var o,s=this.pendingAdd[e];return(o=s?s.then(i):i()).finally((function(){e&&a.pendingAdd[e]===o&&(a.pendingAdd[e]=null)})).catch((function(){})),this.pendingAdd[e]=o}return i()}},{key:"markAllAsStale",value:function(){this.forEach((function(e){return e.unset("recvFresh")}))}}]),a}(v.default);t.MsgCollection=D,D.model=b.default;var N=new D;t.default=N},61787:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ParticipantCollection=t.MsgInfoParticipant=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=a(n(92937)),p=a(n(48629)),h=a(n(34612)),_=a(n(5315)),v=a(n(12717)),m=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,d.prop)(),e.t=(0,d.prop)(),e.contact=(0,d.session)(),e}return(0,o.default)(n,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.addChild("contact",p.default.gadd(this.id))}}]),n}(d.default);m.Proxy="msgInfoParticipant",m.idClass=v.default;var g=(0,d.defineModel)(m);t.MsgInfoParticipant=g;var y=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return n}(f.default);t.ParticipantCollection=y,y.model=g,y.comparator=function(e,t){return(0,h.default)(e.contact,t.contact)};var E=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,d.prop)(),e.usePlayReceipt=(0,d.prop)(),e.playedRemaining=(0,d.prop)(0),e.readRemaining=(0,d.prop)(0),e.deliveryRemaining=(0,d.prop)(0),e.deliveryPrivacyMode=(0,d.prop)(),e.played=(0,d.collection)(y),e.read=(0,d.collection)(y),e.delivery=(0,d.collection)(y),e.settled=(0,d.derived)(e._settled,["usePlayReceipt","playedRemaining","readRemaining"]),e}return(0,o.default)(r,[{key:"_settled",value:function(){return this.usePlayReceipt?!this.playedRemaining:!this.readRemaining}},{key:"getCollection",value:function(){return n(44982).default}}]),r}(d.default);E.Proxy="msgInfo",E.idClass=_.default;var S=(0,d.defineModel)(E);t.default=S},44982:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MsgInfoCollection=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(2205)),l=i(n(99842)),c=i(n(60619)),d=i(n(61787)),f=n(49336),p=n(19761),h=i(n(5315)),_=a(n(7860)),v=function(e){(0,u.default)(a,e);var t=(0,l.default)(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"_initializeStaleCollection",value:function(){var e=this;this.listenTo(_.default,"change:stream",(function(){_.default.stream===_.STREAM.DISCONNECTED&&e.forEach((function(e){e.settled||e.set("stale",!0)}))}))}},{key:"_find",value:function(e){var t=n(66312).default.get(e);return t?t.isSentByMe?(0,f.sendQueryMsgInfo)(t):r.reject("message not sent by me"):r.reject(`No message found for id: ${e}`)}},{key:"updateInfo",value:function(e,t,n,r,a,i){var o=new h.default({from:t,to:n,id:e,participant:a}),s=new h.default({from:t,to:n,id:e}),u=this.get(o)||this.get(s);if(u)return(0,p.updateMsgInfo)(u,r,a,i)}}]),a}(c.default);t.MsgInfoCollection=v,v.model=d.default,v.staleCollection=!0;var m=new v;t.default=m},38761:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createDeviceSentMessage=function(e,t){return{deviceSentMessage:{destinationJid:t.toString({legacy:!0}),message:e}}},t.populateMessageContextInfo=function(e,t,n){if(!t&&!n)return;e.messageContextInfo={deviceListMetadata:{senderKeyHash:null==t?void 0:t.keyHash,senderTimestamp:null==t?void 0:t.timestamp,recipientKeyHash:null==n?void 0:n.keyHash,recipientTimestamp:null==n?void 0:n.timestamp}}},t.createViewOnceFutureProofMessage=f,t.createDisappearingMode=p,t.createMsgProtobuf=function(e,t){var n=function(e){var t=e.id,n=e.toJSON();delete n.status,delete n.mimetype,delete n.height,delete n.width,delete n.recipients,delete n.chat,delete n.broadcast,delete n.ack,delete n.invis,delete n.filehash,delete n.recvFresh,delete n.mediaData,c.default.isHttp(e.clientUrl)||delete n.clientUrl;c.default.isHttp(e.deprecatedMms3Url)||delete n.deprecatedMms3Url;for(var r in n)null==n[r]&&delete n[r];var a=i.default.get(t.remote);a&&(n.conversionTuple=a.serialize());return n}(e),r={};if(n.quotedMsg){var a=n.quotedMsg.mentionedJidList,o=Array.isArray(a)&&a.length>0?{mentionedJid:a.map(v)}:void 0;r.stanzaId=n.quotedStanzaID,r.remoteJid=v(n.quotedRemoteJid),r.participant=v(n.quotedParticipant),r.quotedMessage=_(n.quotedMsg,{duration:n.quotedMsg.duration,directPath:n.quotedMsg.directPath,encFilehash:n.quotedMsg.encFilehash,filehash:n.quotedMsg.filehash,height:n.quotedMsg.height,mediaKey:n.quotedMsg.mediaKey,mediaKeyTimestamp:(0,l.isNumber)(n.quotedMsg.mediaKeyTimestamp)?n.quotedMsg.mediaKeyTimestamp:void 0,mimetype:n.quotedMsg.mimetype,url:n.quotedMsg.clientUrl||n.quotedMsg.deprecatedMms3Url,width:n.quotedMsg.width},o)}else n.quotedRemoteJid&&(r.remoteJid=v(n.quotedRemoteJid));if(n.mentionedJidList&&n.mentionedJidList.length>0){var s=n.mentionedJidList;r.mentionedJid=s.map(v)}n.conversionTuple&&Object.assign(r,n.conversionTuple);n.isForwarded&&(r.isForwarded=n.isForwarded);n.forwardingScore&&(r.forwardingScore=n.forwardingScore);n.ephemeralDuration&&(r.expiration=n.ephemeralDuration);n.ephemeralSettingTimestamp&&(r.ephemeralSettingTimestamp=n.ephemeralSettingTimestamp);n.disappearingModeInitiator&&(r.disappearingMode=p(n.disappearingModeInitiator));n.ctwaContext&&(r.externalAdReply={sourceUrl:n.ctwaContext.sourceUrl,sourceId:n.ctwaContext.sourceId,sourceType:n.ctwaContext.sourceType,body:n.ctwaContext.description,title:n.ctwaContext.title,thumbnailUrl:n.ctwaContext.thumbnailUrl,thumbnail:n.ctwaContext.thumbnail?m(n.ctwaContext.thumbnail):void 0,mediaType:n.ctwaContext.mediaType,mediaUrl:n.ctwaContext.mediaUrl});return _(n,t,Object.keys(r).length>0?r:void 0)},t.createMessageKey=function(e){return{remoteJid:v(e.to),fromMe:!0,id:e.id.id}};var a=n(92827),i=r(n(48633)),o=n(41150),s=n(676),u=r(n(22021)),l=n(88828),c=r(n(69267)),d=r(n(12717));function f(e){return{viewOnceMessage:{message:e}}}function p(e){var t;switch(e){case o.DisappearingModeInitiator.ChangedInChat:t=s.DisappearingModeInitiator.CHANGED_IN_CHAT;break;case o.DisappearingModeInitiator.InitiatedByMe:t=s.DisappearingModeInitiator.INITIATED_BY_ME;break;case o.DisappearingModeInitiator.InitiatedByOther:t=s.DisappearingModeInitiator.INITIATED_BY_OTHER}return{initiator:t}}function h(e,t,n){var r=e.documentMessage,a=e.imageMessage,i=e.locationMessage,o=e.videoMessage;if(t.isForwarded&&(r||a||i||o))return e;var u={buttons:!0===t.isForwarded?void 0:t.dynamicReplyButtons,footerText:t.footer,contextInfo:n};return r?(u.documentMessage=r,u.headerType=s.ButtonsMessageHeaderType.DOCUMENT,u.contentText=t.caption):a?(u.imageMessage=a,u.headerType=s.ButtonsMessageHeaderType.IMAGE,u.contentText=t.caption):i?(u.locationMessage=i,u.headerType=s.ButtonsMessageHeaderType.LOCATION,u.contentText=t.caption):o?(u.videoMessage=o,u.headerType=s.ButtonsMessageHeaderType.VIDEO,u.contentText=t.caption):t.title?(u.text=t.title,u.headerType=s.ButtonsMessageHeaderType.TEXT,u.contentText=t.body):(u.contentText=t.body,u.headerType=s.ButtonsMessageHeaderType.EMPTY),{buttonsMessage:u}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=r||{},i=e.mimetype||t.mimetype||void 0,o=t.duration;switch(e.type){case"chat":"url"===e.subtype||e.quotedMsg||e.quotedRemoteJid||Array.isArray(e.mentionedJidList)&&e.mentionedJidList.length>0||e.conversionTuple||e.isForwarded||e.forwardingScore||e._isPaymentNoteMsg||e.ephemeralDuration||e.ephemeralSettingTimestamp||e.ctwaContext?a.extendedTextMessage={text:e.body,matchedText:e.matchedText,canonicalUrl:e.canonicalUrl,description:e.description,title:e.title,jpegThumbnail:m(e.thumbnail),previewType:e.richPreviewType,contextInfo:n,mediaKey:m(e.mediaKey),mediaKeyTimestamp:(0,l.isNumber)(e.mediaKeyTimestamp)?e.mediaKeyTimestamp:void 0,thumbnailDirectPath:e.thumbnailDirectPath,thumbnailSha256:m(e.thumbnailSha256),thumbnailEncSha256:m(e.thumbnailEncSha256),thumbnailHeight:e.thumbnailHeight,thumbnailWidth:e.thumbnailWidth}:a.conversation=e.body;break;case"groups_v4_invite":a.groupInviteMessage={inviteCode:e.inviteCode,inviteExpiration:parseInt(e.inviteCodeExp,10),groupJid:e.inviteGrp,groupName:e.inviteGrpName,caption:e.comment,jpegThumbnail:m(e.inviteGrpJpegThum)};break;case"sticker":if("image/webp"!==t.mimetype)throw __LOG__(3)`invalid sticker mimetype: ${t.mimetype}`,new Error("invalid sticker mimetype");a.stickerMessage={url:t.url,mimetype:t.mimetype,directPath:t.directPath||void 0,fileSha256:m(t.filehash),fileEncSha256:m(t.encFilehash),mediaKey:m(t.mediaKey),mediaKeyTimestamp:(0,l.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,fileLength:(0,l.isNumber)(e.size)?e.size:void 0,height:e.height,width:e.width,firstFrameLength:t.firstFrameLength||void 0,firstFrameSidecar:e.firstFrameSidecar||void 0,isAnimated:t.isAnimated,contextInfo:n},g(e.type,a.stickerMessage);break;case"location":var u={degreesLatitude:parseFloat(e.lat)||void 0,degreesLongitude:parseFloat(e.lng)||void 0,jpegThumbnail:m(e.body),contextInfo:n};if(e.loc&&(0,l.isString)(e.loc)){var c=e.loc.split("\n");u.name=c[0],u.address=c[1],u.url=e.clientUrl}a.locationMessage=u;break;case"vcard":a.contactMessage={displayName:e.vcardFormattedName,vcard:e.body,contextInfo:n};break;case"multi_vcard":a.contactsArrayMessage={displayName:e.subtype,contacts:e.vcardList.map((function(e){return e})),contextInfo:n};break;case"image":a.imageMessage={url:t.url,mimetype:i,caption:e.caption,directPath:t.directPath||void 0,fileSha256:m(t.filehash),fileEncSha256:m(t.encFilehash),height:t.height,width:t.width,fileLength:(0,l.isNumber)(e.size)?e.size:void 0,mediaKey:m(t.mediaKey),mediaKeyTimestamp:(0,l.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:e.isViewOnce?void 0:m(e.body),contextInfo:n,viewOnce:e.isViewOnce},g(e.type,a.imageMessage);break;case"product":a.productMessage={product:{productImage:{url:t.url,mimetype:i,caption:e.caption,directPath:t.directPath||void 0,fileSha256:m(t.filehash),fileEncSha256:m(t.encFilehash),height:t.height,width:t.width,fileLength:(0,l.isNumber)(e.size)?e.size:void 0,mediaKey:m(t.mediaKey),mediaKeyTimestamp:(0,l.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:m(e.body)},productId:e.productId,title:e.title,description:e.description,currencyCode:e.currencyCode,priceAmount1000:e.priceAmount1000||void 0,salePriceAmount1000:e.salePriceAmount1000||void 0,retailerId:e.retailerId,url:e.url,productImageCount:e.productImageCount},businessOwnerJid:e.businessOwnerJid,contextInfo:n};break;case"document":var d={url:t.url,mimetype:i,title:e.caption,directPath:t.directPath||void 0,fileSha256:m(t.filehash),fileEncSha256:m(t.encFilehash),fileName:t.filename,fileLength:(0,l.isNumber)(e.size)?e.size:void 0,mediaKey:m(t.mediaKey),mediaKeyTimestamp:(0,l.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:m(e.body),contextInfo:n,contactVcard:e.isVcardOverMmsDocument,thumbnailDirectPath:t.thumbnailDirectPath,thumbnailSha256:m(t.thumbnailSha256),thumbnailEncSha256:m(t.thumbnailEncSha256),thumbnailHeight:t.thumbnailHeight,thumbnailWidth:t.thumbnailWidth};(0,l.isNumber)(e.pageCount)&&!isNaN(e.pageCount)&&(d.pageCount=e.pageCount),a.documentMessage=d;break;case"ptt":case"audio":o=(0,l.isString)(o)?parseInt(o,10):o,a.audioMessage={url:t.url,mimetype:i,directPath:t.directPath||void 0,fileSha256:m(t.filehash),fileEncSha256:m(t.encFilehash),seconds:o,ptt:"ptt"===e.type,fileLength:(0,l.isNumber)(e.size)?e.size:void 0,mediaKey:m(t.mediaKey),mediaKeyTimestamp:(0,l.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,contextInfo:n,streamingSidecar:e.streamingSidecar},g(e.type?"ptt":"audio",a.audioMessage);break;case"video":o=(0,l.isString)(o)?parseInt(o,10):o,a.videoMessage={url:t.url,mimetype:i,directPath:t.directPath||void 0,fileSha256:m(t.filehash),fileEncSha256:m(t.encFilehash),height:t.height,width:t.width,seconds:o,caption:e.caption,fileLength:(0,l.isNumber)(e.size)?e.size:void 0,mediaKey:m(t.mediaKey),mediaKeyTimestamp:(0,l.isNumber)(t.mediaKeyTimestamp)?t.mediaKeyTimestamp:void 0,jpegThumbnail:e.isViewOnce?void 0:m(e.body),gifPlayback:e.isGif,gifAttribution:e.gifAttribution,contextInfo:n,streamingSidecar:e.streamingSidecar,viewOnce:e.isViewOnce},g(e.type,a.videoMessage);break;case"protocol":var y;switch(e.subtype){case"revoke":var E=e.protocolMessageKey,S={remoteJid:v(E.remote),fromMe:E.fromMe,id:E.id,participant:v(E.participant)};y={key:S,type:s.ProtocolMessageType.REVOKE};break;case"ephemeral_setting":y={type:s.ProtocolMessageType.EPHEMERAL_SETTING,ephemeralExpiration:e.ephemeralDuration};break;case"ephemeral_sync_response":y={type:s.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE,ephemeralExpiration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp,disappearingMode:p(e.disappearingModeInitiator)};break;case"app_state_sync_key_share":y={type:s.ProtocolMessageType.APP_STATE_SYNC_KEY_SHARE,appStateSyncKeyShare:e.appStateSyncKeyShare};break;case"app_state_sync_key_request":y={type:s.ProtocolMessageType.APP_STATE_SYNC_KEY_REQUEST,appStateSyncKeyRequest:e.appStateSyncKeyRequest};break;case"app_state_fatal_exception_notification":y={type:s.ProtocolMessageType.APP_STATE_FATAL_EXCEPTION_NOTIFICATION,appStateFatalExceptionNotification:e.appStateFatalExceptionNotification}}y&&(a.protocolMessage=y);break;case"payment":var b={};b.stanzaId=e.quotedStanzaID,b.mentionedJid=e.mentionedJidList&&e.mentionedJidList.map(v),b.isForwarded=e.isForwarded,b.forwardingScore=e.forwardingScore,b.participant=v(e.quotedParticipant),e.quotedMsg&&(b.quotedMessage=_(e.quotedMsg));var T=e.paymentNoteMsg?_(Object.assign(e.paymentNoteMsg,{_isPaymentNoteMsg:!0}),b):void 0;switch(e.subtype){case"send":var w=e.paymentRequestMessageKey?{fromMe:e.paymentRequestMessageKey.fromMe,remoteJid:v(e.paymentRequestMessageKey.remote),id:e.paymentRequestMessageKey.id,participant:v(e.paymentRequestMessageKey.participant)}:void 0;a.sendPaymentMessage={requestMessageKey:w,noteMessage:T};break;case"request":a.requestPaymentMessage={amount1000:e.amount1000,expiryTimestamp:e._paymentExpiryTimestamp,requestFrom:e._paymentRequestFrom,currencyCodeIso4217:e._currencyCodeIso4217,noteMessage:T}}break;case"template_button_reply":a.templateButtonReplyMessage={selectedId:e.selectedId,selectedIndex:e.selectedIndex,selectedDisplayText:e.body,contextInfo:n};break;case"template":return"text"===e.subtype?(e.type="chat",e.title&&(e.body="*"+e.title+"*\n"+e.body)):e.type=e.subtype,_(e,t,n,a);case"list":a.listMessage=e.list,a.listMessage.contextInfo=n;break;case"list_response":a.listResponseMessage=e.listResponse,a.listResponseMessage.contextInfo=n;break;case"buttons_response":a.buttonsResponseMessage=e.buttonsResponse,a.buttonsResponseMessage.contextInfo=n;break;case"order":e.itemCount||e.message||e.orderId||e.orderTitle||e.sellerJid||e.status||e.surface||e.thumbnail||e.token||e.totalAmount1000||e.totalCurrencyCode?a.orderMessage={itemCount:e.itemCount,message:e.message,orderId:e.orderId,orderTitle:e.orderTitle,sellerJid:e.sellerJid,status:e.status,surface:e.surface,thumbnail:m(e.thumbnail),token:e.token,totalAmount1000:e.totalAmount1000,totalCurrencyCode:e.totalCurrencyCode}:a.conversation=e.body}return!0===e.isDynamicReplyButtonsMsg&&(a=h(a,e,n)),e.isViewOnce&&(a=f(a)),a}function v(e){return e instanceof d.default?e.toString({legacy:!0}):(0,l.isString)(e)?e.replace(/@c.us$/,"@s.whatsapp.net"):void 0}function m(e){return e?(0,a.decodeB64)(e):void 0}function g(e,t){u.default.supportsFeature(u.default.F.LOG_MISSING_REQUIRED_PROPERTIES)&&(t.viewOnce||(null==t.directPath&&(__LOG__(2,void 0,void 0,!0)`directPath missing from msg type ${e}`,SEND_LOGS("outgoing-media-message-missing-direct-path")),null==t.fileSha256&&(__LOG__(2,void 0,void 0,!0)`fileSha256 missing from msg type ${e}`,SEND_LOGS("outgoing-media-message-missing-file-sha")),null==t.fileEncSha256&&(__LOG__(2,void 0,void 0,!0)`fileEncSha256 missing from msg type ${e}`,SEND_LOGS("outgoing-media-message-missing-file-enc-sha")),null==t.url&&(__LOG__(2,void 0,void 0,!0)`url(deprecatedMms3Url) missing from msg type ${e}`,SEND_LOGS("outgoing-media-message-missing-mms3-url"))))}},78236:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.convertToTextWithoutSpecialEmojis=k,t.default=void 0;var i=a(n(81109)),o=n(92827),s=a(n(96486)),u=n(24046),l=a(n(79140)),c=r(n(93743)),d=a(n(34263)),f=n(41150),p=n(676),h=a(n(8513)),_=n(71701),v=a(n(22021)),m=n(31230),g=n(97223),y=r(n(46515)),E=a(n(5315)),S=a(n(98958)),b=a(n(63056)),T=n(88828),w=a(n(69267)),A=a(n(12717)),C=n(75793),O=n(6357),M=n(76007),I=s.default.memoize((function(e){if((0,g.isConnectedToPage)())return w.default.hostname(e);if(!e)return"";var t=w.default.isHttp(e)?e:"http://"+e;return new self.URL(t).hostname}));function k(e){return e?c.default.platform===c.PLATFORMS.ANDROID?e:h.default.convertToTextWithoutSpecialEmojis(e):e}function P(e,t){var n;v.default.supportsFeature(v.default.F.LOG_MISSING_REQUIRED_PROPERTIES)&&e.id&&("status"===(null===(n=e.id.remote)||void 0===n?void 0:n.user)&&A.default.isPSA(e.author)||e.id.fromMe||(null==t.directPath&&null==t.fileEncSha256?(__LOG__(2,void 0,void 0,!0)`directPath and fileEncSha256 missing from msg type ${e.type}`,SEND_LOGS("media-message-missing-direct-path-and-file-enc")):null==t.directPath?(__LOG__(2,void 0,void 0,!0)`directPath missing from msg type ${e.type}`,SEND_LOGS("media-message-missing-direct-path")):null==t.fileEncSha256&&(__LOG__(2,void 0,void 0,!0)`fileEncSha256 missing from msg type ${e.type}`,SEND_LOGS("media-message-missing-file-enc")),null==t.url&&(__LOG__(2,void 0,void 0,!0)`url(deprecatedMms3Url) is missing from msg type ${e.type}`,SEND_LOGS("media-message-missing-mms3-url")),null==t.mediaKey&&(__LOG__(2,void 0,void 0,!0)`mediaKey is missing from msg type ${e.type}`,SEND_LOGS("media-message-missing-media-key"))))}var R={parseMsgProto:function(e,t,n,r,a,i){if(!e)return __LOG__(4,void 0,new Error,!0)`drop: not Message`,SEND_LOGS("null-message"),t;var o=e.conversation,s=e.imageMessage,u=e.contactMessage,l=e.locationMessage,c=e.liveLocationMessage,f=e.extendedTextMessage,p=e.documentMessage,h=e.audioMessage,_=e.videoMessage,m=e.stickerMessage,g=e.contactsArrayMessage,y=e.sendPaymentMessage,E=e.requestPaymentMessage,S=e.productMessage,w=e.groupInviteMessage,A=e.viewOnceMessage,C=e.ephemeralMessage,O=e.orderMessage,M=e.listMessage,I=e.listResponseMessage,P=e.protocolMessage,R=e.declinePaymentRequestMessage,D=e.cancelPaymentRequestMessage,N=e.paymentInviteMessage,L=e.templateMessage,x=e.templateButtonReplyMessage,U=e.buttonsResponseMessage,F=e.buttonsMessage,G=e.interactiveMessage,B=void 0;if((0,T.isString)(o)&&this.parseConversationProto(t,o),w&&this.parseGroupInviteMessageProto(t,w),s&&(this.parseImageMessageProto(t,s),B=s.contextInfo),m&&(this.parseStickerMessageProto(t,m),B=m.contextInfo),u&&(this.parseContactMessageProto(t,u),B=u.contextInfo),g&&(this.parseContactsArrayMessageProto(t,g),B=g.contextInfo),l&&(this.parseLocationMessageProto(t,l),B=l.contextInfo),c&&(this.parseLiveLocationMessageProto(t,c,a),B=c.contextInfo),y&&(B=y&&y.noteMessage&&y.noteMessage.extendedTextMessage&&y.noteMessage.extendedTextMessage.contextInfo,this.parseSendPaymentMessageProto(t,y,r)),E&&(B=E&&E.noteMessage&&E.noteMessage.extendedTextMessage&&E.noteMessage.extendedTextMessage.contextInfo,this.parseRequestPaymentMessageProto(t,E,r)),R&&this.parseDeclinePaymentRequestMessageProto(t,R),D&&this.parseCancelPaymentRequestMessageProto(t,D),N&&this.parsePaymentInviteMessageProto(t,N),f&&(this.parseExtendedTextMessageProto(t,f),B=f.contextInfo),p&&(this.parseDocumentMessageProto(t,p),B=p.contextInfo),h&&(this.parseAudioMessageProto(t,h),B=h.contextInfo),_&&(this.parseVideoMessageProto(t,_),B=_.contextInfo),P&&this.parseProtocolMessageProto(t,P,n),S&&(this.parseProductMessageProto(t,S),B=S.contextInfo),O&&(this.parseOrderMessageProto(t,O),B=O.contextInfo),M&&(this.parseListMessageProto(t,M),B=M.contextInfo),I&&(this.parseListResponseMessageProto(t,I),B=I.contextInfo),A&&this.parseViewOnceFutureProofMessageProto(t,A),C&&this.parseEphemeralFutureProofMessageProto(t,C),F&&this.parseButtonsMessageProto(t,F),U&&(this.parseButtonsResponseMessageProto(t,U),B=U.contextInfo),G&&(this.parseInteractiveMessageProto(t,G),B=G.contextInfo),v.default.supportsFeature(v.default.F.MD_BACKEND)){var j=e.deviceSentMessage,Y=e.highlyStructuredMessage;j&&this.parseDeviceSentMessage(t,j,n),Y&&(t.type=d.default.MSG_TYPE.HSM,Y.hydratedHsm&&Y.hydratedHsm.hydratedTemplate&&(t.body=k(Y.hydratedHsm.hydratedTemplate.hydratedContentText)))}return L&&(v.default.supportsFeature(v.default.F.MD_BACKEND)&&L.hydratedTemplate?this.parseTemplateMessage(t,L.hydratedTemplate):this.parseTemplateMessage(t,L.hydratedFourRowTemplate)),x&&(this.parseTemplateButtonReplyMessage(t,x),B=x.contextInfo,t.type=d.default.MSG_TYPE.TEMPLATE_BUTTON_REPLY),B&&(this.parseContextInfoProto(t,B,i),B.externalAdReply&&b.default.ctwaContextRender&&this.parseCtwaContextProto(t,B.externalAdReply)),t},parseConversationProto:function(e,t){e.type=d.default.MSG_TYPE.CHAT,e.body=k(t)},parseImageMessageProto:function(e,t){e.type=d.default.MSG_TYPE.IMAGE,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath||"",e.mimetype=t.mimetype||"",e.caption=k(t.caption),e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.height=t.height||0,e.width=t.width||0,e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:l.default.globalUnixTime(),e.body=this.decodeBytes(t.jpegThumbnail)||"",e.interactiveAnnotations=t.interactiveAnnotations,e.scanLengths=t.scanLengths,e.scansSidecar=t.scansSidecar,e.isViewOnce=!0===t.viewOnce,e.thumbnailDirectPath=t.thumbnailDirectPath,e.thumbnailSha256=this.decodeBytes(t.thumbnailSha256),e.thumbnailEncSha256=this.decodeBytes(t.thumbnailEncSha256),P(e,t)},parseStickerMessageProto:function(e,t){e.type=d.default.MSG_TYPE.STICKER,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath||"",e.mimetype=t.mimetype||"",e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.mediaKey=(0,S.default)(this.decodeBytes(t.mediaKey)),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:l.default.globalUnixTime(),e.height=t.height||0,e.width=t.width||0,e.firstFrameLength=t.firstFrameLength,e.firstFrameSidecar=t.firstFrameSidecar,e.isAnimated=t.isAnimated,P(e,t)},parseContactMessageProto:function(e,t){e.type=d.default.MSG_TYPE.VCARD,e.vcardFormattedName=t.displayName,e.body=t.vcard},parseContactsArrayMessageProto:function(e,t){var n=t.contacts;e.type=d.default.MSG_TYPE.MULTI_VCARD,e.vcardFormattedName=t.displayName,e.vcardList=Array.isArray(n)?n.map((function(e){return{displayName:e.displayName,vcard:e.vcard}})):[]},parseLocationMessageProto:function(e,t){var n=t.name&&t.address?`${t.name}\n${t.address}`:t.name||t.address||"";e.type=d.default.MSG_TYPE.LOCATION,e.lat=void 0!==t.degreesLatitude?t.degreesLatitude:void 0,e.lng=void 0!==t.degreesLongitude?t.degreesLongitude:void 0,e.loc=n,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.clientUrl=t.url},parseExtendedTextMessageProto:function(e,t){var n=t.matchedText||t.canonicalUrl||t.description||t.title;if(n){var r=I(t.canonicalUrl||""),a=I(t.matchedText||"");e.canonicalUrl=r===a||""===r?t.canonicalUrl:a}e.type=d.default.MSG_TYPE.CHAT,e.subtype=n?"url":void 0,e.body=k(t.text||""),e.matchedText=t.matchedText,e.description=t.description,e.title=t.title,e.thumbnail=this.decodeBytes(t.jpegThumbnail)||"",e.richPreviewType=t.previewType,e.doNotPlayInline=t.doNotPlayInline,e.textColor=t.textArgb,e.backgroundColor=t.backgroundArgb,e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=t.mediaKeyTimestamp,e.thumbnailDirectPath=t.thumbnailDirectPath,e.thumbnailSha256=this.decodeBytes(t.thumbnailSha256),e.thumbnailEncSha256=this.decodeBytes(t.thumbnailEncSha256),e.thumbnailHeight=t.thumbnailHeight,e.thumbnailWidth=t.thumbnailWidth;var i=p.ExtendedTextMessageFontType;if(null!=t.font)switch(t.font){case i.SANS_SERIF:case i.SERIF:case i.NORICAN_REGULAR:case i.BRYNDAN_WRITE:case i.BEBASNEUE_REGULAR:case i.OSWALD_HEAVY:e.font=t.font}},parseDocumentMessageProto:function(e,t){e.type=d.default.MSG_TYPE.DOCUMENT,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath,e.mimetype=t.mimetype,e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.pageCount=t.pageCount||0,e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:l.default.globalUnixTime(),e.filename=(0,u.cleanIncomingFilename)(t.fileName||t.title),e.caption=e.filename,e.body=this.decodeBytes(t.jpegThumbnail)||"",e.isVcardOverMmsDocument=Boolean(t.contactVcard)&&e.size<=1024*b.default.vcardMaxSizeKb,e.thumbnailDirectPath=t.thumbnailDirectPath,e.thumbnailSha256=this.decodeBytes(t.thumbnailSha256),e.thumbnailEncSha256=this.decodeBytes(t.thumbnailEncSha256),e.thumbnailHeight=t.thumbnailHeight,e.thumbnailWidth=t.thumbnailWidth},parseAudioMessageProto:function(e,t){e.type=t.ptt?d.default.MSG_TYPE.PTT:d.default.MSG_TYPE.AUDIO,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath,e.mimetype=t.mimetype,e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.duration=`${t.seconds||0}`,e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:l.default.globalUnixTime(),e.streamingSidecar=t.streamingSidecar,P(e,t)},parseVideoMessageProto:function(e,t){e.type=d.default.MSG_TYPE.VIDEO,e.deprecatedMms3Url=this.decodeUrl(t.url),e.directPath=t.directPath,e.mimetype=t.mimetype,e.filehash=this.decodeBytes(t.fileSha256),e.encFilehash=this.decodeBytes(t.fileEncSha256),e.size=t.fileLength||0,e.height=t.height,e.width=t.width,e.duration=`${t.seconds||0}`,e.mediaKey=this.decodeBytes(t.mediaKey),e.mediaKeyTimestamp=null!=t.mediaKeyTimestamp?t.mediaKeyTimestamp:l.default.globalUnixTime(),e.caption=k(t.caption),e.body=this.decodeBytes(t.jpegThumbnail)||"",e.isGif=t.gifPlayback,e.gifAttribution=t.gifAttribution,e.streamingSidecar=t.streamingSidecar,e.interactiveAnnotations=t.interactiveAnnotations,e.isViewOnce=!0===t.viewOnce,e.thumbnailDirectPath=t.thumbnailDirectPath,e.thumbnailSha256=this.decodeBytes(t.thumbnailSha256),e.thumbnailEncSha256=this.decodeBytes(t.thumbnailEncSha256),P(e,t)},parseContextInfoProto:function(e,t,n){var r=t.quotedMessage,a=t.mentionedJid;e.quotedMsg=r&&this.parseMsgProto(r,{type:d.default.MSG_TYPE.UNKNOWN}),e.quotedMsg&&"payment"===e.quotedMsg.type&&n&&__LOG__(2)`parseContextInfoProto: payment not supported`,e.quotedStanzaID=t.stanzaId,e.quotedParticipant=this.decodeJid(t.participant),e.quotedRemoteJid=this.decodeJid(t.remoteJid),e.mentionedJidList=Array.isArray(a)?a.map(this.decodeJid):a,e.isForwarded=t.isForwarded,e.forwardingScore=t.forwardingScore,null!=t.expiration&&(e.ephemeralDuration=t.expiration),null!=t.ephemeralSettingTimestamp&&(e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp),null!=t.ephemeralSharedSecret&&(e.ephemeralSharedSecret=t.ephemeralSharedSecret),null!=t.disappearingMode&&this.parseDisappearingModeProto(e,t.disappearingMode)},parseCtwaContextProto:function(e,t){var n=y.findLink(t.sourceUrl||"",!1,e.from);e.ctwaContext={sourceUrl:t.sourceUrl,description:t.body,title:t.title,thumbnail:t.thumbnail?this.decodeBytes(t.thumbnail):null,thumbnailUrl:t.thumbnailUrl,mediaType:t.mediaType,mediaUrl:t.mediaUrl,isSuspiciousLink:n&&n.suspiciousCharacters&&n.suspiciousCharacters.size>0}},_getMsgKey:function(e,t){if(!e)throw new Error("parseProtocolMessageProto: no message key is defined for protocol message");var n=e.id;if(!n)throw new Error("parseProtocolMessageProto: no message id is defined for protocol message");return v.default.supportsFeature(v.default.F.MD_BACKEND)?new E.default({id:n,fromMe:t.id.fromMe,remote:t.id.remote,participant:t.id.participant}):new E.default({id:n,fromMe:e.fromMe,remote:this.decodeJid(e.remoteJid),participant:this.decodeJid(e.participant)})},parseProtocolMessageProto:function(e,t,n){if("relay"===n||t.type===p.ProtocolMessageType.EPHEMERAL_SETTING){var r=t.key,a=t.type,i=null;if(e.type=d.default.MSG_TYPE.PROTOCOL,null!=a)switch(a){case p.ProtocolMessageType.REVOKE:i=this._getMsgKey(r,e),e.protocolMessageKey=i,e.subtype="revoke";break;case p.ProtocolMessageType.EPHEMERAL_SETTING:e.subtype="ephemeral_setting",e.ephemeralDuration=t.ephemeralExpiration;break;case p.ProtocolMessageType.EPHEMERAL_SYNC_RESPONSE:e.subtype="ephemeral_sync_response",e.ephemeralDuration=t.ephemeralExpiration,e.ephemeralSettingTimestamp=t.ephemeralSettingTimestamp,null!=t.disappearingMode&&this.parseDisappearingModeProto(e,t.disappearingMode);break;case p.ProtocolMessageType.HISTORY_SYNC_NOTIFICATION:e.subtype="history_sync_notification";var o=t.historySyncNotification;if(o){var s={directPath:o.directPath,encFilehash:this.decodeBytes(o.fileEncSha256),filehash:this.decodeBytes(o.fileSha256),mediaKey:this.decodeBytes(o.mediaKey),type:"md-msg-hist"};e.historySyncMetaData={historySyncNotification:t.historySyncNotification,downloadOptions:s}}break;case p.ProtocolMessageType.APP_STATE_SYNC_KEY_REQUEST:case p.ProtocolMessageType.APP_STATE_SYNC_KEY_SHARE:case p.ProtocolMessageType.MSG_FANOUT_BACKFILL_REQUEST:case p.ProtocolMessageType.INITIAL_SECURITY_NOTIFICATION_SETTING_SYNC:case p.ProtocolMessageType.APP_STATE_FATAL_EXCEPTION_NOTIFICATION:e.subtype="unknown"}}},decodeJid:function(e){return A.default.isWid(e)?(0,C.createWid)(e):e},decodeUrl:function(e){return e&&!e.includes("/u/")?e:void 0},decodeBytes:function(e){return e?(0,o.encodeB64)(e):void 0},parseDeviceSentMessage:function(e,t,n){var r=this.decodeJid(t.destinationJid);e.id.remote=r,e.to=r,this.parseMsgProto(t.message,e,n)},parseTemplateMessage:function(e,t){var n=t.documentMessage,r=t.imageMessage,a=t.locationMessage,i=t.videoMessage;e.isFromTemplate=!0,n?this.parseDocumentMessageProto(e,n):r?this.parseImageMessageProto(e,r):a?this.parseLocationMessageProto(e,a):i?this.parseVideoMessageProto(e,i):(e.type=d.default.MSG_TYPE.CHAT,t.hydratedContentText&&(e.body=k(t.hydratedContentText))),t.hydratedButtons&&this.parseButtons(e,t),t.hydratedContentText&&(e.caption=k(t.hydratedContentText)),t.hydratedFooterText&&(e.footer=k(t.hydratedFooterText)),t.hydratedTitleText&&(e.title=k(t.hydratedTitleText))},parseButtons:function(e,t){var n=t.hydratedButtons;n.length&&(e.hydratedButtons=n)},parseTemplateButtonReplyMessage:function(e,t){e.body=k(t.selectedDisplayText),e.selectedIndex=t.selectedIndex,e.selectedId=t.selectedId},parseProductMessageProto:function(e,t){var n=t.product;n&&(n.productImage&&this.parseImageMessageProto(e,n.productImage),e.type=d.default.MSG_TYPE.PRODUCT,e.businessOwnerJid=t.businessOwnerJid,e.productId=n.productId,e.currencyCode=n.currencyCode,e.priceAmount1000=n.priceAmount1000,e.salePriceAmount1000=n.salePriceAmount1000,e.retailerId=n.retailerId,e.url=n.url,e.productImageCount=n.productImageCount,e.title=n.title,e.description=n.description)},parseLiveLocationMessageProto:function(e){v.default.supportsFeature(v.default.F.MD_BACKEND)&&(e.subtype="phone_only_feature"),__LOG__(2)`parseLiveLocationMessageProto: not supported`},_getPaymentRequestMessageKey:function(e,t){if(!e)throw new Error("_getPaymentRequestMessageKey: no message key is defined");var n,r=e.id;if(!r)throw new Error("_getPaymentRequestMessageKey: no key id is defined");if(!t.id)return __LOG__(3)`_getPaymentRequestMessageKey: no message id is defined`,null;if(t.id.remote.isGroup()){if(!t.id.fromMe&&!this.decodeJid(e.participant).equals((0,_.getMeUser)())&&"send"!==t.subtype)return null;n=this.decodeJid(e.participant)}return new E.default({fromMe:!t.id.fromMe,remote:t.id.remote,id:r,participant:n})},parseSendPaymentMessageProto:function(e,t,n){if((null==n?void 0:n.futureproofed)||(0,O.hasUnsupportedCurrency)(n))e.type="unknown",e.subtype="phone_only_feature",__LOG__(2)`parseSendPaymentMessageProto: does not support novi transactions`;else{var r,a;e.type=d.default.MSG_TYPE.PAYMENT,e.subtype="send",(null===(r=t.noteMessage)||void 0===r?void 0:r.extendedTextMessage)||null!=(null===(a=t.noteMessage)||void 0===a?void 0:a.conversation)?(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg)):e.subtype="futureproof",(0,O.parseMsgPaymentInfo)(e,n);var i=t.requestMessageKey;i&&(e.paymentRequestMessageKey=this._getPaymentRequestMessageKey(i,e))}},parseRequestPaymentMessageProto:function(e,t,n){if((null==n?void 0:n.futureproofed)||(0,O.hasUnsupportedCurrency)(n))e.subtype="phone_only_feature",__LOG__(2)`parseRequestPaymentMessageProto: does not support novi transactions`;else{var r,a;if(e.type=d.default.MSG_TYPE.PAYMENT,(0,O.parseMsgPaymentInfo)(e,n),e.subtype="request",(null===(r=t.noteMessage)||void 0===r?void 0:r.extendedTextMessage)||null!=(null===(a=t.noteMessage)||void 0===a?void 0:a.conversation)?(e.paymentNoteMsg={},t.noteMessage=this.parseMsgProto(t.noteMessage,e.paymentNoteMsg)):e.subtype="futureproof",null!=t.amount){if(t.amount.currencyCode&&!e.paymentCurrency&&(e.paymentCurrency=t.amount.currencyCode),null!=t.amount.value&&!e.paymentAmount1000){var i=t.amount,o=null==i.offset||0===i.offset?1e3:i.offset;e.paymentAmount1000=1e3*parseFloat(i.value)/o}}else t.currencyCodeIso4217&&!e.paymentCurrency&&(e.paymentCurrency=t.currencyCodeIso4217),null==t.amount1000||e.paymentAmount1000||(e.paymentAmount1000=t.amount1000);t.requestFrom&&!e.paymentMessageReceiverJid&&(e.paymentMessageReceiverJid=this.decodeJid(t.requestFrom)),e.paymentStatus&&e.paymentTxnStatus||(0,O.isEitherSenderOrReceiverOfPaymentMessage)(e)&&(e.paymentStatus=M.PaymentInfoStatus.WAITING,e.paymentTxnStatus=M.PaymentInfoTxnStatus.COLLECT_INIT),null==t.expiryTimestamp||e.paymentExpiryTimestamp||(e.paymentExpiryTimestamp=t.expiryTimestamp)}},_getDeclinePaymentRequestMessageKey:function(e,t){if(!e)throw new Error("parseProtocolMessageProto: no message key is defined for decline payment request message");var n,r=e.id;if(!r)throw new Error("parseProtocolMessageProto: no message id is defined for decline payment request message");if(t.id.remote.isGroup()){if(!t.id.fromMe&&!this.decodeJid(e.participant).equals((0,_.getMeUser)())&&"send"!==t.subtype)return null;n=this.decodeJid(e.participant)}return new E.default({fromMe:!t.id.fromMe,remote:t.id.remote,id:r,participant:n})},parseDeclinePaymentRequestMessageProto:function(e,t){var n=t.key,r=this._getDeclinePaymentRequestMessageKey(n,e);e.paymentRequestMessageKey=r,e.subtype="payment_action_request_declined"},_getCancelPaymentRequestMessageKey:function(e,t){if(!e)throw new Error("parseProtocolMessageProto: no message key is defined for cancel payment request message");var n=e.id;if(!n)throw new Error("parseProtocolMessageProto: no message id is defined for cancel payment request message");var r=void 0;if(t.id.remote.isGroup())if(r=t.id.participant,t.id.fromMe)r=this.decodeJid(t.author);else if(!this.decodeJid(e.participant).equals((0,_.getMeUser)()))return null;return new E.default({id:n,fromMe:t.id.fromMe,remote:t.id.remote,participant:r})},parseCancelPaymentRequestMessageProto:function(e,t){var n=t.key;if(n){var r=this._getCancelPaymentRequestMessageKey(n,e);e.paymentRequestMessageKey=r,e.subtype="payment_transaction_request_cancelled"}},parsePaymentInviteMessageProto:function(e){e.type=d.default.MSG_TYPE.UNKNOWN,e.subtype="phone_only_feature",__LOG__(2)`parsePaymentInviteMessageProto: payment invite messages not supported`},parseGroupInviteMessageProto:function(e,t){e.comment=t.caption,e.inviteCode=t.inviteCode,e.inviteCodeExp=t.inviteExpiration,e.inviteGrp=t.groupJid,e.inviteGrpName=t.groupName,e.type=d.default.MSG_TYPE.GROUPS_V4_INVITE},parseOrderMessageProto:function(e,t){e.type=d.default.MSG_TYPE.ORDER,e.thumbnail=this.decodeBytes(t.thumbnail),e.message=t.message||"",e.orderId=t.orderId,e.itemCount=t.itemCount||0,e.status=t.status,e.surface=t.surface,e.sellerJid=t.sellerJid,e.orderTitle=t.orderTitle||"",e.token=t.token||"",e.totalAmount1000=t.totalAmount1000,e.totalCurrencyCode=t.totalCurrencyCode,e.body=""},parseListMessageProto:function(e,t){var n,r;b.default.webListMessage&&t.listType===p.ListMessageListType.SINGLE_SELECT||(0,m.productListMessagesEnabled)()&&t.listType===p.ListMessageListType.PRODUCT_LIST?(e.type=d.default.MSG_TYPE.LIST,e.list=t,e.footer=t.footerText,t.listType===p.ListMessageListType.PRODUCT_LIST&&(e.businessOwnerJid=null===(n=t.productListInfo)||void 0===n?void 0:n.businessOwnerJid,e.productListItemCount=null===(r=t.productListInfo)||void 0===r?void 0:r.productSections.reduce((function(e,t){return e+t.products.length}),0))):(t.listType===p.ListMessageListType.PRODUCT_LIST&&(0,m.productListMessageFallbackEnabled)()&&(e.subtype="phone_only_feature"),e.type=d.default.MSG_TYPE.UNKNOWN)},parseListResponseMessageProto:function(e,t){if(b.default.webListMessage&&t.listType===p.ListResponseMessageListType.SINGLE_SELECT){e.type=d.default.MSG_TYPE.LIST_RESPONSE,e.listResponse=(0,i.default)((0,i.default)({},t),{},{contextInfo:void 0});var n=t.title||"";t.description&&(n+="\n"+t.description),e.body=k(n)}},parseButtonsResponseMessageProto:function(e,t){var n=t.selectedDisplayText,r=t.selectedButtonId,a=t.type;(0,m.buttonsMessagesEnabled)()&&a===p.ButtonsResponseMessageType.DISPLAY_TEXT?(e.type=d.default.MSG_TYPE.BUTTONS_RESPONSE,e.selectedButtonId=r,e.body=k(n)):e.type=d.default.MSG_TYPE.UNKNOWN},parseViewOnceFutureProofMessageProto:function(e,t){b.default.viewOnceRead?this.parseMsgProto(t.message,e):(e.type=d.default.MSG_TYPE.UNKNOWN,e.subtype="phone")},parseEphemeralFutureProofMessageProto:function(e,t){b.default.ephemeralMessages?this.parseMsgProto(t.message,e):(e.type=d.default.MSG_TYPE.UNKNOWN,e.subtype="phone")},parseButtonsMessageProto:function(e,t){if((0,m.buttonsMessagesEnabled)()){var n=t.documentMessage,r=t.imageMessage,a=t.locationMessage,o=t.videoMessage,s=t.contentText,u=t.footerText,l=t.text,c=t.buttons,f=t.headerType;if([p.ButtonsMessageHeaderType.EMPTY,p.ButtonsMessageHeaderType.TEXT,p.ButtonsMessageHeaderType.DOCUMENT,p.ButtonsMessageHeaderType.IMAGE,p.ButtonsMessageHeaderType.VIDEO,p.ButtonsMessageHeaderType.LOCATION].includes(f)){if(c.some((function(e){return e.type===p.ButtonType.NATIVE_FLOW})))return e.type=d.default.MSG_TYPE.UNKNOWN,void(e.subtype="phone_only_feature");r?this.parseImageMessageProto(e,r):n?this.parseDocumentMessageProto(e,n):a?this.parseLocationMessageProto(e,(0,i.default)((0,i.default)({},a),{},{name:void 0,address:void 0})):o?this.parseVideoMessageProto(e,o):(e.type=d.default.MSG_TYPE.CHAT,s&&(e.body=k(s)),l&&(e.title=k(l))),e.isDynamicReplyButtonsMsg=!0,null!=f&&(e.headerType=f),c&&(e.dynamicReplyButtons=c),s&&(e.caption=k(s)),u&&(e.footer=k(u))}else e.type=d.default.MSG_TYPE.UNKNOWN}else e.type=d.default.MSG_TYPE.UNKNOWN},parseDisappearingModeProto:function(e,t){var n=e.from.equals((0,_.getMeUser)());if(null!=t.initiator)switch(t.initiator){case p.DisappearingModeInitiator.CHANGED_IN_CHAT:e.disappearingModeInitiator=f.DisappearingModeInitiator.ChangedInChat;break;case p.DisappearingModeInitiator.INITIATED_BY_ME:e.disappearingModeInitiator=n?f.DisappearingModeInitiator.InitiatedByMe:f.DisappearingModeInitiator.InitiatedByOther;break;case p.DisappearingModeInitiator.INITIATED_BY_OTHER:e.disappearingModeInitiator=n?f.DisappearingModeInitiator.InitiatedByOther:f.DisappearingModeInitiator.InitiatedByMe}},parseInteractiveMessageProto:function(e,t){var n,r,a;b.default.interactiveMessage?(e.type=d.default.MSG_TYPE.INTERACTIVE,e.body=null!==(n=null===(r=t.body)||void 0===r?void 0:r.text)&&void 0!==n?n:"",e.footer=null===(a=t.footer)||void 0===a?void 0:a.text):(e.type=d.default.MSG_TYPE.UNKNOWN,e.subtype="phone_only_feature")}};t.default=R},6357:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.typeAttributeFromProtobuf=function e(t){if(t.ephemeralMessage){var n=t.ephemeralMessage.message;return n?e(n):"text"}if(t.deviceSentMessage){var r=t.deviceSentMessage.message;return r?e(r):"text"}return t.conversation||t.extendedTextMessage||t.templateButtonReplyMessage||t.protocolMessage?"text":"media"},t.protobufToMsgKey=function(e){var t=e.fromMe,n=e.id,r=e.participant,a=e.remoteJid;(0,o.default)(null!=t&&null!=a&&null!=n,"fromMe, remoteJid, and id should be set");var i=null!=r&&(0,l.isWidlike)(r)?(0,l.createWid)(r):void 0,c=(0,l.createWid)(a);(c.isGroup()||c.isBroadcast())&&t&&(i=(0,s.getMaybeMeUser)());return new u.default({fromMe:t,id:n,participant:i,remote:(0,l.createWid)(a)})},t.msgKeyToProtobuf=function(e){var t;return{fromMe:e.fromMe,id:e.id,participant:e.fromMe||null===(t=e.participant)||void 0===t?void 0:t.toString({legacy:!0}),remoteJid:e.remote.toString({legacy:!0})}},t.parseMsgPaymentInfo=function(e,t){t&&(e.paymentStatus=t.status,e.paymentTxnStatus=t.txnStatus,e.paymentCurrency=t.currency||"",e.paymentAmount1000=(0,i.default)((0,a.maybeNumberOrThrowIfTooLarge)(t.amount1000),"maybeNumberOrThrowIfTooLarge(paymentInfo.amount1000)"),e.paymentMessageReceiverJid=(0,l.createWid)((0,i.default)(t.receiverJid,"paymentInfo.receiverJid")),e.paymentExpiryTimestamp=(0,a.maybeNumberOrThrowIfTooLarge)(t.expiryTimestamp),e.paymentTransactionTimestamp=(0,i.default)((0,a.maybeNumberOrThrowIfTooLarge)(t.transactionTimestamp),"maybeNumberOrThrowIfTooLarge(paymentInfo.transactionTimestamp)"))},t.hasUnsupportedCurrency=function(e){var t,n=(null==e||null===(t=e.primaryAmount)||void 0===t?void 0:t.currencyCode)||(null==e?void 0:e.currency);if(["XUS","XDX"].includes(null==n?void 0:n.toUpperCase()))return!0;return!1},t.isEitherSenderOrReceiverOfPaymentMessage=function(e){var t,n;if((null===(t=e.id)||void 0===t?void 0:t.remote.isGroup())&&!(null===(n=e.id)||void 0===n?void 0:n.participant.equals((0,s.getMeUser)()))&&!e.paymentMessageReceiverJid.equals((0,s.getMeUser)()))return!1;return!0};var a=n(20290),i=r(n(91080)),o=r(n(41143)),s=n(71701),u=r(n(5315)),l=n(75793)},81452:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.typeIsMms=function(e){return"image"===e.type||"video"===e.type||"audio"===e.type||"ptt"===e.type||"sticker"===e.type||"document"===e.type||"product"===e.type||"protocol"===e.type&&"history_sync_notification"===e.subtype},t.typeIsUrl=function(e){return e.type===o.default.MSG_TYPE.CHAT&&"url"===e.subtype},t.msgMatchesType=function(e,t){switch(t){case"text":return e.type===o.default.MSG_TYPE.CHAT&&"url"!==e.subtype;case"image":return e.type===o.default.MSG_TYPE.IMAGE;case"video":return e.type===o.default.MSG_TYPE.VIDEO&&!e.isGif;case"gif":return e.type===o.default.MSG_TYPE.VIDEO&&e.isGif;case"audio":return e.type===o.default.MSG_TYPE.AUDIO;case"ptt":return e.type===o.default.MSG_TYPE.PTT;case"document":return e.type===o.default.MSG_TYPE.DOCUMENT;case"location":return e.type===o.default.MSG_TYPE.LOCATION;case"vcard":return e.type===o.default.MSG_TYPE.VCARD||e.type===o.default.MSG_TYPE.MULTI_VCARD;case"url":return e.type===o.default.MSG_TYPE.CHAT&&"url"===e.subtype;case"sticker":return e.type===o.default.MSG_TYPE.STICKER;case void 0:default:return!1}},t.createQuotedMsg=function(e){if(!e)return null;var t=new p.default({from:e.from,to:e.to,id:e.id,participant:e.participant,selfDir:e.self});return e.id=t,new(0,n(16551).default)(e).safe()},t.getOriginalQuotedMsgIfPossible=function(e,t){var n;if(!e)return e;var r=null===(n=t.get(e.id))||void 0===n?void 0:n.safe();return r&&!r.asRevoked?r:e},t.listMsgCanRender=function(e){var t;return(null===(t=e.list)||void 0===t?void 0:t.listType)!==s.ListMessageListType.PRODUCT_LIST||(0,c.productListMessagesEnabled)()&&!h.default.webProductListMessageRenderKillSwitch},t.hasMentionOfMe=function(e){var t=(0,l.getMaybeMeUser)();return!!(null==e?void 0:e.mentionedJidList)&&e.mentionedJidList.some((function(e){return t.user===e.user&&t.server===e.server}))},t.getBroadcastFanoutKeys=v,t.broadcastFanout=function(e){var t;if(!e.invis){var r=v(e);r&&(t=r.map((function(e){return e.remote})),r.forEach((function(t){var r=n(66312).default;if(!r.some(i.default.matches({id:t}))){var a=E(e);a.to=t.remote,a.id=t,a.broadcast=!0;var s=r.add(a,{merge:!0});n(26671).default.find(t.remote).then((function(e){h.default.ephemeralMessages&&s.forEach((function(t){if(t.type!==o.default.MSG_TYPE.PROTOCOL){e.isEphemeralSettingOn()&&(t.ephemeralDuration=e.getEphemeralSetting());var n=e.getEphemeralSettingTimestamp();null!=n&&(t.ephemeralSettingTimestamp=n);var r=e.getDisappearingModeInitiator();null!=r&&(t.disappearingModeInitiator=r)}})),m(s,e,!0)}))}})))}return t},t.addRecordsToChat=m,t.isNotification=function(e,t){switch(e){case o.default.MSG_TYPE.GROUP_NOTIFICATION:case o.default.MSG_TYPE.GP2:case o.default.MSG_TYPE.BROADCAST_NOTIFICATION:case o.default.MSG_TYPE.NOTIFICATION:case o.default.MSG_TYPE.NOTIFICATION_TEMPLATE:case o.default.MSG_TYPE.E2E_NOTIFICATION:case o.default.MSG_TYPE.CALL_LOG:return!0;case o.default.MSG_TYPE.PROTOCOL:return"ephemeral_setting"===t;default:return!1}},t.eventTypeFromMsgType=function(e){var t,n=e.type,r=e.subtype,a=(0,l.getMaybeMeUser)();t=n===o.default.MSG_TYPE.GP2||n===o.default.MSG_TYPE.GROUP_NOTIFICATION?"subject"===r?"n":"add"===r||"invite"===r?e.recipients&&_.default.equals(e.recipients[0],a)?"s":"i":"remove"===r?e.recipients&&_.default.equals(e.recipients[0],a)?"n":"i":"create"===r?"n":"i":n===o.default.MSG_TYPE.BROADCAST_NOTIFICATION||n===o.default.MSG_TYPE.NOTIFICATION||n===o.default.MSG_TYPE.E2E_NOTIFICATION?"create"===r?"n":"i":n===o.default.MSG_TYPE.GROUPS_V4_INVITE&&e.from.equals(a)?"i":n===o.default.MSG_TYPE.CALL_LOG?"n":e.broadcast?_.default.isBroadcast(e.id.remote)?"n":"i":n===o.default.MSG_TYPE.REVOKED?"i":_.default.isPSA(e.id.remote)?e.ack===o.default.ACK.RECEIVED?"d":"a":n===o.default.MSG_TYPE.CIPHERTEXT||n===o.default.MSG_TYPE.OVERSIZED?"a":n===o.default.MSG_TYPE.NOTIFICATION_TEMPLATE||n===o.default.MSG_TYPE.PROTOCOL&&"ephemeral_setting"===r?"i":"d";return t};var i=a(n(96486)),o=a(n(34263)),s=n(676),u=n(14650),l=n(71701),c=n(31230),d=a(n(37417)),f=n(42810),p=a(n(5315)),h=a(n(63056)),_=a(n(12717));function v(e){var t,r,a;if(e instanceof n(16551).default)r=e,a=e.id;else{if(!(e instanceof p.default))return void __LOG__(3)`model:msgs:broadcastFanout: unknown msgOrKey: ${String(e)}`;a=e}if(!_.default.isStatusV3(a.remote)){if(r&&r.recipients&&0!==r.recipients.length)t=r.recipients;else{var o=n(13361).default.get(a.remote);o?t=i.default.map(E(o.participants),"id"):__LOG__(2)`model:msgs:broadcastFanout no group_metadata rec for bclist, cant fanout: ${a.remote.toString()}`}return t?t.map((function(e){return new p.default({fromMe:a.fromMe,remote:e,id:a.id})})):void 0}}function m(e,t,r,a,i,o){var s=a||t.msgs;if(0!==e.length){var u=s===t.msgs;if(o)if(u)__LOG__(2)`models:msg:store:resetMostRecentMsgs .msgs === cmc !`,g(t,s,e);else u=!0,g(t,s,e).then((function(){var e=new(0,n(23169).default);e.replace(t.msgs),t.msgChunks.push(e),t.replaceMsgsCollection(s),t.msgs.trigger("change:last",t.msgs.last())}));else r?u?g(t,s,e):y(s,e):y(s,e,{at:0,silent:e.every(S)});var l=n(66312).default;if(r&&u||!l.lastReceivedReceipt[t.id])for(var c=e.length-1;c>=0;c--){var d=e[c],f=d.id;if(f.fromMe&&!d.isNotification){l.updateLastReceipt(f.remote,d.t);break}}if(r&&u||!l.lastReceivedPaymentTransaction[t.id])for(var p=e.length-1;p>=0;p--){var h=e[p],_=h.id;h.paymentTransactionTimestamp&&l.updateLastTransactionTime(_.remote,h.paymentTransactionTimestamp)}var v=i;v&&!t.unreadMsgAnchor&&(t.disableUnreadAnchor?t.disableUnreadAnchor=!1:t.unreadMsgAnchor=e.find((function(e){return e.id.toString()===v.toString()})))}}function g(e,t,n){var a=i.default.findLast(n,(function(e){return!!e}));return a?(y(t,n),(0,f.setLastReceivedKey)(e.id,a.id).then((function(){e.lastReceivedKey=a.id}))):r.resolve()}function y(e,t,n){try{e.add(t,n)}catch(e){if(!(e instanceof u.LogoutDrop))throw e;__LOG__(3)`setRecords LogoutDrop: ${e.toString()}`}}function E(e){return null!=e&&"object"==typeof e?JSON.parse(JSON.stringify(e),d.default):e}function S(e){return"i"===e.eventType}},75715:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GLOBAL_MUTE=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=i(n(30381)),p=i(n(67294)),h=n(83180),_=i(n(1073)),v=a(n(56727)),m=i(n(34541)),g=a(n(98569)),y=i(n(89115)),E=n(32417),S=n(88828),b=i(n(12717)),T="global_mute";t.GLOBAL_MUTE=T;var w=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).id=(0,v.prop)(),e.expiration=(0,v.prop)(0),e._unmuteTimer=(0,v.session)(),e.promises=(0,v.session)((function(){return{}})),e.isMuted=(0,v.derived)(e._isMuted,["expiration"]),e}return(0,s.default)(a,[{key:"_isMuted",value:function(){return!!this.expiration}},{key:"initialize",value:function(){(0,u.default)((0,l.default)(a.prototype),"initialize",this).call(this),null!=this.expiration&&0!==this.expiration&&this.mute(this.expiration)}},{key:"setMute",value:function(e,t){(e||this.expiration)&&e!==this.expiration&&(e?this.mute(e,t):this.unmute(t))}},{key:"mute",value:function(e,t,n){var a=this,i=e;if(!(0,S.isNumber)(i))return __LOG__(2)`models:Mute:mute called with invalid expiration ${i}`,r.reject(new g.ActionError);(i=Math.round(i))>2e9&&__LOG__(2)`models:Mute:mute called with wrong units?${this.id.toString()} exp:${i}`;var o=function(){if(this.isMuted&&(_.default.clearTimeout(this._unmuteTimer),this.unset("_unmuteTimer")),-1===i)__LOG__(2)`models:Mute:mute ${this.id.toString()} muted, no expiration`;else{var e=i-(0,f.default)().unix();__LOG__(2)`models:Mute:mute ${this.id.toString()} duration:${e}`,this._unmuteTimer=_.default.setGlobalTimeout(this.unmute.bind(this),1e3*i)}this.set({expiration:i})}.bind(this),s=b.default.isGroup(this.id);if(t){if(this.promises.mute)return this.promises.mute;var u=this.promises.mute=(0,E.sendConversationMute)(this.id,i,this.expiration),l=s?new h.ActionType(y.default.t(122)):new h.ActionType(y.default.t(77)),c=n||(0,h.genId)(),d=this.promises.mute.catch((function(){__LOG__(3)`models:Mute:mute dropped`;var e=s?y.default.t(120):y.default.t(75);throw new h.ActionType(e,{actionText:y.default.t(201),actionHandler:a.mute.bind(a,i,t,c)})})).then((function(e){if(200===e.status){var n=s?y.default.t(121):y.default.t(76);return new h.ActionType(n,{actionText:y.default.t(205),actionHandler:a.unmute.bind(a,t,c)})}if(e.status>=400)throw s?new h.ActionType(y.default.t(120)):new h.ActionType(y.default.t(75))}));return m.default.openToast(p.default.createElement(h.ActionToast,{id:c,initialAction:l,pendingAction:d})),u.then((function(e){200!==e.status||e._duplicate||o()})).finally((function(){a.promises.mute=null}))}return o(),r.resolve()}},{key:"canMute",value:function(){var e=!1;if(b.default.isGroup(this.id)){var t=n(13361).default.get(this.id);t&&(e=t.participants.iAmMember())}return e||b.default.isUser(this.id)}},{key:"_clearUnmuteTimer",value:function(){_.default.clearTimeout(this._unmuteTimer),this.unset("_unmuteTimer"),this.expiration=0}},{key:"unmute",value:function(e,t){var n=this,a=function(){__LOG__(2)`models:Mute:unmute ${this.id.toString()}`,this._clearUnmuteTimer()}.bind(this),i=b.default.isGroup(this.id);if(e){if(this.promises.unmute)return this.promises.unmute;var o=this.promises.unmute=(0,E.sendConversationMute)(this.id,0,this.expiration),s=i?new h.ActionType(y.default.t(129)):new h.ActionType(y.default.t(88)),u=t||(0,h.genId)(),l=this.promises.unmute.catch((function(){__LOG__(3)`models:Mute:unmute dropped`;var t=i?y.default.t(127):y.default.t(86);return r.reject(new h.ActionType(t,{actionText:y.default.t(201),actionHandler:n.unmute.bind(n,e,u)}))})).then((function(e){if(200===e.status)return i?new h.ActionType(y.default.t(128)):new h.ActionType(y.default.t(87));if(e.status>=400)throw i?new h.ActionType(y.default.t(127)):new h.ActionType(y.default.t(86))}));return m.default.openToast(p.default.createElement(h.ActionToast,{id:u,initialAction:s,pendingAction:l})),o.then((function(e){200!==e.status||e._duplicate||a()})).finally((function(){n.promises.unmute=null}))}return a(),r.resolve()}},{key:"delete",value:function(){(0,u.default)((0,l.default)(a.prototype),"delete",this).call(this),this.getCollection().remove(this.id),this._clearUnmuteTimer()}},{key:"getCollection",value:function(){return n(30608).default}}]),a}(v.default);w.Proxy="mute",w.idClass=b.default,w.allowedIds=[T];var A=(0,v.defineModel)(w);t.default=A},30608:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MuteCollection=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(60619)),c=a(n(93743)),d=n(71701),f=r(n(75715)),p=!0,h=!0,_=!0,v=!1,m=!1,g=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"initializeFromCache",value:function(e){null!=e&&e.id===f.GLOBAL_MUTE&&this.add(e,{remove:!1}),this.setGlobalNotifications((0,d.getGlobalNotifications)()),this.setGlobalSounds((0,d.getGlobalSounds)()),this.setGlobalPreviews((0,d.getGlobalPreviews)()),this.setCollapseMuted((0,d.getCollapseMuted)()),this.setOutgoingMessageSound((0,d.getOutgoingMessageSound)())}},{key:"saveToCache",value:function(){if(c.default.shouldSaveToCache()){var e=this.constructor.cachePolicy.id;__LOG__(2)`models:mute:cache-save: ${String(e)}`;var t=this.get(f.GLOBAL_MUTE);t?(0,d.setCollection)(e,t.toJSON()):__LOG__(3)`models:mute:cache-save: globalMuteModel does not exist`}}},{key:"globalMute",value:function(){var e=this.get(f.GLOBAL_MUTE);return e||this.add({id:f.GLOBAL_MUTE})[0]}},{key:"getGlobalSounds",value:function(){return p}},{key:"setGlobalSounds",value:function(e){p=e,(0,d.setGlobalSounds)(e)}},{key:"getGlobalNotifications",value:function(){return h}},{key:"setGlobalNotifications",value:function(e){h=e,(0,d.setGlobalNotifications)(e)}},{key:"getGlobalPreviews",value:function(){return _}},{key:"setGlobalPreviews",value:function(e){_=e,(0,d.setGlobalPreviews)(e)}},{key:"getCollapseMuted",value:function(){return v}},{key:"setCollapseMuted",value:function(e){v=e,(0,d.setCollapseMuted)(e),this.trigger("change:collapseMuted",v)}},{key:"getOutgoingMessageSound",value:function(){return m}},{key:"setOutgoingMessageSound",value:function(e){m=e,(0,d.setOutgoingMessageSound)(e)}},{key:"handle",value:function(e){e.forEach((function(e){var t=n(26671).default.get(e.id);t&&"mute"===e.type&&t.mute.setMute(e.muteExpiration)}))}}]),r}(l.default);t.MuteCollection=g,g.model=f.default,g.cachePolicy={id:"mute",policy:l.CACHE_POLICY.LOAD,delay:1e3};var y=new g;t.default=y},37498:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(319)),s=i(n(81109)),u=i(n(63038)),l=i(n(93913)),c=i(n(16525)),d=i(n(29754)),f=i(n(34575)),p=i(n(2205)),h=i(n(99842)),_=n(98591),v=n(1838),m=i(n(34857)),g=i(n(91080)),y=n(31988),E=i(n(35340)),S=n(2277),b=i(n(96696)),T=a(n(56727)),w=i(n(93743)),A=i(n(34263)),C=n(14650),O=n(31776),M=i(n(88430)),I=n(71701),k=i(n(22021)),P=i(n(89115)),R=i(n(8643)),D=i(n(63056)),N=i(n(69267)),L=function(e){(0,p.default)(n,e);var t=(0,h.default)(n);function n(){return(0,f.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("NoticeJsonParseError")),x=["logout","refresh"],U=(0,_.createTimer)({algo:{type:"constant",delay:432e5}}),F=(0,_.createTimer)({algo:{type:"fibonacci",first:0,second:1},max:18e6}),G=function(e){(0,p.default)(a,e);var t=(0,h.default)(a);function a(){var e;(0,f.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).id=(0,T.prop)(),e.noticeId=(0,T.prop)(),e.blocking=(0,T.prop)(),e.policyVersion=(0,T.prop)(),e.banner=(0,T.prop)(),e.blockingModal=(0,T.prop)(),e.shouldShowButterBar=(0,T.session)(!0),e.backgroundFetches=(0,T.session)(),e}return(0,l.default)(a,[{key:"initialize",value:function(){(0,c.default)((0,d.default)(a.prototype),"initialize",this).call(this),this.fetchNoticeData=this.fetchNoticeData.bind(this),this.listenTo(P.default,"locale_change",this.fetchNoticeData)}},{key:"dismissButterBarNotice",value:function(){0!==D.default.greenAlertBannerDuration&&(new R.default.UserNotice({userNoticeId:this.noticeId,userNoticeContentVersion:this.policyVersion,userNoticeEvent:R.default.USER_NOTICE_EVENT.BANNER_DISMISS}).commit(),this._dismissAndStartButterBarTimer(D.default.greenAlertBannerDuration),(0,I.setNoticeBannerClosedAt)(Date.now()))}},{key:"_dismissAndStartButterBarTimer",value:function(e){var t=this;this.shouldShowButterBar=!1,this._clearButterBarTimer(),this._butterBarTimeoutHandler=window.setTimeout((function(){t.shouldShowButterBar=!0,(0,I.setNoticeBannerClosedAt)(null)}),e)}},{key:"delete",value:function(){this.resetNotice(),(0,c.default)((0,d.default)(a.prototype),"delete",this).call(this)}},{key:"sanitizeBlockingModal",value:function(e){if(!e)return null;var t=function(e){if(!e)return null;var t=e.action;if(t){var n=x.find((function(e){return`whatsapp:user-notice?action=${e}`===t}));if(n)return e.action=n,e;__LOG__(3)`Notice: Unknown action type ${t}`}return null};return e.primaryButton=t(e.primaryButton),e.secondaryButton=t(e.secondaryButton),e}},{key:"_isoFromCallingCode",value:function(e){var t=parseInt(e,10),n=m.default[t];return(0,g.default)(n,"isoFromCC")}},{key:"validateResponseFields",value:function(e,t){e.forEach((function(e){if(!(e in t))throw new Error(`Missing field ${e} in notice content.`)}))}},{key:"extractBlockingModal",value:function(e){if(e)return this.validateResponseFields(["icon","iconDescription","title","body","primaryButton"],e),this.validateResponseFields(["light","dark"],e.icon),{icon:{light:e.icon.light,dark:e.icon.dark},iconSvg:{light:"",dark:""},iconDescription:e.iconDescription,title:e.title,body:e.body,primaryButton:e.primaryButton,secondaryButton:e.secondaryButton}}},{key:"extractBanner",value:function(e){if(e)return this.validateResponseFields(["icon","iconDescription","text"],e),this.validateResponseFields(["light","dark"],e.icon),{icon:{light:e.icon.light,dark:e.icon.dark},iconDescription:e.iconDescription,text:e.text,iconSvg:{light:"",dark:""}}}},{key:"extractUserNoticeContent",value:function(e){var t=e.policyVersion;if(!t)throw new Error("Missing field policyVersion in notice content.");__LOG__(2)`Notice:fetchNoticeData successful for policyVersion ${t}`;var n=e.banner&&this.extractBanner(e.banner),r=e["blocking-modal"]&&this.extractBlockingModal(e["blocking-modal"]),a=r&&this.sanitizeBlockingModal(r);this.set({policyVersion:t,blockingModal:a,banner:n}),this.makeIconFetch(n,a)}},{key:"resetBackgroundFetches",value:function(){var e;null===(e=this.backgroundFetches)||void 0===e||e.forEach((function(e){__LOG__(2)`Notice: aborting fetches`,e.abort()}))}},{key:"resetNotice",value:function(){this.resetBackgroundFetches(),this.unset(["banner","blocking","blockingModal","noticeId","policyVersion"]),(0,I.setNoticeId)(null),(0,I.setNoticeBannerClosedAt)(null),this._clearButterBarTimer(),this.shouldShowButterBar=!0}},{key:"_clearButterBarTimer",value:function(){var e=this._butterBarTimeoutHandler;null!=e&&window.clearTimeout(e)}},{key:"fetchNoticeData",value:function(){if(this.noticeId&&k.default.supportsFeature(k.default.F.USER_NOTICE)){var e,t;this.resetBackgroundFetches(),this.set({blockingModal:void 0,banner:void 0});var n=(0,I.getMeUser)(),r=(0,y.findCC)(n.user),a=this._isoFromCallingCode(r),i=N.default.build(A.default.NOTICE_CONTENT_ENDPOINT_URL,{id:this.noticeId,lg:null!==(e=w.default.lg)&&void 0!==e?e:"zz",lc:null!==(t=w.default.lc)&&void 0!==t?t:"ZZ",cc:a,platform:w.default.isSMB?"smbweb":"web"});this.makeContentFetch(i)}}},{key:"_shouldUpdateVersion",value:function(e,t){return null==e||null!=t&&t>e}},{key:"handleResponse",value:function(e){if(k.default.supportsFeature(k.default.F.USER_NOTICE))if(e.length){var t=e[0],n=t.blocking,r=t.id,a=t.version,i=this.noticeId,o=this._shouldUpdateVersion(this.policyVersion,a);__LOG__(2)`Notice: received notice id: ${r}, blocking: ${n}, version: ${a}`,this.set({blocking:n,noticeId:r,policyVersion:o?a:this.policyVersion}),(r!==i||o)&&this.fetchNoticeData(),r!==(0,I.getNoticeId)()&&((0,I.setNoticeId)(r),(0,I.setNoticeBannerClosedAt)(null),this._clearButterBarTimer(),this.shouldShowButterBar=!0),e.length>1&&(__LOG__(4,void 0,new Error,!0)`Notice: more than one notice from phone response`,SEND_LOGS("notice-unallowed-length"))}else __LOG__(2)`Notice: received empty notice`,this.resetNotice()}},{key:"sync",value:function(e){var t=this;!0!==e&&this._initializeShouldShowButterBar();var r="Notice:sync"+(e?" resume":"");return __LOG__(2)`${r}`,(0,n(23306).default.queryNoticeState)(e).then((function(e){200===e.status?(__LOG__(2)`${r} success`,t.handleResponse(e.notices)):__LOG__(3)`${r} error receive status code ${e.status}`})).catchType(C.WebdDrop,(function(){__LOG__(3)`${r} dropped`})).catch((function(e){__LOG__(4,void 0,new Error,!0)`${r} failed with error: ${e}`,SEND_LOGS("notice-query-failed")}))}},{key:"_initializeShouldShowButterBar",value:function(){var e=(0,I.getNoticeBannerClosedAt)();if(null!=e&&0!==D.default.greenAlertBannerDuration){var t=e+D.default.greenAlertBannerDuration-Date.now();if(t>0)return void this._dismissAndStartButterBarTimer(t)}this.shouldShowButterBar=!0}},{key:"makeContentFetch",value:function(e){var t=this;return this.attemptFirstFetchAndRetriesAfter(e).then((function(e){try{var n=e&&JSON.parse(e);n&&t.extractUserNoticeContent(n)}catch(e){throw new R.default.UserNoticeError({userNoticeId:t.noticeId,userNoticeContentVersion:t.policyVersion,userNoticeErrorEvent:R.default.USER_NOTICE_ERROR_EVENT.JSON_PARSE}).commit(),new L(`Received invalid User Notice content for id ${t.noticeId}`)}})).catch((function(e){if(e.name!==S.ABORT_ERROR){if("NoticeJsonParseError"!==e.name)new R.default.UserNoticeError({userNoticeId:t.noticeId,userNoticeContentVersion:t.policyVersion,userNoticeErrorEvent:R.default.USER_NOTICE_ERROR_EVENT.JSON_FETCH}).commit();t.resetNotice(),__LOG__(4,void 0,new Error,!0)`Notice: Error Message : ${e.message}`,SEND_LOGS("notice-content-error")}}))}},{key:"makeIconFetch",value:function(e,t){var n=this,a=[null==e?void 0:e.icon.light,null==e?void 0:e.icon.dark,null==t?void 0:t.icon.light,null==t?void 0:t.icon.dark].map((function(e){return e?n.attemptFirstFetchAndRetriesAfter(e):r.resolve(null)}));return r.all(a).then((function(e){var t=(0,u.default)(e,4),r=t[0],a=t[1],i=t[2],o=t[3],l=n.banner,c=n.blockingModal;n.banner&&r&&a&&(l=(0,s.default)((0,s.default)({},n.banner),{iconSvg:{light:r,dark:a}})),n.blockingModal&&i&&o&&(c=(0,s.default)((0,s.default)({},n.blockingModal),{iconSvg:{light:i,dark:o}})),n.set({banner:l,blockingModal:c})})).catch((function(e){e.name!==S.ABORT_ERROR&&(new R.default.UserNoticeError({userNoticeId:n.noticeId,userNoticeContentVersion:n.policyVersion,userNoticeErrorEvent:R.default.USER_NOTICE_ERROR_EVENT.IMAGE_FETCH}).commit(),__LOG__(4,void 0,new Error,!0)`Notice: Icon fetch error : ${e.message}`,SEND_LOGS("notice-icon-fetch-error"))}))}},{key:"shouldRetry",value:function(e){return 404===e||429===e||e>=500}},{key:"attemptFirstFetchAndRetriesAfter",value:function(e){var t,n=this,r=new E.default,a=r.signal,i=null!==(t=this.backgroundFetches)&&void 0!==t?t:[];return this.backgroundFetches=[].concat((0,o.default)(i),[r]),(0,M.default)(e,{signal:a}).then((function(e){if(!e.ok){var t=e.status;throw n.shouldRetry(t)?new O.HttpStatusCodeError(t,"noticeFetchErr"):new Error("contentResponseUnhandledError")}return e.text()})).catch((function(t){if("HttpStatusCodeError"===t.name)return n.retryFetch(e,t.status);throw t}))}},{key:"retryFetch",value:function(e,t){var n,r,a,i=this,s=new E.default,u=s.signal,l=null!==(n=this.backgroundFetches)&&void 0!==n?n:[];return this.backgroundFetches=[].concat((0,o.default)(l),[s]),404===t?(a=2,r=function(e){var t=e.taskDuration,n=U();return Math.max(n-t,0)}):(a=8,r=function(e){var t=e.taskDuration,n=36e5*F();return Math.max(n-t,0)}),(0,b.default)({delay:r,retries:a,signal:u},(function(t){return __LOG__(2)`Notice: Fetch Retry attempt`,(0,M.default)(e,{signal:u}).then((function(e){if(!e.ok){if(__LOG__(3)`Notice: Could Not download`,i.shouldRetry(e.status))return t(new Error("retryFailed"));throw new Error("contentResponseUnhandledError")}return e.text()}))}))}}]),a}(T.default);G.Proxy="notice";var B=new((0,T.defineModel)(G))({id:"default_notice_id"});t.default=B},75442:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(81109)),o=a(n(34575)),s=a(n(93913)),u=a(n(16525)),l=a(n(29754)),c=a(n(2205)),d=a(n(99842)),f=r(n(56727)),p=a(n(19249)),h=a(n(27429)),_=function(e){(0,c.default)(r,e);var t=(0,d.default)(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,f.prop)(),e.products=(0,f.prop)(),e.itemCount=(0,f.prop)(),e.subtotal=(0,f.prop)(),e.tax=(0,f.prop)(),e.total=(0,f.prop)(),e.currency=(0,f.prop)(),e.createdAt=(0,f.prop)(),e.sellerJid=(0,f.prop)(),e.totalItemCount=(0,f.derived)(e._totalItemCount,["products"]),e}return(0,s.default)(r,[{key:"_totalItemCount",value:function(){return this.products.reduce((function(e,t){return e+t.quantity}),0)}},{key:"initialize",value:function(){(0,u.default)((0,l.default)(r.prototype),"initialize",this).call(this),this.orderItemCollection=new h.default,this.listenTo(this,"change:cartItemCollection",this.triggerItemCollectionUpdate),this.triggerItemCollectionUpdate()}},{key:"triggerItemCollectionUpdate",value:function(){this.orderItemCollection.add(this.products.map((function(e){return new p.default((0,i.default)({},e))})),{merge:!0})}},{key:"getCollection",value:function(){return n(64616).default}}]),r}(f.default);_.Proxy="order";var v=(0,f.defineModel)(_);t.default=v},64616:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderCollection=void 0;var i=a(n(81109)),o=a(n(34575)),s=a(n(93913)),u=a(n(16525)),l=a(n(29754)),c=a(n(2205)),d=a(n(99842)),f=a(n(60619)),p=a(n(75442)),h=n(21301),_=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(e,r){var a;return(0,o.default)(this,n),(a=t.call(this)).width=80,a.height=80,null!=e&&(a.width=e),null!=r&&(a.height=r),a}return(0,s.default)(n,[{key:"findOrder",value:function(e,t,n){var a=this.get(e);return null!=a?r.resolve(a):this._queryOrder(e,t,n)}},{key:"_queryOrder",value:function(e,t,a){var o=this;return(0,h.queryOrder)(e,this.width,this.height,a).then((function(a){(0,u.default)((0,l.default)(n.prototype),"add",o).call(o,(0,i.default)({id:e,fetchedFromServer:!0,sellerJid:t},a));var s=o.get(e);if(null!=s)return r.resolve(s)}))}}]),n}(f.default);t.OrderCollection=_,_.model=p.default,_.staleCollection=!0;var v=new _;t.default=v},19249:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=a(n(28719)),d=n(87261),f=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.price=(0,l.prop)(),e.currency=(0,l.prop)(),e.name=(0,l.prop)(),e.quantity=(0,l.prop)(),e.thumbnailId=(0,l.prop)(),e.thumbnailUrl=(0,l.prop)(),e.mediaData=(0,l.derived)(e._mediaData,["thumbnailUrl"]),e}return(0,o.default)(r,[{key:"_mediaData",value:function(){return new c.default({mediaStage:null!=this.thumbnailUrl?d.MEDIA_DATA_STAGE.RESOLVED:d.MEDIA_DATA_STAGE.PREPARING,renderableUrl:null!=this.thumbnailUrl?`${this.thumbnailUrl}`:null})}},{key:"getCollection",value:function(){return n(64616).default}}]),r}(l.default);f.Proxy="order-item";var p=(0,l.defineModel)(f);t.default=p},27429:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderItemCollection=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(60619)),u=r(n(19249)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(s.default);t.OrderItemCollection=l,l.model=u.default;var c=l;t.default=c},90039:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Chatstate=t.default=t.ChatstateCollection=void 0;var i=a(n(93913)),o=a(n(16525)),s=a(n(29754)),u=a(n(34575)),l=a(n(2205)),c=a(n(99842)),d=a(n(96486)),f=a(n(60619)),p=r(n(56727)),h=a(n(79140)),_=a(n(48629)),v=a(n(89115)),m=a(n(12717)),g=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,p.prop)(),e.type=(0,p.prop)(),e.t=(0,p.prop)(),e.deny=(0,p.prop)(),e.updateTime=(0,p.session)(),e.expireTimerId=(0,p.session)(),e}return n}(p.default);g.Proxy="chatstate",g.idClass=m.default;var y=(0,p.defineModel)(g);t.Chatstate=y;var E=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return n}(f.default);t.ChatstateCollection=E,E.model=y;var S=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,p.prop)(),e.isOnline=(0,p.session)(!1),e.stale=(0,p.session)(!0),e.hasData=(0,p.session)(!1),e.isSubscribed=(0,p.session)(!1),e.withholdDisplay=(0,p.session)(!0),e.forceDisplay=(0,p.session)(!1),e.chatActive=(0,p.session)(!1),e.withholdDisplayTimer=(0,p.session)(),e.forceDisplayTimer=(0,p.session)(),e.chatstate=(0,p.session)(),e.chatstates=(0,p.collection)(E),e.isGroup=(0,p.derived)(e._isGroup),e.isUser=(0,p.derived)(e._isUser),e}return(0,i.default)(r,[{key:"_isGroup",value:function(){return m.default.isGroup(this.id)}},{key:"_isUser",value:function(){return m.default.isUser(this.id)}},{key:"initialize",value:function(){var e=this;(0,o.default)((0,s.default)(r.prototype),"initialize",this).call(this);var t=this.isGroup?{id:"",type:"unavailable"}:{id:this.id};this.addChild("chatstate",new y(t)),this.isGroup?this.listenTo(this.chatstates,"add change",d.default.debounce((function(){var t,n=!1;e.chatstates.forEach((function(e){"composing"!==e.type&&"recording"!==e.type||t&&!(t.updateTime<e.updateTime)||(t=e),n=n||"unavailable"!==e.type})),e.set({isOnline:n}),e.chatstate.set({id:t?t.id:"",type:t?t.type:"unavailable"})}))):this.listenTo(this.chatstate,"change:type",(function(){e.isOnline="unavailable"!==e.chatstate.type})),this.listenTo(this,"change:chatActive",this.onChatActiveChange)}},{key:"delete",value:function(){(0,o.default)((0,s.default)(r.prototype),"delete",this).call(this),this.getCollection().remove(this.id),this.chatstate.delete(),this.chatstates.forEach((function(e){return e.delete()}))}},{key:"reset",value:function(){this.hasData=!1,this.isGroup?this.chatstates.forEach((function(e){e.type="unavailable"})):this.isUser&&(this.chatstate.unset("t"),this.chatstate.unset("deny")),this.chatstate.set({id:this.isGroup?"":this.id,type:"unavailable",t:void 0,deny:void 0})}},{key:"isActive",value:function(){var e=this.chatstate.type;return this.hasData&&("composing"===e||"recording"===e)}},{key:"getFormattedString",value:function(){if(!this.hasData)return null;if(this.isGroup){var e=this.chatstate.id;if(!e)return null;var t=_.default.get(e);if(!t)return null;var n=t.formattedShortName;return"composing"===this.chatstate.type?v.default.t(1683,{participant:n}):v.default.t(1684,{participant:n})}if(!this.isUser)return null;var r=this.chatstate;switch(r.type){case"available":return v.default.t(1676);case"composing":return v.default.t(1677);case"recording":return v.default.t(1678);case"unavailable":return r.deny||null==r.t?null:h.default.lastSeenStr(r.t)}}},{key:"onChatActiveChange",value:function(){var e=this;this.chatActive?(this.hasData?this.withholdDisplay=!1:this.withholdDisplayTimer=setTimeout((function(){e.set({withholdDisplay:!1,withholdDisplayTimer:void 0})}),1500),this.forceDisplayTimer=setTimeout((function(){e.set({forceDisplay:!0,forceDisplayTimer:void 0})}),2e3)):(this.withholdDisplayTimer&&(clearTimeout(this.withholdDisplayTimer),this.withholdDisplayTimer=void 0),this.forceDisplayTimer&&(clearTimeout(this.forceDisplayTimer),this.forceDisplayTimer=void 0))}},{key:"subscribe",value:function(){return this.getCollection().find(this.id)}},{key:"getCollection",value:function(){return n(34254).default}}]),r}(p.default);S.Proxy="presence",S.idClass=m.default;var b=(0,p.defineModel)(S);t.default=b},34254:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PresenceCollection=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(60619)),c=a(n(90039)),d=n(67910),f=a(n(12717)),p=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"_find",value:function(e){return!this.gadd(e).isUser||f.default.isServer(e)||f.default.isPSA(e)?r.resolve({id:e}):(0,d.subscribePresence)(e).then((function(){return{id:e}}))}},{key:"clearAllPresence",value:function(){this.forEach((function(e){e.reset(),e.set({stale:!0,isSubscribed:!1})}))}}]),n}(l.default);t.PresenceCollection=p,p.model=c.default,p.staleCollection=!0;var h=new p;t.default=h},3553:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(91080)),f=r(n(56727)),p=a(n(91030)),h=n(59078),_=n(86763),v=a(n(73371)),m=a(n(88577)),g=a(n(12717)),y=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,f.prop)(),e.afterCursor=(0,f.prop)(),e.index=(0,f.prop)(),e.fetchedFromServer=(0,f.session)(),e._products=(0,f.session)(),e._msgs=(0,f.session)(),e}return(0,o.default)(r,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(r.prototype),"initialize",this).call(this),this.productCollection=new m.default,this.msgProductCollection=new m.default,this.collections=new v.default,this.listenTo(this,"change:_products",this.triggerProductUpdate),this.listenTo(this,"change:_msgs",this.triggerMsgUpdate),this.triggerProductUpdate(),this.triggerMsgUpdate()}},{key:"triggerProductUpdate",value:function(){this._products&&this.productCollection.add(this._products,{merge:!0}),this._products=void 0}},{key:"triggerMsgUpdate",value:function(){this._msgs&&this.msgProductCollection.add(this._msgs,{merge:!0}),this._msgs=void 0}},{key:"markProductCollectionOld",value:function(){this.productCollection.forEach((function(e){return e.markOld()}))}},{key:"addProduct",value:function(e){var t=this,n=this.id;return(0,h.addProduct)(e).then((function(e){var r=t.productCollection.at(0);e.catalogWid=n,e.index=r?r.index-1:0;var a=t.productCollection.add(e,{merge:!0,at:0})[0];return(0,d.default)(a,"addedProduct")}))}},{key:"editProduct",value:function(e){var t=this;return(0,h.editProduct)(e).then((function(e){var n=t.productCollection.add(e,{merge:!0})[0];return(0,d.default)(n,"editedProduct")}))}},{key:"pullProduct",value:function(e){var t=this;return(0,h.queryProduct)(this.id,e).then((function(n){if("NOT_FOUND"===n.error&&t.productCollection.remove(e),null!=n.data){var r=new p.default((0,_.mapProductResponseToModel)(n.data,t.id));t.updateProduct(r)}}))}},{key:"updateProduct",value:function(e){this.productCollection.add(e,{merge:!1})}},{key:"getCollection",value:function(){return n(10725).default}}]),r}(f.default);y.Proxy="catalog",y.idClass=g.default;var E=(0,f.defineModel)(y);t.default=E},10725:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CatalogCollection=t.STATIC_WHATSAPP_IMAGE_URI=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=a(n(16525)),c=a(n(29754)),d=a(n(2205)),f=a(n(99842)),p=a(n(60619)),h=a(n(3553)),_=n(14650),v=n(59078),m=n(86763),g=n(88828),y=n(75793),E="https://static.whatsapp.net";t.STATIC_WHATSAPP_IMAGE_URI=E;var S=function(e){(0,d.default)(a,e);var t,n=(0,f.default)(a);function a(){return(0,s.default)(this,a),n.apply(this,arguments)}return(0,u.default)(a,[{key:"addMsgAsProduct",value:function(e){var t=e.businessOwnerJid&&(0,y.createWid)(e.businessOwnerJid);if(t){var n=this.get(t),r=n&&e.productId&&n.msgProductCollection.get(e.productId),i=n&&e.productId&&n.productCollection.get(e.productId);if(!(i&&i.t&&i.t>=e.t||r&&r.fetchedFromServer)){var o=(0,m.mapMsgToProductModel)(e);return(0,l.default)((0,c.default)(a.prototype),"add",this).call(this,{id:t,afterCursor:void 0,_msgs:[o],stale:!0,fetchedFromServer:!!i},{merge:!0})}}}},{key:"_queryProduct",value:function(e){var t=this,n=e.catalogWid,i=e.productId,o=e.productMsgMediaData,s=e.width,u=e.height;return(0,v.queryProduct)(n,i,s,u).then((function(e){if("NOT_FOUND"===e.error){var s=t.get(n);return null==s||s.productCollection.remove(i),r.reject(new _.E404("CatalogCollection:findProduct:_queryProduct NOT_FOUND"))}if(!e.data)return(0,l.default)((0,c.default)(a.prototype),"add",t).call(t,{id:n,afterCursor:void 0});var u=e.data;if(!u.image_cdn_urls||u.image_cdn_urls[0].value.includes(E))return r.reject(new Error("CatalogCollection:findProduct:_queryProduct "+(u.image_cdn_urls?"Product image contains static image":"Could not find image_cdn_urls for product")));var d=(0,m.mapProductResponseToModel)(u,n);d.productMsgMediaData=o;var f=[d];return(0,l.default)((0,c.default)(a.prototype),"add",t).call(t,{id:n,afterCursor:void 0,_products:f,_msgs:f},{merge:!0})}))}},{key:"findProduct",value:function(e){var t=e.catalogWid,n=e.productId,a=e.productMsgMediaData;return n?this._queryProduct({catalogWid:t,productId:n,productMsgMediaData:a}):r.reject(new Error("CatalogCollection:findProduct Received productId type "+(void 0===n?"undefined":"null")))}},{key:"_queryCatalog",value:function(e,t,n,r){var a=e?e.index:0;return(0,v.queryCatalog)(t,n,10,void 0,void 0,r).then((function(e){if(!e.data.length)return{id:t,afterCursor:null};var n=[];return e.data.forEach((function(e){e.image_cdn_urls&&!e.image_cdn_urls[0].value.includes(E)&&n.push((0,m.mapProductResponseToModel)(e,t))})),{id:t,afterCursor:e.paging.cursors.after,_products:n,fetchedFromServer:!0,index:a+n.length}}))}},{key:"_findQuery",value:function(e){var t=this.get(e),n=t&&!t.stale?t.afterCursor:void 0;return this._queryCatalog(t,e,n)}},{key:"_find",value:function(e){return this._findQuery(e)}},{key:"findCarouselCatalog",value:function(e){var t=this,n=this.get(e),r=(0,g.isString)(e)?(0,y.createWid)(e):e;return n&&n.set({index:0}),this._queryCatalog(n,r,void 0).then((function(e){return n&&n.markProductCollectionOld(),(0,l.default)((0,c.default)(a.prototype),"add",t).call(t,e,{merge:!0})}))}},{key:"findNextProductPage",value:function(e){return this.update(e).then((function(e){return(Array.isArray(e)?e[0]:e).productCollection.getProductModels()}))}},{key:"findCollectionMembership",value:(t=(0,o.default)(i.default.mark((function e(t,n){var r,o,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.get(t),o=(0,g.isString)(t)?(0,y.createWid)(t):t,s=r&&!r.stale?r.afterCursor:void 0,e.next=5,this._queryCatalog(r,o,s,n);case 5:u=e.sent,(0,l.default)((0,c.default)(a.prototype),"add",this).call(this,u,{merge:!0}),(r=this.get(t))&&(r.stale=!1);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(p.default);t.CatalogCollection=S,S.model=h.default,S.staleCollection=!0;var b=new S;t.default=b},91030:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_PRODUCT_IMAGES=t.MAX_PRICE=t.MIN_PRICE=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=n(19059),p=a(n(28719)),h=n(87261),_=a(n(10478));t.MIN_PRICE=0;t.MAX_PRICE=4503599627370496;t.MAX_PRODUCT_IMAGES=10;var v=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).old=(0,d.session)(!1),e.checkmark=(0,d.session)(!1),e.id=(0,d.prop)(),e.isHidden=(0,d.prop)(),e.catalogWid=(0,d.prop)(),e.url=(0,d.prop)(),e.name=(0,d.prop)(),e.description=(0,d.prop)(),e.availability=(0,d.prop)(),e.reviewStatus=(0,d.prop)(),e.canAppeal=(0,d.prop)(),e.currency=(0,d.prop)(),e.priceAmount1000=(0,d.prop)(),e.salePriceAmount1000=(0,d.prop)(),e.salePriceStartDate=(0,d.prop)(),e.salePriceEndDate=(0,d.prop)(),e.retailerId=(0,d.prop)(),e.productImageCollection=(0,d.session)(),e.imageCount=(0,d.prop)(),e.index=(0,d.prop)(),e.additionalImageCdnUrl=(0,d.prop)(),e.additionalImageHashes=(0,d.prop)(),e.imageCdnUrl=(0,d.prop)(),e.imageHash=(0,d.prop)(),e.productMsgMediaData=(0,d.session)(),e.fetchedFromServer=(0,d.session)(),e.t=(0,d.prop)(),e}return(0,o.default)(n,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.productImageCollection=new _.default,this.listenTo(this,"change:imageCdnUrl",this.triggerImageUpdate),this.listenTo(this,"change:additionalImageCdnUrl",this.triggerImageUpdate),this.triggerImageUpdate()}},{key:"triggerImageUpdate",value:function(){var e=this;if(this.markProductImagesOld(),this.fetchedFromServer||!this.productMsgMediaData)this.imageCdnUrl&&this.productImageCollection.gadd({id:"_0",mediaUrl:this.imageCdnUrl,fetchedFromServer:this.fetchedFromServer,old:!1},{merge:!0}),this.additionalImageCdnUrl&&this.additionalImageCdnUrl.forEach((function(t,n){e.productImageCollection.gadd({id:`_${n+1}`,mediaUrl:t,fetchedFromServer:e.fetchedFromServer,old:!1},{merge:!0})}));else for(var t=0;t<this.imageCount;t++)this.productImageCollection.gadd({id:`_${t}`,type:"product",mediaData:new p.default({mediaStage:h.MEDIA_DATA_STAGE.PREPARING}),fetchedFromServer:this.fetchedFromServer,old:!1},{merge:!0})}},{key:"markOld",value:function(){this.old=!0}},{key:"markProductImagesOld",value:function(){this.productImageCollection.forEach((function(e){return e.markOld()}))}},{key:"getHeadImageFile",value:function(){var e,t=this.productImageCollection,n=this.name,r=t.head();if(r&&(r.mediaData&&r.mediaData.mediaBlob&&r.mediaData.mediaBlob._blob&&(e=r.mediaData.mediaBlob._blob),e))return(0,f.createFile)([e],`${n}.jpg`,{type:"image/jpeg"})}},{key:"evictImagesFromCache",value:function(){this.productImageCollection.forEach((function(e){return e.evictFromCache()}))}},{key:"getPreviewImage",value:function(){return this.productImageCollection.head()}}]),n}(d.default);v.Proxy="product";var m=(0,d.defineModel)(v);t.default=m},86912:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createProductMsgSnapshot=E,t.sendProductMessage=function(){return S.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(81109)),u=a(n(63038)),l=a(n(91080)),c=a(n(67294)),d=n(41144),f=a(n(34215)),p=a(n(34541)),h=a(n(34263)),_=a(n(89115)),v=a(n(8643)),m=n(67717),g=r(n(92631));function y(e,t){var n=(0,l.default)(new f.default({chatParticipantCount:t}),"new AttachMediaCollection({\n  chatParticipantCount\n})");return n.processAttachments([{file:e}],v.default.MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY).then((function(){if(n.canSend()){var e=n.getPreviewableMedias();if(1===e.length){var t=(0,u.default)(e,1)[0];return t.caption||(t.caption=void 0),t}}}))}function E(e){return(0,s.default)((0,s.default)({businessOwnerJid:e.catalogWid.toString({legacy:!0}),productId:e.id.toString(),url:e.url,productImageCount:e.productImageCollection.length,title:e.name,description:e.description},0===e.priceAmount1000?{priceAmount1000:null,currencyCode:null}:{currencyCode:e.currency,priceAmount1000:e.priceAmount1000}),{},{salePriceAmount1000:(0,m.isSalePriceActive)(e)?e.salePriceAmount1000:null})}function S(){return(S=(0,o.default)(i.default.mark((function e(t,n,r){var a,o,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getHeadImageFile()){e.next=4;break}throw p.default.openToast(c.default.createElement(g.default,{msg:_.default.t(1256),id:(0,g.genId)()})),new Error("Tried to send product message. Media file is not available.");case 4:return o=t.getParticipantCount(),e.next=7,y(a,o);case 7:if(u=e.sent){e.next=11;break}throw p.default.openToast(c.default.createElement(g.default,{msg:_.default.t(1256),id:(0,g.genId)()})),new Error("Tried to send product message. Media data is not available.");case 11:l={quotedMsg:r,caption:u.caption,addEvenWhilePreparing:u.previewable&&u.state===d.ATTACH_MEDIA_STATE.PROCESSING,useBasePropsType:!0},u.sendToChat(t,(0,s.default)((0,s.default)({},l),{},{type:h.default.MSG_TYPE.PRODUCT,productMsgOptions:E(n)}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},61921:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=a(n(88577)),p=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,d.prop)(),e.name=(0,d.prop)(),e.isHidden=(0,d.prop)(),e.reviewStatus=(0,d.prop)(),e.totalItemsCount=(0,d.prop)(),e.afterCursor=(0,d.prop)(),e}return(0,o.default)(n,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.productCollection=new f.default}},{key:"addProducts",value:function(e){this.productCollection.add(e,{merge:!0})}}]),n}(d.default);p.Proxy="productColl";var h=(0,d.defineModel)(p);t.default=h},73371:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductCollCollection=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=r(n(2205)),l=r(n(99842)),c=r(n(60619)),d=n(86763),f=r(n(61921)),p=n(12989),h=100,_=function(e){return{id:e.id,name:e.name,reviewStatus:e.reviewStatus,totalItemsCount:e.totalItemsCount}},v=function(e){(0,u.default)(c,e);var t,n,r=(0,l.default)(c);function c(){var e;(0,o.default)(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).afterCursor="",e}return(0,s.default)(c,[{key:"_findQuery",value:function(e){var t=this;return(0,p.queryCollections)(e,this.afterCursor,10,0,!0,h,h).then((function(e){return t.afterCursor=e.afterCursor,e.collections}))}},{key:"_find",value:function(e){return this._findQuery(e)}},{key:"findCollectionsList",value:(n=(0,i.default)(a.default.mark((function e(t,n,r){var i,o=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.queryCollections)(t,this.afterCursor,10,n,r,h,h);case 2:i=e.sent,this.afterCursor=i.afterCursor,this.add(i.collections.map(_),{merge:!0}),i.collections.forEach((function(e){var n=o.get(e.id);n&&n.addProducts(e.products.map((function(e){return(0,d.mapProductResponseToModel)(e,t)})))}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getCollectionModels",value:function(e){var t=this.toArray();return e?t:t.filter((function(e){return!e.isHidden&&"APPROVED"===e.reviewStatus}))}},{key:"findCollectionProducts",value:(t=(0,i.default)(a.default.mark((function e(t,n){var r,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.get(n),i=r?r.afterCursor:void 0,e.next=4,(0,p.querySingleCollection)(t,n,i,10,h,h);case 4:1===(o=e.sent).collections.length&&(this.add(o.collections.map(_),{merge:!0}),(r=this.get(n))&&(r.addProducts(o.collections[0].products.map((function(e){return(0,d.mapProductResponseToModel)(e,t)}))),r.afterCursor=o.afterCursor));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),c}(c.default);t.ProductCollCollection=v,v.model=f.default,v.staleCollection=!0;var m=v;t.default=m},88577:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductCollection=t.PRODUCT_REVIEW_STATUS=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(29754)),u=r(n(2205)),l=r(n(99842)),c=r(n(60619)),d=r(n(91030)),f=r(n(63056)),p={NO_REVIEW:"NO_REVIEW",PENDING:"PENDING",REJECTED:"REJECTED",APPROVED:"APPROVED",OUTDATED:"OUTDATED"};t.PRODUCT_REVIEW_STATUS=p;var h=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"getProductModels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,o.default)((0,s.default)(n.prototype),"toArray",this).call(this);if((0,o.default)((0,s.default)(n.prototype),"length",this)<1)return t;var r=(0,o.default)((0,s.default)(n.prototype),"head",this).call(this),a=r&&r.catalogWid;if(!a)return t;var i=e?new Set([p.OUTDATED,p.NO_REVIEW,p.APPROVED,p.REJECTED,p.PENDING]):new Set([p.APPROVED]),u=(0,o.default)((0,s.default)(n.prototype),"filter",this).call(this,(function(e){return i.has(e.reviewStatus)&&!e.old}));return f.default.webCatalogProductsOnOff&&!e?u.filter((function(e){return!e.isHidden})):u}},{key:"add",value:function(e,t){var r=t?(0,o.default)((0,s.default)(n.prototype),"add",this).call(this,e,t):(0,o.default)((0,s.default)(n.prototype),"add",this).call(this,e);return this.sort(),r}},{key:"evictImagesFromCache",value:function(e){var t=this.get(e);t&&t.evictImagesFromCache()}}]),n}(c.default);t.ProductCollection=h,h.model=d.default,h.comparator=function(e,t){return e.index-t.index};var _=h;t.default=_},48430:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(63038)),l=i(n(81109)),c=i(n(34575)),d=i(n(93913)),f=i(n(16525)),p=i(n(29754)),h=i(n(2205)),_=i(n(99842)),v=n(98591),m=i(n(35340)),g=i(n(96696)),y=a(n(56727)),E=n(98569),S=i(n(5493)),b=n(16952),T=i(n(28719)),w=n(87261),A=n(81365),C=i(n(74984)),O=n(53395),M=(0,v.createTimer)({algo:{type:"fibonacci",first:0,second:1},jitter:.25,max:9e5});function I(e){return"_productimage_"+new URL(e).pathname}var k=function(e){(0,h.default)(a,e);var t,n=(0,_.default)(a);function a(){var e;(0,c.default)(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).id=(0,y.prop)(),e.type=(0,y.prop)(),e.mediaUrl=(0,y.prop)(),e.blobUrl=(0,y.session)(),e.mediaData=(0,y.session)(),e.fetchedFromServer=(0,y.prop)(),e.old=(0,y.session)(!1),e}return(0,d.default)(a,[{key:"initialize",value:function(){(0,f.default)((0,p.default)(a.prototype),"initialize",this).call(this),this.listenTo(this,"change:mediaUrl change:fetchedFromServer",this.triggerImageUpdate),this.triggerImageUpdate()}},{key:"_processAndUpdateMediaData",value:function(e){var t=this,n={},a=C.default.createFromData(e,"image/jpeg");(0,b.prepRawMedia)(a,{}).waitForPrep().then((function(e){return n=(0,l.default)((0,l.default)({},n),{},{mediaBlob:e.mediaBlob,type:e.type,mimetype:e.mimetype,fullWidth:e.fullWidth,fullHeight:e.fullHeight}),r.all([C.default.createFromBase64Jpeg(e.preview),C.default.createFromData(e.mediaBlob),(0,O.getHash)(e.mediaBlob)])})).then((function(e){var a=(0,u.default)(e,3),i=a[0],o=a[1],s=a[2];if(n=(0,l.default)((0,l.default)({},n),{},{preview:i,mediaBlob:o,renderableUrl:o.url(),mediaStage:w.MEDIA_DATA_STAGE.RESOLVED,filehash:s}),s===t.mediaData.filehash)return r.resolve();t.mediaData.set(n)}))}},{key:"triggerImageUpdate",value:(t=(0,s.default)(o.default.mark((function e(){var t,n,r,a=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fetchedFromServer&&this.mediaUrl){e.next=2;break}return e.abrupt("return");case 2:return this.mediaData||this.addChild("mediaData",new T.default({mediaStage:w.MEDIA_DATA_STAGE.PREPARING})),t=I(this.mediaUrl),e.next=6,S.default.get(t);case 6:if(!(n=e.sent)){e.next=9;break}return e.abrupt("return",this._processAndUpdateMediaData(n));case 9:return r={delay:function(e){var t=e.taskDuration,n=1e3*M();return Math.max(n-t,0)},signal:(new m.default).signal,retries:10},e.abrupt("return",(0,g.default)(r,(function(e){return(0,A.fetchMedia)(a.mediaUrl).then((function(t){return t&&t.status>=200&&t.status<300?t:e(new E.CatalogImageDownloadError)}))})).then((function(e){var n=e.result;S.default.put(t,n),a._processAndUpdateMediaData(n)})).catch((function(){__LOG__(3)`Failed to fetch ${a.mediaUrl}`,a.mediaData.set({mediaStage:w.MEDIA_DATA_STAGE.ERROR_MISSING})})));case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"markOld",value:function(){this.old=!0}},{key:"evictFromCache",value:function(){if(this.mediaUrl){var e=I(this.mediaUrl);S.default.del(e)}}}]),a}(y.default);k.Proxy="productImage";var P=(0,y.defineModel)(k);t.default=P},10478:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductImageCollection=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(29754)),u=r(n(2205)),l=r(n(99842)),c=r(n(60619)),d=r(n(48430)),f=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"toArray",value:function(){var e=this;return(0,o.default)((0,s.default)(n.prototype),"filter",this).call(this,(function(t){return t.old?(e.remove(t),!1):t}))}}]),n}(c.default);t.ProductImageCollection=f,f.model=d.default;var p=f;t.default=p},29655:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.INVALID_PRODUCT_TOKEN=void 0;var i=a(n(63038)),o=a(n(319)),s=a(n(34575)),u=a(n(93913)),l=a(n(16525)),c=a(n(29754)),d=a(n(2205)),f=a(n(99842)),p=r(n(56727)),h=r(n(10725)),_=a(n(5315)),v=n(86763),m=n(88577),g=n(98105),y=n(49246),E=a(n(63056)),S="DELETED";t.INVALID_PRODUCT_TOKEN=S;var b=["ERROR","SUCCESS"],T=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,p.prop)(),e.catalogId=(0,p.prop)(),e.title=(0,p.prop)(),e._productsLoadingStatus=(0,p.session)(),e._productList=(0,p.session)(),e._products=(0,p.session)(),e}return(0,u.default)(n,[{key:"initialize",value:function(){(0,l.default)((0,c.default)(n.prototype),"initialize",this).call(this),this.productCollection=h.default.gadd({id:this.catalogId}).productCollection,this._productsLoadingStatus=new Map,this.listenTo(this,"change:_products",this.triggerProductUpdate),this.triggerProductUpdate(),this.listenTo(this.productCollection,"remove",this.triggerProductRemoved)}},{key:"triggerProductRemoved",value:function(e){(0,g.updateProductListHeaderImageRejected)(e,this.id)}},{key:"triggerProductUpdate",value:function(){var e=this;null!=this._products&&(this._products.forEach((function(t){var n=e._getFetchStatus(t);if(e.setProductLoadingStatus(t.id,n),"DELETED"===t.status&&e.triggerProductRemoved(t),"DELETED"!==t.status&&"ERROR"!==n){var r=(0,v.mapProductResponseToModel)(t,e.catalogId);r.reviewStatus===m.PRODUCT_REVIEW_STATUS.REJECTED&&e.triggerProductRemoved(r),e.productCollection.add(r,{merge:!0})}})),this._products=void 0)}},{key:"getNextProductBatchToLoad",value:function(){var e=this,t=this.getPageSize(),n=this._productList.productSections.reduce((function(t,n){var r=n.products;return[].concat((0,o.default)(t),(0,o.default)(r.map((function(e){return e.productId})).filter(Boolean).filter((function(t){return"NONE"===e.getProductLoadingStatus(t)}))))}),[]).slice(0,t);return n.forEach((function(t){return e.setProductLoadingStatus(t,"PENDING")})),n}},{key:"getPageSize",value:function(){var e=E.default.webProductListMessagePageSize||y.PRODUCT_PAGE_SIZE,t=this.getProductSize();return t<3*e?t:2*e}},{key:"getProductSize",value:function(){return this._productList.productSections.reduce((function(e,t){return e+t.products.length}),0)}},{key:"setProductLoadingStatus",value:function(e,t){this._productsLoadingStatus.set(e,t)}},{key:"getProductLoadingStatus",value:function(e){return this._productsLoadingStatus.get(e)||"NONE"}},{key:"getTotalProductsFetchedOrFailed",value:function(){return Array.from(this._productsLoadingStatus).filter((function(e){var t=(0,i.default)(e,2),n=(t[0],t[1]);return b.includes(n)})).length}},{key:"getProductList",value:function(){return this._productList}},{key:"getSections",value:function(){return this._productList.productSections}},{key:"getSectionsCount",value:function(){return this._productList.productSections.reduce((function(e,t){var n=t.title;return null!=n&&""!==n?e+1:e}),0)}},{key:"isFetching",value:function(){var e=!1;return this._productsLoadingStatus.forEach((function(t){"PENDING"===t&&(e=!0)})),e}},{key:"_getFetchStatus",value:function(e){return e.status===S||!e.image_cdn_urls||e.image_cdn_urls[0].value.includes(h.STATIC_WHATSAPP_IMAGE_URI)?"ERROR":"SUCCESS"}}]),n}(p.default);T.Proxy="product_list",T.idClass=_.default;var w=(0,p.defineModel)(T);t.default=w},63760:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProductMessageListCollection=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(60619)),c=n(59078),d=a(n(29655)),f=n(75793),p=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"_queryProductList",value:function(e){var t=e.catalogId;return(0,c.queryProductList)(t,e.getNextProductBatchToLoad()).then((function(t){return{id:e.id,_products:t,fetchedFromServer:!0}}))}},{key:"_findQuery",value:function(e){var t=this.get(e);return null==t?r.resolve({id:e}):this._queryProductList(t)}},{key:"_find",value:function(e){return this._findQuery(e)}},{key:"getOrAdd",value:function(e,t,n,r){var a=this.get(e);if(null!=a)return a;if(null==n)return null;var i=(0,f.createWid)(n);return null!=(a=this.add({id:e,catalogId:i,_productList:t,title:r})[0])?a:null}}]),n}(l.default);t.ProductMessageListCollection=p,p.model=d.default,p.staleCollection=!0;var h=new p;t.default=h},49246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRODUCT_PAGE_SIZE=void 0;t.PRODUCT_PAGE_SIZE=6},67717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActivePrice=t.isSalePriceActive=void 0;var n=function(e){return null!=e.salePriceAmount1000&&(null==e.salePriceStartDate||e.salePriceStartDate<=Date.now())&&(null==e.salePriceEndDate||e.salePriceEndDate>Date.now())};t.isSalePriceActive=n;t.getActivePrice=function(e){return n(e)?e.salePriceAmount1000:e.priceAmount1000}},97098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductAvailability=void 0;var r=n(54302)({IN_STOCK:"in stock",OUT_OF_STOCK:"out of stock",UNKNOWN:"unknown"});t.ProductAvailability=r},56395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROFILE_PIC_COMMAND=void 0;var n=Object.freeze({REMOVE:"remove",SET:"set"});t.PROFILE_PIC_COMMAND=n},41591:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FALLBACK=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=a(n(34263)),d=n(71701),f=a(n(22021)),p=a(n(69267)),h=a(n(12717)),_={SINGLE:"SINGLE",GROUP:"GROUP"};t.FALLBACK=_;var v=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.token=(0,l.prop)(),e.tag=(0,l.prop)(),e.raw=(0,l.prop)(),e.eurl=(0,l.prop)(),e.previewEurl=(0,l.prop)(),e.stale=(0,l.session)(!0),e.eurlStale=(0,l.session)(!1),e.pendingPic=(0,l.session)(),e.img=(0,l.derived)(e._img,["tag","raw","stale","eurl","eurlStale","previewEurl"]),e.imgFull=(0,l.derived)(e._imgFull,["tag","raw","stale","eurl","eurlStale"]),e.fallbackType=(0,l.derived)(e._fallbackType,["id"]),e}return(0,o.default)(r,[{key:"_img",value:function(){return this.raw?"data:image/jpeg;base64,"+this.raw:!this.tag&&this.stale?null:this.tag?f.default.supportsFeature(f.default.F.MD_BACKEND)?this.previewEurl:this.generateUrl("s"):void 0}},{key:"_imgFull",value:function(){return!this.raw&&this.tag||!this.stale?!this.raw&&this.tag?f.default.supportsFeature(f.default.F.MD_BACKEND)?this.eurl:this.generateUrl("l"):void 0:null}},{key:"_fallbackType",value:function(){return h.default.isUser(this.id)?_.SINGLE:(h.default.isGroup(this.id),_.GROUP)}},{key:"markStale",value:function(e){this.stale=!0,e&&e.eurl&&(this.eurlStale=!0)}},{key:"validate",value:function(){if(this.stale||this.eurlStale)return this.getCollection().update(this.id)}},{key:"generateUrl",value:function(e){var t={t:e,u:this.id.toString(),i:this.tag||"",n:this.token||""};return this.token||(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("profilePicThumb::generateUrl: empty token for profile pic")),p.default.build(c.default.PP_URL,t)}},{key:"canSet",value:function(){if(h.default.isGroup(this.id)){var e=n(26671).default.get(this.id);return!(e&&e.groupMetadata&&e.groupMetadata.participants.iAmRestrictedMember())}return!!this.id.equals((0,d.getMaybeMeUser)())}},{key:"canDelete",value:function(){if(h.default.isGroup(this.id)&&this.tag){var e=n(26671).default.assertGet(this.id);return!(e&&e.groupMetadata&&e.groupMetadata.participants.iAmRestrictedMember())}return!(!this.id.equals((0,d.getMaybeMeUser)())||!this.tag)}},{key:"getCollection",value:function(){return n(99838).default}}]),r}(l.default);v.Proxy="profilePicThumb",v.idClass=h.default;var m=(0,l.defineModel)(v);t.default=m},99838:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProfilePicThumbCollection=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=i(n(96486)),p=a(n(60619)),h=i(n(93743)),_=n(14650),v=a(n(98569)),m=n(71701),g=i(n(22021)),y=i(n(65122)),E=n(56395),S=n(95872),b=i(n(41591)),T=n(38210),w=i(n(12717)),A=n(75793),C=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"get",value:function(e){var t=(0,u.default)((0,l.default)(a.prototype),"get",this).call(this,e);if(!this.modelClass.prototype.isIdType(e))return t;var n=(0,u.default)((0,l.default)(a.prototype),"get",this).call(this,(0,y.default)(e.toString()));if(n){if(this.remove(n,{silent:!0}),t&&t.tag)return t;var r=n.toJSON();return r.id=e,this.add(r,{silent:!0,merge:!0})[0]}return t||void 0}},{key:"saveToCache",value:function(){if(h.default.shouldSaveToCache()){var e=a.cachePolicy.id,t=this.filter((function(e){return w.default.isWid(e.id)&&!!e.eurl&&!!e.token}));t=t.map((function(e){var t=e.toJSON();return t.id=(0,y.default)(t.id.toString()),t})),__LOG__(2)`models:profilePic:cache-save: ${String(e)}`,(0,m.setCollection)(e,t)}}},{key:"initializeFromCache",value:function(e){if(this.length&&e){var t=this.reduce((function(e,t){return e[(0,y.default)(t.id.toString())]=t.id.toString(),e}),new Object);if(!f.default.isEmpty(t)){var n=e.reduce((function(e,n){return t[n.id]&&(n.id=(0,A.createWid)(t[n.id]),n.stale=!0,n.token&&e.push(n)),e}),[]);this.add(n,{merge:!0})}}}},{key:"onResume",value:function(){var e=this.filter((function(e){var t=n(26671).default.get(e.id);return e.hasObservers()&&e.stale&&(w.default.isUser(e.id)||w.default.isGroup(e.id))&&!(t&&t.isReadOnly)})).map((function(e){return e.tag||e.unset("tag",{silent:!0}),e}));this.resyncPictures(e)}},{key:"_find",value:function(e){var t=n(26671).default.get(e);if(t&&t.isReadOnly)return g.default.supportsFeature(g.default.F.MD_BACKEND)?r.resolve({id:e,stale:!0}):(0,S.profilePicFindThumbFromPhone)(e,this.get(e)).then((function(e){return e.tag||e.raw||(e.eurl=null,e.tag=null,e.raw=null,e.eurlStale=!1),e})).catchType(v.ProtoVersionUndefined,(function(){return{id:e,stale:!0}}));if(w.default.isUser(e)||w.default.isGroup(e)){var a={id:e};return(0,S.profilePicFind)(e).then((function(e){return a.tag=e.tag,a.raw=null,a.eurl=e.eurl,a.eurlStale=!1,a.token=e.token,g.default.supportsFeature(g.default.F.MD_BACKEND)&&(a.previewEurl=e.previewEurl),a})).catchType(_.ServerStatusCodeError,(function(e){switch(e.status){case 401:a.tag="",a.raw=void 0;break;case 423:case 429:a.stale=!0;break;default:a.tag=null,a.eurl=null,a.eurlStale=!1}return r.resolve(a)})).catchType(_.WebdDrop,(function(){return{id:e,stale:!0}}))}return r.resolve({id:e,tag:null})}},{key:"imageChanged",value:function(e,t){var n=this.get(e);n&&(t===E.PROFILE_PIC_COMMAND.REMOVE?n.set({tag:void 0,eurl:void 0}):t!==E.PROFILE_PIC_COMMAND.SET&&n.tag===t||this.update(n.id).catchType(_.WebdDrop,(function(){})))}},{key:"resyncPictures",value:function(e){var t=this;return 0===e.length?r.resolve():(0,S.profilePicResync)(e.map((function(e){return{id:e.id,tag:e.tag}}))).then((function(n){__LOG__(2)`ProfilePicThumbStore:resyncPictures success`,n.forEach((function(n){var r=t.get(n.id);r&&r.set({tag:n.tag,token:n.token,raw:void 0,stale:!1,eurl:n.eurl,eurlStale:!1,previewEurl:n.previewEurl}),e.forEach((function(e){e.eurlStale&&t.update(e.id)})),e.forEach((function(e){e.stale=!1}))}))})).catchType(_.WebdDrop,(function(){})).catchType(_.ServerStatusCodeError,(function(e){423===e.status||429===e.status?__LOG__(3)`ProfilePicThumbStore:resyncPictures blocked ${e.status}`:e.status>=400&&__LOG__(3)`ProfilePicThumbStore:resyncPictures dropped: ${String(e)}`})).catch((function(e){__LOG__(3)`ProfilePicThumbStore:resyncPictures dropped: ${String(e)}`}))}},{key:"findThumbnailWid",value:function(e){var t=this;return e.find((function(e){var n;return null===(n=t.get(e))||void 0===n?void 0:n.img}))}},{key:"getThumbnailWidFromVcard",value:function(e){if(!e)return null;var t=(0,T.vcardWids)(e);if(t){var n=this.findThumbnailWid(t);return n||(t.length?t[0]:null)}}}]),a}(p.default);t.ProfilePicThumbCollection=C,C.model=b.default,C.staleCollection=!0,C.resumeOnAvailable=!0,C.cachePolicy={id:"profile_pic_thumb",trigger:"change:tag change:raw",policy:p.CACHE_POLICY.LOAD,delay:5e3};var O=new C;t.default=O},46590:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.shortcut=(0,l.prop)(),e.message=(0,l.prop)(),e.count=(0,l.prop)(),e.keywords=(0,l.prop)(),e.pendingCount=(0,l.session)(0),e.totalCount=(0,l.derived)(e._totalCount,["count","pendingCount"]),e}return(0,o.default)(r,[{key:"_totalCount",value:function(){return this.count+this.pendingCount}},{key:"useOnce",value:function(){this.pendingCount+=1,this.getCollection().periodicFlush()}},{key:"getCollection",value:function(){return n(40113).default}}]),r}(l.default);c.Proxy="quickReply";var d=(0,l.defineModel)(c);t.default=d},40113:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.QuickReplyCollection=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(29754)),u=r(n(2205)),l=r(n(99842)),c=n(12035),d=r(n(60619)),f=n(14650),p=r(n(22021)),h=r(n(46590)),_=r(n(23306)),v=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,a.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).checksum=void 0,e.flushCountsTimer=new c.ShiftTimer((function(){e.hasPendingCounts()&&e.flushCounts()})),e.sortQuickReply=function(e,t){return e.totalCount===t.totalCount?e.id<t.id?-1:1:e.totalCount>t.totalCount?-1:1},e.onCountsFlushed=function(t){var n=t.id,r=t.count,a=e.get(n);a&&(a.count=r,a.pendingCount=0)},e}return(0,i.default)(n,[{key:"delete",value:function(){(0,o.default)((0,s.default)(n.prototype),"delete",this).call(this),delete this.checksum}},{key:"filterShortcuts",value:function(e){return this.filter((function(t){return t.shortcut.toLowerCase().startsWith(e.toLowerCase())})).sort(this.sortQuickReply)}},{key:"sync",value:function(e){p.default.supportsFeature(p.default.F.QUICK_REPLIES_QUERY)&&(this.synced()&&this.checksum===e?this.hasPendingCounts()&&this.flushCounts():this.findQuery({}).catchType(f.WebdDrop,(function(){})))}},{key:"periodicFlush",value:function(){p.default.supportsFeature(p.default.F.QUICK_REPLIES_QUERY)&&this.flushCountsTimer.debounceAndCap(2e3,5e3)}},{key:"updateChecksum",value:function(e){this.checksum=e}},{key:"synced",value:function(){return void 0!==this.checksum}},{key:"hasPendingCounts",value:function(){return this.some((function(e){return e.pendingCount>0}))}},{key:"getAllPendingCounts",value:function(){var e={};return this.forEach((function(t){var n=t.id,r=t.pendingCount;r>0&&(e[n]=r)})),e}},{key:"flushCounts",value:function(){var e=this,t=this.getAllPendingCounts();_.default.flushQuickReplyCounts(t).then((function(n){n.checksum&&e.updateChecksum(n.checksum),n.data.filter((function(e){var n=e.id;return void 0!==t[n]})).forEach(e.onCountsFlushed)})).catchType(f.WebdDrop,(function(){}))}},{key:"_findQuery",value:function(){var e=this,t=this.getAllPendingCounts();return _.default.queryQuickReplies(t).then((function(n){return n.checksum&&e.updateChecksum(n.checksum),n.data.filter((function(e){var n=e.id;return void 0!==t[n]})).forEach(e.onCountsFlushed),n.data}))}},{key:"handle",value:function(e){e.checksum&&this.updateChecksum(e.checksum);var t=[],n=[];e.quickReplies.forEach((function(e){"delete"===e.type?t.push(e):n.push(e)})),this.remove(t.map((function(e){return e.id}))),this.add(n,{merge:!0})}}]),n}(d.default);t.QuickReplyCollection=v,v.model=h.default;var m=new v;t.default=m},77215:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isUnviewed=function(e){return!l(e)&&!c(e)},t.isViewed=l,t.isExpired=c,t.setViewOnceTestExpire_INTERNAL=function(){},t.VIEW_ONCE_EXPIRE_AFTER=void 0;var a=r(n(79140)),i=r(n(34263)),o=n(89305),s=1209600;function u(e){var t=(0,o.unproxy)(e);return null!=t?t.asViewOnce:null}function l(e){var t;return(null===(t=u(e))||void 0===t?void 0:t.ack)===i.default.ACK.PLAYED}function c(e){var t=u(e);if(null==t)return!1;var n=a.default.globalUnixTime()-(0,o.unproxy)(t).t;return!l(t)&&n>=s}t.VIEW_ONCE_EXPIRE_AFTER=s},63056:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ServerProps=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=a(n(34541)),p=a(n(22021)),h=a(n(8643)),_=n(49246),v=n(15453),m=a(n(20997)),g={imageMaxKBytes:function(e){if("number"==typeof e&&e>0)return 1024*e},pttDraftEnabled:function(e){return!!p.default.supportsFeature(p.default.F.PTT_DRAFT_ENABLED)&&Boolean(e)},maxParticipants:function(e){if("number"==typeof e&&e>0)return e-1},media:E,maxFileSize:E,groupDescLength:S,googleMapsDoNotAuth:b,googleMapsKeyless:b,frequentlyForwardedMessages:b,frequentlyForwardedGroupSetting:b,quickMessageSearch:b,ephemeralMessagesSetting:b,ephemeralMessages:b,ephemeralPruning:b,statusVideoMaxDuration:S,muteAlways:b,viewOnceRead:b,viewOnceWrite:b,ctwaContextRender:b,serverPropsVersion:S,newCommerceEntryPointEnabled:b,wallpapersV2:b,hfmStringChanges:b,webServerStickerPanel:b,shopsProductGrid:b,interactiveMessage:b},y=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).serverPropsVersion=(0,d.prop)(),e.gifSearch=(0,d.prop)(!1),e.imageMaxEdge=(0,d.prop)(1600),e.imageMaxKBytes=(0,d.prop)(1048576),e.maxParticipants=(0,d.prop)(101),e.maxSubject=(0,d.prop)(25),e.media=(0,d.prop)(16777216),e.maxFileSize=(0,d.prop)(104857600),e.groupDescLength=(0,d.prop)(0),e.googleMapsDoNotAuth=(0,d.prop)(!0),e.googleMapsKeyless=(0,d.prop)(!1),e.multicastLimitGlobal=(0,d.prop)(5),e.frequentlyForwardedMessages=(0,d.prop)(!1),e.frequentlyForwardedThreshold=(0,d.prop)(5),e.frequentlyForwardedMax=(0,d.prop)(1),e.frequentlyForwardedGroupSetting=(0,d.prop)(!1),e.quickMessageSearch=(0,d.prop)(!1),e.ephemeralMessagesSetting=(0,d.prop)(!1),e.ephemeralMessages=(0,d.prop)(!0),e.ephemeralPruning=(0,d.prop)(!0),e.ephemeralMessagesAllowedValues=(0,d.prop)("604800"),e.productMediaAttachments=(0,d.prop)(!1),e.muteAlways=(0,d.prop)(!1),e.viewOnceRead=(0,d.prop)(!1),e.viewOnceWrite=(0,d.prop)(!1),e.wallpapersV2=(0,d.prop)(!1),e.hfmStringChanges=(0,d.prop)(!1),e.mmsVCacheAggregationEnabled=(0,d.prop)(!1),e.mmsHotContentTimespan=(0,d.prop)(0),e.mmsCatV1ForwardHotOverrideEnabled=(0,d.prop)(!1),e.pttDraftEnabled=(0,d.prop)(!1),e.pttPlaybackSpeedEnabled=(0,d.prop)(!1),e.pttPlaybackSpeedHideDelay=(0,d.prop)(1500),e.templateDocMimeTypes=(0,d.prop)(1),e.mmsMediaKeyTTL=(0,d.prop)(1/0),e.vcardAsDocumentSizeKb=(0,d.prop)(0),e.vcardMaxSizeKb=(0,d.prop)(1e3),e.mmsVcardAutodownloadSizeKb=(0,d.prop)(1024),e.webUploadDocumentThumbMmsEnabled=(0,d.prop)(!1),e.webDownloadDocumentThumbMmsEnabled=(0,d.prop)(!1),e.webSendDocumentThumbInMessageDisabled=(0,d.prop)(!1),e.webUploadLinkThumbMmsEnabled=(0,d.prop)(!1),e.webDownloadLinkThumbMmsEnabled=(0,d.prop)(!1),e.webVoipInternalTester=(0,d.prop)(!1),e.webVoip=(0,d.prop)(!1),e.groupCallMaxParticipants=(0,d.prop)(0),e.statusVideoMaxDuration=(0,d.prop)(30),e.webVoipMacOsMinVersion=(0,d.prop)(""),e.webVoipWindowsOsMinVersion=(0,d.prop)(""),e.ctwaContextRender=(0,d.prop)(!1),e.ctwaContextCompose=(0,d.prop)(!1),e.syncdInlineMutationsMaxCount=(0,d.prop)(1e3),e.syncdPatchProtobufMaxSize=(0,d.prop)(100),e.syncdKeyMaxUseDays=(0,d.prop)(30),e.syncdWaitForKeyTimeoutDays=(0,d.prop)(7),e.syncdAdditionalMutations=(0,d.prop)(1),e.syncdAntiTamperingFatalExceptionEnabled=(0,d.prop)(!1),e.syncdSentinelTimeoutSeconds=(0,d.prop)(3),e.syncdPatchDeviceIndexIncluded=(0,d.prop)(!1),e.syncdClearChatEnabled=(0,d.prop)(!1),e.webBizProfileOptions=(0,d.prop)(3),e.webBizProfileEdit=(0,d.prop)(!1),e.webBizProfileV3=(0,d.prop)(!1),e.mdBlocklistV2=(0,d.prop)(!1),e.newCommerceEntryPointEnabled=(0,d.prop)(!1),e.webShopsChatHeaderButtonEnabled=(0,d.prop)(!1),e.shopsProfileDrawerEntrypoint=(0,d.prop)(!1),e.shopsHideCatalogAttachmentEntrypoint=(0,d.prop)(!1),e.shopsHeaderDropdownMenuItem=(0,d.prop)(!1),e.shopsProductGrid=(0,d.prop)(!1),e.bspSystemMessageEnabled=(0,d.prop)(!1),e.webListMessage=(0,d.prop)(!1),e.webCart=(0,d.prop)(!1),e.webCartV11OrderMessageChanges=(0,d.prop)(!1),e.webButtonsMessage=(0,d.prop)(!1),e.webCatalogApiREH=(0,d.prop)(!1),e.greenAlertBannerDuration=(0,d.prop)(0),e.webSMBUpsellInBizProfile=(0,d.prop)(!1),e.webProductListMessageFallback=(0,d.prop)(!1),e.webProductListMessage=(0,d.prop)(!1),e.webProductListMessageRenderKillSwitch=(0,d.prop)(!1),e.webProductListMessagePageSize=(0,d.prop)(_.PRODUCT_PAGE_SIZE),e.webCatalogProductsOnOff=(0,d.prop)(!1),e.webYouTubePlayerEnhancements=(0,d.prop)(!1),e.webServerStickerPanel=(0,d.prop)(!1),e.webCollectionsDisplay=(0,d.prop)(!1),e.webCollectionsManagement=(0,d.prop)(!1),e.webCartOnOffToggle=(0,d.prop)(!1),e.interactiveMessage=(0,d.prop)(!1),e}return(0,o.default)(n,[{key:"delete",value:function(){(0,s.default)((0,u.default)(n.prototype),"delete",this).call(this),this.updateProps({})}},{key:"initialize",value:function(){(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this)}},{key:"set",value:function(e,t,r){if("string"==typeof e)(0,v.setServerPropInElectron)(e,t);else{var a=e,i=t;Object.keys(a).forEach((function(e){var t=a[e];(null==i?void 0:i.merge)&&void 0===t||(0,v.setServerPropInElectron)(e,t)}))}return(0,s.default)((0,u.default)(n.prototype),"set",this).call(this,e,t,r)}},{key:"updateProps",value:function(e){var t=this,n=e;for(var r in h.default.Global.webcBucket=n.bucket||null,this.__props.forEach((function(e){var r=n[e];void 0===r?r="serverPropsVersion"===e?t.serverPropsVersion:t.getDefault(e):g[e]&&void 0===(r=g[e](r))&&(r=t.getDefault(e)),t.set(e,r)})),p.default.F)void 0!==n[r]&&p.default.setFeature(r,n[r]);f.default.serverPropsUpdated()}},{key:"updateSelectiveProps",value:function(e){var t=this,n=e;for(var r in h.default.Global.webcBucket=n.bucket||null,this.__props.forEach((function(e){var r=n[e];void 0!==r&&(g[e]&&void 0===(r=g[e](r))&&(r=t.getDefault(e)),t.set(e,r))})),p.default.F)void 0!==n[r]&&p.default.setFeature(r,e[r]);f.default.serverPropsUpdated()}},{key:"extendAndOverrideFromURLParams",value:function(e){var t=new m.default(window.location.search),n=e;return this.__props.forEach((function(e){var r=`sp_${e}`;if(!0===t.has(r)){var a=t.get(r);if(null==a)return;"true"===a||"false"===a?n[e]="true"===a:isNaN(a)||isNaN(parseFloat(a))?n[e]=a:n[e]=parseFloat(a)}})),n}},{key:"handlePayload",value:function(e){"number"==typeof e.status&&e.status>=400||this.updateProps(e)}},{key:"handle",value:function(e){var t=e.shift();this.handlePayload(t)}},{key:"getWebVoipInternalTester",value:function(){return this.webVoipInternalTester}},{key:"getWebVoip",value:function(){return this.webVoip}},{key:"getGroupCallMaxParticipants",value:function(){return this.groupCallMaxParticipants}},{key:"getEphemeralMessagesAllowedValues",value:function(){return this.ephemeralMessagesAllowedValues.split(",").map((function(e){return parseInt(e,10)}))}}]),n}(d.default);function E(e){if("number"==typeof e&&e>0)return 1024*e*1024}function S(e){if("number"==typeof e&&e>0)return e}function b(e){if("number"==typeof e)return!!e}t.ServerProps=y,y.Proxy="serverProps";var T=new((0,d.defineModel)(y))({id:"1"});t.default=T},58695:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=r(n(56727)),f=n(14650),p=n(31230),h=n(89116),_={classic:!1,enabled:!1},v=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,d.prop)(),e.archive=(0,d.prop)(),e.disappearingMode=(0,d.prop)(),e.showArchiveV2=(0,d.derived)(e._showArchiveV2,["archive","enabled"]),e}return(0,o.default)(r,[{key:"delete",value:function(){this.set({archive:_,disappearingMode:_}),(0,s.default)((0,u.default)(r.prototype),"delete",this).call(this)}},{key:"_showArchiveV2",value:function(){return!!this.archive.enabled&&!this.archive.classic}},{key:"handleResponse",value:function(e){var t=this;e.length?e.forEach((function(e){switch(__LOG__(2)`Settings: received setting type: ${e.type}`,e.type){case h.ARCHIVE_SETTINGS_KEY:var n;if(!(0,p.archiveV2Supported)()){__LOG__(4,void 0,new Error,!0)`Settings:handleResponse archive settings response is unsupported`,SEND_LOGS("archive-setting-unsupported");break}t.set({archive:{classic:e.value.classic,enabled:null!==(n=e.value.enabled)&&void 0!==n?n:t.archive.enabled}});break;case h.DISAPPEARING_MODE_SETTINGS_KEY:t.set({disappearingMode:{duration:e.value.duration,settingTimestamp:e.value.settingTimestamp}})}})):__LOG__(2)`Settings: received empty settings`}},{key:"sync",value:function(e){var t=this,r="Settings:sync"+(e?" resume":"");return __LOG__(2)`${r}`,(0,n(23306).default.querySettings)(e).then((function(e){200===e.status?(__LOG__(2)`${r} success`,t.handleResponse(e.settings)):__LOG__(3)`${r} error receive status code ${e.status}`})).catchType(f.WebdDrop,(function(){__LOG__(3)`${r} dropped`})).catch((function(e){__LOG__(4,void 0,new Error,!0)`${r} failed with error: ${e}`,SEND_LOGS("settings-query-failed")}))}}]),r}(d.default);v.Proxy="settings";var m=new((0,d.defineModel)(v))({id:"default_settings_id",archive:_,disappearingMode:{duration:0,settingTimestamp:0}});t.default=m},20243:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=i(n(96486)),p=i(n(60619)),h=i(n(22021)),_=i(n(16551)),v=i(n(66312)),m=a(n(7860)),g=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;return(0,o.default)(this,n),(e=t.call(this)).syncPromise=null,e.isSynced=!1,e.listenTo(m.default,"change:stream",(function(){m.default.stream===m.STREAM.DISCONNECTED&&(e.isSynced=!1)})),e}return(0,s.default)(n,[{key:"onResume",value:function(){this.isSynced=!1,this.sync()}},{key:"maySync",value:function(){return h.default.supportsFeature(h.default.F.STARRED_GIFS)}},{key:"sync",value:function(){var e=this;return this.isSynced?r.resolve():this.syncPromise?this.syncPromise:this.maySync()?(this.syncPromise=v.default.getStarred(void 0,void 0,void 0,!0).then((function(t){var n=[];t&&t.length&&(n=f.default.filter(t,(function(e){return e&&e.isGif&&!e.isUnsentMedia}))),e.set(n)})).catch((function(e){499!==e&&__LOG__(3)`starred gif msgs sync error: `})).finally((function(){e.syncPromise=null,e.isSynced=!0})),this.syncPromise):r.resolve()}},{key:"add",value:function(e,t){if(!e||!this.maySync()||!this.isSynced)return[];var r=this.isModel(e)?[e]:e;return r=f.default.differenceWith(f.default.filter(r,(function(e){return e.isGif})),this.toArray(),(function(e,t){return e.body===t.body})),(0,u.default)((0,l.default)(n.prototype),"add",this).call(this,r,t)}},{key:"remove",value:function(e,t){if(!e||!this.maySync()||!this.isSynced)return[];var r=this.isModel(e)?[e]:e;return r=f.default.intersectionWith(f.default.filter(r,(function(e){return e.isGif})),this.toArray(),(function(e,t){return e.body===t.body})),(0,u.default)((0,l.default)(n.prototype),"remove",this).call(this,r,t)}}]),n}(p.default);g.model=_.default,g.comparator=function(e,t){return t.t-e.t};var y=new g;t.default=y},76408:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addStarredMsgs=function(e){o.add(e),e.forEach((function(e){e.chat.starredMsgs&&e.chat.starredMsgs.add(e)})),g.default.add(e)},t.removeStarredMsgs=S,t.default=t.StarredMsgCollection=void 0;var o,s=i(n(34575)),u=i(n(93913)),l=i(n(16525)),c=i(n(29754)),d=i(n(2205)),f=i(n(99842)),p=i(n(91080)),h=i(n(60619)),_=i(n(34263)),v=i(n(16551)),m=i(n(66312)),g=i(n(20243)),y=a(n(7860)),E=function(e){(0,d.default)(n,e);var t=(0,f.default)(n);function n(){var e;return(0,s.default)(this,n),(e=t.call(this)).syncPromise=null,e.isSynced=!1,e.listenTo(y.default,"change:stream",(function(){y.default.stream===y.STREAM.DISCONNECTED?e.isSynced=!1:y.default.stream===y.STREAM.CONNECTED&&e.delete()})),e}return(0,u.default)(n,[{key:"process",value:function(e,t,n,r){r?this.delete():this.updateMsgs(e,t,n)}},{key:"sync",value:function(e){if(this.isSynced)return r.resolve();if(null!=this.syncPromise)return this.syncPromise;var t,n=this,a=this.last();return a&&(t=a.id),this.syncPromise=m.default.getStarred(e,_.default.PAGE_SIZE,t).then((function(e){e.length&&n.add(e,{silent:!0}),e.length<_.default.PAGE_SIZE&&(n.isSynced=!0)})).catch((function(){__LOG__(3)`starred msg sync error: `})).finally((function(){n.syncPromise=null,n.trigger("sync")})),this.trigger("sync"),(0,p.default)(this.syncPromise,"syncPromise can not be null")}},{key:"updateMsgs",value:function(e,t,n){var a=this,i=this.syncPromise||r.resolve();this.syncPromise=i.then((function(){return e?(t.length>0?m.default.incrementalStarredUpdate(t):r.resolve([])).then((function(e){var t=e.concat(n);a.isSynced&&(a.add(t,{silent:!0}),g.default.add(e)),t.forEach((function(e){e.chat.starredMsgs&&e.chat.starredMsgs.add(e)})),a.trigger("sync")})).catch((function(){__LOG__(3)`models:starred:update:error: `})):(S(t.concat(n).filter((function(e){return!e.star}))),r.resolve())})).finally((function(){a.syncPromise=null}))}},{key:"delete",value:function(){this.isSynced=!1,(0,l.default)((0,c.default)(n.prototype),"delete",this).call(this)}}]),n}(h.default);function S(e){o.remove(e),e.forEach((function(e){e.chat.starredMsgs&&e.chat.starredMsgs.remove(e)}))}t.StarredMsgCollection=E,E.model=v.default,E.comparator=function(e,t){return t.t-e.t};var b=o=new E;t.default=b},30674:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=r(n(56727)),c=a(n(12717)),d=function(e){(0,s.default)(r,e);var t=(0,u.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,l.prop)(),e.status=(0,l.prop)(),e.stale=(0,l.session)(!0),e}return(0,o.default)(r,[{key:"getCollection",value:function(){return n(43454).default}}]),r}(l.default);d.Proxy="status",d.idClass=c.default;var f=(0,l.defineModel)(d);t.default=f},43454:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StatusCollection=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(60619)),c=n(14650),d=r(n(30674)),f=n(96303),p=r(n(12717)),h=n(75793),_=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"onResume",value:function(){var e=this;this.filter((function(e){return e.hasObservers()})).forEach((function(t){e.find(t.id).catchType(c.WebdDrop,(function(){}))}))}},{key:"_find",value:function(e){var t=e instanceof p.default?e:(0,h.createWid)(e);return(0,f.getStatus)(t)}},{key:"handle",value:function(e){var t=(0,a.default)(e,1)[0],n=this.get(t.id);n&&(n.status=t.status,n.stale=!1)}}]),n}(l.default);t.StatusCollection=_,_.model=d.default,_.idClass=p.default,_.staleCollection=!0,_.resumeOnAvailable=!0;var v=new _;t.default=v},78520:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(1073)),f=n(56727),p=a(n(79140)),h=a(n(34263)),_=a(n(48629)),v=n(83591),m=a(n(91322)),g=a(n(12717)),y=function(e){(0,l.default)(a,e);var t=(0,c.default)(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).id=(0,f.prop)(),e.t=(0,f.prop)(),e.unreadCount=(0,f.prop)(0),e.totalCount=(0,f.prop)(0),e.pic=(0,f.prop)(),e._msgs=(0,f.prop)((function(){return[]})),e.readKeys=(0,f.session)((function(){return{}})),e.contact=(0,f.session)(),e.expireTimer=(0,f.session)(),e.expireTs=(0,f.session)(),e.hasUnread=(0,f.derived)(e._hasUnread,["unreadCount"]),e.readCount=(0,f.derived)(e._readCount,["unreadCount","totalCount"]),e.lastStatus=(0,f.derived)(e._lastStatus,["msgsChanged","totalCount"]),e}return(0,o.default)(a,[{key:"_hasUnread",value:function(){return this.unreadCount>0}},{key:"_readCount",value:function(){var e=this.totalCount-this.unreadCount;return Number.isFinite(e)?e:(__LOG__(3)`Bad status v3 read count, ${this.totalCount}, ${this.unreadCount}`,0)}},{key:"_lastStatus",value:function(){return this.msgs.last()}},{key:"initialize",value:function(){var e=this;(0,s.default)((0,u.default)(a.prototype),"initialize",this).call(this),this.addChild("contact",_.default.gadd(this.id)),this.listenTo(this.msgs,"add bulk_add",(function(){window.setTimeout((function(){e.setupStatusExpiration()}))})),this.listenTo(this,"change:lastStatus",(function(){e.lastStatus&&(e.t=e.lastStatus.t)}))}},{key:"setupStatusExpiration",value:function(){var e=this,t=this.msgs.at(0);if(t&&!("number"==typeof this.expireTs&&this.expireTs<=t.t)){var n=t.t+86400+1;n<p.default.globalUnixTime()?window.setTimeout((function(){e.expireMsg()})):(this.expireTimer=d.default.setGlobalTimeout(this.expireMsg.bind(this),1e3*n,this.expireTimer),this.expireTs=t.t)}}},{key:"expireMsg",value:function(){for(var e=this.msgs;e.length>0;){var t=e.at(0);if(!t)break;if(t.t+86400>p.default.globalUnixTime())break;this.unreadCount>this.totalCount-1&&this.unreadCount--,this.totalCount--,e.remove(t),t.delete()}this.expireTs=void 0,this.expireTimer=void 0,0!==this.totalCount&&this.setupStatusExpiration()}},{key:"delete",value:function(){__LOG__(2)`Status v3 deleted with total count: ${this.totalCount}`,(0,s.default)((0,u.default)(a.prototype),"delete",this).call(this),this.expireTimer&&d.default.clearTimeout(this.expireTimer),null!=this.expireTs&&(this.expireTs=void 0),this.getCollection().remove(this.id)}},{key:"onEmptyMRM",value:function(){var e=this;__LOG__(2)`Status V3 onEmptyMRM with total count: ${this.totalCount}, noEarlierMsgs: ${this.msgs.msgLoadState.noEarlierMsgs?"true":"false"}`,this.msgs.msgLoadState.noEarlierMsgs&&0===this.totalCount?this.delete():this.totalCount>0&&this.loadMore().catch((function(){})).finally((function(){e.msgs.length||e.delete()}))}},{key:"loadMore",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.default.PAGE_SIZE;if(this.msgs.msgLoadState.noEarlierMsgs)return r.resolve();if(this.msgs.msgLoadState.isLoadingEarlierMsgs)return this.msgs.loadEarlierPromise;var n=0!==t?t:h.default.PAGE_SIZE,a=this.getCollection();return a.loadMore(this.id,n,this.msgs.last()).then((function(t){return Array.isArray(t)&&t.length<n&&(e.msgs.msgLoadState.noEarlierMsgs=!0),t})).catch((function(t){return 404===t&&e.delete(),r.reject(t)}))}},{key:"handleReadStatus",value:function(e){this.readKeys[e]||(this.readKeys[e]=!0,this.unreadCount>0&&this.unreadCount--)}},{key:"sendReadStatus",value:function(e,t){var n=this;return(0,v.sendReadStatus)(e,t).then((function(t){t&&n.handleReadStatus(e)}))}},{key:"getCollection",value:function(){return n(66005).default}}]),a}(m.default);y.Proxy="statusV3",y.idClass=g.default;var E=(0,f.defineModel)(y);t.default=E},66005:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StatusV3Collection=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(96486)),f=a(n(60619)),p=a(n(79140)),h=a(n(34263)),_=n(14650),v=n(71701),m=a(n(22021)),g=a(n(8643)),y=a(n(66312)),E=a(n(74984)),S=n(83591),b=a(n(78520)),T=n(75793),w=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"delete",value:function(){(0,s.default)((0,u.default)(n.prototype),"delete",this).call(this),delete this.checksum}},{key:"_find",value:function(e){return r.resolve({id:e})}},{key:"findQuery",value:function(e,t){var a=this;return(0,s.default)((0,u.default)(n.prototype),"findQuery",this).call(this,e,t).then((function(e){var t=e||[];return r.all(t.map((function(e){if(e){var t=0;return e.msgs.forEach((function(n){t<e._msgs.length&&e._msgs[t].id.toString()===n.id.toString()?++t:n.delete()})),e._msgs.length>0?a.addStatusMessages(e.id,e._msgs):r.resolve()}}))).then((function(){return t}))}))}},{key:"_findQuery",value:function(){var e=this;return(0,S.queryStatusAll)().then((function(t){return e.checksum=t.checksum,r.all(t.statuses.map((function(e){e.totalCount!==e._msgs.length&&e.totalCount<=20&&__LOG__(3)`Received ${e._msgs.length} status V3 messages when total count is ${e.totalCount} for ${e.id}`;var t=e.pic;return t?E.default.createFromData(t,"image/jpeg").then((function(t){return e.pic=t,e})):e})))}))}},{key:"loadMore",value:function(e,t,n){return(0,S.queryStatusUpdate)(e,t,n&&n.id).then((function(e){return e.status>=400?(__LOG__(3)`model:statusv3:findQuery error ${e.status}`,r.reject(e.status)):(e.forEach((function(e){e.invis=!0})),__LOG__(2)`model:statusv3:loadMore:${e.length}`,y.default.processMultipleMessages((0,T.createWid)(h.default.STATUS_WID),e,{add:"after",isHistory:!0}))}))}},{key:"sync",value:function(e){var t=this,n=window.performance.now();return!e||this.checksum&&this.checksum!==e?this.findQuery({},{set:this.hasSynced()}).catchType(_.WebdDrop,(function(){})).finally((function(){t.trigger("sync")})).tap((function(){var e=window.performance.now(),r=Math.round(e-n);t.logMetrics({type:"sync",syncTime:r}),t.forEach((function(e){e.msgs.length>e.totalCount&&__LOG__(2)`Total count: ${e.totalCount}, msgs length: ${e.msgs.length}`}))})):r.resolve(void 0)}},{key:"logMetrics",value:function(e){var t;t="sync"===e.type?new g.default.WebcStatusSync({webcStatusSyncT:e.syncTime}):new g.default.WebcStatusSession({webcStatusSessionId:e.sessionId});var n=this.filter((function(e){return!e.contact.isMe})),r=n.filter((function(e){return!e.contact.statusMute})),a=r.filter((function(e){return e.hasUnread})),i=r.filter((function(e){return!e.hasUnread})),o=n.filter((function(e){return e.contact.statusMute})),s=d.default.sum(r.map((function(e){return e.unreadCount}))),u=d.default.sum(r.map((function(e){return e.readCount}))),l=d.default.sum(o.map((function(e){return e.totalCount})));t.webcStatusRecentItemCount=s,t.webcStatusRecentRowCount=a.length,t.webcStatusViewedItemCount=u,t.webcStatusViewedRowCount=i.length,t.webcStatusMutedItemCount=l,t.webcStatusMutedRowCount=o.length,t.commit()}},{key:"hasSynced",value:function(){return!!m.default.supportsFeature(m.default.F.MD_BACKEND)||!!this.checksum}},{key:"handleUpdate",value:function(e,t,n){var r=e.id.fromMe?(0,v.getMaybeMeUser)():e.author;if(this.updateChecksum(t),this.hasSynced()){if(n)return!0;var a=this.get(r);if(a){var i=m.default.supportsFeature(m.default.F.MD_BACKEND)||a.totalCount===a.msgs.length;if("revoke"===e.subtype){var o=a.msgs.toArray().slice(0,a.totalCount-a.unreadCount),s=d.default.map(o,(function(e){return e.id.toString()})),u={totalCount:a.totalCount-1};s.find((function(t){return t===e.protocolMessageKey.toString()}))||a.readKeys[e.protocolMessageKey.toString()]||(u.unreadCount=a.unreadCount-1),a.set(u)}else{var l={totalCount:a.totalCount+1};e.invis||(l.unreadCount=a.unreadCount+1),l.t=e.t,a.set(l)}return!i&&e.body&&E.default.createFromBase64Jpeg(e.body).then((function(e){a.pic=e})),i}return this.add({id:r,t:e.t,unreadCount:e.invis?0:1,totalCount:1}),!0}return!1}},{key:"updateChecksum",value:function(e){e?this.hasSynced()&&(this.checksum=e):__LOG__(2)`models:statusV3:no_checksum`}},{key:"handle",value:function(e){var t=e.shift();if(Array.isArray(t))__LOG__(3)`models:statusV3:unexpected update`;else switch(t.type){case"read":this.updateChecksum(t.checksum);var n=this.get(t.chat);n?n.handleReadStatus(t.key):__LOG__(2)`models:statusV3:read:no_status:${[t.chat,t.key].join()}`;break;default:__LOG__(3)`models:statusV3:unknown:${t.type}`}}},{key:"addStatusMessages",value:function(e,t){return y.default.processMultipleMessages((0,T.createWid)(h.default.STATUS_WID),t,{add:"after",isHistory:!0})}},{key:"getUnexpired",value:function(e){var t=this.filter((function(e){return e.totalCount>0&&p.default.globalUnixTime()-e.t<=86400&&e.contact.isMyContact&&!e.contact.isMe&&!e.contact.isPSA}));return e?d.default.filter(t,(function(e){return e.unreadCount>0})):d.default.filter(t,(function(e){return 0===e.unreadCount}))}},{key:"getMyStatus",value:function(){var e=this.filter((function(e){return e.contact.isMe}));if(d.default.isEmpty(e));else if(!(p.default.globalUnixTime()-e[0].t>86400))return e[0]}}]),n}(f.default);t.StatusV3Collection=w,w.model=b.default,w.comparator=function(e,t){return t.t-e.t};var A=new w;t.default=A},83130:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.sticker=(0,u.prop)(),e.timestamp=(0,u.prop)(),e.msgId=(0,u.prop)(),e}return n}(u.default);l.Proxy="recentSticker";var c=(0,u.defineModel)(l);t.default=c},50785:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RecentStickerCollection=t.RECENT_STICKERS_LIMIT=void 0;var o=i(n(81109)),s=i(n(6479)),u=i(n(34575)),l=i(n(93913)),c=i(n(16525)),d=i(n(29754)),f=i(n(2205)),p=i(n(99842)),h=i(n(91080)),_=i(n(60619)),v=a(n(93743)),m=i(n(22021)),g=i(n(98958)),y=i(n(4362)),E=i(n(23306)),S=32;t.RECENT_STICKERS_LIMIT=S;var b=function(e){(0,f.default)(n,e);var t=(0,p.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._checksum="",e._syncStatus="NONE",e._weightMap=new Map,e._sortTrimScale=function(){var t=e.length;if(t){if(e.sort(),t>S){for(var n=S;n<t;n++)e._weightMap.delete((0,h.default)(e.at(n),"_this.at(i)").id);e.remove(e.models.slice(S))}var r=e.head(),a=e.last();r&&a&&e._getWeight(r)<10&&e._getWeight(a)>.01||e.forEach((function(n,r){e._weightMap.set(n.id,1+(t-r)/t*3)}))}},e}return(0,l.default)(n,[{key:"_comparator",value:function(e,t){return v.default.platform===v.PLATFORMS.ANDROID?this._getWeight(t)-this._getWeight(e):e.index>t.index?1:-1}},{key:"_getWeight",value:function(e){return(0,h.default)(this._weightMap.get(e.id),"this._weightMap.get(sticker.id)")}},{key:"_findQuery",value:function(){var e=this;return m.default.isRecentStickersEnabled()?E.default.queryRecentStickers().then((function(t){var n=t.checksum,r=t.stickers;return e.setChecksum(n),v.default.platform===v.PLATFORMS.ANDROID&&(e._weightMap.clear(),r.forEach((function(t){var n=t.id,r=t.weight;e._weightMap.set(n,r)}))),r.map((function(e,t){e.weight;var n=(0,s.default)(e,["weight"]);return(0,o.default)((0,o.default)({},n),{},{mediaKey:(0,g.default)(n.mediaKey),index:t})}))})):r.reject(new Error("gk recent sticker sync unsupported"))}},{key:"enqueue",value:function(e){m.default.isRecentStickersEnabled()&&0!==e.length&&(v.default.platform===v.PLATFORMS.ANDROID?this._enqueueAndroid(e):this._enqueueiOS(e))}},{key:"_enqueueAndroid",value:function(e){var t=this;e.forEach((function(e){t.get(e.id)||(t._weightMap.set(e.id,0),t.add(e)),t.forEach((function(n){var r=t._getWeight(n);n.id===e.id?r+=1:r*=.9,t._weightMap.set(n.id,Math.round(1e3*r)/1e3)}))})),this._sortTrimScale()}},{key:"_enqueueiOS",value:function(e){var t=this;this.forEach((function(e,t){e.index=S+t}));var n=new Set(e.map((function(e){return e.id})));e.reduce((function(e,t){return n.has(t.id)?(n.delete(t.id),[t].concat(e)):e}),[]).slice(0,S).forEach((function(e,n){var r=t.get(e.id);r?r.index=n:t.add({id:e.id,deprecatedMms3Url:e.deprecatedMms3Url,directPath:e.directPath,filehash:e.filehash,encFilehash:e.encFilehash,mediaKey:e.mediaKey,mediaKeyTimestamp:e.mediaKeyTimestamp,width:e.width,height:e.height,size:e.size,mimetype:e.mimetype,type:e.type,index:n})})),this.sort(),this.remove(this.slice(S))}},{key:"setChecksum",value:function(e){this._checksum=e}},{key:"sync",value:function(e){return m.default.isRecentStickersEnabled()&&(null==e||e!==this._checksum)?this._sync():r.resolve()}},{key:"_sync",value:function(){var e=this;return"INPROGRESS"===this._syncStatus?r.resolve():(this._syncStatus="INPROGRESS",this.findQuery({},{set:!0}).then((function(){e.sort(),e._syncStatus="SUCCESS"})).catch((function(){__LOG__(3)`collection:recent_sticker:_sync error `,e._syncStatus="FAILURE"})))}},{key:"isSynced",value:function(){return"SUCCESS"===this._syncStatus||"FAILURE"===this._syncStatus}},{key:"reset",value:function(){return this._syncStatus="NONE",this._weightMap.clear(),(0,c.default)((0,d.default)(n.prototype),"reset",this).call(this)}}]),n}(_.default);t.RecentStickerCollection=b,b.model=y.default;var T=new b;t.default=T},77943:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RecentStickerCollection=t.RECENT_STICKERS_LIMIT=void 0;var a=r(n(63038)),i=r(n(87757)),o=r(n(48926)),s=r(n(34575)),u=r(n(93913)),l=r(n(16525)),c=r(n(29754)),d=r(n(2205)),f=r(n(99842)),p=r(n(66312)),h=r(n(60619)),_=r(n(79140)),v=n(87261),m=r(n(83130)),g=r(n(4362)),y=n(9861),E=n(42594),S=n(43883);t.RECENT_STICKERS_LIMIT=32;var b=function(e){(0,d.default)(h,e);var t,n,r=(0,f.default)(h);function h(){return(0,s.default)(this,h),r.apply(this,arguments)}return(0,u.default)(h,[{key:"_comparator",value:function(e,t){return e.timestamp<t.timestamp?1:-1}},{key:"_modelToDbData",value:function(e){return{id:e.id||e.filehash,index:e.index||0,width:e.width,height:e.height,size:e.size,mimetype:e.mimetype,filehash:e.filehash,directPath:e.directPath,mediaKey:e.mediaKey,mediaKeyTimestamp:null!=e.mediaKeyTimestamp?e.mediaKeyTimestamp:_.default.globalUnixTime(),encFilehash:e.encFilehash,deprecatedMms3Url:e.deprecatedMms3Url,type:v.OUTWARD_TYPES.STICKER}}},{key:"_dbDataToModel",value:function(e){return new m.default({id:e.id,timestamp:e.timestamp,msgId:e.msgId,sticker:new g.default(e.sticker)})}},{key:"_addSaveTask",value:function(){var e=this;this._idleTaskId&&E.IdleCallbackTasks.isInQueue(this._idleTaskId)||(this._idleTaskId=E.IdleCallbackTasks.enqueue((function(){e._saveToDb()})))}},{key:"_saveToDb",value:(n=(0,o.default)(i.default.mark((function e(){var t,n,r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.toArray().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,sticker:r._modelToDbData(e.sticker),msgId:e.msgId};t.push(n)})),e.prev=2,n=(0,S.getRecentStickersTable)(),e.next=6,n.clear();case 6:return e.next=8,n.bulkCreateOrReplace(t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),__LOG__(4,void 0,new Error,!0)`RecentStickerCollection attempt to save to database failed`,SEND_LOGS(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return n.apply(this,arguments)})},{key:"addStickerWithMediaData",value:function(e,t){this.addNewSticker(new g.default(e),t)}},{key:"addNewSticker",value:function(e,t){e.id||(e.id=e.filehash),this.enqueue([[e,_.default.globalUnixTime(),t]])}},{key:"enqueue",value:function(e){var t=this;if(0!==e.length){var n=new Set(e.map((function(e){return e[0].id}))),r=e.reduce((function(e,t){var r=(0,a.default)(t,3),i=r[0],o=r[1],s=r[2];return n.has(i.id)?(n.delete(i.id),[[i,o,s]].concat(e)):e}),[]),i=[],o=!1;r.forEach((function(e){var n=(0,a.default)(e,3),r=n[0],s=n[1],u=n[2],l=t.get(r.id);if(l)l.timestamp<=s&&(l.timestamp=s,o=!0);else{var c=t._dbDataToModel({id:r.id,timestamp:s,sticker:r,msgId:u});o=!0,i.push(c)}})),o&&(this.addAndSort(i),this._addSaveTask())}}},{key:"updateDirectPath",value:function(e,t){var n=this.get(e);(null==n?void 0:n.sticker)?(n.sticker.directPath=t,this.set([n],{remove:!1,add:!1,silent:!0,sort:!1}),this._addSaveTask()):__LOG__(4,void 0,new Error)`updateDirectPaths called with a stickerId that doesn't match any in the collection`}},{key:"updateStickerMediaData",value:function(e,t){var n=this.get(e);null!=t&&null!=n&&(t.directPath&&(n.sticker.directPath=t.directPath),t.encFilehash&&(n.sticker.encFilehash=t.encFilehash),t.mediaKey&&(n.sticker.mediaKey=t.mediaKey),t.mediaKeyTimestamp&&(n.sticker.mediaKeyTimestamp=t.mediaKeyTimestamp),this.set([n],{remove:!1,add:!1,silent:!0,sort:!1}),this._addSaveTask())}},{key:"stickersMissingDirerctPath",value:function(e){return e.filter((function(e){return null==e.sticker.directPath}))}},{key:"associateStickerWithMsg",value:(t=(0,o.default)(i.default.mark((function e(t,n){var r,a,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getMessagesById([n]);case 2:a=e.sent,o=a.messages,s=(null===(r=t.mediaObject)||void 0===r?void 0:r.associatedMsgs())||[],!t.mediaObject||0!==s.length&&o.some((function(e){return s.includes(e)}))||(0,y.associateMediaWithMsg)(t.mediaObject,o[o.length-1]);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"initializeFromCache",value:function(e){var t=this,n=e.map((function(e){var n=t._dbDataToModel(e);return t.associateStickerWithMsg(n.sticker,n.msgId),n}));this.addAndSort(n)}},{key:"addAndSort",value:function(e){this.add(e),this.sort(),this.length>32&&this.set(this.toArray().slice(0,32))}},{key:"removeAndSave",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.remove(e,t);return n.length&&this._addSaveTask(),n}},{key:"delete",value:function(){(0,l.default)((0,c.default)(h.prototype),"delete",this).call(this)}}]),h}(h.default);t.RecentStickerCollection=b,b.model=m.default;var T=new b;t.default=T},68624:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StarredStickerCollection=t.STARRED_STICKERS_PAGE_SIZE=void 0;var i=a(n(81109)),o=a(n(34575)),s=a(n(93913)),u=a(n(16525)),l=a(n(29754)),c=a(n(2205)),d=a(n(99842)),f=a(n(60619)),p=a(n(22021)),h=a(n(98958)),_=a(n(4362)),v=a(n(23306));t.STARRED_STICKERS_PAGE_SIZE=24;var m=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._checksum="",e._syncStatus="NONE",e._currentPage=0,e._total=0,e}return(0,s.default)(n,[{key:"_findQuery",value:function(){var e=this;return p.default.isStarredStickersEnabled()?v.default.queryStarredStickers(this._currentPage+1,24).then((function(t){var n=t.checksum,r=t.total,a=t.stickers;return e._checksum=n,e._currentPage+=1,e._total=r,a.map((function(t,n){return(0,i.default)((0,i.default)({},t),{},{mediaKey:(0,h.default)(t.mediaKey),index:e.length+n})}))})):r.reject(new Error("gk starred sticker sync unsupported"))}},{key:"add",value:function(e,t,r){return r&&(this._total+=1),(0,u.default)((0,l.default)(n.prototype),"add",this).call(this,e,t)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._total-=1,(0,u.default)((0,l.default)(n.prototype),"remove",this).call(this,e,t)}},{key:"syncNextPage",value:function(){var e=this;return this.canLoadMore()?this._sync(!1).then((function(){e.trigger("next_page_sync")})):r.resolve()}},{key:"sync",value:function(e){var t=this;return p.default.isStarredStickersEnabled()&&(null==e||e!==this._checksum)?(this.reset(),this._sync(!0).then((function(){t.trigger("sync")}))):r.resolve()}},{key:"_sync",value:function(e){var t=this;return"INPROGRESS"===this._syncStatus?r.resolve():(this._syncStatus="INPROGRESS",this.findQuery({},{set:e}).then((function(){t._syncStatus="SUCCESS"})).catch((function(){__LOG__(3)`collection:starred_sticker:_sync error `,t._syncStatus="FAILURE"})))}},{key:"isSynced",value:function(){return"SUCCESS"===this._syncStatus||"FAILURE"===this._syncStatus}},{key:"canLoadMore",value:function(){return 0!==this._total&&this.length<this._total}},{key:"getRemaining",value:function(){return this._total-this.length}},{key:"reset",value:function(){return this._syncStatus="NONE",this._currentPage=0,this._checksum="",this._total=0,(0,u.default)((0,l.default)(n.prototype),"reset",this).call(this)}}]),n}(f.default);t.StarredStickerCollection=m,m.model=_.default,m.comparator=function(e,t){return e.index>=t.index?1:-1};var g=new m;t.default=g},4362:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Sticker=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(96486)),f=r(n(56727)),p=r(n(16952)),h=a(n(28719)),_=n(87261),v=a(n(8643)),m=n(89767),g=(n(67298),d.default.once((function(){return new E({id:"placeholder",isPlaceholder:!0})}))),y=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,f.prop)(),e.mediaData=(0,f.session)(),e.mediaObject=(0,f.prop)(),e.deprecatedMms3Url=(0,f.prop)(),e.directPath=(0,f.prop)(),e.filehash=(0,f.prop)(),e.height=(0,f.prop)(),e.index=(0,f.prop)(),e.mediaKey=(0,f.prop)(),e.mediaKeyTimestamp=(0,f.prop)(),e.mimetype=(0,f.prop)(),e.size=(0,f.prop)(),e.type=(0,f.prop)(_.OUTWARD_TYPES.STICKER),e.encFilehash=(0,f.prop)(),e.width=(0,f.prop)(),e.isPlaceholder=(0,f.prop)(),e}return(0,o.default)(r,[{key:"initialize",value:function(){(0,s.default)((0,u.default)(r.prototype),"initialize",this).call(this),this.addChild("mediaData",new h.default),this.isPlaceholder||p.registerSticker(this)}},{key:"downloadMedia",value:function(){var e=this;return p.downloadStickerOrStickerPackIcon(this,"STICKER").catch((function(t){__LOG__(4,void 0,new Error,!0)`id: ${e.id}, error: ${String(t.stack||t)}`,SEND_LOGS("sticker-panel:sticker download failed")}))}},{key:"sendToChat",value:function(e,t){var r=this;n(50785).default.enqueue([this]),this.mediaData&&this.mediaData.mediaBlob&&this.mediaData.mediaBlob.retain();var a=e.getComposeContents(),i=a.ctwaContextLinkData,o=a.ctwaContext,s={quotedMsg:e.composeQuotedMsg,ctwaContext:(0,m.prepareCtwaContextSend)(i,o)};return e.composeQuotedMsg=null,(0,p.prepSticker)(this).sendToChat(e,s).then((function(e){var n=new v.default.StickerSend({stickerSendOrigin:t.stickerSendOrigin,stickerIsAnimated:Boolean(r.mediaData.isAnimated)});return null!=t.stickerIsFirstParty&&(n.stickerIsFirstParty=t.stickerIsFirstParty),n.commit(),e}))}},{key:"delete",value:function(){(0,s.default)((0,u.default)(r.prototype),"delete",this).call(this),p.deregisterSticker(this)}}]),r}(f.default);t.Sticker=y,y.Proxy="sticker",y.getPlaceholder=g;var E=(0,f.defineModel)(y);E.getPlaceholder=g;var S=E;t.default=S},94353:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerCollection=t.FETCH_STATE=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(60619)),l=r(n(4362));t.FETCH_STATE={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};var c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"fetch",value:function(){throw new Error(`${this.constructor.name}.fetch is not implemented`)}}]),n}(u.default);t.StickerCollection=c,c.model=l.default;var d=new c;t.default=d},23913:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerPack=t.PRE_PLACEHOLDER_ID=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(16525)),l=i(n(29754)),c=i(n(2205)),d=i(n(99842)),f=a(n(56727)),p=i(n(28719)),h=n(87261),_=i(n(11208)),v="placeholder:";t.PRE_PLACEHOLDER_ID=v;var m="image/png",g=function(e){var t=e.index,n=e.page;return new E({id:`placeholder:${t}`,index:t,page:n})},y=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).id=(0,f.prop)(),e.index=(0,f.prop)(),e.name=(0,f.prop)(),e.page=(0,f.prop)(),e.url=(0,f.prop)(),e.mimetype=(0,f.prop)(m),e.mediaData=(0,f.session)(),e.mediaObject=(0,f.prop)(),e.directPath=(0,f.prop)(),e.filehash=(0,f.prop)(),e.mediaKey=(0,f.prop)(),e.mediaKeyTimestamp=(0,f.prop)(),e.size=(0,f.prop)(),e.type=(0,f.prop)(h.OUTWARD_TYPES.IMAGE),e.encFilehash=(0,f.prop)(),e.deprecatedMms3Url=(0,f.derived)(e._deprecatedMms3Url,["url","isFirstParty"]),e.stickers=(0,f.derived)(e._getStickersCollection,["id"]),e.isPlaceholder=(0,f.derived)(e._isPlaceholder,["id"]),e.isFirstParty=(0,f.derived)(e._isFirstParty,["url","mediaKey"]),e}return(0,s.default)(a,[{key:"_deprecatedMms3Url",value:function(){return this.isFirstParty?"":this.url}},{key:"_isPlaceholder",value:function(){return a.isPlaceholderId(this.id)}},{key:"_isFirstParty",value:function(){return Boolean(this.url)&&!this.mediaKey}},{key:"_getStickersCollection",value:function(){return this._stickers=this._stickers||new _.default(this.id.split("#")[0],this.isFirstParty),this._stickers}},{key:"initialize",value:function(){(0,u.default)((0,l.default)(a.prototype),"initialize",this).call(this),this.isPlaceholder||this.isFirstParty||(this.addChild("mediaData",new p.default({renderableUrl:""})),n(16952).registerStickerPackIcon(this))}},{key:"downloadMedia",value:function(){var e=this;return this.isPlaceholder||this.isFirstParty?r.resolve():n(16952).downloadStickerOrStickerPackIcon(this,"STICKER_PACK").catch((function(t){__LOG__(4,void 0,new Error,!0)`id: ${e.id}, error: ${String(t.stack||t)}`,SEND_LOGS("sticker-panel:sticker-pack download failed")}))}},{key:"delete",value:function(){(0,u.default)((0,l.default)(a.prototype),"delete",this).call(this),n(16952).deregisterStickerPackIcon(this)}}]),a}(f.default);t.StickerPack=y,y.Proxy="stickerPack",y.createPlaceholder=g,y.isPlaceholderId=function(e){return new RegExp("^placeholder:").test(e)};var E=(0,f.defineModel)(y),S=E;t.default=S,E.createPlaceholder=g,E.isPlaceholderId=y.isPlaceholderId},96297:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerPackCollection=t.PAGE_FETCH_STATE=t.PAGE_SIZE_POPUP=t.PAGE_SIZE_COMPOSE_BOX=void 0;var i=a(n(81109)),o=a(n(87757)),s=a(n(48926)),u=a(n(34575)),l=a(n(93913)),c=a(n(81506)),d=a(n(16525)),f=a(n(29754)),p=a(n(2205)),h=a(n(99842)),_=a(n(96486)),v=a(n(60619)),m=a(n(23913)),g=a(n(23306));t.PAGE_SIZE_COMPOSE_BOX=9;t.PAGE_SIZE_POPUP=6;var y={PENDING:"PENDING",SUCCESS:"SUCCESS",ERROR:"ERROR"};t.PAGE_FETCH_STATE=y;var E=function(e){(0,p.default)(a,e);var t,n=(0,h.default)(a);function a(){var e;return(0,u.default)(this,a),(e=n.call(this)).checksum=null,e._pageFetchPromises={},e.pageFetchStates={},e._handleChecksumChange=function(){Object.keys(e.pageFetchStates).forEach((function(t){return e._resetFetchPageStateAndPromise(parseInt(t,10))})),e._resetRangeWithPlaceholders(0,e.length),e.fetchAt(0,!1,!0)},e.listenTo((0,c.default)(e),"change:checksum",e._handleChecksumChange),e}return(0,l.default)(a,[{key:"createPlaceholder",value:function(e){return a.createPlaceholder(e)}},{key:"preFetch",value:(t=(0,s.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAt(0).then((function(){return r.all(t.filter((function(e){return e.isFirstParty})).map((function(e){return e.stickers.fetch()})))}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"fetchAt",value:function(e,t,n){return this._fetchPageWithIndex(e,Boolean(t),Boolean(n))}},{key:"hasFetchedData",value:function(){var e=this;return Object.keys(this.pageFetchStates).some((function(t){return e.pageFetchStates[parseInt(t,10)]===y.SUCCESS}))}},{key:"isFetchingData",value:function(){var e=this;return Object.keys(this.pageFetchStates).some((function(t){return e.pageFetchStates[parseInt(t,10)]===y.PENDING}))}},{key:"pageWithIndex",value:function(e){return a.pageWithIndex(e)}},{key:"reset",value:function(){var e=this;return this.setChecksum(null,{silent:!0}),Object.keys(this.pageFetchStates).forEach((function(t){return e._resetFetchPageStateAndPromise(parseInt(t,10))})),(0,d.default)((0,f.default)(a.prototype),"reset",this).call(this)}},{key:"sync",value:function(e){this.setChecksum(e)}},{key:"setChecksum",value:function(e,t){return this.checksum!==e&&(this.checksum=e,t&&t.silent||this.trigger("change:checksum",e),!0)}},{key:"_fetchPageWithIndex",value:function(e,t,n){var r=this.pageWithIndex(e);return this._fetchPage(r,t,n)}},{key:"_fetchPage",value:function(e,t,n){var a,i=this,o=this.pageFetchStates[e];if(t&&o!==y.PENDING&&(a=this._pageFetchPromises[e])&&(a.cancel(),delete this._pageFetchPromises[e]),a=this._pageFetchPromises[e])return a;var s=this.length;return this._insertPagePlaceholders(e),this._setFetchPageState(e,y.PENDING),this._pageFetchPromises[e]=g.default.queryStickerPacks(e,9).cancellable().then((function(t){var r=i._parseStickerPacksRes(e,t),a=n||i.setChecksum(t.checksum,{silent:!0}),o=9*(e-1),u=9*(e+0);i._resetRange(o,u,r),a&&(i._resetRangeWithPlaceholders(0,o),i._resetRangeWithPlaceholders(Math.min(o+r.length,u),t.count));var l=i.length;s!==l&&i.trigger("change:length",l),i._setFetchPageState(e,y.SUCCESS)})).catch((function(t){if(t instanceof r.CancellationError)return __LOG__(2)`StickerPack page fetch promise cancelled: ${e}`,void i._unsetFetchPageStateAndPromise(e);i._setFetchPageState(e,y.ERROR)})),this._pageFetchPromises[e]}},{key:"_insertPagePlaceholders",value:function(e){var t=e-1;this._resetRangeWithPlaceholders(9*t,9*(t+1))}},{key:"_parseStickerPacksRes",value:function(e,t){if(200!==t.status||!t.data)throw new Error("sticker packs query error");return t.data.map((function(t,n){return(0,i.default)((0,i.default)({},_.default.pick(t,["id","mimetype","name","url","mediaKey","filehash","directPath"])),{},{encFilehash:t.encFilehash,page:e,index:9*(e-1)+n})}))}},{key:"_resetRangeWithPlaceholders",value:function(e,t){this._resetRange(e,t,_.default.times(t-e,(function(t){return a.createPlaceholder(e+t)})))}},{key:"_resetRange",value:function(e,t,n){var r=this;this._forEachInRange(e,t,(function(t,a){var i=n[a-e];if(t)if(i)t.id===i.id?(r.remove(t,{silent:!0}),r.add(i)):(r.remove(t),r.add(i));else for(var o=t;o;)r.remove(o),o=r.at(a);else i&&r.add(i)}))}},{key:"_forEachInRange",value:function(e,t,n){for(var r=e;r<t;r++){n(this.at(r),r)}}},{key:"_resetFetchPageStateAndPromise",value:function(e){e in this.pageFetchStates&&(this.pageFetchStates[e]===y.PENDING?this._pageFetchPromises[e].cancel():this._unsetFetchPageStateAndPromise(e))}},{key:"_setFetchPageState",value:function(e,t){this.pageFetchStates[e]!==t&&(this.pageFetchStates[e]=t,this.trigger("change:pageFetchStates",e,t))}},{key:"_unsetFetchPageState",value:function(e){e in this.pageFetchStates&&(delete this.pageFetchStates[e],this.trigger("change:pageFetchStates",e))}},{key:"_unsetFetchPageStateAndPromise",value:function(e){delete this._pageFetchPromises[e],this._unsetFetchPageState(e)}}]),a}(v.default);t.StickerPackCollection=E,E.model=m.default,E.comparator=function(e,t){return e.index<t.index?-1:e.index>t.index?1:0},E.createPlaceholder=function(e){return m.default.createPlaceholder({index:e,page:this.pageWithIndex(e)})},E.pageWithIndex=function(e){return Math.floor(e/9)+1};var S=new E;t.default=S},11208:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FETCH_STATE",{enumerable:!0,get:function(){return v.FETCH_STATE}}),t.default=void 0;var i=a(n(81109)),o=a(n(34575)),s=a(n(93913)),u=a(n(78585)),l=a(n(81506)),c=a(n(2205)),d=a(n(99842)),f=a(n(96486)),p=n(10504),h=n(94353),_=a(n(23306)),v=n(94353),m=function(e){(0,c.default)(a,e);var t=(0,d.default)(a);function a(e,n){var r;(0,o.default)(this,a),(r=t.call(this))._parseStickersRes=function(e){if(200!==e.status||!e.data)throw new Error("sticker pack stickers query error");return e.data.map((function(e,t){return(0,i.default)((0,i.default)({},f.default.pick(e,["directPath","mimetype","mediaKey","filehash","width","height"])),{},{index:t,id:e.filehash,deprecatedMms3Url:e.url,encFilehash:e.encFilehash,mediaKeyTimestamp:0})}))},r.stickerPackId=e,r.isFirstParty=n;var s,c=a._cache[r.stickerPackId];if(c)return(0,u.default)(r,c);var d=(0,l.default)(r);return Object.defineProperty((0,l.default)(r),"fetchState",{get:function(){return s},set:function(e){s!==e&&(s=e,d.trigger("change:fetchState",e))}}),r}return(0,s.default)(a,[{key:"fetch",value:function(e){var t,a=this;return e&&this.fetchState!==h.FETCH_STATE.PENDING&&delete this._fetchPromise,this._fetchPromise?this._fetchPromise:(this.fetchState=h.FETCH_STATE.PENDING,n(23913).default.isPlaceholderId(this.stickerPackId)?(this._fetchPromise=new r((function(){})),this._fetchPromise):(t=this.isFirstParty?(0,p.fetchFirstPartyStickers)(this.stickerPackId):_.default.queryStickersInStickerPack(this.stickerPackId).then(this._parseStickersRes),this._fetchPromise=t.then((function(e){var t=Math.max(a.length||e.length);a._resetRange(0,t,e),a.fetchState=h.FETCH_STATE.SUCCESS})).catch((function(){a.fetchState=h.FETCH_STATE.ERROR})),this._fetchPromise))}},{key:"_resetRange",value:function(e,t,n){var r=this;this._forEachInRange(e,t,(function(t,a){var i=n[a-e];t?i?t.id===i.id?t.set(i):(r.remove(t),r.add(i)):r.remove(t):i&&r.add(i)}))}},{key:"_forEachInRange",value:function(e,t,n){for(var r=e;r<t;r++){n(this.at(r),r)}}}]),a}(h.StickerCollection);t.default=m,m._cache={},m.comparator=function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}},22767:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StickerSearchCollection=void 0;var a=r(n(87757)),i=r(n(319)),o=r(n(48926)),s=r(n(34575)),u=r(n(93913)),l=r(n(16525)),c=r(n(29754)),d=r(n(2205)),f=r(n(99842)),p=r(n(60619)),h=(n(89642),r(n(8513))),_=r(n(14160)),v=n(53470),m=r(n(4362)),g={HAPPY:["😂","🤣","😀","😁","😆","🙂","😇","☺️","😄","😃"],LOVE:["😍","😘","❤️","💕","🥰","😗","😙","😻","👩‍❤️‍👩","💐","💌","💛","💚","💙","💜","💓","💘","💏","💑","🌹","🤟","🏩"],GREETINGS:["👋","😂","🤣","🙏","✋","🧕","🚶‍♀️","🚶","👠","🥾","🙈","🦛","🌺","⚡","🎯","🚄","🚅","💒","🛕","🛣️","🕉️","🔊"],SAD:["😭","😔","😢","😞","😟","😕","🙁","☹️","😖","😫","😩","🥺","😥","😓","😪","😿","💧","💔"],ANGRY:["😠","😡","😤","👺","💢","🗯️","👿"],CELEBRATE:["🥳","🥂","🎈","🎊","🎉"]},y=function(e){(0,d.default)(r,e);var t,n=(0,f.default)(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a)))._cache=new Map,e._hasFetched=!1,e._isFetching=!0,e}return(0,u.default)(r,[{key:"isFetchingData",value:function(){return this._isFetching}},{key:"hasFetchedData",value:function(){return this._hasFetched}},{key:"setStartFetching",value:function(){this._isFetching=!0,this.trigger("start_fetching")}},{key:"setStopFetching",value:function(){this._isFetching=!1,this.trigger("stop_fetching")}},{key:"search",value:(t=(0,o.default)(a.default.mark((function e(t){var n,o,s,u,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._lastQuery!==t&&this._hasFetched&&(0,l.default)((0,c.default)(r.prototype),"delete",this).call(this),n=t.trim().toUpperCase(),!this._cache.has(t)){e.next=9;break}if(null==(o=this._cache.get(t))){e.next=8;break}return this.add(o),this._lastQuery=t,e.abrupt("return");case 8:__LOG__(2)`StickerMoodCollection cache was invalid, re-searching.`;case 9:if(s=[],!g.hasOwnProperty(n)){e.next=14;break}s.push.apply(s,(0,i.default)(g[n])),e.next=21;break;case 14:if(null!=(u=h.default.containsOnlyEmoji(n)?h.default.splitEmojis(n):(0,_.default)(n))&&0!==u.length){e.next=20;break}return this._lastQuery=t,this.setStopFetching(),(0,l.default)((0,c.default)(r.prototype),"delete",this).call(this),e.abrupt("return");case 20:s.push.apply(s,(0,i.default)(u));case 21:return this.setStartFetching(),d=[],e.prev=23,e.next=26,(0,v.searchFirstPartyStickers)(s);case 26:d=e.sent,e.next=34;break;case 29:return e.prev=29,e.t0=e.catch(23),__LOG__(3,void 0,void 0,!0)`Sticker search request failed: error: ${e.t0}`,SEND_LOGS("sticker-search-request-failed"),this.setStopFetching(),e.abrupt("return");case 34:this._cache.set(t,d),this.setStopFetching(),this._hasFetched=!0,this._lastQuery=t,this.add(d);case 39:case"end":return e.stop()}}),e,this,[[23,29]])}))),function(){return t.apply(this,arguments)})},{key:"searchMood",value:function(e){return this.search(e)}},{key:"delete",value:function(){(0,l.default)((0,c.default)(r.prototype),"delete",this).call(this),this._cache=new Map,this._hasFetched=!1,this._isFetching=!1}}]),r}(p.default);t.StickerSearchCollection=y,y.model=m.default;var E=new y;t.default=E},14094:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Obscurity=t.StreamMode=t.StreamInfo=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=n(12035),f=a(n(96486)),p=r(n(56727)),h=a(n(34541)),_=a(n(34263)),v=n(71701),m=a(n(22021)),g=a(n(8643)),y=a(n(67890)),E=n(58966),S=r(n(95200)),b=n(29843),T=a(n(6497)),w=n(93571),A=a(n(54844)),C=r(n(7860)),O=n(79583),M=n(54302).Mirrored(["OFFLINE","OPENING","PAIRING","SYNCING","RESUMING","CONNECTING","NORMAL","TIMEOUT"]);t.StreamInfo=M;var I=n(54302).Mirrored(["QR","MAIN","SYNCING","OFFLINE","CONFLICT","PROXYBLOCK","TOS_BLOCK","SMB_TOS_BLOCK","DEPRECATED_VERSION"]);t.StreamMode=I;var k=n(54302).Mirrored(["SHOW","OBSCURE","HIDE"]);t.Obscurity=k;var P=function(e){(0,l.default)(r,e);var t=(0,c.default)(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).info=(0,p.session)(M.NORMAL),e.mode=(0,p.session)(I.SYNCING),e.obscurity=(0,p.session)(k.HIDE),e.needsUpdate=(0,p.session)(),e.clientExpired=(0,p.session)(!1),e.hardExpired=(0,p.session)(!1),e.lastSyncStart=(0,p.session)(N()),e.needsManualDownload=(0,p.session)(),e.couldForce=(0,p.session)(),e.uiActive=(0,p.session)(),e.available=(0,p.session)(!0),e.unavailableShiftTimer=(0,p.session)(),e.unavailableLogoutTimer=(0,p.session)(),e.unobscureShiftTimer=(0,p.session)(),e.timeoutEvent=(0,p.session)(),e.resumeCount=(0,p.session)(0),e.phoneAuthed=(0,p.session)(!1),e._activeModeMeasure=(0,p.session)(),e.displayInfo=(0,p.derived)(e._displayInfo,["info","obscurity"]),e}return(0,o.default)(r,[{key:"_displayInfo",value:function(){return function(e,t){switch(t){case k.SHOW:return e;case k.HIDE:return C.default.hasSynced?M.NORMAL:M.CONNECTING;case k.OBSCURE:switch(e){case M.OPENING:case M.PAIRING:case M.SYNCING:case M.RESUMING:return M.CONNECTING;default:return e}}return __LOG__(3)`Stream:unknown obscure level:`,e}(this.info,this.obscurity)}},{key:"initialize",value:function(){var e=this;(0,s.default)((0,u.default)(r.prototype),"initialize",this).call(this),m.default.supportsFeature(m.default.F.MD_BACKEND)&&!(0,O.isRegistered)()&&(this.mode=I.QR),this._activeModeMeasure=S.startMeasure(`Stream.mode: ${this.mode}`),__LOG__(2)`Stream:rememberMe: ${String((0,v.getRememberMe)())}`,this.unavailableShiftTimer=new d.ShiftTimer((function(){return e.markUnavailable()})),this.unobscureShiftTimer=new d.ShiftTimer((function(){return e.unobscure()})),this.unavailableLogoutTimer=new d.ShiftTimer((function(){(0,v.getRememberMe)()||(__LOG__(2)`Stream:unavailableLogoutTimer logout due to inactivity`,C.default.logout())})),this.listenTo(C.default,"change:state change:stream change:hasSynced",this.onSocketUpdate),this.listenTo(y.default,"change:online",this.onSocketUpdate),this.listenTo(this,"change:available",this.onAvailableUpdate),this.listenTo(this,"change:phoneAuthed",this.onPhoneAuthedUpdate),this.listenTo(this,"change:info change:displayInfo change:mode",f.default.debounce(this.onSelfUpdate)),this.listenTo(this,"change:info",this.logPageResume),this.listenTo(this,"change:info",this.updateWamLog),this.listenTo(this,"change:mode",this.logModeChange),this.listenTo(this,"change:available change:uiActive",this.updateCouldForce),this.listenTo(h.default,"midnight",this.updateHardExpire.bind(this)),m.default.supportsFeature(m.default.F.MD_BACKEND)&&this.listenTo(h.default,"socket_stream_disconnected",(function(){n(34254).default.clearAllPresence()})),window.document&&document.addEventListener("visibilitychange",this.updateCouldForce),this.updateCouldForce(),this.updateHardExpire()}},{key:"delete",value:function(){}},{key:"markAvailable",value:function(){this.unavailableShiftTimer.cancel(),this.available=!0,(0,w.monitor)(!0,this.displayInfo===M.TIMEOUT)}},{key:"markUnavailable",value:function(e){null!=e&&0!==e?this.unavailableShiftTimer.onOrBefore(e):(this.unavailableShiftTimer.cancel(),this.available=!1,(0,w.monitor)(!1,this.displayInfo===M.TIMEOUT))}},{key:"onSelfUpdate",value:function(){__LOG__(2)`Stream:onSelfUpdate mode:${this.mode} info:${this.info} view:${this.displayInfo}`;var e=this.timeoutEvent;if(this.info===M.TIMEOUT)e||(this.timeoutEvent=e=new g.default.WebcPhoneDisconnected),this.displayInfo===M.TIMEOUT&&null==this._bbarTime&&(this._bbarTime=Date.now());else if(e){e.markWebcPhoneDisconnectedT();var t=this._bbarTime;null!=t&&(e.webcPhoneBbarShownT=Date.now()-t),e.commit(),this.timeoutEvent=null,this._bbarTime=null}}},{key:"onSocketUpdate",value:function(){var e={},t=function(){switch(C.default.state){case C.STATE.TIMEOUT:return M.TIMEOUT;case C.STATE.OPENING:return y.default.online?M.OPENING:M.OFFLINE;case C.STATE.PAIRING:return C.default.hasSynced?M.RESUMING:M.PAIRING;case C.STATE.CONNECTED:return C.default.stream!==C.STREAM.CONNECTED?C.default.hasSynced?M.NORMAL:M.SYNCING:M.NORMAL;case C.STATE.UNLAUNCHED:case C.STATE.PROXYBLOCK:default:return M.NORMAL}}();if(e.info=t,e.mode=function(){var e=!1;e=m.default.supportsFeature(m.default.F.MD_BACKEND)?(0,O.isRegistered)():(0,v.knowsPhone)();if(!e&&C.default.state!==C.STATE.PROXYBLOCK)return I.QR;var t=C.default.hasSynced;switch(C.default.state){case C.STATE.PROXYBLOCK:return I.PROXYBLOCK;case C.STATE.CONFLICT:return I.CONFLICT;case C.STATE.TOS_BLOCK:return I.TOS_BLOCK;case C.STATE.SMB_TOS_BLOCK:return I.SMB_TOS_BLOCK;case C.STATE.DEPRECATED_VERSION:return I.DEPRECATED_VERSION;case C.STATE.UNLAUNCHED:return I.SYNCING;case C.STATE.UNPAIRED_IDLE:case C.STATE.UNPAIRED:return I.QR;case C.STATE.OPENING:if(!y.default.online&&!C.default.hasSynced)return I.OFFLINE;default:return t||C.default.stream===C.STREAM.CONNECTED?I.MAIN:I.SYNCING}}(),e.phoneAuthed=C.default.stream!==C.STREAM.DISCONNECTED,t===M.NORMAL)this.unobscureShiftTimer.cancel(),e.obscurity=k.HIDE;else if(t===M.OFFLINE)this.unobscureShiftTimer.cancel(),e.obscurity=k.OBSCURE;else switch(this.obscurity){case k.HIDE:this.unobscureShiftTimer.onOrBefore(_.default.DIAGNOSTIC_DELAY);break;case k.OBSCURE:this.unobscureShiftTimer.onOrBefore(3e3);break;case k.SHOW:}this.set(e)}},{key:"unobscure",value:function(){this.obscurity=k.SHOW}},{key:"onPhoneAuthedUpdate",value:function(){this.phoneAuthed&&(this.sendAvailability(!0),n(25506).default.sync())}},{key:"onAvailableUpdate",value:function(){var e=this.available;(__LOG__(2)`Stream:onAvailableUpdate user ${e?"available":"unavailable"}`,e||(0,v.getRememberMe)()?this.unavailableLogoutTimer.cancel():this.unavailableLogoutTimer.onOrBefore(_.default.IDLE_TIMEOUT_WAIT),this.sendAvailability(!1),m.default.supportsFeature(m.default.F.MD_BACKEND))&&(e?(0,n(10813).sendDeliveryReceiptsAfterPresence)():n(34254).default.clearAllPresence())}},{key:"sendAvailability",value:function(e){(e||this.uiActive)&&(this.available?(0,b.sendPresenceAvailable)():(0,b.sendPresenceUnavailable)())}},{key:"updateCouldForce",value:function(){this.couldForce=!this.uiActive||!this.available}},{key:"updateHardExpire",value:function(){T.default.isExpired()&&(this.hardExpired=!0,T.default.restart(!0))}},{key:"logPageResume",value:function(){this.info===M.RESUMING&&(this.resumeCount++,new g.default.WebcPageResume({webcResumeCount:this.resumeCount}).commit())}},{key:"updateWamLog",value:function(){var e=this.info===M.NORMAL;(0,E.streamInfoChange)(this.info,A.default.numSocketsAttempted,e),e&&this.stopListening(this,"change:info",this.updateWamLog)}},{key:"logModeChange",value:function(){this._activeModeMeasure&&this._activeModeMeasure.end(),this.mode===I.SYNCING&&(this.lastSyncStart=N()),this._activeModeMeasure=S.startMeasure(`Stream.mode: ${this.mode}`),new g.default.WebcStreamModeChange({webcStreamMode:R(this.mode)}).commit()}}]),r}(p.default);function R(e){switch(e){case I.QR:return g.default.WEBC_STREAM_MODE_CODE.QR;case I.MAIN:return g.default.WEBC_STREAM_MODE_CODE.MAIN;case I.SYNCING:return g.default.WEBC_STREAM_MODE_CODE.SYNCING;case I.OFFLINE:return g.default.WEBC_STREAM_MODE_CODE.OFFLINE;case I.CONFLICT:return g.default.WEBC_STREAM_MODE_CODE.CONFLICT;case I.PROXYBLOCK:return g.default.WEBC_STREAM_MODE_CODE.PROXYBLOCK;case I.DEPRECATED_VERSION:return g.default.WEBC_STREAM_MODE_CODE.DEPRECATED_VERSION;case I.TOS_BLOCK:case I.SMB_TOS_BLOCK:return g.default.WEBC_STREAM_MODE_CODE.TOS_BLOCK}}P.Proxy="stream";var D=new((0,p.defineModel)(P));function N(){return Math.floor(window.performance.now())}t.default=D},91322:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(16525)),u=a(n(29754)),l=a(n(2205)),c=a(n(99842)),d=a(n(96486)),f=r(n(56727)),p=a(n(23169)),h=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,f.prop)(),e.pendingMsgs=(0,f.prop)(),e.labels=(0,f.prop)(),e.msgChunks=(0,f.session)((function(){return[]})),e.lastReceivedKey=(0,f.session)(),e.unreadMsgAnchor=(0,f.session)(),e.disableUnreadAnchor=(0,f.session)(),e.msgsLength=(0,f.session)(),e.msgsChanged=(0,f.session)(0),e.msgs=(0,f.collection)(p.default),e}return(0,o.default)(n,[{key:"initialize",value:function(){var e=this;(0,s.default)((0,u.default)(n.prototype),"initialize",this).call(this),this.listenTo(this.msgs,"change:last",(function(){e.msgsChanged++})),this.listenTo(this.msgs,"add remove bulk_add",(function(){e.msgsChanged++,e.msgsLength=e.msgs.length}))}},{key:"onEmptyMRM",value:function(){throw new Error("onEmptyMRM not implemented")}},{key:"delete",value:function(){(0,s.default)((0,u.default)(n.prototype),"delete",this).call(this),this.getAllCMCs().forEach((function(e){e.forEach((function(e){e.delete()})),e.delete()}))}},{key:"removeMsg",value:function(e){var t=e.msgChunk;t&&(t.indexOf(e)<0||(__LOG__(2)`models:Chat:removeMsg ${e.get("id")}`,t.remove(e),0===t.length&&(t===this.msgs?this.onEmptyMRM():this.removeMsgsCollection(t))))}},{key:"getAllCMCs",value:function(){return this.msgChunks.concat([this.msgs])}},{key:"getAllMsgs",value:function(){return d.default.flatten(this.getAllCMCs().map((function(e){return e.getModelsArray()})))}},{key:"replaceMsgsCollection",value:function(e){__LOG__(2)`model:Chat:replaceMsgsCollection:${this.id.toString()}`;var t={msg:e.last()};this.msgs.replace(e),this.notifyMsgCollectionMerge(e,this.msgs,this.msgs,t),this.msgChunks=d.default.without(this.msgChunks,e),e.delete()}},{key:"removeMsgsCollection",value:function(e){this.msgChunks=d.default.without(this.msgChunks,e),e.delete()}},{key:"notifyMsgCollectionMerge",value:function(e,t,n,r){this.trigger("change:cmc:merge",e,t,n,r)}}]),n}(f.default);t.default=h},47633:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.displayText=(0,u.prop)(),e.subtype=(0,u.prop)(),e.url=(0,u.prop)(),e.phoneNumber=(0,u.prop)(),e.selectionId=(0,u.prop)(),e.selected=(0,u.session)(!1),e}return n}(u.default);l.Proxy="templateButton";var c=(0,u.defineModel)(l);t.default=c},70391:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TemplateButtonCollection=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(60619)),u=r(n(47633)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(s.default);t.TemplateButtonCollection=l,l.model=u.default,l.comparator=function(e,t){return e.id<t.id?-1:e.id>t.id?1:0};var c=l;t.default=c},65150:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(60619)),u=r(n(16551)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(s.default);t.default=l,l.model=u.default,l.comparator=function(e,t){return t.t-e.t}},76319:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(2205)),s=a(n(99842)),u=r(n(56727)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).id=(0,u.prop)(),e.timestamp=(0,u.prop)(),e}return n}(u.default);l.Proxy="unreadMention";var c=(0,u.defineModel)(l);t.default=c},95461:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={cache:{},delete:function(){this.cache={}}}},7860:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STREAM=t.STATE=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(93913)),l=i(n(34575)),c=i(n(2205)),d=i(n(99842)),f=n(53615),p=n(80835),h=n(65279),_=n(17643),v=n(1838),m=n(92827),g=i(n(38469)),y=i(n(96486)),E=i(n(30381)),S=n(4976),b=a(n(56727)),T=i(n(21144)),w=a(n(70371)),A=i(n(44923)),C=i(n(45684)),O=i(n(79140)),M=i(n(34541)),I=i(n(93743)),k=i(n(30892)),P=i(n(34263)),R=n(14650),D=a(n(98569)),N=n(22348),L=n(71701),x=i(n(22021)),U=n(31230),F=n(31785),G=n(15995),B=n(3646),j=i(n(2977)),Y=n(43883),K=i(n(37498)),W=n(69016),V=a(n(96801)),H=i(n(66761)),$=a(n(80130)),z=i(n(58695)),q=i(n(85169)),J=i(n(38021)),Q=n(94194),X=i(n(83376)),Z=a(n(59502)),ee=i(n(6497)),te=i(n(51173)),ne=a(n(51818)),re=n(54844),ae=i(n(39638)),ie=n(79583),oe=n(17533),se=i(n(54841)),ue=n(4746),le=n(40173),ce=n(10844),de=i(n(63056)),fe=P.default.FLAVOR_TAGS,pe=P.default.VERSION,he=P.default.LOGOUT_URL,_e=P.default.SOCKET_STATE,ve=P.default.SOCKET_STREAM,me=P.default.SPEEDY_RESUME_MAX_CHATS;t.STREAM=ve,t.STATE=_e;var ge=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("ExternalPoke")),ye=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("MustExitLoop")),Ee=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("Denied401Failed")),Se=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("Denied409Conflict")),be=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("DeniedTOS")),Te=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("DeniedTOSGDPR",!0,be)),we=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("DeniedTOSSMB",!0,be)),Ae=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("DeniedUnknown")),Ce=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("ForcedRefresh")),Oe=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("TooManyRefRequest")),Me=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("UILogout")),Ie=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("WindowOffline")),ke=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("PhoneFailedPing")),Pe=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("AssertionFailed")),Re=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("TakeoverRequested")),De=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("PhoneReplacedClient")),Ne=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("NoSecretBundle")),Le=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("PhoneKickedClient")),xe=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return n}((0,v.customError)("TempServerError")),Ue={SYNC_INFO:["Conn",q.default.OBJECT],CHALLENGE:["Cmd",{type:"challenge",challenge:q.default.STRING}],DISCONNECT:["Cmd",{type:"disconnect",kind:y.default}],HARD_REFRESH:["Cmd",{type:"update"}],UPGRADE_MD_FOR_INTERNAL_USER:["Cmd",{type:"upgrade_md"}],UPGRADE_MD_FOR_PROD:["Cmd",{type:"upgrade_md_prod",version:y.default}],PONG:["Pong",q.default.BOOLEAN]},Fe={TAG:function(e){return new q.default({tag:e,data:q.default.ANY,binarySize:q.default.ANY})},SYNC_INFO:new q.default({tag:q.default.ANY,data:Ue.SYNC_INFO,binarySize:q.default.ANY}),CHALLENGE:new q.default({tag:q.default.ANY,data:Ue.CHALLENGE,binarySize:q.default.ANY}),DISCONNECT:new q.default({tag:q.default.ANY,data:Ue.DISCONNECT,binarySize:q.default.ANY}),HARD_REFRESH:new q.default({tag:q.default.ANY,data:Ue.HARD_REFRESH,binarySize:q.default.ANY}),UPGRADE_MD_FOR_INTERNAL_USER:new q.default({tag:q.default.ANY,data:Ue.UPGRADE_MD_FOR_INTERNAL_USER,binarySize:q.default.ANY}),UPGRADE_MD_FOR_PROD:new q.default({tag:q.default.ANY,data:Ue.UPGRADE_MD_FOR_PROD,binarySize:q.default.ANY}),PONG:new q.default({tag:q.default.ANY,data:Ue.PONG,binarySize:q.default.ANY})},Ge=new q.default({status:function(e){return"number"==typeof e&&e>=500},_:y.default}),Be=new q.default({status:function(e){return"number"==typeof e&&499===e},_:y.default}),je=new q.default({status:function(e){return"number"==typeof e},_:y.default}),Ye=function(e){(0,c.default)(q,e);var t,a,i,_,v=(0,d.default)(q);function q(){var e;(0,l.default)(this,q);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=v.call.apply(v,[this].concat(n))).socketPreload=(0,b.session)(),e.socket=(0,b.session)(),e.launchGeneration=(0,b.session)(0),e.backoffGeneration=(0,b.session)(0),e.hasSynced=(0,b.session)(),e.state=(0,b.session)(_e.UNLAUNCHED),e.stream=(0,b.session)(ve.DISCONNECTED),e.canSend=(0,b.session)(),e.sendQueue=(0,b.session)(),e.sendHash=(0,b.session)(),e.cancelHash=(0,b.session)(),e.doubleAckHash=(0,b.session)(),e.sequence=(0,b.session)(0),e.shortTagBase=(0,b.session)(),e.socketWatcher=(0,b.session)(),e.refWatcher=(0,b.session)(),e.phoneWatchdog=(0,b.session)(),e.pendingPhoneReqs=(0,b.session)(0),e.isIncognito=(0,b.session)(),e.runPromise=(0,b.session)(),e.streamPromise=(0,b.session)(),e.conflictPromise=(0,b.session)(),e.resumePromise=(0,b.session)(),e.logoutMutex=(0,b.session)(0),e.retryTimestamp=(0,b.session)(),e.pokeable=(0,b.session)(),e.launched=(0,b.session)(),e.mustExitLoop=(0,b.session)(),e.syncTag=(0,b.session)(),e.lastPhoneMessage=(0,b.session)(),e.shouldForceReconnect=(0,b.session)(!1),e.shouldUpgradeToMDIntern=(0,b.session)(!1),e.shouldUpgradeToMDPord=(0,b.session)(!1),e}return(0,u.default)(q,[{key:"initialize",value:function(){var e=this;x.default.supportsFeature(x.default.F.MD_BACKEND)||(this.sendQueue=[],this.sendHash={},this.cancelHash={},this.doubleAckHash={},this.phoneWatchdog=new ne.default({waitAlgorithm:(0,ne.fibonacci)(3e3,3e3,36e5),onTimeout:this.phoneTimedOut.bind(this),onActivated:this.onPhoneWatchdogActivated.bind(this),onFed:this.onPhoneWatchdogFed.bind(this),onDeactivated:this.onPhoneWatchdogDeactivated.bind(this)})),this.listenTo(this,"change:state",this.onStateChange.bind(this)),this.listenTo(this,"change:stream",this.onStreamChange.bind(this)),(0,f.delayMs)(0).then(V.determineIncognito).then((function(t){e.isIncognito=t})),this.listenTo(M.default,"log_socket_summary",this.summary),this.listenTo(M.default,"set_socket_state",(function(t){e.state=t})),this.listenTo(M.default,"open_socket_stream",(function(){e.openStream(),e.hasSynced&&e.set({stream:ve.CONNECTED})})),this.listenTo(M.default,"socket_stream_disconnected",(function(){e.set({stream:ve.DISCONNECTED})})),this.listenTo(M.default,"on_critical_sync_done",(function(){__LOG__(2)`[ws2] observed on_critical_sync_done`,e.onCriticalSyncDone()})),this.listenTo(M.default,"main_stream_mode_ready",(function(){__LOG__(2)`[ws2] observed main_stream_mode_ready`,!x.default.supportsFeature(x.default.F.MD_BACKEND)||(0,ie.getAllCriticalDataSynced)()||x.default.supportsFeature(x.default.F.MD_E2E)?(__LOG__(2)`[ws2] moving to main screen from main_stream_mode_ready`,e.set({hasSynced:!0,stream:ve.CONNECTED})):__LOG__(2)`[ws2] did not meet conditions to move to main screen`})),this.listenTo(M.default,"socket_stream_disconnected",(function(){e.stream=ve.DISCONNECTED}))}},{key:"preload",value:function(){x.default.supportsFeature(x.default.F.MD_BACKEND)||(this.socketPreload=new J.default)}},{key:"send",value:function(e){var t=new H.default(e);this.sendQueue.push(t),this.flushQueue()}},{key:"send2",value:function(e){var t=this;return new r((function(n,r){var a=new H.default(e);a.onSend=n,a.onDrop=r,t.sendQueue.push(a),t.flushQueue()}))}},{key:"shortTag",value:function(){return this.shortTagBase||(this.shortTagBase=((0,E.default)().unix()%1e3).toString()),`${this.shortTagBase}.--${this.sequence++}`}},{key:"tag",value:function(e){var t=`${(0,E.default)().unix()}.--${this.sequence++}`;return e&&fe?t+"-"+e:t}},{key:"launch",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;__LOG__(2)`ws2:Launch gen${this.launchGeneration} (backoff gen${this.backoffGeneration})`;var r=300*Z.expBackoff(this.backoffGeneration,100),a=Date.now()+r;if(this.launched){var i=new Error("Redundant Launch");return __LOG__(3,!0)`ws2:launch redundantly called!\n${i.stack}`,void w.upload({reason:"redundant-launch"})}function o(){__LOG__(2)`ws2:socket loop closed`,this.socketPreload&&this.socketPreload.deactivate(),this.clearState(),this.set({state:_e.UNLAUNCHED,mustExitLoop:!1,launched:!1,socketPreload:null})}this.mustExitLoop?o.call(this):(this.launched=!0,this.run(n,e).then((function(e){return[e,!1]})).catchType(ye,(function(){return t.mustExitLoop=!0,[!1,!1]})).catchType(Re,(function(){return[!1,!0]})).catch((function(e){return __LOG__(3,!0)`ws2:run error unknown!\n${e.stack}`,w.upload({reason:"unknown-error-in-ws-loop"}),t.clearState(),[!0,!1]})).spread((function(e,n){if(t.mustExitLoop)o.call(t);else{var i=Date.now();t.launchGeneration++,t.backoffGeneration=e&&i<a+6e4?t.backoffGeneration+1:0;var s=i<a?Math.min(a-i,r):0;t.launched=!1,t.launch(n,s)}})))}},{key:"poke",value:function(){this.pokeable?this.pokeable.poke():this.phoneWatchdog.forceTimeout()}},{key:"takeover",value:function(){if(!this.conflictPromise)throw"Takeover called without conflict!";this.conflictPromise.cancel(new Re)}},{key:"exitLoop",value:function(e){this.mustExitLoop=!0,this.runPromise&&this.runPromise.cancel(e||new ye)}},{key:"_setLogoutDirtyBit",value:function(){j.default&&j.default.setItem(P.default.KEY_LOGOUT_DIRTY_BIT,"1")}},{key:"_removeLogoutDirtyBit",value:function(){j.default&&j.default.removeItem(P.default.KEY_LOGOUT_DIRTY_BIT)}},{key:"_hasDirtyBitSet",value:function(){j.default&&j.default.getItem(P.default.KEY_LOGOUT_DIRTY_BIT)}},{key:"clearCredentialsAndStoredData",value:(_=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,this._setLogoutDirtyBit(),e.next=4,this.clearCredentials();case 4:return this._hasDirtyBitSet()&&(t=!0),this._setLogoutDirtyBit(),e.prev=6,e.next=9,this.destroyStorage();case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(6),t=!0,__LOG__(4,void 0,new Error,void 0,["logout"])`destroyStorage: failed with error ${e.t0}`;case 15:x.default.supportsFeature(x.default.F.MD_BACKEND)&&(0,S.clearABPropConfigs)(),t||this._removeLogoutDirtyBit(),x.default.supportsFeature(x.default.F.MD_BACKEND)&&window.Native.ipcRenderer.invoke("refresh-electron-window-on-logout"),t?window.location.href=`${window.location.pathname}?post_logout=1`:window.location.reload();case 19:case"end":return e.stop()}}),e,this,[[6,11]])}))),function(){return _.apply(this,arguments)})},{key:"destroyStorage",value:(i=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[(0,Y.destroy)(),(0,Q.destroyStorage)()],x.default.supportsFeature(x.default.F.MD_BACKEND)&&(t.push((0,N.destroy)()),t.push((0,W.destroy)()),t.push((0,G.destroy)()),t.push(C.default.clearInitializationPromises())),e.next=4,r.all(t);case 4:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"logout",value:function(e){var t,a=this;j.default&&x.default.supportsFeature(x.default.F.MD_BACKEND)&&(j.default.removeItem("WebEncKeySalt"),j.default.removeItem("WANoiseInfo")),(0,F.get)().setLogoutState(!0),x.default.supportsFeature(x.default.F.MD_BACKEND)?M.default.onStartingLogout():t=this.runPromise,__LOG__(2)`ws2:user logged out`;var i=r.resolve();if(x.default.supportsFeature(x.default.F.MD_BACKEND)){var u=Math.min(20,Math.max(0,de.default.syncdSentinelTimeoutSeconds));i=(0,h.promiseTimeout)(n(34720).Z(),1e3*u).catch((function(){return __LOG__(3)`ws2: multi-device logout did not manage to send sentinel patch`}))}(0,h.promiseTimeout)(i.then((function(){a.stream===ve.DISCONNECTED||e?a.sendCurrentLogout():a.sendCurrentLogout(a.socket)})).catch(function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(4,void 0,new Error)`ws2: [logout error] sendCurrentLogoutPromise errored with ${t}`,e.next=3,a.clearCredentialsAndStoredData();case 3:M.default.logout();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),3e3,"network request took more than 3 seconds").then((0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.default.supportsFeature(x.default.F.MD_BACKEND)){e.next=4;break}return M.default.onStartingLogout(),e.next=4,new r((function(e){return setTimeout(e,100)}));case 4:return e.next=6,a.clearCredentialsAndStoredData();case 6:t&&t.cancel(new Me),a.state===_e.OPENING&&a.trigger("change:state"),M.default.logout();case 9:case"end":return e.stop()}}),e)})))).catch(function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(4,void 0,new Error)`ws2: [logout error] sentinelPromise or sendCurrentLogoutPromise timed out with ${t}`,e.next=3,a.clearCredentialsAndStoredData();case 3:M.default.logout();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).finally((function(){(0,F.get)().setLogoutState(!1)}))}},{key:"summary",value:function(){__LOG__(2)`ws:summary --------------------------------`,__LOG__(2)`ws state           ${this.state}`,__LOG__(2)`wd online:         ${String(navigator.onLine)}`,__LOG__(2)`ws socket id:      ${this.socket?this.socket.id:"n/a"}`,__LOG__(2)`ws queue:`,y.default.isEmpty(this.sendQueue)||g.default.print(y.default.map(this.sendQueue,(function(e){var t=y.default.pick(e,"tag","state","age","ephemeral","isToPhone");return e&&e.toString&&(t.debug=e.toString()),t}))).split(/\n/).forEach((function(e){__LOG__(2)`${e}`})),__LOG__(2)`ws hash:`,y.default.isEmpty(this.sendHash)||g.default.print(y.default.map(this.sendHash,(function(e){var t=y.default.pick(e,"tag","state","age","ephemeral","isToPhone");return e&&e.toString&&(t.debug=e.toString()),t}))).split(/\n/).forEach((function(e){__LOG__(2)`${e}`}))}},{key:"registerHandler",value:function(e){x.default.supportsFeature(x.default.F.MD_BACKEND)||(this.handler&&(__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("ws2: attempting to register handler multiple times")),this.handler=e)}},{key:"onStateChange",value:function(){__LOG__(2)`ws2:state change: ${this.state}`}},{key:"onStreamChange",value:function(){__LOG__(2)`ws2:stream change: ${this.stream}`,this.stream===ve.DISCONNECTED&&(x.default.supportsFeature(x.default.F.MD_BACKEND)?te.default.clear():this.onRefCycle(),this.unset("resumePromise"))}},{key:"onRefCycle",value:function(){__LOG__(2)`ws2:onRefCycle`,this.sendQueue.forEach((function(e){e.state=H.default.STATE.NEW,e.age=0})),this.clearSendHash()}},{key:"onActivity",value:function(e){if(e){var t=e.data;if(Fe.UPGRADE_MD_FOR_INTERNAL_USER.test(e))__LOG__(2)`ws2: can upgrade to md! (flow for internal users)`,this.shouldUpgradeToMDIntern=!0,this.exitLoop();else if(Fe.UPGRADE_MD_FOR_PROD.test(e)){if(__LOG__(2)`ws2: upgrade to md! (flow for external users)`,t&&Array.isArray(t)&&2===t.length&&t[1]&&t[1].type&&t[1].version){var n="string"==typeof t[1].version&&t[1].version,r=n&&new ae.default(n),a=P.default.VERSION_STR.replace(/\.[di]$/,""),i=new ae.default(a);if(r&&i.lt(r))return(0,L.setMdOptedIn)(!0),ee.default.restart(!0),void this.exitLoop()}this.shouldUpgradeToMDPord=!0,this.exitLoop()}else if(Fe.HARD_REFRESH.test(e))__LOG__(2)`ws2:hard refresh!`,ee.default.restart(!0);else if(t){var o=Array.isArray(t)?` [${String(t[0])}, ...]`:"",s=y.default.isObject(t)&&"number"==typeof t.status?t.status:null;te.default.logRecv(e.tag,e.binarySize,s);var u=null!=s?`,{status:${s}}`:"";__LOG__(2)`    recv: ${e.tag}${o}${u}`}else te.default.logAck(e.tag),__LOG__(2)`     ack: ${e.tag}`}else O.default.setSkew(this.socket.timeSkew||0);this.sendRemainingLogouts()}},{key:"onPhoneWatchdogActivated",value:function(){}},{key:"onPhoneWatchdogFed",value:function(){this.state=_e.CONNECTED}},{key:"onPhoneWatchdogDeactivated",value:function(){}},{key:"flushQueue",value:function(){var e=this;if(this.sendQueue.length){var t=this.sendQueue.filter((function(t){return t.state===H.default.STATE.NEW&&e.canRequestBeSent(t)})),n=O.default.localUnixTime(),r=[],a=[];t.forEach((function(e){!function(e,t){return!(!e.resendGuard||e.resendGuard())||!(!e.binaryOpts||null==e.binaryOpts.expires||0===e.binaryOpts.expires)&&t-e.binaryOpts.expires>120}(e,n)?a.push(e):r.push(e)})),this.sendQueue=y.default.difference(this.sendQueue,r),r.forEach((function(t){delete e.sendHash[t.tag],delete e.doubleAckHash[t.tag],te.default.delete(t.tag),t.onSend({status:408})})),a.length&&a.forEach((function(t){e._send(t)}))}}},{key:"phoneTimedOut",value:function(){var e=this.phoneWatchdog.failGeneration;if(1===e){__LOG__(3)`ws2:Phone timed out`;var t=y.default.map(this.sendHash,"tag");__LOG__(3)`ws2:Outstanding Reqs: ${t.join(",")}`}M.default.sentPing(e);var n=this.phoneWatchdog.waitAlgorithm(this.phoneWatchdog);return this.set({state:_e.TIMEOUT,retryTimestamp:Date.now()+n}),this._basicSend({tag:this.tag("ping"),data:["admin","test"]},"ping"),!0}},{key:"clearSendHash",value:function(e){if(e)y.default.forOwn(this.sendHash,(function(e){e.resendTimer&&clearTimeout(e.resendTimer),e.onDrop(new R.LogoutDrop(e.toString()))}));else{var t=y.default.filter(this.sendHash,"ephemeral");__LOG__(3)`Ephemeral Drop: ${y.default.map(t,"tag").join(",")}`,t.forEach((function(e){e.resendTimer&&clearTimeout(e.resendTimer),e.onDrop(new R.EphemeralDrop(e.toString()))}))}this.sendHash={},this.doubleAckHash={},this.pendingPhoneReqs=0,this.phoneWatchdog&&this.phoneWatchdog.deactivate(),te.default.clear()}},{key:"_basicSend",value:function(e,t){__LOG__(2)`low-send: ${t} ${String(e.tag)}`,te.default.logBasicSend(e.tag,e.data),this.socket.cast(`${String(e.tag)},${String(JSON.stringify(e.data))}`)}},{key:"_send",value:function(e){e.tag=e.getTag()||this.shortTag(),e.onTag&&e.onTag(e.tag),this.sendHash[e.tag]=e,e.tagToCancel&&(this.cancelHash[e.tag]=e.tagToCancel),(e.isCallOffer||e.isWap4Bridge)&&(this.doubleAckHash[e.tag]=e),e.binaryOpts?e.binaryOpts.debugObj:e.data,te.default.logSend(e),__LOG__(2)`    send: ${String(e.tag)}, ${e.toString()}`,this.socket.send(e.serialize()),e.isToPhone&&this.pendingPhoneReqs++,e.state=H.default.STATE.SENT}},{key:"sendBasic",value:function(e){return this.socket?(e.tag=this.tag(),this._basicSend(e,"external"),this.socket.nextMessage(Fe.TAG(e.tag))):r.reject("socket not open")}},{key:"sendEphemeral",value:function(e){e.ephemeral=!0;var t=new H.default(e);this.canRequestBeSent(t)?this._send(t):t.onDrop(new R.EphemeralDrop(t.toString()))}},{key:"sendEphemeral2",value:function(e){var t=this;return new r((function(n,r){var a=new H.default(e);a.ephemeral=!0,t.canRequestBeSent(a)?(a.onSend=n,a.onDrop=r,t._send(a)):r(new R.EphemeralDrop(a.toString()))}))}},{key:"sendEphemeralIgnore",value:function(e){e.ephemeral=!0,e.ignore=!0,e.tag=this.tag();var t=new H.default(e);if(this.canRequestBeSent(t)){var n=t.serialize();this.socket.send(n),__LOG__(2)`sending: ${String(t.tag)}, ${t.toString()}`}else t.onDrop(new R.EphemeralDrop(t.toString()))}},{key:"on5xx",value:function(e){__LOG__(3)`ws2:onMessage 5xx error ${String(e.tag)}`,e.on5xx&&e.on5xx(),e.resends>=5?(__LOG__(3)`ws2:onMessage dropping ${String(e.tag)}`,e.onDrop(new R.Server5xxDrop),delete this.sendHash[e.tag],te.default.delete(e.tag),this.sendQueue=y.default.without(this.sendQueue,e)):this.maybeResendRequestEventually(e)}},{key:"onMessage",value:function(e){var t=e.tag,r=e.data,a=e.binarySize;if(Ke(r)&&(this.lastPhoneMessage=(0,E.default)().unix()),Fe.PONG.test(e))if(r[1]){var i=0,o=!1;y.default.forOwn(this.sendHash,(function(e){if(e.isToPhone){var t=++e.age;40===t?(o=!0,__LOG__(4,void 0,new Error)`${e.tag+" likely dead: "+e.toString()}`,M.default.cannotReachPhone("("+e.tag+") "+e.toString()),n(23306).default.cannotReachPhone()):t<40&&i++}})),this.pendingPhoneReqs=i,this.phoneWatchdog.feed(),0===i&&this.phoneWatchdog.deactivate(),o&&__LOG__(3)`ws2:error-cannot-reach-phone`}else this.state!==_e.TIMEOUT?__LOG__(3)`ws2:Pang while not timed-out`:this.runPromise.cancel(new ke);else{var s=this.sendHash[t];if(s)if(r){if(s.retryOn5xx&&Ge.test(r))this.on5xx(s,r);else{var u=!0;if(this.doubleAckHash[t]&&(delete this.doubleAckHash[t],!s.isCallOffer&&!s.isWap4Bridge||200!==r.status||r.payload||(u=!1)),u){var l;try{s.logOnSend&&s.logOnSend(e),l=s.onSend(r)}catch(e){if(e instanceof R.E401)return void this.logout();__LOG__(3)`ws2:onMessage error`,s.onDrop(e)}if(Ge.test(l)?this.on5xx(s,l):(delete this.sendHash[t],this.sendQueue=y.default.without(this.sendQueue,s)),Be.test(r)){var c=this.cancelHash[t];if(c){var d=this.sendHash[c];delete this.cancelHash[t],delete this.sendHash[c],this.sendQueue=y.default.without(this.sendQueue,d)}}}}s.isToPhone&&(s.age<40&&this.pendingPhoneReqs--,this.phoneWatchdog.feed(),0===this.pendingPhoneReqs&&this.phoneWatchdog.deactivate())}else s.state=H.default.STATE.WEBDACKED,s.isToPhone&&this.phoneWatchdog.activate();else if(r){if(je.test(r))__LOG__(3)`ws2: unexpected response status`;else if(r instanceof ArrayBuffer)n(23306).default.handle(r,this,t,a).catchType(R.WebdDrop,(function(){}));else try{this.handler?this.handler(r):__LOG__(3)`ws2: received message, but no handler is registered`}catch(e){if(e instanceof D.UpdateImmediately)this.exitLoop(e);else{if(!(e instanceof D.DeprecatedProtocolVersion))throw e;this.runPromise&&this.runPromise.cancel(e)}}Ke(r)&&this.phoneWatchdog.feed()}}}},{key:"run",value:function(e,t){var n=this;return this.runPromise=X.default.resolve(e).cancellable().then((function(e){if(n.state=_e.OPENING,M.default.incrementProgress(),e>0){__LOG__(2)`ws2:Run Backoff ${e}ms`;var t=(0,f.delayMs)(e).cancellable().catchType(ge,(function(){}));return n.setPokeable(t,Date.now()+e),t}})).finally((function(){n.unset("pokeable"),n.unset("retryTimestamp")})).then((function(){return M.default.incrementProgress(),__LOG__(2)`ws2:Running`,n.openSocket()})).then((function(e){if(M.default.incrementProgress(),e.onactivity=n.onActivity.bind(n),n.socket=e,n.socketWatcher=V.attachWatcher(n.runPromise,n.throwOnClose()),n.state=_e.PAIRING,void 0===n.isIncognito)return V.waitForBBEvent(n,"change:isIncognito")})).then((function(){M.default.incrementProgress(),n.shortTagBase=((0,E.default)().unix()%1e3).toString();var e=n.initConn();if((0,L.knowsPhone)()){var a=n.requestSync(t),i=r.all([e,a]).finally((function(){e.cancel(),a.cancel()})),o=(0,B.requireChatCollection)().then((function(e){n.hasSynced&&e.length<=me&&!x.default.supportsFeature(x.default.F.MD_BACKEND)&&(n.resumePromise=n.runResume(!0))}));return r.all([i,o])}return e.then((function(){n.set({state:_e.UNPAIRED,refWatcher:V.attachWatcher(n.runPromise,n.manageRef())})}))})).then((function(){return n.waitForSyncInfo()})).finally((function(){n.refWatcher&&(n.refWatcher.cancel(),n.unset("refWatcher"))})).then((function(e){return M.default.incrementProgress(),__LOG__(2)`ws2:completed ${n.hasSynced?"re-auth":"auth"}`,n.state=_e.CONNECTED,I.default.blockStoreAdds=!1,I.default.platform=e.platform,V.waitForMain().then((function(){return e}))})).then((function(e){return __LOG__(2)`ws2:main loaded`,e.initial=!0,(0,k.default)([e])})).then((function(){return(0,Y.initialize)().catch((function(e){__LOG__(3)`Error initializing database during sync: ${e}`,__LOG__(4,void 0,new Error,!0)`Assertion failed!`,SEND_LOGS("Error initializing database during sync")}))})).then((function(){var e=n.openStream();return n.streamPromise=e,e})).then((function(){return new X.default})).catchType(D.SocketClosed,(function(e){throw e.event instanceof Me?e.event:e})).catch((function(e){__LOG__(3)`ws2:run loop interrupt: ${e}`,n.set({canSend:!1,stream:ve.DISCONNECTED,runPromise:null}),n.phoneWatchdog.deactivate(),n.streamPromise&&(n.streamPromise.cancel(),n.unset("streamPromise")),n.socketWatcher&&(n.socketWatcher.cancel(),n.unset("socketWatcher"));var t=n.socket;return t&&t.state!==re.STATE.CLOSED&&(t.detachCallbacks(),t.close(!0,e)),n.unset("socket"),n.shouldUpgradeToMDIntern?(M.default.upgradeToMDInternal(),!1):n.shouldUpgradeToMDPord?(M.default.upgradeToMDProd(),!1):r.reject(e)})).catchType(D.UpdateImmediately,(function(e){throw n.updateImmediately(e.message),new ye})).catchType(D.DeprecatedProtocolVersion,(function(){return n.deprecatedVersion()})).catchTypes(R.E401,ke,(function(){return!1})).catchType(Ce,(function(){return n.clearState(),!1})).catchTypes3(D.SocketClosed,D.SocketError,xe,(function(){return!0})).catchType(Ae,(function(){return __LOG__(3)`ws2:sync rejected, logging out`,n.sendCurrentLogout().then((0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.clearCredentialsAndStoredData();case 2:return M.default.logout(),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)}))))})).catchTypes(Ee,Le,function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2)`ws2:phone disassociated via ${String(t)}`,e.next=3,n.clearCredentialsAndStoredData();case 3:return M.default.logout(),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).catchType(Ne,(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(3)`ws2:No secret bundle!`,e.next=3,n.clearCredentialsAndStoredData();case 3:return w.upload({reason:"no-secret-bundle"}),M.default.logout(),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).catchType(Oe,(function(){return n.state=_e.UNPAIRED_IDLE,n.setPokeable(V.waitForOfflineNaive().throw(new Ie).catchType(ge,(function(){return!1})))})).catchType(D.BlockedByProxy,(function(){return T.default.promptUnloadGuards++,n.state=_e.PROXYBLOCK,n.setPokeable((new X.default).catchType(ge,(function(){return!1})).finally((function(){T.default.promptUnloadGuards--})))})).catchType(be,(function(e){__LOG__(2)`ws2:denied tos`;var t=n.setPokeable((new X.default).cancellable().catchType(ge,(function(){return!1}))).cancellable(),r=e instanceof Te?_e.TOS_BLOCK:_e.SMB_TOS_BLOCK;return n.clearState(),n.set({state:r,runPromise:t}),t})).catchTypes(Se,De,(function(e){e instanceof Se?__LOG__(2)`ws2:phone denied (conflict)`:__LOG__(2)`ws2:phone replaced`;var t=(new X.default).cancellable();return n.set({state:_e.CONFLICT,conflictPromise:t,runPromise:t}),n.clearState(),t})).finally((function(){n.conflictPromise&&n.conflictPromise.cancel()})).catchTypes(Me,Ie,(function(){return!1}))}},{key:"openSocket",value:function(){var e=this,t=this.socketPreload;if(this.socketPreload=null,t&&t.socket&&t.socket.state===re.STATE.OPEN)return r.resolve(t.socket);var n=t&&t.active?t:new J.default,a=function(){e.retryTimestamp=n.retryTimestamp};n.on("change:retryTimestamp",a),this.pokeable=n;var i=V.waitForBBEvent(n,"change:socket").cancellable().then((function(){return n.socket})).finally((function(){n.off("change:retryTimestamp",a),n.onerror=null,n.deactivate(),e.pokeable=null}));return n.onerror=function(e){i.cancel(e)},i}},{key:"initConn",value:function(){var e=this;return new r((function(t,n){var r=pe,a=e.tag("init"),i=T.default.info();return e._basicSend({tag:a,data:["admin","init",[r.p,r.s,r.t],[i.os||"Unknown",i.name||"Unknown",i.version||"Unknown"],T.default.id(),!e.isIncognito&&!!(0,L.getRememberMe)()]},"init"),e.socket.nextMessage(Fe.TAG(a)).get("data").catch(n).then(t)})).then((function(e){O.default.setSkew(Date.now()-e.time),(0,k.default)([{id:"1",ref:e.ref,refTTL:e.ttl}])}))}},{key:"manageRef",value:function(){var e=this;return(0,p.promiseLoop)((function(t,n,r){var a=I.default.refExpiry-Date.now()-500;return(0,f.delayMs)(Math.max(a,0)).cancellable().then((function(){if(r>=5)throw new Oe;__LOG__(2)`ws2:Requesting Ref Update`;var t=e.tag("qr"+r);return e._basicSend({tag:t,data:["admin","Conn","reref"]},"reref"),e.socket.nextMessage(Fe.TAG(t))})).then((function(e){var n=e.data;switch(n.status){case 200:return __LOG__(2)`ws2:Updating Ref`,void(0,k.default)([{ref:n.ref,refTTL:n.ttl}]);case 304:return __LOG__(2)`ws2:Keeping Ref`,void t();case 429:throw __LOG__(2)`ws2:Server denied new ref`,new Oe;default:throw __LOG__(3)`ws2:Bad Ref Response!`,new Pe("unrecognized ref request status ("+n.status+")")}}))})).cancellable()}},{key:"requestSync",value:function(e){var t=this;if(this.syncTag=this.tag("sync"),!$.load())return r.reject(new Ne);var n=(0,L.getLoginTokens)(),a=["admin","login",n.client,n.server,T.default.id()];e?a.push("takeover"):this.hasSynced&&(a.push(this.shouldForceReconnect?"force_reconnect":"reconnect"),a.push((0,L.getMaybeMeUser)()));var i=function(){return t._basicSend({tag:t.syncTag,data:a},"sync"),!0},o=new ne.default({waitAlgorithm:(0,ne.fibonacci)(0,8500,6e4),onTimeout:i});o.on("change:ts",(function(){t.retryTimestamp=o.ts})),this.pokeable=o,o.activate(),i();var s=this.socket.nextMessage(Fe.TAG(this.syncTag)),u=this.lookForAndHandleChallenge().catchType(r.CancellationError,(function(){})).catch(s.cancel.bind(s));return s.then((function(e){__LOG__(2)`ws2:login`;var t=e.data;switch(t.status){case 200:return e;case 401:return r.reject(new Ee);case 403:var n;return n=t.tos>=2?new Te:t.smbTos?new we:new Ae,r.reject(n);case 405:return __LOG__(3)`ws2:Already authorized!`,w.upload({reason:"already-authorized"}),r.reject(new Ce);case 409:return r.reject(new Se);case 500:return r.reject(new xe);default:return __LOG__(3)`ws2:unknown error! status:${t.status}`,r.reject(new Ae)}})).finally((function(){u.cancel(),o.deactivate(),t.unset("pokeable"),t.unset("retryTimestamp")}))}},{key:"waitForSyncInfo",value:function(){return this.socket.nextMessage(Fe.SYNC_INFO).then((function(e){return e.data[1]}))}},{key:"lookForAndHandleChallenge",value:function(){var e=this;return this.socket.nextMessage(Fe.CHALLENGE).then((function(e){__LOG__(2)`ws2:challenged!`;var t=(0,m.decodeB64)(e.data[1].challenge);return $.getSecurityToken(t)})).then((function(t){var n=(0,L.getLoginTokens)(),a=n?n.server:void 0;if(!a)return __LOG__(3)`ws2:handleChallenge no server token!`,r.reject(new Error("Handle challenge no server token"));var i=e.tag("challenge");return e._basicSend({tag:i,data:["admin","challenge",t,a,T.default.id()]},"challenge"),e.socket.nextMessage(Fe.TAG(i))})).then((function(e){return e.data.status>=500?r.reject(new xe):e.data.status>=400?(__LOG__(3)`ws2:handleChallenge failed challenge!`,r.reject(new Ee)):void __LOG__(2)`ws2:handleChallenge passed challenge`}))}},{key:"throwOnClose",value:function(){return this.socket.nextMessage(Fe.DISCONNECT).then((function(e){throw"replaced"===e.data[1].kind?new De:new Le}))}},{key:"onCriticalSyncDone",value:function(){x.default.supportsFeature(x.default.F.MD_BACKEND)&&(__LOG__(2)`[ws2] moving to main screen from onCriticalSyncDone`,this.set({hasSynced:!0,stream:ve.CONNECTED}))}},{key:"openStream",value:function(){var e,t=this;if(x.default.supportsFeature(x.default.F.MD_BACKEND))return(0,B.requireContactCollection)().then((function(e){var t=(0,L.getMeUser)();t&&(I.default.blockStoreAdds=!1,I.default.id="1",I.default.trigger("me_ready")),e.gadd(t)}));if(this.canSend=!0,this.hasSynced)this.resumePromise||(this.resumePromise=this.runResume(!1)),e=this.resumePromise.finally((function(){t.unset("resumePromise")}));else{var a=(0,B.requireContactCollection)().then((function(e){return e.sync()}));if(e=(0,B.requireChatCollection)().then((function(e){return e.sync()})).cancellable().then((function(){return t.set({hasSynced:!0,stream:ve.CONNECTED}),(0,B.requireStickerPackCollection)().then((function(e){e.preFetch()})).catch((function(e){__LOG__(3)`Error: prefetch StickerPacks\n${e.stack}`})),x.default.supportsFeature(x.default.F.USER_NOTICE)&&K.default.sync(),x.default.supportsFeature(x.default.F.SETTINGS_SYNC)&&z.default.sync(),a})).catch((function(e){return t.set({hasSynced:!1,stream:ve.DISCONNECTED}),r.reject(e)})).catchType(r.CancellationError,(function(){})),(0,B.requireStatusV3Collection)().then((function(e){e.sync()})),I.default.isSMB){if(x.default.supportsFeature(x.default.F.QUICK_REPLIES_QUERY))n(40113).default.sync();(0,U.canDisplayLabel)()&&(0,B.requireLabelCollection)().then((function(e){e.sync()}))}}return(0,B.requireMsgCollection)().cancellable().then((function(e){e.markAllAsStale()})).then((function(){return t.stream=t.hasSynced?ve.RESUMING:ve.SYNCING,t.socket.onmessage=t.onMessage.bind(t),t.socket.releaseMessages(),e})).catchType(r.CancellationError,(function(){e.cancel()}))}},{key:"queryReceivedActions",value:function(){var e=this,t=y.default.filter(this.sendQueue,"clientCacheable"),a=y.default.map(t,"tag").filter((function(e){return e}));return __LOG__(2)`ws2:queryReceivedActions`,0===a.length?r.resolve():n(23306).default.queryReceivedActions(a).then((function(n){Array.isArray(n)?n.forEach((function(t){var n=function(e,t){for(var n=t;n<e.length;n++){var r=e[n];if(r.tag)return r}}(e.sendQueue,parseInt(t.id,10)||0);if(n)if(__LOG__(2)`ws2:queryReceivedActions found dup: ${t.id},${t.code}`,delete e.sendHash[t.id],te.default.delete(t.id),e.sendQueue=y.default.without(e.sendQueue,n),n.onSend){var r=n.onSend({status:t.code,_duplicate:!0});Ge.test(r)&&n.onDrop(new R.Server5xxDrop)}else __LOG__(3)`ws2:queryReceivedActions onSendDup undefined; should be defined: ${t.id}`,n.onDrop(new R.ConventionViolationDrop);else __LOG__(3)`ws2:queryReceivedActions unknown tag in response: ${t.id}`})):"replaced"===n?(t.forEach((function(e){e.onDrop(new R.BrowserReplacedDrop)})),e.sendQueue=y.default.difference(e.sendQueue,t)):__LOG__(3)`ws2:queryReceivedActions error`}))}},{key:"runResume",value:function(e){var t=this;return r.all([this.queryReceivedActions(),(0,B.requireChatCollection)().then((function(e){return e.resyncMessages()})),(0,B.requireMsgCollection)().then((function(e){return e.resyncReceipts()}))]).then((function(){t.trigger("didResume"),t.flushQueue(),t.stream=ve.CONNECTED})).catchTypes(R.WebdDrop,r.CancellationError,(function(){t.stream=ve.DISCONNECTED})).catch((function(n){if(!e)throw __LOG__(3,!0)`ws2:error during resume, resyncing: ${String(n)}\n${n.stack}`,w.upload({reason:"error-on-resume"}),t.stream=ve.DISCONNECTED,new Ce;if(t.canSend)return t.runResume(!1);t.unset("resumePromise")}))}},{key:"setPokeable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.retryTimestamp;return this.set({pokeable:{poke:function(){e.cancel(new ge)}},retryTimestamp:t}),e}},{key:"clearCredentials",value:(a=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,L.updatePreservedUserKeys)(),e.prev=1,e.next=4,this.clearState();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:try{(0,L.setBrowserId)()}catch(e){__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:clearState error ${e}`}try{(0,L.setUnknownId)()}catch(e){__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:setUnknownId error ${e}`}try{(0,L.setMe)()}catch(e){__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:setMe error ${e}`}if(!x.default.supportsFeature(x.default.F.MD_BACKEND)){e.next=31;break}try{(0,ie.clearRegistrationInfo)()}catch(e){__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:clearRegistrationInfo error ${e}`}return e.prev=13,e.next=16,(0,le.destroy)();case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:destroySignal error ${e.t1}`;case 21:return e.prev=21,e.next=24,(0,oe.deleteEncKeysAndCache)();case 24:(0,ce.deleteSalt)(),e.next=29;break;case 27:e.prev=27,e.t2=e.catch(21);case 29:e.next=33;break;case 31:try{(0,L.clearTokens)()}catch(e){__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:clearTokens error ${e}`}try{$.clear()}catch(e){__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:SecretBundle clear error ${e}`}case 33:return e.prev=33,e.next=36,(0,L.clearAllLocalState)();case 36:e.next=41;break;case 38:e.prev=38,e.t3=e.catch(33),__LOG__(4,void 0,new Error,void 0,["logout"])`ws2:clearAllLocalState error ${e.t3}`;case 41:case"end":return e.stop()}}),e,this,[[1,6],[13,18],[21,27],[33,38]])}))),function(){return a.apply(this,arguments)})},{key:"clearState",value:(t=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2)`ws2:clearState`,this.sendQueue=[],this.clearSendHash(!0),this.unset("hasSynced"),e.prev=4,e.next=7,(0,B.requireClearAppStates)();case 7:(0,e.sent)(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),e.t0 instanceof D.DbOnLogoutAbort?__LOG__(3)`ws2:clearState failed due to DB operations aborted: ${e.t0.stack}`:(__LOG__(4,void 0,new Error,!0)`ws2:clearState error ${e.t0.stack}`,SEND_LOGS("clear_session_app_state"));case 14:return e.prev=14,e.next=17,(0,A.default)();case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),e.t1 instanceof D.DbOnLogoutAbort?__LOG__(3)`ws2:clearState failed due to DB operations aborted: ${e.t1.stack}`:(__LOG__(4,void 0,new Error,!0)`ws2:clearState error ${e.t1.stack}`,SEND_LOGS("clear_persistent_app_state"));case 22:case"end":return e.stop()}}),e,this,[[4,11],[14,19]])}))),function(){return t.apply(this,arguments)})},{key:"maybeResendRequestEventually",value:function(e){var t=this,n=300*Z.expBackoff(e.resends,100);__LOG__(2)`ws2:Resending ${e.toString()} in ${n}ms`,e.state=H.default.STATE.WILL_RETRY,e.resendTimer=setTimeout((function(){e.resends++,e.resendTimer=void 0,t.sendHash[e.tag]===e&&(!e.resendGuard||e.resendGuard()?t._send(e):e.onSend({status:408}))}),n)}},{key:"sendCurrentLogout",value:function(e){var t,a=this;x.default.supportsFeature(x.default.F.MD_BACKEND)?(t=(0,se.default)().then((function(e){200!==e.status&&__LOG__(3)`ws2:multi-device logout failed with error code ${e.status}`,(0,ue.stopComms)()})).catch((function(e){__LOG__(4,!0,new Error)`[CRITICAL] unpairDevice failed with error, preoceed with local logout \n${e.stack}`})))||(t=r.reject(new Error("sendCurrentLogout: should not reach"))):t=($.load()?n(23306).default.logoutToken().then((function(e){var t={t:(0,L.getLogoutToken)(),m:e},n=(0,L.getOldLogoutCreds)();return n.push(t),(0,L.setOldLogoutCreds)(n),t})):r.resolve({})).then((function(t){if(e&&e.state===re.STATE.OPEN){var n=a.logoutMutex;a.logoutMutex=n<=0?n=1:++n,__LOG__(2)`ws2:logout through socket`,e.partingSend(new Me,'goodbye,,["admin","Conn","disconnect"]',(function(e){return 0===e.indexOf("goodbye,")})).then((function(e){e?(__LOG__(2)`ws2:logout through socket success`,We(t)):__LOG__(3)`ws2:logout through socket failure, will POST`})).finally((function(){a.logoutMutex===n&&(a.logoutMutex=0)}))}else a.logoutMutex<0&&(a.logoutMutex=0),a.sendRemainingLogouts()}));return t}},{key:"sendRemainingLogouts",value:function(){var e=this,t=this.logoutMutex;if(0===t){var a=n(89428).default,i=(0,L.getOldLogoutCreds)();0!==i.length?(this.logoutMutex=t=1,r.all(y.default.map(i,(function(e){return __LOG__(2)`ws2:POST logout`,a.post(he,e).then((function(){We(e)})).catch((function(){__LOG__(3)`ws2:POST logout failure`}))}))).finally((function(){t===e.logoutMutex&&(e.logoutMutex=0)}))):this.logoutMutex=-1}}},{key:"updateImmediately",value:function(e){w.upload({reason:e,immediate:!0}).finally((function(){ee.default.restart(!0)}))}},{key:"deprecatedVersion",value:function(){__LOG__(2)`ws2:deprecated version`,w.upload({reason:"ws2:deprecated version",immediate:!0});var e=this.setPokeable((new X.default).cancellable().catchType(ge,(function(){return!1}))).cancellable();return this.clearState(),this.set({state:_e.DEPRECATED_VERSION,runPromise:e}),e}},{key:"canRequestBeSent",value:function(e){return!!this.canSend||Boolean(this.socket)&&(0,L.knowsPhone)()&&e.serverCacheable}}]),q}(b.default);function Ke(e){return e instanceof _.Binary}function We(e){var t=(0,L.getOldLogoutCreds)(),n=y.default.matches(e);(0,L.setOldLogoutCreds)(y.default.filter(t,(function(e){return!n(e)})))}var Ve=new((0,b.defineModel)(Ye));t.default=Ve},22348:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){null==a&&((0,u.createStorage)(),(0,o.addTable)(),(0,l.addTable)(),(0,s.addTable)(),a=(0,u.getStorage)().initialize().catch((function(e){throw __LOG__(4,!0,new Error,!0)`Assertion failed!`,SEND_LOGS("Failed to initialize fts storage"),e})));return a},t.destroy=function(){return(0,u.destroyStorage)().catch((function(){return c.resolve(new i.default(u.DATABASE_NAME).delete())})).finally((function(){return a=null,c.resolve(new i.default("fts-storage-dogfooding").delete())}))},t.clearInitializePromise=function(){a=null},Object.defineProperty(t,"getManifestTable",{enumerable:!0,get:function(){return o.getTable}}),Object.defineProperty(t,"getPurgeRangeQueueTable",{enumerable:!0,get:function(){return s.getTable}}),Object.defineProperty(t,"getIndexV1Table",{enumerable:!0,get:function(){return l.getTable}});var a,i=r(n(86128)),o=n(80856),s=n(53604),u=n(80008),l=n(47534),c=n(60077).default},80856:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add(u).version((0,s.manifestCreateTable)(),[new o.default("key"),new a.default("tokenizerVersion"),new a.default("schemaVersion"),new a.default("isCurrent"),new a.default("lastMsgKeyViaFullIndexer"),new a.default("isFullIndexingComplete")]).view((function(e){return e||null}))},t.getTable=function(){return(0,i.getStorage)().table(u)},t.ManifestKeys=t.TABLE_NAME=void 0;var a=r(n(17905)),i=n(80008),o=r(n(55664)),s=n(46053),u="manifest";t.TABLE_NAME=u;var l=Object.freeze({PREV_VERSION:"prev.version",CURR_VERSION:"curr.version",NEXT_VERSION:"next.version"});t.ManifestKeys=l},53604:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add(u).version((0,s.purgeRangeQueueCreateTable)(),[new i.default(["chatId","tsOfLastMessage","startRowId","endRowId"]),new a.default("offset")]).view((function(e){return e}))},t.getTable=function(){return(0,o.getStorage)().table(u)},t.TABLE_NAME=void 0;var a=r(n(17905)),i=r(n(39733)),o=n(80008),s=n(46053),u="fts-purge-range-queue";t.TABLE_NAME=u},47534:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add(c).version((0,l.ftsIndexCreateTable)(),[new u.default("token"),new o.default("ids"),new i.default("ids"),new o.default("prefixes"),new i.default("prefixes")]).view((function(e){return e?(0,a.buildEntry)(e.prefixes,e.ids):null}))},t.getTable=function(){return(0,s.getStorage)().table(c)},t.TABLE_NAME=void 0;var a=n(60047),i=r(n(92682)),o=r(n(17905)),s=n(80008),u=r(n(55664)),l=n(46053),c="fts-v1-index";t.TABLE_NAME=c},80008:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=function(){var e=new s.default(c);(d=new u.default(e)).addErrorHandler(i.default.AbortError,(function(e){e.message.includes("QuotaExceededError")&&l.default.trigger("storage_not_enough_space")}))},t.getStorage=function(){return(0,o.default)(null!=d,"[fts-storage] Storage should be created first before being accessed"),d},t.destroyStorage=function(){if(null==d)return r.reject(new Error("[fts-storage] Storage should be created first before being destroyed"));return d.purge().then((function(){d=null})).catch((function(e){throw d=null,e}))},t.DATABASE_NAME=void 0;var i=a(n(86128)),o=a(n(41143)),s=a(n(17435)),u=a(n(74198)),l=a(n(14054)),c="fts-storage";t.DATABASE_NAME=c;var d=null},46053:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ftsIndexCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.manifestCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.purgeRangeQueueCreateTable=function(){return(0,r.getStorage)().versions.version(2)};var r=n(80008)},15995:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){null==a&&((0,o.createStorage)(),(0,s.addTable)(),a=(0,o.getStorage)().initialize().catch((function(e){throw __LOG__(4,!0,new Error,!0)`Assertion failed!`,SEND_LOGS("Failed to initialize jobs storage"),e})));return a},t.destroy=function(){return(0,o.destroyStorage)().catch((function(){return u.resolve(new i.default(o.DATABASE_NAME).delete())})).finally((function(){a=null}))},Object.defineProperty(t,"getJobsTable",{enumerable:!0,get:function(){return s.getTable}});var a,i=r(n(86128)),o=n(37066),s=n(94836),u=n(60077).default},94836:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("jobs-store").version((0,u.jobsCreateTable)(),[new o.default("jobId"),new a.default("type"),new a.default("uniqKey"),new i.default("uniqKey"),new a.default("original"),new a.default("current"),new a.default("step"),new a.default("startTime"),new a.default("endTime"),new a.default("stepHardStartCountAfterTimeout"),new a.default("stepFirstStartTime"),new a.default("waitUntil"),new a.default("backedOffCount"),new a.default("version")]).view((function(e){return{jobId:e.jobId,type:e.type,uniqKey:e.uniqKey,original:e.original,current:e.current,step:e.step,startTime:e.startTime,endTime:e.endTime,stepHardStartCountAfterTimeout:e.stepHardStartCountAfterTimeout,stepFirstStartTime:e.stepFirstStartTime,waitUntil:e.waitUntil,backedOffCount:e.backedOffCount,version:e.version}}))},t.getTable=function(){return(0,s.getStorage)().table("jobs-store")};var a=r(n(17905)),i=r(n(42061)),o=r(n(96600)),s=n(37066),u=n(85595)},37066:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=function(){var e=new s.default(c);(d=new u.default(e)).addErrorHandler(i.default.AbortError,(function(e){e.message.includes("QuotaExceededError")&&l.default.trigger("storage_not_enough_space")}))},t.getStorage=function(){return(0,o.default)(null!=d,"[jobs-storage] Storage should be created first before being accessed"),d},t.destroyStorage=function(){if(null==d)return r.reject(new Error("[jobs-storage] Storage should be created first before being destroyed"));return d.purge().then((function(){d=null})).catch((function(e){throw d=null,e}))},t.DATABASE_NAME=void 0;var i=a(n(86128)),o=a(n(41143)),s=a(n(17435)),u=a(n(74198)),l=a(n(14054)),c="jobs-storage";t.DATABASE_NAME=c;var d=null},85595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jobsCreateTable=function(){return(0,r.getStorage)().versions.version(0)};var r=n(37066)},17435:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(63038)),s=a(n(87757)),u=a(n(34575)),l=a(n(93913)),c=a(n(48926)),d=n(49219),f=a(n(91080)),p=a(n(86128)),h=a(n(41143)),_=n(22692),v=n(57584),m=null;m=n(17894).default,i=n(17894).DB_ENCRYPTION_CIPHER;var g=n(60077).default;function y(){return(y=(0,c.default)(s.default.mark((function e(t,n,r,a){var o,u,l,c,d,f;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}throw new Error("feature is not yet implemented");case 2:return o=a?m.dbMsgEncKeys[m.dbMsgEncKeys.length-1]:m.encKeys[m.encKeys.length-1],u=new Uint8Array(16),self.crypto.getRandomValues(u),l=r===_.ENCRYPTED_VALUE_TYPE.STRING?(new TextEncoder).encode(t):t,e.prev=6,c=self.crypto.subtle.encrypt({iv:u,name:i},o.key,l),d=null==p.default.currentTransaction?c:p.default.waitFor(c),e.next=11,g.resolve(d);case 11:return f=e.sent,e.abrupt("return",{_data:f,iv:u,_keyId:o.id});case 15:throw e.prev=15,e.t0=e.catch(6),I(e.t0,"encryptDbMaterial",null),e.t0;case 19:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}function E(){return S.apply(this,arguments)}function S(){return(S=(0,c.default)(s.default.mark((function e(t,n,r,a){var o,u,l,c,d,f,v,y;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}throw new Error("feature is not yet implemented");case 2:if(o=t._data,u=t.iv,l=t._keyId,c=a?m.dbMsgEncKeys.filter((function(e){return e.id===l}))[0]:m.encKeys.filter((function(e){return e.id===l}))[0],(0,h.default)(null!=c,"Encryption key id not found"),null!=o){e.next=7;break}return e.abrupt("return",o);case 7:return e.prev=7,d=self.crypto.subtle.decrypt({iv:u,name:i},c.key,o),f=null==p.default.currentTransaction?d:p.default.waitFor(d),e.next=12,g.resolve(f);case 12:return v=e.sent,y=r===_.ENCRYPTED_VALUE_TYPE.STRING?new TextDecoder("utf-8").decode(v):v,e.abrupt("return",y);case 17:throw e.prev=17,e.t0=e.catch(7),I(e.t0,"encryptDbMaterial",null),e.t0;case 21:case"end":return e.stop()}}),e,null,[[7,17]])})))).apply(this,arguments)}var b=function(){function e(t,n,r,a,i,o){(0,u.default)(this,e),this.table=t,this.view=r,this.db=n,this.propFilter=a,this.tableEncryptedColumns=new Map(Object.keys(i).map((function(e){return[e,i[e]]}))),this.shouldUseDbMsgEncKeyForEncryptedCol=o}var t,n,a,i,d,f,_,v,m;return(0,l.default)(e,[{key:"asyncView",value:(m=(0,c.default)(s.default.mark((function e(t){var n,r,a=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(a.length>1&&void 0!==a[1])||a[1],this._hasEncryptedColumn()&&n){e.next=3;break}return e.abrupt("return",this.view(t));case 3:return e.next=5,this._decryptColumns(t);case 5:return r=e.sent,e.abrupt("return",this.view(r));case 7:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"_decryptColumns",value:(v=(0,c.default)(s.default.mark((function e(t){var n,a=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.default)("object"==typeof t,"Called `_decryptColumns` with primitive value"),n=Array.from(this.tableEncryptedColumns.entries()).map((function(e){var n=(0,o.default)(e,2),r=n[0],i=n[1],s=t[r];return(null==s?void 0:s._data)&&(null==s?void 0:s.iv)?E(s,r,i,a.shouldUseDbMsgEncKeyForEncryptedCol).then((function(e){t[r]=e})):s})),e.next=4,r.all(n);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"_encryptColumns",value:function(e){var t=this,n=Array.from(this.tableEncryptedColumns.entries()).map((function(n){var r=(0,o.default)(n,2),a=r[0],i=r[1],s=e[a];return null==s?s:function(){return y.apply(this,arguments)}(s,a,i,t.shouldUseDbMsgEncKeyForEncryptedCol).then((function(t){e[a]=t}))}));return r.all(n).then((function(){return e}))}},{key:"_addAndEncrypt",value:(_=(0,c.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._hasEncryptedColumn()){e.next=2;break}return e.abrupt("return",this.table.add(t));case 2:return e.next=4,this._encryptSingleUpdate(t);case 4:return n=e.sent,e.abrupt("return",this.table.add(n));case 6:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"_putAndEncrypt",value:(f=(0,c.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._hasEncryptedColumn()){e.next=2;break}return e.abrupt("return",this.table.put(t));case 2:return e.next=4,this._encryptColumns(t);case 4:return n=e.sent,e.abrupt("return",this.table.put(n));case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_bulkAddAndEncrypt",value:function(e){var t=this;return this._hasEncryptedColumn()?this._encryptBulkUpdates(e).then((function(e){return t.table.bulkAdd(e)})):this.table.bulkAdd(e)}},{key:"_bulkPutAndEncrypt",value:function(e){var t=this;return this._hasEncryptedColumn()?p.default.waitFor(this._encryptBulkUpdates(e)).then((function(e){return t.table.bulkPut(e)})):this.table.bulkPut(e)}},{key:"_encryptBulkUpdates",value:function(e){var t=this;if(!this._hasEncryptedColumn())return g.resolve(e);var n=[],a=e.map((function(e,r){return t._encryptColumns(e).then((function(e){n[r]=e}))}));return r.all(a).then((function(){return n}))}},{key:"_encryptSingleUpdate",value:(d=(0,c.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._hasEncryptedColumn()){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,this._encryptColumns(t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"asyncViewMap",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._hasEncryptedColumn()||!n)return r.resolve(e.map((function(e){return e?t.view(e):null})));var a=e.map((function(e){return null!=e?t.asyncView(e):g.resolve(null)}));return g.resolve(null==p.default.currentTransaction?r.all(a):p.default.waitFor(r.all(a)))}},{key:"preflightEncryptSingleRecord",value:function(e){var t=this;return this.tableEncryptedColumns,Object.keys(e).forEach((function(n){t.tableEncryptedColumns.has(n)||delete e[n]})),this._encryptColumns(e)}},{key:"postflightDecryptSingleRecord",value:(i=(0,c.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._decryptColumns(t);case 2:return n=e.sent,e.abrupt("return",this.view(n));case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY",value:function(e){var t=this;return k(e,this.tableEncryptedColumns),g.resolve(this.table.bulkAdd(e)).catch((function(e){throw I(e,"bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY",t.table.name),e}))}},{key:"bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY",value:function(e){var t=this;return k(e,this.tableEncryptedColumns),g.resolve(this.table.bulkPut(e)).catch((function(e){throw I(e,"bulkCreateOrReplace",t.table.name),e}))}},{key:"create",value:function(e){var t=this,n=this.propFilter(e);return g.resolve(this._addAndEncrypt(n)).catch((function(e){throw I(e,"create",t.table.name),e}))}},{key:"createOrReplace",value:function(e){var t=this,n=this.propFilter(e);return g.resolve(this._putAndEncrypt(n)).catch((function(e){throw I(e,"createOrReplace",t.table.name),e}))}},{key:"createOrMerge",value:(a=(0,c.default)(s.default.mark((function e(t,n){var r,a,i=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.propFilter(n),e.next=3,this._encryptColumns(r);case 3:return a=e.sent,e.abrupt("return",g.resolve(this.db.transaction("rw",this.table,(function(){return i.table.where(":id").equals(t).modify((function(e){Object.assign(e,a)})).then((function(e){if(1!==e)return i.table.add(a)}))})).then((function(){}))).catch((function(e){throw I(e,"createOrMerge",i.table.name),e})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"get",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return g.resolve(this.table.get(e)).then((function(e){return e?t.asyncView(e,n):null})).catch((function(e){throw I(e,"get",t.table.name),e}))}},{key:"merge",value:(n=(0,c.default)(s.default.mark((function e(t,n){var r,a,i=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.propFilter(n),e.next=3,this._encryptSingleUpdate(r);case 3:return a=e.sent,e.abrupt("return",g.resolve(this.table.update(t,a)).catch((function(e){throw I(e,"merge",i.table.name),e})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"remove",value:function(e){var t=this;return g.resolve(this.table.delete(e)).catch((function(e){throw I(e,"remove",t.table.name),e}))}},{key:"bulkCreate",value:function(e){var t=this,n=e.map((function(e){return t.propFilter(e)}));return this._hasEncryptedColumn()?g.resolve(this.db.transaction("rw",this.table,(function(){return t._bulkAddAndEncrypt(n)}))).catch((function(e){throw I(e,"bulkCreate",t.table.name),e})):g.resolve(this.table.bulkAdd(n))}},{key:"bulkCreateOrReplace",value:function(e){var t=this,n=e.map((function(e){return t.propFilter(e)}));return this._hasEncryptedColumn()?g.resolve(this.db.transaction("rw",this.table,(function(){return t._bulkPutAndEncrypt(n)}))).catch((function(e){throw I(e,"bulkCreateOrReplace",t.table.name),e})):g.resolve(this.table.bulkPut(n))}},{key:"bulkCreateOrMerge",value:(t=(0,c.default)(s.default.mark((function e(t){var n,r,a,i,o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return(o=(0,c.default)(s.default.mark((function e(t){var n,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.table.where(":id").anyOf(Array.from(t.keys())),e.next=3,n.modify((function(e){Object.assign(e,t.get(e[r])),t.delete(e[r])}));case 3:return i=Array.from(t.values()),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(){return o.apply(this,arguments)},n=new Map,r=this._primaryKey(),a=this,e.next=7,this._encryptBulkUpdates(t);case 7:return e.sent.forEach((function(e){var t=u.propFilter(e);(0,h.default)(r in t,"Called `bulkCreateOrMerge` with item(s) not including the primary key"),n.set(t[r],t)})),e.abrupt("return",g.resolve(this.db.transaction("rw",this.table,(function(){return i(n).then((function(e){return 0===e.length?g.resolve():u.table.bulkPut(e)}))}))).catch((function(e){throw I(e,"bulkCreateOrMerge",u.table.name),e})));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"bulkGet",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return g.resolve(this.db.transaction("r",this.table,(function(){var n=e.map((function(e){return t.table.get(e)}));return p.default.Promise.all(n)}))).then((function(e){return t.asyncViewMap(e,n)})).catch((function(e){throw I(e,"bulkGet",t.table.name),e}))}},{key:"bulkRemove",value:function(e){var t=this;return g.resolve(this.db.transaction("rw",this.table,(function(){return t.table.bulkDelete(e)}))).catch((function(e){throw I(e,"bulkRemove",t.table.name),e}))}},{key:"all",value:function(e,t){var n=this,r=O(this.table.orderBy(e&&e.index?C(e.index):":id"),e);t&&(r=r.until(t));var a=null;switch(null==e?void 0:e.returnKeyType){case"keys":a=g.resolve(r.keys());break;case"primary_key":a=g.resolve(r.primaryKeys());break;default:a=g.resolve(r.toArray()).then((function(t){return n.asyncViewMap(t,null==e?void 0:e.shouldDecrypt)}))}return a.catch((function(e){throw I(e,"all",n.table.name),e}))}},{key:"count",value:function(){var e=this;return g.resolve(this.table.count()).catch((function(t){throw I(t,"count",e.table.name),t}))}},{key:"equals",value:function(e,t,n){var r=this;return g.resolve(O(this.table.where(C(e)).equals(t),n).toArray()).then((function(e){return r.asyncViewMap(e,null==n?void 0:n.shouldDecrypt)})).catch((function(e){throw I(e,"equals",r.table.name),e}))}},{key:"anyOf",value:function(e,t,n){var r=this;return g.resolve(O(this.table.where(C(e)).anyOf(t),n).distinct().toArray()).then((function(e){return r.asyncViewMap(e,null==n?void 0:n.shouldDecrypt)})).catch((function(e){throw I(e,"anyOf",r.table.name),e}))}},{key:"startsWithAnyOf",value:function(e,t,n){var r=this;return g.resolve(O(this.table.where(C(e)).startsWithAnyOf(t),n).distinct().toArray()).then((function(e){return r.asyncViewMap(e,null==n?void 0:n.shouldDecrypt)})).catch((function(e){throw I(e,"startsWithAnyOf",r.table.name),e}))}},{key:"greaterThan",value:function(e,t,n){var r=this,a=n&&n.inclusive?this.table.where(C(e)).aboveOrEqual(t):this.table.where(C(e)).above(t);return g.resolve(O(a,n).toArray()).then((function(e){return r.asyncViewMap(e,null==n?void 0:n.shouldDecrypt)})).catch((function(e){throw I(e,"greaterThan",r.table.name),e}))}},{key:"lessThan",value:function(e,t,n){var r=this,a=n&&n.inclusive?this.table.where(C(e)).belowOrEqual(t):this.table.where(C(e)).below(t);return g.resolve(O(a,n).toArray()).then((function(e){return r.asyncViewMap(e,null==n?void 0:n.shouldDecrypt)})).catch((function(e){throw I(e,"lessThan",r.table.name),e}))}},{key:"between",value:function(e,t,n,r,a){var i=this,o=O(this.table.where(C(e)).between(t,n,!(!r||!r.lowerInclusive),!(!r||!r.upperInclusive)),r),s=null;switch(null==r?void 0:r.returnKeyType){case"keys":s=g.resolve(o.keys());break;case"primary_key":s=g.resolve(o.primaryKeys());break;default:s=a?g.resolve(o.until(a).toArray()).then((function(){return[]})):g.resolve(o.toArray()).then((function(e){return i.asyncViewMap(e,null==r?void 0:r.shouldDecrypt)}))}return s.catch((function(e){throw I(e,"between",i.table.name),e}))}},{key:"forEachSortedBy",value:function(e,t){var n=this;return this.table.orderBy(e).each(function(){var e=(0,c.default)(s.default.mark((function e(r){var a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._decryptColumns(r);case 2:return a=e.sent,e.abrupt("return",t(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).catch((function(e){throw I(e,"forEachSortedBy",n.table.name),e}))}},{key:"forEach",value:function(e){var t=this;return this.table.each(function(){var n=(0,c.default)(s.default.mark((function n(r){var a;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._decryptColumns(r);case 2:return a=n.sent,n.abrupt("return",e(a));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()).catch((function(e){throw I(e,"forEach",t.table.name),e}))}},{key:"clear",value:function(){var e=this;return g.resolve(this.table.clear()).catch((function(t){throw I(t,"clear",e.table.name),t}))}},{key:"_primaryKey",value:function(){return this.table.schema.primKey.name}},{key:"_hasEncryptedColumn",value:function(){return this.tableEncryptedColumns.size>0}}]),e}(),T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;(0,u.default)(this,e),this.tableNames=new Map,this.tableColumns=new Map,this.tableEncryptedColumns=new Map,this.errorHandlers=new Map,this.name=t,this.db=new p.default(this.name),this.transformSchema=n}return(0,l.default)(e,[{key:"initialize",value:function(e,t,n,r){var a=this;return r&&(this.errorHandlers=r),function(e,t,n,r,a){return(0,d.promiseReduce)(e,(function(e,i){return a((0,v.cloneSchema)(i)).then((function(a){if((0,h.default)(!(a.name in e),"Multiple tables resulted in the same transformed name"),a.deleted)return e[a.name]=null,e;t.set(i.name,a.name),n.set(i.name,a.columns.map((function(e){return e.name}))),r.set(i.name,a.encryptedColumns||{});var o=a.columns.filter((function(e){return e.primaryKey}));(0,h.default)(o.length>=1,`No primary key was defined for "${i.name}"`);var s=[w(o)].concat(a.indexes.map(A)).join(", ");return e[a.name]=s,e}))}),{})}(t,this.tableNames,this.tableColumns,this.tableEncryptedColumns,this.transformSchema).then((function(t){a.db.version(e+1).stores(t).upgrade((function(e){var t;if(n)return null===(t=e[n.name])||void 0===t?void 0:t.toCollection().modify(n.callback)}))}))}},{key:"open",value:function(){return g.resolve(this.db.open())}},{key:"transact",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rw";return g.resolve(this.db.transaction(r,e,(function(){return t()}))).catch((function(e){var t=n.errorHandlers.get(e.name);if(!t)throw e;t(e)}))}},{key:"close",value:function(){return this.db.close(),g.resolve()}},{key:"view",value:function(e,t,n,r){(0,h.default)(this.tableNames.has(e),`Attemped to get view for uninitialized table "${e}"`),(0,h.default)(this.tableColumns.has(e),`Attemped to get columns for uninitialized table "${e}"`);var a=n?function(e){if(!e)return function(e){return e};return function(t){var n={};return e.forEach((function(e){t.hasOwnProperty(e)&&(n[e]=t[e])})),n}}(this.tableColumns.get(e)):function(e){return e};return new b(this.db.table(this.tableNames.get(e)),this.db,t,a,(0,f.default)(this.tableEncryptedColumns.get(e),"this.tableEncryptedColumns.get(table)"),r)}},{key:"available",value:function(){return g.resolve(!0)}},{key:"reset",value:function(){return this.tableNames=new Map,g.resolve(this.db.delete())}}]),e}();function w(e){if(e.length>1)return e.forEach((function(e){(0,h.default)(e.primaryKey&&e.primaryKey===v.PRIMARY_KEY_TYPE.COMPOSITE,"Invalid column passed to `formatPrimaryKey`")})),`[${e.map((function(e){return e.name})).join("+")}]`;var t=e[0];return(0,h.default)(t.primaryKey&&t.primaryKey!==v.PRIMARY_KEY_TYPE.COMPOSITE,"Invalid column passed to `formatPrimaryKey`"),t.primaryKey===v.PRIMARY_KEY_TYPE.AUTO_INCREMENT?`${t.name}++`:t.name}function A(e){switch(e.type){case v.INDEX_TYPE.SIMPLE:return e.column;case v.INDEX_TYPE.COMPOSITE:return`[${e.columns.join("+")}]`;case v.INDEX_TYPE.ARRAY:return`*${e.column}`;case v.INDEX_TYPE.UNIQUE:return`&${e.column}`}throw new Error(`Cannot format index of type "${e.type}"`)}function C(e){return 1===e.length?e[0]:`[${e.join("+")}]`}function O(e,t){var n=e;return t&&t.reverse&&(n=n.reverse()),t&&null!=t.offset&&(n=n.offset(t.offset)),t&&null!=t.limit&&0!==t.limit&&(n=n.limit(t.limit)),n}function M(e){return g.resolve(e)}function I(e,t,n){__LOG__(3,!0)`idb faild to do Operation: ${t} on Table: ${n}. Failed with error ${e}`}function k(e,t){var n=Array.from(t.entries());e.forEach((function(){n.forEach((function(t){var n=(0,o.default)(t,2),r=n[0];n[1];if(e[r]&&!(e[r]._keyId&&e[r]._data&&e[r].iv))throw new Error("[CRITICAL] Records contain unencrypted field")}))}))}t.default=T},7405:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=n(98569),u=a(n(60305)),l=function(){function e(t,n){(0,i.default)(this,e),this.errorHandlers=new Map,this._view=t,n&&(this.errorHandlers=n)}return(0,o.default)(e,[{key:"_maybeHandleError",value:function(e){var t=this.errorHandlers.get(e.name);t&&t(e)}},{key:"_read",value:function(e){var t=this;return u.default.isLogoutInProgress?r.reject(new s.DbOnLogoutAbort("dropping db read operation due to logout")):e(this._view()).catch((function(e){throw t._maybeHandleError(e),e}))}},{key:"_write",value:function(e){var t=this;return u.default.isLogoutInProgress?r.reject(new s.DbOnLogoutAbort("dropping db write operation due to logout")):e(this._view()).catch((function(e){throw t._maybeHandleError(e),e}))}},{key:"create",value:function(e){return this._write((function(t){return t.create(e)}))}},{key:"preflightEncryptSingleRecord",value:function(e){return this._write((function(t){return t.preflightEncryptSingleRecord(e)}))}},{key:"postflightDecryptSingleRecord",value:function(e){return this._write((function(t){return t.postflightDecryptSingleRecord(e)}))}},{key:"bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY",value:function(e){return this._write((function(t){return t.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(e)}))}},{key:"bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY",value:function(e){return this._write((function(t){return t.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(e)}))}},{key:"createOrReplace",value:function(e){return this._write((function(t){return t.createOrReplace(e)}))}},{key:"createOrMerge",value:function(e,t){return this._write((function(n){return n.createOrMerge(e,t)}))}},{key:"get",value:function(e){return this._read((function(t){return t.get(e)}))}},{key:"merge",value:function(e,t){return this._write((function(n){return n.merge(e,t)}))}},{key:"remove",value:function(e){return this._write((function(t){return t.remove(e)}))}},{key:"bulkCreate",value:function(e){return this._write((function(t){return t.bulkCreate(e)}))}},{key:"bulkCreateOrReplace",value:function(e){return this._write((function(t){return t.bulkCreateOrReplace(e)}))}},{key:"bulkCreateOrMerge",value:function(e){return this._write((function(t){return t.bulkCreateOrMerge(e)}))}},{key:"bulkGet",value:function(e,t){return this._read((function(n){return n.bulkGet(e,t)}))}},{key:"bulkRemove",value:function(e){return this._write((function(t){return t.bulkRemove(e)}))}},{key:"all",value:function(e,t){return this._read((function(n){return n.all(e,t)}))}},{key:"count",value:function(){return this._read((function(e){return e.count()}))}},{key:"equals",value:function(e,t,n){return this._read((function(r){return r.equals(e,t,n)}))}},{key:"anyOf",value:function(e,t,n){return this._read((function(r){return r.anyOf(e,t,n)}))}},{key:"startsWithAnyOf",value:function(e,t,n){return this._read((function(r){return r.startsWithAnyOf(e,t,n)}))}},{key:"greaterThan",value:function(e,t,n){return this._read((function(r){return r.greaterThan(e,t,n)}))}},{key:"lessThan",value:function(e,t,n){return this._read((function(r){return r.lessThan(e,t,n)}))}},{key:"between",value:function(e,t,n,r,a){return this._read((function(i){return i.between(e,t,n,r,a)}))}},{key:"forEachSortedBy",value:function(e,t){return this._read((function(n){return n.forEachSortedBy(e,t)}))}},{key:"forEach",value:function(e){return this._read((function(t){return t.forEach(e)}))}},{key:"clear",value:function(){return this._write((function(e){return e.clear()}))}}]),e}();t.default=l},92387:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(319)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(41143)),c=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this),(0,l.default)("AbstractPrimaryKey"!==r.constructor.name,"Cannot instantiate abstract class AbstractPrimaryKey"),Array.isArray(e)?r.columns=(0,a.default)(e):r.columns=[e],r}return(0,o.default)(n,[{key:"validate",value:function(e){(0,l.default)(0===e.columns.length,"Attempted to add primary key after other columns")}},{key:"apply",value:function(){throw new Error("Subclass of `AbstractPrimaryKey` must implement `apply` method")}}]),n}(r(n(19239)).default);t.default=c},92682:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).column=e,r}return(0,i.default)(n,[{key:"validate",value:function(e){var t=this,n=e.columns.find((function(e){return e.name===t.column}));(0,u.default)(n,`Attempted to add index on non-existent column "${this.column}" in "${e.name}"`),(0,u.default)(n&&(!n.primaryKey||n.primaryKey===c.PRIMARY_KEY_TYPE.COMPOSITE),`Cannot add index on primary key on table "${e.name}"`),(0,u.default)(!e.indexes.some((function(e){return(e.type===c.INDEX_TYPE.ARRAY||e.type===c.INDEX_TYPE.SIMPLE||e.type===c.INDEX_TYPE.UNIQUE)&&(0,c.indexContainsColumn)(e,t.column)})),`Attempted to add index "${this.column}" which already exists in "${e.name}"`)}},{key:"apply",value:function(e){var t=(0,c.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}},{key:"_getIndex",value:function(){return{type:c.INDEX_TYPE.ARRAY,column:this.column}}}]),n}(l.default);t.default=d},17905:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).name=e,r}return(0,i.default)(n,[{key:"validate",value:function(e){var t=this;(0,u.default)(!e.columns.find((function(e){return e.name===t.name})),`Attempted to add column "${this.name}" to "${e.name}" but it already exists`)}},{key:"apply",value:function(e){var t=(0,c.cloneSchema)(e);return t.columns.push({name:this.name}),t}}]),n}(l.default);t.default=d},39663:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(319)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(41143)),c=r(n(19239)),d=n(57584),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this)).columns=(0,a.default)(e),r}return(0,o.default)(n,[{key:"validate",value:function(e){var t=this;this.columns.forEach((function(t){(0,l.default)(e.columns.find((function(e){return e.name===t})),`Attempted to add index on non-existent column "${t}" in "${e.name}"`)})),(0,l.default)(this.columns.length>1,"Attempted to add composite index for only 1 column"),(0,l.default)(-1===(0,d.findIndex)(e,this._getIndex()),`Attempted to add index [${String(this.columns)}], which already exists in "${e.name}"`);var n=e.columns.filter((function(e){return e.primaryKey&&e.primaryKey===d.PRIMARY_KEY_TYPE.COMPOSITE})).map((function(e){return e.name}));(0,l.default)(n.length!==this.columns.length||n.some((function(e){return!t.columns.includes(e)})),`Attempted to add index [${String(this.columns)}], which already is the primary key in "${e.name}"`)}},{key:"apply",value:function(e){var t=(0,d.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}},{key:"_getIndex",value:function(){return{type:d.INDEX_TYPE.COMPOSITE,columns:this.columns}}}]),n}(c.default);t.default=f},22692:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ENCRYPTED_VALUE_TYPE=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=Object.freeze({STRING:"String",ARRAY_BUFFER:"ArrayBuffer"});t.ENCRYPTED_VALUE_TYPE=d;var f=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this)).name=e,i.dataType=r,i}return(0,i.default)(n,[{key:"validate",value:function(e){var t=this;(0,u.default)(!e.columns.find((function(e){return e.name===t.name})),`Attempted to add encrypted column "${this.name}" to "${e.name}" but it already exists`)}},{key:"apply",value:function(e){var t=(0,c.cloneSchema)(e);return t.columns.push({name:this.name}),t.encryptedColumns[this.name]=this.dataType,t}}]),n}(l.default);t.default=f},42061:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).keyPath=e,r.column=e.split(".")[0],r}return(0,i.default)(n,[{key:"validate",value:function(e){var t=this,n=e.columns.find((function(e){return e.name===t.column}));(0,u.default)(n,`Attempted to add index on non-existent column "${this.column}" in "${e.name}"`),(0,u.default)(n&&(!n.primaryKey||n.primaryKey===c.PRIMARY_KEY_TYPE.COMPOSITE),`Cannot add index on primary key on table "${e.name}"`),(0,u.default)(!e.indexes.some((function(e){return(e.type===c.INDEX_TYPE.ARRAY||e.type===c.INDEX_TYPE.SIMPLE||e.type===c.INDEX_TYPE.UNIQUE)&&(0,c.indexContainsColumn)(e,t.column)})),`Attempted to add index "${this.column}" which already exists in "${e.name}"`)}},{key:"apply",value:function(e){var t=(0,c.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}},{key:"_getIndex",value:function(){return{type:c.INDEX_TYPE.SIMPLE,column:this.keyPath}}}]),n}(l.default);t.default=d},52231:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).column=e,r}return(0,i.default)(n,[{key:"validate",value:function(e){var t=this,n=e.columns.find((function(e){return e.name===t.column}));(0,u.default)(n,`Attempted to add index on non-existent column "${this.column}" in "${e.name}"`),(0,u.default)(n&&(!n.primaryKey||n.primaryKey===c.PRIMARY_KEY_TYPE.COMPOSITE),`Cannot add index on primary key on table "${e.name}"`),(0,u.default)(!e.indexes.some((function(e){return(e.type===c.INDEX_TYPE.ARRAY||e.type===c.INDEX_TYPE.SIMPLE||e.type===c.INDEX_TYPE.UNIQUE)&&(0,c.indexContainsColumn)(e,t.column)})),`Attempted to add index "${this.column}" which already exists in "${e.name}"`)}},{key:"apply",value:function(e){var t=(0,c.cloneSchema)(e);return t.indexes.push(this._getIndex()),t}},{key:"_getIndex",value:function(){return{type:c.INDEX_TYPE.UNIQUE,column:this.column}}}]),n}(l.default);t.default=d},96600:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(29754)),u=r(n(2205)),l=r(n(99842)),c=r(n(41143)),d=r(n(92387)),f=n(57584),p=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"validate",value:function(e){(0,o.default)((0,s.default)(n.prototype),"validate",this).call(this,e),(0,c.default)(this.columns&&1===this.columns.length,"Attempted to add UserDefinedPrimaryKey over wrong number of columns")}},{key:"apply",value:function(e){var t=(0,f.cloneSchema)(e);return t.columns.unshift({name:this.columns[0],primaryKey:f.PRIMARY_KEY_TYPE.AUTO_INCREMENT}),t}}]),n}(d.default);t.default=p},39733:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(29754)),u=r(n(2205)),l=r(n(99842)),c=r(n(41143)),d=r(n(92387)),f=n(57584),p=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"validate",value:function(e){(0,o.default)((0,s.default)(n.prototype),"validate",this).call(this,e),(0,c.default)(this.columns&&this.columns.length>1,"Attempted to add composite primary key for only 1 column")}},{key:"apply",value:function(e){var t=(0,f.cloneSchema)(e);return this.columns.forEach((function(e){t.columns.push({name:e,primaryKey:f.PRIMARY_KEY_TYPE.COMPOSITE})})),t}}]),n}(d.default);t.default=p},19239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(41143)),s=function(){function e(){(0,a.default)(this,e),(0,o.default)("Mutation"!==this.constructor.name,"Cannot instantiate abstract class Mutation")}return(0,i.default)(e,[{key:"validate",value:function(){throw new Error("Subclasses of Mutaton must implement `validate`")}},{key:"apply",value:function(){throw new Error("Subclasses of Mutaton must implement `apply`")}}]),e}();t.default=s},96467:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).column=e,r}return(0,i.default)(n,[{key:"validate",value:function(e){(0,u.default)(-1!==(0,c.findIndex)(e,this._getIndex()),`Attempted to remove non-existent index "${this.column}" on "${e.name}"`)}},{key:"apply",value:function(e){var t=(0,c.cloneSchema)(e),n=(0,c.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}},{key:"_getIndex",value:function(){return{type:c.INDEX_TYPE.ARRAY,column:this.column}}}]),n}(l.default);t.default=d},55996:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).name=e,r}return(0,i.default)(n,[{key:"validate",value:function(e){var t=this,n=e.columns.find((function(e){return e.name===t.name}));(0,u.default)(n,`Attempted to remove column "${this.name}" from "${e.name}" but it doesn't exist`),(0,u.default)(!n.primaryKey,`Attempted to remove primary key column "${this.name}". Removing primary keys is not supported.`),(0,u.default)(!e.indexes.some((function(e){return(0,c.indexContainsColumn)(e,t.name)})),`Attempted to remove column "${this.name}" from "${e.name}" but an index exists with the column`)}},{key:"apply",value:function(e){var t=this,n=(0,c.cloneSchema)(e);return n.columns.splice(n.columns.findIndex((function(e){return e.name===t.name})),1),n}}]),n}(l.default);t.default=d},87209:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(319)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(41143)),c=r(n(19239)),d=n(57584),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this)).columns=(0,a.default)(e).sort(),r}return(0,o.default)(n,[{key:"validate",value:function(e){(0,l.default)(-1!==(0,d.findIndex)(e,this._getIndex()),`Attempted to remove non-existent index [${String(this.columns)}] on "${e.name}"`)}},{key:"apply",value:function(e){var t=(0,d.cloneSchema)(e),n=(0,d.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}},{key:"_getIndex",value:function(){return{type:d.INDEX_TYPE.COMPOSITE,columns:this.columns}}}]),n}(c.default);t.default=f},26170:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(41143)),l=r(n(19239)),c=n(57584),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).column=e,r}return(0,i.default)(n,[{key:"validate",value:function(e){(0,u.default)(-1!==(0,c.findIndex)(e,this._getIndex()),`Attempted to remove non-existent index "${this.column}" on "${e.name}"`)}},{key:"apply",value:function(e){var t=(0,c.cloneSchema)(e),n=(0,c.findIndex)(e,this._getIndex());return t.indexes.splice(n,1),t}},{key:"_getIndex",value:function(){return{type:c.INDEX_TYPE.SIMPLE,column:this.column}}}]),n}(l.default);t.default=d},55664:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(29754)),u=r(n(2205)),l=r(n(99842)),c=r(n(41143)),d=r(n(92387)),f=n(57584),p=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"validate",value:function(e){(0,o.default)((0,s.default)(n.prototype),"validate",this).call(this,e),(0,c.default)(this.columns&&1===this.columns.length,"Attempted to add UserDefinedPrimaryKey over wrong number of columns")}},{key:"apply",value:function(e){var t=(0,f.cloneSchema)(e);return t.columns.unshift({name:this.columns[0],primaryKey:f.PRIMARY_KEY_TYPE.USER_DEFINED}),t}}]),n}(d.default);t.default=p},37026:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sortMutations=function(e){return(0,a.default)(e).sort(E)};var a=r(n(319)),i=r(n(41143)),o=r(n(92682)),s=r(n(17905)),u=r(n(39663)),l=r(n(22692)),c=r(n(42061)),d=r(n(52231)),f=r(n(96600)),p=r(n(39733)),h=r(n(96467)),_=r(n(55996)),v=r(n(87209)),m=r(n(26170)),g=r(n(55664)),y=[v.default,h.default,m.default,_.default,f.default,g.default,p.default,s.default,c.default,o.default,u.default,d.default,l.default];function E(e,t){var n=y.indexOf(e.constructor),r=y.indexOf(t.constructor);return(0,i.default)(-1!==n,`Mutation ${e.constructor.name} is not a known mutation type`),(0,i.default)(-1!==r,`Mutation ${e.constructor.name} is not a known mutation type`),n-r}},57584:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.emptySchema=function(e){return{name:e,columns:[],indexes:[],encryptedColumns:{}}},t.cloneSchema=function(e){return{name:e.name,columns:e.columns.map((function(e){return(0,a.default)({},e)})),indexes:e.indexes.map(l),encryptedColumns:(0,a.default)({},e.encryptedColumns||{}),deleted:e.deleted}},t.freezeSchema=function(e){return Object.freeze({name:e.name,columns:Object.freeze(e.columns.map(Object.freeze)),indexes:Object.freeze(e.indexes.map(u)),encryptedColumns:Object.freeze((0,a.default)({},e.encryptedColumns||{})),deleted:e.deleted})},t.findIndex=function(e,t){return e.indexes.findIndex((function(e){return function(e,t){if(e.type!==t.type)return!1;switch(e.type){case s.SIMPLE:case s.ARRAY:case s.UNIQUE:return(0,i.default)(t.type===e.type,"Index types are not equal"),e.column===t.column;case s.COMPOSITE:return(0,i.default)(t.type===e.type,"Index types are not equal"),e.columns.length===t.columns.length&&!e.columns.some((function(e){return!t.columns.includes(e)}))}throw new Error(`cannot compare unknown indexes of types: ${e.type}, ${t.type}`)}(t,e)}))},t.indexContainsColumn=function(e,t){switch(e.type){case s.SIMPLE:case s.ARRAY:case s.UNIQUE:return e.column===t;case s.COMPOSITE:return!!e.columns.find((function(e){return e===t}))}throw new Error(`cannot check indexes of unknown index type: ${e.type}`)},t.INDEX_TYPE=t.PRIMARY_KEY_TYPE=void 0;var a=r(n(81109)),i=r(n(41143)),o=Object.freeze({AUTO_INCREMENT:"auto-increment",USER_DEFINED:"user-defined",COMPOSITE:"composite"});t.PRIMARY_KEY_TYPE=o;var s=Object.freeze({SIMPLE:"simple",COMPOSITE:"composite",ARRAY:"array",UNIQUE:"unique"});function u(e){switch(e.type){case s.SIMPLE:return Object.freeze({type:s.SIMPLE,column:e.column});case s.ARRAY:return Object.freeze({type:s.ARRAY,column:e.column});case s.COMPOSITE:return Object.freeze({type:s.COMPOSITE,columns:Object.freeze(e.columns.map(Object.freeze))});case s.UNIQUE:return Object.freeze({type:s.UNIQUE,column:e.column})}throw new Error(`cannot freeze index of unknown type: ${e.type}`)}function l(e){switch(e.type){case s.SIMPLE:return{type:s.SIMPLE,column:e.column};case s.UNIQUE:return{type:s.UNIQUE,column:e.column};case s.COMPOSITE:return{type:s.COMPOSITE,columns:e.columns.map((function(e){return e}))};case s.ARRAY:return{type:s.ARRAY,column:e.column}}throw new Error(`cannot clone unknown index type: ${e.type}`)}t.INDEX_TYPE=s},79011:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MissingVersionError=t.InvalidVersionError=t.DuplicateVersionError=void 0;var a=r(n(93913)),i=r(n(34575)),o=r(n(2205)),s=r(n(99842)),u=r(n(65957)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).name="DuplicateVersionError",e}return n}((0,u.default)(Error));t.DuplicateVersionError=l;var c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).name="InvalidVersionError",e}return n}((0,u.default)(Error));t.InvalidVersionError=c;var d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).name="MissingVersionError",e}return n}((0,u.default)(Error));t.MissingVersionError=d;var f=function(){function e(){(0,i.default)(this,e),this.versions=new Set,this._max=-1}return(0,a.default)(e,[{key:"claim",value:function(e){if(e<0)throw new c("Versions must by greater than or equal to zero!");if(this.versions.has(e))throw new l(`Version #${e} has already been claimed!`);this.versions.add(e),this._max=Math.max(this.max,e)}},{key:"version",value:function(e){if(e<0)throw new c("Versions must by greater than or equal to zero!");return e}},{key:"validate",value:function(){for(var e=0;e<=this.max;++e)if(!this.versions.has(e))throw new d(`Schema version #${e} is missing!`)}},{key:"max",get:function(){return this._max}}]),e}();t.default=f},74198:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NotInitializedError=t.NoSuchTableError=t.NoSuchDatabaseError=t.NoFallbackError=t.DuplicateTableError=t.DuplicateDatabaseError=t.AlreadyInitializedError=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(93913)),u=a(n(34575)),l=a(n(2205)),c=a(n(99842)),d=a(n(65957)),f=a(n(7405)),p=a(n(79011)),h=a(n(59888)),_=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="AlreadyInitializedError",e}return n}((0,d.default)(Error));t.AlreadyInitializedError=_;var v=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="DuplicateDatabaseError",e}return n}((0,d.default)(Error));t.DuplicateDatabaseError=v;var m=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="DuplicateTableError",e}return n}((0,d.default)(Error));t.DuplicateTableError=m;var g=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="NoFallbackError",e}return n}((0,d.default)(Error));t.NoFallbackError=g;var y=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="NoSuchDatabaseError",e}return n}((0,d.default)(Error));t.NoSuchDatabaseError=y;var E=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="NoSuchTableError",e}return n}((0,d.default)(Error));t.NoSuchTableError=E;var S=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="NotInitializedError",e}return n}((0,d.default)(Error));t.NotInitializedError=S;var b=function(){function e(t){(0,u.default)(this,e),this.tables=new Map,this.views=new Map,this.state=1,this.versions=new p.default,this.errorHandlers=new Map,this._database=t}var t;return(0,s.default)(e,[{key:"addErrorHandler",value:function(e,t){var n=(new e).name;this.errorHandlers.set(n,t)}},{key:"add",value:function(e){if(this.tables.has(e))throw new m(`Table "${e}" already added. Reuse the definition.`);var t=new h.default(e,this.versions);return this.tables.set(e,t),t}},{key:"_getBackingDB",value:function(){return this._database}},{key:"_unsafeGetOrCreateView",value:function(e){if(this.views.has(e))return this.views.get(e);var t=this._database.view(e.name,e.rowview,e.shouldEnablePropFilter,e.shouldUseDbMsgEncKeyForEncryptedCol);return this.views.set(e,t),t}},{key:"_guardInitializedThunk",value:function(e){var t=this;return function(){if(3&t.state)throw new S("Storage must be initialized before accessing a table!");return e()}}},{key:"table",value:function(e){var t=this,n=this.tables.get(e);if(!n)throw new E(`Unknown table ${e} requested, ensure table is defined!`);if(!this._getBackingDB())throw new y(`Unable to find associated database with table "${e}"`);return new f.default(this._guardInitializedThunk((function(){return t._unsafeGetOrCreateView(n)})),this.errorHandlers)}},{key:"lock",value:function(e,t){var n=this;if(3&this.state)return r.reject(new S("Initialize storage before attempting to lock tables!"));for(var a=0;a<e.length;++a)if(!this.tables.has(e[a]))return r.reject(new E(`Requested lock of unknown table "${e[a]}"`));var i=e.map((function(e){var t=n.tables.get(e);if(t)return t;throw new E(`Requested lock of unknown table "${e}"`)})).map((function(e){return n._unsafeGetOrCreateView(e)}));return this._getBackingDB().transact(e,(function(){return t(i)}))}},{key:"_getUpgraderForCurrentVersion",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].maxVersion===t){var r=e[n].upgraders.get(t);if(r)return{name:e[n].name,callback:r}}}},{key:"_applyDatabaseVersion",value:function(e,t,n){var r=t,a=n.map((function(e){return e.schema(r)})).filter(Boolean);return e.initialize(t,a,this._getUpgraderForCurrentVersion(n,r),this.errorHandlers)}},{key:"initialize",value:(t=(0,o.default)(i.default.mark((function e(){var t,n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(4&this.state)){e.next=2;break}throw new _("Storage instance has already been initialized");case 2:if(this.versions.validate(),!this._database){e.next=8;break}return e.next=6,this._database.available();case 6:e.next=9;break;case 8:throw new y(`"${this._database.constructor.name}" failed availability check!`);case 9:if(t=Array.from(this.tables.values()),n=this._getBackingDB(),t&&n){e.next=13;break}return e.abrupt("return");case 13:r=0;case 14:if(!(r<=this.versions.max)){e.next=20;break}return e.next=17,this._applyDatabaseVersion(n,r,t);case 17:r++,e.next=14;break;case 20:return e.next=22,n.open();case 22:this.state=4;case 23:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"purge",value:function(){return this.state=2,this.views=new Map,this._getBackingDB().reset().then((function(){}))}}]),e}();t.default=b},59888:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(41143)),u=n(57584),l=n(37026);function c(e){return e}var d=function(){function e(t,n){(0,i.default)(this,e),this.maxVersion=-1,this.versions=new Map,this.upgraders=new Map,this.shouldEnablePropFilter=!0,this.shouldUseDbMsgEncKeyForEncryptedCol=!1,this.name=t,this.versionManager=n}return(0,o.default)(e,[{key:"version",value:function(e,t,n){this.versionManager.claim(e),(0,s.default)(!this.versions.has(e),`Table "${this.name}" already has version #${+e} defined!`),(0,s.default)(e>this.maxVersion,`Versions for table ${this.name} must be defined in order`),this.maxVersion=e;var r=this.schema(e)||(0,u.emptySchema)(this.name),a=(0,l.sortMutations)(t).reduce((function(e,t){return t.validate(e),t.apply(e)}),(0,u.cloneSchema)(r));return this.versions.set(e,(0,u.freezeSchema)(a)),this.upgraders.set(e,n),this}},{key:"delete",value:function(e){this.versionManager.claim(e),(0,s.default)(!this.versions.has(e),`Table "${this.name}" already has version #${+e} defined!`),(0,s.default)(e>this.maxVersion,`Versions for table ${this.name} must be defined in order`),this.maxVersion=e;var t=this.schema(e)||(0,u.emptySchema)(this.name),n=(0,a.default)((0,a.default)({},t),{},{deleted:!0});return this.versions.set(e,(0,u.freezeSchema)(n)),this}},{key:"view",value:function(e){return this.rowview=e,this}},{key:"enablePropFilter",value:function(e){return this.shouldEnablePropFilter=e,this}},{key:"useDbMsgEncKeyForEncryptedCol",value:function(e){return this.shouldUseDbMsgEncKeyForEncryptedCol=e,this}},{key:"schema",value:function(e){var t=this.versions.get(e);if(t)return t;var n=Array.from(this.versions.keys()).map(c).sort((function(e,t){return e-t})).filter((function(t){return t<e})).pop();return n||0===n?this.versions.get(n)||(0,u.emptySchema)(this.name):null}}]),e}();t.default=d},57130:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"IdbMetaInfoTable",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"metaInfoPrimaryIndex",{enumerable:!0,get:function(){return s.metaInfoPrimaryIndex}}),Object.defineProperty(t,"metaInfoDateIndex",{enumerable:!0,get:function(){return s.metaInfoDateIndex}}),Object.defineProperty(t,"metaInfoSizeIndex",{enumerable:!0,get:function(){return s.metaInfoSizeIndex}}),Object.defineProperty(t,"IdbArrayBufferTable",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"storePrimaryIndex",{enumerable:!0,get:function(){return u.storePrimaryIndex}}),Object.defineProperty(t,"storeDataIndex",{enumerable:!0,get:function(){return u.storeDataIndex}}),t.initialize=void 0;var i=a(n(96486)),o=n(94194),s=r(n(20077)),u=r(n(44517)),l=i.default.once((function(){return(0,o.getStorage)().initialize()}));t.initialize=l},44517:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.storeDataIndex=t.storePrimaryIndex=void 0;var a=r(n(17905)),i=n(94194),o=r(n(55664)),s="id";t.storePrimaryIndex=s;var u="data";t.storeDataIndex=u;var l="lru-media-array-buffer";(0,i.getStorage)().add(l).version((0,i.getStorage)().versions.version(0),[new o.default(s),new a.default(u)]).view((function(e){return{id:e.id,data:e.data}}));var c=(0,i.getStorage)().table(l);t.default=c},20077:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.metaInfoSizeIndex=t.metaInfoDateIndex=t.metaInfoPrimaryIndex=void 0;var a=r(n(17905)),i=r(n(42061)),o=n(94194),s=r(n(55664));t.metaInfoPrimaryIndex="id";var u="timestamp";t.metaInfoDateIndex=u;var l="size";t.metaInfoSizeIndex=l;var c="lru-media-meta-info";(0,o.getStorage)().add(c).version((0,o.getStorage)().versions.version(1),[new s.default("id"),new a.default(u),new i.default(u)]).version((0,o.getStorage)().versions.version(2),[new a.default(l)]).view((function(e){return{id:e.id,timestamp:e.timestamp,size:e.size||0}}));var d=(0,o.getStorage)().table(c);t.default=d},94194:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=p,t.getStorage=function(){return(0,s.default)(null!=f,"[lru-media-storage-idb] Storage should be created first before being accessed"),f},t.destroyStorage=function(){return h.apply(this,arguments)},t.DATABASE_NAME=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(86128)),s=r(n(41143)),u=r(n(17435)),l=r(n(74198)),c=r(n(14054)),d="lru-media-storage-idb";t.DATABASE_NAME=d;var f=null;function p(){var e=new u.default(d);(f=new l.default(e)).addErrorHandler(o.default.AbortError,(function(e){e.message.includes("QuotaExceededError")&&c.default.trigger("storage_not_enough_space")}))}function h(){return(h=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=f){e.next=2;break}throw new Error("[lru-media-storage-idb] Storage should be created first before being destroyed");case 2:return e.prev=2,e.next=5,f.purge();case 5:return e.prev=5,f=null,e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})))).apply(this,arguments)}p()},82808:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getABPropConfigs=function(){return(0,c.initializeWithoutGKs)().then((function(){return(0,u.getTable)().all().then((function(e){return e}))}))},t.parseConfigValue=f,t.getConfigValue=function(e){var t=l.ABPropConfigs[e];if(null==t)return __LOG__(4,!0,new Error,!0)`invalid ABProps config name`,SEND_LOGS("invalid ABProps config name: "+e),r.reject(new Error("invalid ABProps config name"));var n=(0,s.default)(t,3),a=n[0],i=n[1],o=n[2];return(0,c.initializeWithoutGKs)().then((function(){return(0,u.getTable)().get(String(a)).then((function(e){return e?f(e.configValue,i,o):o}))}))},t.updateABPropConfigs=function(e){var t=[];return e.forEach((function(e,n){t.push({configCode:String(n),configValue:e.configValue,configExpoKey:e.configExpoKey})})),(0,d.getStorage)().lock(["abpropConfigs"],function(){var e=(0,o.default)(i.default.mark((function e(n){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.default)(n,1),a=r[0],e.next=3,a.clear();case 3:return e.next=5,a.bulkCreate(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())};var i=a(n(87757)),o=a(n(48926)),s=a(n(63038)),u=n(39001),l=n(2459),c=n(99417),d=n(28367);function f(e,t,n){return null==e||null==t?n:"bool"===t?"1"===e||"True"===e||"true"===e:"int"===t?parseInt(e,10):"float"===t?parseFloat(e):e}},22252:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addActiveMessageRange=function(){return m.apply(this,arguments)},t.removeActiveMessageRange=function(e,t){return _.removeRange(e,t)},t.updateActiveMessageRange=function(e){return _.createOrReplaceRange(e)},t.bulkUpdateActiveMessageRanges=function(e){return _.bulkCreateOrReplaceRanges(e)},t.getActiveMessageRanges=function(e){return _.getRangesForChat(e)},t._cache=void 0;var a,i=r(n(81109)),o=r(n(87757)),s=r(n(319)),u=r(n(48926)),l=r(n(91080)),c=n(99417),d=n(43129),f=n(53939),p=n(29392),h=new Map,_={reset:function(){h=new Map},removeRange:function(e,t){var n;return null===(n=h.get(e))||void 0===n||n.delete(t),(0,c.getActiveMessageRangesTable)().remove([e,t])},createOrReplaceRange:function(e){var t=h.get(e.chatId);return null==t&&(t=new Map,h.set(e.chatId,t)),t.set(e.action,e),(0,c.getActiveMessageRangesTable)().createOrReplace(e)},bulkCreateOrReplaceRanges:function(e){return e.forEach((function(e){var t=h.get(e.chatId);null==t&&(t=new Map,h.set(e.chatId,t)),t.set(e.action,e)})),(0,c.getActiveMessageRangesTable)().bulkCreateOrReplace(e)},getRangesForChat:(a=(0,u.default)(o.default.mark((function e(t){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=h.get(t))){e.next=7;break}return e.next=4,(0,c.getActiveMessageRangesTable)().anyOf(["chatId"],[t]);case 4:r=e.sent,n=new Map(r.map((function(e){return[e.action,e]}))),h.set(t,n);case 7:return e.abrupt("return",(0,s.default)(n.values()));case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})};function v(e,t){switch(e){case"archive":return{action:"archive",actionValue:(0,l.default)(t.archiveChatAction,"syncActionValue.archiveChatAction")};case"markChatAsRead":return{action:"markChatAsRead",actionValue:(0,l.default)(t.markChatAsReadAction,"syncActionValue.markChatAsReadAction")};case"clearChat":return{action:"clearChat",actionValue:(0,l.default)(t.clearChatAction,"syncActionValue.clearChatAction")};default:throw new Error(`unsupported action for message ranges: ${String(e)}`)}}function m(){return(m=(0,u.default)(o.default.mark((function e(t,n,r){var a,s,u,l,c,h,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,f.decodeProto)(p.SyncActionValueSpec,r),u=v(n,s),l=u.actionValue,c=(null===(a=l.messageRange)||void 0===a?void 0:a.messages)||[],e.next=5,(0,d.filterReceivedMessagesInRange)(t,c);case 5:return h=e.sent,m=Math.max(0,c.length-h.length),e.abrupt("return",_.createOrReplaceRange((0,i.default)((0,i.default)({chatId:t},v(n,s)),{},{remainingMessages:m})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t._cache=_},41032:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBlocklist=function(){var e=r.resolve([]);return o.default.supportsFeature(o.default.F.MD_BACKEND)?e=(0,s.getTable)().all().then((function(e){return e.map((function(e){return(0,l.createUserWid)(e.id)}))})):e},t.updateBlocklist=function(e){var t=r.resolve(!1);if(o.default.supportsFeature(o.default.F.MD_BACKEND)&&e){var n=e.map((function(e){return{id:e.toString()}}));return t=(0,u.getStorage)().lock(["blocklist"],(function(e){var t=(0,i.default)(e,1)[0];return t.clear().then((function(){return t.bulkCreate(n).then((function(){return r.resolve(!0)}))}))}))}return t};var i=a(n(63038)),o=a(n(22021)),s=n(79874),u=n(28367),l=n(75793)},48399:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getChatMeta=function(){return h.apply(this,arguments)},t.updateChatForMarkAsReadSync=function(e){return(0,u.getStorage)().lock(["chat"],function(){var t=(0,s.default)(i.default.mark((function t(n){var r,a,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,o.default)(n,1),a=r[0],t.next=3,a.get(e);case 3:if(null!=(s=t.sent)){t.next=7;break}return __LOG__(4,void 0,new Error)`updateMarkChatAsReadSync: could not find chat with id ${e}`,t.abrupt("return");case 7:if(-1!==s.unreadCount){t.next=9;break}return t.abrupt("return",a.createOrMerge(e,{id:e,unreadCount:0,unreadMentionsOfMe:[]}));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())},t.markMessageAndChatAsRead=function(e,t){return(0,u.getStorage)().lock(["message","chat"],function(){var n=(0,s.default)(i.default.mark((function n(a){var s,u,l,h,_,v,m;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=(0,o.default)(a,2),s[0],u=s[1],n.next=3,(0,d.getTable)().equals(["from","pendingReadReceipt"],[t,1],{shouldDecrypt:!1});case 3:return l=n.sent,h=[],_=0,v=[],l.forEach((function(t){if(null==e||null!=t.rowId&&t.rowId>e){if(_++,(0,p.getABPropConfigValue)("group_catch_up")&&(0,f.hasMentionOfMe)(t)){var n={id:t.id,timestamp:t.t};v.push(n)}}else h.push({id:t.id,ack:Math.max(t.ack,c.default.ACK.READ),pendingReadReceipt:null})})),m=[u.createOrMerge(t,{id:t,unreadCount:_,unreadMentionsOfMe:v})],h.length>0&&m.push((0,d.getTable)().bulkCreateOrMerge(h)),n.next=13,r.all(m);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}())};var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=n(28367),l=n(8985),c=a(n(34263)),d=n(322),f=n(81452),p=n(4976);function h(){return(h=(0,s.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.getTable)().get(t.toString());case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",{unreadCount:n.unreadCount,timestamp:n.t});case 5:return e.abrupt("return",r.reject(new Error("Failed to find row in chat table with id:"+t.toString())));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1342:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setNotAddressBookContacts=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,s.getStorage)().lock(["contact"],(function(){var t=e.map((function(e){return{id:e,isAddressBookContact:0,name:void 0}}));return(0,o.getContactTable)().bulkCreateOrMerge(t)}));return r.resolve()};var i=a(n(22021)),o=n(43883),s=n(28367)},23757:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return y.apply(this,arguments)},t.createChatAndSystemMsgsWithIncommingMsgs=function(){return E.apply(this,arguments)};var a=r(n(63038)),i=r(n(87757)),o=r(n(81109)),s=r(n(48926)),u=n(28367),l=n(8985),c=r(n(26671)),d=r(n(48629)),f=r(n(54654)),p=n(39888),h=n(52300),_=r(n(63056)),v=n(6603);function m(e,t){if(!_.default.bspSystemMessageEnabled)return(0,h.genEncryptNotificationMsg)(e);switch((0,v.getReducedPrivacyMode)(t)){case v.ReducedPrivacyMode.E2EE:return(0,h.genEncryptNotificationMsg)(e);case v.ReducedPrivacyMode.BSP:return(0,h.genTealNotificationTemplateMsg)(e,"biz_privacy_mode_init_bsp");case v.ReducedPrivacyMode.FB:return(0,h.genTealNotificationTemplateMsg)(e,"biz_privacy_mode_init_fb")}}function g(e){var t,n=null===(t=e.bizInfo)||void 0===t?void 0:t.verifiedName;return null==n?null:e.biz&&!0===n.isApi?n.privacyMode:null}function y(){return(y=(0,s.default)(i.default.mark((function e(t){var n,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wid,r=new f.default({id:n}),c.default.add(r),e.next=5,(0,l.getTable)().create((0,o.default)((0,o.default)({},r.toJSON()),{},{id:n.toString()}));case 5:return a=m(n,g(t)),e.next=8,(0,p.handleSingleMsgMD)(a.from,a);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,s.default)(i.default.mark((function e(t,n){var r,l,h,g,y,E,S;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.default.bspSystemMessageEnabled){e.next=2;break}return e.abrupt("return");case 2:if(null!=(l=n.reduce((function(e,t){return null==e||e.t<t.t?t:e}),null))){e.next=5;break}return e.abrupt("return");case 5:return h=new f.default({id:t}),c.default.add(h),e.next=9,(0,u.getStorage)().lock(["chat"],function(){var e=(0,s.default)(i.default.mark((function e(n){var r,s,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,a.default)(n,1),s=r[0],u=t.toString(),e.next=4,s.get(u);case 4:if(!e.sent){e.next=9;break}__LOG__(3)`createChatAndSystemMsgsWithIncommingMsgs: Chat already exist ${""}`,e.next=11;break;case 9:return e.next=11,s.create((0,o.default)((0,o.default)({},h.toJSON()),{},{id:u}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());case 9:return g=l.privacyModeWhenSent,y=null===(r=d.default.get(t))||void 0===r?void 0:r.privacyMode,E=(0,v.latestPrivacyMode)(g,y),S=m(t,E),e.next=15,(0,p.handleSingleMsgMD)(S.from,S);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},38812:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasDevice=function(e,t){return l.default.supportsFeature(l.default.F.MD_BACKEND)?t===u.default.DEVICE.PRIMARY_DEVICE?r.resolve(!0):_([e.user]).then((function(e){var n=(0,s.default)(e,1)[0];return!!n&&!!n.devices.includes(t)})):r.resolve(!1)},t.getDeviceIds=_,t.doesDeviceHashMatch=function(e,t){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return null==t?r.resolve(!0):_([e.user]).then(function(){var e=(0,o.default)(i.default.mark((function e(n){var r,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map((function(e){return e?e.devices.map((function(t){return(0,p.createDeviceWidFromUserAndDevice)(e.id,t)})):[]})),a=c.default.flatMap(r,(function(e){return e})),e.next=4,(0,h.phashV2)(a);case 4:return o=e.sent,e.abrupt("return",o!==t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.resolve(!1)},t.getMyDeviceList=function(){return v.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(63038)),u=a(n(34263)),l=a(n(22021)),c=a(n(96486)),d=n(71701),f=n(68239),p=n(75793),h=n(45975);function _(e){return l.default.supportsFeature(l.default.F.MD_BACKEND)?(0,f.getTable)().bulkGet(e).then((function(e){return e.map((function(e){if(e&&!e.deleted){var t=e.devices.map((function(e){return e.id}));return{id:e.id,devices:t}}return null}))})):r.reject(new Error("getDeviceIds: not supported without model storage and md backend"))}function v(){return(v=(0,o.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,d.assertGetMe)(),e.next=3,(0,f.getTable)().get(t.user);case 3:if((n=e.sent)&&!n.deleted){e.next=6;break}throw new Error("syncd: cannot find my device list");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},29364:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.persistGroupInviteV4Msg=function(e,t){if(u.default.supportsFeature(u.default.F.MD_BACKEND))return(0,l.getTable)().createOrMerge(e,t);return r.resolve()},t.revokeGroupInvites=function(){return c.apply(this,arguments)};var i=a(n(87757)),o=a(n(81109)),s=a(n(48926)),u=a(n(22021)),l=n(51846);function c(){return(c=(0,s.default)(i.default.mark((function e(t,n,a,s){var c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.default.supportsFeature(u.default.F.MD_BACKEND)){e.next=6;break}return e.next=3,(0,l.getTable)().equals(["from","to","groupId"],[t,n,a]).then((function(e){return e.filter((function(e){return!e.expired&&e.expiration<=s}))}));case 3:return c=e.sent,(0,l.getTable)().bulkCreateOrReplace(c.map((function(e){return(0,o.default)((0,o.default)({},e),{},{expired:!0})}))),e.abrupt("return",c);case 6:return e.abrupt("return",r.resolve(null));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},75040:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.persistGroupMetadata=function(e,t){if(u.default.supportsFeature(u.default.F.MD_BACKEND))return(0,l.getTable)().merge(e.toString(),t);return r.resolve()},t.getGroupMetadataFromStorage=function(e){if(u.default.supportsFeature(u.default.F.MD_BACKEND))return(0,c.getStorage)().lock(["group-metadata","participant"],function(){var t=(0,s.default)(i.default.mark((function t(n){var r,a,s,l,c,f,p;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,o.default)(n,2),a=r[0],s=r[1],t.next=3,a.get(e.toString());case 3:if(!(l=t.sent)){t.next=12;break}return t.next=7,s.get(e.toString());case 7:if(!(c=t.sent)||!c.deviceSyncComplete){t.next=12;break}return __LOG__(2,void 0,void 0,void 0,["groups"])`found groupMetadata in storage for group id ${e.toString()}`,p=new Set(c.admins),t.abrupt("return",{id:e,owner:l.owner&&(0,d.createWid)(l.owner),creation:l.creation,desc:l.desc,descId:l.descId,descOwner:l.descOwner&&(0,d.createWid)(l.descOwner),descTime:l.descTime,restrict:l.restrict||!1,announce:l.announce||!1,noFrequentlyForwarded:l.noFrequentlyForwarded||!1,ephemeralDuration:l.ephemeralDuration||0,participants:null===(f=c.participants)||void 0===f?void 0:f.map((function(e){return{id:(0,d.createWid)(e),isAdmin:p.has(e),isSuperAdmin:!1}})),support:u.default.supportsFeature(u.default.F.SUPPORT)&&!0===l.support});case 12:return __LOG__(2,void 0,void 0,void 0,["groups"])`did not find groupMetadata in storage for group id ${e.toString()}`,t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return r.resolve(null)};var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=a(n(22021)),l=n(38215),c=n(28367),d=n(75793)},72702:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getNextUnProcessedNotification=_,t.updateCurrentlyProcessed=v,t.markChunkForReuploadPending=function(e){return f.delete(e),(0,c.getTable)().merge(e,{reuploadPending:!0})},t.getByChunkOrderNumber=function(e,t){var n;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(n=(0,c.getTable)().equals(["chunkOrder","syncType"],[e,t])))return r.reject(new Error("getNotificationForChunk history sync notification: not supported for non MD"))}else n=r.reject("getNotificationForChunk for history sync notification: not supported without md backend");return n},t.addNotification=m,t.enqueueNotification=function(){return g.apply(this,arguments)},t.fetchNextHitorySyncChunkForProcessing=function(){return y.apply(this,arguments)};var i=a(n(63038)),o=a(n(81109)),s=a(n(87757)),u=a(n(48926)),l=a(n(22021)),c=n(81971),d=n(79583),f=new Set;function p(){return h.apply(this,arguments)}function h(){return(h=(0,u.default)(s.default.mark((function e(t,n,r){var a,o,u,l,c;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=(0,d.getLastHistorySycnedChunk)())&&1!==n&&0!==n){e.next=3;break}return e.abrupt("return",!0);case 3:if(o=a.split("_"),u=(0,i.default)(o,2),l=u[0],c=u[1],l!==`${t}`||c!==""+(n-1)){e.next=8;break}return e.abrupt("return",!0);case 8:if(l!==`${t}`||c!==`${n}`){e.next=13;break}return __LOG__(2,void 0,void 0,void 0,["History sync"])`isPreviousChunkProcessed: next chunk already processed ${t}_${n}, last processed: ${a} `,e.next=12,v(r);case 12:return e.abrupt("return",!1);case 13:return __LOG__(2,void 0,void 0,void 0,["History sync"])`isPreviousChunkProcessed returned false for ${t}_${n}, last processed: ${a} `,e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){var e;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(!(e=(0,c.getTable)().equals(["processed"],0,{shouldDecrypt:!1}).then(function(){var e=(0,u.default)(s.default.mark((function e(t){var n,r,a,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.filter((function(e){return!f.has(e.msgKey)&&!e.reuploadPending})).sort((function(e,t){return e.syncType<t.syncType?1:e.syncType>t.syncType?-1:e.syncType===t.syncType&&null!=e.chunkOrder&&null!=t.chunkOrder?e.chunkOrder-t.chunkOrder:0})),a=r.length>0?r[0]:void 0,null!=(null===(n=a)||void 0===n?void 0:n.chunkOrder)){e.next=5;break}return __LOG__(2,void 0,void 0,void 0,["History sync"])`getNextUnProcessedNotification chunkOrder is null, ${null===(i=a)||void 0===i?void 0:i.msgKey}`,e.abrupt("return",void 0);case 5:if(!a){e.next=14;break}return e.next=8,p(a.syncType,a.chunkOrder,a.msgKey);case 8:if(e.sent){e.next=11;break}return e.abrupt("return",void 0);case 11:return e.next=13,(0,c.getTable)().postflightDecryptSingleRecord(a);case 13:a=e.sent;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())))return r.reject(new Error("getNextUnProcessed history sync notification: not supported for non MD"))}else e=r.reject("getNextUnProcessed for history sync notification: not supported without md backend");return e}function v(e){var t;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){if(f.delete(e),!(t=(0,c.getTable)().remove(e)))return r.reject(new Error("updateCurrentProcessed history sync notification: not supported for non MD"))}else t=r.reject("updateCurrentProcessed for history sync notification: not supported without md backend");return t.catch((function(e){__LOG__(2,void 0,void 0,void 0,["History sync"])`updateCurrentlyProcessed failed with error ${e}`}))}function m(e){var t;if(l.default.supportsFeature(l.default.F.MD_BACKEND)){var n=e.downloadOptions.mediaKey,a=e.downloadOptions.directPath,i=e.downloadOptions.filehash;e.downloadOptions.mediaKey="",e.downloadOptions.directPath="",e.downloadOptions.filehash="";var s=(0,o.default)((0,o.default)({},e),{},{chunkEncryptionKey:n,directPath:a,filehash:i});if(e.processed=0,!(t=(0,c.getTable)().createOrMerge(e.msgKey,s)))return r.reject(new Error("add history sync notification: not supported for non MD"))}else t=r.reject("add history sync notification: not supported without md backend");return t}function g(){return(g=(0,u.default)(s.default.mark((function e(t){var n,r=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.next=3,m(t);case 3:n&&f.add(t.msgKey);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,u.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.size>0)){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,_();case 4:return(t=e.sent)&&(t.downloadOptions.mediaKey=t.chunkEncryptionKey,delete t.chunkEncryptionKey,t.downloadOptions.directPath=t.directPath||t.downloadOptions.directPath,delete t.directPath,t.downloadOptions.filehash=""===t.downloadOptions.filehash?t.filehash:t.downloadOptions.filehash,delete t.filehash,f.add(t.msgKey)),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5841:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryLocalLabelAssociation=s,t.default=function(){return u.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(8498);function s(e){return(0,o.getTable)().anyOf(["associationId","type"],e.map((function(e){return[e.associationId,e.type]})))}function u(){return(u=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:return n=e.sent,e.next=5,(0,o.getTable)().bulkRemove(n.map((function(e){return[e.labelId,e.associationId,e.type]})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},45601:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceUpdateLock=function(e,t){if(!o.default.supportsFeature(o.default.F.MD_BACKEND))return r.reject(new Error("This call is only supported in MD mode"));r.resolve();var n=["participant","device-list"];t&&(n=[].concat((0,i.default)(n),["message"]));return(0,s.getStorage)().lock(n,(function(t){return e(t)}))};var i=a(n(319)),o=a(n(22021)),s=n(28367)},4779:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createOrMergeReceiptRecords=function(e){if(f.default.supportsFeature(f.default.F.MD_BACKEND)){var t=new Map;return e.forEach((function(e){var n,r=e.msgKey,a=e.receiverId,i=(0,m.toUserWid)(a).toString(),o=r.toString(),s=`${o},${i}`,u=null!==(n=a.device)&&void 0!==n?n:p.default.DEVICE.PRIMARY_DEVICE,l=t.get(s);l?l.deviceNotDelivered.push(u):t.set(s,{msgKey:o,receiverUserJid:i,deviceDelivered:[],deviceNotDelivered:[u]})})),(0,_.getStorage)().lock(["message-info"],function(){var e=(0,c.default)(o.default.mark((function e(n){var r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.default)(n,1),a=r[0],i=Array.from(t.values()).map((function(e){return[e.msgKey,e.receiverUserJid]})),e.next=4,a.anyOf(["msgKey","receiverUserJid"],i);case 4:return e.sent.forEach((function(e){var n=`${e.msgKey},${e.receiverUserJid}`,r=t.get(n);r&&t.set(n,(0,u.default)((0,u.default)({},e),{},{deviceNotDelivered:[].concat((0,s.default)(e.deviceNotDelivered),(0,s.default)(r.deviceNotDelivered))}))})),e.abrupt("return",(0,g.getTable)().bulkCreateOrReplace(Array.from(t.values())));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())}return r.reject(new Error("createOrMergeReceiptRecords: not supported for non MD"))},t.updateReceiptRecords=function(e,t,n,a,i){if(f.default.supportsFeature(f.default.F.MD_BACKEND)){var o=b[e],s=(0,m.toUserWid)(n).toString(),u=n.device||0;return o?function(e,t,n,a,i,o){if(0===i.length)return r.resolve();return(0,_.getStorage)().lock(["message-info"],(function(r){var s=(0,l.default)(r,1)[0],u=i.map((function(e){return[e,n]}));return s.bulkGet(u).then((function(r){var u=[];return i.forEach((function(i,s){var l=r[s];if(!l){var c;__LOG__(2)`updateReceiptRecords: got receipt for peer msg ${i},${n}`;var f=(c={msgKey:i,receiverUserJid:n},(0,d.default)(c,e,t),(0,d.default)(c,"deviceDelivered",[]),(0,d.default)(c,"deviceNotDelivered",[]),c);return y.default.bspSystemMessageEnabled&&e===S.DELIVERY&&null!=o&&(f.deliveryPrivacyMode=o),void u.push(f)}if(e!==b[E.INACTIVE]){var p=l[e];(null==l[e]||p>t)&&(l[e]=t),y.default.bspSystemMessageEnabled&&e===S.DELIVERY&&null!=o&&(l.deliveryPrivacyMode=o)}l.deviceNotDelivered.length>0&&(l.deviceDelivered.push(a),l.deviceDelivered=l.deviceDelivered.filter((function(e,t,n){return n.indexOf(e)===t})),l.deviceNotDelivered=l.deviceNotDelivered.filter((function(e){return e!==a}))),u.push(l)})),s.bulkCreateOrReplace(u)}))}))}(o,t,s,u,a,i):r.reject(new Error(`updateReceiptRecords: not supported ack type ${e}`))}return r.reject(new Error("updateReceiptRecords: not supported for non MD"))},t.isRetryEligible=function(e,t,n,a){if(f.default.supportsFeature(f.default.F.MD_BACKEND)){var i=(0,m.toUserWid)(t).toString(),o=t.device||0;return(0,g.getTable)().get([e.toString(),i]).then((function(r){return r?r.deviceNotDelivered.includes(o)?null!=n&&a>=n?w.ELIGIBLE:null!=t.device&&t.device!==p.default.DEVICE.PRIMARY_DEVICE||null!=r.delivery?w.INELIGIBLE_CHANGED_IDENTITY:w.ELIGIBLE:(__LOG__(2)`MessageInfoStore: ${e.toString()},${i}:${o} has been delivered`,w.INELIGIBLE_ALREADY_DELIVERED):(__LOG__(2)`MessageInfoStore: missing record for ${e.toString()},${i}`,w.INELIGIBLE_RECORD_MISSING)}))}return r.resolve(w.INELIGIBLE_NOT_MD)},t.queryMsgInfo=function(e){if(f.default.supportsFeature(f.default.F.MD_BACKEND)){var t=String(e);return(0,h.getTable)().get(t).then((function(t){var n=t?t.count:null;return(0,g.getTable)().equals(["msgKey"],e.toString()).then((function(t){var r={delivery:[],deliveryRemaining:0,played:[],playedRemaining:0,read:[],readRemaining:0},a=0;t.forEach((function(e){var t=(0,m.createWid)(e.receiverUserJid);if(!(0,v.getMeUser)().equals(t)){!function(e){var t=e.read;null!=t&&(null==e.delivery||e.delivery>t)&&(e.delivery=t)}(e);for(var n=0;n<T.length;n++){var i=T[n],o=e[i];if(null!=o){r[i].push({id:t,t:o});break}}y.default.bspSystemMessageEnabled&&null!=e.delivery&&null!=e.deliveryPrivacyMode&&(r.deliveryPrivacyMode=e.deliveryPrivacyMode),a+=1}}));var i=null!=n&&0!==n?n:a;return __LOG__(2)`queryMsgInfo: ${e}, ack count: ${n}, receiver: ${i},
played: ${r.played.length}, read: ${r.read.length}, delivery: ${r.delivery.length}`,r.playedRemaining=i-r.played.length,r.readRemaining=r.playedRemaining-r.read.length,r.deliveryRemaining=r.readRemaining-r.delivery.length,r}))}))}return r.reject(new Error("queryMsgInfo: not supported without model storage"))},t.RetryEligibilityResult=void 0;var i,o=a(n(87757)),s=a(n(319)),u=a(n(81109)),l=a(n(63038)),c=a(n(48926)),d=a(n(59713)),f=a(n(22021)),p=(a(n(12717)),a(n(34263))),h=n(322),_=n(28367),v=n(71701),m=n(75793),g=n(35566),y=a(n(63056)),E=p.default.ACK,S=p.default.ACK_STRING,b=(i={},(0,d.default)(i,E.RECEIVED,S.DELIVERY),(0,d.default)(i,E.READ,S.READ),(0,d.default)(i,E.PLAYED,S.PLAYED),(0,d.default)(i,E.INACTIVE,S.INACTIVE),i),T=[S.PLAYED,S.READ,S.DELIVERY],w=Object.freeze({ELIGIBLE:"ELGIBLE",INELIGIBLE_RECORD_MISSING:"INELIGIBLE_RECORD_MISSING",INELIGIBLE_ALREADY_DELIVERED:"INELIGIBLE_ALREADY_DELIVERED",INELIGIBLE_NOT_MD:"INELIGIBLE_NOT_MD",INELIGIBLE_CHANGED_IDENTITY:"INELIGIBLE_CHANGED_IDENTITY"});t.RetryEligibilityResult=w},17653:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeMessagesFromHistory=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var t=[];return(0,o.initializeWithoutGKs)().then((function(){if(e.length>0)return(0,u.getTable)().bulkGet(e).then((function(e){e.forEach((function(e){null!=(null==e?void 0:e.rowId)&&t.push(String(e.rowId))}))}))})).then((function(){return(0,c.getStorage)().lock(["message","label-association"],(function(){var t=(0,l.default)(e.map((function(e){return{associationId:e,type:s.LabelAssociationType.Message}})));return r.all([(0,u.getTable)().bulkRemove(e),t])}))})).then((function(){t.length>0&&d.default.purge(t)})).then((function(){})).catch((function(e){throw __LOG__(4,void 0,new Error)`removeMessagesFromHistory: error ${e}`,e}))}return r.resolve()};var i=a(n(22021)),o=n(99417),s=n(8498),u=n(322),l=a(n(5841));n(85485);var c=n(28367),d=a(n(45684))},16115:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.pruneExpiredMessages=function(){if(i.default.supportsFeature(i.default.F.MD_BACKEND)&&l.default.ephemeralPruning)return __LOG__(2,void 0,void 0,void 0,["ephemeral-messages"])`pruneExpiredMessages started`,(0,s.getTable)().lessThan(["expiredTimestamp"],o.default.globalUnixTime(),{shouldDecrypt:!1}).then((function(e){return(0,u.removeMessagesFromHistory)(e.map((function(e){return e.id.toString()}))).then((function(){return __LOG__(2,void 0,void 0,void 0,["ephemeral-messages"])`pruneExpiredMessages completed`,e.length}))}));return r.resolve(0)},t.removeExpiredMessagesFromHistory=function(e){if(i.default.supportsFeature(i.default.F.MD_BACKEND))return(0,u.removeMessagesFromHistory)(e.map((function(e){return e.id.toString()})));return r.resolve()};var i=a(n(22021)),o=a(n(79140)),s=n(322),u=n(17653),l=a(n(63056))},26370:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.msgFindQuery=function(e,t){if(null!=t.label)return r.resolve([]);if("before"===e)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(c.default.supportsFeature(c.default.F.MD_BACKEND)&&e instanceof d.default){var n=e.remote.toString();return(0,p.getTable)().equals(["id"],e.toString()).then((function(a){if(0===a.length)return __LOG__(3)`Anchor message ${e.toString()} does not exist in message table`,r.reject(new _(e.toString()));var i=a[0],o=(0,f.getInChatMsgId)(i.internalId||""),s=Math.max(0,o-t),u=(0,f.craftInternalId)(n,s),l=(0,f.craftInternalId)(n,o);return(0,f.queryChatMessageHelper)(u,l,{lowerInclusive:!0,upperInclusive:!1}).then((function(e){return e.map(f.hydrateMessage)}))}))}return r.resolve([])}(t,t.count);if("after"===e)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;if(c.default.supportsFeature(c.default.F.MD_BACKEND)&&e instanceof d.default){var n=e.remote.toString();return(0,p.getTable)().equals(["id"],e.toString()).then((function(a){if(0===a.length)return __LOG__(3)`Anchor message ${e.toString()} does not exist in message table`,r.reject(new _(e.toString()));var i=a[0],o=(0,f.getInChatMsgId)(i.internalId||""),s=(0,f.craftInternalId)(n,o),u=(0,f.craftInternalId)(n,o+t);return(0,f.queryChatMessageHelper)(s,u,{lowerInclusive:!1,upperInclusive:!0}).then((function(e){return e.map(f.hydrateMessage)}))}))}return r.resolve([])}(t,t.count).catchType(_,(function(){return{status:404}}));if("star"===e){var a=null==t.id?void 0:new d.default(t);return null!=t.chat?function(e,t,n){if(c.default.supportsFeature(c.default.F.MD_BACKEND))return r.resolve().then((function(){if(null!=n)return(0,p.getTable)().get(n.toString())})).then((function(n){var r=null==n?[(0,f.endOfChat)(e),1/0]:[n.internalId,n.isStarred],a=[(0,f.beginningOfChat)(e),0];return(0,p.getTable)().between(["internalId","isStarred"],a,r,{lowerInclusive:!1,upperInclusive:!1,reverse:!0,limit:t}).then((function(e){return e.map(f.hydrateMessage)}))}));return r.resolve([])}(t.chat,t.count,a):function(e,t){if(c.default.supportsFeature(c.default.F.MD_BACKEND))return r.resolve().then((function(){if(null!=t)return(0,p.getTable)().get(t.toString())})).then((function(t){var n=null==t?1/0:t.isStarred;return(0,p.getTable)().between(["isStarred"],0,n,{lowerInclusive:!1,upperInclusive:!1,reverse:!0,limit:e}).then((function(e){return e.map(f.hydrateMessage)}))}));return r.resolve([])}(t.count,a)}if("search"===e){var o={};return t.remote&&(o.remote=t.remote.toString()),t.count&&t.page>=0&&(o.limit=t.count,o.page=t.page),n(45684).default.search(t.searchTerm,o)}if("media"===e){var s=t.remote,u=null==t.id?void 0:new d.default(t);return"document"===t.media?v(s,t.count,t.direction,"isDocMsg",u).then((function(e){return e.map(f.hydrateMessage)})):"url"===t.media?v(s,t.count,t.direction,"hasLink",u).then((function(e){return e.map(f.hydrateMessage)})):r.all([v(s,t.count,t.direction,"isMediaMsg",u).then((function(e){return e.map(f.hydrateMessage)})),v(s,t.count,t.direction,"isDocMsg",u).then((function(e){return e.map(f.hydrateMessage)})),v(s,t.count,t.direction,"hasLink",u).then((function(e){return e.map(f.hydrateMessage)}))]).then((function(e){var t=(0,i.default)(e,3),n=t[0],r=t[1],a=t[2],o=[n,a,r].flat();return{docCount:r.length,linkCount:a.length,mediaCount:n.length,messages:o}}))}return __LOG__(3)`Message query type ${e} not implemented.`,r.reject(new Error(`Message query type ${e} not implemented.`))},t.queryVcard=function(e){if(c.default.supportsFeature(c.default.F.MD_BACKEND))return(0,p.getTable)().equals(["vcardWAids"],e.toString()).then((function(e){return e.map(f.hydrateMessage)}));return r.resolve()},t.getMsgByMsgKey=function(e){if(c.default.supportsFeature(c.default.F.MD_BACKEND)){var t;return t=e instanceof d.default?e.toString():e,(0,p.getTable)().get(t).then((function(e){return e?(0,f.hydrateMessage)(e):null}))}return r.resolve(null)},t.getMsgsByMsgKey=function(e){if(c.default.supportsFeature(c.default.F.MD_BACKEND))return(0,p.getTable)().bulkGet(e).then((function(e){return e.filter(Boolean).map(f.hydrateMessage)}));return r.resolve([])};var i=a(n(63038)),o=a(n(34575)),s=a(n(2205)),u=a(n(99842)),l=a(n(65957)),c=a(n(22021)),d=a(n(5315)),f=n(24003),p=n(322),h=20,_=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(e){var r;return(0,o.default)(this,n),(r=t.call(this,`Anchor message ${e} does not exist in message table`)).name="NoAnchorMessageError",r}return n}((0,l.default)(Error));function v(e,t,n,a,i){return c.default.supportsFeature(c.default.F.MD_BACKEND)?(null==i?r.resolve(void 0):(0,p.getTable)().equals(["id"],i.toString())).then((function(o){if(i&&null!=o&&0===o.length)return __LOG__(3)`Anchor message ${i&&i.toString()} does not exist in message table`,r.reject(new _(i&&i.toString()));var s,u,l=o&&o[0];return"before"===n?(s=(0,f.beginningOfChat)(e),u=null==l?(0,f.endOfChat)(e):(0,f.craftInternalId)(e.toString(),(0,f.getInChatMsgId)(l.internalId||""))):(s=null==l?(0,f.beginningOfChat)(e):(0,f.craftInternalId)(e.toString(),(0,f.getInChatMsgId)(l.internalId||"")),u=(0,f.endOfChat)(e)),(0,p.getTable)().between(["internalId",a],[s,0],[u,1/0],{lowerInclusive:!1,upperInclusive:!1,limit:t})})):r.resolve([])}},69449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"storeMessages",{enumerable:!0,get:function(){return r.storeMessages}}),Object.defineProperty(t,"storeInitialSyncMessages",{enumerable:!0,get:function(){return r.storeInitialSyncMessages}}),Object.defineProperty(t,"starMessages",{enumerable:!0,get:function(){return r.starMessages}}),Object.defineProperty(t,"unstarMessages",{enumerable:!0,get:function(){return r.unstarMessages}}),Object.defineProperty(t,"updateMessage",{enumerable:!0,get:function(){return r.updateMessage}}),Object.defineProperty(t,"processRevokeMsgs",{enumerable:!0,get:function(){return r.processRevokeMsgs}}),Object.defineProperty(t,"processPaymentMessages",{enumerable:!0,get:function(){return r.processPaymentMessages}}),Object.defineProperty(t,"storeRecentAndFullHistSyncMessages",{enumerable:!0,get:function(){return r.storeRecentAndFullHistSyncMessages}}),Object.defineProperty(t,"msgFindQuery",{enumerable:!0,get:function(){return a.msgFindQuery}}),Object.defineProperty(t,"getMsgByMsgKey",{enumerable:!0,get:function(){return a.getMsgByMsgKey}}),Object.defineProperty(t,"getMsgsByMsgKey",{enumerable:!0,get:function(){return a.getMsgsByMsgKey}}),Object.defineProperty(t,"queryVcard",{enumerable:!0,get:function(){return a.queryVcard}}),Object.defineProperty(t,"removeMessagesFromHistory",{enumerable:!0,get:function(){return i.removeMessagesFromHistory}});var r=n(69841),a=n(26370),i=n(17653)},43129:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getLastMessageTimestamp=function(e){return(0,u.getTable)().between(["messageRangeIndex"],(0,f.beginningOfMessageRange)(e,f.MessagePropertyType.IncomingChatMessage),(0,f.endOfMessageRange)(e,f.MessagePropertyType.IncomingChatMessage),{lowerInclusive:!0,reverse:!0,limit:1,shouldDecrypt:!1}).then((function(e){var t;return(0,f.extractC2STimestampFromMessageRangeIndex)(null===(t=e[0])||void 0===t?void 0:t.messageRangeIndex)}))},t.getLastSystemMessageTimestamp=function(e){return(0,u.getTable)().between(["messageRangeIndex"],(0,f.beginningOfMessageRange)(e,f.MessagePropertyType.SystemMessage),(0,f.endOfMessageRange)(e,f.MessagePropertyType.SystemMessage),{lowerInclusive:!0,reverse:!0,limit:1,shouldDecrypt:!1}).then((function(e){var t;return(0,f.extractC2STimestampFromMessageRangeIndex)(null===(t=e[0])||void 0===t?void 0:t.messageRangeIndex)}))},t.getAdditionalMessages=function(){return _.apply(this,arguments)},t.filterReceivedMessagesInRange=function(){return v.apply(this,arguments)},t.timestampComparison=g,t._test=void 0;var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=n(322),l=a(n(5315)),c=a(n(91080)),d=n(6357),f=n(24003),p=n(20290),h=1e3;function _(){return(_=(0,s.default)(i.default.mark((function e(t,n){var a,s,c,p,_,v,g,y=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.length>2&&void 0!==y[2]?y[2]:h,s=(0,u.getTable)().between(["messageRangeIndex"],(0,f.beginningOfMessageRange)(t,f.MessagePropertyType.Outgoing,n),(0,f.endOfMessageRange)(t,f.MessagePropertyType.Outgoing),{reverse:!0,shouldDecrypt:!1}),c=(0,u.getTable)().anyOf(["messageRangeIndex"],[(0,f.beginningOfMessageRange)(t,f.MessagePropertyType.IncomingChatMessage,n),(0,f.beginningOfMessageRange)(t,f.MessagePropertyType.Outgoing,n),(0,f.beginningOfMessageRange)(t,f.MessagePropertyType.Outgoing)],{reverse:!0,shouldDecrypt:!1}),e.next=5,r.all([s,c]).then((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];return n.concat(r).filter((function(e){return-1!==e.ack&&!e.isSendFailure&&!e.mdDowngrade})).map((function(e){var t,n=l.default.fromString(e.id),r=null!==(t=(0,f.extractC2STimestampFromMessageRangeIndex)(e.messageRangeIndex))&&void 0!==t?t:void 0;return{key:(0,d.msgKeyToProtobuf)(n),timestamp:r}}))}));case 5:return p=e.sent,_=m(p,a),v=_.messages,g=_.newLastMessageTimestamp,e.abrupt("return",{messages:v,newLastMessageTimestamp:g});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,s.default)(i.default.mark((function e(t,n){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",n);case 2:return r=n.map((function(e){return(0,d.protobufToMsgKey)((0,c.default)(e.key,"syncActionMessage.key")).toString()})),e.next=5,(0,u.getTable)().bulkGet(r,!1);case 5:return a=e.sent,e.abrupt("return",n.filter((function(e,t){return null!=a[t]})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){var n=[],r=[];if(e.forEach((function(e){null!=e.timestamp?n.push(e):r.push(e)})),n.length<t)return{messages:e};var a=n.sort(g).slice(0,t),i=a[a.length-1];return{messages:a.concat(r),newLastMessageTimestamp:(0,p.numberOrThrowIfTooLarge)((0,c.default)(i.timestamp,"smallestTimestampMessage.timestamp"))}}function g(e,t){var n=[e,t].map((function(e){return(0,p.numberOrThrowIfTooLarge)((0,c.default)(e.timestamp,"syncActionMessage.timestamp"))})),r=(0,o.default)(n,2),a=r[0];return r[1]-a}var y={limitAdditionalMessages:m};t._test=y},69841:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.storeInitialSyncMessages=function(){return x.apply(this,arguments)},t.storeRecentAndFullHistSyncMessages=function(){return U.apply(this,arguments)},t.storeMessages=function(){return F.apply(this,arguments)},t.updateMessage=function(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND)){delete e.t;var t=(0,f.convertToMessageRowType)(e);return(0,y.getTable)().createOrMerge(t.id,t)}return r.resolve()},t.starMessages=function(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return(0,y.getTable)().bulkGet(e).then((function(e){var t=e.filter(Boolean).map((function(e){return{id:e.id,isStarred:e.rowId}}));return(0,y.getTable)().bulkCreateOrMerge(t)}));return r.resolve()},t.unstarMessages=function(e){if(l.default.supportsFeature(l.default.F.MD_BACKEND))return(0,y.getTable)().bulkCreateOrMerge(e.map((function(e){return{id:e,isStarred:void 0}})));return r.resolve()},t.processRevokeMsgs=function(){return G.apply(this,arguments)},t.processPaymentMessages=function(){return B.apply(this,arguments)},t.encryptMultipleMsgs=K,t.storeEncryptedMessage=V,t.storeMessageInTransaction=H;var i=a(n(81109)),o=a(n(87757)),s=a(n(63038)),u=a(n(48926)),l=a(n(22021)),c=n(87847),d=n(81452),f=n(24003),p=n(38210),h=a(n(34263)),_=a(n(79140)),v=n(72687),m=a(n(96486)),g=n(35504),y=n(322),E=n(75793),S=a(n(45684)),b=a(n(7860)),T=a(n(5315)),w=a(n(17894)),A=a(n(60305)),C=a(n(86128)),O=n(68930),M=n(46515),I=n(28367),k=n(76007),P=n(71701),R=n(26370),D=n(29364),N=n(4976),L=1e9;function x(){return(x=(0,u.default)(o.default.mark((function e(t){var n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=8;break}return e.next=3,w.default.waitForFinalDbMsgEncKey();case 3:return n=0,m.default.forOwn(t,(function(e){var t=e.msgs;return n+=t.length})),(a=Object.keys(t).reduce((function(e,n){var r=e.nextRowId,a=L-t[n].msgs.length,i=z(t[n].chatInfo.unreadCount||0,t[n].msgs),o=t[n].msgs.map((function(e){return r++,a++,e.isMdHistoryMsg=!0,Q((0,f.convertToMessageRowType)(e),(0,E.createWid)(n).toString(),!!(0,M.findLink)(e.body,!0),r,a,i.has(String(e.id)))}));return{nextRowId:r,messages:e.messages.concat(o)}}),{nextRowId:L-n,messages:[]})).messages.forEach((function(e){e.type===h.default.MSG_TYPE.GROUPS_V4_INVITE&&(0,D.persistGroupInviteV4Msg)(e.id.toString(),{id:e.id.toString(),from:e.from.toString(),to:e.to.toString(),groupId:e.inviteGrp,expiration:parseInt(e.inviteCodeExp,10),expired:_.default.globalUnixTime()>=parseInt(e.inviteCodeExp,10)})})),e.abrupt("return",(0,I.getStorage)().lock(["message"],(function(e){var t=(0,s.default)(e,1)[0];return t.bulkCreate(a.messages).catch((function(e){if(__LOG__(3)`Error storing MD initial sync messages with error ${e}`,e instanceof C.default.BulkError||e instanceof C.default.ConstraintError)return __LOG__(2,void 0,void 0,void 0,["History sync"])`Retrying initial sync bulk add on error`,t.bulkCreateOrMerge(a.messages);throw e}))})).then((function(){C.default.ignoreTransaction((function(){(0,O.getTable)().bulkCreateOrReplace(a.messages.map((function(e){return{id:String(e.rowId)}}))).then((function(){S.default.index()}))}))})).catch((function(e){__LOG__(3)`Error storing MD initial sync messages with error ${e} after retry`})));case 8:return e.abrupt("return",r.resolve());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=(0,u.default)(o.default.mark((function e(t,n){var a,i,s,u=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>2&&void 0!==u[2]&&u[2],i=u.length>3&&void 0!==u[3]&&u[3],!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=8;break}return t.forEach((function(e){e.type===h.default.MSG_TYPE.GROUPS_V4_INVITE&&(0,D.persistGroupInviteV4Msg)(e.id.toString(),{id:e.id.toString(),from:e.from.toString(),to:e.to.toString(),groupId:e.inviteGrp,expiration:parseInt(e.inviteCodeExp,10),expired:_.default.globalUnixTime()>=parseInt(e.inviteCodeExp,10)})})),e.next=6,K(t,a);case 6:return s=e.sent,e.abrupt("return",V(s,n,i).catch((function(){__LOG__(3)`Error storing MD initial sync messages`})));case 8:return e.abrupt("return",r.resolve());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=(0,u.default)(o.default.mark((function e(t,n){var a,i=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>2&&void 0!==i[2]&&i[2],!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=5;break}return e.next=4,w.default.waitForFinalDbMsgEncKey();case 4:return e.abrupt("return",r.resolve(H(t,n,a)).catchType(C.default.BulkError,(function(){var e=null==n?t[0].id.remote:n,r=t.map((function(t){return Q((0,f.convertToMessageRowType)(t),e.toString(),!!(0,M.findLink)(t.body,!0))}));return(0,y.getTable)().bulkCreateOrMerge(r)})).then((function(){S.default.index()})).catch((function(e){throw __LOG__(3)`Error storing messages`,e})));case 5:return e.abrupt("return",r.resolve());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=(0,u.default)(o.default.mark((function e(t,n){var a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length===n.length){e.next=4;break}return __LOG__(4,!0,new Error,!0)`processRevokeMsgs: old message keys and new message keys has different length `,SEND_LOGS("RevokeMsg-not-found-error"),e.abrupt("return");case 4:if(!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=10;break}return a=[],i=t.length,e.next=9,(0,I.getStorage)().lock(["message"],function(){var e=(0,u.default)(o.default.mark((function e(r){var u,l,c,d,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,s.default)(r,1),u[0],e.next=3,(0,y.getTable)().bulkGet(t.concat(n),!1);case 3:return l=e.sent,c=l.slice(0,i),d=l.slice(i),f=[],c.forEach((function(e,r){var i;if(null==e)return __LOG__(4,!0,new Error,!0)`processRevokeMsg: old message key does not exist`,void SEND_LOGS("RevokeMsg-not-found-error");f.push({id:n[r],to:e.to,author:e.author,type:h.default.MSG_TYPE.REVOKED,protocolMessageKey:t[r],protocolMessageRowId:null===(i=d[r])||void 0===i?void 0:i.rowId,from:e.from,t:e.t,rowId:e.rowId,internalId:e.internalId}),a.push(String(e.rowId))})),e.next=10,(0,y.getTable)().bulkRemove(t);case 10:return e.next=12,(0,y.getTable)().bulkCreateOrReplace(f);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());case 9:S.default.purge(a);case 10:return e.abrupt("return",r.resolve());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=(0,u.default)(o.default.mark((function e(t){var n,r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.default.supportsFeature(l.default.F.MD_BACKEND)){e.next=6;break}return n=[],r=[],a=t.map((function(e){return e.paymentRequestMessageKey?e.paymentRequestMessageKey.toString():""})).filter((function(e){return""!==e})),i=t.filter((function(e){return"payment_action_request_declined"===e.subtype||"payment_transaction_request_cancelled"===e.subtype})).map((function(e){return e.id.toString()})),e.abrupt("return",(0,I.getStorage)().lock(["message"],function(){var e=(0,u.default)(o.default.mark((function e(u){var l,c,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=(0,s.default)(u,1),l[0],e.next=3,(0,R.getMsgsByMsgKey)(a.concat(i));case 3:return c=e.sent,d=new Map,c.forEach((function(e){null!=e&&d.set(e.id.toString(),e)})),t.forEach((function(e){var t,a=null===(t=e.paymentRequestMessageKey)||void 0===t?void 0:t.toString(),i=d.get(a||"");if(i)if("send"===e.subtype&&null!=e.paymentTxnStatus)n.push({id:a,paymentTxnStatus:e.paymentTxnStatus});else{var o=i.from.isGroup()?i.author:i.from,s=i.paymentMessageReceiverJid.equals((0,P.getMeUser)())?o:i.paymentMessageReceiverJid;"payment_action_request_declined"===e.subtype?n.push({id:a,paymentStatus:k.PaymentInfoStatus.REJECTED,paymentTxnStatus:k.PaymentInfoTxnStatus.COLLECT_REJECTED}):"payment_transaction_request_cancelled"===e.subtype&&n.push({id:a,paymentStatus:k.PaymentInfoStatus.CANCELLED,paymentTxnStatus:k.PaymentInfoTxnStatus.COLLECT_CANCELED}),n.push({id:e.id.toString(),type:h.default.MSG_TYPE.NOTIFICATION_TEMPLATE,templateParams:[s,i.paymentCurrency,String(i.paymentAmount1000)]})}else d.get(e.id.toString())&&!e.isMdHistoryMsg&&r.push(e.id.toString())})),e.next=9,(0,y.getTable)().bulkRemove(r);case 9:return e.next=11,(0,y.getTable)().bulkCreateOrMerge(n);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return Y.apply(this,arguments)}function Y(){return(Y=(0,u.default)(o.default.mark((function e(t,n){var a,s,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.default.isLogoutInProgress){e.next=2;break}return e.abrupt("return",r.reject(new Error("dropping processAndEncryptSingleMsgRow due to logout")));case 2:if(null==n){e.next=5;break}return e.next=5,(0,g.asyncSleepAfterGivenLoopIteration)(n,35);case 5:return a=(0,y.getTable)(),s=X(t),u=(0,f.convertToMessageRowType)(t),e.next=10,a.preflightEncryptSingleRecord((0,i.default)({},u));case 10:return l=e.sent,e.abrupt("return",[(0,i.default)((0,i.default)((0,i.default)({},u),l),{},{vcardWAids:s}),!!(0,M.findLink)(t.body,!0)]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return W.apply(this,arguments)}function W(){return(W=(0,u.default)(o.default.mark((function e(t){var n,a,i,s,l,c=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],e.next=3,w.default.waitForFinalDbMsgEncKey();case 3:return e.next=5,new r((function(e){return setTimeout(e,0)}));case 5:if(!n){e.next=19;break}a=[],i=0;case 8:if(!(i<t.length)){e.next=17;break}return s=t[i],e.next=12,j(s,i);case 12:l=e.sent,a.push(l);case 14:i++,e.next=8;break;case 17:e.next=22;break;case 19:return e.next=21,r.all(t.map(function(){var e=(0,u.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()));case 21:a=e.sent;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,I.getStorage)().lock(["message"],function(){var a=(0,u.default)(o.default.mark((function a(i){var u,l,c,d,p,h;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=(0,s.default)(i,1),l=u[0],a.next=3,l.all({reverse:!n,limit:1,index:["rowId"],returnKeyType:"keys"}).then((function(e){return 0===e.length?L:e[0]}));case 3:return c=a.sent,d={},a.next=7,r.all(t.map((function(e){var t=(0,E.createWid)(e),r=(0,f.beginningOfChat)(t),a=(0,f.endOfChat)(t);return l.between(["internalId"],r,a,{limit:1,reverse:!n,returnKeyType:"keys"}).then((function(e){return d[t.toString()]=0===e.length?L:(0,f.getInChatMsgId)(e[0])}))})));case 7:return p=n?-1:1,h=e.map((function(e,t){var r=(0,s.default)(e,2),a=r[0],i=r[1];n&&(a.isMdHistoryMsg=!0);var o=T.default.fromString(a.id),u=o.remote.toString(),l=c+p*(t+1),f=d[u]+1*p;return d[u]=f,Q(a,u,i,l,f,!n&&$(o,a))})),a.abrupt("return",l.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(h).catch((function(e){if(n&&e instanceof C.default.BulkError)return __LOG__(4,void 0,new Error)`[storeEncryptedMessage] BulkError in bulkCreate, retrying with bulk create or replace`,l.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(h);throw e})).then((function(){return h})));case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()).then((function(e){C.default.ignoreTransaction((function(){(0,O.getTable)().bulkCreateOrReplace(e.map((function(e){return{id:String(e.rowId)}}))).then((function(){S.default.index()}))}))}))}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=null==t?e[0].id.remote:t,i=(0,f.beginningOfChat)(a),l=(0,f.endOfChat)(a);return(0,I.getStorage)().lock(["chat","message"],function(){var t=(0,u.default)(o.default.mark((function t(u){var c,d,p,h,_,v,m,g,y,E,S,b,T,w;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(0,s.default)(u,2),d=c[0],p=c[1],t.next=3,d.get(a.toString());case 3:if(h=t.sent,a.isStatusV3()||null==h&&!(0,f.shouldCreateChatWithMsgs)(e)){t.next=10;break}return t.next=7,q(h,e,a);case 7:return _=t.sent,t.next=10,d.createOrMerge(a.toString(),_);case 10:return v=p.all({reverse:!n,limit:1,index:["rowId"],returnKeyType:"keys"}).then((function(e){return 0===e.length?L:e[0]})),m=p.between(["internalId"],i,l,{limit:1,reverse:!n,returnKeyType:"keys"}).then((function(e){return 0===e.length?L:(0,f.getInChatMsgId)(e[0])})),t.next=14,r.all([v,m]);case 14:return g=t.sent,y=(0,s.default)(g,2),E=y[0],S=y[1],b=n?E-e.length:E+1,T=n?S-e.length:S+1,w=e.map((function(e,t){var r=(0,f.convertToMessageRowType)(e),i=!n&&$(e.id,e);return Q(r,a.toString(),!!(0,M.findLink)(e.body,!0),b+t,T+t,i)})),t.abrupt("return",p.bulkCreate(w).then((function(){return w})));case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()).then((function(e){C.default.ignoreTransaction((function(){(0,O.getTable)().bulkCreateOrReplace(e.map((function(e){return{id:String(e.rowId)}})))}))}))}function $(e,t){if(e.fromMe||e.remote.isStatusV3())return!1;var n=(0,d.eventTypeFromMsgType)(t);return"a"===n||"d"===n}function z(e,t){for(var n=e,r=new Set,a=t.length-1;a>=0&&!(n<=0);a--){var i=t[a];$(i.id,i)&&(n--,r.add(String(i.id)))}return r}function q(){return J.apply(this,arguments)}function J(){return(J=(0,u.default)(o.default.mark((function e(t,n,r){var a,i,s,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,s=Math.max(0,t?t.unreadCount:0),u=null!==(a=null==t?void 0:t.unreadMentionsOfMe)&&void 0!==a?a:[],n.forEach((function(e){var t=(0,d.eventTypeFromMsgType)(e);if("i"!==t&&(e&&null!=e.t&&(null==i||e.t>i)&&(i=e.t),"a"!==t&&"d"!==t||e.id.fromMe||(s+=1),l.default.supportsFeature(l.default.F.MD_BACKEND)&&(0,N.getABPropConfigValue)("group_catch_up")&&$(e.id,e)&&(0,d.hasMentionOfMe)(e))){var n={id:e.id.toString(),timestamp:e.t};u.push(n)}})),t&&null!=t.t&&(null==i||t.t>i)&&(i=t.t),e.abrupt("return",{id:r.toString(),unreadCount:s,t:i,unreadMentionsOfMe:u});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t,n,r,a,o){var s=[h.default.MSG_TYPE.IMAGE,h.default.MSG_TYPE.VIDEO,h.default.MSG_TYPE.AUDIO].includes(e.type),u=(0,i.default)((0,i.default)({},e),{},{vcardWAids:e.vcardWAids||X(e),id:e.id.toString(),isStarred:e.star?r:void 0,hasLink:"chat"===e.type&&n?r:void 0,isMediaMsg:s?r:void 0,isDocMsg:e.type===h.default.MSG_TYPE.DOCUMENT?r:void 0,expiredTimestamp:Z(e)});null!=r&&(u.rowId=r),null!=a&&(u.internalId=(0,f.craftInternalId)(t,a)),o&&t!==v.STATUS_JID&&(u.pendingReadReceipt=1);var l,c=e.c2sTimestamp;e.id.fromMe&&!b.default.hasSynced?c=null!==(l=e.c2sTimestamp)&&void 0!==l?l:e.t:c=e.t;try{u.messageRangeIndex=(0,f.craftMessageRangeIndex)(t,!T.default.fromString(e.id).fromMe,h.default.SYSTEM_MESSAGE_TYPES.includes(e.type),c)}catch(e){__LOG__(4,void 0,new Error)`[process-msg] craftMessageRangeIndex failed with error ${e}`}return u}function X(e){var t=[];if("vcard"===e.type)t=[e.body];else{if("multi_vcard"!==e.type)return;t=e.vcardList.map((function(e){return e.vcard}))}return t.filter(Boolean).reduce((function(e,t){var n=(0,p.vcardWids)((0,p.parseVcard)(t));return e.concat(n.map((function(e){return e.toString()})))}),[])}function Z(e){var t=e.ephemeralDuration,n=e.ephemeralStartTimestamp,r=e.t,a=e.subtype,i=e.id.fromMe,o=(0,c.getEphemeralExpirationTimestamp)(t,n,r,a,i);return null!=o?o:void 0}},87547:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundsForChat=function(){return u.apply(this,arguments)},t.default=function(){return l.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=n(322),s=n(24003);function u(){return(u=(0,i.default)(a.default.mark((function e(t){var n,r,i,u,l,c,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.beginningOfChat)(t),r=(0,s.endOfChat)(t),e.next=4,(0,o.getTable)().between(["internalId"],n,r,{lowerInclusive:!1,upperInclusive:!1,limit:1});case 4:if(0!==(i=e.sent).length){e.next=7;break}return e.abrupt("return",null);case 7:return u=i[0].rowId,e.next=10,(0,o.getTable)().between(["internalId"],n,r,{lowerInclusive:!1,upperInclusive:!1,limit:1,reverse:!0});case 10:if(0!==(l=e.sent).length){e.next=13;break}return e.abrupt("return",null);case 13:if(c=l[0].rowId,d=l[0].t,null!=u&&null!=c){e.next=17;break}return e.abrupt("return",null);case 17:return e.abrupt("return",{startRowId:u,endRowId:c,tsOfLastMessage:d});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,i.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.beginningOfChat)(t),r=(0,s.endOfChat)(t),e.next=4,(0,o.getTable)().between(["internalId"],n,r,{lowerInclusive:!1,upperInclusive:!1,returnKeyType:"primary_key"});case 4:return i=e.sent,e.next=7,(0,o.getTable)().bulkRemove(i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},24003:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.convertToMessageRowType=function(e){var t,n=(0,u.default)({},e);e.quotedMsg&&(n.quotedMsg=(0,u.default)({},e.quotedMsg));(null===(t=e.quotedMsg)||void 0===t?void 0:t.paymentNoteMsg)&&(n.quotedMsg.paymentNoteMsg=(0,u.default)({},e.quotedMsg.paymentNoteMsg));e.paymentNoteMsg&&(n.paymentNoteMsg=(0,u.default)({},e.paymentNoteMsg));n.id=e.id.toString(),e.from&&(n.from=e.from.toString());e.protocolMessageKey&&(n.protocolMessageKey=e.protocolMessageKey.toString());e.paymentRequestMessageKey&&(n.paymentRequestMessageKey=e.paymentRequestMessageKey.toString());return delete n.notifyName,delete n.local,delete n.isNewMsg,delete n.clearMedia,delete n.multicast,delete n.urlNumber,delete n.urlText,delete n.linkPreview,delete n.star,delete n.forwardedFromWeb,n=function(e){var t,n,r,a={currentMsg:{},quotedMsg:{}};if(null===(t=e.paymentNoteMsg)||void 0===t?void 0:t.body){var i;a.currentMsg.paymentNoteMsgBody=e.paymentNoteMsg.body,null===(i=e.paymentNoteMsg)||void 0===i||delete i.body}(null===(n=e.quotedMsg)||void 0===n||null===(r=n.paymentNoteMsg)||void 0===r?void 0:r.body)&&(a.quotedMsg.paymentNoteMsgBody=e.quotedMsg.paymentNoteMsg.body,delete e.quotedMsg.paymentNoteMsg.body);S.forEach((function(t){a.currentMsg[t]=e[t],delete e[t]})),e.quotedMsg&&S.forEach((function(t){a.quotedMsg[t]=e.quotedMsg[t],delete e.quotedMsg[t]}));var o=(0,c.encodeProto)(p.MsgRowOpaqueDataSpec,a);return e.msgRowOpaqueData=o.readBuffer(),e}(n)},t.hydrateMessage=function(e){var t,n=(0,u.default)({},e);e.quotedMsg&&(n.quotedMsg=(0,u.default)({},e.quotedMsg));(null===(t=e.quotedMsg)||void 0===t?void 0:t.paymentNoteMsg)&&(n.quotedMsg.paymentNoteMsg=(0,u.default)({},e.quotedMsg.paymentNoteMsg));e.paymentNoteMsg&&(n.paymentNoteMsg=(0,u.default)({},e.paymentNoteMsg));var r=h.default.fromString(n.id),a=n.protocolMessageKey?h.default.fromString(n.protocolMessageKey):void 0,i=n.paymentRequestMessageKey?h.default.fromString(n.paymentRequestMessageKey):void 0,o=(0,_.hydrateWids)(n);o.id=r,a&&(o.protocolMessageKey=a);i&&(o.paymentRequestMessageKey=i);return n.star=void 0!==n.isStarred,n.isMdHistoryMsg=n.rowId<E,delete n.internalId,delete n.isStarred,delete n.count,delete n.hasLink,delete n.isMediaMsg,delete n.isDocMsg,delete n.expiredTimestamp,delete n.pendingReadReceipt,n=function(e){C(e)&&e.id.fromMe&&null!=e.ack&&e.ack===d.default.ACK.CLOCK&&(e.isSendFailure=!0);return e}(n=function(e){var t=(0,l.decodeProto)(p.MsgRowOpaqueDataSpec,e.msgRowOpaqueData);if(t.currentMsg){var n;if(t.currentMsg.paymentNoteMsgBody&&e.paymentNoteMsg)e.paymentNoteMsg.body=null===(n=t.currentMsg)||void 0===n?void 0:n.paymentNoteMsgBody;S.forEach((function(n){var r;e[n]=null===(r=t.currentMsg)||void 0===r?void 0:r[n]}))}e.quotedMsg&&t.quotedMsg&&(t.quotedMsg.paymentNoteMsgBody&&(e.quotedMsg.paymentNoteMsg.body=t.quotedMsg.paymentNoteMsgBody),S.forEach((function(n){var r;e.quotedMsg[n]=null===(r=t.quotedMsg)||void 0===r?void 0:r[n]})));return e}(n))},t.craftMessageRangeIndex=function(e,t,n,r){var a;a=n?b.SystemMessage:t?b.IncomingChatMessage:b.Outgoing;return`${e}_${a}_${null!=r?T(r):""}`},t.extractC2STimestampFromMessageRangeIndex=function(e){if(e){var t=e.split("_")[2];return t?w(t):null}return null},t.beginningOfMessageRange=function(e,t,n){var r=null!=n?T(n):"";return`${e.toString()}_${t}_${r}`},t.endOfMessageRange=function(e,t){return`${e.toString()}_${t}_g`},t.craftInternalId=function(e,t){var n=T(t);return`${e}_${n}_m`},t.getInChatMsgId=function(e){return w(e.split("_")[1])},t.beginningOfChat=function(e){return`${e.toString()}_/`},t.endOfChat=function(e){return`${e.toString()}_g`},t.queryChatMessageHelper=function(){return A.apply(this,arguments)},t.isUnreadTypeMsg=C,t.getKeyMsgsFromChatHistory=function(e,t){if(f.default.supportsFeature(f.default.F.MD_BACKEND)){var n,a=e.unreadCount,i=void 0,s=void 0,u=void 0,l=0;return(0,m.getTable)().between(["internalId"],`${e.id}_/`,`${e.id}_g`,{reverse:!0},(function(e){return l++,e.type!==d.default.MSG_TYPE.PROTOCOL&&(u||(u=e.id),s||(s=e),i||[d.default.MSG_TYPE.E2E_NOTIFICATION,d.default.MSG_TYPE.PROTOCOL].concat((0,o.default)([])).includes(e.type)||(i=e),!t&&(null!=i||l>10)||(!(0!==a||!i)||!!(a>0&&C(e)&&0===(a-=1))&&(n=e.id.toString(),!0)))})).then((function(){return{anchor:n,previewMsg:i||s,lastReceivedKey:u}}))}return r.resolve({anchor:void 0,previewMsg:void 0,lastReceivedKey:void 0})},t.shouldCreateChatWithMsgs=function(e){return e.some((function(e){return e.type!==d.default.MSG_TYPE.NOTIFICATION_TEMPLATE}))},t.MessagePropertyType=t.MSG_OPAQUE_DATA_KEYS=void 0;var i=a(n(87757)),o=a(n(319)),s=a(n(48926)),u=a(n(81109)),l=n(53939),c=n(46042),d=a(n(34263)),f=a(n(22021)),p=n(36063),h=a(n(5315)),_=n(50871),v=n(35566),m=n(322),g=n(75793),y=n(71701),E=1e9,S=["body","caption","clientUrl","loc","lng","lat","paymentAmount1000","canonicalUrl","matchedText","title","description"];t.MSG_OPAQUE_DATA_KEYS=S;var b=n(54302)({IncomingChatMessage:"1",Outgoing:"2",SystemMessage:"3"});function T(e){var t=e.toString(16);return(t.length-1).toString(16)+t}function w(e){return parseInt(e.substring(1),16)}function A(){return(A=(0,s.default)(i.default.mark((function e(t,n,a){var o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.default.supportsFeature(f.default.F.MD_BACKEND)){e.next=8;break}return e.next=3,(0,m.getTable)().between(["internalId"],t,n,a);case 3:return o=e.sent,s=O(o),e.next=7,M(s);case 7:return e.abrupt("return",s);case 8:return e.abrupt("return",r.resolve([]));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return[d.default.MSG_TYPE.CHAT,d.default.MSG_TYPE.IMAGE,d.default.MSG_TYPE.VIDEO,d.default.MSG_TYPE.AUDIO,d.default.MSG_TYPE.PTT,d.default.MSG_TYPE.DOCUMENT,d.default.MSG_TYPE.VCARD,d.default.MSG_TYPE.LOCATION,d.default.MSG_TYPE.CIPHERTEXT,d.default.MSG_TYPE.OVERSIZED,d.default.MSG_TYPE.MULTI_VCARD,d.default.MSG_TYPE.UNKNOWN,d.default.MSG_TYPE.STICKER,d.default.MSG_TYPE.PRODUCT,d.default.MSG_TYPE.GROUPS_V4_INVITE].includes(e.type)}function O(e){return e.filter((function(e){return e.type!==d.default.MSG_TYPE.DEBUG}))}function M(){return I.apply(this,arguments)}function I(){return(I=(0,s.default)(i.default.mark((function e(t){var n,r,a,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=k(t)).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,v.getTable)().anyOf(["msgKey"],n.map((function(e){return e.id})));case 5:r=e.sent,a=new Map,o=[],r.forEach((function(e){var t=(0,g.createWid)(e.receiverUserJid);if(!(0,y.getMeUser)().equals(t)){var n=a.get(e.msgKey)||{played:0,read:0,delivery:0};null!=e.played?n.played++:null!=e.read?n.read++:null!=e.delivery&&n.delivery++,a.set(e.msgKey,n)}})),n.forEach((function(e){var t=e.ack,n=e.id,r=a.get(n);if(r){var i=null,s=e.count||1;0==(s-=r.played)?i=d.default.ACK.PLAYED:0==(s-=r.read)?i=d.default.ACK.READ:0==(s-=r.delivery)&&(i=d.default.ACK.RECEIVED),null!=i&&i>t&&(e.ack=i,o.push({id:n,ack:i})),o.length>0&&(__LOG__(2,void 0,void 0,void 0,["message-store"])`maybeUpdateMsgAck: storing ack updates ${JSON.stringify(o)}`,(0,m.getTable)().bulkCreateOrMerge(o))}}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return e.filter((function(e){if(!C(e))return!1;if(e.type===d.default.MSG_TYPE.CIPHERTEXT||e.type===d.default.MSG_TYPE.UNKNOWN||e.ack<=d.default.ACK.CLOCK)return!1;var t=h.default.fromString(e.id);if(!t.fromMe)return!1;if(t.remote.isGroup()&&(null!=e.rowId&&e.rowId<E||null==e.count))return __LOG__(2,void 0,void 0,void 0,["message-store"])`getMsgMayNeedAckUpdate: skip update for history group message ${e.id}`,!1;if(e.type===d.default.MSG_TYPE.PTT){if(e.ack===d.default.ACK.PLAYED)return!1}else if(e.ack===d.default.ACK.READ)return!1;return!0}))}t.MessagePropertyType=b},27690:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeOrphanReceipt=function(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,s.getTable)().remove(e);return r.reject(new Error("removeOrphanReceipt: not supported for non MD"))},t.getOrphanReceipt=function(e){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,s.getTable)().get(e);return r.reject(new Error("getOrphanReceipt: not supported for non MD"))},t.createOrUpdateOrphanReceipt=function(e,t,n){if(o.default.supportsFeature(o.default.F.MD_BACKEND))return(0,u.getStorage)().lock(["orphan-receipt"],(function(r){var a=(0,i.default)(r,1)[0];return a.bulkGet(n).then((function(r){var i=n.reduce((function(n,a,i){var o=r[i];o||(o={msgKey:a});var s=o[e];return(null==s||s>t)&&(o[e]=t,n.push(o)),n}),[]);return a.bulkCreateOrReplace(i)}))}));return r.reject(new Error("updateReceiptRecords: not supported for non MD"))};var i=a(n(63038)),o=a(n(22021)),s=n(75256),u=n(28367)},10566:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupSenderKeyList=function(e){var t;if(p.default.supportsFeature(p.default.F.MD_BACKEND)){var n=e.toString();if(!(t=(0,v.getTable)().get(n).then((function(e){var t=[],n=[];if(!e)return{skDistribList:t,skList:n,rotateKey:!1};var r=e.senderKey,a=e.rotateKey;return Array.from(r.keys()).forEach((function(e){r.get(e)?n.push((0,m.createWid)(e)):t.push((0,m.createWid)(e))})),a?{skDistribList:t.concat(n),skList:[],rotateKey:a}:{skDistribList:t,skList:n,rotateKey:a}}))))return r.reject(new Error("getGroupSenderKeyList: not supported"))}else t=r.reject("getGroupSenderKeyList: not supported without model storage and md backend");return t},t.markHasSenderKey=function(e,t){var n;if(p.default.supportsFeature(p.default.F.MD_BACKEND)){var a=e.toString();if(!(n=(0,_.getStorage)().lock(["participant"],(function(e){var n=(0,u.default)(e,1)[0];return n.get(a).then((function(e){if(e)return n.createOrReplace(T(e,t,!0));__LOG__(2)`markHasSenderKey: group participant info missing for group ${a}`}))}))))return r.reject(new Error("markHasSenderKey: not supported"))}else n=r.reject("markHasSenderKey: not supported without model storage and md backend");return n},t.markForgetSenderKey=function(e,t){var n;if(p.default.supportsFeature(p.default.F.MD_BACKEND)){var a=e.toString();if(!(n=(0,_.getStorage)().lock(["participant"],(function(e){var n=(0,u.default)(e,1)[0];return n.get(a).then((function(e){if(e)return n.createOrReplace(T(e,t,!1));__LOG__(2)`markForgetSenderKey: group participant info missing for group ${a}`}))}))))return r.reject(new Error("markForgetSenderKey: not supported"))}else n=r.reject("markForgetSenderKey: not supported without model storage and md backend");return n},t.updateParticipants=function(e,t){var n;if(p.default.supportsFeature(p.default.F.MD_BACKEND)){var a=t.participants,i=t.version,l=t.prevVersion,c=e.toString();if(!(n=(0,_.getStorage)().lock(["participant"],function(){var e=(0,s.default)(o.default.mark((function e(n){var r,s,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,u.default)(n,1),s=r[0],e.next=3,s.get(c);case 3:if(d=e.sent){e.next=6;break}throw new g(`updateParticipants: group participant info missing for group ${c}, action ${t.action}`);case 6:if(!d.version||null!=l&&l===d.version){e.next=8;break}throw new g(`updateParticipants: prevVersion info missing for group ${c}, action ${t.action}`);case 8:e.t0=t.action,e.next=e.t0===y.ADD?11:e.t0===y.REMOVE?12:e.t0===y.DEMOTE?13:e.t0===y.PROMOTE?14:15;break;case 11:return e.abrupt("return",s.createOrReplace(E(d,a,t.deviceIds,i)));case 12:return e.abrupt("return",s.createOrReplace(S(d,a,i)));case 13:return e.abrupt("return",s.createOrReplace(b(d,a,i,y.DEMOTE)));case 14:return e.abrupt("return",s.createOrReplace(b(d,a,i,y.PROMOTE)));case 15:throw new Error(`updateParticipants: failed with unknown action ${t.action}`);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())))return r.reject(new Error("addParticipantRecord: not supported"))}else n=r.reject(new Error("updateParticipants: not supported without model storage and md backend"));return n},t.replaceParticipants=function(e,t,n,a,i){var o;if(!p.default.supportsFeature(p.default.F.MD_BACKEND))return r.reject(new Error("replaceParticipants: not supported without model storage and md backend"));var s=e.toString();if(!(o=(0,_.getStorage)().lock(["participant"],(function(e){var r=(0,u.default)(e,1)[0];return r.get(s).then((function(e){return e?r.createOrReplace(function(e,t,n,r,a){var i=e.rotateKey,o=e.senderKey,s=new Map;r.forEach((function(e){if(!e.equals((0,h.assertGetMe)())){var t=String(e),n=o.get(t);null==n?s.set(t,!1):(s.set(t,n),o.delete(t))}})),0!==o.size&&(i=!0);return{groupId:e.groupId,senderKey:s,participants:t.map(String),admins:n.map(String),rotateKey:i,version:a,deviceSyncComplete:!0}}(e,t,n,a,i)):r.create(function(e,t,n,r,a){var i=new Map;return r.forEach((function(e){if(!e.equals((0,h.assertGetMe)())){var t=String(e);i.has(t)||i.set(t,!1)}})),{groupId:e,senderKey:i,participants:t.map(String),admins:n.map(String),rotateKey:!1,version:a,deviceSyncComplete:!0}}(s,t,n,a,i))}))}))))return r.reject(new Error("replaceParticipants: not supported"));return o},t.modifyGroupParticipant=function(e,t,n,a,i){if(!p.default.supportsFeature(p.default.F.MD_BACKEND))return r.reject(new Error("modifyGroupParticipant: not supported without md backend"));var l=String(e);return(0,_.getStorage)().lock(["participant"],function(){var e=(0,s.default)(o.default.mark((function e(r){var s,c,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,u.default)(r,1),c=s[0],e.next=3,c.get(l);case 3:if(d=e.sent){e.next=6;break}throw new g(`modifyGroupParticipant: group participant info missing for group ${l}`);case 6:if(!d.version||null!=a&&a===d.version){e.next=8;break}throw new g(`modifyGroupParticipant: prev version info missing for group ${l}`);case 8:return e.abrupt("return",c.createOrReplace(w(d,t,n,i)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},t.PARTICIPANT_OPERATION=t.GroupUnSyncedError=void 0;var i=a(n(81109)),o=a(n(87757)),s=a(n(48926)),u=a(n(63038)),l=a(n(34575)),c=a(n(2205)),d=a(n(99842)),f=a(n(65957)),p=a(n(22021)),h=n(71701),_=n(28367),v=n(38076),m=n(75793),g=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).name="GroupUnSyncedError",e}return n}((0,f.default)(Error));t.GroupUnSyncedError=g;var y=Object.freeze({ADD:"add",REMOVE:"remove",DEMOTE:"demote",PROMOTE:"promote"});function E(e,t,n,r){var a=new Map(e.senderKey);return n.forEach((function(e){if(!e.equals((0,h.assertGetMe)())){var t=String(e);a.set(t,!1)}})),{groupId:e.groupId,senderKey:a,participants:e.participants.concat(t.map(String)),admins:e.admins,rotateKey:e.rotateKey,version:r,deviceSyncComplete:e.deviceSyncComplete}}function S(e,t,n){var r=new Map(e.senderKey);Array.from(r.keys()).forEach((function(e){var n=(0,m.createWid)(e).user;t.some((function(e){return e.user===n}))?r.delete(e):r.set(e,!1)}));var a=t.map(String);return{groupId:e.groupId,senderKey:r,participants:e.participants.filter((function(e){return!a.includes(e)})),admins:e.admins.filter((function(e){return!a.includes(e)})),rotateKey:!0,version:n,deviceSyncComplete:e.deviceSyncComplete}}function b(e,t,n,r){var a=e.admins,i=t.map(String);return r===y.DEMOTE?a=e.admins.filter((function(e){return!i.includes(e)})):r===y.PROMOTE&&(a=e.admins.concat(i)),{groupId:e.groupId,senderKey:e.senderKey,participants:e.participants,admins:a,rotateKey:e.rotateKey,version:n,deviceSyncComplete:e.deviceSyncComplete}}function T(e,t,n){var r=new Map(e.senderKey),a=!1;return t.forEach((function(e){if(!e.equals((0,h.assertGetMe)())){var t=String(e);r.has(t)?r.set(t,n):a=!0}})),{groupId:e.groupId,senderKey:r,participants:e.participants,admins:e.admins,rotateKey:a,deviceSyncComplete:e.deviceSyncComplete}}function w(e,t,n,r){var a=String(t),o=String(n),s=new Map(e.senderKey),u=e.participants.filter((function(e){return e!==a})).concat(o);Array.from(s.keys()).forEach((function(e){var n=(0,m.createWid)(e).user;t.user===n?s.delete(e):s.set(e,!1)})),s.set(o,!1);var l=e.admins.map((function(e){return e===a?o:e}));return(0,i.default)((0,i.default)({},e),{},{participants:u,senderKey:s,admins:l,version:r,rotateKey:!0})}t.PARTICIPANT_OPERATION=y},39179:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.storePeerMessages=function(e){var t=e.map((function(e){return(0,a.default)((0,a.default)({},e.toJSON()),{},{id:String(e.id),to:String(e.to)})}));(0,i.getTable)().bulkCreate(t)};var a=r(n(81109)),i=n(5868)},58684:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryStatusAllMD=function(){var e=(0,c.createWid)(o.default.STATUS_WID);return s.default.waitForFinalDbMsgEncKey().then((function(){return(0,l.queryChatMessageHelper)((0,l.beginningOfChat)(e),(0,l.endOfChat)(e),{lowerInclusive:!1,upperInclusive:!1}).then((function(e){var t=[],n=[];e.forEach((function(e){(0,a.happenedWithin)((0,a.castToUnixTime)(e.t),a.DAY_SECONDS)&&e.type!==o.default.MSG_TYPE.REVOKED?n.push((0,l.hydrateMessage)(e)):e.author?t.push(e.id):__LOG__(3)`Author is null for status v3 message`})),(0,u.getTable)().bulkRemove(t);var r=i.default.groupBy(n,(function(e){return e.author.toString()})),s=[];for(var d in r){var f=r[d],p=f.filter((function(e){return e.ack<o.default.ACK.READ})).length,h=f[f.length-1].t;s.push({id:(0,c.createWid)(d),unreadCount:p,totalCount:f.length,t:h,_msgs:f})}return{statuses:s}}))}))};var a=n(90066),i=r(n(96486)),o=r(n(34263)),s=r(n(17894)),u=n(322),l=n(24003),c=n(75793)},4601:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getTaskScheduledTime=function(e){return(0,o.getTable)().get(e).then((function(e){return null==e?void 0:e.time}))},t.updateTaskScheduledTime=function(e,t){return(0,i.getStorage)().lock(["tasks-scheduled-time"],(function(n){return(0,a.default)(n,1)[0].createOrReplace({taskName:e,time:t})}))};var a=r(n(63038)),i=n(28367),o=n(45763)},50871:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hydrateWids=function e(t){if(Array.isArray(t))return t.map((function(t,n){return e((0,a.default)(n,t,i.isWidlike,i.createWidFromWidLike))}));if(t&&"object"==typeof t){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];t[o]=e((0,a.default)(o,t[o],i.isWidlike,i.createWidFromWidLike))}return t}return t};var a=r(n(37417)),i=n(75793)},89992:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasBusinessNameVerificationChanged=function(e,t,n){var a=r.resolve(!1);a=i.default.supportsFeature(i.default.F.MD_BACKEND)?(0,o.getTable)().get(e.user).then((function(e){return!e||e.serial!==n||e.level!==t})):r.reject("hasBusinessNameVerificationChanged: not supported without md backend");return a},t.getAllVerifiedNames=function(){var e=r.resolve([]);e=i.default.supportsFeature(i.default.F.MD_BACKEND)?(0,o.getTable)().all():r.reject(new Error("getAllVerifiedNames: not supported without md backend"));return e},t.createOrUpdateVerifiedBusinessName=function(e,t,n,a,u,l,c){var d;if(i.default.supportsFeature(i.default.F.MD_BACKEND)){var f=(0,s.toUserWid)(t).user,p=e||(0,o.getTable)();if(!(d=p.createOrReplace({id:f,level:n,serial:a,name:u,isApi:l,privacyMode:c})))return r.reject(new Error("createOrUpdateVerifiedBusinessName: not supported for non MD"))}else d=r.reject("createOrUpdateVerifiedBusinessName: not supported without md backend");return d};var i=a(n(22021)),o=n(35912),s=n(75793)},43883:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0});var i={initialize:!0};t.initialize=function(){if(!o.default.supportsFeature(o.default.F.MD_BACKEND))return r.resolve();return(0,s.initializeWithoutGKs)()};var o=a(n(22021)),s=n(99417);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},99417:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initializeWithoutGKs=function(){null==a&&((0,u.createStorage)(),(0,c.addTable)(),(0,d.addTable)(),(0,f.addTable)(),(0,p.addTable)(),(0,h.addTable)(),(0,_.addTable)(),(0,v.addTable)(),(0,m.addTable)(),(0,g.addTable)(),(0,y.addTable)(),(0,E.addTable)(),(0,S.addTable)(),(0,b.addTable)(),(0,T.addTable)(),(0,w.addTable)(),(0,A.addTable)(),(0,C.addTable)(),(0,O.addTable)(),(0,I.addTable)(),(0,k.addTable)(),(0,P.addTable)(),(0,R.addTable)(),(0,D.addTable)(),(0,N.addTable)(),(0,M.addTable)(),(0,L.addTable)(),(0,x.addTable)(),(0,U.addTable)(),(0,s.addTable)(),(0,o.addTable)(),(0,l.addTable)(),a=(0,u.getStorage)().initialize().catch((function(e){throw __LOG__(4,!0,new Error,!0)`Assertion failed!`,SEND_LOGS("Failed to initialize model storage"),e})));return a},t.destroy=function(){return(0,u.destroyStorage)().catch((function(){return F.resolve(new i.default(u.DATABASE_NAME).delete())})).finally((function(){a=null}))},t.clearInitializePromise=function(){a=null},Object.defineProperty(t,"getCollectionVersionTable",{enumerable:!0,get:function(){return o.getTable}}),Object.defineProperty(t,"getPendingMutationsTable",{enumerable:!0,get:function(){return s.getTable}}),Object.defineProperty(t,"getSyncActionsTable",{enumerable:!0,get:function(){return l.getTable}}),Object.defineProperty(t,"getABPropConfigsTable",{enumerable:!0,get:function(){return c.getTable}}),Object.defineProperty(t,"getTasksScheduledTimeTable",{enumerable:!0,get:function(){return d.getTable}}),Object.defineProperty(t,"getContactTable",{enumerable:!0,get:function(){return f.getTable}}),Object.defineProperty(t,"getBlocklistTable",{enumerable:!0,get:function(){return p.getTable}}),Object.defineProperty(t,"getProfilePicThumbTable",{enumerable:!0,get:function(){return h.getTable}}),Object.defineProperty(t,"getChatTable",{enumerable:!0,get:function(){return _.getTable}}),Object.defineProperty(t,"getMessageTable",{enumerable:!0,get:function(){return v.getTable}}),Object.defineProperty(t,"getMsgInfoTable",{enumerable:!0,get:function(){return m.getTable}}),Object.defineProperty(t,"getParticipantTable",{enumerable:!0,get:function(){return g.getTable}}),Object.defineProperty(t,"getOrphanReceiptTable",{enumerable:!0,get:function(){return y.getTable}}),Object.defineProperty(t,"getDeviceListTable",{enumerable:!0,get:function(){return E.getTable}}),Object.defineProperty(t,"getLabelTable",{enumerable:!0,get:function(){return S.getTable}}),Object.defineProperty(t,"getLabelAssociationTable",{enumerable:!0,get:function(){return b.getTable}}),Object.defineProperty(t,"getInactiveReceiptTable",{enumerable:!0,get:function(){return T.getTable}}),Object.defineProperty(t,"getVerifiedBusinessNameTable",{enumerable:!0,get:function(){return w.getTable}}),Object.defineProperty(t,"getHistorySyncNotificationTable",{enumerable:!0,get:function(){return A.getTable}}),Object.defineProperty(t,"getEncryptedMutationsTable",{enumerable:!0,get:function(){return C.getTable}}),Object.defineProperty(t,"getQuickReplyTable",{enumerable:!0,get:function(){return O.getTable}}),Object.defineProperty(t,"getRecentStickersTable",{enumerable:!0,get:function(){return M.getTable}}),Object.defineProperty(t,"getGroupMetadataTable",{enumerable:!0,get:function(){return I.getTable}}),Object.defineProperty(t,"getSyncKeysTable",{enumerable:!0,get:function(){return k.getTable}}),Object.defineProperty(t,"getActiveMessageRangesTable",{enumerable:!0,get:function(){return P.getTable}}),Object.defineProperty(t,"getFtsIndexingQueueTable",{enumerable:!0,get:function(){return R.getTable}}),Object.defineProperty(t,"getCartTable",{enumerable:!0,get:function(){return D.getTable}}),Object.defineProperty(t,"getMissingKeysTable",{enumerable:!0,get:function(){return N.getTable}}),Object.defineProperty(t,"getGroupInviteV4Table",{enumerable:!0,get:function(){return L.getTable}}),Object.defineProperty(t,"getOrphanPaymentNotificationTable",{enumerable:!0,get:function(){return x.getTable}}),Object.defineProperty(t,"getPeerMessageTable",{enumerable:!0,get:function(){return U.getTable}});var a,i=r(n(86128)),o=n(47851),s=n(57479),u=n(28367),l=n(45441),c=n(39001),d=n(45763),f=n(9010),p=n(79874),h=n(86880),_=n(8985),v=n(322),m=n(35566),g=n(38076),y=n(75256),E=n(68239),S=n(73916),b=n(8498),T=n(1710),w=n(35912),A=n(81971),C=n(84427),O=n(37980),M=n(16059),I=n(38215),k=n(10776),P=n(27414),R=n(68930),D=n(80305),N=n(36435),L=n(51846),x=n(41203),U=n(5868),F=n(60077).default},39001:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("abpropConfigs").version((0,s.abpropsConfigCreateTable)(),[new o.default("configCode"),new a.default("configValue"),new a.default("configExpoKey")]).view((function(e){return{configCode:e.configCode,configValue:e.configValue,configExpoKey:e.configExpoKey}}))},t.getTable=function(){return(0,i.getStorage)().table("abpropConfigs")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},27414:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("active-message-ranges").version((0,u.activeMessageRangesCreateTable)(),[new o.default(["chatId","action"]),new i.default("chatId"),new a.default("actionValue"),new a.default("remainingMessages")]).view((function(e){return e}))},t.getTable=function(){return(0,s.getStorage)().table("active-message-ranges")};var a=r(n(17905)),i=r(n(42061)),o=r(n(39733)),s=n(28367),u=n(62125)},79874:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,a.getStorage)().add("blocklist").version((0,o.blocklistCreateTable)(),[new i.default("id")]).view((function(e){return{id:e.id}}))},t.getTable=function(){return(0,a.getStorage)().table("blocklist")};var a=n(28367),i=r(n(55664)),o=n(62125)},80305:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("cart").version((0,s.cartCreateTable)(),[new o.default("id"),new a.default("products"),new a.default("message"),new a.default("total"),new a.default("currency"),new a.default("itemCount")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("cart")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},8985:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("chat").version((0,s.chatCreateTable)(),[new o.default("id"),new a.default("t"),new a.default("unreadCount"),new a.default("archive"),new a.default("isReadOnly"),new a.default("isAnnounceGrpRestrict"),new a.default("modifyTag"),new a.default("muteExpiration"),new a.default("name"),new a.default("notSpam"),new a.default("pin"),new a.default("changeNumberOldJid"),new a.default("changeNumberNewJid"),new a.default("ephemeralDuration"),new a.default("ephemeralSettingTimestamp"),new a.default("unreadMsgAnchorId"),new a.default("endOfHistoryTransferType")]).version((0,s.chatAddDisappearingModeInitiator)(),[new a.default("disappearingModeInitiator")]).version((0,s.addUnreadMentionToChatTable)(),[new a.default("unreadMentionsOfMe")]).view((function(e){return{id:e.id,t:e.t,unreadCount:e.unreadCount,unreadMsgAnchorId:e.unreadMsgAnchorId,archive:e.archive,isReadOnly:e.isReadOnly,isAnnounceGrpRestrict:e.isAnnounceGrpRestrict,modifyTag:e.modifyTag,muteExpiration:e.muteExpiration,name:e.name,notSpam:e.notSpam,pin:e.pin,changeNumberOldJid:e.changeNumberOldJid,changeNumberNewJid:e.changeNumberNewJid,endOfHistoryTransfer:e.endOfHistoryTransfer,endOfHistoryTransferType:e.endOfHistoryTransferType,ephemeralDuration:e.ephemeralDuration,ephemeralSettingTimestamp:e.ephemeralSettingTimestamp,disappearingModeInitiator:e.disappearingModeInitiator,unreadMentionsOfMe:e.unreadMentionsOfMe}}))},t.getTable=function(){return(0,i.getStorage)().table("chat")};var a=r(n(17905)),i=(n(41150),n(28367)),o=r(n(55664)),s=n(62125)},47851:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("collection-version").version((0,s.collectionVersionCreateTable)(),[new o.default("collection"),new a.default("version"),new a.default("state"),new a.default("finiteFailureStartTime"),new a.default("ltHash")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("collection-version")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},9010:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("contact").version((0,u.contactCreateTable)(),[new s.default("id"),new a.default("name"),new a.default("shortName"),new a.default("pushname"),new a.default("type"),new a.default("verifiedName"),new a.default("isBusiness"),new a.default("isEnterprise"),new a.default("verifiedLevel"),new a.default("statusMute"),new a.default("sectionHeader"),new a.default("isAddressBookContact"),new i.default("isAddressBookContact")]).version((0,u.contactAddIsContactSyncCompleted)(),[new a.default("isContactSyncCompleted"),new i.default("isContactSyncCompleted")]).version((0,u.contactAddDisappearingModeProperties)(),[new a.default("disappearingModeDuration"),new a.default("disappearingModeSettingTimestamp")]).view((function(e){return e}))},t.getTable=function(){return(0,o.getStorage)().table("contact")};var a=r(n(17905)),i=r(n(42061)),o=n(28367),s=r(n(55664)),u=n(62125)},68239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("device-list").version((0,s.deviceListCreateTable)(),[new o.default("id"),new a.default("devices"),new a.default("nextVersion"),new a.default("rawId"),new a.default("timestamp"),new a.default("validIndexes"),new a.default("currentIndex")]).version((0,s.deviceListAddDelete)(),[new a.default("deleted")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("device-list")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},84427:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("encrypted-mutations").version((0,s.encryptedMutationsCreateTable)(),[new i.default("id"),new a.default("collectionName"),new a.default("keyId"),new a.default("indexMac"),new a.default("operation"),new a.default("indexAndValueCipherText")]).view((function(e){return e}))},t.getTable=function(){return(0,o.getStorage)().table("encrypted-mutations")};var a=r(n(17905)),i=r(n(96600)),o=n(28367),s=n(62125)},68930:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,a.getStorage)().add("fts-indexing-queue").version((0,o.ftsIndexingQueueCreateTable)(),[new i.default("id")]).view((function(e){return e}))},t.getTable=function(){return(0,a.getStorage)().table("fts-indexing-queue")};var a=n(28367),i=r(n(55664)),o=n(62125)},51846:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("group-invite-v4").version((0,u.groupInviteV4CreateTable)(),[new s.default("id"),new a.default("from"),new a.default("to"),new a.default("groupId"),new a.default("expiration"),new a.default("expired"),new i.default(["from","to","groupId"])]).view((function(e){return e}))},t.getTable=function(){return(0,o.getStorage)().table("group-invite-v4")};var a=r(n(17905)),i=r(n(39663)),o=n(28367),s=r(n(55664)),u=n(62125)},38215:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("group-metadata").version((0,s.groupMetadataCreateTable)(),[new o.default("id"),new a.default("subject"),new a.default("subjectTime"),new a.default("creation"),new a.default("owner"),new a.default("desc"),new a.default("descId"),new a.default("descTime"),new a.default("descOwner"),new a.default("restrict"),new a.default("announce"),new a.default("a_v_id"),new a.default("noFrequentlyForwarded"),new a.default("ephemeralDuration"),new a.default("size"),new a.default("support")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("group-metadata")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},81971:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,u.getStorage)().add("history-sync-notification").version((0,c.historySyncNotificationsCreateTable)(),[new l.default("msgKey"),new i.default("downloadOptions"),new i.default("syncType"),new o.default("chunkEncryptionKey",o.ENCRYPTED_VALUE_TYPE.STRING),new i.default("chunkOrder"),new i.default("processed"),new s.default("syncType"),new s.default("chunkOrder"),new s.default("processed"),new i.default("isReupload"),new i.default("historySyncStepStartedTs"),new i.default("historySyncPayloadSize"),new i.default("reuploadPending")]).version((0,c.encryptHistorySyncDirectPath)(),[new o.default("directPath",o.ENCRYPTED_VALUE_TYPE.STRING)]).version((0,c.encryptHistorySyncFilehash)(),[new o.default("filehash",o.ENCRYPTED_VALUE_TYPE.STRING)]).view((function(e){return e})).useDbMsgEncKeyForEncryptedCol(!0)},t.getTable=function(){return(0,u.getStorage)().table("history-sync-notification")};var i=a(n(17905)),o=r(n(22692)),s=a(n(42061)),u=n(28367),l=a(n(55664)),c=n(62125)},1710:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("inactive-receipt").version((0,s.inactiveReceiptCreateTable)(),[new o.default("msgId"),new a.default("chatId"),new a.default("participantId")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("inactive-receipt")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},8498:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("label-association").version((0,u.labelAssociationCreateTable)(),[new o.default(["labelId","associationId","type"]),new i.default("labelId"),new a.default(["associationId","type"])]).view((function(e){return e}))},t.getTable=function(){return(0,s.getStorage)().table("label-association")},t.LabelAssociationType=void 0;var a=r(n(39663)),i=r(n(42061)),o=r(n(39733)),s=n(28367),u=n(62125),l=n(54302)({Jid:"jid",Message:"message"});t.LabelAssociationType=l},73916:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("label").version((0,s.labelCreateTable)(),[new o.default("id"),new a.default("name"),new a.default("colorIndex"),new a.default("predefinedId")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("label")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},35566:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("message-info").version((0,u.messageInfoCreateTable)(),[new o.default(["msgKey","receiverUserJid"]),new a.default("delivery"),new a.default("read"),new a.default("played"),new a.default("deviceDelivered"),new a.default("deviceNotDelivered"),new i.default("msgKey")]).version((0,u.messageInfoAddDeliveryPrivacyMode)(),[new a.default("deliveryPrivacyMode")]).view((function(e){return e}))},t.getTable=function(){return(0,s.getStorage)().table("message-info")};var a=r(n(17905)),i=r(n(42061)),o=r(n(39733)),s=n(28367),u=n(62125)},322:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,d.getStorage)().add("message").version((0,p.messageCreateTable)(),[new f.default("id"),new o.default("internalId"),new c.default("internalId"),new o.default("rowId"),new c.default("rowId"),new o.default("type"),new o.default("subtype"),new o.default("t"),new o.default("notifyName"),new o.default("from"),new o.default("to"),new o.default("author"),new o.default("self"),new o.default("ack"),new o.default("invis"),new o.default("isStarred"),new l.default("isStarred"),new o.default("mentionedJidList"),new o.default("count"),new o.default("devicesAdded"),new o.default("devicesRemoved"),new o.default("isThisDeviceAdded"),new o.default("recipients"),new o.default("protocolMessageKey"),new o.default("protocolMessageRowId"),new o.default("templateParams"),new s.default(["internalId","isStarred"]),new o.default("vcardWAids"),new i.default("vcardWAids"),new o.default("hasLink"),new o.default("isMediaMsg"),new o.default("isDocMsg"),new s.default(["internalId","isMediaMsg"]),new s.default(["internalId","isDocMsg"]),new s.default(["internalId","hasLink"]),new o.default("ephemeralStartTimestamp"),new o.default("ephemeralDuration"),new o.default("ephemeralSettingTimestamp"),new o.default("ephemeralOutOfSync"),new o.default("expiredTimestamp"),new l.default("expiredTimestamp"),new o.default("directPath"),new o.default("mimetype"),new o.default("duration"),new o.default("filehash"),new o.default("uploadhash"),new o.default("size"),new o.default("filename"),new o.default("streamingSidecar"),new o.default("mediaKey"),new o.default("mediaKeyTimestamp"),new o.default("pageCount"),new o.default("isGif"),new o.default("gifAttribution"),new o.default("isViewOnce"),new o.default("width"),new o.default("height"),new o.default("scanLengths"),new o.default("scansSidecar"),new o.default("interactiveAnnotations"),new o.default("firstFrameLength"),new o.default("firstFrameSidecar"),new o.default("isAnimated"),new o.default("thumbnail"),new o.default("richPreviewType"),new o.default("doNotPlayInline"),new o.default("broadcast"),new o.default("broadcastParticipants"),new o.default("broadcastId"),new o.default("quotedMsg"),new o.default("quotedStanzaID"),new o.default("quotedRemoteJid"),new o.default("quotedParticipant"),new o.default("footer"),new o.default("hydratedButtons"),new o.default("selectedId"),new o.default("selectedIndex"),new o.default("vcardFormattedName"),new o.default("isVcardOverMmsDocument"),new o.default("businessOwnerJid"),new o.default("productId"),new o.default("currencyCode"),new o.default("priceAmount1000"),new o.default("retailerId"),new o.default("url"),new o.default("productImageCount"),new o.default("paymentCurrency"),new o.default("paymentMessageReceiverJid"),new o.default("paymentTransactionTimestamp"),new o.default("paymentStatus"),new o.default("paymentNoteMsg"),new o.default("paymentRequestMessageKey"),new o.default("paymentExpiryTimestamp"),new o.default("message"),new o.default("orderTitle"),new o.default("itemCount"),new o.default("orderId"),new o.default("surface"),new o.default("status"),new o.default("token"),new o.default("textColor"),new o.default("backgroundColor"),new o.default("font"),new o.default("isForwarded"),new o.default("forwardingScore"),new o.default("ctwaContext"),new o.default("mdDowngrade"),new o.default("messageRangeIndex"),new l.default("messageRangeIndex"),new o.default("vcardList"),new o.default("totalAmount1000"),new o.default("totalCurrencyCode"),new o.default("list"),new o.default("listResponse"),new o.default("isDynamicReplyButtonsMsg"),new o.default("dynamicReplyButtons"),new o.default("selectedButtonId"),new o.default("sellerJid"),new o.default("deprecatedMms3Url"),new o.default("encFilehash"),new u.default("msgRowOpaqueData",u.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),new o.default("thumbnailDirectPath"),new o.default("thumbnailSha256"),new o.default("thumbnailEncSha256"),new o.default("thumbnailHeight"),new o.default("thumbnailWidth"),new o.default("pendingReadReceipt"),new s.default(["from","pendingReadReceipt"])]).version((0,p.messageAddIsSendFailureProperties)(),[new o.default("isSendFailure")]).version((0,p.messageAddPaymentTxnStatus)(),[new o.default("paymentTxnStatus")]).version((0,p.messageAddProductListPreviewInfo)(),[new o.default("productListItemCount")]).version((0,p.messageAddPrivacyModeFields)(),[new o.default("privacyModeWhenSent"),new o.default("bizPrivacyStatus")]).version((0,p.messageAddProductListPreviewHeaderImage)(),[new o.default("productHeaderImageRejected")]).version((0,p.messageAddDisappearingModeInitiator)(),[new o.default("disappearingModeInitiator")]).version((0,p.messageAddGroupInviteV4)(),[new o.default("inviteGrp"),new o.default("inviteGrpName"),new o.default("comment"),new o.default("inviteCode"),new o.default("inviteCodeExp")]).view((function(e){return e})).enablePropFilter(!0).useDbMsgEncKeyForEncryptedCol(!0)},t.getTable=function(){return(0,d.getStorage)().table("message")};var i=a(n(92682)),o=a(n(17905)),s=a(n(39663)),u=r(n(22692)),l=a(n(42061)),c=a(n(52231)),d=n(28367),f=a(n(55664)),p=n(62125)},36435:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("missing-keys").version((0,s.missingKeysCreateTable)(),[new o.default("keyHex"),new a.default("keyId"),new a.default("timestamp"),new a.default("deviceResponses")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("missing-keys")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},41203:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("orphan-payment-notification").version((0,s.orphanPaymentNotificationCreateTable)(),[new o.default("msgKey"),new a.default("receiver"),new a.default("currency"),new a.default("amount1000"),new a.default("type"),new a.default("status"),new a.default("ts")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("orphan-payment-notification")};var a=r(n(17905)),i=(n(49509),n(28367)),o=r(n(55664)),s=n(62125)},75256:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("orphan-receipt").version((0,s.orphanReceiptCreateTable)(),[new o.default("msgKey"),new a.default("delivery"),new a.default("read"),new a.default("played")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("orphan-receipt")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},38076:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("participant").version((0,u.participantCreateTable)(),[new s.default("groupId"),new i.default("senderKey"),new i.default("participants"),new i.default("admins"),new i.default("rotateKey"),new i.default("version"),new a.default("participants"),new i.default("deviceSyncComplete")]).view((function(e){return e}))},t.getTable=function(){return(0,o.getStorage)().table("participant")};var a=r(n(92682)),i=r(n(17905)),o=n(28367),s=r(n(55664)),u=n(62125)},5868:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("peer-message").version((0,s.peerMessageCreateTable)(),[new o.default("id"),new a.default("to"),new a.default("type"),new a.default("subtype"),new a.default("appStateSyncKeyShare"),new a.default("appStateSyncKeyRequest"),new a.default("appStateFatalExceptionNotification")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("peer-message")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},57479:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("pending-mutations").version((0,u.pendingMutationsCreateTable)(),[new o.default("id"),new a.default("collection"),new a.default("index"),new i.default("index"),new a.default("timestamp"),new i.default("collection"),new a.default("version"),new a.default("operation"),new a.default("binarySyncAction")]).view((function(e){return e}))},t.getTable=function(){return(0,s.getStorage)().table("pending-mutations")};var a=r(n(17905)),i=r(n(42061)),o=r(n(96600)),s=n(28367),u=n(62125)},86880:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("profile-pic-thumb").version((0,s.profilePicThumbCreateTable)(),[new o.default("id"),new a.default("tag"),new a.default("raw"),new a.default("eurl"),new a.default("previewEurl")]).view((function(e){return{id:e.id,tag:e.tag,raw:e.raw,eurl:e.eurl,previewEurl:e.previewEurl}}))},t.getTable=function(){return(0,i.getStorage)().table("profile-pic-thumb")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},37980:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("quick-reply").version((0,s.quickReplyCreateTable)(),[new o.default("id"),new a.default("shortcut"),new a.default("message"),new a.default("count"),new a.default("keywords")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("quick-reply")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},16059:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("recent-stickers").version((0,s.recentStickersCreateTable)(),[new o.default("id"),new a.default("timestamp"),new a.default("sticker"),new a.default("msgId")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("recent-stickers")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},45441:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("sync-actions").version((0,l.syncActionsCreateTable)(),[new u.default("index"),new a.default("keyId"),new a.default("version"),new a.default("actionState"),new o.default("actionState"),new a.default("modelId"),new a.default("modelType"),new i.default(["modelId","modelType","actionState"]),new a.default("valueMac"),new a.default("indexMac"),new o.default("indexMac"),new a.default("collection"),new o.default("collection"),new a.default("timestamp"),new a.default("action"),new o.default("action"),new a.default("binarySyncAction")]).view((function(e){return e}))},t.getTable=function(){return(0,s.getStorage)().table("sync-actions")};var a=r(n(17905)),i=r(n(39663)),o=r(n(42061)),s=(n(27291),n(28367)),u=r(n(55664)),l=n(62125)},10776:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,u.getStorage)().add("sync-keys").version((0,c.syncKeysCreateTable)(),[new l.default("keyId"),new i.default("timestamp"),new i.default("fingerprint"),new o.default("keyData",o.ENCRYPTED_VALUE_TYPE.ARRAY_BUFFER),new i.default("keyEpoch"),new s.default("keyEpoch")]).view((function(e){return e}))},t.getTable=function(){return(0,u.getStorage)().table("sync-keys")};var i=a(n(17905)),o=r(n(22692)),s=a(n(42061)),u=n(28367),l=a(n(55664)),c=n(62125)},45763:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("tasks-scheduled-time").version((0,s.tasksScheduledTimeCreateTable)(),[new o.default("taskName"),new a.default("time")]).view((function(e){return e}))},t.getTable=function(){return(0,i.getStorage)().table("tasks-scheduled-time")};var a=r(n(17905)),i=n(28367),o=r(n(55664)),s=n(62125)},35912:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("verified-business-name").version((0,u.verifiedBusinessNameCreateTable)(),[new s.default("id"),new a.default("serial"),new a.default("name"),new a.default("isApi"),new a.default("level"),new a.default("actualActors"),new a.default("hostStorage"),new a.default("privacyModeTs")]).version((0,u.verifiedBusinessNameAddPrivacyMode)(),[new a.default("privacyMode"),new i.default("actualActors"),new i.default("hostStorage"),new i.default("privacyModeTs")]).view((function(e){return e}))},t.getTable=function(){return(0,o.getStorage)().table("verified-business-name")};var a=r(n(17905)),i=r(n(55996)),o=n(28367),s=r(n(55664)),u=n(62125)},28367:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=function(){var e=new s.default(c);(d=new u.default(e)).addErrorHandler(i.default.AbortError,(function(e){e.message.includes("QuotaExceededError")&&l.default.trigger("storage_not_enough_space")}))},t.getStorage=function(){return(0,o.default)(null!=d,"[model-storage] Storage should be created first before being accessed"),d},t.destroyStorage=function(){if(null==d)return r.reject(new Error("[model-storage] Storage should be created first before being destroyed"));return d.purge().then((function(){d=null})).catch((function(e){throw d=null,e}))},t.DATABASE_NAME=void 0;var i=a(n(86128)),o=a(n(41143)),s=a(n(17435)),u=a(n(74198)),l=a(n(14054)),c="model-storage";t.DATABASE_NAME=c;var d=null},25220:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.restoreGroupsContactsAndProfilePics=function(){__LOG__(2)`[InitFromStorage] will attempt to initialize from storage`,v.default.trigger("me_ready");var e=(0,g.getPushname)(),t=(0,g.getLastMobilePlatform)();if(null==t)return r.reject(new Error("platform not found in UserPrefs."));return v.default.pushname=e,v.default.platform=t,__LOG__(2)`[InitFromStorage] important metadata loaded`,(0,y.initializeWithoutGKs)().then((function(){var e=r.resolve(),t=r.resolve();e=(0,Y.getTable)().all().then((function(e){N.default.checksum=(0,k.getContactChecksum)()||"",N.default.add(e.map(O.hydrateWids),{silent:!0})})),t=(0,B.getTable)().all().then((function(e){x.default.add(e.map(O.hydrateWids),{silent:!0}),e.forEach((function(e){return(0,R.updateSubject)((0,I.createWidFromWidLike)(e.id),e.subject)}))}));var n=(0,T.getTable)().all().then((function(e){w.default.add(e.map(O.hydrateWids),{silent:!0})}));return r.all([e,t,n])})).then((function(){}))},t.restoreBlocklist=function(){return(0,d.getTable)().all().then((function(e){f.default.initializeFromCache(e.map(O.hydrateWids))}))},t.restoreChatsAndMessages=function(){return te.apply(this,arguments)},t.restoreLabels=function(){if((0,U.canDisplayLabel)())return(0,K.getTable)().all().then((function(e){F.default.initializeFromCache(e)}));return r.resolve()},t.restoreLabelAssociations=function(){if((0,U.canDisplayLabel)())return(0,W.getTable)().all().then((function(e){F.default.initializeAssociationsFromCache(e)}));return r.resolve()},t.restoreQuickReplies=function(){if((0,U.canSendQuickReply)())return(0,V.getTable)().all().then((function(e){G.default.initializeFromCache(e)}));return r.resolve()},t.restoreRecentStickers=function(){if(z.default.supportsFeature(z.default.F.MD_BACKEND)&&P.default.webServerStickerPanel)return(0,H.getTable)().all().then((function(e){return L.default.initializeFromCache(e)}));return r.resolve()},t.restoreCarts=function(){if((0,U.cartPropEnabled)())return(0,j.getTable)().all().then((function(e){D.default.initializeFromCache(e.map(O.hydrateWids))}));return r.resolve()};var i=a(n(63038)),o=a(n(87757)),s=a(n(48926)),u=a(n(81109)),l=n(19087),c=n(90066),d=n(79874),f=a(n(76088)),p=n(8985),h=a(n(26671)),_=a(n(23169)),v=a(n(93743)),m=a(n(34263)),g=n(71701),y=n(99417),E=n(322),S=a(n(66312)),b=a(n(5315)),T=n(86880),w=a(n(99838));n(85485);var A=n(24003),C=n(91828),O=n(50871),M=n(35912),I=n(75793),k=n(48466),P=a(n(63056)),R=n(69056),D=a(n(73293)),N=a(n(48629)),L=a(n(77943)),x=a(n(13361)),U=n(31230),F=a(n(6705)),G=a(n(40113)),B=n(38215),j=n(80305),Y=n(9010),K=n(73916),W=n(8498),V=n(37980),H=n(16059),$=a(n(17894)),z=a(n(22021));function q(e){return null!=e.t&&(0,c.happenedWithin)((0,c.castToUnixTime)(e.t),c.DAY_SECONDS)||null!=e.pin&&e.pin>0}function J(e){return r.all(e.map((function(e){var t=q(e);return(0,A.getKeyMsgsFromChatHistory)(e,t).then((function(n){var r=n.anchor,a=n.previewMsg,i=n.lastReceivedKey;return{chat:(0,u.default)((0,u.default)({},e),{},{unreadMsgAnchorId:t?r:void 0}),previewMsg:a,lastReceivedKey:i}}))})))}function Q(e){var t=function(e){var t=[],n=[];return e.forEach((function(e){var a=e.chat,i=e.previewMsg,o=e.lastReceivedKey;q(a)||i&&i.id!==o?t.push(function(e,t){return q(e)?e.unreadCount>=20?X(e,t).then((function(){return function(e){if(!e.unreadMsgAnchorId)return __LOG__(3)`unreadMsgAnchorId is not defined`,r.resolve();return(0,E.getTable)().equals(["id"],e.unreadMsgAnchorId).then((function(t){if(0!==t.length){var n=(0,A.getInChatMsgId)(t[0].internalId||""),r=Math.max(0,n-5);return(0,A.queryChatMessageHelper)((0,A.craftInternalId)(e.id,r),(0,A.craftInternalId)(e.id,n+5),{lowerInclusive:!0,upperInclusive:!1}).then((function(t){if(!(t.length-5<0)){var n=t[t.length-5].id,r=t.map((function(e){var t=(0,A.hydrateMessage)(e);return t.invis=!0,t}));return S.default.processMultipleMessages((0,I.createWidFromWidLike)(e.id),r,{pendingMsgsDone:!0,resume:!1,add:"unread",isHistory:!0,firstUnreadKey:b.default.fromString(n)},new _.default)}})).then()}__LOG__(3)`Unread anchor message does not exist in message table`}))}(e)})):0===e.unreadCount?X(e,t):(__LOG__(2)`restoreMessagesForChat: restoring last ${e.unreadCount+5} messages.`,(0,A.queryChatMessageHelper)(`${e.id}_/`,`${e.id}_g`,{reverse:!0,limit:e.unreadCount+5}).then((function(t){return S.default.processMultipleMessages((0,I.createWidFromWidLike)(e.id),t.map(A.hydrateMessage).reverse(),{pendingMsgsDone:!0,resume:!1,add:"last",isHistory:!0})})).then()):X(e,t)}(a,i).then((function(){if(a.unreadMsgAnchorId){var e=b.default.fromString(a.unreadMsgAnchorId),t=S.default.get(e);if(!t)return void __LOG__(3)`Unread anchor message is not in message collection.`;var n=h.default.get((0,I.createWidFromWidLike)(a.id));n&&(n.unreadMsgAnchor=t)}}))):n.push(String(o))})),{tasks:t,lastMessageKeys:n}}(e),n=t.tasks,a=t.lastMessageKeys;return n.push(function(e){return(0,E.getTable)().bulkGet(e).then(function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.all(t.map((function(e){if(!e)return r.resolve();var t=(0,A.hydrateMessage)(e);return t.invis=!0,S.default.processMultipleMessages(t.id.remote,[t],{pendingMsgsDone:!1,resume:!1,add:"last",isHistory:!0})})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).catch((function(e){throw __LOG__(4,void 0,new Error)`loadLastMessagesFromDB: failed with error: ${e}`,e}))}(a)),r.all(n)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.internalId){e.next=6;break}return e.next=3,(0,A.queryChatMessageHelper)(n.internalId,`${t.id}_g`,{lowerInclusive:!0});case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,(0,A.queryChatMessageHelper)(`${t.id}_/`,`${t.id}_g`,{reverse:!0,limit:1});case 8:r=e.sent;case 9:__LOG__(2)`processPreviewMessageInChat: restoring ${r.length} message.`,S.default.processMultipleMessages((0,I.createWidFromWidLike)(t.id),r.map((function(e){var t=(0,A.hydrateMessage)(e);return t.invis=!0,t})),{pendingMsgsDone:!1,resume:!1,add:"last",isHistory:!0});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){switch(e){case"unknown":return m.default.VERIFIED_LEVEL.UNKNOWN;case"low":return m.default.VERIFIED_LEVEL.LOW;case"high":return m.default.VERIFIED_LEVEL.HIGH;default:return m.default.VERIFIED_LEVEL.UNKNOWN}}function te(){return(te=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.default.waitForFinalDbMsgEncKey();case 2:return e.abrupt("return",(0,y.initializeWithoutGKs)().then(C.updateUnreadCount).then((0,s.default)(o.default.mark((function e(){var t,n,r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getTable)().all();case 2:return(t=e.sent).sort((function(e,t){var n,r;return-((null!==(n=e.t)&&void 0!==n?n:0)-(null!==(r=t.t)&&void 0!==r?r:0))})),h.default.add(t.map((function(e){return(0,O.hydrateWids)((0,u.default)({},e))})),{silent:!0,merge:!0}),e.next=7,ne(t,100);case 7:return n=e.sent,r=(0,i.default)(n,1),a=r[0],e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).then(re).catch((function(e){throw __LOG__(4,void 0,new Error)`restoreChatsAndMessages: failed with error: ${e}`,e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){if(0===e.length)return[r.resolve()];for(var n=[],a=new l.PromiseQueue,i=function(r){var i=e.slice(r,r+t),u=a.enqueue((0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(i);case 2:return t=e.sent,e.next=5,Q(t);case 5:t.forEach((function(e){var t=e.chat,n=h.default.get(t.id);n&&n.set({pendingInitialLoading:!1})}));case 6:case"end":return e.stop()}}),e)}))));n.push(u)},u=0;u<e.length;u+=t)i(u);return n}function re(){return ae.apply(this,arguments)}function ae(){return(ae=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.getTable)().all();case 2:e.sent.forEach((function(e){var t;try{t=(0,I.createUserWid)(e.id)}catch(e){return __LOG__(4,void 0,new Error,!0)`restore-business-info: invalid wid`,void SEND_LOGS("restore-business-info: invalid wid")}var n=h.default.get(t);if(n){var r={isBusiness:!0,isEnterprise:e.isApi,verifiedName:e.name,verifiedLevel:ee(e.level||"unknown"),privacyMode:e.privacyMode};n.contact.set(r),"high"===e.level&&e.name&&!n.contact.name&&n.contact.set({name:e.name})}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},62125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pendingMutationsCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.collectionVersionCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.syncActionsCreateTable=function(){return(0,r.getStorage)().versions.version(2)},t.contactCreateTable=function(){return(0,r.getStorage)().versions.version(3)},t.blocklistCreateTable=function(){return(0,r.getStorage)().versions.version(4)},t.profilePicThumbCreateTable=function(){return(0,r.getStorage)().versions.version(5)},t.chatCreateTable=function(){return(0,r.getStorage)().versions.version(6)},t.messageCreateTable=function(){return(0,r.getStorage)().versions.version(7)},t.messageInfoCreateTable=function(){return(0,r.getStorage)().versions.version(8)},t.participantCreateTable=function(){return(0,r.getStorage)().versions.version(9)},t.orphanReceiptCreateTable=function(){return(0,r.getStorage)().versions.version(10)},t.deviceListCreateTable=function(){return(0,r.getStorage)().versions.version(11)},t.inactiveReceiptCreateTable=function(){return(0,r.getStorage)().versions.version(12)},t.verifiedBusinessNameCreateTable=function(){return(0,r.getStorage)().versions.version(13)},t.historySyncNotificationsCreateTable=function(){return(0,r.getStorage)().versions.version(14)},t.encryptedMutationsCreateTable=function(){return(0,r.getStorage)().versions.version(15)},t.labelCreateTable=function(){return(0,r.getStorage)().versions.version(16)},t.labelAssociationCreateTable=function(){return(0,r.getStorage)().versions.version(17)},t.quickReplyCreateTable=function(){return(0,r.getStorage)().versions.version(18)},t.abpropsConfigCreateTable=function(){return(0,r.getStorage)().versions.version(19)},t.groupMetadataCreateTable=function(){return(0,r.getStorage)().versions.version(20)},t.syncKeysCreateTable=function(){return(0,r.getStorage)().versions.version(21)},t.tasksScheduledTimeCreateTable=function(){return(0,r.getStorage)().versions.version(22)},t.activeMessageRangesCreateTable=function(){return(0,r.getStorage)().versions.version(23)},t.ftsIndexingQueueCreateTable=function(){return(0,r.getStorage)().versions.version(24)},t.cartCreateTable=function(){return(0,r.getStorage)().versions.version(25)},t.missingKeysCreateTable=function(){return(0,r.getStorage)().versions.version(26)},t.messageAddIsSendFailureProperties=function(){return(0,r.getStorage)().versions.version(27)},t.contactAddIsContactSyncCompleted=function(){return(0,r.getStorage)().versions.version(28)},t.messageAddPaymentTxnStatus=function(){return(0,r.getStorage)().versions.version(29)},t.messageAddProductListPreviewInfo=function(){return(0,r.getStorage)().versions.version(30)},t.recentStickersCreateTable=function(){return(0,r.getStorage)().versions.version(31)},t.verifiedBusinessNameAddPrivacyMode=function(){return(0,r.getStorage)().versions.version(32)},t.messageAddPrivacyModeFields=function(){return(0,r.getStorage)().versions.version(33)},t.messageInfoAddDeliveryPrivacyMode=function(){return(0,r.getStorage)().versions.version(34)},t.messageAddProductListPreviewHeaderImage=function(){return(0,r.getStorage)().versions.version(35)},t.contactAddDisappearingModeProperties=function(){return(0,r.getStorage)().versions.version(36)},t.chatAddDisappearingModeInitiator=function(){return(0,r.getStorage)().versions.version(37)},t.messageAddDisappearingModeInitiator=function(){return(0,r.getStorage)().versions.version(38)},t.messageAddGroupInviteV4=function(){return(0,r.getStorage)().versions.version(39)},t.groupInviteV4CreateTable=function(){return(0,r.getStorage)().versions.version(40)},t.orphanPaymentNotificationCreateTable=function(){return(0,r.getStorage)().versions.version(41)},t.deviceListAddDelete=function(){return(0,r.getStorage)().versions.version(42)},t.encryptHistorySyncDirectPath=function(){return(0,r.getStorage)().versions.version(43)},t.peerMessageCreateTable=function(){return(0,r.getStorage)().versions.version(44)},t.addUnreadMentionToChatTable=function(){return(0,r.getStorage)().versions.version(45)},t.encryptHistorySyncFilehash=function(){return(0,r.getStorage)().versions.version(46)};var r=n(28367)},71802:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.doPendingDeviceSync=function(){return d.apply(this,arguments)},t.addUserToPendingDeviceSync=function(e){if(s.default.supportsFeature(s.default.F.MD_BACKEND))return(0,u.getTable)().bulkCreateOrMerge(e.map((function(e){return{id:e}})));return r.resolve()};var i=a(n(87757)),o=a(n(48926)),s=a(n(22021)),u=n(35993),l=n(24963),c=n(75793);function d(){return(d=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.default.supportsFeature(s.default.F.MD_BACKEND)){e.next=13;break}return e.prev=1,e.next=4,(0,u.getTable)().all();case 4:return t=e.sent,(0,l.syncDeviceList)(t.map((function(e){return(0,c.createWid)(e.id)}))),e.next=8,(0,u.getTable)().bulkRemove(t.map((function(e){return e.id})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),__LOG__(4,!0,new Error,!0)`doPendingDeviceSync failed during RESUME_WITH_OPEN_TAB`,SEND_LOGS(`doPendingDeviceSync failed during RESUME_WITH_OPEN_TAB ${e.t0}`);case 13:return e.next=15,r.resolve();case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}},69016:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){null==a&&((0,c.createStorage)(),(0,s.addTable)(),(0,o.addTable)(),(0,u.addTable)(),(0,l.addTable)(),a=(0,c.getStorage)().initialize().catch((function(e){throw __LOG__(4,!0,new Error,!0)`Assertion failed!`,SEND_LOGS("Failed to initialize offd storage"),e})));return a},t.destroy=function(){return(0,c.destroyStorage)().catch((function(){return d.resolve(new i.default(c.DATABASE_NAME).delete())})).finally((function(){a=null}))};var a,i=r(n(86128)),o=n(38075),s=n(71794),u=n(93898),l=n(35993),c=n(68059),d=n(60077).default},38075:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("dangling-receipt").version((0,o.getStorage)().versions.version(1),[new i.default("id"),new a.default("receipts")]).view((function(e){return{id:e.id,receipts:e.receipts}}))},t.getTable=function(){return(0,o.getStorage)().table("dangling-receipt")};var a=r(n(17905)),i=r(n(96600)),o=n(68059)},93898:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("peer-read-receipt").version((0,o.getStorage)().versions.version(2),[new i.default("id"),new a.default("msgKeys"),new a.default("ts")]).view((function(e){return{id:e.id,ts:e.ts,msgKeys:e.msgKeys}}))},t.getTable=function(){return(0,o.getStorage)().table("peer-read-receipt")};var a=r(n(17905)),i=r(n(96600)),o=n(68059)},35993:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,a.getStorage)().add("pending-device-sync").version((0,a.getStorage)().versions.version(4),[new i.default("id")]).view((function(e){return{id:e.id}}))},t.getTable=function(){return(0,a.getStorage)().table("pending-device-sync")};var a=n(68059),i=r(n(55664))},71794:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("read-receipt").version((0,i.getStorage)().versions.version(0),[new o.default("id"),new a.default("externalIds")]).delete((0,i.getStorage)().versions.version(3)).view((function(e){return{id:e.id,externalIds:e.externalIds}}))},t.getTable=function(){return(0,i.getStorage)().table("read-receipt")};var a=r(n(17905)),i=n(68059),o=r(n(55664))},68059:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=function(){var e=new s.default(c);(d=new u.default(e)).addErrorHandler(i.default.AbortError,(function(e){e.message.includes("QuotaExceededError")&&l.default.trigger("storage_not_enough_space")}))},t.getStorage=function(){return(0,o.default)(null!=d,"[offd-storage] Storage should be created first before being accessed"),d},t.destroyStorage=function(){if(null==d)return r.reject(new Error("[offd-storage] Storage should be created first before being destroyed"));return d.purge().then((function(){d=null})).catch((function(e){throw d=null,e}))},t.DATABASE_NAME=void 0;var i=a(n(86128)),o=a(n(41143)),s=a(n(17435)),u=a(n(74198)),l=a(n(14054)),c="offd-storage";t.DATABASE_NAME=c;var d=null},91828:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateUnreadCount=function(){return h.apply(this,arguments)};var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),u=a(n(22021)),l=n(93898),c=a(n(34263)),d=n(322),f=a(n(5315)),p=n(28367);function h(){return(h=(0,s.default)(i.default.mark((function e(){var t,n,a,s,h,_,v;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.default.supportsFeature(u.default.F.MD_BACKEND)){e.next=19;break}return e.next=3,(0,l.getTable)().all();case 3:return t=e.sent,n=new Map,a=new Set,s=[],h=[],t.forEach((function(e){e.msgKeys.forEach((function(e){var t=f.default.fromString(e).remote.toString();t!==c.default.STATUS_WID&&(n.set(t,{unreadCount:0,lastUnreadMsgRowId:void 0}),a.add(e))}))})),_=Array.from(n.keys()),e.next=12,(0,d.getTable)().anyOf(["from","pendingReadReceipt"],_.map((function(e){return[e,1]})),{shouldDecrypt:!1});case 12:return(v=e.sent).forEach((function(e){var t=n.get(e.from),r=e.rowId,i=e.id;null!=t&&null!=r&&a.has(i)&&(null==t.lastUnreadMsgRowId||r>t.lastUnreadMsgRowId)&&(t.lastUnreadMsgRowId=r)})),v.forEach((function(e){var t=n.get(e.from),r=e.rowId;null!=t&&null!=r&&null!=t.lastUnreadMsgRowId&&(r<=t.lastUnreadMsgRowId?s.push({id:e.id,ack:c.default.ACK.READ,pendingReadReceipt:null}):t.unreadCount+=1)})),_.forEach((function(e){var t=n.get(e);null!=t&&null!=t.lastUnreadMsgRowId&&h.push({id:e,unreadCount:t.unreadCount})})),e.next=18,(0,p.getStorage)().lock(["message","chat"],(function(e){var t=(0,o.default)(e,2),n=t[0],a=t[1];return r.all([n.bulkCreateOrMerge(s),a.bulkCreateOrMerge(h)])}));case 18:return e.abrupt("return",(0,l.getTable)().clear());case 19:return e.abrupt("return",r.resolve());case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},40173:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){null==a&&((0,o.createStorage)(),(0,s.addTable)(),(0,u.addTable)(),(0,l.addTable)(),(0,c.addTable)(),(0,d.addTable)(),(0,f.addTable)(),(0,p.addTable)(),a=(0,o.getStorage)().initialize().catch((function(e){throw __LOG__(4,!0,new Error,!0)`Assertion failed!`,SEND_LOGS("Failed to initialize signal storage"),e})));return a},t.destroy=function(){return(0,o.destroyStorage)().catch((function(){return h.resolve(new i.default(o.DATABASE_NAME).delete())})).finally((function(){a=null}))},Object.defineProperty(t,"getBaseKeyTable",{enumerable:!0,get:function(){return s.getTable}}),Object.defineProperty(t,"getIdentityTable",{enumerable:!0,get:function(){return u.getTable}}),Object.defineProperty(t,"getMetaTable",{enumerable:!0,get:function(){return l.getTable}}),Object.defineProperty(t,"getPreKeyTable",{enumerable:!0,get:function(){return c.getTable}}),Object.defineProperty(t,"getSenderKeyTable",{enumerable:!0,get:function(){return d.getTable}}),Object.defineProperty(t,"getSessionTable",{enumerable:!0,get:function(){return f.getTable}}),Object.defineProperty(t,"getSignedPreKeyTable",{enumerable:!0,get:function(){return p.getTable}});var a,i=r(n(86128)),o=n(54133),s=n(49823),u=n(17250),l=n(14922),c=n(58570),d=n(90151),f=n(91779),p=n(54758),h=n(60077).default},49823:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,s.getStorage)().add("baseKey-store").version((0,u.baseKeyCreateTable)(),[new o.default("id"),new a.default("address"),new a.default("originalMsgId"),new a.default("baseKey"),new i.default(["address","originalMsgId"])]).view((function(e){return{id:e.id,address:e.address,originalMsgId:e.originalMsgId,baseKey:e.baseKey}}))},t.getTable=function(){return(0,s.getStorage)().table("baseKey-store")};var a=r(n(17905)),i=r(n(39663)),o=r(n(96600)),s=n(54133),u=n(34530)},17250:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("identity-store").version((0,s.identityCreateTable)(),[new o.default("identifier"),new a.default("identityKey"),new a.default("rowId")]).view((function(e){return{identifier:e.identityKey,identityKey:e.identityKey,rowId:e.rowId}}))},t.getTable=function(){return(0,i.getStorage)().table("identity-store")};var a=r(n(17905)),i=n(54133),o=r(n(55664)),s=n(34530)},14922:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("signal-meta-store").version((0,s.metaCreateTable)(),[new o.default("key"),new a.default("value")]).view((function(e){return{key:e.key,value:e.value}}))},t.getTable=function(){return(0,i.getStorage)().table("signal-meta-store")};var a=r(n(17905)),i=n(54133),o=r(n(55664)),s=n(34530)},58570:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("prekey-store").version((0,s.preKeyCreateTable)(),[new i.default("keyId"),new a.default("keyPair"),new a.default("isDirectDistribution")]).view((function(e){return{keyId:e.keyId,keyPair:e.keyPair,isDirectDistribution:e.isDirectDistribution}}))},t.getTable=function(){return(0,o.getStorage)().table("prekey-store")};var a=r(n(17905)),i=r(n(96600)),o=n(54133),s=n(34530)},90151:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("senderkey-store").version((0,u.senderKeyCreateTable)(),[new s.default("senderKeyName"),new a.default("senderKey"),new a.default("senderId"),new i.default("senderId")]).view((function(e){return{senderKeyName:e.senderKeyName,senderKey:e.senderKey,senderId:e.senderId}}))},t.getTable=function(){return(0,o.getStorage)().table("senderkey-store")};var a=r(n(17905)),i=r(n(42061)),o=n(54133),s=r(n(55664)),u=n(34530)},91779:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,i.getStorage)().add("session-store").version((0,s.sessionCreateTable)(),[new o.default("address"),new a.default("session")]).view((function(e){return{address:e.address,session:e.session}}))},t.getTable=function(){return(0,i.getStorage)().table("session-store")};var a=r(n(17905)),i=n(54133),o=r(n(55664)),s=n(34530)},54758:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.addTable=function(){(0,o.getStorage)().add("signed-prekey-store").version((0,s.signedPreKeyCreateTable)(),[new i.default("keyId"),new a.default("keyPair"),new a.default("signature")]).view((function(e){return{keyId:e.keyId,keyPair:e.keyPair,signature:e.signature}}))},t.getTable=function(){return(0,o.getStorage)().table("signed-prekey-store")};var a=r(n(17905)),i=r(n(96600)),o=n(54133),s=n(34530)},54133:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=function(){var e=new s.default(c);(d=new u.default(e)).addErrorHandler(i.default.AbortError,(function(e){e.message.includes("QuotaExceededError")&&l.default.trigger("storage_not_enough_space")}))},t.getStorage=function(){return(0,o.default)(null!=d,"[signal-storage] Storage should be created first before being accessed"),d},t.destroyStorage=function(){if(null==d)return r.reject(new Error("[signal-storage] Storage should be created first before being destroyed"));return d.purge().then((function(){d=null})).catch((function(e){throw d=null,e}))},t.DATABASE_NAME=void 0;var i=a(n(86128)),o=a(n(41143)),s=a(n(17435)),u=a(n(74198)),l=a(n(14054)),c="signal-storage";t.DATABASE_NAME=c;var d=null},34530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityCreateTable=function(){return(0,r.getStorage)().versions.version(0)},t.metaCreateTable=function(){return(0,r.getStorage)().versions.version(1)},t.preKeyCreateTable=function(){return(0,r.getStorage)().versions.version(2)},t.sessionCreateTable=function(){return(0,r.getStorage)().versions.version(3)},t.signedPreKeyCreateTable=function(){return(0,r.getStorage)().versions.version(4)},t.baseKeyCreateTable=function(){return(0,r.getStorage)().versions.version(5)},t.senderKeyCreateTable=function(){return(0,r.getStorage)().versions.version(6)};var r=n(54133)},86386:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926));function s(){return(s=(0,o.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=window.caches)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.keys();case 5:return n=e.sent,e.next=8,r.all(n.map((function(e){return t.delete(e)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},80717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={REQUEST_STREAMING_INFO:"GET_STREAMING_INFO",REQUEST_RMR:"REQUEST_RMR",SEND_STREAMING_CHUNK:"SEND_STREAMING_CHUNK",EXP_BACKOFF:"EXP_BACKOFF",LOG:"LOG",UPLOAD_LOGS:"UPLOAD_LOGS",REQUEST_DOCUMENT_DOWNLOAD:"REQUEST_DOCUMENT_DOWNLOAD",SET_L10N:"SET_L10N",STREAMING_SUPPORTED:"STREAMING_SUPPORTED",REMOVE_PP:"REMOVE_PP",LOGOUT:"LOGOUT",CLEAN_ASSETS:"CLEAN_ASSETS",PRELOAD_LAZY_LOADED_BUNDLES:"PRELOAD_LAZY_LOADED_BUNDLES",ACTIVE_TAB:"ACTIVE_TAB"};t.default=n},73294:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=function(){function e(t){var n=this;(0,i.default)(this,e),this.onMessage=function(t){if(t.data&&t.data.action){var a=t.data;if(t.ports&&0!==t.ports.length){var i=t.ports;if(e.isSW()||!window.navigator.serviceWorker||t.source===window.navigator.serviceWorker.controller)("function"==typeof t.waitUntil?function(e){return t.waitUntil(e)}:function(){})(r.resolve(n.requestHandler(a)).then((function(e){i[0].postMessage(e)})).catch((function(e){i[0].postMessage({error:e&&e.toString()})})))}}},this.requestHandler=t}return(0,o.default)(e,[{key:"init",value:function(){var t=e.isSW()?self:window.navigator.serviceWorker;try{if(!t)return;t.addEventListener("message",this.onMessage)}catch(e){}}}],[{key:"isSW",value:function(){return"undefined"==typeof window}},{key:"getRequestor",value:function(t){return e.isSW()?"string"==typeof t?self.clients.get(t):r.resolve(t):window.navigator.serviceWorker?window.navigator.serviceWorker.ready.then((function(){return window.navigator.serviceWorker?window.navigator.serviceWorker.controller:null})):r.resolve(null)}},{key:"broadcast",value:function(t,n){return e.isSW()?self.clients.matchAll().then((function(a){return 0===a.length?r.reject("No clients available."):r.all(a.map((function(r){return e.request(r,t,n)})))})):r.reject(new Error("Broadcast called from non-serviceworker."))}},{key:"request",value:function(t,n,a){var i=new MessageChannel;return new r((function(r,o){return i.port1.onmessage=function(e){e.data&&e.data.error?o(e.data.error):r(e.data)},e.getRequestor(t).then((function(e){if(!e)return o("No ServiceWorker controlling this client.");e.postMessage({action:n,message:a,version:"2.2126.11"},[i.port2])}))}))}}]),e}();t.default=s},79922:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"open",value:function(){var e=this;return this._openPromise?this._openPromise:this._closePromise?(this._openPromise=this._closePromise.catch((function(t){throw e._openPromise=null,t})).then((function(){return e._openPromise=null,e.open()})),this._openPromise):(this._openPromise=this.doOpen().catch((function(t){throw e._openPromise=null,t})).then((function(){e._openPromise=null})),this._openPromise)}},{key:"close",value:function(){var e=this;return this._closePromise?this._closePromise:this._openPromise?(this._closePromise=this._openPromise.catch((function(t){throw e._closePromise=null,t})).then((function(){return e._closePromise=null,e.close()})),this._closePromise):(this._closePromise=this.doClose().catch((function(t){throw e._closePromise=null,t})).then((function(){e._closePromise=null})),this._closePromise)}},{key:"get",value:function(e){var t=this;return this.open().then((function(){return t.doGet(e)}))}},{key:"queryByIndex",value:function(e,t){var n=this;return this.open().then((function(){return n.doQueryByIndex(e,t)}))}},{key:"getAll",value:function(){var e=this;return this.open().then((function(){return e.doGetAll()}))}},{key:"put",value:function(e,t){var n=this;return this.open().then((function(){return n.doPut(e,t)}))}},{key:"del",value:function(e){var t=this;return this.open().then((function(){return t.doDel(e)}))}},{key:"count",value:function(){var e=this;return this.open().then((function(){return e.doCount()}))}},{key:"clear",value:function(){var e=this;return this.open().then((function(){return e.doClear()}))}},{key:"doGet",value:function(){throw new Error("Not implemented")}},{key:"doQueryByIndex",value:function(){throw new Error("Not implemented")}},{key:"doGetAll",value:function(){throw new Error("Not implemented")}},{key:"doPut",value:function(){throw new Error("Not implemented")}},{key:"doDel",value:function(){throw new Error("Not implemented")}},{key:"doCount",value:function(){throw new Error("Not implemented")}},{key:"doClear",value:function(){throw new Error("Not implemented")}},{key:"doOpen",value:function(){throw new Error("Not implemented")}},{key:"doClose",value:function(){throw new Error("Not implemented")}}]),e}();t.default=o},97930:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={key:function(e){}};t.default=n},2459:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ABPropConfigs=void 0;t.ABPropConfigs={groups_dogfooding_ui:[308,"bool",!1],md_icdc_enabled:[309,"bool",!1],md_icdc_hash_length:[310,"int",10],played_self_enabled:[361,"bool",!1],ephemeral_24h_duration:[407,"bool",!1],disappearing_mode:[536,"bool",!1],ephemeral_allow_group_members:[432,"bool",!1],business_profile_refresh_m1_enabled:[470,"bool",!1],native_shop_preview_enabled:[636,"bool",!1],smb_collections_enabled:[451,"bool",!1],consumer_collections_enabled:[582,"bool",!1],should_deregister_on_syncd_fatal:[383,"bool",!0],group_catch_up:[559,"bool",!1],web_abprop_ctwa_context_compose_enabled:[591,"bool",!1],web_abprop_group_description_length:[592,"int",0],web_abprop_ephemeral_messages_allowed_values:[593,"string","604800"],web_abprop_collections_display:[584,"bool",!1],web_abprop_collections_management:[585,"bool",!1],web_abprop_drop_full_history_sync:[600,"bool",!1],stop_abprops_traffic_in_serverprops_response:[315,"bool",!1],enable_biz_activity_report_request:[455,"bool",!1],plm_products_max_batch_fetch_size:[464,"int",18],enable_granular_reject_reasons:[550,"bool",!1],elevating_profile_names_enabled:[604,"bool",!1],client_group_participants_limit:[618,"int",257]}},31940:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.compareServerPropsAndABProps=function(){new Map([["web_abprop_ctwa_context_compose_enabled",["ctwaContextCompose",o.default.ctwaContextCompose]],["web_abprop_group_description_length",["groupDescLength",o.default.groupDescLength]],["web_abprop_ephemeral_messages_allowed_values",["ephemeralMessagesAllowedValues",o.default.ephemeralMessagesAllowedValues]]]).forEach((function(e,t){var n=(0,a.getABPropConfigValue)(t);new i.default.WebcAbpropsValidation({abpropName:t,abpropValue:String(n),serverPropName:String(e[0]),serverPropValue:String(e[1])}).commit()}))};var a=n(4976),i=r(n(8643)),o=r(n(63056))},34670:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.updateAttributesLocalStorage=function(e,t,n,r){var l,c,d=null;null!=n&&((d=n)<600?d=600:d>s&&(d=s));var f=u()||{},p={abKey:null!=e?e:f.abKey,hash:null!=t?t:f.hash,refresh:null!==(l=null===(c=d)||void 0===c?void 0:c.toString())&&void 0!==l?l:f.refresh,lastSyncTime:r};(0,a.default)(i.default,"localStorage").setItem(o.default.KEY_ABPROPS,JSON.stringify(p))},t.isABPropsAfterFirstSync=function(){return null!=u()},t.getABKey=function(){var e=u();return null==e?void 0:e.abKey},t.getHash=function(){var e=u();return null==e?void 0:e.hash},t.getLastSyncTime=function(){var e=u(),t=null==e?void 0:e.lastSyncTime;if(null==t)return null;return parseInt(t,10)},t.getRefresh=function(){var e,t=u();return parseInt(null!==(e=null==t?void 0:t.refresh)&&void 0!==e?e:86400,10)};var a=r(n(91080)),i=r(n(2977)),o=r(n(62015)),s=604800;function u(){var e=(0,a.default)(i.default,"localStorage").getItem(o.default.KEY_ABPROPS);return null==e?null:JSON.parse(e)}},4976:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.clearABPropConfigs=function(){return p()},t.getAllABPropConfigs=function(){return v()},t.getABPropConfigValue=function(e){var t;l.default.supportsFeature(l.default.F.MD_BACKEND)||(__LOG__(4,!0,new Error,!0)`[ABProps] getABPropConfigValue() should not be called by non-MD build, config name: ${e}`,SEND_LOGS(`[ABProps] getABPropConfigValue() should not be called by non-MD build, config name: ${e}`));var n=u.ABPropConfigs[e],r=(0,o.default)(n,3),a=r[0],i=r[2];return null!==(t=_(a))&&void 0!==t?t:i},t.updateABPropsFromStorage=function(){return m.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(82808),u=n(2459),l=r(n(22021)),c=new Map,d=!1,f={};Object.keys(u.ABPropConfigs).forEach((function(e){var t=(0,o.default)(u.ABPropConfigs[e],1)[0];f[t]=e}));var p=function(){c.clear(),d=!1},h=function(e){e.forEach((function(e){c.set(e.configCode,e)})),d=!0},_=function(e){var t;return d?null===(t=c.get(e))||void 0===t?void 0:t.configValue:(__LOG__(4,!0,new Error,!0)`[ABProps] configs need to be initialized before its first access, config code: ${e}`,SEND_LOGS(`[ABProps] configs need to be initialized before its first access, config code: ${e}`),null)},v=function(){return Array.from(c.values())};function m(){return(m=(0,i.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.getABPropConfigs)();case 3:t=e.sent,n=t.map((function(e){var t=f[e.configCode];if(null!=t){var n=u.ABPropConfigs[t],r=(0,o.default)(n,3),a=r[0],i=r[1],l=r[2];return{configCode:a,configValue:(0,s.parseConfigValue)(e.configValue,i,l),configExpoKey:null}}__LOG__(4,!0,new Error,!0)`[ABProps] Should not store an ABProp (code: ${e.configCode}) that is unavailable for this client version`,SEND_LOGS(`[ABProps] Should not store an ABProp (code: ${e.configCode}) that is unavailable for this client version`)})),h(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),__LOG__(4,!0,new Error,!0)`[ABProps] Failed to update ABProps configs cache from storage`,SEND_LOGS("[ABProps] Failed to update ABProps configs cache from storage: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},1073:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(96486)),u=r(n(79140)),l=r(n(70496)),c=Math.pow(2,31)-1,d=new(function(){function e(){var t=this;(0,i.default)(this,e),this._alarms=new Map;var n=function(){t._alarms.size>0&&t._validateTimeouts()};l.default.on(l.JS_HALT_EVENT,n),l.default.on(l.CLOCK_CHANGE_BACKWARDS_EVENT,n),u.default.on(u.SKEW_CHANGE_EVENT,this._resetGlobalTimeouts.bind(this))}return(0,o.default)(e,[{key:"setLocalTimeout",value:function(e,t,n){return this._setTimeout(!1,e,t,n)}},{key:"setGlobalTimeout",value:function(e,t,n){return this._setTimeout(!0,e,t,n)}},{key:"clearTimeout",value:function(e){if(e){var t=this._alarms.get(e);t&&(window.clearTimeout(t.timeoutId),this._alarms.delete(e))}}},{key:"_setTimeout",value:function(e,t,n,r){var a=this;r&&this.clearTimeout(r);var i=r||s.default.uniqueId("alarm_timer_"),o=n-this._getTimeInMS(e),u=Math.min(o,c);if(o<0)return __LOG__(2)`Alarm:setTimeout:Cannot set alarm in the past.`,t(),i;var d=window.setTimeout((function(){n-a._getTimeInMS(e)<l.DEFAULT_THRESHOLD?(a._alarms.delete(i),t()):a._setTimeout(e,t,n,i)}),u);return this._alarms.set(i,{isGlobal:e,fn:t,expiration:n,timeoutId:d}),i}},{key:"_validateTimeouts",value:function(){var e=this;new Map(this._alarms).forEach((function(t,n){var r=t.isGlobal,a=t.fn,i=t.expiration;i<e._getTimeInMS(r)?(e.clearTimeout(n),a()):e._setTimeout(r,a,i,n)}))}},{key:"_resetGlobalTimeouts",value:function(){var e=this;new Map(this._alarms).forEach((function(t,n){var r=t.isGlobal,a=t.fn,i=t.expiration;r&&e._setTimeout(r,a,i,n)}))}},{key:"_getTimeInMS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 1e3*(e?u.default.globalUnixTime():u.default.localUnixTime())}}]),e}());t.default=d},77938:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=void 0;t.URL="undefined"},7696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWAURL=function(e){return n.test(e)},t.APICmd=void 0;t.APICmd={GROUP_INVITE:"GROUP_INVITE",MSG_SEND:"MSG_SEND",INVALID:"INVALID",CATALOG:"CATALOG",PRODUCT:"PRODUCT"};var n=/^whatsapp:\/\/.*/i},80877:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.parseConversionData=v,t.parseAPICmd=function(e){if("string"!=typeof e)return{resultType:u.APICmd.INVALID,data:void 0};var t=function(e){var t=e.match(d);if(t)return{code:t[2],url:t[1]||"/"};if(t=e.match(f))return{code:t[1]};if(t=e.match(p))return{code:t[1]};if(t=e.match(h))return{code:t[1]}}(e);if(t)return{resultType:u.APICmd.GROUP_INVITE,data:t};var n=function(e){var t=e.match(A)||e.match(C);if(t)return M(t);if(t=e.match(O))return(0,i.default)((0,i.default)({},M(t)),{},{url:"/"})}(e);if(n)return{resultType:u.APICmd.CATALOG,data:n};var r=function(e){var t=e.match(b)||e.match(T);if(t)return I(t);if(t=e.match(w))return(0,i.default)((0,i.default)({},I(t)),{},{url:"/"})}(e);if(r)return{resultType:u.APICmd.PRODUCT,data:r};var a=function(e){var t=e.match(g);if(t){var n=m(t[2]);if(n)return n.url=t[1]||"/",n}if(t=e.match(y))return m(t[1]);if(t=e.match(E))return m(t[1]);if(t=e.match(S)){var r;if(t[1]&&(r={phone:`${t[1]}@c.us`}),t[2]){var a=m(t[2]);a&&(r=(0,i.default)((0,i.default)({},r),a))}return r}}(e);if(a)return{resultType:u.APICmd.MSG_SEND,data:a};return{resultType:u.APICmd.INVALID,data:void 0}},t.matchCatalogUrl=t.matchProductUrl=void 0;var a,i=r(n(81109)),o=n(17643),s=n(77938),u=n(7696),l=r(n(20997)),c=(a=s.URL,a.replace(/\/+$/,"")).replace(/[\/\.]/g,"\\$&"),d=new RegExp(`^${c}((?:/\\w+)*)/accept/?\\?code=(\\w+)$`,"i"),f=/^https?:\/\/chat\.whatsapp\.com\/invite\/(\w+)$/i,p=/^https?:\/\/chat\.whatsapp\.com\/(\w+)$/i,h=/^whatsapp:\/\/chat\/?\?code=(\w+)$/i,_={text:"text",phone:"phone",data:"data",source:"source",context:"context",icebreaker:"icebreaker",source_url:"source_url"};function v(e){if(e&&"string"==typeof e){var t=o.Binary.build(e);if(!(t.size()>512))return t.readBuffer()}}function m(e){var t={};if(new l.default(e).forEach((function(e,n){var r=n.toLowerCase();if(r===_.data){var a=v(e);if(!a)return;t.conversionTuple||(t.conversionTuple={}),t.conversionTuple.conversionData=a}else if(r===_.source){var i=e;if((0,o.numUtf8Bytes)(i)>32)return;t.conversionTuple||(t.conversionTuple={}),t.conversionTuple.conversionSource=i}else r===_.source_url?(t.ctwaContextLinkData=t.ctwaContextLinkData||{},t.ctwaContextLinkData.sourceUrl=e):r===_.context?(t.ctwaContextLinkData=t.ctwaContextLinkData||{},t.ctwaContextLinkData.context=e):r===_.icebreaker?(t.ctwaContextLinkData=t.ctwaContextLinkData||{},t.ctwaContextLinkData.icebreaker=e):_[r]&&(t[r]=e)})),t.phone&&(t.phone=t.phone.replace(/\D/g,"")+"@c.us",t.ctwaContextLinkData&&(t.ctwaContextLinkData.phone=t.phone)),t.phone||t.text)return t}var g=new RegExp(`^${c}((?:/\\w+)*)/send/?\\?(.+)$`,"i"),y=/^https?:\/\/api\.whatsapp\.com\/send\/?\?(.+)$/i,E=/^whatsapp:\/\/send\/?\?(.*)$/i,S=/^https?:\/\/wa\.me\/?([0-9]{0,20})?\/?\??(.+)?$/i,b=/^https?:\/\/wa\.me\/p\/([0-9]{0,20})\/([0-9]{0,20})$/i,T=/^whatsapp:\/\/product\/([0-9]{0,20})\/([0-9]{0,20})$/i,w=new RegExp(`^${c}(?:(?:/\\w+)*)/product/([0-9]{0,20})/([0-9]{0,20})$`,"i");t.matchProductUrl=function(e){return[b,T,w].some((function(t){return e.match(t)}))};var A=/^https?:\/\/wa\.me\/c\/([0-9]{0,20})$/i,C=/^whatsapp:\/\/catalog\/([0-9]{0,20})$/i,O=new RegExp(`^${c}(?:(?:/\\w+)*)/catalog/([0-9]{0,20})$`,"i");t.matchCatalogUrl=function(e){return[A,C,O].some((function(t){return e.match(t)}))};function M(e){return{catalogOwnerJid:`${e[1]}@s.whatsapp.net`}}function I(e){return{productId:e[1],businessOwnerJid:`${e[2]}@s.whatsapp.net`}}},4159:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUnarchiveChat=function(e){if((0,a.archiveV2Supported)()){if(o.default.showArchiveV2)return!1;if(!o.default.archive.enabled&&!e)return(0,i.setArchiveEnabledSetting)(!0),!1}return!0},t.shouldEnableArchiveV2=function(){var e=n(26671).default.filter((function(e){return e.archive}));return(0,a.archiveV2Supported)()&&!o.default.archive.enabled&&1===e.length};var a=n(31230),i=n(37475),o=r(n(58695))},12780:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e+t.byteLength}),0),a=new Uint8Array(r),i=0;return t.forEach((function(e){a.set(new Uint8Array(e),i),i+=e.byteLength})),a.buffer}},47106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),a=0;a<n.byteLength;a++)if(n.getUint8(a)!==r.getUint8(a))return!1;return!0}},87641:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayMove=t.arrayMoveMutate=void 0;var n=function(e,t,n){var r=n<0?e.length+n:n,a=e.splice(t,1)[0];e.splice(r,0,a)};t.arrayMoveMutate=n;t.arrayMove=function(e,t,r){var a=e.slice();return n(a,t,r),a}},22324:(e,t)=>{"use strict";function n(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;if(e===t)return!0;if(e.length!==t.length)return!1;return e.every((function(e,n){return r(e,t[n])}))}},80178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t>e.length-1?0:t<0?e.length-1:t}},22354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],r=e.length,a=t.length,i=Math.max(r,a),o=0;o<i;o++)o<r&&n.push(e[o]),o<a&&n.push(t[o]);return n}},87485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;return e.every((function(e,n){return e===t[n]}))}},89595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={equal:function(e,t){if(e!==t)throw new Error(`${String(e)} !== ${String(t)}`)}};t.default=n},35504:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.asyncSleepAfterGivenLoopIteration=function(){return s.apply(this,arguments)},t.asyncSleep=u;var i=a(n(87757)),o=a(n(48926));function s(){return(s=(0,o.default)(i.default.mark((function e(t){var n,r,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:200,r=a.length>2&&void 0!==a[2]?a[2]:200,!(t>0&&t%n==0)){e.next=5;break}return e.next=5,u(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return new r((function(t){return setTimeout(t,e)}))}},88004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b64Equal=function(e,t){var n=e.length,r=t.length;switch(n-r){case-2:return 61===t.charCodeAt(n)&&61===t.charCodeAt(n+1)&&t.substr(0,n)===e;case-1:return 61===t.charCodeAt(n)&&t.substr(0,n)===e;case 0:return e===t;case 1:return 61===e.charCodeAt(r)&&e.substr(0,r)===t;case 2:return 61===e.charCodeAt(r)&&61===e.charCodeAt(r+1)&&e.substr(0,r)===t;default:return!1}}},56701:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=atob(e),r=0,a=0;a<n.length;a++){var i=n.charCodeAt(a);r=(((r=((r<<4)+(i>>4))%t)<<4)+(15&i))%t}return r}},98958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return null;var t=e.replace(/\s+$/,"");e!==t&&Math.random()<.001&&(__LOG__(3,void 0,void 0,!0)`base64 sanitized due to extra whitespace`,SEND_LOGS("media-key-sanitize"));return t}},63701:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/\//g,"_").replace(/\+/g,"-")}},68697:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CLOCK_CHANGE_BACKWARDS_EVENT=t.JS_HALT_EVENT=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(28681)),l="js_halt";t.JS_HALT_EVENT=l;var c="clock_change_backwards";t.CLOCK_CHANGE_BACKWARDS_EVENT=c;var d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this))._interval=e,i._threshold=r,i}return(0,i.default)(n,[{key:"startDetection",value:function(){var e=this;if(!this._intervalId){var t=Date.now();this._intervalId=setInterval((function(){var n=Date.now(),r=n-t-e._interval;r>e._threshold?e.trigger(l,r):r<-e._threshold&&e.trigger(c,r),t=n}),this._interval),__LOG__(2)`JsHaltDetector:detection started`}}},{key:"stopDetection",value:function(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null,__LOG__(2)`JsHaltDetector:detection stopped`)}},{key:"restartDetection",value:function(){this.stopDetection(),this.startDetection(),__LOG__(2)`JsHaltDetector:detection restarted`}}]),n}(u.default);t.default=d},50258:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=function(){function e(t){if((0,i.default)(this,e),t<=0)throw new RangeError("BitArray:numBits should be positive");this._numBits=t,this._array=new Uint8Array(Math.ceil(this._numBits/8))}return(0,o.default)(e,[{key:"get",value:function(e){var t=this._getArrayIndexOffset(e),n=(0,a.default)(t,2),r=n[0],i=n[1];return Boolean(this._array[r]>>i&1)}},{key:"set",value:function(e){var t=this._getArrayIndexOffset(e),n=(0,a.default)(t,2),r=n[0],i=n[1];this._array[r]|=1<<i}},{key:"unset",value:function(e){var t=this._getArrayIndexOffset(e),n=(0,a.default)(t,2),r=n[0],i=n[1];this._array[r]&=~(1<<i)}},{key:"toggle",value:function(e){var t=this._getArrayIndexOffset(e),n=(0,a.default)(t,2),r=n[0],i=n[1];this._array[r]^=1<<i}},{key:"clear",value:function(){this._array=new Uint8Array(Math.ceil(this._numBits/8))}},{key:"toArray",value:function(){for(var e=[],t=0;t<this._numBits;t++)e.push(this.get(t));return e}},{key:"toString",value:function(){return this.toArray().map((function(e){return e?"1":"0"})).join("")}},{key:"_getArrayIndexOffset",value:function(e){if(e<0||e>=this._numBits)throw new RangeError("BitArray:index out of bounds");var t=Math.floor(e/8);return[t,e-8*t]}},{key:"length",get:function(){return this._numBits}}]),e}();t.default=s},47792:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BIZ_SYSTEM_MSG_SUBTYPES_V2=t.BIZ_SYSTEM_MSG_SUBTYPES=void 0;t.BIZ_SYSTEM_MSG_SUBTYPES=["blue_msg_e2e_identity_unavailable","blue_msg_bsp_fb_to_bsp_premise","blue_msg_bsp_fb_to_self_fb","blue_msg_bsp_fb_to_self_premise","blue_msg_bsp_fb_unverified","blue_msg_bsp_fb_unverified_to_bsp_premise_verified","blue_msg_bsp_fb_unverified_to_self_fb_verified","blue_msg_bsp_fb_unverified_to_self_premise_verified","blue_msg_bsp_fb_verified","blue_msg_bsp_fb_verified_to_bsp_premise_unverified","blue_msg_bsp_fb_verified_to_self_fb_unverified","blue_msg_bsp_fb_verified_to_self_premise_unverified","blue_msg_bsp_premise_to_self_premise","blue_msg_bsp_premise_unverified","blue_msg_bsp_premise_unverified_to_self_premise_verified","blue_msg_bsp_premise_verified","blue_msg_bsp_premise_verified_to_self_premise_unverified","blue_msg_consumer_to_bsp_fb_unverified","blue_msg_consumer_to_bsp_premise_unverified","blue_msg_consumer_to_self_fb_unverified","blue_msg_consumer_to_self_premise_unverified","blue_msg_self_fb_to_bsp_premise","blue_msg_self_fb_to_self_premise","blue_msg_self_fb_unverified","blue_msg_self_fb_unverified_to_bsp_premise_verified","blue_msg_self_fb_unverified_to_self_premise_verified","blue_msg_self_fb_verified","blue_msg_self_fb_verified_to_bsp_premise_unverified","blue_msg_self_fb_verified_to_self_premise_unverified","blue_msg_self_premise_to_bsp_premise","blue_msg_self_premise_unverified","blue_msg_self_premise_verified","blue_msg_to_bsp_fb","blue_msg_to_consumer","blue_msg_to_self_fb","blue_msg_unverified_to_bsp_fb_verified","blue_msg_unverified_to_bsp_premise_verified","blue_msg_unverified_to_self_fb_verified","blue_msg_unverified_to_verified","blue_msg_verified_to_bsp_fb_unverified","blue_msg_verified_to_bsp_premise_unverified","blue_msg_verified_to_self_fb_unverified","blue_msg_verified_to_unverified"];t.BIZ_SYSTEM_MSG_SUBTYPES_V2=["biz_privacy_mode_init_fb","biz_privacy_mode_init_bsp","biz_privacy_mode_to_fb","biz_privacy_mode_to_bsp"]},83219:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(81109)),u=a(n(34575)),l=a(n(93913)),c=n(10619),d=a(n(34541)),f=n(53615),p=n(27291),h=n(43860),_=n(79583),v=n(62546),m=n(38271),g=n(50773),y=a(n(7860)),E=n(98093),S=n(24963),b=a(n(8643)),T=a(n(21813)),w=n(90066),A=n(72702),C=n(70238),O=n(60956),M=a(n(25285)),I=a(n(21144)),k=a(n(17894)),P=n(54302).Mirrored(["NotStarted","InProcess","Completed"]),R={initialChatHistory:!1,readReceipts:!1,syncdCritical:!1},D={initialChatHistoryTotalMsg:-1,initialChatHistoryTotalChats:-1},N=new(function(){function e(){(0,u.default)(this,e),this._criticalState={},this._debugOnlyState={},this._progressiveHistorySyncRemainingIteration=15,this._progressiveHistorySyncInFlight=!1,this._allCriticalDataSynced=!1,this.initState()}var t,n,a,N;return(0,l.default)(e,[{key:"initState",value:function(){this._criticalState=(0,s.default)({},R),this._debugOnlyState=(0,s.default)({},D),this._syncDCritcalDataState=P.NotStarted}},{key:"_isCriticalSyncDoneThisSession",value:function(){for(var e in this._criticalState)if(!this._criticalState[e])return!1;return!0}},{key:"_setSynced",value:function(e){__LOG__(2)`[bootstrap] completed sync for ${e}`,this._criticalState[e]=!0,this._isCriticalSyncDoneThisSession()&&(__LOG__(2)`[bootstrap] critical sync done`,(0,_.setAllCriticalDataSynced)(),d.default.criticalSyncDone(),this.syncNonCriticalData())}},{key:"_syncContactsInChunks",value:(N=(0,o.default)(i.default.mark((function e(t,n){var r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(__LOG__(2,void 0,void 0,void 0,["contact-sync"])`start contact sync for ${t?n.length+1:0} chunks of contacts during the inital sync`,null==t){e.next=4;break}return e.next=4,(0,E.syncContactList)(Array.from(t),!1);case 4:r=0;case 5:if(!(r<n.length)){e.next=14;break}return a=Array.from(n[r]),e.next=9,(0,f.delayMs)(2e4);case 9:return e.next=11,(0,E.syncContactList)(a);case 11:r++,e.next=5;break;case 14:__LOG__(2,void 0,void 0,void 0,["contact-sync"])`inital contact sync completes`;case 15:case"end":return e.stop()}}),e)}))),function(){return N.apply(this,arguments)})},{key:"_syncDeviceList",value:function(e){if(null==e)return __LOG__(2,void 0,void 0,void 0,["contact-sync"])`syncMostRecentDevices has no contact to sync during bootstrap`,r.resolve();__LOG__(2,void 0,void 0,void 0,["contact-sync"])`sync ${e.size} contacts for device info during the initial sync`;var t=Array.from(e);return(0,S.syncDeviceList)(t,null,null,!0).catch((function(e){__LOG__(4,!0,new Error,!0)`Sync device failed`,SEND_LOGS("Sync device failed: "+e)}))}},{key:"setReadReceiptsSynced",value:function(){this._setSynced("readReceipts")}},{key:"setInitialChatHistorySynced",value:function(){this._setSynced("initialChatHistory")}},{key:"setSyncDCriticalSynced",value:function(){this._criticalState.syncdCritical||this._setSynced("syncdCritical")}},{key:"syncNonCriticalData",value:function(){var e=this,t=[];(0,m.queryAndUpdateAllGroupMetadata)().then((function(){t=(0,v.getAllContactsFromChatCollectionIntoChunks)(),e._syncDeviceList(t[0]),(0,v.getAndUpdateNonAddressBookContacts)()})).then((function(){setTimeout(function(){this._syncContactsInChunks(t[0],t.slice(1,t.length))}.bind(e),4e4)})),(0,h.getAndUpdateStatus)(),(0,c.getAndUpdateProfilePicture)(),(0,c.updateBlocklist)(),(0,g.markCollectionsForSync)([p.CollectionName.Regular,p.CollectionName.RegularLow,p.CollectionName.RegularHigh]).then((0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b.default.MdBootstrapDataApplied,e.t1=b.default.MD_BOOTSTRAP_PAYLOAD_TYPE.NON_CRITICAL,e.t2=b.default.MD_BOOTSTRAP_SOURCE.APP_STATE,e.next=5,T.default.getMdSessionId();case 5:e.t3=e.sent,e.t4=(0,w.unixTimeMs)(),e.t5={mdBootstrapPayloadType:e.t1,mdBootstrapSource:e.t2,mdSessionId:e.t3,mdTimestamp:e.t4},new e.t0(e.t5).commit();case 9:case"end":return e.stop()}}),e)}))))}},{key:"markInitialHistorySyncCountDebugStats",value:function(e,t){this._debugOnlyState={initialChatHistoryTotalMsg:e,initialChatHistoryTotalChats:t}}},{key:"isSyncDCriticalDataSyncInProcess",value:function(){return this._syncDCritcalDataState===P.InProcess}},{key:"setSyncDCriticalDataSyncCompleted",value:function(){this._syncDCritcalDataState=P.Completed}},{key:"getCriticialSyncDebugSummary",value:function(){return(0,_.getAllCriticalDataSynced)()?"-------\nAll critical data synced\n-------\n\n":`-------\n Initial history sync complete: ${(0,_.getHistorySyncStatus)()?"true":this._criticalState.initialChatHistory.toString()}\n Initial msgs: ${this._debugOnlyState.initialChatHistoryTotalMsg}, initial chats: ${this._debugOnlyState.initialChatHistoryTotalChats}\n Receipt sync complete: ${this._criticalState.readReceipts.toString()} \n Critical collection sync complete: ${this._criticalState.syncdCritical.toString()} \n-------\n`}},{key:"syncCriticalDataIfNeeded",value:(a=(0,o.default)(i.default.mark((function e(){var t,n,a=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._allCriticalDataSynced=(0,_.getAllCriticalDataSynced)(),this._allCriticalDataSynced){e.next=14;break}return __LOG__(2)`[bootstrap] need to sync critical data: true`,__LOG__(2)`[bootstrap] ${this.getCriticialSyncDebugSummary()}`,t=(0,c.updatePrivacySettings)().then((function(){a.setReadReceiptsSynced()})).catch((function(){__LOG__(4,!0,new Error,!0)`failed to sync privacy settings`,SEND_LOGS("failed to update privacy settings from privacy request to webd"),y.default.logout()})),(0,O.updateSyncdDisabledDueToFatalFlag)(!1),this._syncDCritcalDataState=P.InProcess,n=(0,g.markCollectionsForSync)([p.CollectionName.CriticalBlock,p.CollectionName.CriticalUnblockLow]).then((0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a._criticalState.syncdCritical){e.next=5;break}return e.next=3,M.default.getSyncActionsRows(["action"],[p.Actions.SettingPushName]);case 3:(t=e.sent).length>0&&t.find((function(e){return e.actionState===p.SyncActionState.Success}))&&(a.setSyncDCriticalSynced(),a.setSyncDCriticalDataSyncCompleted());case 5:return e.t0=b.default.MdBootstrapDataApplied,e.t1=b.default.MD_BOOTSTRAP_PAYLOAD_TYPE.CRITICAL,e.t2=b.default.MD_BOOTSTRAP_SOURCE.APP_STATE,e.next=10,T.default.getMdSessionId();case 10:e.t3=e.sent,e.t4=(0,w.unixTimeMs)(),e.t5={mdBootstrapPayloadType:e.t1,mdBootstrapSource:e.t2,mdSessionId:e.t3,mdTimestamp:e.t4},new e.t0(e.t5).commit();case 14:case"end":return e.stop()}}),e)})))),(0,_.getInitialHistorySyncComplete)()&&this.setInitialChatHistorySynced(),e.next=12,r.all([t,n]);case 12:e.next=15;break;case 14:__LOG__(2)`[bootstrap] need to sync critical data: false`;case 15:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"continueProgressiveHistorySyncProcessing",value:function(){__LOG__(2)`[history sync] continueProgressiveHistorySyncProcessing`;var e="Safari"!==I.default.info().name;this._initNextProgressiveHistorySyncRunLoop(e)}},{key:"_progressiveHistorySyncRun",value:(n=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._allCriticalDataSynced||!0===this._criticalState.initialChatHistory){e.next=4;break}return __LOG__(2)`[history sync] Skip processLoop, until initial sync is complete`,this._progressiveHistorySyncRemainingIteration++,e.abrupt("return");case 4:return e.next=6,(0,A.fetchNextHitorySyncChunkForProcessing)();case 6:if(t=e.sent){e.next=9;break}return e.abrupt("return");case 9:return __LOG__(2)`[history sync] processLoop picked up chunk`,this._progressiveHistorySyncRemainingIteration++,e.next=13,(0,C.handleHistorySyncChunk)(t);case 13:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_initNextProgressiveHistorySyncRunLoop",value:(t=(0,o.default)(i.default.mark((function e(){var t=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length>0&&void 0!==t[0]&&t[0]&&this._progressiveHistorySyncRemainingIteration++,this._progressiveHistorySyncInFlight||!(this._progressiveHistorySyncRemainingIteration>0)){e.next=19;break}return this._progressiveHistorySyncRemainingIteration--,this._progressiveHistorySyncInFlight=!0,e.prev=5,e.next=8,k.default.waitForFinalDbMsgEncKey();case 8:return e.next=10,this._progressiveHistorySyncRun();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),__LOG__(4,void 0,new Error)`[History sync] _progressiveHistorySyncRun failed with ${null===e.t0||void 0===e.t0?void 0:e.t0.message}, stack: ${null===e.t0||void 0===e.t0?void 0:e.t0.stack}`;case 15:return this._progressiveHistorySyncInFlight=!1,e.next=18,new r((function(e){return setTimeout(e,2e4)}));case 18:this._initNextProgressiveHistorySyncRunLoop();case 19:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(){return t.apply(this,arguments)})}]),e}());d.default.on("on_initial_chat_synced",(function(){N.setInitialChatHistorySynced()})),d.default.on("logout",(function(){N.initState()}));var L=N;t.default=L},36183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!e)return;var r=[];r.push(e);for(;r.length;){var a=r.shift();if(n(a))return a;r=r.concat(t(a))}}},21144:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(92827),i=r(n(96486)),o=r(n(73358)),s=!1,u=i.default.debounce((function(){return s=!1}),500),l={id:function(){var e=n(71701),t=e.getBrowserId();if(t)return t;var r=new Uint8Array(16);return self.crypto.getRandomValues(r),t=(0,a.encodeB64)(r),e.setBrowserId(t),t},info:function(){var e=o.default.parser.getResult();return{os:e.os.name,version:e.os.version,name:"electron",ua:e.browser.name+" "+e.browser.version}},hardRefresh:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.promptUnloadGuards++,e){var r=n(71701);r.setNoTakeover(!0)}location.reload(t)},startDownloading:function(){s=!0,u()},clearDownloading:function(){s=!1},isDownloading:function(){return s},promptUnloadGuards:0,open:function(e){window.open(e,"_blank","noopener,noreferrer")}};t.default=l},21279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intToBytes=function(e,t){for(var n=t,r=new Uint8Array(e),a=e-1;a>=0;a--)r[a]=255&n,n>>>=8;return r},t.uint8ArrayToBuffer=function(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}},64950:()=>{!function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),r=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,i=(n||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,i,o,s,u,l,c,d,f;if(!(t=e.match(/^data:((.*?)(;charset=.*?)?)(;base64)?,/)))throw new Error("invalid data URI");for(i=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),o=!!t[4],s=e.slice(t[0].length),u=o?atob(s):decodeURIComponent(s),l=new ArrayBuffer(u.length),c=new Uint8Array(l),d=0;d<u.length;d+=1)c[d]=u.charCodeAt(d);return n?new Blob([r?c:l],{type:i}):((f=new a).append(l),f.getBlob(i))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,r){r&&t.toDataURL&&i?e(i(this.toDataURL(n,r))):e(this.mozGetAsFile("blob",n))}:t.toDataURL&&i&&(t.toBlob=function(e,t,n){e(i(this.toDataURL(t,n)))})),e.dataURLtoBlob=i}(window)},70371:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.upload=O,t.uploadUserReport=function(){return D.apply(this,arguments)},t.sendLogs=function(){return x.apply(this,arguments)};var i=a(n(81109)),o=a(n(87757)),s=a(n(48926)),u=a(n(96486)),l=a(n(89595)),c=a(n(34541)),d=a(n(93743)),f=a(n(34263)),p=n(71701),h=n(75806),_=a(n(60305)),v=a(n(43906)),m=a(n(8643)),g=a(n(37618)),y=a(n(69267)),E=a(n(71830)),S=a(n(89428)),b=a(n(22021)),T=a(n(73598)),w=function(e){return new r((function(t){return setTimeout(t,e)}))},A=n(54302)({CRASHLOG:"crashlog",SUPPORT:"support"}),C=u.default.throttle(I,f.default.LOG_UPLOAD_INTERVAL);function O(){return M.apply(this,arguments)}function M(){return(M=(0,s.default)(o.default.mark((function e(t){var n,a,i,s,u,l,p,v,m,y,E,S,T,w,O,M,k,P,R,D;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.reason,a=t.immediate,i=void 0!==a&&a,s=t.force,u=void 0!==s&&s,l=t.persist,p=void 0!==l&&l,v=t.isHighPri,m=void 0!==v&&v,y=t.nativeCrash,E=t.voipLog,S=t.skipSampling,T=void 0!==S&&S,w=t.hasTaggedMessage,O=void 0!==w&&w,M=t.ticketId,!_.default.isLogoutInProgress){e.next=3;break}return e.abrupt("return",r.resolve());case 3:if(k=p?A.SUPPORT:A.CRASHLOG,c.default.logSocketSummary(),__LOG__(2)`Focus at time of upload:`,g.default.pprint(),__LOG__(2)`==================================================`,__LOG__(2)`wa:uploadLogs ref: ${d.default.ref||"no conn"}`,__LOG__(2)`wa:uploadLogs hash: ${f.default.LATEST_HASH}`,__LOG__(2)`wa:uploadLogs version: ${f.default.VERSION_BASE}`,__LOG__(2)`wa:uploadLogs userAgent: ${navigator.userAgent}`,__LOG__(2)`wa:uploadLogs platform: ${d.default.platform||"no platform"}`,__LOG__(2)`wa:uploadLogs webPlatform: ${f.default.FLB_PLATFORM||"web"}`,__LOG__(2)`wa:uploadLogs appId: ${f.default.APP_ID}`,__LOG__(2)`wa:uploadLogs url: ${location.href}`,__LOG__(2)`wa:uploadLogs distribution: ${(0,h.getDistribution)()}`,__LOG__(2)`wa:uploadLogs buildId: ${f.default.BUILD_ID||"0"}`,__LOG__(2)`wa:uploadLogs mdOptIn: ${b.default.supportsFeature(b.default.F.MD_BACKEND)}`,O&&__LOG__(2)`wa:uploadLogs hasTaggedMessage`,P=null,void 0===n?(k=A.SUPPORT,__LOG__(2)`reason for logs: manual-upload`,P=!0):n&&(R=n,b.default.supportsFeature(b.default.F.MD_BACKEND)&&(R=`[MD] ${n}`),__LOG__(2)`reason for logs: ${R}`),__LOG__(2)`==================================================`,D=I,P||u){e.next=31;break}if(!(Math.random()<f.default.UPLOAD_TO_CLB)){e.next=29;break}D=C,e.next=31;break;case 29:return __LOG__(2)`wa:uploadLogs squelched logs`,e.abrupt("return");case 31:return e.prev=31,e.next=34,D({isHighPri:m,immediate:i,logType:k,nativeCrash:y,voipLog:E,skipSampling:T,ticketId:M});case 34:return e.abrupt("return",e.sent);case 37:return e.prev=37,e.t0=e.catch(31),__LOG__(2)`wa:uploadLogs error uploading: ${e.t0}`,e.abrupt("return");case 41:case"end":return e.stop()}}),e,null,[[31,37]])})))).apply(this,arguments)}function I(){return k.apply(this,arguments)}function k(){return(k=(0,s.default)(o.default.mark((function e(t){var n,r,a,i,s,u,c,d,f,p,h,_,m,g;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isHighPri,r=t.immediate,a=t.logType,i=t.nativeCrash,s=t.voipLog,u=t.skipSampling,void 0!==u&&u,c=t.ticketId,e.next=3,w(r?0:500);case 3:return d=R({isHighPri:n}),e.next=6,S.default.post(N(a),d);case 6:return f=e.sent,l.default.equal(f.status,200),p=R({isHighPri:n}),e.next=11,v.default.getLogs();case 11:return h=(h=e.sent).map(P),_=h.join("\n"),m=new Blob([_],{type:"text/plain"}),p.append("file",m,"logs.txt"),c&&p.append("ticket_id",c),i&&(p.append("attachment",new Blob([i.contents],{type:"application/octet-stream"}),i.filename),p.set("agent",i.agent),p.append("tags","electron_native"),s&&p.append("voip_log",new Blob([s.contents],{type:"text/plain"}),s.filename)),e.next=20,S.default.post(L(a),p);case 20:return g=e.sent,l.default.equal(g.status,200),e.abrupt("return",g.getResponseHeader("X-Uploaded-File-Id"));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return e.includes("app.asar")?e.replace(/file:[\/\\]{3}.+[\/\\]app\.asar([\/\\])/g,"<app-path>$1").replace(/(?:[A-z]+:)?[\/\\].+[\/\\]app\.asar([\/\\])/g,"<app-path>$1"):e}function R(e){var t=e.isHighPri,r=new FormData;t&&r.append("forced","true");var a=(0,p.getMe)();a&&(r.append("from",a.user),r.append("from_jid",a.toString()));var i=n(21144).default.info(),o=(0,h.getLogUserAgent)({device:i.os,browser:i.ua,appVersion:f.default.VERSION_BASE});return r.append("agent",o),r.append("app_id",f.default.APP_ID),b.default.supportsFeature(b.default.F.MD_BACKEND)&&r.append("md_opt_in","true"),r}function D(){return(D=(0,s.default)(o.default.mark((function e(t,n,r,a,s){var u,l,c,h,_,v,g,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,__LOG__(2)`CLB:uploadUserReport uploading`,__LOG__(2,!0)`CLB:uploadUserReport description: ${a}`,e.next=5,O({reason:"user-report",immediate:!0,force:!0,persist:!0});case 5:for(g in u=e.sent,l=(0,p.getLoginTokens)().server,c=new FormData,l&&c.append("tok",l),null!=t&&c.append("user",String(t)),c.append("email",n),u&&c.append("crashlog",u),c.append("desc",a),s.map((function(e,t){c.append(`screenshot-${t}`,e)})),E.default.initialize(),h=(0,i.default)((0,i.default)({subject:r},m.default.Global.all),{},{webcWebPlatform:f.default.FLB_PLATFORM,webcPhonePlatform:d.default.platform,webcProtoVersion:String(d.default.protoVersion)}),T.default.isDataReady()&&(h.webcWebArch=T.default.getArch(),h.webcWebDeviceManufacturer=T.default.getDeviceManufacturer(),h.webcWebDeviceModel=T.default.getDeviceModel(),h.webcWebOsReleaseNumber=T.default.getOSRelease()),(_=(0,p.getMe)())&&(h.deviceID=_.toString()),v={},h)null!=(y=h[g])&&(v[g]=y);return c.append("info",JSON.stringify(v)),__LOG__(2)`CLB:uploadUserReport submitting`,e.next=25,S.default.post(f.default.TICKET_URL,c);case 25:__LOG__(2)`CLB:uploadUserReport succeeded`,e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),__LOG__(2)`CLB:uploadUserReport failed ${String(e.t0)}`;case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))).apply(this,arguments)}function N(e){return y.default.build(f.default.FB_CLB_CHECK_URL,{type:String(e),access_token:f.default.FB_CLB_TOKEN})}function L(e){return y.default.build(f.default.FB_CLB_URL,{type:String(e),access_token:f.default.FB_CLB_TOKEN})}function x(){return(x=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({reason:t,hasTaggedMessage:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},79140:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HOUR24_FORMAT_CHANGE_EVENT=t.SKEW_CHANGE_EVENT=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(30381)),c=n(16971),d=r(n(34263)),f=r(n(28681)),p=r(n(89115)),h=["fi","id","ms","ms-my"],_="skew_change";t.SKEW_CHANGE_EVENT=_;var v="hour24_format_change";t.HOUR24_FORMAT_CHANGE_EVENT=v;var m=new(function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;if((0,i.default)(this,n),(e=t.call(this)).is24h=!1,e.skewMS=0,e.skew=0,Intl&&Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions){var r=Intl.DateTimeFormat().resolvedOptions().timeZone;switch(r?__LOG__(2)`Intl.DateTimeFormat().resolvedOptions().timeZone is ${r}`:__LOG__(2)`Intl.DateTimeFormat().resolvedOptions().timeZone does not exist`,r){case"America/Sao_Paulo":e.timeZoneHardCode="America/Belem";break;case"America/Campo_Grande":case"America/Cuiaba":e.timeZoneHardCode="America/Porto_Velho"}}return e}return(0,o.default)(n,[{key:"getIs24Hour",value:function(){return this.is24h}},{key:"setIs24Hour",value:function(e){e!==this.is24h&&(this.is24h=e,this.trigger(v))}},{key:"setIs24HourBasedOnLocale",value:function(){this.setIs24Hour(c.LOCALES_THAT_PREFER_24HOUR_TIME.has(p.default.getLocale()))}},{key:"setSkew",value:function(e){Math.abs(e)>6e4&&__LOG__(2)`Setting large clockskew: ${e}ms`;var t=this.skewMS;this.skewMS=e,this.skew=Math.round(e/1e3),Math.abs(t-this.skewMS)>1e3&&this.trigger(_)}},{key:"getSkew",value:function(){return this.skew}},{key:"localUnixTime",value:function(e){return void 0!==e?e+this.skew:Math.floor(Date.now()/1e3)}},{key:"globalUnixTime",value:function(e){return void 0!==e?e-this.skew:Math.floor((Date.now()-this.skewMS)/1e3)}},{key:"relativeStr",value:function(e){var t=e+this.skew;return t>=(0,l.default)().startOf("day").unix()?this._timestampStr(t):this._dateRelativeStr(t,!1)}},{key:"relativeDateStr",value:function(e){return this._dateRelativeStr(e+this.skew,!1)}},{key:"relativeDateAndTimeStr",value:function(e){return this._dateRelativeStr(e+this.skew,!0)}},{key:"timeStr",value:function(e){if(this.shouldUseIntlDateTimeFormat()){var t=1e3*(e+this.skew),n={hour12:!this.is24h,hour:"numeric",minute:"numeric"},r={year:"numeric",month:"numeric",day:"numeric"};return null!=this.timeZoneHardCode&&(n=(0,a.default)((0,a.default)({},n),{},{timeZone:this.timeZoneHardCode}),r=(0,a.default)((0,a.default)({},r),{},{timeZone:this.timeZoneHardCode})),`${Intl.DateTimeFormat(l.default.locale(),n).format(t)}, ${Intl.DateTimeFormat(l.default.locale(),r).format(t)}`}return l.default.unix(e+this.skew).format(this.is24h?`HH${this._hmsSeparator()}mm, l`:"LT, l")}},{key:"timestampStr",value:function(e){return this._timestampStr(e+this.skew)}},{key:"timestampStrFormat",value:function(){return this.is24h?`HH${this._hmsSeparator()}mm`:"LT"}},{key:"timestampHour",value:function(e){var t=e+this.skew,n=l.default.unix(t).hour();return this.is24h?n:n%12}},{key:"createdStr",value:function(e,t){var n=this.daysDelta(e),r=e+this.skew,a=this._timestampStr(r);if(0===n)return t?p.default.t(1721,{time:a}):p.default.t(1720,{time:a});if(1===n)return t?p.default.t(1725,{time:a}):p.default.t(1724,{time:a});if(n<7){var i=this._dateRelativeStr(r,!1);return t?p.default.t(1723,{day:i,time:a}):p.default.t(1722,{day:i,time:a})}var o=this._dateRelativeStr(r,!1);return t?p.default.t(1719,{date:o,time:a}):p.default.t(1718,{date:o,time:a})}},{key:"untilStr",value:function(e){if(e===d.default.MUTE_ALWAYS_EXPIRATION_SENTINEL)return p.default.t(1092);var t=this.daysDelta(e),n=e+this.skew,r=this._timestampStr(n);if(0===t)return p.default.t(1488,{time:r});if(1===t)return p.default.t(1489,{time:r});if(t<7){var a=this._dateRelativeStr(n,!1);return p.default.t(1490,{day:a,time:r})}var i=this._dateRelativeStr(n,!1);return p.default.t(1487,{date:i,time:r})}},{key:"lastSeenStr",value:function(e){var t=this.daysDelta(e),n=e+this.skew,r=this._timestampStr(n);if(0===t)return p.default.t(1680,{time:r});if(1===t)return p.default.t(1682,{time:r});if(t<7){var a=this._dateRelativeStr(n,!1);return p.default.t(1681,{date:a,time:r})}var i=this._dateRelativeStr(n,!1);return p.default.t(1679,{date:i,time:r})}},{key:"daysDelta",value:function(e,t){var n=l.default.unix(e).startOf("day"),r=(void 0===t?(0,l.default)().startOf("day"):l.default.unix(t).startOf("day")).diff(n,"days");return Math.abs(r)}},{key:"durationStr",value:function(e){var t="string"==typeof e?parseInt(e,10):e,n=l.default.utc(1e3*t);if(n.isValid()){var r=t<3600?"m:ss":"H:mm:ss";return n.format(r)}return""}},{key:"paymentTimestampStr",value:function(e){var t=e+this.skew,n=l.default.unix(t),r=n.startOf("day"),a=(0,l.default)().startOf("day").diff(r,"days");if(0===a)return p.default.t(1933);if(1===a)return p.default.t(1962);if(!(a<7)){var i=n.format("MMMM d");return p.default.t(1868,{date:i})}switch(n.day()){case 0:default:return p.default.t(1869);case 1:return p.default.t(1866);case 2:return p.default.t(1871);case 3:return p.default.t(1872);case 4:return p.default.t(1870);case 5:return p.default.t(1865);case 6:return p.default.t(1867)}}},{key:"liveLocationLastUpdatedStr",value:function(e){var t=e+this.skew,n=this._timestampStr(t),r=l.default.unix(t).startOf("day"),a=(0,l.default)().startOf("day").diff(r,"days");if(0===a)return p.default.t(930,{time:n});if(1===a)return p.default.t(932,{time:n});if(a<6){var i=this._dateRelativeStr(t,!1);return p.default.t(931,{date:i,time:n})}var o=this._dateRelativeStr(t,!1);return p.default.t(929,{date:o,time:n})}},{key:"_timestampStr",value:function(e){if(this.shouldUseIntlDateTimeFormat()){var t={hour12:!this.is24h,hour:"numeric",minute:"numeric"};null!=this.timeZoneHardCode&&(t=(0,a.default)((0,a.default)({},t),{},{timeZone:this.timeZoneHardCode}));var n=Intl.DateTimeFormat(l.default.locale(),t).format(1e3*e);return this.is24h?n.replace(/^24/,"00"):n.replace(/^0/,"12")}return l.default.unix(e).format(this.timestampStrFormat())}},{key:"_dateStr",value:function(e){if(this.shouldUseIntlDateTimeFormat()){var t={year:"numeric",month:"numeric",day:"numeric"};return null!=this.timeZoneHardCode&&(t=(0,a.default)((0,a.default)({},t),{},{timeZone:this.timeZoneHardCode})),Intl.DateTimeFormat(l.default.locale(),t).format(1e3*e)}return l.default.unix(e).format("l")}},{key:"_dateRelativeStr",value:function(e,t){var n=(0,l.default)().startOf("day"),r=l.default.unix(e).startOf("day"),a=n.diff(r,"days"),i=this._timestampStr(e);if(0===a)return t?p.default.t(1934,{time:i}):p.default.t(1933);if(1===a)return t?p.default.t(1963,{time:i}):p.default.t(1962);if(!t&&Math.abs(a)<7)return l.default.unix(e).format("dddd");var o=this._dateStr(e);return t?p.default.t(1932,{date:o,time:i}):o}},{key:"_hmsSeparator",value:function(){var e=l.default.locale();return h.includes(e)?".":":"}},{key:"shouldUseIntlDateTimeFormat",value:function(){return Intl&&Intl.DateTimeFormat&&!c.LOCALE_DATE_TIME_CUSTOMIZATIONS[l.default.locale()]&&!c.SHOULD_USE_MOMENT_LOCALE_FORMAT.has(l.default.locale())}}]),n}(f.default));t.default=m},28297:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.resetCompanionReg=function(){h=!1,_=!1},t.startLogin=function(){if(h||_)return;(0,c.setDeviceLinkPairStage)(f.default.MD_LINK_DEVICE_COMPANION_STAGE.FIRST_CONNECT),h=!0,(0,u.clearADVSecretKey)(),l.default.restartBackend()},t.startLogout=m,t.logoutAfterValidationFail=function(){new s.ShiftTimer((function(){m()})).onOrAfter(1e3)},t.startInitialHistorySyncTimeout=function(){if(null==a){a=setTimeout(v,12e4),(new d.default).listenTo(l.default,"on_initial_chat_synced",(function(){clearTimeout(a)}))}};var a,i=r(n(87757)),o=r(n(48926)),s=n(12035),u=n(68691),l=r(n(34541)),c=n(38831),d=r(n(28681)),f=r(n(8643)),p=r(n(7860)),h=!1,_=!1;function v(){__LOG__(4,void 0,new Error)`initialHistorySyncTimeout - logout due to no history data`,p.default.logout()}function m(){return g.apply(this,arguments)}function g(){return(g=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h&&!_){e.next=2;break}return e.abrupt("return");case 2:return _=!0,e.next=5,p.default.clearCredentialsAndStoredData();case 5:(0,u.clearADVSecretKey)(),l.default.restartBackend();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},85722:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="animation",r="transition",a={_normalize:function(e,t,n){var r=e.toLowerCase().indexOf(t),a=e.slice(0,r).toLowerCase();return 0===e.indexOf(t)?a+e.slice(r)+n.toLowerCase():a+e.slice(r)+n},prefix:function(e,t){var a;if(0===e.indexOf(n)){a=e.substring(n.length);var i=window.Modernizr?window.Modernizr.prefixed(n):n;return this._normalize(i,n,a)}if(0===e.indexOf(r)){a=e.substring(r.length);var o=window.Modernizr?window.Modernizr.prefixed(r):r;return this._normalize(o,r,a)}return window.Modernizr.prefixed(e,t,!1)||e}};t.default=a},70167:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,e)).contact=r,i}return n}((0,n(1838).customError)("ContactBlocked"));t.default=s},8181:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(34541)),u=r(n(34263)),l=r(n(5693)).default.require("Preferences"),c=new(function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"init",value:function(){var e=this;return l.get(u.default.ELECTRON_PREF.CONTENT_SETTINGS).then((function(t){e._contentSettings=t}))}},{key:"get",value:function(){return(0,a.default)({},this._contentSettings)}},{key:"set",value:function(e){var t=this;this._contentSettings=(0,a.default)((0,a.default)({},this._contentSettings),e),l.set(u.default.ELECTRON_PREF.CONTENT_SETTINGS,this._contentSettings).then((function(){s.default.textsizeChange(t._contentSettings.textsize)})).catch((function(){__LOG__(3)`Failed to store content settings`}))}}]),e}());t.default=c},44040:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=function(e){e.url=a.default.PP_URL,i(e,(function(){}))},t.deleteCookie=function(){throw new Error("deleteCookie is not implemented for Electron")},t.getCookie=function(){throw new Error("getCookie is not implemented for Electron")};var a=r(n(34263)),i=window.Native.setCookie},87708:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.encryptAndMac=function(e,t,n){return(0,s.aesCbcEncrypt)(e,new Uint8Array(n)).then((function(e){return new l.default(t).sign(e).then((function(t){return i.Binary.build(t,e).readBuffer()}))}))},t.macAndDecrypt=function(e,t,n){return r.resolve(new Uint8Array(n)).then((function(n){var r=(0,o.encodeB64)(n.subarray(0,32)),a=n.subarray(32);return new l.default(t).sign(a).then((function(t){var n=(0,o.encodeB64)(t);if(r!==n)throw __LOG__(3)`crypto:macAndDecrypt HMAC don't match ${r} vs. ${n}`,new Error("macAndDecrypt HMAC mismatch");return(0,s.aesCbcDecrypt)(e,a)}))}))},t.alignChunkSizeToMultipleAesBlockSize=c,t.alignChunkLengthsToMultipleOfAesBlockSize=function(e,t){for(var n=[],r=0,a=0,i=0,o=0;o<e.length;++o){if(r+=e[o],o===e.length-1&&null!=t){r>a?n.push(t-a):(n.pop(),n.push(t-i));break}if(r>a){var s=c(r-a);i=a,n.push(s),a+=s}}return n},t.removeEncryptedPadding=function(e,t){var n=e.slice(-t.byteLength);if((0,u.default)(n,t))return e.slice(0,e.byteLength-t.byteLength);return e};var i=n(17643),o=n(92827),s=n(86190),u=a(n(47106)),l=a(n(44338));function c(e){return 16*parseInt((e+15)/16,10)}},86190:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.aesCbcDecrypt=function(e,t){return r.resolve().then((function(){var n=t.slice(0,16),a=t.slice(16),o=u(n);return r.resolve(s.default.importKey("raw",(0,i.default)(Uint8Array,e),"AES-CBC",!1,["decrypt"])).then((function(e){return s.default.decrypt(o,e,a)}))}))},t.aesCbcEncrypt=function(e,t,n){return r.resolve().then((function(){var a;n?a=(0,i.default)(Uint8Array,n):(a=new Uint8Array(16),self.crypto.getRandomValues(a));var l=u(a);return r.resolve(s.default.importKey("raw",(0,i.default)(Uint8Array,e),"AES-CBC",!1,["encrypt"])).then((function(e){return s.default.encrypt(l,e,t)})).then((function(e){return(0,o.default)(Uint8Array,[a,new Uint8Array(e)]).buffer}))}))};var i=a(n(80958)),o=a(n(53069)),s=a(n(29826));function u(e){return{name:"AES-CBC",iv:(0,i.default)(Uint8Array,e)}}},50898:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(80958)),u=a(n(29826)),l=function(){function e(t,n){(0,i.default)(this,e),this._algo=t,this._key=(0,s.default)(Uint8Array,n)}return(0,o.default)(e,[{key:"sign",value:function(e,t){var n=this;return r.resolve(u.default.importKey("raw",this._key,this._algo,!1,["sign"])).then((function(t){return u.default.sign(n._algo,t,e)})).then((function(e){return null!=t&&0!==t?e.slice(0,t):e}))}}]),e}();t.default=l},24357:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(50898)),u={name:"HMAC",hash:{name:"SHA-1"}},l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,u,e)}return n}(s.default);t.default=l},44338:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(50898)),u={name:"HMAC",hash:{name:"SHA-256"}},l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,u,e)}return n}(s.default);t.default=l},63189:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(50898)),u={name:"HMAC",hash:{name:"SHA-512"}},l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,u,e)}return n}(s.default);t.default=l},91433:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LT_HASH_ANTI_TAMPERING=t.default=t.EMPTY_LT_HASH=t.KEY_LENGTH_BYTES=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(34575)),l=i(n(93913)),c=a(n(67819)),d=128;t.KEY_LENGTH_BYTES=d;var f=new ArrayBuffer(d);t.EMPTY_LT_HASH=f;var p=function(){function e(t){(0,u.default)(this,e),this.salt=t}var t,n,a;return(0,l.default)(e,[{key:"add",value:function(e,t){var n=this;return t.reduce(function(){var e=(0,s.default)(o.default.mark((function e(t,r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t;case 3:return e.t1=e.sent,e.t2=r,e.abrupt("return",e.t0._addSingle.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.resolve(e))}},{key:"subtract",value:function(e,t){var n=this;return t.reduce(function(){var e=(0,s.default)(o.default.mark((function e(t,r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t;case 3:return e.t1=e.sent,e.t2=r,e.abrupt("return",e.t0._subtractSingle.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.resolve(e))}},{key:"subtractThenAdd",value:(a=(0,s.default)(o.default.mark((function e(t,n,r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.subtract(t,r);case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",e.t0.add.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_addSingle",value:(n=(0,s.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.extractAndExpand(n,this.salt,d);case 2:return r=e.sent,e.abrupt("return",this.performPointwiseWithOverflow(t,r,(function(e,t){return e+t})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_subtractSingle",value:(t=(0,s.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.extractAndExpand(n,this.salt,d);case 2:return r=e.sent,e.abrupt("return",this.performPointwiseWithOverflow(t,r,(function(e,t){return e-t})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"performPointwiseWithOverflow",value:function(e,t,n){for(var r=new DataView(e),a=new DataView(t),i=new ArrayBuffer(r.byteLength),o=new DataView(i),s=0;s<r.byteLength;s+=2)o.setUint16(s,n(r.getUint16(s,!0),a.getUint16(s,!0)),!0);return i}}]),e}();t.default=p;var h=new p("WhatsApp Patch Integrity");t.LT_HASH_ANTI_TAMPERING=h},54105:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.resolve(o.default.digest({name:"SHA-256"},e).then(i.encodeB64))};var i=n(92827),o=a(n(29826))},33827:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="whatsapp is da best",i=new Uint8Array(a.split("").map((function(e){return e.charCodeAt(0)}))),o={name:"HMAC",hash:"SHA-256"},s={name:"AES-CBC",length:256},u={name:"ECDH",namedCurve:"P-256"};function l(){return r.resolve().then((function(){return self.crypto.subtle||self.crypto.webkitSubtle}))}var c={supportsHmacSha256:function(){return l().then((function(e){return e.generateKey(o,!1,["sign","verify"]).then((function(t){return e.sign(o,t,i).then((function(n){return e.verify(o,t,n,i.buffer)})).catch((function(e){return __LOG__(2)`CryptoSupport:HMAC-SHA256 signing failed: ${e}`,!1})).then((function(e){return e?(__LOG__(2)`CryptoSupport:HMAC-SHA256 is verified`,!0):(__LOG__(2)`CryptoSupport:HMAC-SHA256 is not verified`,!1)})).catch((function(e){return __LOG__(2)`CryptoSupport:HMAC-SHA256 verification failed: ${e}`,!1}))})).catch((function(e){return __LOG__(2)`CryptoSupport:HMAC-SHA256 key generation failed: ${e}`,!1}))})).catch((function(e){return __LOG__(2)`CryptoSupport:HMAC-SHA256: ${e}`,!1}))},supportsAesCbc:function(){return l().then((function(e){return e.generateKey(s,!1,["encrypt","decrypt"]).then((function(t){return r.resolve(self.crypto).then((function(e){return{name:"AES-CBC",iv:e.getRandomValues(new Uint8Array(16))}})).then((function(n){return e.encrypt(n,t,i).then((function(r){return e.decrypt(n,t,r)})).catch((function(e){return __LOG__(2)`CryptoSupport:AES-CBC encryption failed: ${e}`,!1})).then((function(e){var t,n=new Uint8Array(e);return t=n,Array.prototype.slice.call(t).map((function(e){return String.fromCharCode(e)})).join("")===a?(__LOG__(2)`CryptoSupport:AES-CBC encryption/decryption is correct`,!0):(__LOG__(2)`CryptoSupport:AES-CBC encryption/decryption is incorrect`,!1)})).catch((function(e){return __LOG__(2)`CryptoSupport:AES-CBC decryption failed: ${e}`,!1}))}))})).catch((function(e){return __LOG__(2)`CryptoSupport:AES-CBC key generation failed: ${e}`,!1}))})).catch((function(e){return __LOG__(2)`CryptoSupport:AES-CBC: ${e}`,!1}))},supportsEcdh:function(){return l().then((function(e){return e.generateKey(u,!1,["deriveKey"]).then((function(t){return e.generateKey(u,!1,["deriveKey"]).then((function(n){var r={name:"ECDH",namedCurve:"P-256",public:n.publicKey};return e.deriveKey(r,t.privateKey,s,!1,["encrypt","decrypt"]).then((function(){return __LOG__(2)`CryptoSupport:ECDH key derivation succeeded`,!0})).catch((function(e){return __LOG__(2)`CryptoSupport:ECDH key derivation failed: ${e}`,!1}))})).catch((function(e){return __LOG__(2)`CryptoSupport:ECDH key generation #2 failed: ${e}`,!1}))})).catch((function(e){return __LOG__(2)`CryptoSupport:ECDH key generation #1 failed: ${e}`,!1}))})).catch((function(e){return __LOG__(2)`CryptoSupport:ECDH: ${e}`,!1}))},supportsWebCrypto:function(){return this.webCryptoPromise||(this.webCryptoPromise=r.all([this.supportsHmacSha256(),this.supportsAesCbc()])),this.webCryptoPromise.spread((function(e,t){return r.resolve(e&&t)}))}};t.default=c},48935:(e,t,n)=>{"use strict";var r,a=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.keyPair=function(e){var t;void 0===e?(t=new Uint8Array(32),self.crypto.getRandomValues(t)):t=new Uint8Array(e);return t[0]&=248,t[31]&=127,t[31]|=64,l({pubKey:32,privKey:t,basepoint:i},(function(e){var n=r._curve25519_donna(e.pubKey,e.privKey,e.basepoint);if(n)throw new Error(`Curve25519:keyPair Error Code ${n}`);return{pubKey:u(e.pubKey,32),privKey:t.buffer}}))},t.sharedSecret=function(e,t){return a.resolve().then((function(){return l({sharedKey:32,pubKey:e,privKey:t},(function(e){var t=r._curve25519_donna(e.sharedKey,e.privKey,e.pubKey);if(t)throw new Error(`Curve25519:sharedSecret Error Code ${t}`);return u(e.sharedKey,32)}))}))},t.toSignalCurveKeyPair=function(e){if(32!==e.pubKey.byteLength||32!==e.privKey.byteLength)throw new Error("Invalid key pair type");var t=o(e.pubKey),n=new Uint8Array(32);return n.set(new Uint8Array(e.privKey)),{pubKey:t,privKey:n.buffer}},t.toSignalCurvePubKey=o,t.toCurveKeyPair=function(e){if(33!==e.pubKey.byteLength||32!==e.privKey.byteLength)throw new Error("Invalid key pair type");var t=new Uint8Array(32),n=new Uint8Array(32);return t.set(new Uint8Array(e.pubKey).subarray(1)),n.set(new Uint8Array(e.privKey)),{pubKey:t.buffer,privKey:n.buffer}},t.toCurveKeyPubKey=function(e){if(33!==e.byteLength)throw new Error("Invalid key type");var t=new Uint8Array(32);return t.set(new Uint8Array(e).subarray(1)),t.buffer},t.verifySignature=function(e,t,n){if(32!==e.byteLength)throw new Error(`Invalid public key length: ${e.byteLength}`);var r=new Uint8Array(33);return r[0]=5,r.set(e,1),!1===window.libsignal.Curve.verifySignature(r,t,n)};var i=new Uint8Array(32);i[0]=9;function o(e){if(32!==e.byteLength)throw new Error("Invalid key type");var t=new Uint8Array(33);return t[0]=5,t.set(new Uint8Array(e),1),t.buffer}function s(e){if("number"==typeof e)return r._malloc(e);var t=new Uint8Array(e.buffer||e),n=r._malloc(t.length);return r.HEAPU8.set(t,n),n}function u(e,t){var n=new Uint8Array(t);return n.set(r.HEAPU8.subarray(e,e+t)),n.buffer}function l(e,t){r||(r=n(23098));var a={};try{for(var i in e)a[i]=s(e[i]);return t(a)}finally{for(var o in a)r._free(a[o])}}},39863:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(t,n){(0,a.default)(this,e),this._valueFn=t,this._heap=[],this._load(n)}return(0,i.default)(e,[{key:"size",value:function(){return this._heap.length}},{key:"_load",value:function(e){var t=this;e&&e.length&&e.forEach((function(e){t.push(e)}))}},{key:"_swap",value:function(e,t){var n=this._heap[t];this._heap[t]=this._heap[e],this._heap[e]=n}},{key:"_siftUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0!==e){var t=this._getParent(e),n=2*t+1,r=2*t+2,a=this._heap.length;if(!(e>=a)){var i=this._getVal(t),o=t;if(n<a){var s=this._getVal(n);i>s&&(o=n,i=s)}if(r<a){var u=this._getVal(r);i>u&&(o=r)}o!==t&&(this._swap(o,t),this._siftUp(t))}}}},{key:"_doHeapify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=2*e+1,n=2*e+2,r=this._heap.length;if(!(e>=r)){var a=this._getVal(e),i=e;if(t<r){var o=this._getVal(t);a>o&&(i=t,a=o)}if(n<r){var s=this._getVal(n);a>s&&(i=n)}i!==e&&this._swap(i,e),t<r&&this._doHeapify(t),n<r&&this._doHeapify(n)}}},{key:"_getVal",value:function(e){return this._valueFn(this._heap[e])}},{key:"_getParent",value:function(e){return e%2==0?(e-2)/2:(e-1)/2}},{key:"push",value:function(e){this._heap.push(e);var t=this._heap.length-1;this._siftUp(t)}},{key:"pull",value:function(){var e=this._heap.shift();return this.heapify(),e}},{key:"heapify",value:function(){this._doHeapify(0)}},{key:"peek",value:function(){return this._heap[0]}}]),e}();t.default=o},57500:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(91080)),s=function(){function e(t){(0,a.default)(this,e),this._children={},this._indices=[],t&&(this._data=t)}return(0,i.default)(e,[{key:"addBackwardsString",value:function(t,n){for(var r=t.length-1,a=this;r>=0;){var i=t.charAt(r);a._addIndex(n),a=a.get(i)||a.set(i,new e),r--}return a._addIndex(n),this}},{key:"addForwardsString",value:function(t,n){for(var r=0,a=this;r<t.length;){var i=t.charAt(r);a._addIndex(n),a=a.get(i)||a.set(i,new e),r++}return a._addIndex(n),this}},{key:"set",value:function(e,t){return this._children[e]=t,t}},{key:"get",value:function(e){return this._children[e]}},{key:"getChildren",value:function(){var e=this;return Object.keys(this._children).map((function(t){return{prefix:t,node:(0,o.default)(e.get(t),"_this.get(prefix)")}}))}},{key:"hasChildren",value:function(){return!function(e){for(var t in e)return!1;return!0}(this._children)}},{key:"search",value:function(e){var t=this._data;if(!t)return[];for(var n=this,r=0;r<e.length&&n;r++){var a=e[r];n=n.get(a)}return n?n.getIndices().map((function(e){return t[e]})):[]}},{key:"_addIndex",value:function(e){this._indices.push(e)}},{key:"getIndices",value:function(){var e=this._indices,t=Object.keys(this._children);return 1===t.length&&0===this._indices.length?this._children[t[0]].getIndices():e}},{key:"_optimize",value:function(){var e=this;if(!this.hasChildren())return this;var t=Object.keys(this._children),n=this._children[t[0]]._indices;return t.forEach((function(t){e._children[t]._optimize()})),1===t.length&&this._indices.length===n.length&&(this._indices=[]),this}},{key:"testOnlyGetChildrenProperty",value:function(){return this._children}},{key:"testOnlyGetIndicesProperty",value:function(){return this._indices}}],[{key:"fromBackwardsStrings",value:function(t,n){return t.reduce((function(e,t,n){return e.addBackwardsString(t,n)}),new e(n))._optimize()}},{key:"fromForwardsStrings",value:function(t,n){return t.reduce((function(e,t,n){return e.addForwardsString(t,n)}),new e(n))._optimize()}}]),e}();t.default=s},43302:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=/\r\n/g,u=function(){function e(t){var n=this;(0,i.default)(this,e),this.hasText=function(){return n.hasType("text/plain")},this.hasType=function(e){return n.types.includes(e)},this.data=t,this.types=t.types?Array.isArray(t.types)?t.types:Object.keys(t.types).map((function(e){return t.types[e]})):[]}return(0,o.default)(e,[{key:"getItems",value:function(){var e=this;if(this.data.items)return Array.prototype.slice.call(this.data.items);var t=this._getFileTypes();return this.types.map((function(n){return{type:n,data:e.data.getData(n),kind:t.includes(n)?"string":"file"}}))}},{key:"_getFileTypes",value:function(){return Array.prototype.slice.call(this.data.files).map((function(e){return e.type}))}},{key:"getText",value:function(e){return this._getText(e).then((function(e){return e?e.replace(s,"\n"):null}))}},{key:"_getText",value:function(e){var t=e||[];0===t.length&&t.push("text/plain");var n,a=this.data;if(a.getData)return t.some((function(e){if(a.getData(e))return n=a.getData(e),!0})),r.resolve(n);var i,o,s,u=(i=this.data.items,o=t,s=Array.from(i),o.reduce((function(e,t){var n=s.find((function(e){return e.type===t}));return n&&e.push(n),e}),[]));return u.length?r.all(u.map((function(e){return new r((function(t){return e.getAsString(t)}))}))).then((function(e){return e.find((function(e){return e.length}))})):r.resolve()}},{key:"getFiles",value:function(){return this.data.items?Array.prototype.slice.call(this.data.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return!!e})):Array.prototype.slice.call(this.data.files||[])}},{key:"getData",value:function(e){return this.data.getData(e)}},{key:"hasFiles",value:function(){return this.data.items?Array.prototype.slice.call(this.data.items).some((function(e){return"file"===e.kind})):!!Array.prototype.slice.call(this.data.files||[]).length}}]),e}();t.default=u},63984:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=a(n(86128)),c=a(n(96486)),d=a(n(30381)),f=a(n(34263)),p=a(n(2977)),h=a(n(8643)),_=a(n(35643)),v=a(n(86499)),m=n(88828),g=a(n(73358)),y={ERROR:"error",OPENING:"opening",BLOCKED:"blocked",OPEN:"open",CLOSED:"closed",FAILED:"failed"},E=!1,S=null;function b(){var e=this;this.initializeStorage(),this._dbName=f.default.WEB_IDB_DB_NAMES.wawc,this._db=new l.default(this._dbName),this._db.on("versionchange",(function(t){e._db.close(),t&&null!=t.newVersion&&t.newVersion!==t.oldVersion&&(E=!0,S&&S())})),this._db.version(1).stores({logs:"line,log"}),this._db.version(2).stores({logs:"line,log",assets:"key,hash,data"}),this._db.version(3).stores({logs:"line,log",assets:"key,hash,data",wam:",buffer,prevValues,lastSend"}),this._db.version(4).stores({logs:"line,log",assets:"key,hash,data",wam:",key,buffer",l10n:"key,hash,t"}).upgrade((function(e){e.wam.toCollection().modify((function(e){e.key=e.lastSend,delete e.prevValues,delete e.lastSend}))})),this._db.version(5).stores({logs:"line,log",assets:null,wam:",key,buffer",l10n:"key,hash,t"}),this._db.version(6).stores({logs:"line,log,timestamp",wam:",key,buffer",l10n:"key,hash,t"}).upgrade((function(e){e.logs.toCollection().count().then((function(){e.logs.toCollection().modify((function(e){var t=e.log;e.timestamp=1e3*(0,d.default)(t.slice(5,28),"YYYY-MM-DD HH:mm:ss.SSS").unix()}))}))})),this._db.version(7).stores({logs:"line,log,timestamp",wam:",key,buffer",l10n:"key,hash,t",user:"key"}),this._db.version(8).stores({logs:"line,log,timestamp",wam:",key,buffer,channel",l10n:"key,hash,t",user:"key"}).upgrade((function(e){e.wam.toCollection().modify((function(e){e.channel="regular"}))})),this.openAttempt=0,this.openDB().catch((function(e){__LOG__(3)`openDB failed: ${e}`})),this._dbState=y.OPENING}var T=function(){function e(){(0,s.default)(this,e),this.dataStore={}}var t;return(0,u.default)(e,[{key:"setItem",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.dataStore[e]=t,null!=p.default&&p.default.setItem(e,t),r){var a=n(63984).default;a.idb().then((function(n){return n.user.put({key:e,value:t})})).catch((function(e){__LOG__(3)`db:setItem:Error ${e}`}))}}},{key:"getItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===this.dataStore[e]||t){if(null!=p.default){var n=p.default.getItem(e);return null!=n&&this.setItem(e,n,!1),n}return null}return this.dataStore[e]}},{key:"removeItem",value:function(e){delete this.dataStore[e],null!=p.default&&p.default.removeItem(e),n(63984).default.idb().then((function(t){return t.user.delete(e)})).catch((function(e){__LOG__(3)`db:removeItem:Error ${e}`}))}},{key:"clear",value:(t=(0,o.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dataStore={},null!=p.default&&(p.default.clear(),t&&c.default.forOwn(t,(function(e,t){p.default.setItem(t,e)}))),r=n(63984).default,e.next=5,r.idb().then((function(e){return e.user.clear()})).catch((function(e){__LOG__(3)`db:clear:Error ${e}`}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();b.prototype.initializeStorage=function(){this.temporaryStorage=this._hasSessionStorage()?{dataStore:{},setItem:function(e,t){this.dataStore[e]=t,(0,_.default)(v.default,"sessionStorage").setItem(e,t)},getItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null==this.dataStore[e]||t?(0,_.default)(v.default,"sessionStorage").getItem(e):this.dataStore[e]},removeItem:function(e){delete this.dataStore[e],(0,_.default)(v.default,"sessionStorage").removeItem(e)},clear:function(){return this.dataStore={},(0,_.default)(v.default,"sessionStorage").clear(),r.resolve()}}:{dataStore:{},setItem:function(e,t){this.dataStore[e]=t},getItem:function(e){return void 0===this.dataStore[e]?null:this.dataStore[e]},removeItem:function(e){delete this.dataStore[e]},clear:function(){return this.dataStore={},r.resolve()}},this.permanentStorage=new T},b.prototype._hasSessionStorage=function(){try{var e=(0,_.default)(v.default,"sessionStorage");return e.setItem(f.default.KEY_STORAGE_TEST,f.default.KEY_STORAGE_TEST),(0,m.isFunction)(e.clear)}catch(e){return!1}},b.prototype.loadUserIdb=function(){var e=this;return this.idb().then((function(t){return t.transaction("rw",t.user,(function(){return t.user.toArray().then((function(t){return t.forEach((function(t){e.permanentStorage.dataStore[t.key]=t.value}))}))}))})).catch((function(e){__LOG__(3)`db:loadUserIdb:Error ${e}`}))},b.prototype.openDB=function(){var e=this;this._db.isOpen()&&this._db.close();var t=r.resolve(this._db.open()).timeout(1e4).then((function(){return __LOG__(2)`db: Successfully opened db`,new h.default.WebcDbOpen({webcDbName:e._dbName,webcDbOpenWasSuccess:!0,webcDbOpenNumAttempts:e.openAttempt}).commit(),e._dbState=y.OPEN,y.OPEN})).catchType(r.TimeoutError,(function(){return __LOG__(2)`db:openDB blocked`,new h.default.WebcDbOpen({webcDbName:e._dbName,webcDbOpenWasSuccess:!1,webcDbOpenNumAttempts:e.openAttempt}).commit(),e._dbState=y.BLOCKED,y.BLOCKED})).catch((function(t){return __LOG__(3)`db:openDB:Error ${t}`,e.openAttempt>1||g.default.isSafari?(e.opening=void 0,e._dbState=y.ERROR,new h.default.WebcDbOpen({webcDbName:e._dbName,webcDbOpenWasSuccess:!1,webcDbOpenNumAttempts:e.openAttempt}).commit(),r.reject(y.ERROR)):(e.openAttempt+=1,e._db.delete().catch((function(t){return __LOG__(3)`db:deleteDB:Error ${t}`,e.opening=void 0,e._dbState=y.ERROR,r.reject(y.ERROR)})).then((function(){return e.openDB()})))})).then((function(t){return e.opening=void 0,t===y.BLOCKED?r.reject(y.BLOCKED):e._db}));return this.opening||(this.opening=t),t},b.prototype.idb=function(){return this._db.isOpen()?r.resolve(this._db):this._db.hasFailed()?r.reject(y.FAILED):this._dbState===y.BLOCKED?r.reject(y.BLOCKED):this.opening?this.opening:r.reject(y.CLOSED)},b.prototype.onVersionChange=function(e){S=e,E&&S()},b.prototype.State=y;var w=new b;t.default=w},17894:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DB_ENCRYPTION_CIPHER=t.ENC_KEY_TTL=t.ENC_KEY_TABLE_NAME=t.ENC_KEY_DB_NAME=void 0;var o=i(n(59713)),s=i(n(87757)),u=i(n(81109)),l=i(n(48926)),c=i(n(34575)),d=i(n(93913)),f=n(11365),p=n(92827),h=n(90066),_=i(n(86128)),v=i(n(41143)),m=a(n(98569)),g=n(60077).default,y="wawc_db_enc";t.ENC_KEY_DB_NAME=y;var E="keys";t.ENC_KEY_TABLE_NAME=E;var S={name:"HKDF"},b={hash:"SHA-256"},T=4*h.WEEK_MILLISECONDS*24;t.ENC_KEY_TTL=T;var w="fts_hmac_keys",A="AES-CBC";function C(){var e=new Uint8Array(128);return self.crypto.getRandomValues(e),self.crypto.subtle.importKey("raw",e,S,!1,["deriveKey"])}t.DB_ENCRYPTION_CIPHER=A;var O=new(function(){function e(){var t=this;(0,c.default)(this,e),this._waitUntilFinalDbEncKeyReady=new f.Resolvable,this._waitUntilEncKeyReady=new f.Resolvable,this._waitUntilFinalFtsHmacKeyReady=new f.Resolvable,this._getOrUpdateEncKeys=function(e){return t._getDbOrThrow().keys.orderBy("id").toArray().then((function(n){if(!n||0===n.length)return t._addNewEncKey(e);var a=n[n.length-1]._expiration;if(null!=a&&a<=(new Date).getTime())return t._addNewEncKey(e);t._ephemeralLocalEncSalt=e;var i=n.map(function(){var t=(0,l.default)(s.default.mark((function t(n){var r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,self.crypto.subtle.deriveKey((0,u.default)((0,u.default)((0,u.default)({},S),b),{},{salt:e,info:new Uint8Array(1)}),n.key,{name:A,length:128},!1,["encrypt","decrypt"]);case 2:return r=t.sent,t.abrupt("return",(0,u.default)((0,u.default)({},n),{},{key:r}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return r.all(i).then((function(e){t._keys=e,t._waitUntilEncKeyReady.resolve()}))}))},this._getOrUpdateFtsKey=function(){return t._getDbOrThrow().fts_hmac_keys.orderBy("id").toArray().then((function(e){if(!e||0===e.length)return t._addNewFtsHMACKey();if(e.length>1)throw new m.DBInvalidFtsHMACKey;t._ftsHMACKey=e[e.length-1]}))},this._addNewEncKey=function(e){return C().then((function(n){return t._getDbOrThrow().keys.add({key:n,_expiration:(new Date).getTime()+T}).then((function(){return t._getOrUpdateEncKeys(e)}))}))},this._addNewFtsHMACKey=function(){return C().then((function(e){return t._getDbOrThrow().fts_hmac_keys.add({key:e}).then((function(){return t._getOrUpdateFtsKey()}))}))},this.generateFinalDbEncryptionAndFtsKey=function(e){if(null!=t._finalDbMsgEncKeys||null==t._ephemeralLocalEncSalt)return r.resolve();var n=(0,p.decodeB64)(e);return t._generateFinalFtsHmacKey(n),t._generateFinalDbMsgEncryptionKey(n),r.resolve()},this._generateFinalDbMsgEncryptionKey=function(e){return t._getDbOrThrow().keys.orderBy("id").toArray().then((function(n){var a=n.map(function(){var n=(0,l.default)(s.default.mark((function n(r){var a;return s.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(0,v.default)(null!=t._ephemeralLocalEncSalt,"local salt is undefined"),n.prev=1,n.next=4,self.crypto.subtle.deriveKey((0,u.default)((0,u.default)((0,u.default)({},S),b),{},{salt:e,info:new Uint8Array(t._ephemeralLocalEncSalt||0)}),r.key,{name:A,length:128},!1,["encrypt","decrypt"]);case 4:a=n.sent,n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(1),t._ephemeralLocalEncSalt=null,n.t0;case 11:return n.abrupt("return",(0,u.default)((0,u.default)({},r),{},{key:a}));case 12:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(){return n.apply(this,arguments)}}());return r.all(a).then((function(e){t._ephemeralLocalEncSalt=null,t._finalDbMsgEncKeys=e,t._waitUntilFinalDbEncKeyReady.resolve()}))})).finally((function(){t._ephemeralLocalEncSalt=null}))},this._generateFinalFtsHmacKey=function(){var e=(0,l.default)(s.default.mark((function e(n){var r,a,i,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._ftsHMACKey&&null!=t._ftsHMACKey.key&&null!=t._ftsHMACKey.id){e.next=3;break}throw __LOG__(2)`Base ftsHMACKey is null in _generateFinalFtsHmacKey`,new m.DBInvalidFtsHMACKey;case 3:return r=[t._ftsHMACKey.id,t._ftsHMACKey.key],a=r[0],i=r[1],e.next=6,self.crypto.subtle.deriveKey((0,u.default)((0,u.default)((0,u.default)({},S),b),{},{salt:n,info:new Uint8Array(0)}),i,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);case 6:o=e.sent,t._finalFtsHmacKey={id:a,key:o},t._waitUntilFinalFtsHmacKeyReady.resolve();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}return(0,d.default)(e,[{key:"init",value:function(e){var t,n,a=this;if(this._db)return g.resolve();this._db=new _.default(y),this._getDbOrThrow().version(1).stores((t={},(0,o.default)(t,E,"++id, _expirtation"),(0,o.default)(t,w,"++id"),t)),this._getDbOrThrow().version(2).stores((n={},(0,o.default)(n,E,"++id"),(0,o.default)(n,w,"++id"),n));var i=e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset);return g.resolve(this._getDbOrThrow().open()).then((function(){return r.all([a._getOrUpdateEncKeys(i),a._getOrUpdateFtsKey()])}))}},{key:"_getDbOrThrow",value:function(){if(null==this._db)throw new Error("[db_encryption_key] db is not initialized");return this._db}},{key:"deleteKeys",value:function(){var e=this;return r.all([this._getDbOrThrow().table(E).clear(),this._getDbOrThrow().table(w).clear()]).then((function(){})).finally((function(){return e._db=null,g.resolve(_.default.delete(y)).catch((function(){return _.default.delete(y)}))}))}},{key:"deleteKeyCache",value:function(){this._keys=null,this._ftsHMACKey=null,this._finalDbMsgEncKeys=null,this._waitUntilFinalDbEncKeyReady=new f.Resolvable,this._waitUntilFinalFtsHmacKeyReady=new f.Resolvable,this._waitUntilEncKeyReady=new f.Resolvable,this._finalFtsHmacKey=null,this._ephemeralLocalEncSalt=null}},{key:"waitForEncKey",value:function(){return this._waitUntilEncKeyReady.promise}},{key:"waitForFinalDbMsgEncKey",value:function(){return this._waitUntilFinalDbEncKeyReady.promise}},{key:"waitForFinalFtsHmacKey",value:function(){return this._waitUntilFinalFtsHmacKeyReady.promise}},{key:"encKeys",get:function(){if(!this._keys)throw new m.DbEncKeyNotLoaded(E);return this._keys}},{key:"dbMsgEncKeys",get:function(){if(!this._finalDbMsgEncKeys)throw new m.DbMsgEncKeyNotLoaded(E);return this._finalDbMsgEncKeys}},{key:"ftsHMACKey",get:function(){if(!this._finalFtsHmacKey)throw new m.DbEncKeyNotLoaded(w);return this._finalFtsHmacKey}}]),e}());t.default=O},88963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n,r){n(t).forEach((function(t){return e(t,n,r)})),r(t)}},30134:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=n(46154),u=a(n(34263)),l=r(n(93783)),c=n(60996),d=window.Native.DocUtilsPreload,f=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"genPreview",value:function(e){return d.generatePreview({name:e.name,path:e.path}).then((function(e){var t=new Blob([e]),n=URL.createObjectURL(t);return(0,c.loadImage)(n).then((function(e){return(0,s.promiseProps)({url:n,thumbUrl:l.rotateAndResize(t,u.default.DOC_THUMB_MAX_EDGE,l.DATA_URL).then((function(e){return e.images.dataUrl})),height:e.height,width:e.width})}))}))}}]),e}();t.default=f},61713:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){if(null==e)return c();if(!(e instanceof r))return e;var t=new o.default;e.isFulfilled()||e.isRejected()?t.abort():e.catch((function(){})).then((function(){t.abort()}));return t.signal}(e&&e.signal);return new r((function(e,n){var r,a,i;t.aborted?n(new s.default):(u.push(c),t.addEventListener("abort",d),1===u.length&&(i=requestAnimationFrame((function(){a=setTimeout((function(){l()}),0)})),r=function(){cancelAnimationFrame(i),clearTimeout(a)}));function o(){t.removeEventListener("abort",d);var e=u.indexOf(c);-1!==e&&u.splice(e,1),0===u.length&&null!=r&&(r(),r=null)}function c(){o(),e()}function d(){o(),n(new s.default)}}))},t.resolveAllForTestingOnly=void 0;var i=a(n(96486)),o=a(n(35340)),s=a(n(2277)),u=[];function l(){for(;u.length>0;){u.shift()()}}t.resolveAllForTestingOnly=function(){return l(),r.resolve()};var c=i.default.once((function(){return(new o.default).signal}))},97853:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.enrich=function(e,t){var n;switch((0,i.previewType)(t)){case"pdf":n=u(e);break;case"msoffice":n=function(e){return"darwin"===process.platform||"win32"===process.platform?s.default.genPreview(e).then((function(){return r.resolve()})).catch((function(){return __LOG__(2)`document preview generation failed`,r.resolve()})):r.resolve()}(e);break;default:n=r.resolve()}return n.timeout(3e3,"Document enrichment timeout").catch((function(){return null}))},t.enrichPdf=u;var i=n(13242),o=a(n(80884)),s=a(n(30134));function u(e){var t;return o.default.fileToPdf(e).then((function(e){return t=e,o.default.pdfToImg(e,1)})).catch((function(){return __LOG__(2)`pdf preview generation failed`,null})).finally((function(){t&&o.default.releasePdf(t)}))}},66655:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.camelCase(e.replace(/^data-/,""))};var a=r(n(96486))},6774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e instanceof HTMLElement&&e.tagName.toLowerCase()===t.toLowerCase()}},74221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e instanceof HTMLElement))return!1;return n.call(e,t)};var n=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector},40869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&(e.nodeType===Node.TEXT_NODE&&0===e.textContent.length)}},21304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Boolean(e&&3===e.nodeType)}},93802:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var n=t.getRangeAt(0);if(!n.collapsed)return!1;var r=n.endContainer;if(n.startOffset!==function(e){return(0,a.default)(e)?e.textContent.length:e.childNodes.length}(r))return!1;if(e===r)return!0;if(!e.contains(r))return!1;var i=r;do{if(i.nextSibling)return!1;i=i.parentNode}while(i!==e);return!0};var a=r(n(21304))},85411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=window.getSelection();if(1!==t.rangeCount)return!1;var n=t.getRangeAt(0);if(!n.collapsed||0!==n.startOffset)return!1;var r=n.startContainer;if(e===r)return!0;if(!e.contains(r))return!1;var a=r;do{if(a.previousSibling)return!1;a=a.parentNode}while(a!==e);return!0}},70915:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.collapsed)return[];if(e.startContainer===e.endContainer)return(0,i.default)(e.startContainer)?[e.startContainer]:Array.prototype.slice.call(e.startContainer.childNodes,e.startOffset,e.endOffset);var t,n,r=e.commonAncestorContainer.childNodes;t=e.commonAncestorContainer===e.startContainer?r[0]:o(e.commonAncestorContainer,e.startContainer);(0,a.default)(t,"range is invalid: start missing"),n=e.commonAncestorContainer===e.endContainer?r[r.length-1]:o(e.commonAncestorContainer,e.endContainer);(0,a.default)(n,"range is invalid: end missing");var s=n,u=function(e){return e&&e.nextSibling},l=[],c=t;for(;c&&c!==s;)l.push(c),c=u(c)||u(c.parentNode);return l.push(s),l};var a=r(n(41143)),i=r(n(21304));function o(e,t){for(var n=t;n.parentNode!==e;){if(!n.parentNode)return null;n=n.parentNode}return n}},49315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={LOW:"low",HIGH:"high"},r=window.matchMedia("\n    only screen and (-webkit-min-device-pixel-ratio: 2),\n    only screen and (min-device-pixel-ratio: 2),\n    only screen and (min-resolution: 2dppx)\n"),a={RES:n,currentRes:r.matches?n.HIGH:n.LOW};r.addListener((function(e){var t=e.matches?n.HIGH:n.LOW;if(t!==a.currentRes){a.currentRes=t;var r=document.createEvent("Event");r.initEvent("dpichange",!0,!0),window.dispatchEvent(r)}}));var i=a;t.default=i},68511:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(96486)),s=function(){function e(t){(0,a.default)(this,e),this.rules={},this.styleSheet=this.createStyleSheet(t)}return(0,i.default)(e,[{key:"createStyleSheet",value:function(e){var t=e||o.default.uniqueId("dynamic-style-"),n=document.createElement("style");return n.id=t,n.type="text/css",document.head&&document.head.appendChild(n),n=n.sheet}},{key:"addRule",value:function(e,t){var n=this.styleSheet.cssRules.length,r=o.default.map(t,(function(e,t){return`${t}: ${e};`})).join(" ");return this.styleSheet.insertRule(`${e} { ${r} }`,n),this.rules[e]=this.styleSheet.cssRules[n],this.rules[e]}},{key:"updateRule",value:function(e,t){var n=this.rules[e];return o.default.forOwn(t,(function(e,t){n.style[o.default.camelCase(t)]=e})),n}},{key:"setRule",value:function(e,t){return this.rules[e]?this.updateRule(e,t):this.addRule(e,t)}}]),e}();t.default=s},28030:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o(null,i.default.fromForwardsStrings(e.sort((function(e,t){return t.length-e.length})).map((function(e){return`${e}${s}`}))),null,0)};var a=r(n(96486)),i=r(n(57500));function o(e,t,n,r,i){var l=[],c=!1,d=i;null==d&&(e&&1===r?u.has(e)&&(d=!0):e&&n&&2===r&&(d=u.has(n+e)));t.getChildren().forEach((function(t){t.prefix!==s?l.push(o(t.prefix,t.node,e,r+1,d)):c=!0}));var f="️"!==e||null==n||d?a.default.escapeRegExp(e||""):"️?",p=0===l.length?"":`(?:${l.join("|")})`;return p&&c&&(p+="?"),`${f}${p}`}var s="\n",u=new Set(["©","®","™","♟","♾","〰"])},12512:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.HEART_EMOJIS=t.VARIATION_CATEGORY=t.CATEGORY_ORDERING=t.LARGE_EMOJI_SIZE=t.EMOJI_WIDTH=t.EMOJI_TYPE=void 0;var a=r(n(319)),i=r(n(34263)).default.EMOJI.ORDERED_CATEGORY_IDS;t.EMOJI_TYPE={APPLE:"APPLE",WHATSAPP:"WHATSAPP"};t.EMOJI_WIDTH={small:20,large:32};var o=n(54302).Mirrored(["MEDIUM","LARGE","XLARGE"]);t.LARGE_EMOJI_SIZE=o;var s=[].concat((0,a.default)(i),["VARIATION"]);t.CATEGORY_ORDERING=s;var u=s.indexOf("VARIATION");t.VARIATION_CATEGORY=u;t.HEART_EMOJIS=["❤️","♥️","🤎","💖","🖤","💚","💜","💗","💓","💙","🤍","💛","💕","🧡"]},75940:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={APPLE:["1d5e731","529580c","d5735d4","3964227","60856da","fcef0ee","8e3414f","50659eb","8b6c76f","3b3d6b8","54fa2d7","0f873e5","83c57e6","54d4a36","05f819b","08b10df","1eda693","24f071f","43c7f1e","4673bc1","ad8e7a0","3b84c7f","47138e6","f7cf586","4609a68","eafe075","9fca360","4ff00ff","0e91b1d","958420b","194fdde","6c4a311","2c0b6d6","3b923f5","95f9182","f0b652b","5eef5f5","e2d60bb","3eb3a31","9b46eb8","e02b8ca","ccdb9d0","0204c19","e00c36f","59e20f3","585516e","3dfd1eb","265211d","44410d4","1937682","00b6dfb","c7b2566","b5308c2","3726c3f","32e0b8a","c70c8c9","929723c","3f5711a","7acb2c4","094645b","7d3f66d","e5962c7","ae792a7","76de187","bb980fd","2ec44f0","0cd59e3","1f800d7","969aa1f","20e8b4c","4fdae5e","ed4ad5f","5d67f78","9530353","5caffb3","59682ab","27b2426","b3a1edd","ab61b6f","ef4f27f","19e3281","14f4ada","70cf125","f408ea6","43ac328","c8c0ba6","39f813e","7cc745e","ce99005","4930013","d7a4068","7a46e3b","0c9c29f","56bf54b","17ac67d","dd192f7","c812d02","813dbc5","23c9c52","435e976","2bbd0df","625aadb","b9222f6","da65d5f","06ed4e2","ee050c5","9945226","84e64af","1696d42","d0e076e","cebbc40","61d3b8d","57d59fb","654bb14","f8c09c1","e52c442","7bf95b0","250df50","7dbc57b","298d700","4886b3a","640c1b4","b4254db","42b05a6","c0b44e2","024aeae","48b76e4","e06653f","70c4701","451b05c","37dc131","5a6cd0e","10fb6f0"],WHATSAPP:["275ab2d","2daeeb8","2224eba","0b9fe45","17c7395","a55d276","72434c2","1dd3846","c010a8c","ea9208b","3789cf9","1dcf7fa","6158b5d","01fd086","acc727e","6193968","17db773","bc40265","a4c2a1b","3ef52a3","2543ee4","ca1f104","4e1c931","c3a2f48","07cf04f","8b61961","9745348","5038cd6","7749b45","71b967c","45e7af0","c9cf572","a68645b","49660df","43ac7e5","e7c564a","a410ec0","9c2d525","d4bd10e","f200255","6d48324","de0a74a","9316044","0b4231e","2e8c8cb","218bf52","90fae48","da02ff1","ebb47d3","7e22c74","2391c7f","c1c493a","fd1abe6","2e29056","6fad55f","b4e6de2","cece60b","9e0a688","dfa854f","022c425","fe2ee46","2c491ca","f29136d","1a1a31a","3dc8c0d","a36018b","0a41140","682a493","36fa332","0be65c6","4b27bb5","f3bc86a","e20e059","e61f0cd","71ccb64","786bf26","54bd04a","469dba8","9f38827","52feb88","722f360","764647b","4ce20f0","e6980c1","bf2e679","4210246","7271f69","0d8cc82","b544f2d","2c0be33","337a250","456e9a0","3f11cfd","1654c9a","4a1257c","4cd78d6","b915da4","3cbce2e","6ccb7cd","8894974","7765d3c","9ff6694","8623c82","219daac","7e6f32c","e1a4573","c0c4fa0","375ae02","6e8897d","efdce79","fed2896","4849de1","cfb9c1e","88aea2a","ecd36cd","3a42d47","9ecf955","484b2d5","726431e","8b39210","ab2199a","6d2b134"]}},68386:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return{low:f(`${t}-64.png`,e.toLowerCase()),high:f(`${t}-64.png`,e.toLowerCase())}},t.getEmojiSpritesPath=function(e,t,n,r){var a;a=d;var i=(0,s.default)(o.default[e][t],"emojiSpriteHashes[emojiType][bucketId]");return`${a}/emoji-${t}-${n}_${i}.${r}`};var a=r(n(34263)),i=n(62129),o=r(n(75940)),s=r(n(91080)),u=a.default.EMOJI,l=u.LARGE_EMOJI_BASE_PATH,c=(u.EMOJI_SPRITES_BASE_PATH,u.LARGE_EMOJI_ELECTRON_BASE_PATH),d=u.EMOJI_SPRITES_ELECTRON_BASE_PATH;function f(e,t){return l,`${c}/${i.prefixHash}_${t.slice(0,1)}_${e}`}},8513:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isBaseCoupleEmoji=function(e){return T.includes(e)},t.default=t.getPermutations=void 0;var a=r(n(43269)),i=r(n(63038)),o=r(n(34575)),s=r(n(93913)),u=r(n(319)),l=r(n(94184)),c=r(n(91080)),d=r(n(41143)),f=r(n(96486)),p=r(n(50258)),h=r(n(28030)),_=r(n(34263)),v=n(12512),m=r(n(68386)),g=r(n(83620)),y=r(n(89580)),E=["🏻","🏼","🏽","🏾","🏿"],S=new RegExp(E.join("|"),"g"),b=_.default.EMOJI.BUCKET_SIZE,T=["🧑‍🤝‍🧑","👭","👬","👫"],w=v.HEART_EMOJIS.map((function(e){return e})),A=new Set(["︀","︁","︂","︃","︄","︅","︆","︇","︈","︉","︊","︋","︌","︍","︎","️"]),C=function(e){return e.replace(/\uFE0F/g,"")},O=f.default.memoize((function(e,t){return function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.length===t)return[r];for(var a=[],i=0;i<e.length;i++){var o=(0,u.default)(r);o.push(e[i]),a=a.concat(n(o))}return a}()}),(function(e,t){return e.toString()+t}));function M(e){return e.every((function(t){return t===e[0]}))?e[0]:e.join("")}t.getPermutations=O;var I=new(function(){function e(){var t=this;(0,o.default)(this,e),this.skinToneVariations=E,this._specialEmojiRegex=null,this.emojiRegex=function(){var e=t._createEmojiRegexIfNeeded();return e.lastIndex=0,e},this._createEmojiRegexIfNeeded=(0,g.default)((function(){var e=t._getEmojiRegexSource();return new RegExp("("+e+")","g")})),this.onlyEmojiRegex=function(){var e=t._createOnlyEmojiRegexIfNeeded();return e.lastIndex=0,e},this._createOnlyEmojiRegexIfNeeded=(0,g.default)((function(){var e=t._getEmojiRegexSource();return new RegExp("^("+e+")+$","g")})),this.convertToTextWithoutSpecialEmojis=function(e){if(!t._specialEmojiRegex){var n=(0,h.default)(Object.keys(y.default));t._specialEmojiRegex=new RegExp(`(${n})`,"g")}return t._specialEmojiRegex.lastIndex=0,e.replace(t._specialEmojiRegex,(function(e){return y.default[e]}))},this.splitEmojis=function(e){return!1===t.containsOnlyEmoji(e)?null:e.split(t.emojiRegex()).filter(Boolean)},this.containsEmoji=function(e){return t.emojiRegex().test(e)},this.containsOnlyEmoji=function(e){return t.onlyEmojiRegex().test(e)},this.matchLargeEmojiPattern=function(e){if(e.length>50||e.includes(" "))return null;var n=t._getLargeEmojisRegex().exec(e);return n?n.filter(Boolean).slice(1):null},this.normalizeEmojiFromString=function(e){return t.normalizeEmoji(e)},this.normalizeEmoji=function(e){var n=C(e);return t._getDerivedMaps().unqualifiedToNormalizedEmoji.get(n)},this.normalizeAllEmojis=f.default.memoize((function(e){return e?e.replace(t.emojiRegex(),(function(e,n){var r;return A.has(n)?"":null!==(r=t.normalizeEmoji(n))&&void 0!==r?r:"□"})):""})),this.getSkinToneVariant=function(e,n){var r=t._getBaseToSkinToneEmojis().get(e);if(null==r)return null;var a=M(n);return r.get(a)},this._getDerivedMaps=(0,g.default)((function(){var e=t._getConfig(),n=e.orderedEmojis,r=e.legacyToEmoji,a=new Map,o=new Map,s=new Map,u=0;return n.forEach((function(e,t){""!==e&&null!=e&&((Array.isArray(e)?e:[e]).forEach((function(e){o.set(e,t);var n=C(e);s.set(n,e)})),a.set(t,u),u++)})),f.default.entries(r).forEach((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];o.set(n,r);var a=C(n);s.set(a,n)})),{emojiToGlyphId:o,glyphIdToIndex:a,unqualifiedToNormalizedEmoji:s}})),this._getBaseToSkinToneEmojis=(0,g.default)((function(){var e,n=t._getDerivedMaps().emojiToGlyphId,r=new Map,i=(0,a.default)(n.keys());try{var o=function(){var n=e.value,a=void 0,i=n.replace(S,(function(e){return null==a&&(a=[]),a.push(e),""}));if(null==a)return"continue";var o=a,s=void 0;s="👩‍🤝‍👩"===i?"👭":"👨‍🤝‍👨"===i?"👬":"👩‍🤝‍👨"===i?"👫":i;var u=t.normalizeEmoji(s);if(null==u)return"continue";var l=r.get(u);null==l&&((l=new Map).set("",u),r.set(u,l));var c=M(o);l.set(c,n)};for(i.s();!(e=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}return r})),this._getSkinToneEmojisToBase=(0,g.default)((function(){var e,n=new Map,r=(0,a.default)(t._getBaseToSkinToneEmojis().entries());try{for(r.s();!(e=r.n()).done;){var o,s=(0,i.default)(e.value,2),u=s[0],l=s[1],c=(0,a.default)(l.values());try{for(c.s();!(o=c.n()).done;){var d=o.value;n.set(d,u)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){r.e(e)}finally{r.f()}return n})),this._getEmojiRegexSource=(0,g.default)((function(){var e=t._getDerivedMaps().emojiToGlyphId;return(0,h.default)([].concat((0,u.default)(e.keys()),(0,u.default)(A)).filter(Boolean))})),this._createLargeEmojisRegexIfNeeded=(0,g.default)((function(){var e=t._getEmojiRegexSource();return new RegExp(`^(${e})(${e})?(${e})?$`)})),this.getEmojisInCategory=function(e){var n;return null!==(n=t._getConfig().categorizedEmojis[e])&&void 0!==n?n:[]},this._getEmojiToCategory=(0,g.default)((function(){var e=t._getConfig().categorizedEmojis,n=new Map;return Object.keys(e).forEach((function(r){var a=v.CATEGORY_ORDERING.indexOf(r);e[r].forEach((function(e){var r=t.normalizeEmoji(e);null!=r&&n.set(r,a)}))})),n})),this.getGlyphId=function(e){var n=t.normalizeEmoji(e);return null==n?null:t._getDerivedMaps().emojiToGlyphId.get(n)},this.getGlyphPath=function(e,n){return(0,m.default)(t._getConfig().emojiType,e,n)},this.isGlyphCached=function(e){var n=t._getGlyphIndex(e);return t._getCachedGlyphs().get(n)},this.markGlyphCached=function(e){var n=t._getGlyphIndex(e);t._getCachedGlyphs().set(n)},this._getCachedGlyphs=(0,g.default)((function(){return new p.default(t._getGlyphCount())})),this.getCssClasses=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small";return(0,l.default)(`b${t.getBucket(e)}`,"small"===n?"emoji":"emojik",t._getConfig().emojiType===v.EMOJI_TYPE.APPLE?"apple":"wa")},this.getStyle=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small",r=t._getCoordinates(e,n),a=r.xpos,i=r.ypos;return{backgroundPosition:`-${a}px -${i}px`}},this.getBucket=function(e){var n=t._getGlyphIndex(e);return`${Math.floor(n/b)}`},this.getHeartEmojis=(0,g.default)((function(){return w.map(t.normalizeEmoji).filter(Boolean)})),this._getLastBucketId=(0,g.default)((function(){var e=t._getGlyphCount();return e-e%b})),this._getLastBucketCols=(0,g.default)((function(){return Math.floor(Math.sqrt(t._getGlyphCount()-t._getLastBucketId()))}))}return(0,s.default)(e,[{key:"configure",value:function(e){e!==this._config&&(this._config=e,this.getHeartEmojis.reset(),this._specialEmojiRegex=null,this._createEmojiRegexIfNeeded.reset(),this._createLargeEmojisRegexIfNeeded.reset(),this._createOnlyEmojiRegexIfNeeded.reset(),this._getEmojiRegexSource.reset(),this._getCachedGlyphs.reset(),this._getSkinToneEmojisToBase.reset(),this._getBaseToSkinToneEmojis.reset(),this._getEmojiToCategory.reset(),this._getLastBucketId.reset(),this._getLastBucketCols.reset(),this._getDerivedMaps.reset())}},{key:"_getConfig",value:function(){return(0,d.default)(null!=this._config,"Attempt to use EmojiUtil before it's been configured"),this._config}},{key:"isEmoji",value:function(e){return null!=this.normalizeEmoji(e)}},{key:"getSkinToneBase",value:function(e){var t,n=this.normalizeEmoji(e);return null==n?null:null!==(t=this._getSkinToneEmojisToBase().get(n))&&void 0!==t?t:null}},{key:"_getLargeEmojisRegex",value:function(){var e=this._createLargeEmojisRegexIfNeeded();return e.lastIndex=0,e}},{key:"_getGlyphCount",value:function(){return this._getDerivedMaps().glyphIdToIndex.size}},{key:"_getCoordinates",value:function(e,t){var n=this._getGlyphIndex(e),r=n%b,a=n>=this._getLastBucketId()?this._getLastBucketCols():Math.floor(Math.sqrt(b)),i=v.EMOJI_WIDTH[t],o=Math.floor(r/a);return{xpos:Math.floor(r%a)*i,ypos:o*i,width:i}}},{key:"_getGlyphIndex",value:function(e){var t=this._getDerivedMaps().glyphIdToIndex;return(0,c.default)(t.get(e),"glyphIdToIndex.get(glyphId)")}}]),e}());t.default=I},52555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={SMILEYS_PEOPLE:["😀","😃","😄","😁","😆","😅","😂","🤣","🥲","☺️","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","🤌","🤏","👈","👉","👆","👇","☝️","✋","🤚","🖐️","🖖","👋","🤙","💪","🦾","🖕","✍️","🙏","🦶","🦵","🦿","💄","💋","👄","🦷","👅","👂","🦻","👃","👣","👁️","👀","🫀","🫁","🧠","🗣️","👤","👥","🫂","👶","👧","🧒","👦","👩","🧑","👨","👩‍🦱","🧑‍🦱","👨‍🦱","👩‍🦰","🧑‍🦰","👨‍🦰","👱‍♀️","👱","👱‍♂️","👩‍🦳","🧑‍🦳","👨‍🦳","👩‍🦲","🧑‍🦲","👨‍🦲","🧔","👵","🧓","👴","👲","👳‍♀️","👳","👳‍♂️","🧕","👮‍♀️","👮","👮‍♂️","👷‍♀️","👷","👷‍♂️","💂‍♀️","💂","💂‍♂️","🕵️‍♀️","🕵️","🕵️‍♂️","👩‍⚕️","🧑‍⚕️","👨‍⚕️","👩‍🌾","🧑‍🌾","👨‍🌾","👩‍🍳","🧑‍🍳","👨‍🍳","👩‍🎓","🧑‍🎓","👨‍🎓","👩‍🎤","🧑‍🎤","👨‍🎤","👩‍🏫","🧑‍🏫","👨‍🏫","👩‍🏭","🧑‍🏭","👨‍🏭","👩‍💻","🧑‍💻","👨‍💻","👩‍💼","🧑‍💼","👨‍💼","👩‍🔧","🧑‍🔧","👨‍🔧","👩‍🔬","🧑‍🔬","👨‍🔬","👩‍🎨","🧑‍🎨","👨‍🎨","👩‍🚒","🧑‍🚒","👨‍🚒","👩‍✈️","🧑‍✈️","👨‍✈️","👩‍🚀","🧑‍🚀","👨‍🚀","👩‍⚖️","🧑‍⚖️","👨‍⚖️","👰‍♀️","👰","👰‍♂️","🤵‍♀️","🤵","🤵‍♂️","👸","🤴","🥷","🦸‍♀️","🦸","🦸‍♂️","🦹‍♀️","🦹","🦹‍♂️","🤶","🧑‍🎄","🎅","🧙‍♀️","🧙","🧙‍♂️","🧝‍♀️","🧝","🧝‍♂️","🧛‍♀️","🧛","🧛‍♂️","🧟‍♀️","🧟","🧟‍♂️","🧞‍♀️","🧞","🧞‍♂️","🧜‍♀️","🧜","🧜‍♂️","🧚‍♀️","🧚","🧚‍♂️","👼","🤰","🤱","👩‍🍼","🧑‍🍼","👨‍🍼","🙇‍♀️","🙇","🙇‍♂️","💁‍♀️","💁","💁‍♂️","🙅‍♀️","🙅","🙅‍♂️","🙆‍♀️","🙆","🙆‍♂️","🙋‍♀️","🙋","🙋‍♂️","🧏‍♀️","🧏","🧏‍♂️","🤦‍♀️","🤦","🤦‍♂️","🤷‍♀️","🤷","🤷‍♂️","🙎‍♀️","🙎","🙎‍♂️","🙍‍♀️","🙍","🙍‍♂️","💇‍♀️","💇","💇‍♂️","💆‍♀️","💆","💆‍♂️","🧖‍♀️","🧖","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯","👯‍♂️","🕴️","👩‍🦽","🧑‍🦽","👨‍🦽","👩‍🦼","🧑‍🦼","👨‍🦼","🚶‍♀️","🚶","🚶‍♂️","👩‍🦯","🧑‍🦯","👨‍🦯","🧎‍♀️","🧎","🧎‍♂️","🏃‍♀️","🏃","🏃‍♂️","🧍‍♀️","🧍","🧍‍♂️","👫","👭","👬","👩‍❤️‍👨","👩‍❤️‍👩","👨‍❤️‍👨","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👨‍👩‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🪢","🧶","🧵","🪡","🧥","🥼","🦺","👚","👕","👖","🩲","🩳","👔","👗","👙","🩱","👘","🥻","🩴","🥿","👠","👡","👢","👞","👟","🥾","🧦","🧤","🧣","🎩","🧢","👒","🎓","⛑️","🪖","👑","💍","👝","👛","👜","💼","🎒","🧳","👓","🕶️","🥽","🌂"],ANIMALS_NATURE:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐻‍❄️","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🪱","🐛","🦋","🐌","🐞","🐜","🪰","🪲","🪳","🦟","🦗","🕷️","🕸️","🦂","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦞","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🦭","🐊","🐅","🐆","🦓","🦍","🦧","🦣","🐘","🦛","🦏","🐪","🐫","🦒","🦘","🦬","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🦙","🐐","🦌","🐕","🐩","🦮","🐕‍🦺","🐈","🐈‍⬛","🪶","🐓","🦃","🦤","🦚","🦜","🦢","🦩","🕊️","🐇","🦝","🦨","🦡","🦫","🦦","🦥","🐁","🐀","🐿️","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🪵","🌱","🌿","☘️","🍀","🎍","🪴","🎋","🍃","🍂","🍁","🍄","🐚","🪨","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","🪐","💫","⭐","🌟","✨","⚡","☄️","💥","🔥","🌪️","🌈","☀️","🌤️","⛅","🌥️","☁️","🌦️","🌧️","⛈️","🌩️","🌨️","❄️","☃️","⛄","🌬️","💨","💧","💦","☔","☂️","🌊","🌫️"],FOOD_DRINK:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🫑","🌽","🥕","🫒","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🌰","🥜","🍯","🥛","🍼","🫖","☕","🍵","🧃","🥤","🧋","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍾","🧊","🥄","🍴","🍽️","🥣","🥡","🥢","🧂"],ACTIVITY:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏒","🏑","🥍","🏏","🪃","🥅","⛳","🪁","🏹","🎣","🤿","🥊","🥋","🎽","🛹","🛼","🛷","⛸️","🥌","🎿","⛷️","🏂","🪂","🏋️‍♀️","🏋️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸","🤸‍♂️","⛹️‍♀️","⛹️","⛹️‍♂️","🤺","🤾‍♀️","🤾","🤾‍♂️","🏌️‍♀️","🏌️","🏌️‍♂️","🏇","🧘‍♀️","🧘","🧘‍♂️","🏄‍♀️","🏄","🏄‍♂️","🏊‍♀️","🏊","🏊‍♂️","🤽‍♀️","🤽","🤽‍♂️","🚣‍♀️","🚣","🚣‍♂️","🧗‍♀️","🧗","🧗‍♂️","🚵‍♀️","🚵","🚵‍♂️","🚴‍♀️","🚴","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖️","🏵️","🎗️","🎫","🎟️","🎪","🤹‍♀️","🤹","🤹‍♂️","🎭","🩰","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🪘","🎷","🎺","🪗","🎸","🪕","🎻","🎲","♟️","🎯","🎳","🎮","🎰","🧩"],TRAVEL_PLACES:["🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐","🛻","🚚","🚛","🚜","🦯","🦽","🦼","🛴","🚲","🛵","🏍️","🛺","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩️","💺","🛰️","🚀","🛸","🚁","🛶","⛵","🚤","🛥️","🛳️","⛴️","🚢","⚓","🪝","⛽","🚧","🚦","🚥","🚏","🗺️","🗿","🗽","🗼","🏰","🏯","🏟️","🎡","🎢","🎠","⛲","⛱️","🏖️","🏝️","🏜️","🌋","⛰️","🏔️","🗻","🏕️","⛺","🛖","🏠","🏡","🏘️","🏚️","🏗️","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛️","⛪","🕌","🕍","🛕","🕋","⛩️","🛤️","🛣️","🗾","🎑","🏞️","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙️","🌃","🌌","🌉","🌁"],OBJECTS:["⌚","📱","📲","💻","⌨️","🖥️","🖨️","🖱️","🖲️","🕹️","🗜️","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽️","🎞️","📞","☎️","📟","📠","📺","📻","🎙️","🎚️","🎛️","🧭","⏱️","⏲️","⏰","🕰️","⌛","⏳","📡","🔋","🔌","💡","🔦","🕯️","🪔","🧯","🛢️","💸","💵","💴","💶","💷","🪙","💰","💳","💎","⚖️","🪜","🧰","🪛","🔧","🔨","⚒️","🛠️","⛏️","🪚","🔩","⚙️","🪤","🧱","⛓️","🧲","🔫","💣","🧨","🪓","🔪","🗡️","⚔️","🛡️","🚬","⚰️","🪦","⚱️","🏺","🔮","📿","🧿","💈","⚗️","🔭","🔬","🕳️","🩹","🩺","💊","💉","🩸","🧬","🦠","🧫","🧪","🌡️","🧹","🪠","🧺","🧻","🚽","🚰","🚿","🛁","🛀","🧼","🪥","🪒","🧽","🪣","🧴","🛎️","🔑","🗝️","🚪","🪑","🛋️","🛏️","🛌","🧸","🪆","🖼️","🪞","🪟","🛍️","🛒","🎁","🎈","🎏","🎀","🪄","🪅","🎊","🎉","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷️","🪧","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","🧾","📊","📈","📉","🗒️","🗓️","📆","📅","🗑️","📇","🗃️","🗳️","🗄️","📋","📁","📂","🗂️","🗞️","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🧷","🔗","📎","🖇️","📐","📏","🧮","📌","📍","✂️","🖊️","🖋️","✒️","🖌️","🖍️","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓"],SYMBOLS:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕","🛑","⛔","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿","🅿️","🛗","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","⚧️","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸️","⏯️","⏹️","⏺️","⏭️","⏮️","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾️","💲","💱","™️","©️","®️","👁️‍🗨️","🔚","🔙","🔛","🔝","🔜","〰️","➰","➿","✔️","☑️","🔘","🔴","🟠","🟡","🟢","🔵","🟣","⚫","⚪","🟤","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾","◽","◼️","◻️","🟥","🟧","🟨","🟩","🟦","🟪","⬛","⬜","🟫","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","💬","💭","🗯️","♠️","♣️","♥️","♦️","🃏","🎴","🀄","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],FLAGS:["🏳️","🏴","🏴‍☠️","🏁","🚩","🏳️‍🌈","🏳️‍⚧️","🇺🇳","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇸🇿","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇰","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇹","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇸","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]}},14160:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,p.default)(e,(0,_.default)(E,"Emoji Trie expected to be loaded."))};var o=i(n(87757)),s=i(n(63038)),u=i(n(48926)),l=n(53615),c=n(80835),d=i(n(96486)),f=i(n(22324)),p=a(n(29703)),h=i(n(89115)),_=i(n(35643)),v=a(n(14094)),m=a(n(59502)),g=i(n(61110)),y=new Set(["ar","bn","cs","de","en","es","fa","fr","gu","he","hi","hu","id","it","mr","ms","nl","pl","pt","pt-BR","ro","ru","sk","th","tr","uk","ur","zh-CN","zh-TW","zh-HK"]),E=null;var S=null,b=[];function T(){var e=d.default.uniq(["en",h.default.getLocale()]).filter((function(e){return y.has(e)}));if(!(0,f.default)(b,e)){b=e;var t=r.all(e.map((function(e){return function(e){return(0,c.promiseLoop)(function(){var t=(0,u.default)(o.default.mark((function t(r,a,i){var u,c;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=(0,l.delayMs)(m.expBackoff(i,12e4,1e3,.1)),t.next=3,n(26299)(`./${e}`);case 3:return c=t.sent,t.abrupt("return",c.default().then((function(e){var t=(0,s.default)(e,2)[1];return r(t)})).catch((function(){return u})));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()).catch((function(){return{}}))}(e)}))).then((function(e){S===t&&(E=(0,p.emojiLocaleDictsToTrie)(e))})).catch((function(){})).finally((function(){S===t&&(S=null)}));S=t}}h.default.on("locale_change",(function(){T()})),(0,g.default)(v.default,"change:mode",(function(){return v.default.mode===v.StreamMode.MAIN})).then((function(){T()}))},29703:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=[];if(e){var r=function(e,t){var n=function(e,t){if(!t)return[];if(e.length<=5)return t.getMatches(e);var n=e.substring(0,5).trim(),r=t.getMatches(n);return r=s.default.filter(r,(function(t){return t.keyword.startsWith(e)}))}(e,t),r=p(s.default.flatMap(n,(function(e){return e.value}))),a=p(s.default.flatMap(n.filter((function(t){return t.keyword===e})),(function(e){return e.value}))),i=s.default.intersection(p(l.default.map((function(e){return e.id}))),r),o=s.default.intersection(p(d),r),u=s.default.intersection(s.default.union(i,o),a);return s.default.union(u,_(a),i,o,_(r))}(e.toLowerCase(),t);n=s.default.uniq(r)}return n},t.emojiLocaleDictsToTrie=function(e){var t=e[0];e.length>1&&(t=(0,a.default)((0,a.default)({},t),e[1]));return function(e,t){var n=c.default.fromForwardsStrings(e.map((function(e){return e[t]})),e);return{getMatches:function(e){return n.search(e)}}}(s.default.map(t,(function(e,t){var n=t.toLowerCase(),r=n.substring(0,5);return{value:e,keyword:n,shortKeyword:r}})),"shortKeyword")};var a=r(n(81109)),i=r(n(319)),o=r(n(43269)),s=r(n(96486)),u=r(n(8513)),l=r(n(25506)),c=r(n(57500)),d=["😂","😍","😘","🤣","😀","❤️","😉","😊","🤔","😭","😁","😜","👏","😎","👍","😬","😆","🙂","😇","😠","😅","☺️","🤗","😄","😒","😃","😏","😌","👌","😝","🙃","😋","🎂","😡","😱","🙏","😔","😢","😳","😞","🤤","👊","😛","😚","🙄","💕","✌️","💪","💞","🌹"],f=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS","VARIATION"];function p(e){return e.map(u.default.normalizeEmoji).filter(Boolean)}var h=s.default.once((function(){var e,t=new Map,n=0,r=(0,o.default)(f);try{for(r.s();!(e=r.n()).done;){var a,i=e.value,s=u.default.getEmojisInCategory(i),l=(0,o.default)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;t.set(c,n),n++}}catch(e){l.e(e)}finally{l.f()}}}catch(e){r.e(e)}finally{r.f()}return t}));function _(e){var t=h();return(0,i.default)(e).sort((function(e,n){var r,a;return(null!==(r=t.get(e))&&void 0!==r?r:Number.MAX_SAFE_INTEGER)-(null!==(a=t.get(n))&&void 0!==a?a:Number.MAX_SAFE_INTEGER)}))}},17533:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initEncSalt=function(){return f.apply(this,arguments)},t.initEncSaltForInvoker=function(){return p.apply(this,arguments)},t.generateFinalDbEncryptionAndFtsKeyForInvoker=function(e){return(0,l.get)().generateFinalDbEncryptionAndFtsKey(e)},t.deleteEncKeysAndCache=function(){var e;return r.all([null===(e=i)||void 0===e?void 0:e.deleteKeys(),(0,l.get)().deleteDbEncKeyCache()]).then((function(){}))};var i,o=a(n(87757)),s=a(n(48926)),u=n(10844),l=n(31785),c=a(n(34541));i=n(17894).default;var d=null;function f(){return(f=(0,s.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==d&&(d=(0,u.getOrGenSalt)()),e.next=3,d;case 3:if((n=e.sent)&&n.constructor===Uint8Array){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",null===(t=i)||void 0===t?void 0:t.init(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==d&&(d=(0,u.getOrGenSalt)()),e.next=3,d;case 3:if((t=e.sent)&&t.constructor===Uint8Array){e.next=6;break}return e.abrupt("return");case 6:(0,l.get)().initDatabaseEncnKey(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.default.on("logout",(function(){d=r.resolve(null)}))},10844:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getOrGenSalt=function(){var e=!!(0,i.getMaybeMeUser)();return new r((function(t){var n=e?"db-encryption-salt-get":"db-encryption-salt-gen";s.invoke(n).then((function(e){null==e&&(__LOG__(4,void 0,new Error)`[DB ENC CRITICAL ERROR] null returned from keychain`,o.default.logout()),t((new TextEncoder).encode(e))}))}))},t.deleteSalt=function(){return s.invoke("db-encryption-salt-delete")};var i=n(71701),o=a(n(7860)),s=window.Native.ipcRenderer},52306:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBroadcastEphemeralSetting=function(e,t,n,c,d){var f=e.toString({legacy:!0}),p=t.toString({legacy:!0}),h=n.toString({legacy:!0}),_=i.Binary.build(`Ephemeral ${p} ${f}`).readByteArray(),v=new Uint8Array(d),m=(0,o.decodeB64)(c),g=i.Binary.build(h).readBuffer();return function(e,t){return self.crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"]).then((function(e){return self.crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:l,info:t},e,{name:"HMAC",hash:"SHA-256"},!0,["verify"])})).then((function(e){return self.crypto.subtle.exportKey("raw",e)}))}(v,_).then((function(e){return function(e,t,n){var r=e.slice(0,12),a=e.slice(12,44);return self.crypto.subtle.importKey("raw",a,"AES-GCM",!1,["decrypt"]).then((function(e){return self.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(r),additionalData:n},e,t)}))}(e,m,g)})).then((function(e){var t=(0,a.decodeProto)(u.EphemeralSettingSpec,e),n=t.duration,i=t.timestamp;return null==n||null==i?r.reject(new Error("ephSetting decoded into malformed proto")):{ephemeralDuration:n,ephemeralSettingTimestamp:(0,s.castLongIntToUnixTime)(i)}}))};var a=n(53939),i=n(17643),o=n(92827),s=n(90066),u=n(69721),l=new Uint8Array(32)},41150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisappearingModeInitiator=void 0;var r=n(54302)({ChangedInChat:"chat",InitiatedByMe:"me",InitiatedByOther:"other"});t.DisappearingModeInitiator=r},54168:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateEphemeralSystemMessage=function(e,t){if(a.default.supportsFeature(a.default.F.MD_BACKEND)){var r=n(39888).handleSingleMsgMD,c={id:new u.default({id:(0,l.default)(),remote:e.id,fromMe:!1}),from:e.id,to:(0,s.getMaybeMeUser)(),t:i.default.globalUnixTime(),type:o.default.MSG_TYPE.PROTOCOL,subtype:"ephemeral_setting",ephemeralDuration:t,isNewMsg:!0};r(e.id,c)}};var a=r(n(22021)),i=r(n(79140)),o=r(n(34263)),s=n(71701),u=r(n(5315)),l=r(n(75554))},92407:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDisappearingModeSettingForChat=function(e){var t=o((0,i.getMaybeMeUser)(),!0),n=o(e,!1);if(!t&&!n)return null;if(t&&n)return n.duration<t.duration?n:t;return null!=n?n:t},t.getDisappearingModeSettingForUser=o;var a=r(n(48629)),i=n(71701);function o(e,t){var n=a.default.get(e);if(!n)return null;var r=n.disappearingModeDuration,i=n.disappearingModeSettingTimestamp;return null==r||0===r?null:{duration:r,settingTimestamp:null!=i?i:0,initiatedByMe:t}}},87847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEphemeralExpirationTimestamp=function(e,t,n,r,a){if("ephemeral_setting"===r)return null;if(null==e||0===e)return null;if(a&&null!=t)return t+e;return n+e}},53020:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isEphemeralDurationAllowed=function(e){return!(e<0)&&(0===e||a.default.getEphemeralMessagesAllowedValues().includes(e))};var a=r(n(63056))},62828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUpdateEphemeralSetting=function(e){var t=e.oldDuration,n=e.oldSettingTimestamp,a=e.newDuration,i=e.newSettingTimestamp,o=e.chatId;return i>n||!(i<n)&&(t!==a&&!(0,r.getMaybeMeUser)().isLessThan(o))};var r=n(71701)},3130:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.apply(this,arguments)};var a=r(n(87757)),i=r(n(48926));function o(){return(o=(0,i.default)(a.default.mark((function e(){var t,n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(null==(t=navigator.storage)?void 0:t.estimate)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,t.estimate();case 5:return n=e.sent,r=n.usage,i=n.quota,e.abrupt("return",{usage:r,quota:i});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},14656:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.getFiles=function(e,t){var n=e.target.files||e.dataTransfer&&e.dataTransfer.files,a=n?Array.from(n):[];if(t){var u=("string"==typeof t?[t]:t).map((function(e){return new RegExp(e)}));a=a.filter((function(e){return u.some((function(t){return e.type.match(t)}))}))}if(a.length)return r.resolve(a);var l=e.dataTransfer;if(l&&l.getData("text/uri-list"))return s.urlToFile(l.getData("text/uri-list")).then((function(e){return[(0,o.createFile)([e],"",{type:e.type})]}));if(l&&l.getData("text/html")){var c=(new DOMParser).parseFromString(l.getData("text/html"),"text/html");if(c.createNodeIterator(c.childNodes[0],NodeFilter.SHOW_TEXT).nextNode()){if(l.getData("text/plain")){var d=new i.MediaDragDropError(`dropped html has text nodes: ${l.getData("text/plain")}`);return r.reject(d)}}else{var f=c.getElementsByTagName("img");if(f.length)return s.urlToFile(f[0].src).then((function(e){return[(0,o.createFile)([e],"",{type:e.type})]}))}}return r.resolve([])};var i=a(n(98569)),o=n(19059),s=a(n(93783))},28681:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(96486)),u=/\s+/,l=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"on",value:function(e,t,n){if(!t)return this;if("function"!=typeof t)throw new Error("Callback parameter passed is not a function");return this._multiEvent.apply(this,[this.on].concat(Array.prototype.slice.call(arguments)))||this._getOrCreateEvents(e).push({callback:t,context:n,ctx:n||this}),this}},{key:"once",value:function(e,t,n){if(!t)return this;if(this._multiEvent.apply(this,[this.once].concat(Array.prototype.slice.call(arguments))))return this;var r=this,a=s.default.once((function(){r.off(e,a),t.apply(this,arguments)}));return a._callback=t,this.on(e,a,n)}},{key:"off",value:function(e,t,n){var r=this._events;if(!r)return this;if(this._multiEvent.apply(this,[this.off].concat(Array.prototype.slice.call(arguments))))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(var a=e?[e]:Object.keys(r),i=0;i<a.length;i++){var o=a[i],s=r[o];if(s){if(r[o]=[],t||n)for(var u=0;u<s.length;u++){var l=s[u];(t&&t!==l.callback&&t!==l.callback._callback||n&&l.context!==n)&&r[o].push(l)}r[o].length||delete r[o]}}return this}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!this._events)return this;if(this._multiEvent.apply(this,[this.trigger].concat(Array.prototype.slice.call(arguments))))return this;var a=this._getEvents(e),i=this._getEvents("all");return a&&this._triggerEvents(a,n),i&&this._triggerEvents(i,arguments),this}},{key:"stopListening",value:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=e&&e._listenId,o=i?(0,a.default)({},i,e):r;for(var u in o){var l=o[u];l.off(t,n,this),(!t&&!n||s.default.isEmpty(l._events))&&delete r[u]}return s.default.isEmpty(this._listeningTo)&&delete this._listeningTo,this}},{key:"listenTo",value:function(e,t,n){return n?(this._addListeningTo(e),e.on(t,n,this),this):this}},{key:"listenToOnce",value:function(e,t,n){return this._addListeningTo(e),e.once(t,n,this),this}},{key:"listenToAndRun",value:function(e,t,n){return this.listenTo.apply(this,arguments),n.apply(this),this}},{key:"isListening",value:function(e){var t=this._events;return!!t&&("string"==typeof e?!!t[e]:s.default.isEmpty(t))}},{key:"_addListeningTo",value:function(e){(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=s.default.uniqueId("l"))]=e}},{key:"_getOrCreateEvents",value:function(e){var t=this._events||(this._events={});return t[e]||(t[e]=[])}},{key:"_getEvents",value:function(e){if(e){var t=this._events;if(t)return t[e]}}},{key:"_multiEvent",value:function(e,t){if(u.test(t)){for(var n=t.split(u),r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];for(var o=0;o<n.length;o++)e.call.apply(e,[this,n[o]].concat(a));return!0}return!1}},{key:"_triggerEvents",value:function(e,t){var n,r=-1,a=e.length,i=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++r<a;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<a;)(n=e[r]).callback.call(n.ctx,i);return;case 2:for(;++r<a;)(n=e[r]).callback.call(n.ctx,i,o);return;case 3:for(;++r<a;)(n=e[r]).callback.call(n.ctx,i,o,s);return;default:for(;++r<a;)(n=e[r]).callback.apply(n.ctx,t)}}},{key:"bind",value:function(){return this.on.apply(this,arguments)}},{key:"unbind",value:function(){return this.off.apply(this,arguments)}},{key:"removeListener",value:function(){return this.off.apply(this,arguments)}},{key:"removeAllListeners",value:function(){return this.off()}},{key:"emit",value:function(){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return this.trigger(arguments)}}]),e}();t.default=l},98569:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GUM=t.UnableToGetContentLengthError=t.SourceUnavailableError=t.AbortError=t.NotFoundError=t.OverconstrainedError=t.ConstraintNotSatisfiedError=t.NotAllowedError=t.NotSupportedError=t.GUMError=t.ActiveChatChanged=t.Unmount=t.ActionError=t.CanNotSendUnencrypted=t.CapabilityUnknown=t.CapabilityInvalid=t.CapabilityError=t.DeprecatedProtocolVersion=t.UpdateImmediately=t.ProtoVersionUndefined=t.DBInvalidFtsHMACKey=t.DbOnLogoutAbort=t.DbMsgEncKeyNotLoaded=t.DbEncKeyNotLoaded=t.ModelCreateError=t.ModelError=t.MediaUnsupportedError=t.MediaDragDropError=t.UnableToPlayVideoError=t.TranscodeBlobTooLargeError=t.MediaLoadError=t.MediaMissing=t.MediaNeedsReupload=t.BingServerError=t.InvalidServerResponseError=t.ServerStatusError=t.DecodeWebpResultsError=t.ImageError=t.BlockedByProxy=t.SocketNotOpen=t.SocketClosed=t.SocketError=t.MediaFileEmpty=t.MediaFileFailedLoad=t.MediaDecryptionError=t.MediaEncryptionError=t.InvalidMediaFileType=t.InvalidImageFileType=t.MediaFileError=t.CatalogImageDownloadError=t.GaveUpRetry=t.ShouldLoop=t.Offline=t.Disconnected=t.QueryDrop=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(1838),u=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("QueryDrop"));t.QueryDrop=u;var l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("Disconnected"));t.Disconnected=l;var c=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("Offline"));t.Offline=c;var d=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("ShouldLoop"));t.ShouldLoop=d;var f=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("GaveUpRetry"));t.GaveUpRetry=f;var p=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("CatalogImageDownloadError"));t.CatalogImageDownloadError=p;var h=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaFileError"));t.MediaFileError=h;var _=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("InvalidImageFileType",!0,h));t.InvalidImageFileType=_;var v=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("InvalidMediaFileType",!0,h));t.InvalidMediaFileType=v;var m=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaEncryptionError",!0,h));t.MediaEncryptionError=m;var g=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaDecryptionError",!0,h));t.MediaDecryptionError=g;var y=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaFileFailedLoad",!0,h));t.MediaFileFailedLoad=y;var E=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaFileEmpty",!0,h));function S(e){try{return JSON.stringify(e)}catch(t){return e.toString()}}t.MediaFileEmpty=E;var b=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;(0,a.default)(this,n);var i="string"==typeof e?e:S(e);return(r=t.call(this,i)).event=e,r}return n}((0,s.customError)("SocketError"));t.SocketError=b;var T=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;(0,a.default)(this,n);var i="string"==typeof e?e:S(e);return(r=t.call(this,i)).event=e,r}return n}((0,s.customError)("SocketClosed"));t.SocketClosed=T;var w=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,`socket not open, is ${e}`)}return n}((0,s.customError)("SocketNotOpen"));t.SocketNotOpen=w;var A=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("BlockedByProxy"));t.BlockedByProxy=A;var C=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,"Image failed to load.")).src=e,i.status=r,i.target={src:e,status:r},i}return n}((0,s.customError)("ImageError"));t.ImageError=C;var O=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,e)).event=r,i}return n}((0,s.customError)("DecodeWebpResultsError"));t.DecodeWebpResultsError=O;var M=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r,i){var o;return(0,a.default)(this,n),(o=t.call(this,`${e||"Server replied with a failed status code"}: ${i}`)).url=r,o.status=i,o}return n}((0,s.customError)("ServerStatusError"));t.ServerStatusError=M;var I=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r,i){(0,a.default)(this,n);var o=`Invalid response for ${e}, with status ${r}`;return i&&(o=`${o}: ${i}`),t.call(this,o)}return n}((0,s.customError)("InvalidServerResponseError"));t.InvalidServerResponseError=I;var k=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r,i){(0,a.default)(this,n);var o=`Error ${r} for ${e}: ${JSON.stringify(i)}`;return t.call(this,o,e,r)}return n}((0,s.customError)("BingServerError",!0,M));t.BingServerError=k;var P=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaNeedsReupload"));t.MediaNeedsReupload=P;var R=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaMissing"));t.MediaMissing=R,R.message="Media is no longer available on your phone";var D=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,e)).src=e,r}return n}((0,s.customError)("MediaLoadError"));t.MediaLoadError=D;var N=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.call(this,"Transcode blob too large")}return n}((0,s.customError)("TranscodeBlobTooLargeError"));t.TranscodeBlobTooLargeError=N;var L=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,`Unable to play video. Reason: ${String(e)}`)}return n}((0,s.customError)("UnableToPlayVideoError"));t.UnableToPlayVideoError=L;var x=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,e)}return n}((0,s.customError)("MediaDragDropError",!0,D));t.MediaDragDropError=x;var U=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("MediaUnsupportedError"));t.MediaUnsupportedError=U,U.message="Media format is unsupported";var F=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("ModelError"));t.ModelError=F;var G=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,e)).model=r,i}return n}((0,s.customError)("ModelCreateError"));t.ModelCreateError=G;var B=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,`MasterDatabaseEncryptionKey.${e} was accessed before init`)}return n}((0,s.customError)("DbEncKeyNotLoadedError"));t.DbEncKeyNotLoaded=B;var j=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){return(0,a.default)(this,n),t.call(this,`MasterDatabaseMessageEncryptionKey.${e} was accessed before init`)}return n}((0,s.customError)("DbMsgEncKeyNotLoadedError"));t.DbMsgEncKeyNotLoaded=j;var Y=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("DbOnLogoutAbortError"));t.DbOnLogoutAbort=Y,Y.message="DB operation was dropped due to logout activity";var K=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("DBExpiredFtsHMACKey"));t.DBInvalidFtsHMACKey=K,K.message="MasterDatabaseEncryptionKey.fts_hmac_keys is in an invalid state";var W=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("ProtoVersionUndefined"));t.ProtoVersionUndefined=W;var V=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("UpdateImmediately"));t.UpdateImmediately=V;var H=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("DeprecatedProtocolVersion"));t.DeprecatedProtocolVersion=H;var $=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("CapabilityError"));t.CapabilityError=$;var z=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("CapabilityInvalid",!0,$));t.CapabilityInvalid=z;var q=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("CapabilityUnknown",!0,$));t.CapabilityUnknown=q;var J=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("CanNotSendUnencrypted"));t.CanNotSendUnencrypted=J;var Q=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("ActionError"));t.ActionError=Q,Q.message="Could not perform action.";var X=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("Unmount"));t.Unmount=X;var Z=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("ActiveChatChanged"));t.ActiveChatChanged=Z;var ee=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("GUMError"));t.GUMError=ee;var te=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("NotSupportedError",!0,ee));t.NotSupportedError=te,te.message="The operation is not supported.";var ne=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("NotAllowedError",!0,ee));t.NotAllowedError=ne,ne.message="The user did not grant permission for the operation";var re=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("ConstraintNotSatisfiedError",!0,ee));t.ConstraintNotSatisfiedError=re,re.message="One of the mandatory Constraints could not be satisfied.";var ae=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("OverconstrainedError",!0,ee));t.OverconstrainedError=ae,ae.message="Due to changes in the environment, one or more mandatory constraints can no longer be satisfied.";var ie=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("NotFoundError",!0,ee));t.NotFoundError=ie,ie.message="The object can not be found here.";var oe=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("AbortError",!0,ee));t.AbortError=oe,oe.message="The operation was aborted.";var se=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("SourceUnavailableError",!0,ee));t.SourceUnavailableError=se,se.message="The source of the MediaStream could not be accessed due to a hardware error (e.g. lock from another process).";var ue=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,s.customError)("UnableToGetContentLengthError"));t.UnableToGetContentLengthError=ue,ue.message="Failed to get media contentLength from mms";var le={GUMError:ee,NotSupportedError:te,NotAllowedError:ne,ConstraintNotSatisfiedError:re,OverconstrainedError:ae,NotFoundError:ie,AbortError:oe,SourceUnavailableError:se};t.GUM=le},37997:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(93913)),i=r(n(34575)),o=r(n(35643)),s=function e(t,n,r){(0,i.default)(this,e),this.key=t,this.value=n,this.timestamp=null!=r?r:Date.now(),this.prev=void 0,this.next=void 0},u=function(){function e(){(0,i.default)(this,e),this.start=new s(null,null),this.end=new s(null,null),this.start.next=this.end,this.end.prev=this.start}return(0,a.default)(e,[{key:"append",value:function(e,t){var n=new s(e,t),r=this.end,a=(0,o.default)(this.end.prev,"this.end.prev");return n.next=r,n.prev=a,r.prev=n,a.next=n,n}},{key:"prepend",value:function(e,t){var n=new s(e,t),r=this.start,a=(0,o.default)(this.start.next,"this.start.next");return n.prev=r,n.next=a,r.next=n,a.prev=n,n}},{key:"popEnd",value:function(){var e=(0,o.default)(this.end.prev,"this.end.prev");if(e!==this.start){var t=(0,o.default)(e.prev,"entry.prev"),n=(0,o.default)(e.next,"entry.next");return t.next=n,n.prev=t,e.next=void 0,e.prev=void 0,e}}},{key:"popFront",value:function(){var e=(0,o.default)(this.start.next,"this.start.next");if(e!==this.end){var t=(0,o.default)(e.prev,"entry.prev"),n=(0,o.default)(e.next,"entry.next");return t.next=n,n.prev=t,e.next=void 0,e.prev=void 0,e}}},{key:"peekFront",value:function(){var e=(0,o.default)(this.start.next,"this.start.next");return e===this.end?void 0:e}},{key:"peekEnd",value:function(){var e=(0,o.default)(this.end.prev,"this.end.prev");return e===this.start?void 0:e}},{key:"remove",value:function(e){var t=(0,o.default)(e.prev,"entry.prev"),n=(0,o.default)(e.next,"entry.next");return t.next=n,n.prev=t,e.next=void 0,e.prev=void 0,e}},{key:"stats",value:function(){for(var e=this.start,t=0;e!==this.end;)e=(0,o.default)(e.next,"entry.next"),t+=1;return t-1}}]),e}(),l=function(){function e(){(0,i.default)(this,e),this.keyMap=new Map,this.entryList=new u}return(0,a.default)(e,[{key:"lookup",value:function(e){var t=this.keyMap.get(e);if(t){this.entryList.remove(t);var n=this.entryList.append(t.key,t.value);return this.keyMap.set(n.key,n),t.value}}},{key:"add",value:function(e,t){var n=this.keyMap.get(e);return n?n.value=t:(n=this.entryList.append(e,t),this.keyMap.set(e,n)),t}},{key:"expireKeys",value:function(e){for(var t=this.entryList.peekFront();t&&t.timestamp<e;)this.entryList.popFront(),this.keyMap.delete(t.key),t=this.entryList.peekFront()}},{key:"printStats",value:function(){console.log("========================== STATS ============================="),console.log("entry list: ",this.entryList.stats()),console.log("map keys: ",this.keyMap.size)}}]),e}();t.default=l},92618:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFaqUrl=function(){return`${i}/web?lang=${a.default.getLocale()}`},t.getBusinessFaqUrl=function(){return s("general/chats/about-chatting-with-businesses")},t.getCannotConnectFaqUrl=function(){return s("web/troubleshooting/cant-connect-to-whatsapp-web-or-desktop")},t.getCiphertextFaqUrl=function(){return s("general/security-and-privacy/seeing-waiting-for-this-message-this-may-take-a-while")},t.getCodeChangeFaqUrl=function(){return s("general/security-and-privacy/security-code-change-notification")},t.getMDCodeChangeFaqUrl=function(){return`${i}/${a.default.getLocale()}/web/26000361`},t.getE2EFaqUrl=function(){return s("general/security-and-privacy/end-to-end-encryption")},t.getE2EEnterpriseFaqUrl=function(){return s("general/security-and-privacy/end-to-end-encryption-for-business-messages")},t.getFrequentlyForwardedFaqUrl=function(){return s("general/coronavirus-product-changes/about-forwarding-limits")},t.getLoginFaqUrl=function(){return s("web/download-and-installation/how-to-log-in-or-out")},t.getNonVerifiedTransitionFaqUrl=function(){return s("general/business-account-becomes-a-standard-account")},t.getNotificationChromeFaqUrl=function(){return s("web/troubleshooting/cant-receive-notifications-on-chrome")},t.getNotificationEdgeFaqUrl=function(){return s("web/troubleshooting/cant-receive-notifications-on-microsoft-edge")},t.getNotificationFirefoxFaqUrl=function(){return s("web/troubleshooting/cant-receive-notifications-on-firefox")},t.getNotificationOperaFaqUrl=function(){return s("web/troubleshooting/cant-receive-notifications-on-opera")},t.getNotificationSafariFaqUrl=function(){return s("web/troubleshooting/cant-receive-notifications-on-safari")},t.getRevokeFaqUrl=function(){return s("web/chats/how-to-delete-messages")},t.getSuspiciousLinkFaqUrl=function(){return s("web/chats/suspicious-links")},t.getUnverifiedTransitionFaqUrl=function(){return s("general/business-account-becomes-unverified")},t.getVerifiedHighFaqUrl=function(){return s("general/verified-business-account")},t.getVerifiedLowUnknownFaqUrl=function(){return s("general/unverified-business-account")},t.getVerifiedTransitionFaqUrl=function(){return s("general/business-account-becomes-verified")},t.getEphemeralFaqUrl=function(){return s("general/chats/about-disappearing-messages")},t.getViewOnceFaqUrl=function(){return s("general/chats/about-view-once")},t.getSupportChatFaqUrl=function(){return s("general/what-information-does-whatsapp-collect-when-you-contact-support")},t.getSupportChatSafetyFaqUrl=function(){return s("general/about-safely-communicating-with-whatsapp-support")},t.getCatalogCartOnOffFaqUrl=function(){return s("general/account-and-profile/about-cart")},t.PLATFORM=t.FAQ_BASE_URL=void 0;var a=r(n(89115)),i="https://faq.whatsapp.com";t.FAQ_BASE_URL=i;var o="web";function s(e){return`${i}/${e}?lang=${a.default.getLocale()}`}t.PLATFORM=o},15136:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a};var a=new r((function(e){e(!0)})).then((function(e){return!(!e||!e.valueOf())})).timeout(5e3).catch((function(){return!1}))},19059:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.blobToArrayBuffer=l,t.validateBlob=function(e){return l(e.webkitSlice?e.webkitSlice(0,1):e.slice(0,1)).then((function(e){return 1===e.byteLength})).catch((function(){return!1}))},t.getAudioDuration=function(e){var t,n;return new r((function(r,a){(t=document.createElement("audio")).addEventListener("loadeddata",r),t.addEventListener("error",(function(){a(new Error("getAudioDuration: error loading audio"))})),t.src=n=URL.createObjectURL(e)})).then((function(){return~~t.seekable.end(0)})).finally((function(){n&&URL.revokeObjectURL(n)}))},t.typeFromMimetype=function(e){var t=e.split("/")[0];switch(t){case u.IMAGE:case u.VIDEO:case u.AUDIO:return t;default:return u.DOCUMENT}},t.getMimeTypeForFilepath=function(e){var t=d(e),n=(0,s.isAllowedDocumentMimetype)(s.EXT_TO_MIME&&t&&s.EXT_TO_MIME[t],e,!1);if(n)return n},t.removeTrailingDots=c,t.getFileExtension=d,t.createFile=f,t.copyFile=function(e){return l(e).then((function(t){var n=e.lastModified,r=e.type;return f([t],e.name,{lastModified:n,type:r})}))},t.blobToText=function(){return p.apply(this,arguments)},t.FILETYPE=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(13242),u=Object.freeze({IMAGE:"image",VIDEO:"video",AUDIO:"audio",DOCUMENT:"document"});function l(e){var t;return new r((function(n,r){(t=new FileReader).onload=n,t.onerror=function(e){r(new Error(`blobToArrayBuffer error: ${String(e)}`))},t.onabort=function(e){r(new Error(`blobToArrayBuffer abort: ${String(e)}`))},t.readAsArrayBuffer(e)})).then((function(){return t.result}))}function c(e){return e.replace(/\.+$/,"")}function d(e){var t=c(e.trimRight()).split(".");return t.length>1?t[t.length-1].toLowerCase():null}function f(e,t,n){var r=new Blob(e,n||{});return r.name=t,r}function p(){return(p=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.text){e.next=2;break}return e.abrupt("return",t.text());case 2:return n=new FileReader,e.next=5,new r((function(e,r){n.onload=e,n.onerror=function(e){r(new Error(`blobToText error: ${String(e)}`))},n.onabort=function(e){r(new Error(`blobToText abort: ${String(e)}`))},n.readAsText(t)}));case 5:if(!(n.result instanceof ArrayBuffer)){e.next=7;break}throw new TypeError("blobToText error: Invalid result type: ArrayBuffer");case 7:if(null!=n.result){e.next=9;break}throw new TypeError("blobToText: Invalid result type: null");case 9:return e.abrupt("return",n.result);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.FILETYPE=u},74453:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce((function(t,n){return null!=e[n]&&(t[n]=e[n]),t}),{})}},78499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forbiddenFindDOMNode=a,t.forbiddenAssertDOMNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.HTMLElement,n=a(e,t);if(n)return n;throw new Error(`[ForbiddenAssertDOMNode] findDOMNode returned ${String(n)} with component ${String(e)}`)};var r=n(73935);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.HTMLElement,n=(0,r.findDOMNode)(e);if(n){if(n instanceof t)return n;throw new Error(`[forbiddenFindDOMNode] returned node not instance of ${String(t)}`)}return n}},80413:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(89687));function s(e){e.offsetWidth}var u=new(function(){function e(){(0,a.default)(this,e),this.shouldIndicateFocusTimestamp=0}return(0,i.default)(e,[{key:"shouldIndicateFocus",value:function(){this.shouldIndicateFocusTimestamp=Date.now()}},{key:"maybeIndicateFocus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.focusAnimation;Date.now()-this.shouldIndicateFocusTimestamp>200||this.indicateFocus(e,t)}},{key:"indicateFocus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.focusAnimation;e&&(e.classList.remove(t),s(e),e.classList.add(t))}}]),e}());t.default=u},31722:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(12035),i=r(n(8876)),o=[],s=!1;var u=new a.ShiftTimer((function(){o=[],s=!1})),l=!i.default||{capture:!0,passive:!0};document.addEventListener("keydown",(function(){u.forceRunNow()}),l);var c={focus:function(e,t){if(e&&(!o.length||e!==o[o.length-1])){if(s=s||null!=window.event,function(e){5===o.length&&o.shift(),o.push(e)}(e),function(){if(o.length<5)return!1;for(var e=new Set,t=0;t<o.length;t++){if(e.has(o[t]))return!0;e.add(o[t])}return!1}()&&!s)return __LOG__(4,void 0,new Error,!0)`Focus loop encountered.`,void SEND_LOGS("focus-loop");u.onOrBefore(75),e.focus(t)}}};t.default=c},59518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoldedContactName=t.HeaderAndFooter=t.UntrustedGroupDesc=t.TrustedGroupDesc=t.FormattedGroupNotification=t.RawGroupNotification=t.FormattedNotification=t.RawNotification=t.ComposeBox=t.QuotedMention=t.Format=t.QuickReply=t.FTSMessage=t.LastMessage=t.SearchName=t.Search=t.Conversation=t.Compatibility=t.StatusV3Caption=t.StatusV3Text=t.LargeEmojiOnly=t.EmojiOnly=void 0;var r=n(48098);t.EmojiOnly=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectable;return[[[r.Emoji,{selectable:t}]]]};t.LargeEmojiOnly=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectable;return[[[r.Emoji,{selectable:t,size:"large"}]]]};t.StatusV3Text=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.links,n=e.selectable;return[[[r.Code,{selectable:n}]],[[r.Link,{links:t,selectable:n}]],[[r.Bold,{selectable:n}],[r.Italic,{selectable:n}],[r.Strikethrough,{selectable:n}]],[[r.Emoji,{selectable:n,size:"xlarge"}]]]};t.StatusV3Caption=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectable;return[[[r.Code,{selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]]};t.Compatibility=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectable;return[[[r.Emoji,{selectable:t}]]]};t.Conversation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mentions,n=e.links,a=e.selectable,i=e.trusted;return[[[r.Code,{selectable:a}]],i?[[r.Link,{links:n,selectable:a}]]:null,t?[[r.Mention,{mentions:t,selectable:a}]]:null,[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Emoji,{selectable:a}]]].filter(Boolean)};t.Search=function(e){var t=e.boundary,n=e.terms,a=e.selectable,i=e.mentions;return[[[r.TextMention,{mentions:i,selectable:a}]],[[r.Bold,{selectable:a}],[r.Italic,{selectable:a}],[r.Strikethrough,{selectable:a}]],[[r.Highlight,{terms:n,boundary:t,selectable:a,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:a}]]]};t.SearchName=function(e){var t=e.terms;return[[[r.Highlight,{terms:t,ignoreDiacritics:!0}]],[[r.Emoji,{selectable:!1}]]]};t.LastMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mentions,n=e.selectable;return[[[r.Code,{selectable:n}]],t?[[r.TextMention,{mentions:t,selectable:n}]]:null,[[r.Bold,{selectable:n}],[r.Italic,{selectable:n}],[r.Strikethrough,{selectable:n}]],[[r.Emoji,{selectable:n}]]].filter(Boolean)};t.FTSMessage=function(e){var t=e.boundary,n=e.mentions,a=e.terms,i=e.selectable;return[[[r.Code,{selectable:i}]],[[r.TextMention,{mentions:n,selectable:i}]],[[r.Bold,{selectable:i}],[r.Italic,{selectable:i}],[r.Strikethrough,{selectable:i}]],[[r.Highlight,{terms:a,boundary:t,selectable:i}]],[[r.Emoji,{selectable:i}]]]};t.QuickReply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectable;return[[[r.Code,{selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoji,{selectable:t}]]]};t.Format=function(e){var t=e.mentions,n=e.selectable;return[[[r.Code,{selectable:n}]],[[r.TextMention,{mentions:t,selectable:n}]],[[r.Bold,{selectable:n}],[r.Italic,{selectable:n}],[r.Strikethrough,{selectable:n}]],[[r.Emoji,{selectable:n}]]]};t.QuotedMention=function(e){var t=e.mentions,n=e.selectable;return[[[r.Code,{selectable:n}]],[[r.TextMention,{mentions:t,selectable:n,theme:{quoted:!0}}]],[[r.Bold,{selectable:n}],[r.Italic,{selectable:n}],[r.Strikethrough,{selectable:n}]],[[r.Emoji,{selectable:n}]]]};t.ComposeBox=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectable;return[[[r.Code,{selectable:t}]],[[r.Link,{selectable:t}]],[[r.Bold,{selectable:t}],[r.Italic,{selectable:t}],[r.Strikethrough,{selectable:t}]],[[r.Emoticon,{selectable:t}]]]};t.RawNotification=function(e){var t=e.mentions,n=e.selectable;return[[[r.RawMention,{mentions:t,selectable:n}]]]};t.FormattedNotification=function(e){var t=e.mentions,n=e.selectable;return[[[r.Code,{selectable:n}]],[[r.RawMention,{mentions:t,selectable:n}]],[[r.Bold,{selectable:n}],[r.Italic,{selectable:n}],[r.Strikethrough,{selectable:n}]]]};t.RawGroupNotification=function(e){var t=e.mentions,n=e.selectable,a=e.groupMetadata;return[[[r.RawGroupMention,{mentions:t,selectable:n,groupMetadata:a}]]]};t.FormattedGroupNotification=function(e){var t=e.mentions,n=e.selectable,a=e.groupMetadata;return[[[r.Code,{selectable:n}]],[[r.RawGroupMention,{mentions:t,selectable:n,groupMetadata:a}]],[[r.Bold,{selectable:n}],[r.Italic,{selectable:n}],[r.Strikethrough,{selectable:n}]]]};t.TrustedGroupDesc=function(e){var t=e.links,n=!0;return[[[r.Code,{selectable:n}]],[[r.Link,{links:t,selectable:n}]],[[r.Bold,{selectable:n}],[r.Italic,{selectable:n}],[r.Strikethrough,{selectable:n}]],[[r.Emoji,{selectable:n}]]]};t.UntrustedGroupDesc=function(){var e=!0;return[[[r.Code,{selectable:e}]],[[r.Bold,{selectable:e}],[r.Italic,{selectable:e}],[r.Strikethrough,{selectable:e}]],[[r.Emoji,{selectable:e}]]]};t.HeaderAndFooter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.links,n=e.selectable,a=e.trusted;return[a?[[r.Link,{links:t,selectable:n}]]:null,[[r.Emoji,{selectable:n}]]].filter(Boolean)};t.BoldedContactName=function(e){var t=e.selectable;return[[[r.BoldFirstWord,{selectable:t}]],[[r.Emoji,{selectable:t}]]]}},50875:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;return(0,i.default)(n,(0,a.default)(e,t,o),r)};var a=r(n(44062)),i=r(n(63949))},34224:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var r=2*e.length+t[1].length,a=t[0].length-r;return a>0&&(t.index+=a,t[0]=t[0].slice(a)),n.lastIndex--,t}}},66580:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return function(r){(0,o.default)(c,r);var l=(0,s.default)(c);function c(){return(0,a.default)(this,c),l.apply(this,arguments)}return(0,i.default)(c,null,[{key:"match",value:function(r){return(0,u.default)(r,e,t,n)}}]),c}(l.default)};var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(59333)),l=r(n(43980))},93104:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.index,r=(0,a.default)(e,1),i=r[0],o=n+i.length-1,s=[n,n,o,o,e];if(t){var u=e[t];s[1]=n+i.indexOf(u),s[2]=s[1]+u.length-1}return s};var a=r(n(63038))},59333:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=[];t.lastIndex=0;for(;(n=t.exec(e))&&t.lastIndex>0;)i&&(n=i(n,t)),n&&o.push((0,a.default)(n,r));return o};var a=r(n(93104))},12518:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;var a=r(n(59518));t.Configuration=a},43980:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,null,[{key:"match",value:function(){throw new Error("Subclasses of `Mutator` must override `match()`")}},{key:"mutate",value:function(e){return e}}]),e}();t.default=o,o.nestable=function(){return!0},o.format=!0,o.fragment=!1,o.compatibility=!1,o.mutates=!1},79701:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(34224)),c=r(n(36784)),d=r(n(66580)),f=(0,l.default)("*"),p=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,a=void 0!==r&&r;return u.default.createElement(c.default,{selectable:a},e)}}]),n}((0,d.default)(/(?:^|[\s\W_])\*([^\s\u20e3]|[^\s\u20e3][^\n]*?\S)\*(?=$|[[\s\W_])/g,1,f));t.default=p},44191:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(36784)),c=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,a=void 0!==r&&r;return u.default.createElement(l.default,{selectable:a},e)}}]),n}((0,r(n(66580)).default)(/^(\w*)\b/g));t.default=c},73797:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeCodeBlocks=t.isInsideCodeBlock=t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(84258)),c=r(n(66580)),d=/```([\s\S]*?\S[\s\S]*?)```/g,f=(0,c.default)(d,1),p=new Set(["ListItem","List"]),h=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,a=void 0!==r&&r;return u.default.createElement(l.default,{selectable:a},e)}}]),n}(f);t.default=h,h.nestable=function(e){return p.has(e)},h.format=!1;t.isInsideCodeBlock=function(e){var t=e.split(d).pop();return/```/.test(t)};t.removeCodeBlocks=function(e){return e.replace(d," ")}},36784:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(36474);function o(e){var t=e.children,n=e.selectable;return a.default.createElement(i.SelectableStrong,{selectable:n,appTextTemplate:"*${appText}*"},t)}o.defaultProps={children:""};var s=o;t.default=s},42585:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(94184)),c=n(56678),d=r(n(67294)),f=a(n(55056)),p=a(n(50875)),h=n(36474),_=n(38628),v=a(n(44589)),m=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.contact,n=e.onClick,r=e.theme,a=e.selectable,i=t.id,o=!!r&&r.quoted,s=t.displayName,u=(0,c.dir)(s)||"auto",v=(0,p.default)(s,[[[f.default,{selectable:a}]]],_.JSXSerializer,void 0,1/0);return d.default.createElement(d.default.Fragment,null,d.default.createElement(h.SelectableSpan,{"data-jid":i.toString(),"data-display":s,className:(0,l.default)("matched-mention",{"quoted-mention":o,"inactive-mention":!n||o}),onClick:n,plainText:`@${s}`,selectable:a,selectAll:!0,appTextTemplate:`​${i.toString()}​`},d.default.createElement("span",{className:"at-symbol"},"@"),d.default.createElement("span",{dir:u},v)))}}]),n}(d.Component);m.CONCERNS={contact:["id","displayName"]},m.displayName="ChatTextMention";var g=(0,v.default)(m,m.CONCERNS);t.default=g},84258:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children,n=void 0===t?"":t,r=e.selectable;return a.default.createElement(i.SelectableCode,{selectable:r,appTextTemplate:"```${appText}```"},n)};var a=r(n(67294)),i=n(36474)},66514:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67294)),o=a(n(40167)),s=r(n(73811));t.default=function(e){var t=e.emoji,n=e.selectable,r=e.size;return"xlarge"===r?i.default.createElement(s.default,{emoji:t,size:s.SIZE.XLARGE,element:"span",selectable:n}):i.default.createElement(o.default,{emoji:t,selectable:n,size:r})}},45045:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=a(n(94184)),c=n(56678),d=r(n(67294)),f=a(n(55056)),p=a(n(50875)),h=a(n(22021)),_=n(36474),v=n(38628),m=a(n(44589)),g=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"_getNameToDisplay",value:function(){var e=this.props,t=e.contact,n=e.groupMetadata;return h.default.supportsFeature(h.default.F.DROP_LAST_NAME_MENTIONS)&&n&&n.hasUniqueShortNameMention(t)?t.shortName:t.displayName}},{key:"render",value:function(){var e=this.props,t=e.contact,n=e.onClick,r=e.theme,a=e.selectable,i=t.id,o=!!r&&r.quoted,s=this._getNameToDisplay(),u=(0,c.dir)(s)||"auto",h=(0,p.default)(s,[[[f.default,{selectable:a}]]],v.JSXSerializer,void 0,1/0);return d.default.createElement(d.default.Fragment,null,d.default.createElement(_.SelectableSpan,{"data-jid":i.toString(),"data-display":s,className:(0,l.default)("matched-mention",{"quoted-mention":o,"inactive-mention":!n||o}),onClick:n,plainText:`@${s}`,selectable:a,selectAll:!0,appTextTemplate:`​${i.toString()}​`},d.default.createElement("span",{className:"at-symbol"},"@"),d.default.createElement("span",{dir:u},h)))}}]),n}(d.Component);g.CONCERNS={contact:["id","displayName","shortName","isMyContact"],groupMetadata:["uniqueShortNameMap"]},g.displayName="GroupTextMention";var y=(0,m.default)(g,g.CONCERNS);t.default=y},54349:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(36474);function o(e){var t=e.children,n=e.selectable;return a.default.createElement(i.SelectableSpan,{className:"matched-text",selectable:n},t)}o.defaultProps={children:""};var s=o;t.default=s},1411:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.createElement(i.default,e,e.children)};var a=r(n(67294)),i=r(n(69319))},46531:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(36474);function o(e){var t=e.children,n=e.selectable;return a.default.createElement(i.SelectableEm,{selectable:n,appTextTemplate:"_${appText}_"},t)}o.defaultProps={children:""};var s=o;t.default=s},69319:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(36474);function o(e){var t=e.href,n=e.children,r=e.selectable;return a.default.createElement(i.SelectableLink,{href:t,title:t,target:"_blank",rel:"noopener noreferrer",selectable:r},n)}o.defaultProps={children:""};var s=o;t.default=s},95752:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children,n=void 0===t?"":t,r=e.inline,l=e.isAtStart,c=e.selectable;return o.default.createElement(o.default.Fragment,null,o.default.createElement(u.SelectableUl,{appTextTemplate:l?"${appText}":"\n${appText}",className:(0,i.default)((0,a.default)({},s.default.inline,r),s.default.ul),selectable:c},n))};var a=r(n(59713)),i=r(n(94184)),o=r(n(67294)),s=r(n(52812)),u=n(36474)},68240:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children,n=void 0===t?"":t,r=e.inline,l=e.selectable;return o.default.createElement("li",{className:(0,i.default)((0,a.default)({},s.default.inline,r))},o.default.createElement(u.SelectableSpan,{selectable:l,appTextTemplate:"* ${appText}"},n))};var a=r(n(59713)),i=r(n(94184)),o=r(n(67294)),s=r(n(75759)),u=n(36474)},51945:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(77045));var o=function(e){var t=e.mentionMeta,n=e.theme,r=e.selectable;return a.default.createElement(i.default,{contact:t.contact,theme:n,selectable:r})};t.default=o},94834:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(36474);function o(e){var t=e.children,n=e.selectable;return a.default.createElement(i.SelectableDel,{selectable:n,appTextTemplate:"~${appText}~"},t)}o.defaultProps={children:""};var s=o;t.default=s},57026:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(34541)),o=n(36474),s=r(n(90902));function u(e){var t=e.link,n=e.children,r=e.selectable;return a.default.createElement(o.SelectableLink,{onClick:function(){return i.default.openModal(a.default.createElement(s.default,{link:t}))},selectable:r,style:{cursor:"pointer"}},n)}u.defaultProps={children:""};var l=u;t.default=l},90392:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67154)),o=r(n(67294)),s=a(n(42585)),u=a(n(22021)),l=a(n(17362)),c=a(n(45045));var d=function(e){var t=(0,o.useContext)(l.default);return u.default.supportsFeature(u.default.F.DROP_LAST_NAME_MENTIONS)&&t?o.default.createElement(c.default,(0,i.default)({},e,{groupMetadata:t})):o.default.createElement(s.default,e)};t.default=d},77045:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(26671)),o=r(n(34541)),s=r(n(90392)),u=r(n(33819));var l=function(e){var t=e.contact,n=e.theme,r=e.selectable,l=(0,u.default)(t,["id","isMe"]).isMe?void 0:function(){i.default.find(t.id).then((function(e){return o.default.openChatBottom(e)}))};return a.default.createElement(s.default,{contact:t,theme:n,selectable:r,onClick:l})};t.default=l},55056:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(67294)),c=r(n(8513)),d=r(n(66514)),f=r(n(59333)),p=r(n(43980)),h=n(30564),_=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=(0,a.default)(t,1)[0],i=n.size,o=n.selectable,s=void 0!==o&&o;return l.default.createElement(d.default,{emoji:r,size:i,selectable:s})}},{key:"match",value:function(e,t,n){var r=null!=n&&0!==n?n:e.length,a=(0,h.firstNCodepoints)(e,r);return(0,f.default)(a,c.default.emojiRegex(),0,v)}}]),n}(p.default);function v(e){return c.default.getGlyphId(e[0])?e:null}t.default=_,_.compatibility=!0},7774:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(96486)),c=r(n(66580)),d=r(n(8513)),f=r(n(75385)),p={"(y)":"👍","(n)":"👎",":-)":"🙂",":-(":"🙁",":-p":"😛",":-|":"😐",":-\\":"😕",":-d":"😀",":-*":"😘","<3":"❤","^_^":"😁",">_<":"😆",";-)":"😉"},h=Object.keys(p).map(l.default.escapeRegExp).join("|"),_=new RegExp(`(^|\\s|\`\`\`|[*_~])((?:${h})+)(?=$|\\s|\`\`\`|[*_~])`,"ig"),v=new RegExp(`(${h})`,"i"),m=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,null,[{key:"mutate",value:function(e){return e.split(v).map((function(e){var t=p[e.toLowerCase()];return t?d.default.getSkinToneBase(t)&&f.default.getVariant(t)||t:e})).join("")}}]),n}((0,c.default)(_,2,(function(e){var t=(0,a.default)(e,2)[1];t&&(e.index+=t.length,e[0]=e[0].slice(t.length));return e})));t.default=m,m.fragment=!0,m.mutates=!0},99568:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(96486)),l=r(n(67294)),c=r(n(59333)),d=r(n(54349)),f=r(n(89115)),p=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"match",value:function(e,t){if(!t)return[];var n=t.terms,r=t.boundary,a=void 0!==r&&r,i=t.ignoreDiacritics,o=void 0!==i&&i;if(!n.length)return[];var s=o&&f.default.isLatinAlphabetLanguage(e)&&n.every((function(e){return f.default.isLatinAlphabetLanguage(e)}))&&!f.default.isRTL(),l=s?f.default.removeAccents(e):e;return(0,c.default)(l,function(e,t,n){var r=(n?e.map((function(e){return f.default.removeAccents(e)})):e).map(u.default.escapeRegExp).join("|");if(f.default.isRTL())return new RegExp(`${t?"(?:^|\\b)":""}(\\S+)?(${r})(\\S+)?`,"ig");return new RegExp(`${t?"(?:^|\\b)":""}(${r})`,"ig")}(n,a,s))}}]),n}(r(n(43980)).default);t.default=p,p.jsx=function(e,t,n){var r=n.selectable;return l.default.createElement(d.default,{selectable:r},e)}},48098:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoldFirstWord",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Bold",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Emoji",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Emoticon",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Highlight",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Intern",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Italic",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Mention",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"RawMention",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"Strikethrough",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"TextMention",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"RawGroupMention",{enumerable:!0,get:function(){return y.default}});var a=r(n(44191)),i=r(n(79701)),o=r(n(73797)),s=r(n(55056)),u=r(n(7774)),l=r(n(99568)),c=r(n(70683)),d=r(n(88617)),f=r(n(30590)),p=r(n(99813)),h=r(n(39450)),_=r(n(74059)),v=r(n(42606)),m=r(n(29039)),g=r(n(14268)),y=r(n(93639))},70683:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(67294)),c=r(n(66580)),d=r(n(1411)),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,i=void 0!==r&&r,o=function(e){var t=(0,a.default)(e,7),n=t[4],r=t[5],i=t[6];if(i)return`${_}${i.toLowerCase()}`;switch(n){case"T":case"t":case"#":return`${v}${r}`;case"D":case"d":return`${m}${r}`;case"P":case"p":return`${g}${r}`;case"S":case"s":return`${y}${r}`;default:return`${E}${n}${r}`}}(t);return l.default.createElement(d.default,{href:o,selectable:i},e)}}]),n}((0,c.default)(/(^|\b|\s)(((#|t|T|d|D|p|P|s|S)([0-9]{3,16}))|([0-9a-fA-F]{8,40}))(?=$|\b)/g,2,(function(e){var t=(0,a.default)(e,7),n=t[1],r=t[6];if(r&&(!p.test(r)||!h.test(r)))return null;n&&(e.index+=n.length,e[0]=e[0].slice(n.length));return e})));t.default=f;var p=/[a-fA-F]/,h=/[0-9]/;var _="https://internalfb.com/intern/bunny/?q=hash%20",v="https://internalfb.com/intern/tasks/?t=",m="https://internalfb.com/intern/diff/D",g="https://internalfb.com/intern/paste/P",y="https://internalfb.com/intern/sevmanager/view/s/",E="https://internalfb.com/intern/"},88617:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(34224)),c=r(n(66580)),d=r(n(46531)),f=(0,l.default)("_"),p=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,a=void 0!==r&&r;return u.default.createElement(d.default,{selectable:a},e)}}]),n}((0,c.default)(/(?:^|\s|_|[^\w\\])_(\S|\S[^\n]*?\S)_(?=$|[[\s\W_])/g,1,f));t.default=p},30590:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(79701)),c=r(n(88617)),d=r(n(69319)),f=r(n(43980)),p=r(n(29039)),h=r(n(57026)),_=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,a=void 0!==r&&r,i=t.href,o=t.suspiciousCharacters;return o&&o.size?u.default.createElement(h.default,{link:t,selectable:a},e):u.default.createElement(d.default,{href:i,selectable:a},e)}}]),n}(f.default);function v(e){var t=e.index,n=t+e.url.length-1;return[t,t,n,n,e]}function m(e,t){for(var n=0,r=0;n<e.length&&r<t.length;){var a=t[r][3]-e[n][3];if(a>0)n++;else if(a<0)r++;else{e[n][2]--,e[n][3]--;var i=e[n][5];i.href=i.href.slice(0,-1),i.path=i.path&&i.path.slice(0,-1),i.url=i.url.slice(0,-1),r++,n++}}}t.default=_,_.format=!1,_.match=function(e,t){if(!t)return[];var n=t.links;return(void 0===n?[]:n).map(v)},_.conflictResolvers=new Map([[l.default,m],[c.default,m],[p.default,m]])},99813:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(66580)),c=r(n(95752)),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,a=void 0!==r&&r,i=n.inline,o=0===t.index;return u.default.createElement(c.default,{inline:i,isAtStart:o,selectable:a},e)}}]),n}((0,l.default)(/((?:^)(?:\* (?:[^\n]+)(?:\n(?:\* [^\n]+)){0,})(?:\n|$))/gm,0));t.default=d,d.nestable=function(){return!1}},39450:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LAST_LIST_ITEM_REGEX=t.LIST_ITEM_DELIMITER=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(66580)),c=r(n(68240));t.LIST_ITEM_DELIMITER="* ";t.LAST_LIST_ITEM_REGEX=/(?:^|\n)\* [^\n]+$/;var d=(0,l.default)(/(?:^)\* ([^\n]+(?:$))/gm,1),f=new Set(["List"]),p=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable,a=void 0!==r&&r,i=n.inline;return u.default.createElement(c.default,{inline:i,selectable:a},e)}}]),n}(d);t.default=p,p.nestable=function(e){return f.has(e)},p.unformatDecorations={pre:"• "}},74059:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(96486)),l=r(n(67294)),c=r(n(59333)),d=r(n(51945)),f=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"match",value:function(e,t){if(!t)return[];var n=t.mentions,r=t.groupMetadata;if(!n||u.default.isEmpty(n))return[];for(var a,i,o=(a=n,i=Object.keys(a).map(u.default.escapeRegExp).join("|"),new RegExp(`(${i})`,"g")),s=(0,c.default)(e,o),l=0;l<s.length;++l)s[l][4]={contact:n[s[l][4][0]],groupMetadata:r};return s}},{key:"jsx",value:function(e,t,n){var r=n.selectable;return l.default.createElement(d.default,{mentionMeta:t,selectable:r})}}]),n}(r(n(43980)).default);t.default=f,f.format=!1},93639:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=r(n(22021)),u=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(r(n(74059)).default);t.default=u,u.mutates=!0,u.mutate=function(e,t){var n=t.contact,r=t.groupMetadata;return s.default.supportsFeature(s.default.F.DROP_LAST_NAME_MENTIONS)&&r&&r.hasUniqueShortNameMention(n)?`@${n.shortName}`:`@${n.displayName}`}},42606:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(r(n(74059)).default);t.default=s,s.mutates=!0,s.mutate=function(e,t){return`@${t.contact.displayName}`}},29039:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(34224)),c=r(n(66580)),d=r(n(94834)),f=(0,l.default)("_"),p=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=n.selectable;return u.default.createElement(d.default,{selectable:r},e)}}]),n}((0,c.default)(/(?:^|[\s\W_])~(\S|\S[^\n]*?\S)~(?=$|[[\s\W_])/g,1,f));t.default=p},14268:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(67294)),l=r(n(74059)),c=r(n(90392)),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,null,[{key:"jsx",value:function(e,t,n){var r=t.contact,a=n.selectable,i=n.theme;return u.default.createElement(c.default,{contact:r,selectable:a,theme:i})}}]),n}(l.default);t.default=d},53298:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(1===e.length)return e;var n,r=[];for(;n=e.pop();){for(var i=n,o=(0,a.default)(i,5),s=o[0],u=o[3],l=o[4],c=(0,a.default)(t[l],3),d=c[0],f=d.nestable,p=d.compatibility,h=c[2],_=!0,v=r.length-1;v>=0;--v){var m=(0,a.default)(r[v],5),g=m[2],y=m[3],E=m[4];if(s>y)break;var S=(0,a.default)(t[E],3),b=S[0],T=b.mutates,w=b.format,A=b.compatibility,C=b.name,O=S[2];if(u>g){if(h<O&&r.splice(v,1))continue;_=!1;break}if(T&&!(_=!1))break;if(p)break;if((f(C)||A||!(h<O)||!r.splice(v,1))&&(!p&&!w)){_=!1;break}}_&&r.push(n)}return r};var a=r(n(63038))},58706:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r){var i=(0,a.default)(e[n][r],2),o=i[0],s=i[1];t.push([o,s,n])}return t};var a=r(n(63038))},44062:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return l(e,(0,i.default)(t),n)},t._parse=l;var a=r(n(53298)),i=r(n(58706)),o=r(n(46803)),s=r(n(11691)),u=n(30564);function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=(0,o.default)(e,t,n),i=r.length?(0,s.default)(e,(0,a.default)(r,t),t):{children:[{type:"text",value:e}]},l=(0,u.numCodepoints)(e);return n<l&&c(i,{limit:n}),i}function c(e,t){if(!(t.limit<=0))if(e.type&&"text"===e.type)if(e.value.length>=t.limit){var n=(0,u.toArray)(e.value);n.length>=t.limit&&(n=n.slice(0,t.limit)),e.value=n.join(""),t.limit=t.limit-n.length}else t.limit=t.limit-e.value.length;else if(!e.type||"delimiter"!==e.type){for(var r=0;r<e.children.length&&(c(e.children[r],t),!(t.limit<=0));)r++;e.children=e.children.slice(0,r+1)}}},46803:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=[],i=0;i<t.length;++i){for(var o=(0,a.default)(t[i],2),s=o[0],u=o[1],l=s.match(e,u,n),c=[],d=l.length,f=0,p=l[f];f<d;p=l[++f])c[f]=[p[0],p[1],p[2],p[3],i,p[4]];c.length&&r.push(c)}for(var h=0;h<r.length;h++){var _=t[r[h][0][4]][0].conflictResolvers;if(_)for(var v=0;v<r.length;v++){var m=t[r[v][0][4]][0],g=_.get(m);g&&g(r[h],r[v])}}for(var y=[],E=0;E<r.length;++E)y[E]=r[E].length-1;var S=[],b=0;for(;r.length;){for(var T=0,w=-1;T<r.length;++T)r[T][y[T]][0]>w&&(b=T,w=r[T][y[T]][0]);S.push(r[b][y[b]]),--y[b]<0&&(r.splice(b,1),y.splice(b,1))}return S};var a=r(n(63038))},11691:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){for(var o={children:[]},s=0,u=o,l=0,c=0;c<t.length;++c){for(var d=t[c],f=(0,a.default)(d,2),p=f[0],h=f[1];u.parent&&p>(l=u.match[2]);){if(s<=l&&u.children.push({type:"text",value:e.substring(s,l+1)}),s=u.match[3]+1,u.mutator.fragment){var _=u.parent.children;_.pop(),_.push.apply(_,u.children)}l!==u.match[3]&&u.parent.children.push({type:"delimiter",value:e.substring(l+1,s)}),u=u.parent}s<p&&u.children.push({type:"text",value:e.substring(s,p)});var v=(0,a.default)(r[d[4]],2),m=v[0],g=v[1],y=m.mutates;s=h,p!==h&&u.children.push({type:"delimiter",value:e.substring(p,h)});var E={children:[],match:d,mutator:m,opts:g,parent:u};if(y){var S=e.substring(d[1],d[2]+1),b=m.mutate(S,d[5]),T=i(m,r,E),w=(0,n(44062)._parse)(b,T);E.children=w.children,s=d[2]+1}u.children.push(E),u=E}do{if(u.match){var A=(0,a.default)(u.match,4),C=A[2],O=A[3];if(s<=C&&u.children.push({type:"text",value:e.substring(s,C+1)}),s=O+1,u.mutator.fragment){var M=u.parent.children;M.pop(),M.push.apply(M,u.children)}C!==O&&u.parent.children.push({type:"delimiter",value:e.substring(C+1,s)})}}while(u.parent&&(u=u.parent)&&u.parent);s!==e.length&&u.children.push({type:"text",value:e.substring(s)});return o};var a=r(n(63038));function i(e,t,n){for(var r=e.format,a=[],i=function(e){var t=e,n=[];do{t.mutator&&n.push(t.mutator)}while(t.parent&&(t=t.parent));return n}(n),o=0;o<t.length;++o)(r||t[o][0].compatibility)&&(i.includes(t[o][0])||a.push(t[o]));return a}},63949:(e,t)=>{"use strict";function n(e,t,r){return t.reduce((function(t,a){return t.push(function(e,t,r){if(t.type){var a=t.value;switch(t.type){case"text":return e.onText(a,r);case"delimiter":return e.onDelimiter(a,r);default:throw new Error("Invalid node type")}}return e.onMutator(t.mutator,n(e,t.children,r),t.match[5],t.opts,r)}(e,a,r)),t}),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return e.onRoot(n(e,t.children,r),r)}},45392:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,null,[{key:"onMutator",value:function(){throw new Error("Subclasses of `Serializer` must override `onMutator()`")}},{key:"onRoot",value:function(){throw new Error("Subclasses of `Serializer` must override `onRoot()`")}},{key:"onText",value:function(){throw new Error("Subclasses of `Serializer` must override `onText()`")}},{key:"onDelimiter",value:function(){throw new Error("Subclasses of `Serializer` must override `onDelimiter()`")}}]),e}();t.default=o},38628:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JSXSerializer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"TextSerializer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"UnformatSerializer",{enumerable:!0,get:function(){return o.default}});var a=r(n(37752)),i=r(n(20860)),o=r(n(37200))},37752:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(67294),u=r(n(53083)),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(r(n(45392)).default);function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(void 0!==r)if("string"!=typeof r){var a=`jsx-child-${n}`;t.push((0,s.cloneElement)(r,{key:a}))}else t.push(r)}return t}t.default=l,l.onText=u.default,l.onDelimiter=function(){},l.onRoot=function(e){return c(e)},l.onMutator=function(e,t,n,r){return e.jsx(c(t),n,r)}},53083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return e}},20860:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}(r(n(45392)).default);t.default=s,s.onDelimiter=function(e){return e},s.onMutator=function(e,t){return t.join("")},s.onRoot=function(e){return e.join("")},s.onText=function(e){return e}},37200:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(319)),i=r(n(34575)),o=r(n(2205)),s=r(n(99842)),u=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return n}(r(n(45392)).default);function l(e){return e.filter(Boolean).join("")}t.default=u,u.onDelimiter=function(){},u.onMutator=function(e,t){return null!=e.unformatDecorations?l([e.unformatDecorations.pre].concat((0,a.default)(t),[e.unformatDecorations.post])):l(t)},u.onRoot=function(e){return l(e)},u.onText=function(e){return e}},56186:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.chat,n=e.undelivered,r=e.canForward,o=e.cannotForward,s=r.length-n.length,u=o.length+n.length,l=t.isUser?{contact:t.formattedTitle}:{};if(s>0)return n.length?o.length?i.default.t(415,(0,a.default)({count:u,_plural:u},l)):i.default.t(414,{count:u,_plural:u}):i.default.t(412,{count:u,_plural:u,contact:t.formattedTitle});if(n.length)return o.length?i.default.t(416,l):i.default.t(417);return i.default.t(413,l)};var a=r(n(81109)),i=r(n(89115))},51551:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:String,i=(0,a.default)(e,t.map(r)).join(""),o=n?4e3:Number.POSITIVE_INFINITY;i.length>o&&(i=i.slice(0,o).replace(/\s+$/," [truncated]"));return i};var a=r(n(22354))},68168:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this)).reasons=e,r}return n}((0,n(1838).customError)("ForwardError"));t.default=s},60089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aspectRatioScaled=function(e,t){return"number"!=typeof e||e<0||e!=e?{width:t,height:t}:e>1?{width:t,height:Math.max(t/e,1)}:{width:Math.max(t*e,1),height:t}},t.boundHeightWidth=function(e,t,n){var r=null!=t?t:n,a=null!=e?e:n;r>a?r>n&&(a*=n/r,r=n):a>n&&(r*=n/a,a=n);return{width:Math.max(r,1),height:Math.max(a,1)}},t.rotatePoint=function(e,t,n){var r=n*Math.PI/180;return{x:Math.cos(r)*e+Math.sin(r)*t,y:-Math.sin(r)*e+Math.cos(r)*t}}},28755:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.has(e)};var n=new Set(["16505434800","16503130062","16507885324","16508620604","16504228206","16505212669","447710173736","16507885280","19032707825","16505361212","16508129150","16315555102","0"])},23393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=document.getElementById("hard_expire_time"),r=n&&n.dataset&&n.dataset.time;r||(__LOG__(3)`hard expire time not found on dom, using fallback of 1572566400 (2019/11/1)`,r="1572566400");var a=r;t.default=a},67819:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.extract=u,t.expand=l,t.extractAndExpand=function(e,t,n){return u(e,s).then((function(e){return l(e,t,n)}))},t.DEFAULT_SALT=void 0;var i=n(17643),o=a(n(44338)),s=new Uint8Array(32).buffer;function u(e,t){return new o.default(new Uint8Array(t)).sign(new Uint8Array(e))}function l(e,t,n){if(n<0||n>8160)return r.reject(new Error(`HKDF::expand given bad length ${n}`));for(var a=Math.ceil(n/32),s=i.Binary.build(t).readByteArray(),u=new i.Binary,l=new o.default(e),c=r.resolve(new Uint8Array(0)),d=function(e){c=c.then((function(t){var n=new Uint8Array(t.length+s.length+1);return n.set(t),n.set(s,t.length),n[t.length+s.length]=e,l.sign(n)})).then((function(e){var t=new Uint8Array(e);return u.writeByteArray(t),t}))},f=1;f<=a;f++)d(f);return c.then((function(){return u.readBuffer(n)}))}t.DEFAULT_SALT=s},76568:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SpecialKeyMap=void 0;var i=a(n(67154)),o=a(n(6479)),s=a(n(63038)),u=a(n(34575)),l=a(n(93913)),c=a(n(2205)),d=a(n(99842)),f=a(n(96486)),p=r(n(67294)),h=a(n(37618)),_={alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},v=f.default.values(_),m={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,ins:45,del:46,meta:224};t.SpecialKeyMap=m;var g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},y={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+"},E=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._setRef=function(t){e._ref=t,e.props.onRef&&e.props.onRef(t)},e.getElement=function(){return e._ref},e.focused=!1,e.onKeyDown=function(t){var n=e.props.handlers;n&&Object.keys(n).forEach((function(r){var a=n[r];if(null!=a){var i=e.normalizeKM(r),o=(0,s.default)(i,1)[0];g[o]&&e.matchHandler(i,t)&&(t.persist(),a(t))}}))},e.onKeyPress=function(t){var n=e.props.handlers;n&&Object.keys(n).forEach((function(r){var a=n[r];if(null!=a){var i=e.normalizeKM(r),o=(0,s.default)(i,1)[0];g[o]||e.matchHandler(i,t)&&(t.persist(),a(t))}}))},e.onFocus=function(t){e.focused=!0,e.props.onFocus(t)},e.onBlur=function(t){e.focused=!1,e.props.onBlur(t)},e}return(0,l.default)(n,[{key:"matchHandler",value:function(e,t){var n=(0,s.default)(e,2),r=n[0],a=n[1];return r===t.which&&v.every((function(e){return a&&e===a?t.getModifierState(a):!t.getModifierState(e)}))}},{key:"normalizeKM",value:function(e){var t=e.toLowerCase().split("+"),n=(0,s.default)(t,2),r=n[0],a=n[1];y[r]&&(r=y[r]),y[a]&&(a=y[a]);var i,o=r;return a?(o=a,void 0===(i=_[r])?__LOG__(3)`Invalid HotKey Modifier: ${r}`:void 0===o&&__LOG__(3)`Invalid HotKey Key: ${a}`):void 0===o&&__LOG__(3)`Invalid HotKey Key: ${r}`,[m[o]||o.charCodeAt(0),i]}},{key:"componentDidMount",value:function(){this.focused=!1}},{key:"componentWillUnmount",value:function(){if(!0===this.focused){var e=document.activeElement;this._ref===e&&h.default.Manager.refocusTopUie()}}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.handlers,r=e.children,a=(e.onRef,(0,o.default)(e,["component","handlers","children","onRef"])),s=n&&Object.keys(n).some((function(e){return null!=n[e]}));return p.default.createElement(t,(0,i.default)({ref:this._setRef,tabIndex:"-1",onKeyPress:s?this.onKeyPress:null,onKeyDown:s?this.onKeyDown:null},a,{onFocus:this.onFocus,onBlur:this.onBlur}),r)}}]),n}(p.Component);t.default=E,E.defaultProps={component:"div",onFocus:function(){},onBlur:function(){}},E.flashFocus=Date.now(),E.displayName="Hotkeys"},17667:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MmsDownloadFilehashMismatchError=t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){(0,a.default)(this,n);var i=null!=r&&null!=r.url?`${e}: ${r.url}`:e;return t.call(this,i)}return n}((0,n(1838).customError)("HttpInvalidResponseError"));t.default=s;var u=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,"mmsDownload: filehash mismatch",e)).name="MmsDownloadFilehashMismatchError",r}return n}(s);t.MmsDownloadFilehashMismatchError=u},34562:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){(0,a.default)(this,n);var i=null!=r&&null!=r.url?`${e}: ${r.url}`:e;return t.call(this,i)}return n}((0,n(1838).customError)("HttpNetworkError"));t.default=s},90994:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r,i){var o;(0,a.default)(this,n);var s=null!=i&&null!=i.url?`${r}: ${e} ${i.url}`:`${r}: ${e}`;return(o=t.call(this,s)).status=e,o}return n}((0,n(1838).customError)("HttpStatusCodeError"));t.default=s},73779:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,e,r)).name="HttpTimedOutError",i}return n}(r(n(34562)).default);t.default=s},31776:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"HttpInvalidResponseError",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"MmsDownloadFilehashMismatchError",{enumerable:!0,get:function(){return o.MmsDownloadFilehashMismatchError}}),Object.defineProperty(t,"HttpNetworkError",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"HttpStatusCodeError",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"HttpTimedOutError",{enumerable:!0,get:function(){return l.default}});var i=a(n(2277)),o=r(n(17667)),s=a(n(34562)),u=a(n(90994)),l=a(n(73779))},68024:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(e,t).catch((function(e){if(e.name===u.ABORT_ERROR)throw new u.default;if(e instanceof c.HttpNetworkError)throw e;throw new c.HttpNetworkError(e.message)}))},t.sharedFetch=_;var o=i(n(319)),s=i(n(81109)),u=a(n(2277)),l=i(n(79245)),c=n(31776),d=i(n(85294)),f=i(n(8787)),p=i(n(20372)),h=i(n(4020));function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new r((function(n,a){if(t.signal&&t.signal.aborted)a(new l.default("AbortError"));else{var i=new XMLHttpRequest;if(t.signal){var u=t.signal;u.addEventListener("abort",(function e(){u.removeEventListener("abort",e),i.onreadystatechange=function(){},i.abort(),a(new l.default("AbortError"))}))}var _=t.onProgress,v=t.onResponseText;(null!=_||v)&&(i.onprogress=function(e){v&&v(e,i.responseText),_&&_(e)}),i.onreadystatechange=function(){if(0===i.readyState)a(new Error("fetch error: not sent"));else if(4===i.readyState){if(null==i.status)return void a(new Error("fetch error: no status"));if(0===i.status||i.status>=12e3)return void a(new Error(`fetch error: unexpected status ${i.status}`));n(g())}},i.onerror=function(){return a(new Error("fetch error: error"))},i.ontimeout=function(){a(new c.HttpTimedOutError("fetch error: timedout",{url:e.toString()}))},i.withCredentials="include"===t.credentials,null!=t.timeout&&(i.timeout=t.timeout),i.open(t.method||"get",e.toString(),!0);var m=new f.default(t.headers||{});(0,d.default)(m.keys(),(function(e){var t=m.get(e);null!=t&&i.setRequestHeader(e,t)})),v?i.overrideMimeType("text/plain; charset=x-user-defined"):i.responseType="arraybuffer",i.send(t.body||null)}function g(){var e=new f.default((0,p.default)(i.getAllResponseHeaders()));return(0,s.default)((0,s.default)({ok:200<=i.status&&i.status<300,statusText:i.statusText,status:i.status,url:i.responseURL},v?{text:function(){return r.resolve(i.responseText)},json:function(){return r.resolve(JSON.parse(i.responseText))},arrayBuffer:function(){return(0,h.default)(i.responseText)}}:{text:function(){return y()},json:function(){return y().then((function(e){return JSON.parse(e)}))},arrayBuffer:function(){return i.response}}),{},{blob:function(){return r.resolve(new Blob([i.response],{type:e.get("content-type")||""}))},clone:g,headers:e})}function y(){return r.resolve(String.fromCharCode.apply(String,(0,o.default)(new Uint8Array(i.response))))}}))}},20372:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(e||"").trim().toLowerCase().split("\n").reduce((function(e,t){if(!t.trim())return e;var n=t.indexOf(":"),r=t.substr(0,n).trim(),a=t.substr(n+1).trim().replace(/;$/,"");return e[r]?Array.isArray(e[r])?e[r].push(a):e[r]+=`, ${a}`:e[r]=a,e}),{})}},4020:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e5;return new r((function(n){var r=e.length,a=new ArrayBuffer(r),i=new Uint8Array(a),o=0;requestAnimationFrame((function s(){var u=Math.min(o+t,r);for(;o<u;)i[o]=e.charCodeAt(o),o++;if(o===r)return void n(a);requestAnimationFrame(s)}))}))}},64920:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteIdentity=function(e){return r.all([(0,a.deleteRemoteInfo)(e),(0,a.deleteDeviceSenderKey)(e)]).catch((function(){__LOG__(2)`handleDevicesNotification: failed to clean the signal info for ${e.user}`})).then((function(){}))};var a=n(71979)},68691:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateADVSecretKey=function(){var e=new Uint8Array(32);self.crypto.getRandomValues(e);var t=(0,c.encodeB64)(e);return(0,m.setADVSecretKey)(t),t},t.getADVSecretKey=function(){var e=(0,m.getADVSecretKey)();if(null==e)throw new Error("MD secretKey is null or undefined");return e},t.setADVSignedIdentity=function(e){if(null==e)return r.reject(new Error("MD advSignedDeviceIdentity is null or undefined"));if(null==e.deviceSignature)return r.reject(new Error("MD advSignedDeviceIdentity is missing deviceSignature"));return g.waSignalStore.putADVSignedIdentity(e)},t.getADVEncodedIdentity=function(){return C.apply(this,arguments)},t.verifyDeviceIdentityAccountSignature=O,t.generateDeviceSignature=function(e,t,n){var r=e.details,a=l.Binary.build(w,r,t.pubKey,n).readByteArray().buffer;return window.libsignal.Curve.calculateSignature(t.privKey,a)},t.verifyDeviceSignature=M,t.clearADVSecretKey=function(){(0,m.setADVSecretKey)(void 0)},t.validateADVwithIdentityKey=I,t.validateADVwithEncs=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!_.default.supportsFeature(_.default.F.MD_ADV))return r.resolve(!0);var i=n.find((function(e){return e.e2eType===y.CiphertextType.Pkmsg}));if(!i)return r.resolve(!0);__LOG__(2)`validateADVwithEncs: start validate prekey msg `;try{(0,d.default)(null!=e,"author should not be null");var o=(0,E.extractIdentityKey)(i.ciphertext);return(0,d.default)(null!=o,"identityKey should not be null"),I(e,t,new Uint8Array(o),a)}catch(e){return __LOG__(3)`validateADVwithEncs: failed ${e}`,r.resolve(!1)}},t.verifyKeyIndexListAccountSignature=function(e,t){var n=e.details,r=e.accountSignature;(0,d.default)(null!=r,"accountSignature should not be null");var a=l.Binary.build(A,n).readByteArray();return(0,h.verifySignature)(new Uint8Array(t),a,new Uint8Array(r))};var i=a(n(87757)),o=a(n(48926)),s=n(53939),u=n(46042),l=n(17643),c=n(92827),d=a(n(41143)),f=n(91157),p=n(21279),h=n(48935),_=a(n(22021)),v=n(11360),m=n(79583),g=n(1018),y=n(77565),E=n(36918),S=n(47065),b=n(75793),T=new Uint8Array([6,0]),w=new Uint8Array([6,1]),A=new Uint8Array([6,2]);function C(){return(C=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.waSignalStore.getADVSignedIdentity();case 2:if(null!=(t=e.sent)){e.next=5;break}throw new Error("MD advSignedDeviceIdentity is null or undefined");case 5:if(null!=t.deviceSignature){e.next=7;break}throw new Error("MD advSignedDeviceIdentity is missing deviceSignature");case 7:return e.abrupt("return",(0,u.encodeProto)(f.ADVSignedDeviceIdentitySpec,t).readByteArray());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){var r=e.details,a=e.accountSignatureKey||n;(0,d.default)(null!=a,"accountSignatureKey should not be null");var i=e.accountSignature;(0,d.default)(null!=i,"accountSignature should not be null");var o=l.Binary.build(T,r,t).readByteArray();return(0,h.verifySignature)(new Uint8Array(a),o,new Uint8Array(i))}function M(e,t,n){var r=e.details,a=e.deviceSignature;(0,d.default)(null!=a,"deviceSignature should not be null");var i=e.accountSignatureKey||n;(0,d.default)(null!=i,"accountSignatureKey should not be null");var o=l.Binary.build(w,r,t,i).readByteArray();return(0,h.verifySignature)(new Uint8Array(t),o,new Uint8Array(a))}function I(){return k.apply(this,arguments)}function k(){return(k=(0,o.default)(i.default.mark((function e(t,n,r){var a,o,u,l,c,m,y,E,T=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=T.length>3&&void 0!==T[3]&&T[3],_.default.supportsFeature(_.default.F.MD_ADV)){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,o=(0,p.uint8ArrayToBuffer)(r),e.next=7,g.waSignalStore.getIdentity((0,S.createSignalAddress)(t).toString());case 7:if(!(u=e.sent)){e.next=12;break}if(l=(0,h.toCurveKeyPubKey)((0,S.strToBuffer)(u)),!(0,S.bufferEqual)(l,o)){e.next=12;break}return e.abrupt("return",!0);case 12:return c=(0,s.decodeProto)(f.ADVSignedDeviceIdentitySpec,n),(0,d.default)(null!=c,"advSignedDeviceIdentity should not be null"),e.next=16,g.waSignalStore.getIdentity((0,S.createSignalAddress)((0,b.toUserWid)(t)).toString());case 16:if(m=e.sent,y=m?(0,h.toCurveKeyPubKey)((0,S.strToBuffer)(m)):null,O(c,o,y)){e.next=21;break}return __LOG__(3)`validateADVIdentity: invalid account signature`,e.abrupt("return",!1);case 21:if(M(c,o,y)){e.next=24;break}return __LOG__(3)`validateADVIdentity: invalid device signature`,e.abrupt("return",!1);case 24:return E=(0,s.decodeProto)(f.ADVDeviceIdentitySpec,c.details),(0,d.default)(null!=E,"advDeviceIdentity should not be null"),e.prev=26,e.next=29,(0,v.handleADVDeviceUpdateForMessage)(t,E,y,c.accountSignatureKey,o,a);case 29:e.next=35;break;case 31:return e.prev=31,e.t0=e.catch(26),__LOG__(3)`validateADVIdentity: process adv device identity failed`,e.abrupt("return",!1);case 35:return __LOG__(2)`validateADVIdentity: successfully verified accountSignature and deviceSignature`,e.abrupt("return",!0);case 39:return e.prev=39,e.t1=e.catch(3),__LOG__(3)`validateADVIdentity: failed`,e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,null,[[3,39],[26,31]])})))).apply(this,arguments)}},80989:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getICDCMeta=function(){return m.apply(this,arguments)},t.computeIdentityHash=g;var a=r(n(87757)),i=r(n(48926)),o=n(20996),s=n(90066),u=n(4976),l=r(n(34263)),c=n(48935),d=n(68239),f=n(71701),p=r(n(46005)),h=r(n(29826)),_=n(50494),v=n(75793);function m(){return(m=(0,i.default)(a.default.mark((function e(t){var n,r,i,o,s,h,m,y,b;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(0,u.getABPropConfigValue)("md_icdc_enabled")){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,(0,d.getTable)().get(t.user);case 5:if((n=e.sent)&&!n.deleted){e.next=8;break}return e.abrupt("return",null);case 8:if(r={keyHash:void 0,timestamp:void 0},i=n.timestamp,o=n.devices,!(s=o.some((function(e){return e.id!==l.default.DEVICE.PRIMARY_DEVICE})))){e.next=27;break}return h=o.map((function(e){return(0,v.createDeviceWidFromUserAndDevice)(n.id,e.id)})).filter((function(e){return!e.equals((0,f.assertGetMe)())})),e.next=15,(0,_.getAllIdentityKeysBytes)(h);case 15:if(m=e.sent,(0,f.assertGetMe)().user!==t.user){e.next=23;break}return e.next=19,p.default.getIdentityKeyPair();case 19:if(y=e.sent){e.next=22;break}return e.abrupt("return",null);case 22:m.push(new Uint8Array(y.pubKey));case 23:return b=E(),e.next=26,g(m.map((function(e){return new Uint8Array((0,c.toCurveKeyPubKey)(e.buffer))})),b);case 26:r.keyHash=e.sent;case 27:return(s||S(i))&&(r.timestamp=i),e.abrupt("return",r);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,i.default)(a.default.mark((function e(t,n){var r,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,_.identityKeysToBinary)(t),e.next=3,h.default.digest({name:"SHA-256"},r);case 3:return i=e.sent,s=new Uint8Array(i),e.abrupt("return",(0,o.sliceBytes)(s,0,n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){var e=(0,u.getABPropConfigValue)("md_icdc_hash_length");return Math.max(e,8)}function S(e){return(0,s.unixTime)()-e<2592e3}},50494:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllIdentityKeysBytes=function(){return c.apply(this,arguments)},t.identityKeysToBinary=function(e){var t=new o.Binary;return e.sort(l).forEach((function(e){t.writeByteArray(e)})),t.readByteArray()};var a=r(n(87757)),i=r(n(48926)),o=n(17643),s=n(1018),u=n(47065);function l(e,t){for(var n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return e[n]-t[n];return e.length-t.length}function c(){return(c=(0,i.default)(a.default.mark((function e(t){var n,r,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.waSignalStore.bulkGetIdentity(t.map((function(e){return(0,u.createSignalAddress)(e).toString()})));case 2:n=e.sent,r=[],i=0;case 5:if(!(i<n.length)){e.next=15;break}if(null!=(o=n[i])){e.next=11;break}throw new Error(`getAllIdentityKeys: missing identity key for device ${String(t[i])}`);case 11:r.push(new Uint8Array((0,u.strToBuffer)(o)));case 12:i++,e.next=5;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},42594:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UIBusyTasks=t.IdleCallbackTasks=t.IdleEnum=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=n(12035),u=n(94638),l=n(54302).Mirrored(["IDLE_CALLBACK","UI_BUSY"]);t.IdleEnum=l;var c=function(){function e(t){var n=this;(0,i.default)(this,e),this.busyMap=new Map,this.busyId=0,this._clearBusyMap=function(){n.busyMap.clear()},this._taskMap=new Map,this.taskId=0,this.runIdleLoop=function(){n.idleType===l.IDLE_CALLBACK?n.idleCallbackId=(0,u.requestIdleCallback)(n._ricOnIdle):n.isIdle()&&n._uiBusyOnIdle()},this._ricOnIdle=function(e){for(var t,r=n._taskMap.entries();(t=r.next())&&!t.done;){var i=(0,a.default)(t.value,2),o=i[0];if((0,i[1])(),n._taskMap.delete(o),e.timeRemaining()<=0)break}n._taskMap.size>0&&n.runIdleLoop()},this.idleType=t}return(0,o.default)(e,[{key:"setBusy",value:function(e){var t=e;return null!=t&&this.busyMap.has(t)?this.busyMap.set(t,this.busyMap.get(t)+1):(t=++this.busyId,this.busyMap.set(t,1)),this.busyTimer||(this.busyTimer=new s.ShiftTimer(this._clearBusyMap)),this.busyTimer.debounce(1e3),t}},{key:"decBusy",value:function(e){if(null!=e){var t=this.busyMap.get(e);null!=t&&0!==t&&(1===t?this.clearBusy(e):this.busyMap.set(e,t-1))}}},{key:"clearBusy",value:function(e){null!=this.busyMap.get(e)&&this.busyMap.delete(e),this.isIdle()&&(this.busyTimer.cancel(),this._taskMap.size>0&&window.setTimeout(this.runIdleLoop,0))}},{key:"isIdle",value:function(){return 0===this.busyMap.size}},{key:"isBusy",value:function(){return this.busyMap.size>0}},{key:"cancelIdleLoop",value:function(){this.idleType===l.IDLE_CALLBACK&&null!=this.idleCallbackId&&(0,u.cancelIdleCallback)(this.idleCallbackId)}},{key:"_uiBusyOnIdle",value:function(){for(var e,t=this._taskMap.entries();(e=t.next())&&!e.done;){var n=(0,a.default)(e.value,2),r=n[0];if((0,n[1])(),this._taskMap.delete(r),this.isBusy())break}}},{key:"enqueue",value:function(e){return this._taskMap.set(++this.taskId,e),1===this._taskMap.size&&this.runIdleLoop(),this.taskId}},{key:"dequeue",value:function(e){var t=this._taskMap.delete(e);return t&&0===this._taskMap.size&&this.cancelIdleLoop(),t}},{key:"isInQueue",value:function(e){return this._taskMap.has(e)}}]),e}(),d=new c(l.UI_BUSY);t.UIBusyTasks=d;var f=new c(l.IDLE_CALLBACK);t.IdleCallbackTasks=f},93783:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.generateVideoThumbsAndDuration=function(){return C.apply(this,arguments)},t.crop=function(e,t,n,a,i,o,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:b,c=e instanceof HTMLCanvasElement?r.resolve(e):m.loadImage(e);return c.then((function(e){var r=document.createElement("canvas"),c=r.getContext("2d");null==o||null==s?(r.height=i,r.width=a,c.drawImage(e,t,n,a,i)):(r.height=s,r.width=o,c.drawImage(e,t,n,a,i,0,0,o,s));var d={};return I(d,r,u),(0,l.promiseProps)(d).then((function(e){return{images:e,width:a,height:i}}))}))},t.toDataUrlWithRoundedCorners=function(e){return(e instanceof HTMLCanvasElement?r.resolve(e):m.loadImage(e)).then((function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.height=e.height,t.width=e.width;var r=Math.min(e.width,e.height);return n.beginPath(),n.arc(e.width/2,e.height/2,r/2,0,2*Math.PI,!0),n.clip(),n.closePath(),n.drawImage(e,0,0),t.toDataURL("image/png")}))},t.generateLinkPreview=function(e){return m.loadImage(e).then((function(e){var t=140;if(e.width<100||e.height<100)return __LOG__(2)`Image size too small for link preview`,null;var n=document.createElement("canvas"),r=n.getContext("2d");n.height=t,n.width=t;var a=Math.min(e.width,e.height),i=(e.width-a)/2,o=(e.height-a)/2;return r.drawImage(e,i,o,a,a,0,0,t,t),n.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/,"")})).catch((function(){return __LOG__(2)`link preview image generation failed: `,null}))},t.toDataUrl=function(e){return m.loadImage(e).then((function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.height=e.height,t.width=e.width,n.drawImage(e,0,0),t.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/,"")})).catch((function(){return __LOG__(2)`data URL conversion failed: `,null}))},t.rotateAndResize=function(e,t,n){var a,i,o,s=new ArrayBuffer(0);e instanceof HTMLCanvasElement?(i=r.resolve(e),o=r.resolve(s)):(a=window.URL.createObjectURL(e),i=m.loadImage(a),o=(0,h.blobToArrayBuffer)(e).catch((function(e){return __LOG__(3)`ImageUtils::rotateAndResize error: ${e}`,s})));return(0,l.promiseProps)({buffer:o,image:i}).then((function(e){var r=e.buffer,a=e.image,i={};try{i=(0,c.default)(r)}catch(e){}var o=0;switch(i.orientation||"UNKNOWN"){case"right-top":o=1;break;case"left-bottom":o=-1;break;case"bottom-right":o=2}var s=document.createElement("canvas"),u=a.naturalWidth||a.width,d=a.naturalHeight||a.height,f=s.getContext("2d"),p={};if(!o){var h,m,g=(0,_.boundHeightWidth)(d,u,t),y=n&T;if(r&&y&&u===g.width&&d===g.height)try{var E=(0,v.cleanJPEG)(r);p.blob=E,y=!1,h=u,m=d}catch(e){__LOG__(2)`Could not parse JPEG: ${e.message}`}return(y||n&~T)&&(s.width=g.width,s.height=g.height,h=s.width,m=s.height,P(s),f.drawImage(a,0,0,h,m),I(p,s,n)),(0,l.promiseProps)(p).then((function(e){return{width:h,height:m,images:e}}))}switch(o){case 1:case-1:var S=Math.max(u,d),b=S/2;s.width=s.height=S,P(s),k(f,{x:b,y:b,degrees:90*o}),1===o?f.drawImage(a,0,S-d):f.drawImage(a,S-u,0),k(f,{x:b,y:b,degrees:-90*o}),function(e,t,n){var r=e.getContext("2d"),a=r.getImageData(0,0,t,n);e.width=t,e.height=n,r.putImageData(a,0,0)}(s,d,u);var w=function(e,t){var n=(0,_.boundHeightWidth)(e.height,e.width,t),r=n.width,a=n.height;if(r>e.width&&a>e.height)return e;var i=document.createElement("canvas"),o=i.getContext("2d");return i.width=r,i.height=a,o.drawImage(e,0,0,r,a),i}(s,t);return I(p,w,n),(0,l.promiseProps)(p).then((function(e){return{width:w.width,height:w.height,images:e}}));case 2:var A=(0,_.boundHeightWidth)(d,u,t),C=s.width=A.width,O=s.height=A.height;return P(s),k(f,{x:C/2,y:O/2,degrees:90*o}),f.drawImage(a,0,0,C,O),k(f,{x:C/2,y:O/2,degrees:-90*o}),I(p,s,n),(0,l.promiseProps)(p).then((function(e){return{width:s.width,height:s.height,images:e}}))}})).finally((function(){a&&window.URL.revokeObjectURL(a)}))},t.canvasToBlob=O,t.urlToFile=function(e){return m.loadImage(e).then((function(e){var t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;var n=t.getContext("2d");return P(t),n.drawImage(e,0,0),O(t)})).catch((function(){return r.reject(new f.MediaDragDropError("unable to render image",e))}))},t.isCached=function(e){if(!e)return!1;var t=new Image;return t.src=e,!!t.complete},t.getResizedDataUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",n=arguments.length>2?arguments[2]:void 0,r=e.toDataURL(t),a=window.dataURLtoBlob(r);if(a.size<=n)return e.toDataURL(t);for(var i=.9;i>=.1;i-=.1){var o=e.toDataURL(t,i),s=window.dataURLtoBlob(o);if(s.size<=n)return o}return null},t.generateMicroThumb=function(){return M.apply(this,arguments)},t.base64ImageToCanvas=function(){return D.apply(this,arguments)},t.CANVAS=t.BLOB=t.DATA_URL=void 0;var o=i(n(87757)),s=i(n(43269)),u=i(n(48926)),l=n(46154),c=i(n(26642)),d=i(n(35340)),f=a(n(98569)),p=i(n(14534)),h=n(19059),_=n(60089),v=n(82875),m=a(n(60996)),g=i(n(74984)),y=i(n(73358)),E=2,S=4,b=1;t.DATA_URL=b;var T=E;t.BLOB=T;var w=S;t.CANVAS=w;var A=function(e){var t=e.video,n=e.fullWidth,r=e.fullHeight,a=e.maxDimension,i=document.createElement("canvas"),o=(0,_.boundHeightWidth)(r,n,a),s=o.width,u=o.height;i.width=s,i.height=u;var l=i.getContext("2d");l.drawImage(t,0,0,s,u);var c=l.getImageData(0,0,s,u);return{thumb:{url:i.toDataURL("image/jpeg"),width:s,height:u,fullWidth:n,fullHeight:r},imageData:c}};function C(){return(C=(0,u.default)(o.default.mark((function e(t){var n,a,i,u,l,c,f,h,_;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,a=t.maxDimensions,i=t.debugHint,e.next=3,m.loadVideo(n,!0);case 3:if(u=e.sent,l=u.video,c=u.fullWidth,f=u.fullHeight,h=function(e){for(var t=e.width*e.height/4,n=0;n<=1;n+=.25){var r=4*Math.round(t*n);if(0!==e.data[r])return!1;if(0!==e.data[r+1])return!1;if(0!==e.data[r+2])return!1;var a=e.data[r+3];if(0!==a&&255!==a)return!1}return!0},!y.default.isBuggyVideoLoad){e.next=14;break}return 50,100,e.abrupt("return",(0,p.default)({minTimeout:50,maxTimeout:50,retries:100,signal:(new d.default).signal,factor:1},(function(e,t){var n,o,u=[],d=(0,s.default)(a);try{for(d.s();!(o=d.n()).done;){n=o.value;var p=A({video:l,fullHeight:f,fullWidth:c,maxDimension:n}),_=p.thumb,v=p.imageData;if(h(v)){if(t<100)return t>0&&(__LOG__(2)`generateVideoThumbsAndDuration: Setting video.currentTime to 0 to attempt to unblock the video`,l.currentTime=0),e(new Error("retry"));__LOG__(4,void 0,new Error,!0)`generateVideoThumbsAndDuration: Failed to generate video thumbnail from ${i}`,SEND_LOGS(`thumbnail-generation-failed-${i}`)}u.push(_)}}catch(e){d.e(e)}finally{d.f()}var g={duration:~~l.seekable.end(0),thumbs:u};return m.disposeVideo(l),r.resolve(g)})));case 14:return e.prev=14,_=a.map((function(e){var t=A({video:l,fullHeight:f,fullWidth:c,maxDimension:e}),n=t.thumb,r=t.imageData;return h(r)&&(__LOG__(4,void 0,new Error,!0)`generateVideoThumbsAndDuration: Failed to generate video thumbnail from ${i}`,SEND_LOGS(`thumbnail-generation-failed-${i}`)),n})),e.abrupt("return",{duration:~~l.seekable.end(0),thumbs:_});case 17:return e.prev=17,m.disposeVideo(l),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[14,,17,20]])})))).apply(this,arguments)}function O(e){return e.toBlob?new r((function(t){e.toBlob(t,"image/jpeg")})):r.resolve(window.dataURLtoBlob(e.toDataURL("image/jpeg")))}function M(){return(M=(0,u.default)(o.default.mark((function e(t,n,r){var a,i,s,u,l,c,d,f,p,h,_;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null!==(a=(s=r||{}).mimetype)&&void 0!==a?a:"image/jpeg",l=null!==(i=s.maxAttempts)&&void 0!==i?i:10,c=.5,d=t,e.next=7,O(d,u);case 7:f=e.sent,p=0;case 9:if(!(p<l)){e.next=24;break}if(!(f.size<=n)){e.next=12;break}return e.abrupt("break",24);case 12:return h=Math.floor(t.width*c),_=Math.floor(t.height*c),d=R(h,_),d.getContext("2d").drawImage(t,0,0,h,_),e.next=19,O(d,u);case 19:f=e.sent,c*=.5;case 21:p++,e.next=9;break;case 24:return e.next=26,g.default.createFromData(f,u);case 26:return e.t0=e.sent,e.t1=d.width,e.t2=d.height,e.t3=d.toDataURL("image/jpeg"),e.abrupt("return",{opaqueData:e.t0,width:e.t1,height:e.t2,dataUrl:e.t3});case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){!e.blob&&n&T&&(e.blob=O(t)),!e.dataUrl&&n&b&&(e.dataUrl=r.resolve(t.toDataURL("image/jpeg"))),!e.canvas&&n&w&&(e.canvas=r.resolve(t))}function k(e,t){var n=t.x||0,r=t.y||0;t.degrees&&(t.radians=t.degrees*(Math.PI/180)),e.translate(n,r),e.rotate(t.radians),e.translate(-n,-r)}function P(e){var t=e.getContext("2d");t.fillStyle="rgb(247,247,247)",t.fillRect(0,0,e.width,e.height)}function R(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}function D(){return(D=(0,u.default)(o.default.mark((function e(t){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.loadImage(t);case 2:return n=e.sent,r=R(n.width,n.height),r.getContext("2d").drawImage(n,0,0),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8685:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=function(){function e(){(0,i.default)(this,e),this._lastPromise=r.resolve(),this._pending=[]}return(0,o.default)(e,[{key:"enqueue",value:function(e){var t=this;e.catch((function(){}));var n=function(){return e};this._lastPromise=this._lastPromise.then(n,n);var r=this._lastPromise.cancellable();return this._pending.push(r),r.finally((function(){t._pending.length>0&&t._pending[0]===r&&t._pending.shift()}))}},{key:"cancelAll",value:function(e){var t=this._pending;this._pending=[],t.forEach((function(t){t.cancel(e)}))}}]),e}();t.default=s},37410:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;try{n=self.indexedDB}catch(e){}var r=n;t.default=r},93239:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.waNoiseInfo=t.deviceInfo=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=n(17643),l=n(92827),c=n(79583),d=n(17894).default,f=new(function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"get",value:function(){return{osVersion:"0.1",osBuild:"0.1",hardware:"desktop",manufacturer:"",device:"Desktop",lg:"en",lc:"en",mcc:"000",mnc:"000",sim_mnc:"000",sim_mcc:"000"}}}]),e}());t.deviceInfo=f;var p=new(function(){function e(){(0,o.default)(this,e)}var t,n,r,f;return(0,s.default)(e,[{key:"get",value:(f=(0,i.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,c.getNoiseInfo)(),n=this._getIv(),t&&n){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this._decryptNoiseData(t.recoveryToken,n[0]);case 7:return t.recoveryToken=e.sent,e.next=10,this._decryptNoiseData(t.staticKeyPair.pubKey,n[1]);case 10:return t.staticKeyPair.pubKey=e.sent,e.next=13,this._decryptNoiseData(t.staticKeyPair.privKey,n[2]);case 13:return t.staticKeyPair.privKey=e.sent,e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"set",value:(r=(0,i.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Uint8Array(48),self.crypto.getRandomValues(n),r=this._processIv(n),this._setIv(r),e.next=6,this._encryptNoiseData(t.recoveryToken,r[0]);case 6:return t.recoveryToken=e.sent,e.next=9,this._encryptNoiseData(t.staticKeyPair.pubKey,r[1]);case 9:return t.staticKeyPair.pubKey=e.sent,e.next=12,this._encryptNoiseData(t.staticKeyPair.privKey,r[2]);case 12:return t.staticKeyPair.privKey=e.sent,e.abrupt("return",(0,c.setNoiseInfo)(t));case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_setIv",value:function(e){return(0,c.setNoiseInfoIv)(e.map(l.encodeB64))}},{key:"_getIv",value:function(){var e=(0,c.getNoiseInfoIv)();return e?e.map((function(e){return new Uint8Array((0,l.decodeB64)(e))})):null}},{key:"_processIv",value:function(e){var t=new u.Binary(e);return[t.readByteArray(16),t.readByteArray(16),t.readByteArray(16)]}},{key:"_encryptNoiseData",value:(n=(0,i.default)(a.default.mark((function e(t,n){var r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.encKeys[0],e.next=3,self.crypto.subtle.encrypt({iv:n,name:"AES-CBC"},r.key,t);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"_decryptNoiseData",value:(t=(0,i.default)(a.default.mark((function e(t,n){var r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.encKeys[0],e.next=3,self.crypto.subtle.decrypt({iv:n,name:"AES-CBC"},r.key,t);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}());t.waNoiseInfo=p},67148:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(319)),o=a(n(63038)),s=a(n(34575)),u=a(n(93913)),l=n(39951),c=window.Native.ipcRenderer,d=new(function(){function e(){var t=this;(0,s.default)(this,e),this.eventHandlers=new Map,this.idCounter=1,this.promiseCallbacks=new Map,this.send=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return new r((function(n,r){var i=t.idCounter++;t.promiseCallbacks.set(i,[n,r]),c.send("__ipc_bridge_send__",e,!0,i,a)}))},this.sendSync=function(e){for(var n=t.idCounter++,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var o=c.sendSync("__ipc_bridge_send__",e,!1,n,a),s=o.__IPC_BRIDGE_ERROR__,u=o.payload;if(s)throw new Error(u);return u},c.on("__ipc_bridge_response__",(function(e,n){n.eventName;var r=n.id,a=n.payload,i=n.__IPC_BRIDGE_ERROR__,s=t.promiseCallbacks.get(r);if(s){var u=(0,o.default)(s,2),l=u[0],c=u[1];i?c(a):l(a),t.promiseCallbacks.delete(r)}})),c.on("__ipc_bridge_send__",(function(e,n,r,a){var o=t.eventHandlers.get(n);if(o){var s=function(e){return c.send("__ipc_bridge_response__",e)};(0,l.promiseCallSync)((function(){return o.apply(void 0,(0,i.default)(a))})).then((function(e){return s({eventName:n,id:r,payload:e,__IPC_BRIDGE_ERROR__:!1})})).catch((function(e){return s({eventName:n,id:r,payload:e,__IPC_BRIDGE_ERROR__:!0})}))}}))}return(0,u.default)(e,[{key:"receive",value:function(e,t){this.eventHandlers.has(e),this.eventHandlers.set(e,t)}},{key:"removeListener",value:function(e){this.eventHandlers.delete(e)}}]),e}());t.default=d},5693:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67148)),i=function(e,t,n,r){var i=r?a.default.send:a.default.sendSync,o=n.reduce((function(e,n){return e[n]=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i.apply(void 0,["IpcWrapper-call-property",t,n].concat(r))},e}),{});return new Proxy("function"===e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i.apply(void 0,["IpcWrapper-call-function",t].concat(n))}:{},{get:function(e,n){return o[n]||i("IpcWrapper-get",t,n)},set:function(e,n,r){return i(`IpcWrapper-set:${t}`,n,r),delete o[n],!0}})},o={require:function(e){var t=a.default.sendSync("IpcWrapper-require",e),n=t.type,r=t.functions;return i(n,e,r,!0)},createDangerousSyncProxy:function(e){var t=a.default.sendSync("IpcWrapper-require",e),n=t.type,r=t.functions;return i(n,e,r,!1)}};t.default=o},6535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0,n=e.charCode,r=e.keyCode;null!=n&&0!==n?t=n:null!=r&&0!==r&&(t=r);return a.has(t)};var r=n(76568),a=new Set([r.SpecialKeyMap.enter,r.SpecialKeyMap.space])},86557:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this))._array=e.slice(),r}return(0,i.default)(n,[{key:"_next",value:function(){return 0===this._array.length?this.return():{done:!1,value:this._array.shift()}}}]),n}(r(n(45287)).default);t.default=u},52868:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.defaults=void 0;var a=r(n(81109)),i=r(n(34575)),o=r(n(93913)),s=r(n(16525)),u=r(n(29754)),l=r(n(2205)),c=r(n(99842)),d=r(n(54204)),f={factor:2,jitter:0,maxTimeout:1/0};t.defaults=f;var p=function(e){(0,l.default)(n,e);var t=(0,c.default)(n);function n(e){var r;(0,i.default)(this,n);var o=null==e.factor?f.factor:e.factor;return(r=t.call(this,o))._opts=(0,a.default)((0,a.default)({},f),e),r._retryCount=0,r}return(0,o.default)(n,[{key:"_next",value:function(){var e=this._opts,t=e.jitter,r=e.maxTimeout,a=e.minTimeout,i=e.retries,o=(0,s.default)((0,u.default)(n.prototype),"_next",this).call(this);if(o.done)return o;if(this._retryCount++,this._retryCount>i)return this.return();var l=a*o.value;return l*=Math.random()*t*2-t+1,{done:!1,value:l=Math.min(l,r)}}}]),n}(d.default);t.default=p},54204:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this))._base=e,r._value=1,r}return(0,i.default)(n,[{key:"_next",value:function(){var e=this._value;return this._value=e*this._base,{done:!1,value:e}}}]),n}(r(n(45287)).default);t.default=u},85294:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=0,r=e.next();for(;!r.done;)t(r.value,n,e),r=e.next(),n++}},45287:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=r(n(34575)),o=r(n(93913)),s=r(n(86407));a=s.default.iterator;var u=function(){function e(){(0,i.default)(this,e),this._done=!1}return(0,o.default)(e,[{key:a,value:function(){return this}},{key:"next",value:function(){return this._done?{done:!0,value:void 0}:this._next()}},{key:"_next",value:function(){throw new Error("unimplemented")}},{key:"return",value:function(){return this._done=!0,this.next()}}]),e}();t.default=u},96906:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new u(e,t)};var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this))._iterator=e,i._mapper=r,i._n=0,i}return(0,i.default)(n,[{key:"_next",value:function(){var e=this._iterator.next();if(e.done)return this.return();var t=this._mapper(e.value,this._n,this._iterator);return this._n++,{done:!1,value:t}}}]),n}(r(n(45287)).default)},70496:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CLOCK_CHANGE_BACKWARDS_EVENT",{enumerable:!0,get:function(){return a.CLOCK_CHANGE_BACKWARDS_EVENT}}),Object.defineProperty(t,"JS_HALT_EVENT",{enumerable:!0,get:function(){return a.JS_HALT_EVENT}}),t.default=t.DEFAULT_INTERVAL=t.DEFAULT_THRESHOLD=void 0;var a=r(n(68697));t.DEFAULT_THRESHOLD=3e3;t.DEFAULT_INTERVAL=1e4;var i=new a.default(1e4,3e3);i.startDetection();var o=i;t.default=o},27259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=n);return t}},44905:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(67294).createContext)(!1);t.default=r},16971:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LOCALES_THAT_PREFER_24HOUR_TIME=t.LOCALE_CUSTOMIZATIONS=t.SHOULD_USE_MOMENT_LOCALE_FORMAT=t.LOCALE_DATE_TIME_CUSTOMIZATIONS=t.default=void 0;var a=r(n(81109)),i=r(n(63038)),o=r(n(34575)),s=r(n(93913)),u=r(n(2205)),l=r(n(99842)),c=r(n(42317)),d=r(n(97331)),f=r(n(30381)),p=r(n(34263)),h=r(n(28681)),_=n(36324),v=r(n(4090)),m=r(n(20812)),g=r(n(22827)),y=new Set(["⁦","‪"]),E=new Set(["ar","ar-XB","fa","ur","he","dv","ku"]),S=new Set(["ar","ar-XB","fa"]),b="٠١٢٣٤٥٦٧٨٩".split("");function T(e){return b[parseInt(e,10)]}var w=new Error("Unimplemented method"),A=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(e,r,a){var i;if((0,o.default)(this,n),i=t.call(this),!e||!r)throw w;return i._locale=e,i.localeStrings={},i.localeStrings[p.default.L10N.DEFAULT]=r,i.markTranslations=a,i.customizeMoment(),i}return(0,s.default)(n,[{key:"getLocale",value:function(){throw w}},{key:"setLocale",value:function(){throw w}},{key:"normalizeLocale",value:function(e){var t=e.replace(/-/g,"_").toLowerCase(),n=this._getTranslationFilename(t);if(n)return n;for(var r=t;r;){var a=(r=r.split("_").slice(0,-1).join("_"))&&this._getTranslationFilename(r);if(a)return a}}},{key:"isLocaleSupported",value:function(e){return!!e&&!!this.normalizeLocale(e)}},{key:"_getTranslationFilename",value:function(e){var t=v.default[e]||e;return g.default[t]}},{key:"lng",value:function(){var e=this.getLocale();return g.default[e]||e}},{key:"isRTL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLocale();return E.has(e)}},{key:"LR",value:function(e,t){return this.isRTL()?t:e}},{key:"embedDir",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isRTL();return t?this.embedRTL(e):this.embedLTR(e)}},{key:"forceDir",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isRTL();return t?this.forceRTL(e):this.forceLTR(e)}},{key:"embedLTR",value:function(e){return"‪"+e+"‬"}},{key:"embedRTL",value:function(e){return"‫"+e+"‬"}},{key:"isolateLTR",value:function(e){return"⁦"+e+"⁩"}},{key:"isolateRTL",value:function(e){return"⁧"+e+"⁩"}},{key:"forceLTR",value:function(e){return"‎"+e}},{key:"forceRTL",value:function(e){return"‏"+e}},{key:"t",value:function(e,t,n){"number"!=typeof e&&__LOG__(3)`l10n.t was called with an unprocessed id (${e}). If you just added a string on local, restarting your build may address the issue.`;var r=e,a=null!=t?t._plural:null,i=n||this.getLocale();this.localeStrings[i]||(i=p.default.L10N.DEFAULT);var o=this._getString(r,i,a);for(var s in this.markTranslations&&(o?i===p.default.L10N.DEFAULT&&(o="["+o+"]"):(o="!!"+r+"!!",__LOG__(2)`l10n:t string key "${r}" not found`)),o||(o=this._getString(r,p.default.L10N.DEFAULT,a)),o||__LOG__(2)`l10n:t string key "${r}" fallback failed`,t)if(t.hasOwnProperty(s)&&"_plural"!==s){var u=new RegExp("__"+s+"__","g"),l=void 0;l="string"==typeof t[s]&&y.has(t[s].slice(0,1))?t[s]:this.n(t[s],i),o=o.replace(u,l)}return o}},{key:"_getString",value:function(e,t,n){var r=this.localeStrings[t]||this.localeStrings[p.default.L10N.DEFAULT];if(null==r)throw new Error(`Couldn't find translations for locale ${t} or default (${p.default.L10N.DEFAULT})`);if(!Array.isArray(r))throw new Error("Unexpected locale format.");var a=(0,i.default)(r,2),o=a[0],s=a[1],u=o[e]||"";if(null==n)return u;var l=m.default[t];if(null==l)return u;var c=l.numbers[l.plurals(n)];return 1===c?u:s[2===l.numbers.length&&2===c?e.toString():`${e}_${c}`]||u}},{key:"useArabicScriptDigits",value:function(e){return S.has(e||this.getLocale())}},{key:"isLatinAlphabetLanguage",value:function(e){return d.default.isLatin(this.removeAccents(e))}},{key:"n",value:function(e,t){var n=e;return isNaN(n)||(n=n.toString()),this.useArabicScriptDigits(t)?n.toString().replace(/[0-9]/g,T):n}},{key:"filesize",value:function(e){var t=this;return this.n((0,c.default)(e,{base:2,round:0,suffixes:{B:t.t(743),kB:t.t(745),MB:t.t(746),GB:t.t(744)}}))}},{key:"normalizeForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,_.normalizeForm)(e)}},{key:"removeAccents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,_.removeAccents)(e)}},{key:"accentFold",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.removeAccents(e).toLowerCase()}},{key:"customizeMoment",value:function(){f.default.relativeTimeRounding(Math.floor),f.default.relativeTimeThreshold("s",60),f.default.relativeTimeThreshold("m",60),f.default.relativeTimeThreshold("h",24)}}]),n}(h.default);t.default=A;var C={"zh-tw":{longDateFormat:{LT:"Ah:mm",LTS:"Ah:m:s",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"}},"zh-cn":{longDateFormat:{LT:"Ah:mm",LTS:"Ah:m:s",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"}},ar:{longDateFormat:{LT:"h:mm A",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"}},ta:{longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY, h:mm A"},preparse:null,postformat:null,meridiem:null,meridiemHour:null},nl:{longDateFormat:{l:"DD-MM-YYYY",L:"DD-MM-YYYY"}},"en-ie":{longDateFormat:{l:"DD/MM/YYYY",L:"DD/MM/YYYY"}},hi:{preparse:null,postformat:null,longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",LLL:"D MMMM YYYY A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},meridiem:function(e,t){return 0===e&&0===t?"मध्यरात्रि":e>=20||e<4?"रात":e>=4&&e<12?"सुबह":e>=12&&e<16?"दोपहर":"शाम"}}};t.LOCALE_DATE_TIME_CUSTOMIZATIONS=C;var O=new Set(["ur"]);t.SHOULD_USE_MOMENT_LOCALE_FORMAT=O;var M=(0,a.default)((0,a.default)({},C),{"pt-pt":{weekdays:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"]}});t.LOCALE_CUSTOMIZATIONS=M;var I=new Set(["af","az","ca","cs","da","de","el","et","fi","fr","he","hr","hu","id","it","kk","lt","mk","nb","pl","pt","pt_br","ro","ru","sl","sr","sv","tr","uk"]);t.LOCALES_THAT_PREFER_24HOUR_TIME=I},93860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCountryShortcodeByPhone=function(e){if(null==e||0===e.length)return"";var t=function(e,t){if(null!=e&&e.length>0&&null!=t)for(var n=t[e[0]],r=e;r.length>0&&n;){if(n.c)return n.c;n=n[(r=r.substr(1,r.length-1))[0]]}return""}(e,n);return""===t&&"1"===e[0]?"US":"RU"===t&&["6","7"].includes(e[1])?"KZ":t};var n={1:{2:{0:{4:{c:"CA"}},2:{6:{c:"CA"}},3:{6:{c:"CA"}},4:{2:{c:"BS"},9:{c:"CA"}},5:{0:{c:"CA"}},6:{4:{c:"AI"},8:{c:"AG"}},8:{4:{c:"VG"},9:{c:"CA"}}},3:{0:{6:{c:"CA"}},4:{0:{c:"VI"},3:{c:"CA"},5:{c:"KY"}},6:{5:{c:"CA"},7:{c:"CA"}}},4:{0:{3:{c:"CA"}},1:{6:{c:"CA"},8:{c:"CA"}},3:{1:{c:"CA"},7:{c:"CA"},8:{c:"CA"}},4:{1:{c:"BM"}},5:{0:{c:"CA"}},7:{3:{c:"GD"}}},5:{0:{6:{c:"CA"}},1:{4:{c:"CA"},9:{c:"CA"}},4:{8:{c:"CA"}},7:{9:{c:"CA"}},8:{1:{c:"CA"},7:{c:"CA"}}},6:{0:{4:{c:"CA"}},1:{3:{c:"CA"}},3:{9:{c:"CA"}},4:{7:{c:"CA"},9:{c:"TC"}},5:{8:{c:"JM"}},6:{4:{c:"MS"}},7:{0:{c:"MP"},1:{c:"GU"},2:{c:"CA"}},8:{4:{c:"AS"}}},7:{0:{5:{c:"CA"},9:{c:"CA"}},2:{1:{c:"MF"}},5:{8:{c:"LC"}},6:{7:{c:"DM"}},7:{8:{c:"CA"}},8:{0:{c:"CA"},2:{c:"CA"},4:{c:"VC"},7:{c:"PR"}}},8:{0:{7:{c:"CA"},9:{c:"DO"}},1:{9:{c:"CA"}},2:{5:{c:"CA"},9:{c:"DO"}},4:{9:{c:"DO"}},6:{7:{c:"CA"},8:{c:"TT"},9:{c:"KN"}},7:{3:{c:"CA"},6:{c:"JM"}}},9:{0:{2:{c:"CA"},5:{c:"CA"}},3:{9:{c:"PR"}}}},2:{0:{c:"EG"},1:{1:{c:"SS"},2:{c:"MA"},3:{c:"DZ"},6:{c:"TN"},8:{c:"LY"}},2:{0:{c:"GM"},1:{c:"SN"},2:{c:"MR"},3:{c:"ML"},4:{c:"GN"},5:{c:"CI"},6:{c:"BF"},7:{c:"NE"},8:{c:"TG"},9:{c:"BJ"}},3:{0:{c:"MU"},1:{c:"LR"},2:{c:"SL"},3:{c:"GH"},4:{c:"NG"},5:{c:"TD"},6:{c:"CF"},7:{c:"CM"},8:{c:"CV"},9:{c:"ST"}},4:{0:{c:"GQ"},1:{c:"GA"},2:{c:"CG"},3:{c:"CD"},4:{c:"AO"},5:{c:"GW"},6:{c:"IO"},7:{c:"AC"},8:{c:"SC"},9:{c:"SD"}},5:{0:{c:"RW"},1:{c:"ET"},2:{c:"SO"},3:{c:"DJ"},4:{c:"KE"},5:{c:"TZ"},6:{c:"UG"},7:{c:"BI"},8:{c:"MZ"}},6:{0:{c:"ZM"},1:{c:"MG"},2:{c:"RE"},3:{c:"ZW"},4:{c:"NA"},5:{c:"MW"},6:{c:"LS"},7:{c:"BW"},8:{c:"SZ"},9:{c:"KM"}},7:{c:"ZA"},9:{0:{c:"SH"},1:{c:"ER"},7:{c:"AW"},8:{c:"FO"},9:{c:"GL"}}},3:{0:{c:"GR"},1:{c:"NL"},2:{c:"BE"},3:{c:"FR"},4:{c:"ES"},5:{0:{c:"GI"},1:{c:"PT"},2:{c:"LU"},3:{c:"IE"},4:{c:"IS"},5:{c:"AL"},6:{c:"MT"},7:{c:"CY"},8:{c:"FI"},9:{c:"BG"}},6:{c:"HU"},7:{0:{c:"LT"},1:{c:"LV"},2:{c:"EE"},3:{c:"MD"},4:{c:"AM"},5:{c:"BY"},6:{c:"AD"},7:{c:"MC"},8:{c:"SM"}},8:{0:{c:"UA"},1:{c:"RS"},2:{c:"ME"},3:{c:"XK"},5:{c:"HR"},6:{c:"SI"},7:{c:"BA"},9:{c:"MK"}},9:{c:"IT"}},4:{0:{c:"RO"},1:{c:"CH"},2:{0:{c:"CZ"},1:{c:"SK"},3:{c:"LI"}},3:{c:"AT"},4:{c:"GB"},5:{c:"DK"},6:{c:"SE"},7:{c:"NO"},8:{c:"PL"},9:{c:"DE"}},5:{0:{0:{c:"FK"},1:{c:"BZ"},2:{c:"GT"},3:{c:"SV"},4:{c:"HN"},5:{c:"NI"},6:{c:"CR"},7:{c:"PA"},8:{c:"PM"},9:{c:"HT"}},1:{c:"PE"},2:{c:"MX"},3:{c:"CU"},4:{c:"AR"},5:{c:"BR"},6:{c:"CL"},7:{c:"CO"},8:{c:"VE"},9:{0:{c:"GP"},1:{c:"BO"},2:{c:"GY"},3:{c:"EC"},4:{c:"GF"},5:{c:"PY"},6:{c:"MQ"},7:{c:"SR"},8:{c:"UY"},9:{c:"CW"}}},6:{0:{c:"MY"},1:{c:"AU"},2:{c:"ID"},3:{c:"PH"},4:{c:"NZ"},5:{c:"SG"},6:{c:"TH"},7:{0:{c:"TL"},2:{c:"NF"},3:{c:"BN"},4:{c:"NR"},5:{c:"PG"},6:{c:"TO"},7:{c:"SB"},8:{c:"VU"},9:{c:"FJ"}},8:{0:{c:"PW"},1:{c:"WF"},2:{c:"CK"},3:{c:"NU"},5:{c:"WS"},6:{c:"KI"},7:{c:"NC"},8:{c:"TV"},9:{c:"PF"}},9:{0:{c:"TK"},1:{c:"FM"},2:{c:"MH"}}},7:{c:"RU"},8:{1:{c:"JP"},2:{c:"KR"},4:{c:"VN"},5:{0:{c:"KP"},2:{c:"HK"},3:{c:"MO"},5:{c:"KH"},6:{c:"LA"}},6:{c:"CN"},8:{0:{c:"BD"},6:{c:"TW"}}},9:{0:{c:"TR"},1:{c:"IN"},2:{c:"PK"},3:{c:"AF"},4:{c:"LK"},5:{c:"MM"},6:{0:{c:"MV"},1:{c:"LB"},2:{c:"JO"},3:{c:"SY"},4:{c:"IQ"},5:{c:"KW"},6:{c:"SA"},7:{c:"YE"},8:{c:"OM"}},7:{0:{c:"PS"},1:{c:"AE"},2:{c:"IL"},3:{c:"BH"},4:{c:"QA"},5:{c:"BT"},6:{c:"MN"},7:{c:"NP"}},8:{c:"IR"},9:{2:{c:"TJ"},3:{c:"TM"},4:{c:"AZ"},5:{c:"GE"},6:{c:"KG"},8:{c:"UZ"}}}}},36324:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeForm=i,t.removeAccents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,a.default)(i(e).replace(/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0B55\u0BCD\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E47-\u0E4C\u0E4E\u0EBA\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1063\u1064\u1069-\u106D\u1087-\u108D\u108F\u109A\u109B\u135D-\u135F\u17C9-\u17D3\u17DD\u1939-\u193B\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DF9\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA700-\uA721\uA788-\uA78A\uA7F8\uA7F9\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uAB69-\uAB6B\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD802[\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDF46-\uDF50]|\uD804[\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDD3D\uDD3E\uDD43\uDDE0\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF9F\uDFF0\uDFF1]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD838[\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g,""))};var a=r(n(97331));function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.normalize("NFKD")}},89115:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(87757)),s=i(n(63038)),u=i(n(48926)),l=i(n(34575)),c=i(n(93913)),d=i(n(16525)),f=i(n(29754)),p=i(n(2205)),h=i(n(99842)),_=n(53615),v=n(80835),m=i(n(30381)),g=a(n(16971)),y=i(n(34263)),E=n(97223),S=a(n(59502)),b=i(n(73358)),T=i(n(37997)),w=i(n(96486)),A=i(n(10181)),C=self.location.href;C&&C.includes("/%F0%9F%8C%90/")&&r.resolve().then(n.bind(n,69267)).then((function(e){e.default.canMuckHistory()&&window.history.replaceState({},"","/")}));var O="en-gb",M={LTR:"LTR",RTL:"RTL"},I={LTR:"style",RTL:"style_rtl"},k=y.default.L10N_PRIORITY;var P=function(e){(0,p.default)(i,e);var t,a=(0,h.default)(i);function i(){var e;(0,l.default)(this,i);var t={l:y.default.L10N.DEFAULT,priority:k.DEFAULT,loc:y.default.L10N.DEFAULT};e=a.call(this,t,n(4210).default,y.default.MARK_TRANSLATIONS);var r=function(){if((0,E.isConnectedToPage)())return document.querySelector("html").getAttribute("loc")}(),o={};return e._considerLocale(o,r,k.PREVIOUS)&&e.downloadAndSetTranslation(o),e.spellCache=new T.default,self.setInterval((function(){e.spellCache.expireKeys(Date.now()-3e4)}),5e3),e}return(0,c.default)(i,[{key:"getLocale",value:function(){return this._locale.l}},{key:"getFullLocale",value:function(){return this._locale.loc.replace("_","-")}},{key:"normalizeForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!b.default.isTrident)return e.normalize("NFKD");try{return e.normalize("NFKD")}catch(t){return e}}},{key:"setLocale",value:(t=(0,u.default)(o.default.mark((function e(t,n){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={l:this._locale.l,priority:this._locale.priority,loc:this._locale.l},this._considerLocale(a,t,n)){e.next=3;break}return e.abrupt("return",r.resolve());case 3:return e.abrupt("return",this.downloadAndSetTranslation(a));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isLocaleSupported",value:function(e){try{return(0,d.default)((0,f.default)(i.prototype),"isLocaleSupported",this).call(this,e)&&(!self.Intl||Array.isArray(self.Intl.Collator.supportedLocalesOf(e)))}catch(e){return!1}}},{key:"init",value:function(e){var t,n={l:y.default.L10N.DEFAULT,priority:k.DEFAULT,loc:y.default.L10N.DEFAULT};if(this._considerLocale(n,e,k.PREVIOUS),this._considerLocale(n,(t=(C||self.location.href||"").split("/%F0%9F%8C%90/")).length>1?t[1].split("/")[0]:void 0,k.URL),this._considerLocale(n,navigator.language,k.BROWSER),navigator.languages&&navigator.languages.length)for(var r=0;r<navigator.languages.length&&!this._considerLocale(n,navigator.languages[r],k.BROWSER);r++);return this.downloadAndSetTranslation(n)}},{key:"_considerLocale",value:function(e,t,n){if(!(null!=e.priority&&n<e.priority)&&null!=t&&t!==this.getLocale()){var r=this.normalizeLocale(t);return r?(e.l=r,e.priority=n,e.loc=t,e):void 0}}},{key:"downloadAppLocale",value:function(e){return this.localeStrings[e]?r.resolve(this.localeStrings[e]):(0,v.promiseLoop)(function(){var t=(0,u.default)(o.default.mark((function t(r,a,i){var u,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=(0,_.delayMs)(S.expBackoff(i,12e4,1e3,.1)),t.next=3,n(26299)(`./${e}`);case 3:return l=t.sent,t.abrupt("return",l.default().then((function(e){var t=(0,s.default)(e,1)[0];return r(t)})).catch((function(){return 10===i&&(__LOG__(4,void 0,new Error,!0)`${i} times, locale is ${e}`,SEND_LOGS("downadAppLocale failure")),u})));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())}},{key:"downloadMomentLocale",value:function(e){var t=e.l,a=e.loc;return m.default.locale()===a?r.resolve():(0,v.promiseLoop)(function(){var e=(0,u.default)(o.default.mark((function e(i,s,u){var l,c,d,f;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(0,_.delayMs)(S.expBackoff(u,12e4,1e3,.1)),c=function(){return r.resolve()},a===y.default.L10N.DEFAULT){e.next=22;break}return e.prev=3,e.next=6,n(19922)(`./${a}`);case 6:d=e.sent,c=d.default,e.next=22;break;case 10:return e.prev=10,e.t0=e.catch(3),e.prev=12,e.next=15,n(19922)(`./${t}`);case 15:f=e.sent,c=f.default,e.next=22;break;case 19:e.prev=19,e.t1=e.catch(12),c=function(){return r.resolve()};case 22:return e.abrupt("return",c().then((function(){return i()})).catch((function(){return 10===u&&(__LOG__(4,void 0,new Error,!0)`${u} times, locale is (${t}, ${a})`,SEND_LOGS("downloadMomentLocale failure")),l})));case 23:case"end":return e.stop()}}),e,null,[[3,10],[12,19]])})));return function(){return e.apply(this,arguments)}}())}},{key:"downloadAndSetTranslation",value:function(e){var t=this,n=this._locale,a=n.l,i=n.loc,o=e.l,u=e.loc;this._updateSpellChecker([u,o]),this._updateElectronMain(o);var l=this.isRTL(o)?M.RTL:M.LTR;if((0,E.isConnectedToPage)()&&o===a&&document.getElementById(I[l])&&u===i)return r.resolve();this._fetchPromise&&this._fetchPromise.cancel();var c,d,f=self.performance.now();return this._fetchPromise=r.all([this.downloadAppLocale(o),this.downloadMomentLocale(e)]).then((function(n){var r=(0,s.default)(n,1)[0];c=self.performance.now(),t.localeStrings[o]=r,t._locale=e,t.trigger("set_collator",o);var a=[u,o,O].filter((function(e){return!!e}));m.default.locale(a),t.customizeMomentLocale(m.default.locale()),(0,E.isConnectedToPage)()&&(document.documentElement&&document.documentElement.setAttribute("lang",e.l),document.documentElement&&document.documentElement.setAttribute("dir",l)),t.trigger("locale_change",o)})).then((function(){d=self.performance.now(),__LOG__(2)`l10n:locale updated: (${a}, ${i}) > (${o}, ${u}), Fetch: ${c-f}ms, Apply: ${d-c}ms`})).catch((function(){return __LOG__(2)`l10n:locale update error: (${a}, ${i}) > (${o}, ${u})`,t.downloadAndSetTranslation({l:y.default.L10N.DEFAULT,priority:k.DEFAULT,loc:y.default.L10N.DEFAULT})}))}},{key:"_updateSpellChecker",value:function(e){var t=window.Native.spellChecker;if(t){t.setSpellCheckerDictionaryDownloadURL("https://web.whatsapp.com/hunspell/v1/");var n=t.availableSpellCheckerLanguages,r=function(e){var t=e.replace("-","_").toLowerCase();return A.default[t]||t},a=w.default.map(n,r);__LOG__(2)`All available spell checking languages: ${n.toString()}`,__LOG__(2)`Accepted locales: ${e.toString()}`,__LOG__(2)`Normalized locales for selecting spell checking language: ${a.toString()}`;var i,o=e.find((function(e){return a.includes(r(e))}));o&&(i=n.find((function(e){return r(e)===r(o)}))),__LOG__(2)`Selected spell checker locale: `,i?(t.setSpellCheckerLanguages([i]),this._spellCheckLocale=i):__LOG__(2)`No spellchecking support for ${e.toString()}`}}},{key:"_updateElectronMain",value:function(e){window.Native.ipcRenderer.send("change:locale",e)}},{key:"customizeMomentLocale",value:function(e){var t=g.LOCALE_CUSTOMIZATIONS[e];t&&m.default.locale(e,t)}}]),i}(g.default);P.Dir=M;var R=new P;t.default=R},20812:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={ach:{name:"Acholi",numbers:[1,2],plurals:function(e){return Number(e>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ak:{name:"Akan",numbers:[1,2],plurals:function(e){return Number(e>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(e){return Number(e>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ay:{name:"Aymará",numbers:[1],plurals:function(){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(e){return Number(1!=e)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bo:{name:"Tibetan",numbers:[1],plurals:function(){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(e){return Number(e>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},cgg:{name:"Chiga",numbers:[1],plurals:function(){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},de:{name:"German",numbers:[1,2],plurals:function(e){return Number(1!=e)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(e){return Number(1!=e)}},en:{name:"English",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es:{name:"Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},et:{name:"Estonian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eu:{name:"Basque",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fa:{name:"Persian",numbers:[1],plurals:function(){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(e){return Number(e>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fr:{name:"French",numbers:[1,2],plurals:function(e){return Number(e>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gun:{name:"Gun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(e){return Number(1!=e)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(e){return Number(1!=e)}},id:{name:"Indonesian",numbers:[1],plurals:function(){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(e){return Number(e%10!=1||e%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ja:{name:"Japanese",numbers:[1],plurals:function(){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(e){return Number(0!==e)}},ka:{name:"Georgian",numbers:[1],plurals:function(){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ko:{name:"Korean",numbers:[1],plurals:function(){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(e){return Number(1==e?0:2==e?1:3==e?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(e){return Number(e>1)}},lo:{name:"Lao",numbers:[1],plurals:function(){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(e){return Number(e>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(e){return Number(e>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(e){return Number(e>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(e){return Number(1==e||e%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(e){return Number(0===e?0:1==e?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ms:{name:"Malay",numbers:[1],plurals:function(){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(e){return Number(1!=e)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(e){return Number(1!=e)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(e){return Number(e>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(e){return Number(1!=e)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},"pt-BR":{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(e){return Number(1!=e)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(e){return Number(1!=e)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},son:{name:"Songhay",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(e){return Number(1!=e)}},te:{name:"Telugu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(e){return Number(e>1)}},th:{name:"Thai",numbers:[1],plurals:function(){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(e){return Number(e>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(e){return Number(e>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(e){return Number(e>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(e){return Number(e>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(e){return Number(1!=e)}},zh:{name:"Chinese",numbers:[1],plurals:function(){return 0}}};t.default=n},81172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelItemParentType=void 0;var r=n(54302).Mirrored(["Chat","Contact","Msg"]);t.LabelItemParentType=r},48186:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.initializeLabels=function(e){var t=s(e);if(a.default.supportsFeature(a.default.F.MD_BACKEND))e.labels=n(6705).default.getLabelsForModel(e.id.toString(),t);else{var r=function(){o(e.id.toString(),e.labels,t)};r(),e.listenTo(e,"change:labels",r)}},t.addToLabelCollection=o,t.removeLabelFromCollection=function(e,t,r){var o=n(6705).default.get(t),s=null==o?void 0:o.labelItemCollection;if(!s)return void __LOG__(3)`labelItemCollection does not exist for lableId ${t}`;s.remove(u(e,t,r)),a.default.supportsFeature(a.default.F.MD_BACKEND)&&r===i.LabelItemParentType.Chat&&s.remove(u(e,t,i.LabelItemParentType.Contact))},t.getParentCollection=function(e){switch(e){case i.LabelItemParentType.Chat:return n(26671).default;case i.LabelItemParentType.Contact:return n(48629).default;case i.LabelItemParentType.Msg:return n(66312).default}},t.getParentTypeFromModel=s,t.createLabelItemId=u;var a=r(n(22021)),i=n(81172);function o(e,t,r){if(t&&t.length>0){var o=n(6705).default;t.forEach((function(t){var n=o.gadd({id:t});n.labelItemCollection.gadd({id:u(e,t,r),labelId:t,parentId:e,parentType:r}),a.default.supportsFeature(a.default.F.MD_BACKEND)&&r===i.LabelItemParentType.Chat&&n.labelItemCollection.gadd({id:u(e,t,i.LabelItemParentType.Contact),labelId:t,parentId:e,parentType:i.LabelItemParentType.Contact})}))}}function s(e){if(e instanceof n(54654).default)return i.LabelItemParentType.Chat;if(e instanceof n(17956).default)return i.LabelItemParentType.Contact;if(e instanceof n(16551).default)return i.LabelItemParentType.Msg;throw new Error("getParentTypeFromModel: model is invalid")}function u(e,t,n){return`${e}_${t}_${n}`}},14483:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=M;var i=a(n(87757)),o=a(n(48926)),s=(a(n(43906)),a(n(7860))),u=a(n(22021)),l=n(76890),c=n(97223),d=n(3646),f=(a(n(65179)),n(71701)),p=n(79583),h=a(n(34263)),_=n(25220),v=n(17533),m=n(43883),g=n(40173),y=n(4656),E=a(n(69400)),S=n(237),b=n(4746),T=n(14253),w=a(n(34541)),A=a(n(65010)),C=a(n(60305));function O(){return(0,b.startComms)(E.default,S.sendPing),(0,b.waitForConnection)().then((function(){return(0,b.startHandlingRequests)()}))}function M(e){var t=(0,l.makeBridge)();(0,c.setBridge)(t),(0,d.requireSetHandlers)().then((function(e){return e(t)}));var n=r.resolve();return u.default.supportsFeature(u.default.F.MD_BACKEND)?n=(0,v.initEncSalt)().then((function(){return(0,v.initEncSaltForInvoker)()})).then((function(){return(0,g.initialize)()})).catch((function(e){__LOG__(4,void 0,new Error,void 0,["launch_socket"])`storageInitializationError triggered logout: ${(null==e?void 0:e.message)||(null==e?void 0:e.name)}.`,w.default.storageInitializationError()})).then((function(){return C.default.isLogoutInProgress?r.reject(new Error("aborting launchSocket due to logout")):(0,p.isRegistered)()?(w.default.initialLoadReady(),(0,m.initialize)().catch((function(){return w.default.storageInitializationError()})).then((function(){w.default.incrementProgress(),(0,_.restoreGroupsContactsAndProfilePics)()})).then((function(){return(0,_.restoreBlocklist)()})).then((function(){w.default.incrementProgress(),(0,y.startBackend)()}))):(w.default.incrementProgress(),r.all([(0,T.refreshNoiseCredentials)(),(0,T.refreshSignalCredentials)()]).then((function(){w.default.incrementProgress(),O()})))})):s.default.launch(e),n}w.default.on("md_downgrade_webclient",(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,b.stopComms)(),e.next=3,(0,v.deleteEncKeysAndCache)();case 3:s.default.set({launched:!1,stream:h.default.SOCKET_STREAM.DISCONNECTED,mustExitLoop:!1,shouldUpgradeToMD:!1}),(0,f.setMdOptedIn)(!1),u.default.setFeature(u.default.F.MD_BACKEND,!1),u.default.setFeature(u.default.F.MD_ADV,!1),u.default.setFeature(u.default.F.MD_VOIP_GROUP,!1),s.default.initialize(),s.default.handler||s.default.registerHandler(A.default),M(!0);case 11:case"end":return e.stop()}}),e)})))),w.default.on("upgrade_to_md",(function(){u.default.setFeature(u.default.F.MD_BACKEND,!0),u.default.setFeature(u.default.F.MD_ADV,!0),u.default.setFeature(u.default.F.MD_VOIP_GROUP,!1),M(!0),(0,p.setUpgradeMdWamFlag)(!0),(0,f.setMdOptedIn)(!0),window.Native.ipcRenderer.invoke("refresh-electron-window-on-logout")})),w.default.on("upgrade_to_md_prod",(function(){u.default.setFeature(u.default.F.MD_BACKEND,!0),u.default.setFeature(u.default.F.MD_ADV,!0),u.default.setFeature(u.default.F.MD_VOIP_GROUP,!1),M(!0),(0,p.setUpgradeMdWamFlag)(!0),(0,f.setMdOptedIn)(!0),window.Native.ipcRenderer.invoke("refresh-electron-window-on-logout")})),w.default.on("md_refresh_qr",(function(){(0,b.stopComms)(),O()})),w.default.on("logout",(function(){u.default.supportsFeature(u.default.F.MD_BACKEND)&&M(!0)}))},75934:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),u=function(){function e(t){var n=t.name,r=t.handler,a=void 0===r?null:r,i=t.interval,s=void 0===i?3600:i,u=t.restingInterval,l=void 0===u?18e3:u,c=t.sleepWhileResting,d=void 0!==c&&c,f=t.randomIntervalExtension,p=void 0===f?0:f;if((0,o.default)(this,e),this._running=!1,this._slowDown=!1,this._name=n,this._interval=1e3*s,this._restingInterval=1e3*l,this._sleepWhileResting=d,this._randomIntervalExtension=1e3*p,this._rest(),"function"==typeof a)this.poll(a);else if(null!=a)throw new Error("Poll handler must be a function or null")}var t;return(0,s.default)(e,[{key:"_getRandomExtension",value:function(){return Math.ceil(Math.random()*this._randomIntervalExtension)}},{key:"_getInterval",value:function(){return(this._slowDown?this._restingInterval:this._interval)+this._getRandomExtension()}},{key:"_rest",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){e._lock||(document.hidden?e._sleepWhileResting?(__LOG__(2)`LazyPoll[${e._name}]: Inactive paused`,e._pause()):(__LOG__(2)`LazyPoll[${e._name}]: Inactive slowing down`,e._slowDown=!0):e._callback&&(__LOG__(2)`LazyPoll[${e._name}]: Active Resuming`,e._resume()))}),!1)}},{key:"_isDue",value:function(){return!this._lastPoll||Date.now()-this._lastPoll>=this._getInterval()}},{key:"_pause",value:function(){clearTimeout(this._timer),this._running=!1}},{key:"_resume",value:function(){this._slowDown=!1,this._running=!0,this._cycle()}},{key:"_cycle",value:(t=(0,i.default)(a.default.mark((function e(){var t=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._running){e.next=8;break}if(!this._isDue()){e.next=6;break}return __LOG__(2)`LazyPoll[${this._name}]: Polling...`,e.next=5,this._callback();case 5:this._lastPoll=Date.now();case 6:clearTimeout(this._timer),this._timer=setTimeout((function(){return t._cycle()}),this._getInterval());case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"poll",value:function(e){null==this._callback?(this._callback=e,this._running=!0,this._cycle()):this.resume()}},{key:"pause",value:function(){__LOG__(2)`LazyPoll[${this._name}]: Manually Paused`,this._lock=!0,this._pause()}},{key:"resume",value:function(){__LOG__(2)`LazyPoll[${this._name}]: Manually Resumed`,this._lock=!1,this._resume()}}]),e}();t.default=u},46515:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findLinks=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(!b.test(e))return[];S.lastIndex=0;var r,a=[];for(;r=T(e);){var i=A(r,t,n);i&&a.push(i)}return a},t.findLink=w,t.validateEmail=function(e){var t=w(e);return t&&t.url===e&&"mailto:"===t.scheme&&t.username&&!t.params&&!t.anchor?t:null};var a=n(72687),i=n(34151),o=r(n(93743)),s=n(71701),u=n(68460),l=/^https?:\/\/$/gi,c="\\w|[^\\s\0-«»‘’“”]|%[0-9a-f][0-9a-f]",d=`(?:${c})|(?:${c})(?:${c}|-)*(?:${c})`,f=`(?:${c}|[^\\s%])`,p=`[+@!.?,(\\[{<«‘“:]*(?!${f}|#)`,h="0-9a-z!#$%&'*+/=?^_`{|}~\\-",_=`(^|\\W\\.|[^/\\w.]|_)((?:http|https)://|mailto:)?(${`\\b\\w[${h}]*(?:\\.[${h}]+)*`}@)?(${`(?!_)(?:(?:${d})\\.)+(?:${u.TLD})(?!\\.${d})`})(?:(?!${d})|(?=_))(?:(?=[^:/?#])|(:\\d{1,5})?(${`/${f}*?`})?(${`\\?(?!${p})${f}*?`})?(${`#${f}*?`})?(?=${p}))`,v=6,m=7,g=8,y=new Map([[34,34],[41,40],[62,60],[93,91],[125,123],[187,171],[8217,8216],[8221,8220]]),E=new Map([[34,34],[40,41],[60,62],[91,93],[123,125],[171,187],[8216,8217],[8220,8221]]),S=new RegExp(`${_}`,"ig"),b=new RegExp(`\\.(?:${u.TLD})`,"i");function T(e){try{return S.exec(e)}catch(t){return __LOG__(4,void 0,new Error,!0)`text size: ${e.length}, error: ${String(t)}`,SEND_LOGS("linkify-regex-error"),null}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return S.lastIndex=0,A(T(e),t,n)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(!e)return null;var r=e[1].length,u=e[0],c=e.index+r,d=e.index,f="_"===e[1];if(f&&d-1&&/\S/.test(e.input[d-1]))return null;if(e[5]){var p=parseInt(e[5].slice(1),10);if("0"===e[5][1]||!(0<p&&p<65536))return null}var h=[g,m,v].find((function(t){return e&&e[t]}))||0;if(h){var _=[],b=e[h];"_"===b.slice(-1)&&"_"===u[c-1]&&(u=u.slice(0,-1),e[h]=b=b.slice(0,-1));for(var T=0,w=0,A=0;A<b.length;A++){var C=b.charCodeAt(A);C===w?0===(w=_.pop()||0)&&(T=A):E.has(C)?(0!==w&&_.push(w),w=E.get(C)):y.has(C)||0===w&&(T=A)}for(;0!==_.length;)_.pop();T!==b.length-1?(u=e.slice(2,h).filter((function(e){return e})).join("")+b.slice(0,T+1),S.lastIndex=c+u.length):u=u.slice(r)}else u=u.slice(r);var O=u,M=e[2],I=Boolean(M&&M.match(l));if(t&&!I)return null;M?M=M.toLowerCase():(M=0===O.toLowerCase().indexOf("irc.")?"irc://":0===O.toLowerCase().indexOf("ftp.")?"ftp://":e[3]?"mailto:":"http://",O=M+O);var k=e[4],P=(0,s.getMaybeMeUser)();return{href:O,url:u,index:c,input:e.input,scheme:M,username:e[3],domain:k,port:e[5],path:e[v],params:e[m],anchor:e[g],isHttp:I,suspiciousCharacters:n&&P?(0,i.findSuspiciousCharacters)(k,(0,a.toJid)(n.user),(0,a.toJid)(P.user),o.default.allLanguages):void 0}}},2977:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;try{n=window.localStorage}catch(e){}var r=n;t.default=r},43906:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.cycleThroughLogLines=w,t.log=t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(319)),u=a(n(34575)),l=a(n(93913)),c=n(12035),d=a(n(96486)),f=a(n(30381)),p=a(n(34263)),h=a(n(51551)),_=a(n(81619)),v=a(n(99797)),m=p.default.LOG_SIZE_WEB;m=p.default.LOG_SIZE_ELECTRON;var g=Date.now(),y="LTSXOo+_*-=.<^!#?".split("");function E(){return y[Math.round(Math.random()*(y.length-1))]}var S=E()+E()+E()+E(),b={};function T(e){switch(e){case b.INFO:case b.LOG:case b.WARN:case b.ERROR:return b[e];default:throw new Error(`Unexpected numeric log level: ${e}`)}}function w(){return A.apply(this,arguments)}function A(){return(A=(0,o.default)(i.default.mark((function e(t,n,r,a){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,n+1,r,a);case 2:return e.next=4,C(0,t,r,a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return O.apply(this,arguments)}function O(){return(O=(0,o.default)(i.default.mark((function e(t,n,r,a){var o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t;case 1:if(!(o<n)){e.next=8;break}return s=Math.min(o+r,n),e.next=5,a(o,s);case 5:o+=r,e.next=1;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b[b.ALL=0]="all",b[b.INFO=1]="info",b[b.LOG=2]="log",b[b.WARN=3]="warn",b[b.ERROR=4]="error",b[b.OFF=5]="off";var M=new(function(){function e(){var t=this;(0,u.default)(this,e),this.logs=[],this.localCursor=0,this.pending=void 0,this.timer=new c.ShiftTimer((function(){return t._persistIdb()})),this.isTakeOver=!1,this.log=(0,_.default)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return function(o){for(var s=arguments.length,u=new Array(s>1?s-1:0),l=1;l<s;l++)u[l-1]=arguments[l];var c=(0,h.default)(o,u,!n);return t.logImpl(e,c,r,a,i),c}}),(function(e,t,n,r,a){return n||a?null:String(e)+String(Boolean(t))+String(Boolean(r))}))}var t,a,y,E;return(0,l.default)(e,[{key:"logImpl",value:function(e,t,n,r,a){var i=(0,f.default)().locale("en").format("YYYY-MM-DD HH:mm:ss.SSS:"),o=n?`\n${(0,v.default)(n,!0)}`:"",u=[T(e),r?"sendlogs":null].concat((0,s.default)(null!=a?a:[])).filter(Boolean).map((function(e){return`[${e}]`})).join(""),l=`${S} ${i}`+(u?`${u} `:"")+t+o;this.logs.push(l),this.isTakeOver||(this.logs.length>m&&(this.logs.shift(),this.localCursor--),this.timer.debounceAndCap(250,1e3))}},{key:"logUncaughtError",value:function(e,t){var n,r=e instanceof Error&&e.stack?e:void 0;if(n=r?String(e):t?`Promise rejected: ${String(e)}`:`Error: ${String(e)}`,this.logImpl(b.ERROR,n,r,!0,["uncaught"]),null!=t){var a=String(t);this.logImpl(b.WARN,a)}}},{key:"onTakeOver",value:function(){this.isTakeOver=!0}},{key:"getLogs",value:function(){var e=this,t=n(63984).default,a=[];return this.pending&&a.push(this.pending),this.timer.isScheduled()&&(this.timer.forceRunNow(),this.pending&&a.push(this.pending)),r.all(a).then((function(){return t.idb()})).then(function(){var e=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,t.logs.orderBy("timestamp").each((function(e){e.log=e.log.slice(0,2500),n.push(e)}));case 3:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()).then((function(e){return d.default.map(e,"log")})).catch((function(){return e.logs}))}},{key:"_clearLogsInBatches",value:(E=(0,o.default)(i.default.mark((function e(){var t,r,a,s,u,l,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(63984).default,r=n(35504),a=r.asyncSleep,e.next=4,t.idb();case 4:return s=e.sent,e.next=7,s.logs.toCollection().last();case 7:return u=e.sent.line,l=this._getCursor(),c=function(){var e=(0,o.default)(i.default.mark((function e(t,n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.transaction("rw",s.logs,(0,o.default)(i.default.mark((function e(){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.logs.where("line").between(t,n).primaryKeys();case 2:return r=e.sent,e.next=5,s.logs.bulkDelete(r);case 5:case"end":return e.stop()}}),e)}))));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),__LOG__(2)`_clearLogsInBatches: error while deleting, ${e.t0.stack}`;case 8:return e.next=10,a(0);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),e.next=12,w(l,u,1e3,c);case 12:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"_clearLogsInDB",value:(y=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(63984).default,e.next=3,t.idb().then((function(e){return e.logs.clear()})).catch((function(){}));case 3:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)})},{key:"clearLogs",value:(a=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._clearLogsInDB();case 2:this._setCursor(0),this.localCursor=0,this.logs=[];case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"clearLogsPreemptive",value:(t=(0,o.default)(i.default.mark((function e(){var t,r,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n(71701),r=t.getShouldPreemptivelyCleanupLogs,a=t.setShouldPreemptivelyCleanupLogs,!r()){e.next=5;break}return e.next=4,this._clearLogsInBatches();case 4:a(!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_optimisticallyAdvanceCursor",value:function(e,t){var n=(e+t)%m;this.localCursor+=t,this._setCursor(n)}},{key:"_persistIdb",value:function(){var e=this,t=n(63984).default,r=this.logs.slice(Math.max(this.localCursor,0),this.logs.length);r.length&&(this.pending=t.idb().then((function(t){return t.transaction("rw",t.logs,t.user,(function(){var n=e._getCursor();e._optimisticallyAdvanceCursor(n,r.length),r.forEach((function(e){n=(n+1)%m,t.logs.put({line:n,log:e,timestamp:performance&&performance.now()+g||Date.now()})}))}))})).catch((function(){})).finally((function(){e.pending=void 0})))}},{key:"_getCursor",value:function(){var e=n(63984).default;try{return JSON.parse(e.permanentStorage.getItem(p.default.KEY_LOG_CURSOR))||Math.max(this.localCursor,0)}catch(e){return Math.max(this.localCursor,0)}}},{key:"_setCursor",value:function(e){return n(63984).default.permanentStorage.setItem(p.default.KEY_LOG_CURSOR,String(e))}}]),e}()),I=M;t.default=I;var k=M.log;t.log=k},65122:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(92827);function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,r,a,o){return i((s=i(i(t,e),i(r,o)))<<(u=a)|s>>>32-u,n);var s,u}function s(e,t,n,r,a,i,s){return o(t&n|~t&r,e,t,a,i,s)}function u(e,t,n,r,a,i,s){return o(t&r|n&~r,e,t,a,i,s)}function l(e,t,n,r,a,i,s){return o(t^n^r,e,t,a,i,s)}function c(e,t,n,r,a,i,s){return o(n^(t|~r),e,t,a,i,s)}function d(e){return function(e,t){var n,r,a,o;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var d=1732584193,f=-271733879,p=-1732584194,h=271733878,_=0;_<e.length;_+=16)n=d,r=f,a=p,o=h,d=s(d,f,p,h,e[_],7,-680876936),h=s(h,d,f,p,e[_+1],12,-389564586),p=s(p,h,d,f,e[_+2],17,606105819),f=s(f,p,h,d,e[_+3],22,-1044525330),d=s(d,f,p,h,e[_+4],7,-176418897),h=s(h,d,f,p,e[_+5],12,1200080426),p=s(p,h,d,f,e[_+6],17,-1473231341),f=s(f,p,h,d,e[_+7],22,-45705983),d=s(d,f,p,h,e[_+8],7,1770035416),h=s(h,d,f,p,e[_+9],12,-1958414417),p=s(p,h,d,f,e[_+10],17,-42063),f=s(f,p,h,d,e[_+11],22,-1990404162),d=s(d,f,p,h,e[_+12],7,1804603682),h=s(h,d,f,p,e[_+13],12,-40341101),p=s(p,h,d,f,e[_+14],17,-1502002290),d=u(d,f=s(f,p,h,d,e[_+15],22,1236535329),p,h,e[_+1],5,-165796510),h=u(h,d,f,p,e[_+6],9,-1069501632),p=u(p,h,d,f,e[_+11],14,643717713),f=u(f,p,h,d,e[_],20,-373897302),d=u(d,f,p,h,e[_+5],5,-701558691),h=u(h,d,f,p,e[_+10],9,38016083),p=u(p,h,d,f,e[_+15],14,-660478335),f=u(f,p,h,d,e[_+4],20,-405537848),d=u(d,f,p,h,e[_+9],5,568446438),h=u(h,d,f,p,e[_+14],9,-1019803690),p=u(p,h,d,f,e[_+3],14,-187363961),f=u(f,p,h,d,e[_+8],20,1163531501),d=u(d,f,p,h,e[_+13],5,-1444681467),h=u(h,d,f,p,e[_+2],9,-51403784),p=u(p,h,d,f,e[_+7],14,1735328473),d=l(d,f=u(f,p,h,d,e[_+12],20,-1926607734),p,h,e[_+5],4,-378558),h=l(h,d,f,p,e[_+8],11,-2022574463),p=l(p,h,d,f,e[_+11],16,1839030562),f=l(f,p,h,d,e[_+14],23,-35309556),d=l(d,f,p,h,e[_+1],4,-1530992060),h=l(h,d,f,p,e[_+4],11,1272893353),p=l(p,h,d,f,e[_+7],16,-155497632),f=l(f,p,h,d,e[_+10],23,-1094730640),d=l(d,f,p,h,e[_+13],4,681279174),h=l(h,d,f,p,e[_],11,-358537222),p=l(p,h,d,f,e[_+3],16,-722521979),f=l(f,p,h,d,e[_+6],23,76029189),d=l(d,f,p,h,e[_+9],4,-640364487),h=l(h,d,f,p,e[_+12],11,-421815835),p=l(p,h,d,f,e[_+15],16,530742520),d=c(d,f=l(f,p,h,d,e[_+2],23,-995338651),p,h,e[_],6,-198630844),h=c(h,d,f,p,e[_+7],10,1126891415),p=c(p,h,d,f,e[_+14],15,-1416354905),f=c(f,p,h,d,e[_+5],21,-57434055),d=c(d,f,p,h,e[_+12],6,1700485571),h=c(h,d,f,p,e[_+3],10,-1894986606),p=c(p,h,d,f,e[_+10],15,-1051523),f=c(f,p,h,d,e[_+1],21,-2054922799),d=c(d,f,p,h,e[_+8],6,1873313359),h=c(h,d,f,p,e[_+15],10,-30611744),p=c(p,h,d,f,e[_+6],15,-1560198380),f=c(f,p,h,d,e[_+13],21,1309151649),d=c(d,f,p,h,e[_+4],6,-145523070),h=c(h,d,f,p,e[_+11],10,-1120210379),p=c(p,h,d,f,e[_+2],15,718787259),f=c(f,p,h,d,e[_+9],21,-343485551),d=i(d,n),f=i(f,r),p=i(p,a),h=i(h,o);return new Uint8Array([255&d,d>>>8&255,d>>>16&255,d>>>24&255,255&f,f>>>8&255,f>>>16&255,f>>>24&255,255&p,p>>>8&255,p>>>16&255,p>>>24&255,255&h,h>>>8&255,h>>>16&255,h>>>24&255])}(function(e){var t,n=[];for(n[(e.length>>2)-1]=0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}(e),8*e.length)}var f=r(n(96486)).default.memoize((function(e){return(0,a.encodeB64)(d(e))}));t.default=f},45878:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genCurrentSessionId=function(){return _.apply(this,arguments)},t.genSessionId=v;var a=r(n(87757)),i=r(n(48926)),o=n(17643),s=n(92827),u=n(48935),l=n(71701),c=r(n(35643)),d=r(n(46005)),f=n(1018),p=r(n(29826)),h=n(47065);function _(){return(_=(0,i.default)(a.default.mark((function e(){var t,n,r,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,h.createSignalAddress)((0,l.getMeUser)()).toString(),e.t0=c.default,e.next=4,f.waSignalStore.getIdentity(t);case 4:return e.t1=e.sent,n=(0,e.t0)(e.t1,"yield waSignalStore.getIdentity(primaryDeviceIdentifier)"),r=(0,u.toCurveKeyPubKey)((0,h.strToBuffer)(n)),e.t2=c.default,e.next=10,d.default.getIdentityKeyPair();case 10:return e.t3=e.sent,i=(0,e.t2)(e.t3,"yield SignalProtocolStore.getIdentityKeyPair()"),o=(0,u.toCurveKeyPubKey)(i.pubKey),e.abrupt("return",v(r,o));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,i.default)(a.default.mark((function e(t,n){var r,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(32===t.byteLength){e.next=2;break}throw new Error(`genSessionId: primary identity public key is ${t.byteLength} bytes, should be 32!`);case 2:if(32===n.byteLength){e.next=4;break}throw new Error(`genSessionId: companion identity public key is ${t.byteLength} bytes, should be 32!`);case 4:return(r=new o.Binary).writeBuffer(t),r.write("_".charCodeAt(0)),r.writeBuffer(n),i=r.readByteArray(),e.next=11,p.default.digest({name:"SHA-256"},i);case 11:return u=e.sent,e.abrupt("return",(0,s.encodeB64)(u));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21813:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STORAGE_QUOTA_UNAVAILABLE=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),u=a(n(93913)),l=a(n(3130)),c=n(45878);t.STORAGE_QUOTA_UNAVAILABLE=-1;var d=new(function(){function e(){(0,s.default)(this,e),this._storageEstimation={mdStorageQuotaBytes:-2,mdStorageQuotaUsedBytes:-2},this._mdSessionId=null}var t,n;return(0,u.default)(e,[{key:"getStorageEstimation",value:(n=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-2===this._storageEstimation.mdStorageQuotaBytes){e.next=2;break}return e.abrupt("return",r.resolve(this._storageEstimation));case 2:return e.next=4,(0,l.default)();case 4:return t=e.sent,this._storageEstimation={mdStorageQuotaBytes:t?t.quota:-1,mdStorageQuotaUsedBytes:t?t.usage:-1},e.abrupt("return",this._storageEstimation);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getMdSessionId",value:(t=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._mdSessionId){e.next=2;break}return e.abrupt("return",this._mdSessionId);case 2:return e.next=4,(0,c.genCurrentSessionId)();case 4:return this._mdSessionId=e.sent,e.abrupt("return",this._mdSessionId);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}());t.default=d},74996:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.checkForMicrophoneAndCameraAccess=function(){return r.all([g("microphone"),g("camera")]).then((function(e){return e.every((function(e){return e}))}))},t.checkForMicrophoneAccess=function(){return g("microphone")},t.prepareForCameraAccessCheck=function(){return y("camera")},t.prepareForMicrophoneAccessCheck=function(){return y("microphone")};var i=a(n(87757)),o=a(n(48926)),s=a(n(67294)),u=a(n(34541)),l=a(n(25960)),c=a(n(5693)),d=a(n(89115)),f=n(88628),p=c.default.require("ElectronApp"),h=window.Native.sysPrefAskForMediaAccess,_=window.Native,v=_.openSysPrefs,m=_.sysPrefGetMediaAccessStatus;function g(e){var t=m(e);return"not-determined"===t||"unknown"===t?p.focus({steal:!0}).then((function(){return function(e){return h(e).catch((function(){return r.resolve(!1)}))}(e).then((function(t){return __LOG__(2)`Media access to ${e} is ${t?"granted":"denied"}`,t||S(e),t}))})):(__LOG__(2)`Media access to ${e} is ${t}`,"denied"===t||"restricted"===t?(p.focus({steal:!0}).then((function(){return S(e)})),r.resolve(!1)):r.resolve(!0))}function y(){return E.apply(this,arguments)}function E(){return(E=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("not-determined"!==(n=m(t))&&"unknown"!==n){e.next=4;break}return e.next=4,p.focus({steal:!0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){"microphone"===e?u.default.openModal(s.default.createElement(l.default,{title:d.default.t(1062),okText:d.default.t(614),onOK:function(){v(f.SysPrefLinksType.PRIVACY_MICROPHONE),u.default.closeModal()},cancelText:d.default.t(1227),onCancel:function(){u.default.closeModal()}},s.default.createElement("div",null,d.default.t(1061)))):u.default.openModal(s.default.createElement(l.default,{title:d.default.t(410),okText:d.default.t(614),onOK:function(){v(f.SysPrefLinksType.PRIVACY_CAMERA),u.default.closeModal()},cancelText:d.default.t(1227),onCancel:function(){u.default.closeModal()}},s.default.createElement("div",null,d.default.t(409))))}},1447:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=n(1838),u=n(98569),l=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,`File (${e.type()}) size = ${e.size()}`)).opaqueData=e,r}return n}((0,s.customError)("MediaFileTooLarge",!0,u.MediaFileError));t.default=l},60996:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaTagErrorReason=v,t.loadImage=m,t.image=function(e){return m(e).then((function(e){return e&&e.naturalWidth>0?{img:e,fullWidth:e.naturalWidth,fullHeight:e.naturalHeight}:r.reject(new u.MediaLoadError("image loaded with zero width"))})).catch((function(){return r.reject(new u.MediaLoadError("unable to render image"))}))},t.loadVideo=g,t.videoWidthHeightDuration=function(e){return g(e,!0).then((function(e){var t=e.video,n=e.fullWidth,r=e.fullHeight,a=e.duration;return E(t),{width:n,height:r,duration:a}}))},t.disposeVideo=E,t.transcode=function(e,t){var n=t||e.type;return n&&n.includes(s.default.MIMETYPE_OGG)&&!p?e.size<=3e5?new d.default(e).generateBlob():r.reject(new u.TranscodeBlobTooLargeError):r.resolve(e)},t.canPlayOgg=void 0;var o=n(53615),s=i(n(34263)),u=a(n(98569)),l=i(n(39461)),c=i(n(8643)),d=i(n(93556)),f=i(n(73358)),p=(new Audio).canPlayType("audio/ogg");t.canPlayOgg=p;var h=0,_=r.resolve();function v(e){if(!e||!e.error)return null;var t=e.error,n=Object.keys(l.default).find((function(e){return l.default[e]===t.code}));n=n||`UNKNOWN CODE ${t.code}`;var r=t.message&&~t.message.indexOf(":")?t.message.split(":")[0]:"";return r?`${n}: ${r}`:n}function m(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new r((function(r,a){t=new Image;var i=/^(?:data|blob):/.test(e);n&&!i&&t.setAttribute("crossOrigin","anonymous"),t.onload=r,t.onabort=function(){a(new Error("loadImage onabort"))},t.onerror=function(){a(new u.InvalidImageFileType("Image tag load error"))},t.src=e})).then((function(){return t}))}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=_.then((function(){return y(e,t)}));return _=n.timeout(1e3).then((function(){}),(function(){})),n}function y(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new c.default.WebcMediaLoad,s=null,l=++h;function d(){t&&s&&(document.body&&document.body.removeChild(s),s=null)}var p=new r((function(r,i){__LOG__(2)`MediaLoad:video called (#${l}). Should wait for a first frame: ${a}`;var o=!1,c=!1;if((t=document.createElement("video")).volume=0,t.muted=!0,t.playsinline=!0,t.onloadedmetadata=function(){__LOG__(2)`MediaLoad:video.onloadedmetadata #${l}. Video ready: ${c}. Video width: ${t.videoWidth}`,o=!0,!c&&a||r()},t.onloadeddata=function(){__LOG__(2)`MediaLoad:video.onloadeddata #${l}`},t.onprogress=function(){__LOG__(2)`MediaLoad:video.onprogress #${l}`},t.oncanplay=function(){__LOG__(2)`MediaLoad:video.oncanplay #${l}. Metadata loaded: ${o}. Video width: ${t.videoWidth}`,c=!0,o&&a&&r()},t.onerror=function(){var n=t.error?t.error.message:"no error message";__LOG__(3)`MediaLoad:video.onerror #${l}: ${String(n)}\n Blob info -> size:${e.size}, type: ${e.type}`;var r=v(t);i(new u.UnableToPlayVideoError(r))},t.src=n=window.URL.createObjectURL(e),f.default.isSafari||f.default.isBuggyVideoLoad){var d=s=document.createElement("div");d.style="opacity: 0.004",d.appendChild(t),document.body&&document.body.appendChild(d)}t.load()}));setTimeout((function(){d(),p.isPending()&&(__LOG__(3)`unable to load video #${l} (${e.size} bytes)`,new c.default.WebcMediaLoad({webcMediaLoadResult:c.default.WEBC_MEDIA_LOAD_RESULT_CODE.SILENCE}).commit())}),8e3);var _=p.then((function(){return(0,o.delayMs)(10)})).then((function(){if(i.markWebcMediaLoadT(),__LOG__(2)`MediaLoad:video #${l} successful`,t.pause(),t.videoWidth>0)return i.webcMediaLoadResult=c.default.WEBC_MEDIA_LOAD_RESULT_CODE.SUCCESS,i.commit(),{video:t,fullWidth:t.videoWidth,fullHeight:t.videoHeight,duration:t.duration};throw t.duration>0?(__LOG__(3)`MediaLoad:video #${l} dimensions are not defined. Video readyState: ${t.readyState}. Video width: ${t.videoWidth}`,new u.MediaUnsupportedError("video loaded with duration but no dims")):(i.webcMediaLoadResult=c.default.WEBC_MEDIA_LOAD_RESULT_CODE.ZEROWIDTH,i.commit(),new u.MediaLoadError("video loaded with zero width"))})).finally((function(){d(),t&&(t.onloadedmetadata=null,t.onloadeddata=null,t.onplay=null,t.onerror=null),n&&window.URL.revokeObjectURL(n)}));return _.catch((function(){E(t)})),_}function E(e){try{e.pause(),e.src="",e.load()}catch(e){__LOG__(4,void 0,new Error,!0)`Error: ${String(e)}`,SEND_LOGS("dispose-video-error")}}},98529:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){l.default.memoize.Cache=d},t.clearAllMemoizeCache=function(){c.forEach((function(e){return e.clear()}))},t.MemoizeCache=void 0;var a=r(n(34575)),i=r(n(81506)),o=r(n(2205)),s=r(n(99842)),u=r(n(65957)),l=r(n(96486)),c=[],d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;return(0,a.default)(this,n),e=t.call(this),c.push((0,i.default)(e)),e}return n}((0,u.default)(Map));t.MemoizeCache=d},81619:(e,t)=>{"use strict";function n(e,t){var r=function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=t?t.apply(this,a):a[0];if(!o)return e.apply(this,a);var s=r.cache;if(s.has(o))return s.get(o);var u=e.apply(this,a);return r.cache=s.set(o,u)||s,u};return r.cache=new(n.Cache||Map),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n.Cache=Map;var r=n;t.default=r},73666:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default,n=null,r=function(r){return null!=n&&t(n.params,r)?n.params=r:n={params:r,result:e.call(this,r)},n.result};return r.clear=function(){n=null},r};var a=r(n(96774))},5315:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(71701),s=r(n(22021)),u=r(n(61722)),l=r(n(12717)),c=n(75793),d=function(){function e(t){(0,a.default)(this,e);var n=t;if(!n)throw new Error("MsgKey error: obj is null/undefined");n.id instanceof e&&(n=n.id,__LOG__(3)`MsgKey error: id is already a MsgKey`);var r,i,u,c,d,f,p,h=n.from&&n.to&&n.id,_=void 0!==n.fromMe&&n.remote&&n.id,v=(0,o.getMaybeMeUser)();if(!v)throw new Error("MsgKey error: me is undefined");if(h&&_)throw __LOG__(3)`Unclear constructor MsgKey: ${JSON.stringify(n)}`,new Error("MsgKey error: unclear which constructor to use");if(!h&&!_)throw __LOG__(3)`No matching constructor MsgKey: ${JSON.stringify(n)}`,new Error("MsgKey error: don't have a matching constructor");if(h){var m=n;if(r=m.from,i=m.to,u=m.id,c=m.participant,d=m.selfDir,!(r instanceof l.default)||!(i instanceof l.default)||c&&!(c instanceof l.default))throw __LOG__(3)`Incorrect Wid MsgKey: from:${String(r)} to:${String(i)} p:${String(c)}`,new Error("MsgKey error: something is not a wid");d=l.default.equals(r,i)?d:void 0,l.default.equals(r,i)&&l.default.equals(r,v)?(f="out"===d,p=v):l.default.equals(r,v)?(f=!0,p=i):l.default.equals(i,v)?(f=!1,p=r):l.default.equals(r,i)&&(l.default.isGroup(r)||l.default.isBroadcast(r))?(f=!0,p=r):__LOG__(3)`MsgKey case error: ${[r,i,u,v].join()}`,void 0!==f&&(this.fromMe=f),p&&(this.remote=p),u&&(this.id=u)}else if(_){var g=n;if(f=g.fromMe,p=g.remote,u=g.id,c=g.participant,!(p instanceof l.default)||c&&!(c instanceof l.default))throw __LOG__(3)`Incorrect Wid MsgKey: remote:${String(p)} p:${String(c)}`,new Error("MsgKey error: something is not a wid");l.default.equals(v,p)&&(d=f?"out":"in"),void 0!==f&&(this.fromMe=f),p&&(this.remote=p),u&&(this.id=u)}var y=[this.fromMe,this.remote,this.id];void 0!==d&&(this.self=d,y.push(this.self)),s.default.supportsAnyFeature(s.default.F.KEY_PARTICIPANT,s.default.F.MD_BACKEND)&&void 0!==c&&(this.participant=c,y.push(this.participant)),this._serialized=y.join("_")}return(0,i.default)(e,[{key:"toString",value:function(){return this._serialized}},{key:"clone",value:function(){return new e({fromMe:this.fromMe,remote:this.remote,id:this.id,participant:this.participant})}},{key:"equals",value:function(t){return t instanceof e&&this.toString()===t.toString()}}],[{key:"fromString",value:function(t){var n=(0,u.default)(t),r=n.fromMe,a=n.remote,i=n.id,o=n.participant;return new e({fromMe:r,remote:(0,c.createWid)(a),id:i,participant:o?(0,c.createWid)(o):void 0})}}]),e}();t.default=d},61722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||!(0,r.isString)(e))throw new Error("MsgKey fromString error: str is null or not a string");var t=e.split("_"),n=void 0;t.length<3?__LOG__(3)`MsgKey error: cannot create MsgKey from ${e}`:4===t.length?"out"!==t[3]&&"in"!==t[3]&&(n=t[3]):5===t.length&&(n=t[4]);return{fromMe:"true"===t[0],remote:t[1],id:t[2],participant:n}};var r=n(88828)},67890:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(34575)),l=i(n(93913)),c=i(n(2205)),d=i(n(99842)),f=a(n(56727)),p=i(n(34263)),h=i(n(63602)),_=i(n(92882)),v=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).online=(0,f.session)(!0),e.waitIfOffline=(0,_.default)((function(){return"all"}),(0,s.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.online){e.next=2;break}return e.abrupt("return");case 2:return __LOG__(2)`waitIfOffline: Waiting...`,e.next=5,new r((function(e){t.listenToOnce(t,"change:online",(function(){__LOG__(2)`waitIfOffline: Continuing...`,e()}))}));case 5:case"end":return e.stop()}}),e,this)})))),e.checkOnline=(0,_.default)((function(){return"all"}),(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return __LOG__(2)`NetworkStatus:checkOnline checking`,e.prev=1,e.next=4,(0,h.default)(p.default.STATUS_URL);case 4:t=e.sent,this.online=!!t,__LOG__(2)`NetworkStatus:checkOnline response ${String(this.online)}`,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),__LOG__(3)`NetworkStatus:checkOnline errored! ${String(e.t0)}`;case 12:case"end":return e.stop()}}),e,this,[[1,9]])})))),e}return(0,l.default)(n,[{key:"initialize",value:function(){this.listenTo(this,"change:online",this._logOnlineOffline),this._logOnlineOffline()}},{key:"_logOnlineOffline",value:function(){var e=this.online;__LOG__(2)`NetworkStatus ${e?"online":"offline"}`}}]),n}(f.default),m=new((0,f.defineModel)(v));t.default=m},39077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEffectiveNetworkType=function(){return navigator.connection&&"string"==typeof navigator.connection.effectiveType?navigator.connection.effectiveType:null}},99797:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.name,r=e.message,i=e.stack,o=i.indexOf("\n"),s=i.slice(0,o),u=s.match(new RegExp(`(${a.default.escapeRegExp(n)}|Error)(:|$)`));if(null!=u){if(!t)return i;var l=u.index+u[0].length,c=null==r?-1:i.indexOf(r,l),d=null==r||-1===c?-1:c+r.length,f=Math.max(0,o,l,d);return i.slice(f).replace(/^\n+/,"")}return t?i:r?`${n}: ${r}\n${i}`:`${n}\n${i}`};var a=r(n(96486))},1119:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setTitleAndIcon=function(e){var t;"darwin"===process.platform?t=s:"win32"===process.platform&&(t=u);if(!t)return;t(-1===e?"!":0===e?"":e<100?`${e}`:"99")};var a=r(n(5693)),i=n(88828),o=a.default.require("BadgeSetter");function s(e){o.setBadge(e)}function u(e){if(!(0,i.isString)(e))throw new Error("Invalid win taskbar icon input: "+e);if(0!==e.length){if(e.length>2)throw new Error("Invalid win taskbar icon length: "+e.length);var t=document.createElement("canvas");t.height=140,t.width=140;var n=t.getContext("2d");if(!n)throw new Error("Failed to get canvas context");n.fillStyle="red",n.beginPath(),n.ellipse(70,70,70,70,0,0,2*Math.PI),n.fill(),n.textAlign="center",n.fillStyle="white",1===e.length?(n.font="125px Arial",n.fillText(e,70,112)):2===e.length&&(n.font="100px Arial",n.fillText(e,70,105)),o.setBadge(e,t.toDataURL())}else o.setBadge(e)}},35643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";if(null==e)throw new Error(`Unexpected null or undefined: ${t}`);return e}},64032:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.omitBy(e,i)};var a=r(n(96486)),i=function(e){return null==e}},83620:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n,r=function(){if(t===n){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t=e.call.apply(e,[this].concat(a))}return t};return r.reset=function(){t=n},r};var n={}},15933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openSocket=function(e){return new WebSocket(e)}},93556:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(34575)),s=a(n(93913)),u=n(17643),l=n(19059),c=a(n(59941)),d="audio/wav",f=0;function p(){return f++,i||new window.AudioContext}function h(){0===--f&&i&&(i.close&&i.close(),i=void 0)}var _=function(){function e(t){(0,o.default)(this,e),this.oggBlob=t}return(0,s.default)(e,[{key:"generateBlob",value:function(){return this.oggBlobToWAVBlob(this.oggBlob,1)}},{key:"oggBlobToWAVBlob",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=n;return new r((function(n){var r=new c.default,i=[],o=[],s=p(),u={outputBufferSampleRate:s.sampleRate,bufferLength:4096};r.onmessage=function(e){if(null==e.data){for(var r=function(e){i.forEach((function(t){for(var n=t[e]||t[0],r=0;r<n.length;r++)o.push(n[r])}))},u=0;u<a;u++)r(u);var l=t.encodeWAV(o,s,a),c=new Blob([l.readByteArray()],{type:d});h(),n(c)}else i.push(e.data),a=i[0].length},r.postMessage({command:"decode-init",config:u}),(0,l.blobToArrayBuffer)(e).then((function(e){r.postMessage({command:"decode",pages:new Uint8Array(e)}),r.postMessage({command:"decode-done"})})).catch((function(e){__LOG__(3)`Player::oggBlobToWAVBlob error: ${e}`}))}))}},{key:"encodeWAV",value:function(e,t,n){var r=new u.Binary(void 0,!0);r.ensureCapacity(44+2*e.length),r.writeString("RIFF"),r.writeUint32(36+2*e.length),r.writeString("WAVE"),r.writeString("fmt "),r.writeUint32(16),r.writeUint16(1),r.writeUint16(n),r.writeUint32(t.sampleRate),r.writeUint32(t.sampleRate*n*2),r.writeUint16(2*n),r.writeUint16(16),r.writeString("data"),r.writeUint32(2*e.length);for(var a=0;a<e.length;a++){var i=Math.max(-1,Math.min(e[a],1));i*=i>0?32767:32768,r.writeInt16(Math.floor(i))}return r}}]),e}();t.default=_},80884:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(87757)),s=i(n(48926)),u=i(n(34575)),l=i(n(93913)),c=n(53615),d=n(80835),f=n(46154),p=i(n(44053)),h=i(n(34263)),_=a(n(93783)),v=i(n(74984)),m=i(n(63056)),g=a(n(59502));var y=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,null,[{key:"fileToPdf",value:function(e){var t=URL.createObjectURL(e);return(0,d.promiseLoop)((function(e,t,r){var a=(0,c.delayMs)(g.expBackoff(r,12e4,0,0)),i=process.versions.nw;return process.versions.nw="1.0.0",n.e(8192).then(n.t.bind(n,99299,23)).then((function(t){process.versions.nw=i,t.GlobalWorkerOptions.workerSrc=p.default,e(t.default)})).catch((function(){return a}))})).then((function(e){return e.getDocument(t).promise}))}},{key:"releasePdf",value:function(e){return e.destroy()}},{key:"pdfToImg",value:function(e,t){var n=document.createElement("canvas");return e.getPage(t).then((function(e){var t=e.getViewport({scale:1}),r=n.getContext("2d");return n.height=t.height,n.width=t.width,e.render({canvasContext:r,viewport:t}).promise})).then((function(){return(0,f.promiseProps)({blob:_.canvasToBlob(n),thumbnail:_.rotateAndResize(n,h.default.DOC_THUMB_MAX_EDGE,_.DATA_URL|_.CANVAS|_.BLOB),microThumbnail:m.default.webUploadDocumentThumbMmsEnabled?_.generateMicroThumb(n,1300,{mimetype:"image/jpeg",maxAttempts:10}):r.resolve(null)})})).then((function(e){return e})).then(function(){var t=(0,s.default)(o.default.mark((function t(n){var r,a,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.blob,a=n.thumbnail,i=n.microThumbnail,t.t0=URL.createObjectURL(r),t.t1=a.images.dataUrl,t.t2=a.images.canvas.width,t.t3=a.images.canvas.height,t.next=7,v.default.createFromData(a.images.blob,"image/jpeg");case 7:return t.t4=t.sent,t.t5={width:a.images.canvas.width,height:a.images.canvas.height},t.t6=e.numPages,t.t7=i,t.abrupt("return",{url:t.t0,thumbUrl:t.t1,width:t.t2,height:t.t3,fullPreviewData:t.t4,fullPreviewSize:t.t5,pdfPages:t.t6,microThumbnail:t.t7});case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())}}]),e}();t.default=y},95200:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startMeasure=function(e){return n;if(!r)return n;var t=(a.get(e)||0)+1;a.set(e,t);var o=i(1===t?e:`${e} (${t})`),s=`${o}: Start`,u=`${o}: End`;performance.mark(s);var l=!1;return{end:function(){if(!l){l=!0;var t=a.get(e)||0;t>1?a.set(e,t-1):a.delete(e),performance.mark(u),performance.measure(o,s,u)}}}},t.formatMeasureLabel=i;var n={end:function(){}},r=performance&&performance.mark&&performance.measure,a=new Map;function i(e){return`💬 ${e}`}},45975:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.phashV1=function(e){for(var t=e.map((function(e){return(0,o.toUserWid)(e).toString({legacy:!0})})).sort().join(""),n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));var s=new Uint8Array(n);return i.default.digest({name:"SHA-1"},s).then((function(e){return`1:${(0,a.encodeB64)(e.slice(0,6))}`}))},t.phashV2=function(e){for(var t=e.map((function(e){return e.toString({legacy:!0,formatFull:!0})})).sort().join(""),n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));var o=new Uint8Array(n);return i.default.digest({name:"SHA-256"},o).then((function(e){return`2:${(0,a.encodeB64)(e.slice(0,6))}`}))};var a=n(92827),i=r(n(29826)),o=n(75793)},35340:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(47061)),s=r(n(61923)),u="AbortController"in self?AbortController:function(){function e(){(0,a.default)(this,e),this.signal=new o.default}return(0,i.default)(e,[{key:"abort",value:function(){var e=new s.default("abort");this.signal.dispatchEvent(e)}}]),e}();t.default=u},47061:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(29754)),u=r(n(2205)),l=r(n(99842)),c=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).aborted=!1,e}return(0,i.default)(n,[{key:"dispatchEvent",value:function(e){return"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),(0,o.default)((0,s.default)(n.prototype),"dispatchEvent",this).call(this,e)}},{key:"toString",value:function(){return"[object AbortSignal]"}}]),n}(r(n(89345)).default);t.default=c},79245:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(25241),a="DomException"in window?DOMException:r.DOMException;t.default=a},61923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Event;t.default=n},89345:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(28681)),s=function(){function e(){(0,a.default)(this,e),this._emitter=new o.default}return(0,i.default)(e,[{key:"addEventListener",value:function(e,t){this._emitter.on(e,t,this)}},{key:"removeEventListener",value:function(e,t){this._emitter.off(e,t,this)}},{key:"dispatchEvent",value:function(e){return this._emitter.trigger(e.type),!0}}]),e}();t.default=s},88430:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(81109)),i=n(68024),o=function(){},s="fetch"in window?fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.sharedFetch)(e,(0,a.default)((0,a.default)({},t),{},{onProgress:o}))};t.default=s},8787:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=r(n(63038)),o=r(n(34575)),s=r(n(93913)),u=r(n(86557)),l=r(n(85294)),c=r(n(96906)),d=r(n(86407)),f="Headers"in window&&Headers?Headers:(a=d.default.iterator,function(){function e(t){var n=this;if((0,o.default)(this,e),this._headers={},t instanceof e)(0,l.default)(t.entries(),(function(e){var t=(0,i.default)(e,2),r=t[0];t[1].split(", ").forEach((function(e){n.append(r,e)}))}));else if("object"==typeof t){var r=function(e){t[e].split(", ").forEach((function(t){n.append(e,t)}))};for(var a in t)r(a)}}return(0,s.default)(e,[{key:"append",value:function(e,t){var n=e.toLowerCase();n in this._headers?this._headers[n].push(t):this._headers[n]=[t]}},{key:"delete",value:function(e){var t=e.toLowerCase();delete this._headers[t]}},{key:"entries",value:function(){var e=this,t=Object.keys(this._headers).map((function(t){return[t,e.get(t)||""]}));return new u.default(t)}},{key:"get",value:function(e){var t=e.toLowerCase();return t in this._headers?this._headers[t].join(", "):null}},{key:"has",value:function(e){return e.toLowerCase()in this._headers}},{key:"keys",value:function(){return(0,c.default)(this.entries(),(function(e){return(0,i.default)(e,1)[0]}))}},{key:"set",value:function(e,t){var n=e.toLowerCase();this._headers[n]=[t]}},{key:"values",value:function(){return(0,c.default)(this.entries(),(function(e){var t=(0,i.default)(e,2);t[0];return t[1]}))}},{key:a,value:function(){return this.entries()}},{key:"toString",value:function(){return"[Object Headers]"}}]),e}());t.default=f},94638:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelIdleCallback=t.requestIdleCallback=void 0;var n=window.requestIdleCallback,r=window.cancelIdleCallback,a="requestIdleCallback"in window?n:function(e){return setTimeout((function(){var t=Date.now();e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)};t.requestIdleCallback=a;var i="cancelIdleCallback"in window?r:function(e){clearTimeout(e)};t.cancelIdleCallback=i},39461:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=window.MediaError||{MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4};t.default=n},29826:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=self.crypto,r=n&&(n.subtle||n.webkitSubtle||n.subtle);t.default=r},86407:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i,o=r(n(34575)),s="Symbol"in window?Symbol:(i=a=function e(){(0,o.default)(this,e)},a.iterator="@@iterator",i);t.default=s},20997:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(35449);var r=URLSearchParams;t.default=r},89767:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCtwaContextSend=function(e,t){if(t)return(0,i.default)({},t);if(e&&e.sourceUrl){var n=e.sourceUrl;if(null==n||""===n)return;var r=u.findLink(e.sourceUrl,!1,(0,s.getMaybeMeUser)());return{sourceUrl:n,sourceType:"",sourceId:"",mediaType:o.ExternalAdReplyInfoMediaType.NONE,isSuspiciousLink:!!(r&&r.suspiciousCharacters&&r.suspiciousCharacters.size>0)}}return};var i=a(n(81109)),o=n(676),s=n(71701),u=r(n(46515))},75806:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDistribution=function(){return"prod","darwin_prod"},t.getLogUserAgent=function(e){var t=e.appVersion,r=(e.browser,e.device),a=void 0,i=n(73598).default;a=i.isDataReady()?`Web/${i.getOSPlatform()} ${i.getOSRelease()}`:"Web/Electron "+String(process.versions.electron);return`WhatsApp/${t} ${a} Device/${r}`}},2277:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ABORT_ERROR=t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return n}((0,n(1838).customError)("AbortError"));t.default=s;t.ABORT_ERROR="AbortError"},41522:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return(0,i.default)(e,(function(r){if(r.signal.aborted)throw new a.default;var i=e(r);return t.get(i,r).then((function(e){if(r.signal.aborted)throw new a.default;return null!=e?e:n(r).then((function(e){if(r.signal.aborted)throw new a.default;return t.set(i,e,r).then((function(){return e}))}))}))}))};var a=r(n(2277)),i=r(n(92882))},61821:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)((0,i.default)({},u),e),a=n.signal,l=n.timeoutIterator,c=n.timeoutIncludesTaskDuration;return(0,o.default)((function(e){var n=e.retry,a=e.failCount;return new r((function(e,i){var o=Date.now();try{t((function(e){return r.reject(new s.default(e))}),a).then(e).catch(u)}catch(e){return void u(e)}function u(e){if(e instanceof s.default){var t=l.next();if(t.done)i(e.source);else{var r=Date.now()-o,a=c?Math.max(t.value-r,0):t.value;n(a)}}else i(e)}}))}),a)},t.defaults=void 0;var i=a(n(81109)),o=a(n(10440)),s=a(n(24404)),u=Object.freeze({timeoutIncludesTaskDuration:!0});t.defaults=u},96696:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return d.apply(this,arguments)};var i=a(n(87757)),o=a(n(81109)),s=a(n(48926)),u=a(n(24404)),l=a(n(98908)),c={retries:1/0};function d(){return(d=(0,s.default)(i.default.mark((function e(t,n){var a,s,d,f,p,h,_,v,m,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,o.default)((0,o.default)({},c),t),s=a.delay,d=a.signal,f=a.retries,p=0,h=Date.now(),_=null,v=function(e){return r.reject(new u.default(e))},e.prev=5,h=Date.now(),e.next=9,n(v,p,d);case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(5),p++,e.t0 instanceof u.default){e.next=17;break}throw e.t0;case 17:_=e.t0;case 18:if(!(p<=f)){e.next=38;break}return m=Date.now()-h,g=s({iterationCount:p,taskDuration:m}),e.next=23,(0,l.default)(g,d);case 23:return e.prev=23,h=Date.now(),e.next=27,n(v,p,d);case 27:return e.abrupt("return",e.sent);case 30:if(e.prev=30,e.t1=e.catch(23),p++,e.t1 instanceof u.default){e.next=35;break}throw e.t1;case 35:_=e.t1;case 36:e.next=18;break;case 38:if(_){e.next=40;break}throw new Error("assert: backoff completed without error or result");case 40:throw _.source;case 42:case"end":return e.stop()}}),e,null,[[5,12],[23,30]])})))).apply(this,arguments)}},31688:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEnqueue=function(){var e={};return function(t,n){return function r(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=(n||function(){return String(arguments.length<=0?void 0:arguments[0])}).apply(void 0,i);if(e[s]){var u=e[s].then((function(){return delete e[s],r.apply(void 0,i)}));return e[s]=u,u}var l=t.apply(this,i).then((function(t){return e[s]===l&&delete e[s],t}));return e[s]=l,l}}}},14534:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)((0,o.default)({},l),e),r=n.signal,a=n.timeoutIncludesTaskDuration,c=(0,i.default)(n,["signal","timeoutIncludesTaskDuration"]),d=new u.default(c);return(0,s.default)({signal:r,timeoutIterator:d,timeoutIncludesTaskDuration:a},t)};var i=a(n(6479)),o=a(n(81109)),s=r(n(61821)),u=r(n(52868)),l=(0,o.default)((0,o.default)({},u.defaults),s.defaults)},92882:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=new Map;return function(a){if(a.signal.aborted)return r.reject(new s.default);var c=e.call(this,a),d=n.get(c);if(null==d||d.aggregator.signal.aborted){var f=new l.default,p=(0,i.default)((0,i.default)({},a),{},{signal:f.signal});d={aggregator:f,promise:t.call(this,p).finally((function(){f.dispose(),n.delete(c)}))},n.set(c,d)}var h=a.signal||(new o.default).signal;return d.aggregator.add(h),(0,u.default)(d.promise,h)}};var i=a(n(81109)),o=a(n(35340)),s=a(n(2277)),u=a(n(69673)),l=a(n(43548))},69673:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==t)return e;var n,a=t.aborted?r.reject(new i.default):new r((function(e,r){var a=function(){r(new i.default)};t.addEventListener("abort",a),n=function(){t.removeEventListener("abort",a)}}));return r.race([a,e]).finally((function(){var e;null===(e=n)||void 0===e||e(),n=null}))};var i=a(n(2277))},36737:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=new i.default;if(e.some((function(e){return e.aborted})))r.abort();else{n=function(){var t,r=(0,a.default)(e);try{for(r.s();!(t=r.n()).done;){t.value.removeEventListener("abort",s)}}catch(e){r.e(e)}finally{r.f()}n=null};var o,s=function(){var e;null===(e=n)||void 0===e||e(),r.abort()},u=(0,a.default)(e);try{for(u.s();!(o=u.n()).done;){o.value.addEventListener("abort",s)}}catch(e){u.e(e)}finally{u.f()}}return t(r.signal).finally((function(){var e;null===(e=n)||void 0===e||e()}))};var a=r(n(43269)),i=r(n(35340))},10440:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new r((function(n,a){var o,s=0,u=!1;if(t){var l=function(){t.removeEventListener("abort",l),u=!0,null!=o&&clearTimeout(o),a(new i.default)};if(t.aborted)return void l();t.addEventListener("abort",l)}!function t(){var i=!1,l=!1;o=null;try{var c=e({retry:function(e){if(!u&&!l){if(i=!0,s++,null==e)return t();o=setTimeout(t,e)}},failCount:s});if(!(c instanceof r))throw new TypeError("task must return a promise");c.then((function(e){u||i||(l=!0,n(e))})).catch((function(e){u||i||(l=!0,a(e))}))}catch(e){if(u||i)return;a(e)}}()}))};var i=a(n(2277))},24404:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(99842)),s=function(e){(0,i.default)(n,e);var t=(0,o.default)(n);function n(e){var r;return(0,a.default)(this,n),(r=t.call(this,"see error at this.source")).source=e,r}return n}((0,n(1838).customError)("RetryableError"));t.default=s},43548:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(43269)),i=r(n(319)),o=r(n(34575)),s=r(n(93913)),u=r(n(35340)),l=function(){function e(){var t=this;(0,o.default)(this,e),this._disposed=!1,this._controller=new u.default,this._signals=new Set,this.signal=this._controller.signal,this._handleAbort=function(e){t.delete(e.currentTarget),t._checkAborted()}}return(0,s.default)(e,[{key:"add",value:function(){this._throwIfDisposed();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];i.aborted||(i.addEventListener("abort",this._handleAbort),this._signals.add(i))}this._checkAborted()}},{key:"_checkAborted",value:function(){this._disposed||(0,i.default)(this._signals).every((function(e){return e.aborted}))&&(this.dispose(),this._controller.abort())}},{key:"delete",value:function(){this._throwIfDisposed(),this._delete.apply(this,arguments)}},{key:"_delete",value:function(){for(var e=!1,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];this._signals.delete(o)&&(e=!0,o.removeEventListener("abort",this._handleAbort))}e&&this._checkAborted()}},{key:"_throwIfDisposed",value:function(){if(this._disposed)throw new Error("Attempt to modify disposed SignalAggregator")}},{key:"dispose",value:function(){if(!this._disposed){this._disposed=!0;var e,t=(0,a.default)(this._signals);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._delete(n)}}catch(e){t.e(e)}finally{t.f()}}}}]),e}();t.default=l},98908:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2277)),o=function(e,t){return new r((function(n,r){if(t&&t.aborted)throw new i.default;var a=setTimeout((function(){t&&t.removeEventListener("abort",o),n()}),e);function o(){t&&t.removeEventListener("abort",o),clearTimeout(a),r(new i.default)}t&&t.addEventListener("abort",o)}))};t.default=o},16112:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.catchType(r.CancellationError,(function(){})).catch((function(t){e.cancel(t)})),t}},7670:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318),i=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new r((function(e){function t(){e(!1)}if(self.requestFileSystem)self.requestFileSystem(window.TEMPORARY,1,t,(function(t){e("SecurityError"===t.name)}));else if(s.default){var n=s.default.open("pb_detect");n?(n.onsuccess=t,n.onerror=function(t){t.preventDefault(),window.InvalidStateError?e(t instanceof window.InvalidStateError):e(!0)}):t()}else l.default.isTrident?e(!0):t()})).then((function(e){if(e)return e;if(!u.default)return!1;try{return u.default.setItem("INCOG","0"),u.default.removeItem("INCOG"),!1}catch(e){return"QuotaExceededError"===e.name||r.reject(e)}})).timeout(100,"detectIncognitoTimeout").catchType(r.TimeoutError,(function(){return!1})).catch((function(e){return __LOG__(3)`promiseUtil:determineIncognito failed check: ${String(e)}`,o.upload({reason:"incog-throw"}),!1}))};var o=i(n(70371)),s=a(n(37410)),u=a(n(2977)),l=a(n(73358))},63602:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=new XMLHttpRequest;return new r((function(r){function o(){r(i.status&&i.status<12e3?i:null)}a&&(i.responseType=a),i.onload=o,i.onreadystatechange=function(){4===i.readyState?o():0===i.readyState&&r(null)},i.onerror=function(){return r(null)},i.ontimeout=function(){return r(null)},i.open(t,e,!0),n?i.send(n):i.send()})).addRawControl("cancel",(function(e,t){i.abort(),t(new r.CancellationError("Aborted XHR"))}),!0).endWithControls("cancel")}},96801:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"attachWatcher",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getResponseIfOnline",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"waitForOfflineNaive",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"waitForEvent",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"waitForBBEvent",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"determineIncognito",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"waitForSkip",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"waitForMain",{enumerable:!0,get:function(){return d.default}});var a=r(n(16112)),i=r(n(63602)),o=r(n(27744)),s=r(n(39873)),u=r(n(61110)),l=r(n(7670)),c=r(n(94333)),d=r(n(16921))},61110:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a,i=n;return new r((function(n){a=i?function(){i.apply(this,arguments)&&n(arguments)}:function(){n(arguments)},e.on(t,a)})).cancellable().finally((function(){e.off(t,a)}))}},39873:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a,i=n;return new r((function(n){a=i?function(){i.apply(this,arguments)&&n.apply(this,arguments)}:n,e&&e.addEventListener&&e.addEventListener(t,a)})).cancellable().finally((function(){e&&e.removeEventListener&&e.removeEventListener(t,a)}))}},16921:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.isMainLoaded?r.resolve():(0,o.default)(i.default,"main_loaded")};var i=a(n(34541)),o=a(n(61110))},27744:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,a.default)(window,"offline")};var a=r(n(39873))},94333:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t;return new r((function(n){!function r(){t&&t+1e4<Date.now()?n(!0):(t=Date.now(),e=setTimeout(r,1e3))}()})).cancellable().finally((function(){clearTimeout(e)}))}},99867:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);t.Z=function(){return l.apply(this,arguments)};var i=a(n(87757)),o=a(n(48926)),s=a(n(86128)),u=a(n(34263));function l(){return(l=(0,o.default)(i.default.mark((function e(){var t,n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.keys(u.default.WEB_IDB_DB_NAMES).map((function(e){return u.default.WEB_IDB_DB_NAMES[e]})),n=!1,a=t.map((function(e){return"__dbnames"===e||"sw"===e?r.resolve():r.resolve(s.default.delete(e)).timeout(7e3).then((function(){})).catch((function(){n=!0}))})),e.next=5,r.all(a);case 5:return e.abrupt("return",r.resolve(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},75554:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new Uint8Array(8);self.crypto.getRandomValues(e);for(var t=new Array(16),r=0,a=0;r<e.length;r++,a+=2){var i=e[r];t[a]=n[i>>4],t[a+1]=n[15&i]}return"3EB0"+String.fromCharCode.apply(String,t)},t.randomId=function(){var e=new Uint8Array(16);self.crypto.getRandomValues(e);for(var t=new Array(32),r=0,a=0;r<e.length;r++,a+=2){var i=e[r];t[a]=n[i>>4],t[a+1]=n[15&i]}return String.fromCharCode.apply(String,t)};var n=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70]},6852:(e,t,n)=>{"use strict";var r=n(95318);t.Z=function(){if(s(i.default.REQUIRED_BROWSER_APIS))return!0;return(0,a.promiseProps)({cryptoSha256:o.default.supportsHmacSha256(),cryptoAesCbc:o.default.supportsAesCbc()}).then(s),!1};var a=n(46154),i=r(n(34263)),o=r(n(33827));function s(e){var t=[];for(var n in e)e[n]||t.push(n);if(t.length>0){var r=`${i.default.CAPABILITY_URL}?missing=${t.join(",")}`;return window.location.replace?window.location.replace(r):window.location.href=r,!0}return!1}},14253:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.refreshNoiseCredentials=function(){var e=(0,f.keyPair)(),t=new Uint8Array(24);return self.crypto.getRandomValues(t),r.resolve(p.waNoiseInfo.set({recoveryToken:t.buffer,staticKeyPair:e}))},t.refreshSignalCredentials=function(){var e=window.libsignal.KeyHelper.generateRegistrationId();return m.waSignalStore.clearCredential().then((function(){return(0,h.generateIdentityKeyPair)().then((function(t){return r.all([m.waSignalStore.setRegistrationInfo({registrationId:e,identityKeyPair:t}),m.waSignalStore.rotateSignedPreKey((0,f.toSignalCurveKeyPair)(t),h.generateSignedKeyPair)]).then((function(){}))}))}))},t.setRoutingInfo=function(e,t){var n={domain:e,edgeRouting:t?(0,l.decodeB64)(t):null};return __LOG__(2)`set routingInfo:`,r.resolve((0,v.setRoutingInfo)(n))},t.register=function(e,t,n,a){return r.all([m.waSignalStore.getRegistrationInfo(),m.waSignalStore.getSignedPreKey()]).then(function(){var r=(0,u.default)(i.default.mark((function r(u){var l,c,f,h,_,v,m;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=(0,s.default)(u,2),c=l[0],f=l[1],r.next=3,p.waNoiseInfo.get();case 3:if(h=r.sent,_=p.deviceInfo.get(),h){r.next=7;break}throw new Error("Invalid noise credentials");case 7:if(c&&f){r.next=9;break}throw new Error("Invalid signal credentials");case 9:if(_){r.next=11;break}throw new Error("Invalid device info");case 11:return v={id:S(h.recoveryToken),authkey:S(h.staticKeyPair.pubKey),e_regid:S((0,d.intToBytes)(4,c.registrationId)),e_keytype:S((0,d.intToBytes)(1,5)),e_ident:S(c.identityKeyPair.pubKey),e_skey_id:S((0,d.intToBytes)(3,f.keyId)),e_skey_val:S(f.keyPair.pubKey),e_skey_sig:S(f.signature)},null!=a&&0!==a&&(v.device_id=a.toString()),m=A(E,"/v2/register",(0,o.default)({cc:e,in:t,lg:_.lg,lc:_.lc,code:n,"x-whatsapp-ua":w()},v)),r.abrupt("return",fetch(m).then((function(e){return e.json()})).catch((function(){return{status:"fail",reason:"network_error"}})));case 15:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}())},t.requestCode=function(e,t,n){return r.all([m.waSignalStore.getRegistrationInfo(),m.waSignalStore.getSignedPreKey()]).then(function(){var r=(0,u.default)(i.default.mark((function r(a){var u,l,c,f,h,_;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,s.default)(a,2),l=u[0],c=u[1],r.next=3,p.waNoiseInfo.get();case 3:if(f=r.sent,h=p.deviceInfo.get(),f){r.next=7;break}throw new Error("Invalid noise credentials");case 7:if(l&&c){r.next=9;break}throw new Error("Invalid signal credentials");case 9:if(h){r.next=11;break}throw new Error("Invalid device info");case 11:return _={id:S(f.recoveryToken),authkey:S(f.staticKeyPair.pubKey),e_regid:S((0,d.intToBytes)(4,l.registrationId)),e_keytype:S((0,d.intToBytes)(1,5)),e_ident:S(l.identityKeyPair.pubKey),e_skey_id:S((0,d.intToBytes)(3,c.keyId)),e_skey_val:S(c.keyPair.pubKey),e_skey_sig:S(c.signature)},r.abrupt("return",T(t).then((function(r){var a=A(E,"/v2/code",(0,o.default)({cc:e,in:t,mcc:h.mcc,mnc:h.mnc,sim_mnc:h.sim_mnc,sim_mcc:h.sim_mcc,lg:h.lg,lc:h.lc,method:n,token:r,"x-whatsapp-ua":w()},_));return fetch(a).then((function(e){return e.json()})).catch((function(){return{status:"fail",reason:"network_error"}}))})));case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}())},t.buildUrl=A;var i=a(n(87757)),o=a(n(81109)),s=a(n(63038)),u=a(n(48926)),l=n(92827),c=n(98426),d=n(21279),f=n(48935),p=n(93239),h=n(91056),_=a(n(65122)),v=n(79583),m=n(1018),g=a(n(73358)),y=a(n(63701)),E="https://v.whatsapp.net";function S(e){return(0,y.default)((0,l.encodeB64)(e))}var b="0.3.2555";function T(e){var t=(0,l.decodeB64)((0,_.default)(b)),n=(0,c.toLowerCaseHex)(new Uint8Array(t));__LOG__(2)`build hash: ${n}`;var a=(0,l.decodeB64)((0,_.default)(["NvzsLFWNdEheK8VyC0LcidMVlsQhaD95lPVtO1mM",n,e].join(""))),i=(0,c.toLowerCaseHex)(new Uint8Array(a));return __LOG__(2)`token: ${i}`,r.resolve(i)}function w(){return`WhatsApp/0.3.2555 Web/${`${g.default.browser}-${g.default.browserVersion}`.replace(" ","_")} Device/${`${g.default.os}-${g.default.osVersion}`.replace(" ","_")}`}function A(e,t,n){if(!/^https:\/\/[-\w.]+\.\w+$/.test(e))throw new Error(`buildUrl given invalid host "${e}"`);if(!t.startsWith("/"))throw new Error(`buildUrl given invalid path "${t}"`);var r=n,a=`${e}${t}`;if(!r)return a;var i=Object.keys(r).map((function(e){var t=r[e];t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n=t instanceof Uint8Array?Array.prototype.slice.call(t).map((function(e){return`%${e.toString(16)}`})).join(""):encodeURIComponent(t);return`${encodeURIComponent(e)}=${n}`}));if(i.length>0){var o=i.join("&");return a.includes("?")?`${a}&${o}`:`${a}?${o}`}return a}},34625:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=n(17643),s=n(12035),u=1e4;var l=function(){function e(t){var n=this;(0,a.default)(this,e),this.performSendStep=function(){var e=!1,t=u;if(n.remainingChunk){var r=n.remainingChunk;if(r.length>=u){var a=o.Binary.build(210,128,r),i=a.readBuffer(u);n.remainingChunk=a.readByteArray(),e=!0,t=0,n._send(i)}else{var s=o.Binary.build(211,128,r);n.remainingChunk=null,e=!0,t-=s.size(),n._send(s.readBuffer())}}for(var l=n.queue;l.length&&t>2;){var c=l.shift();if("string"==typeof c)c.length<=t||!e?(e=!0,t-=c.length,n._send(c)):(t=0,l.unshift(c));else if(c.byteLength<t)e=!0,t-=c.byteLength,n._send(c);else{var d=o.Binary.build(208,128,c),f=d.readBuffer(t);n.remainingChunk=d.readByteArray(),e=!0,t=0,n._send(f)}}n.isQueueing()&&n.timer.onOrBefore(250)},this.watchedSocket=t,this.queue=[],this.remainingChunk=null,this.timer=new s.ShiftTimer(this.performSendStep)}return(0,i.default)(e,[{key:"isQueueing",value:function(){return this.queue.length>0||!!this.remainingChunk}},{key:"cancel",value:function(){this.timer.cancel()}},{key:"_send",value:function(e){this.watchedSocket.socket.send(e)}},{key:"send",value:function(e){this.isQueueing()?this.queue.push(e):function(e){return"string"==typeof e?e.length:e.byteLength}(e)<=u?this._send(e):(this.queue.push(e),this.timer.forceRunNow())}}]),e}();t.default=l},80130:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.set=c,t.clear=function(){i=void 0},t.get=function(){return(0,l.default)(i,"BUNDLE")},t.getBundle=function(){return i},t.getSecurityToken=function(e){if(!i)return __LOG__(3)`secret_bundle:getSecurityToken: no secret bundle`,r.reject("secret_bundle:getSecurityToken: no secret bundle");return new u.default(i.key).sign(new Uint8Array(e)).then(o.encodeB64)},t.setSecretKeys=function(e,t,n){"0.1"===e?i&&t&&n?(i.encKey=t,i.macKey=n,i.key=n):__LOG__(3)`secret_bundle:setSecretKeys v${e} ${String(t)} ${String(n)}`:__LOG__(2)`secret_bundle:setSecretKeys unknown version: v${e}`},t.load=function(){var e=(0,s.getSecretBundle)();if(!e)return __LOG__(2)`secret_bundle:load: attempted to load non-existent secret bundle!`,null;return c(e),e},t.save=function(){if(!i)return void __LOG__(2)`secret_bundle:save: trying to save empty secret bundle!`;delete i.keyPair,(0,s.setSecretBundle)(i)};var i,o=n(92827),s=n(71701),u=a(n(44338)),l=a(n(35643));function c(e){i=e}},78603:(e,t,n)=>{"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.getOrGenerate=function(){var e=i.getBundle();if(e&&e.key&&e.keyPair)return(0,a.encodeB64)(e.key);var t=o.keyPair(),n=(0,a.encodeB64)(t.pubKey),r={key:t.pubKey,keyPair:t,encKey:void 0,macKey:void 0};return i.set(r),n};var a=n(92827),i=r(n(80130)),o=r(n(48935))},63276:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.name,n=e.message,r=e.stack,o=(0,a.default)(e,["name","message","stack"]),s=(0,i.default)({name:t,message:"",stack:r}),u=s.slice(s.indexOf("\n")+1),l=0===Object.keys(o).length?"":" "+JSON.stringify(o,(function(e,t){return e&&"object"==typeof t?String(t):t}));return`${t||"Error"} - ${n||""}${l}\n${u}`};var a=r(n(6479)),i=r(n(99797))},15453:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.setServerPropInElectron=function(e,t){a.set(e,t)};var a=r(n(5693)).default.require("ServerProps")},86499:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;try{n=window.sessionStorage}catch(e){}var r=n;t.default=r},45599:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(t){(0,a.default)(this,e),this.cache=new Map,this.howBig=0,this.fn=t}return(0,i.default)(e,[{key:"getKeyString",value:function(e){return"string"==typeof e?e:e.join("_")}},{key:"getRefSetter",value:function(e){var t=this,n=this.getKeyString(e),r=this.cache.get(n);return r||(r=function(r){t.fn(e,r),r||t.cache.delete(n)},this.cache.set(n,r),Math.floor(this.cache.size/500)>this.howBig&&(__LOG__(4,void 0,new Error)`[SetRefCache] Large cache detected with ${this.cache.size} entries`,this.howBig=Math.floor(this.cache.size/500))),r}}]),e}();t.default=o},85169:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(96486)),s=n(88828);function u(e){switch(typeof e){case"object":return null==e?function(e){return null===e}:function(e){var t=[],n=!1,r=0;o.default.forOwn(e,(function(e,a){if(e!==o.default){r++;var i=u(e);t.push((function(e){return e.hasOwnProperty(a)&&i&&i(e[a])}))}else n=!0}));var a=o.default.reduceRight(t,(function(e,t){return e?function(n){return t(n)&&e(n)}:t}));return function(e){if("object"!=typeof e||null==e)return!1;var t=Object.keys(e).length;return!(t<r)&&!(!n&&t>r)&&a(e)}}(e);case"function":return e;case"boolean":case"undefined":case"number":case"string":return function(t){return t===e};default:throw new TypeError("Unknown Template type: "+typeof e)}}var l=function(){function e(t){(0,a.default)(this,e),this.predicate=u(t)}return(0,i.default)(e,[{key:"test",value:function(e){return this.predicate(e)}}]),e}();t.default=l,l.ANY=function(){return!0},l.OBJECT=o.default.isObject,l.STRING=s.isString,l.BOOLEAN=o.default.isBoolean},96443:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCrypto=function(){return self.crypto.subtle||self.crypto.webkitSubtle}},10560:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(96486)),l=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next";return(0,a.default)(this,n),(e=t.call(this)).list=r,e.index=-1,e.value=void 0,e.getter=i||function(e){return e},e.deleteDir=o,e}return(0,i.default)(n,[{key:"init",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=r;if(this.list=n,this.value)if(u.default.isEmpty(n))this.unset();else{if((e=n.indexOf(this.value))>-1){if(e===this.index)return;t=!0,a=!1}else if(!a||this.index<0)e=-1;else{var i="prev"===this.deleteDir?-1:0;e=this.index+i,e=Math.max(e,0),t=(e=Math.min(e,n.length-1))>-1}this.set(e,a,t)}}},{key:"unset",value:function(){var e=this.value;this.value=void 0,this.index=-1,e&&this.trigger(this.getter(e),!1)}},{key:"reset",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.index<0||this.value&&this.trigger(this.getter(this.value),"focus",e)}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.list.length){var r=Math.min(Math.max(e,-1),this.list.length-1),a=this.value,i=r>-1?this.list[r]:void 0;i?(this.value=i,this.trigger(this.getter(i),t?"focus":"select")):n&&(this.value=void 0),n&&a&&a!==i&&this.trigger(this.getter(a),!1),this.index=r}}},{key:"getVal",value:function(){return this.value}},{key:"setVal",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.list.indexOf(e);n>-1?this.set(n,t):(this.unset(),this.value=e)}},{key:"setFirst",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u.default.isEmpty(this.list)||this.set(0,e,!0)}},{key:"setLast",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u.default.isEmpty(this.list)||this.set(this.list.length-1,e,!0)}},{key:"setPrev",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u.default.isEmpty(this.list)||this.set(this.prev(),e,!0)}},{key:"setNext",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u.default.isEmpty(this.list)||this.set(this.next(),e,!0)}},{key:"prev",value:function(){return u.default.isEmpty(this.list)||-1===this.index?-1:this.index-1}},{key:"next",value:function(){return u.default.isEmpty(this.list)?-1:Math.min(this.index+1,this.list.length-1)}}]),n}(r(n(28681)).default);t.default=l},38021:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(2205)),l=i(n(99842)),c=n(49963),d=n(17643),f=i(n(96486)),p=i(n(35340)),h=a(n(56727)),_=a(n(70371)),v=i(n(34263)),m=a(n(70496)),g=i(n(37417)),y=i(n(67890)),E=i(n(98908)),S=i(n(61110)),b=n(82170),T=a(n(51818)),w=n(54844),A=3e5,C=18e4,O=(0,T.fibonacci)(8e3,4e3,3e5),M=function(e){(0,u.default)(a,e);var t=(0,l.default)(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).active=(0,h.prop)(!0),e.socket=(0,h.prop)(),e.sockets=(0,h.prop)(),e.attempts=(0,h.prop)(0),e.startId=(0,h.prop)(0),e.controller=(0,h.prop)(),e.retryTimestamp=(0,h.prop)(),e.tsListener=(0,h.prop)(),e.onerror=(0,h.prop)(),e}return(0,s.default)(a,[{key:"initialize",value:function(){var e=this;this.sockets=[],new r((function(t,n){e._resolve=t,e._reject=n})).then((function(t){__LOG__(2)`SocketOpener set to socket ${t.id}`,e.set({active:!1,socket:t}),y.default.online=!0})).finally((function(){e.stopListening(),__LOG__(2)`SocketOpener closing socket opener`,e.active=!1,e.sockets.forEach((function(e){e.cancel()}));var t=e.controller;t&&(t.deactivate(),e.controller=null)})).catchType(r.CancellationError,(function(){})).catch((function(t){if(__LOG__(3)`SocketOpener deadly error! ${String(t)}`,!e.onerror)return r.reject(t);e.onerror(t)})),this.tsListener=function(t){e.retryTimestamp=t.ts},this.listenTo(y.default,"change:online",this.onOnlineChange),this.listenTo(m.default,m.JS_HALT_EVENT,this.onJsHalt),this.onOnlineChange()}},{key:"attemptOpen",value:function(){if(!this.active)return __LOG__(2)`attemptOpen called while not active!`,void _.upload({reason:"rogue-opener"});var e=(0,w.open)({url:v.default.WEB_SOCKET_URL,msgParser:k});this.attempts=this.sockets.push(e);var t=!1,n=function(){if(t)return r.resolve();t=!0;var e=(new p.default).signal;return y.default.checkOnline({signal:e})},a=new p.default;(0,E.default)(6e3,a.signal).then((function(){return n()})).catch((function(){})),e.then(this._resolve).finally((function(){return a.abort()})).catchType(r.CancellationError,(function(){})).catch((function(){return n()}))}},{key:"poke",value:function(){this.controller&&this.controller.forceTimeout()}},{key:"onOnlineChange",value:function(){if(this.active){var e=this.controller,t=y.default.online?this.onlineController():this.offlineController();e&&(e.off("change:ts",this.tsListener),e.deactivate()),t.on("change:ts",this.tsListener),t.activate(),this.controller=t}}},{key:"onlineController",value:function(){var e=this;return __LOG__(2)`SocketOpener:onlineController activating`,new T.default({waitAlgorithm:O,jitter:.2,onActivated:function(){e.attemptOpen()},onTimeout:function(){return e.attemptOpen(),!0}})}},{key:"offlineController",value:function(){var e=this;__LOG__(2)`SocketOpener:offlineController activating`;var t,r=0;return new T.default({waitAlgorithm:function(e){return t&&t.cancel(),navigator.onLine?r++<2?(__LOG__(2)`SocketOpener:offline... quick poll`,t=null,6e3):(__LOG__(2)`SocketOpener:offline... heuristic poll`,t=I(e,[(0,b.waitForOnlineNaive)(),(0,S.default)(m.default,m.JS_HALT_EVENT),(0,S.default)(n(14094).default,"change:available")]),A):(__LOG__(2)`SocketOpener:offline... wait for navigator`,r=0,t=I(e,[(0,b.waitForOnlineNaive)()]),A)},jitter:.2,onActivated:function(){0===e.pendingAttempts()&&e.attemptOpen()},onDeactivated:function(){t&&t.cancel()},onTimeout:function(){return e.attemptOpen(),!0}})}},{key:"deactivate",value:function(){this._reject(new r.CancellationError)}},{key:"pendingAttempts",value:function(){return f.default.sumBy(this.sockets,(function(e){return e.isPending()?1:0}))}},{key:"onJsHalt",value:function(e){var t=this.controller;t&&e>C&&(__LOG__(2)`js halt longer than ${C} ms detected, resetting watchdog fail generation`,t.resetGeneration())}}]),a}(h.default);function I(e,t){return(0,c.promiseAny)(t).cancellable().then((function(){e.forceTimeout()})).finally((function(){t.forEach((function(e){e.cancel()}))})).catchType(r.CancellationError,(function(){}))}function k(e){var t,n,r,a=e.data;if(a instanceof ArrayBuffer){for(var i,o=[],s=new d.Binary(a);44!==(i=s.readUint8());)o.push(i);t=String.fromCharCode.apply(String,o),n=s.readBuffer(),r=a.byteLength}else{if("string"!=typeof a)throw new Error("Unexpected message event type");var u=a.indexOf(",");t=a.slice(0,u),n=(n=a.slice(u+1))?JSON.parse(n,g.default):void 0,r=new Blob([a]).size}return{tag:t,data:n,binarySize:r}}var P=(0,h.defineModel)(M);t.default=P},77466:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(2205)),l=i(n(99842)),c=n(49963),d=i(n(96486)),f=i(n(35340)),p=a(n(56727)),h=i(n(34263)),_=a(n(70496)),v=i(n(67890)),m=i(n(98908)),g=i(n(61110)),y=n(82170),E=a(n(51818)),S=n(24822),b=3e5,T=18e4,w=(0,E.fibonacci)(8e3,4e3,3e5),A=function(e){(0,u.default)(a,e);var t=(0,l.default)(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).active=(0,p.prop)(!0),e.socket=(0,p.prop)(),e.sockets=(0,p.prop)(),e.attempts=(0,p.prop)(0),e.controller=(0,p.prop)(),e.retryTimestamp=(0,p.prop)(),e.tsListener=(0,p.prop)(),e.onerror=(0,p.prop)(),e}return(0,s.default)(a,[{key:"initialize",value:function(){var e=this;this.sockets=[],new r((function(t,n){e._resolve=t,e._reject=n})).then((function(t){__LOG__(2)`SocketOpenerMD set to socket ${t.id}`,e.set({active:!1,socket:t}),v.default.online=!0})).finally((function(){e.stopListening(),__LOG__(2)`SocketOpenerMD closing socket opener`,e.active=!1,e.sockets.forEach((function(e){e.cancel()}));var t=e.controller;t&&(t.deactivate(),e.controller=null)})).catchType(r.CancellationError,(function(){})).catch((function(t){if(__LOG__(3)`SocketOpenerMD deadly error! ${String(t)}`,!e.onerror)return r.reject(t);e.onerror(t)})),this.tsListener=function(t){e.retryTimestamp=t.ts},this.listenTo(v.default,"change:online",this.onOnlineChange),this.listenTo(_.default,_.JS_HALT_EVENT,this.onJsHalt),this.onOnlineChange()}},{key:"attemptOpen",value:function(){if(this.active){var e=(0,S.open)(this.routingToken?`${h.default.CHATD_WEB_SOCKET_URL}?ED=${this.routingToken}`:h.default.CHATD_WEB_SOCKET_URL);this.attempts=this.sockets.push(e);var t=!1,n=function(){if(t)return r.resolve();t=!0;var e=(new f.default).signal;return v.default.checkOnline({signal:e})},a=new f.default;(0,m.default)(6e3,a.signal).then((function(){return n()})).catch((function(){})),e.then(this._resolve).finally((function(){return a.abort()})).catchType(r.CancellationError,(function(){})).catch((function(){return n()}))}else __LOG__(2)`attemptOpen called while not active!`}},{key:"poke",value:function(){this.controller&&this.controller.forceTimeout()}},{key:"onOnlineChange",value:function(){if(this.active){var e=this.controller,t=v.default.online?this.onlineController():this.offlineController();e&&(e.off("change:ts",this.tsListener),e.deactivate()),t.on("change:ts",this.tsListener),t.activate(),this.controller=t}}},{key:"onlineController",value:function(){var e=this;return __LOG__(2)`SocketOpenerMD:onlineController activating`,new E.default({waitAlgorithm:w,jitter:.2,onActivated:function(){e.attemptOpen()},onTimeout:function(){return e.attemptOpen(),!0}})}},{key:"offlineController",value:function(){var e=this;__LOG__(2)`SocketOpenerMD:offlineController activating`;var t,r=0;return new E.default({waitAlgorithm:function(e){return t&&t.cancel(),navigator.onLine?r++<2?(__LOG__(2)`SocketOpenerMD:offline... quick poll`,t=null,6e3):(__LOG__(2)`SocketOpenerMD:offline... heuristic poll`,t=C(e,[(0,y.waitForOnlineNaive)(),(0,g.default)(_.default,_.JS_HALT_EVENT),(0,g.default)(n(14094).default,"change:available")]),b):(__LOG__(2)`SocketOpenerMD:offline... wait for navigator`,r=0,t=C(e,[(0,y.waitForOnlineNaive)()]),b)},jitter:.2,onActivated:function(){0===e.pendingAttempts()&&e.attemptOpen()},onDeactivated:function(){t&&t.cancel()},onTimeout:function(){return e.attemptOpen(),!0}})}},{key:"deactivate",value:function(){this._reject(new r.CancellationError)}},{key:"pendingAttempts",value:function(){return d.default.sumBy(this.sockets,(function(e){return e.isPending()?1:0}))}},{key:"onJsHalt",value:function(e){var t=this.controller;t&&e>T&&(__LOG__(2)`js halt longer than ${T} ms detected, resetting watchdog fail generation`,t.resetGeneration())}}]),a}(p.default);function C(e,t){return(0,c.promiseAny)(t).cancellable().then((function(){e.forceTimeout()})).finally((function(){t.forEach((function(e){e.cancel()}))})).catchType(r.CancellationError,(function(){}))}var O=(0,p.defineModel)(A);t.default=O},53395:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getHash=function(e){return(e instanceof h.default?(0,f.opaqueDataToArrayBuffer)(e):(0,c.blobToArrayBuffer)(e)).then((function(e){return(0,_.default)(e)})).catch((function(t){var n={error:`${t}`,blobSize:e.size,isOpaqueData:e instanceof h.default};__LOG__(3,void 0,void 0,!0)`SubtleCrypto::getHash error. Debug:\n${JSON.stringify(n,null,2)}`,SEND_LOGS("subtle-crypto-get-hash-error")}))},t.decrypt=v,t.decryptE2EMedia=function(e,t,n,a){var i,o=r.resolve().then((function(){if(!e)throw new l.MediaEncryptionError('decrypt async, missing "type"');if(!(t instanceof ArrayBuffer))throw new l.MediaEncryptionError('decrypt async, missing "payload"');if(!n)throw new l.MediaEncryptionError('decrypt async, missing "mediaKey"');if(t.byteLength<10)throw new l.MediaEncryptionError(`ciphertext too short: ${t.byteLength}`);return(0,u.default)(e,n).then((function(n){var r=n.iv,i=n.encKey,o=n.macKey,s=t.byteLength-10,u=new Uint8Array(t,s),l=new Uint8Array(t,0,s);return v(new Uint8Array(i),new Uint8Array(r),l,new Uint8Array(o),u,a||function(t){return(0,p.getMediaMimeType)(e,t)})}))})).tap((function(e){e.autoreleaseWhenPromiseCompletes(o),i.markWebcCryptoElapsedT(),i.commit()})).catchConditional((function(e){return!(e instanceof l.MediaEncryptionError)}),(function(e){var t=e instanceof Error?`encryption error: ${String(e)}; stack: ${e.stack}`:`encryption error: ${String(e)};`;throw new l.MediaEncryptionError(t)}));return o};var o=n(17643),s=n(86190),u=i(n(4472)),l=a(n(98569)),c=n(19059),d=i(n(44338)),f=n(81365),p=n(13242),h=i(n(74984)),_=i(n(54105));function v(e,t,n,a,i,u){return r.resolve().then((function(){if(!(10<=i.length&&i.length<=32))throw new l.MediaEncryptionError("Given bad expected hmac");var r=o.Binary.build(t,n).readByteArray();return new d.default(a).sign(r).then((function(t){for(var n=new Uint8Array(t,0,i.length),a=!1,o=0;o<n.length;o++)n[o]!==i[o]&&(a=!0);if(a)throw new l.MediaEncryptionError("hmac check failure");return(0,s.aesCbcDecrypt)(e,r)}))})).then((function(e){var t="string"==typeof u?u:u(new Uint8Array(e));return h.default.createFromData(e,t)}))}},8876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=!1;try{var r={get passive(){n=!0}};window.addEventListener("test",null,r)}catch(e){}var a=n;t.default=a},52300:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genSecurityCodeNotificationMsg=function(e,t){var n=(0,i.getMeUser)();return{id:new o.default({fromMe:t.equals(n),remote:e,id:(0,s.default)()}),t:(0,a.unixTime)(),type:"e2e_notification",subtype:"identity",from:e,to:n,body:t.toString()}},t.genDeviceNotificationMsg=function(e,t,n,r){var l=(0,i.assertGetMe)(),c=new o.default({fromMe:t.equals((0,u.toUserWid)(l)),remote:e,id:(0,s.default)()}),d=c.fromMe&&n.includes(l.getDeviceId());return{id:c,t:(0,a.unixTime)(),type:"e2e_notification",subtype:"device",from:e,to:(0,u.toUserWid)(l),body:t.toString(),devicesAdded:n.length,devicesRemoved:r.length,isThisDeviceAdded:d}},t.genEncryptNotificationMsg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"encrypt";return l(e,"e2e_notification",t,[])},t.genTealNotificationTemplateMsg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return l(e,"notification_template",t,n)},t.genNotificationMsg=l;var a=n(90066),i=n(71701),o=r(n(5315)),s=r(n(75554)),u=n(75793);function l(e,t,n,r){var u=(0,i.getMeUser)();return{id:new o.default({fromMe:e.equals(u),remote:e,id:(0,s.default)()}),t:(0,a.unixTime)(),type:t,subtype:n,from:e,to:u,templateParams:r}}},38419:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.genGroupCreationMsg=function(e,t){var n,r,i,u=e.chatId;if(!e.externalId)throw new Error(`handleGroupCreationMD: no externalId for group action ${JSON.stringify(e)}, ${JSON.stringify(t)}`);var l=null!==(n=null!==(r=t.owner)&&void 0!==r?r:e.author)&&void 0!==n?n:(0,a.getMaybeMeUser)(),c=t.subject;return{id:new o.default({remote:u,fromMe:!1,participant:l,id:(0,s.default)()}),author:l,body:c,from:u,recipients:[],self:"in",subtype:"create",t:null!==(i=t.creation)&&void 0!==i?i:e.ts,type:"gp2"}},t.genGroupNotificationMsg=function(e,t){var n=e.chatId,r=e.externalId,a=e.author&&(0,u.toUserWid)(e.author)||void 0;if(!r)throw new Error(`handleGroupActionMD: no externalId for group action ${JSON.stringify(e)}, ${JSON.stringify(t)}`);var s=null,l=[],c=a,d=t.action,f=null;switch(t.action){case i.GROUP_ACTIONS.SUBJECT:s=t.subject;break;case i.GROUP_ACTIONS.MODIFY:l=t.participants;break;case i.GROUP_ACTIONS.ADD:t.isInvite&&(d="invite");case i.GROUP_ACTIONS.PROMOTE:case i.GROUP_ACTIONS.DEMOTE:case i.GROUP_ACTIONS.REMOVE:1===(l=t.participants).length&&(c=l[0]),t.action===i.GROUP_ACTIONS.REMOVE&&1===l.length&&a===c&&(d="leave");break;case i.GROUP_ACTIONS.INVITE_CODE:d="revoke_invite";break;case i.GROUP_ACTIONS.DESC_ADD:d="description",s=t.desc;break;case i.GROUP_ACTIONS.DESC_REMOVE:d="description";break;case i.GROUP_ACTIONS.RESTRICT:case i.GROUP_ACTIONS.ANNOUNCE:case i.GROUP_ACTIONS.NO_FORWARD:f=t.value?["on"]:["off"],s=f[0];break;case i.GROUP_ACTIONS.EPHEMERAL:a&&(f=[`${t.duration}`,a])}var p={id:new o.default({remote:n,fromMe:!1,participant:c,id:r}),author:a,from:n,recipients:l.map(u.toUserWid)||[],self:"in",subtype:d,t:e.ts,type:"gp2"};s&&(p.body=s);f&&(p.templateParams=f);return p},t.genGroupPicChangeNotificationMsg=function(e,t,n,r,a){return{type:"gp2",self:"in",subtype:"picture",t:n,author:r,body:t,recipients:[],from:e,id:new o.default({remote:e,fromMe:!1,id:a})}},t.genGroupEphemeralSettingMsg=function(e,t,n,r){return{id:new o.default({remote:e,fromMe:!1,participant:n,id:(0,s.default)()}),author:n,from:e,recipients:[],self:"in",subtype:"ephemeral",t,type:"gp2",templateParams:[`${r}`]}},t.genIntialPhashMismatchMsg=function(e,t){return{id:new o.default({remote:e,fromMe:!1,id:(0,s.default)()}),from:e,recipients:[],self:"in",subtype:"initial_pHash_mismatch",t,type:"gp2"}};var a=n(71701),i=n(91438),o=r(n(5315)),s=r(n(75554)),u=n(75793)},6603:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getReducedPrivacyMode=function(e){return null==e||e.actualActors===a.ActualActorsEnumType.Self&&e.hostStorage===a.HostStorageEnumType.OnPremise?o.E2EE:e.hostStorage===a.HostStorageEnumType.Facebook?o.FB:o.BSP},t.getContactPrivacyMode=function(e){if(!i.default.isUser(e))return;var t=n(48629).default.get(e);return null==t?void 0:t.privacyMode},t.latestPrivacyMode=function(e,t){return null==e?t:null==t||e.privacyModeTs>t.privacyModeTs?e:t},t.ReducedPrivacyMode=void 0;var a=n(87442),i=r(n(12717)),o=n(54302).Mirrored(["E2EE","BSP","FB"]);t.ReducedPrivacyMode=o},88628:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SysPrefLinksType=void 0;var r=n(54302)({PRIVACY_CAMERA:1,PRIVACY_MICROPHONE:2});t.SysPrefLinksType=r},61198:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=r(n(28681)),l=window.Native.nativeTheme,c=new(function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;return(0,a.default)(this,n),(e=t.call(this)).theme=e.currentTheme,e.handleThemeChange=function(){var t=e.currentTheme;t!==e.theme&&(e.theme=t,e.trigger("system_theme_change",t))},l.on("updated",e.handleThemeChange),e}return(0,i.default)(n,[{key:"currentTheme",get:function(){return l.shouldUseDarkColors?"dark":"light"}}]),n}(u.default));t.default=c},83376:(e,t,n)=>{"use strict";var r=n(60077).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={ROOT:1,THENABLE:2,FINALLY:3,META:4},i={PENDING:1,FULFILLED:2,REJECTED:3};function o(){var e,t;switch(this._parent=null,this._subs=[],this._catchTypes=null,this._onResolve=null,this._onReject=null,this.type=a.ROOT,this.state=i.PENDING,this.value=void 0,this._forceable=!1,this._cancellable=!1,arguments.length){case 0:break;case 1:e=arguments[0];break;case 2:t=arguments[0],e=arguments[1];break;default:throw new Error("TightPromise constructor with "+arguments.length+" arguments")}if(this.context=t,arguments.length>0)try{e.call(t,u.bind(this),l.bind(this))}catch(e){l.call(this,e)}}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new o;return r.type=a.THENABLE,r._onReject=arguments[arguments.length-1],arguments.length>1&&(r._catchTypes=Array.prototype.slice.call(arguments,0,arguments.length-1),r._catchTypes.forEach((function(e){if("function"!=typeof e)throw new Error("expected type, got "+e)}))),this._addChild(r),r}function u(e){var t;this.state===i.PENDING&&("object"!=typeof(t=e)&&"function"!=typeof t||"function"!=typeof t.then?(this.value=e,this.state=i.FULFILLED,this._notifySubs()):e.then(u.bind(this),l.bind(this)))}function l(e){this.state===i.PENDING&&(this.value=e,this.state=i.REJECTED,this._notifySubs())}o.STATE=i,o.TYPE=a,o.prototype={isPending:function(){return this.state===i.PENDING},then:function(e,t){if(!e&&!t)return this;var n=new o;return n.type=a.THENABLE,n._onResolve=e||null,n._onReject=t||null,this._addChild(n),n},catch:s,catchType:s,catchTypes:s,catchTypes3:s,catchEqualTo:s,catchConditional:s,finally:function(e){var t=new o;return t.type=a.FINALLY,t._onResolve=e,this._addChild(t),t},bind:function(e){var t=new o;return t.type=a.META,this._addChild(t),t.context=e,t},spread:function(e){return this.then((function(t){e.apply(this,t)}))},get:function(e){return this.then((function(t){return t[e]}))},forceable:function(){var e=new o;return e.context=this.context,e.type=a.META,this._addChild(e),e._forceable=!0,e},cancellable:function(){var e=new o;return e.context=this.context,e.type=a.META,this._addChild(e),e._cancellable=!0,e},force:function(e){if(this._forceable){for(var t=this;t.type===a.META;){var n=t._parent;if(!n||!n._forceable||n.state!==i.PENDING)break;t=n}u.call(this,e)}},cancel:function(e){var t=e;if(this._cancellable){t=t||new r.CancellationError;var n=this,a=!1;do{var o=n._parent;o&&o._cancellable&&o.state===i.PENDING?n=o:a=!0}while(!a);l.call(n,t)}},timeout:function(e,t){var n=new o;return n.type=a.META,this._addChild(n),n.state===i.PENDING&&setTimeout(l.bind(n,new r.TimeoutError(t)),e),n},loosen:function(){return r.resolve(this)},_run:function(e,t){var n;try{n=e.call(this.context,t)}catch(e){return void l.call(this,e)}u.call(this,n)},_handle:function(){if(this.state===i.PENDING){var e=this._parent;switch(this.type){case a.THENABLE:if(e.state===i.FULFILLED){var t=this._onResolve;t?this._run(t,e.value):u.call(this,e.value)}else if(this._onReject){var n=this._catchTypes,r=n?n.length:0,o=e.value;if(0===r)return void this._run(this._onReject,o);for(var s=0;s<r;s++)if(o instanceof n[s])return void this._run(this._onReject,o);l.call(this,o)}else l.call(this,e.value);return;case a.FINALLY:try{this._onResolve.call(this.context)}catch(e){!function(e){setTimeout((function(e){throw e}),0,e)}(e)}default:e.state===i.FULFILLED?u.call(this,e.value):l.call(this,e.value)}}},_addChild:function(e){e._parent=this,e.context=this.context,e._cancellable=this._cancellable,e.type===a.META&&(e._forceable=this._forceable),this.state===i.PENDING?this._subs.push(e):e._handle()},_notifySubs:function(){this._subs.forEach((function(e){e._handle()}))}},o.delay=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a;switch(arguments.length){case 0:r=0;break;case 1:r=arguments[0];break;default:r=arguments[1],a=arguments[0]}return new o((function(e){setTimeout(e.bind(null,a),r)}))},o.resolve=function(e){var t=new o;return u.call(t,e),t},o.reject=function(e){var t=new o;return l.call(t,e),t};var c=o;t.default=c},59502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expBackoff=a,t.expDelaySec=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;return(0,r.delayMs)(Math.floor(1e3*a(e,t,n,i)))};var r=n(53615);function a(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;return r=0===e?n||0:Math.pow(2,e),Number.isFinite(t)&&r>t&&(r=t),"number"==typeof n&&Number.isFinite(n)&&r<n&&(r=n),a&&(r*=1+a*Math.random()),r}},68460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TLD=void 0;t.TLD="abb|abbott|ac|academy|accountant|accountants|ad|adult|ae|aero|af|africa|ag|agency|ai|al|am|amsterdam|anz|ao|apartments|app|apple|ar|archi|army|art|as|asia|associates|at|au|auction|audio|auto|aws|ax|axa|az|ba|baby|band|bank|bar|barclays|basketball|bayern|bb|bbva|bd|be|beauty|beer|berlin|best|bet|bf|bg|bh|bi|bible|bid|bike|bingo|bio|biz|bj|black|blog|blue|bm|bn|bnpparibas|bo|bond|bot|boutique|box|br|bradesco|brother|brussels|bs|bt|build|builders|business|buzz|bw|by|bz|bzh|ca|cab|cafe|cam|camera|camp|canon|capetown|capital|cards|care|careers|cars|casa|cash|casino|cat|cba|cbs|cc|cd|center|ceo|cern|cf|cg|ch|charity|chat|cheap|chrome|church|ci|citic|city|ck|cl|claims|cleaning|click|clinic|clothing|cloud|club|cm|cn|co|coach|codes|coffee|college|cologne|com|community|company|computer|construction|consulting|cool|coop|country|coupons|courses|cr|credit|creditcard|cricket|cu|cv|cw|cx|cy|cymru|cyou|cz|dance|data|date|dating|de|deals|degree|delivery|deloitte|dental|dentist|desi|design|dev|dhl|diet|digital|direct|directory|discount|dj|dk|do|doctor|dog|domains|download|dz|earth|ec|eco|edu|education|ee|eg|email|energy|engineering|equipment|es|estate|et|eu|eus|events|exchange|expert|exposed|express|extraspace|fage|fail|faith|family|fan|fans|farm|fashion|feedback|fi|film|finance|financial|fish|fit|fitness|fj|flights|florist|flowers|fm|fo|football|forex|forsale|forum|foundation|fox|fr|fun|fund|furniture|futbol|fyi|ga|gal|gallery|game|games|garden|gd|gdn|ge|gg|gh|gi|gift|gifts|gives|gl|glass|gle|global|globo|gm|gmbh|gold|golf|goog|google|gop|gov|gp|gq|gr|graphics|gratis|green|group|gs|gt|guide|guru|gy|haus|health|healthcare|help|helsinki|here|hiphop|hk|hn|hockey|holdings|holiday|homes|honda|horse|host|hosting|house|how|hr|hsbc|ht|hu|icu|id|ie|il|im|immo|in|inc|industries|info|ink|institute|insure|int|international|investments|io|iq|ir|is|ist|istanbul|it|jcb|je|jewelry|jm|jo|jobs|jp|ke|kg|kh|ki|kim|kitchen|kiwi|km|koeln|kp|kpmg|kr|krd|kred|kw|ky|kyoto|kz|la|land|lat|law|lawyer|lb|lc|leclerc|legal|lgbt|li|life|lighting|limited|link|live|lk|llc|loan|loans|lol|london|love|lr|ls|lt|ltd|ltda|lu|luxury|lv|ly|ma|madrid|management|market|marketing|markets|mba|md|me|media|melbourne|men|menu|mg|miami|mil|mk|ml|mm|mn|mo|mobi|moda|moe|moi|mom|monash|money|monster|mortgage|moscow|movie|mp|mq|mr|ms|msd|mt|mu|museum|mv|mw|mx|my|mz|na|name|nc|ne|net|network|neustar|news|nf|ng|ngo|ni|nico|ninja|nl|no|np|nr|nrw|nu|nyc|nz|observer|office|okinawa|om|one|ong|onl|online|ooo|orange|org|organic|ovh|pa|page|paris|partners|parts|party|pe|pet|pf|pg|ph|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|pk|pl|place|plumbing|plus|pm|pn|poker|porn|post|pr|press|pro|prod|productions|promo|properties|ps|pt|pub|pw|py|qa|quebec|quest|racing|radio|re|realtor|realty|recipes|red|reise|ren|rent|rentals|repair|report|rest|restaurant|review|reviews|rich|rip|ro|rocks|rodeo|rs|ru|rugby|run|rw|sa|sale|salon|sandvik|sap|saxo|sb|sbi|sc|scb|school|schule|science|scot|sd|se|security|services|ses|sex|sexy|sg|sh|sharp|shell|shiksha|shoes|shop|shopping|show|si|site|sk|ski|skin|sl|sm|sn|sncf|so|soccer|social|softbank|software|solar|solutions|sony|soy|space|sport|sr|st|storage|store|stream|studio|study|style|su|sucks|supply|support|surf|sv|swiss|sx|sy|sydney|systems|sz|taipei|tatar|tattoo|tax|taxi|tc|td|team|tech|technology|tel|tennis|tf|tg|th|theater|tickets|tips|tj|tk|tl|tm|tn|to|today|tokyo|tools|top|toshiba|tours|town|toyota|toys|tr|trade|trading|training|travel|tt|tube|tv|tw|tz|ua|ug|uk|university|uno|us|uy|uz|va|vanguard|vc|ve|vegas|ventures|vet|vg|vi|video|vin|vip|vision|vn|voyage|vu|wales|wang|watch|webcam|weber|website|wedding|weir|wf|wien|wiki|win|wine|woodside|work|works|world|ws|wtf|xyz|yandex|ye|yoga|youtube|yt|za|zip|zm|zone|zw|бел|дети|москва|онлайн|орг|рус|рф|сайт|укр|קום|السعودية|تونس|भारत|বাংলা|中国"},19145:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(12641)),i=[.1,.82,.25,1],o=[.69,0,.79,.14],s=[.84,.07,.93,.46];a.default.RegisterEffect("attach.Up",{defaultDuration:300,calls:[[{opacity:[1,0],translateY:["0%","150%"],scaleX:[1,.3],scaleY:[1,.3]},1,{easing:[300,22]}]]}),a.default.RegisterEffect("attach.Down",{defaultDuration:200,easing:o,calls:[[{opacity:[0,1],translateY:["100%","0%"],scaleX:[.3,1],scaleY:[.3,1]},1,{easing:[.33,0,.39,.91]}]]}),a.default.RegisterEffect("dropdown.Down",{defaultDuration:200,easing:i,calls:[[{opacity:[1,0],translateY:["0%","-15px"]},1,{easing:i}]]});var u={pop:{duration:200,easing:s,enter:{props:{scaleX:[1,.5],scaleY:[1,.5],opacity:[1,0]}},leave:{props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]}}},slide:{duration:200,easing:i,enter:{props:"slideDown"},leave:{props:"slideUp"}},scaleY:{duration:200,easing:i,enter:{props:{scaleY:[1,0],transformOrigin:"center"}},leave:{props:{scaleY:[0,1],transformOrigin:"center"}}},scale:{duration:500,easing:i,enter:{props:{scaleX:[1,0],scaleY:[1,0]}},leave:{props:{scaleX:[0,1],scaleY:[0,1]}}},fade:{duration:200,easing:i,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"fade-fast":{easing:"ease",enter:{props:{opacity:[1,0]},duration:150},leave:{props:{opacity:[0,1]},duration:100}},fade_sifo:{enter:{props:{opacity:[1,0]},duration:250},leave:{props:{opacity:[0,1]},duration:100}},capture:{enter:{props:{opacity:[1,0]},duration:350},leave:[{selector:"[data-animate-capture-snapshot]",props:"transition.bounceDownOut",duration:700},{selector:"[data-animate-capture-webcam]",props:{opacity:[0,1]},duration:100,easing:"ease"}]},butterbar:{enter:{props:"slideDown",easing:i,duration:700},leave:{props:"slideUp",easing:o,duration:350}},modal:{enter:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[1,0]},duration:300,easing:[.19,.73,.28,1]},{selector:"[data-animate-modal-popup]",props:{scaleX:[1,0],scaleY:[1,0],opacity:[1,0]},easing:[.19,.73,.28,1],delay:180,duration:200},{selector:"[data-animate-modal-popup]",props:{opacity:[0,0]},duration:180}],leave:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[0,1]},duration:300,easing:o,delay:100},{selector:"[data-animate-modal-popup]",props:{scaleX:[0,1],scaleY:[0,1]},easing:o,duration:200}]},"modal-flow":{enter:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[1,0]},duration:300,easing:[.19,.73,.28,1]},{selector:"[data-animate-modal-popup]",props:{scaleX:[1,0],scaleY:[1,0],opacity:[1,1]},easing:[.19,.73,.28,1],delay:180,duration:200},{selector:"[data-animate-modal-popup]",props:{opacity:[0,0]},duration:180}],leave:[{selector:"[data-animate-modal-backdrop]",props:{opacity:[0,1]},duration:300,easing:o,delay:100},{selector:"[data-animate-modal-popup]",props:{scaleX:[0,1],scaleY:[0,1]},easing:o,duration:200}]},"flow-transition-modal-push":{duration:300,easing:i,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"flow-transition-modal-pop":{duration:300,easing:i,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"flow-transition-box-size-drawer-push":{duration:300,easing:i,enter:[{selector:"[data-animate-modal-body]",props:{translateX:["0%","100%"]}}],leave:[{props:{background:["transparent","transparent"]}},{selector:"[data-animate-modal-popup]",props:{background:["transparent","transparent"],boxShadow:["none","none"]}},{selector:"[data-animate-modal-body]",props:{translateX:["-100%","0%"]}}]},"flow-transition-box-size-drawer-pop":{duration:300,easing:i,enter:[{selector:"[data-animate-modal-body]",props:{translateX:["0%","-100%"]}}],leave:[{props:{background:["transparent","transparent"]}},{selector:"[data-animate-modal-popup]",props:{background:["transparent","transparent"],boxShadow:["none","none"]}},{selector:"[data-animate-modal-body]",props:{translateX:["100%","0%"]}}]},"flow-transition-drawer-push":{duration:300,easing:i,enter:{props:{translateX:["0%","100%"]}},leave:{props:{translateX:["-100%","0%"]}}},"flow-transition-drawer-pop":{duration:300,easing:i,enter:{props:{translateX:["0%","-100%"]}},leave:{props:{translateX:["100%","0%"]}}},"drawer-left":{enter:[{props:{translateX:["0%","-100%"]},duration:300,easing:i},{selector:"[data-animate-drawer-title]",props:{translateX:[0,-50],opacity:[1,0]},duration:500,easing:"easeOut"}],leave:[{props:{translateX:["-100%","0%"]},duration:300,easing:o}]},"drawer-left-rtl":{enter:[{props:{translateX:["0%","100%"]},duration:300,easing:i},{selector:"[data-animate-drawer-title]",props:{translateX:[0,50],opacity:[1,0]},duration:500,easing:"easeOut"}],leave:[{props:{translateX:["100%","0%"]},duration:300,easing:o}]},dropdown:{duration:300,easing:i,enter:[{selector:"[data-animate-dropdown-item]",props:"dropdown.Down",delay:50,duration:375,stagger:25,drag:!0},{props:{scale:[1,0]}},{props:{opacity:[1,0]},duration:100}],leave:{props:{scaleX:[0,1],scaleY:[0,1],opacity:[0,1]}}},"dropdown-picker":{duration:300,easing:i,enter:[{selector:"[data-animate-dropdown-item]",props:{opacity:[1,0]},delay:50,duration:200},{selector:"[data-animate-dropdown-nib]",props:{opacity:[1,0],rotateZ:["45deg"],translateY:["0%","-100%"]}},{props:{scale:[1,0]}},{props:{opacity:[1,0]},duration:100}],leave:[{selector:"[data-animate-dropdown-item]",props:{opacity:[1,0]},duration:100},{selector:"[data-animate-dropdown-nib]",props:{opacity:[1,0]},duration:150},{props:{scaleX:[0,1],scaleY:[0,1],opacity:[0,1]}}]},"profile-viewer":{duration:500,easing:[.1,1.03,.28,.99],leave:[{delay:400,props:{opacity:[0,1]}},{selector:"[data-animate-profile-viewer]",props:{borderRadius:["50%","0%"]}}]},"media-viewer":{duration:300,easing:[.1,1.03,.28,.99],leave:{selector:"[data-animate-media-viewer]",props:{opacity:[0,1]}}},"status-v3-quoted-msg":{enter:{props:{translateY:["0%","100%"],opacity:[1,0]},duration:200,easing:[.1,.82,.25,1]},leave:{props:{translateY:["100%","0%"],opacity:[0,1]},duration:200,easing:[.1,.82,.25,1]}},"status-v3-modal":{easing:[.55,.085,.68,.53],enter:{duration:100,selector:"[data-animate-status-v3-modal-background]",props:{opacity:[1,0]}},leave:{duration:100,selector:"[data-animate-status-v3-modal-background]",props:{opacity:[0,1]}}},"quoted-status-v3-modal":{easing:[.55,.085,.68,.53],enter:{duration:100,selector:"[data-animate-status-v3-viewer]",props:{opacity:[1,0]}},leave:{duration:100,selector:"[data-animate-status-v3-viewer]",props:{opacity:[0,1]}}},"status-v3-player":{easing:[.55,.085,.68,.53],enter:{duration:200,props:{opacity:[1,0]}},leave:{duration:200,props:{opacity:[0,1]}}},menu:{enter:{selector:"[data-animate-menu-icons-item]",props:"attach.Up",duration:700,stagger:30,drag:!1},leave:{selector:"[data-animate-menu-icons-item]",props:"attach.Down",duration:200,stagger:30}},emoji:{duration:300,easing:i,enter:{props:{height:[291,0]}},leave:{props:{height:[0,291]}}},ptt:{enter:[{selector:"[data-animate-btn-border]",easing:"easeInOut",props:{scaleX:[1,.5],scaleY:[1,.5],opacity:[1,0]},duration:250,delay:100},{selector:"[data-animate-ptt-counter]",easing:"easeInOut",props:{scaleX:[1,.8],scaleY:[1,.8],opacity:[1,0]},duration:250,delay:100},{props:{opacity:[1,0]},duration:150,easing:i}],leave:[{selector:"[data-animate-btn-border]",easing:i,props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]},duration:250},{selector:"[data-animate-ptt-counter]",easing:i,props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]},duration:250},{props:{opacity:[0,1]},duration:300,easing:i}]},"slide-left":{duration:300,easing:i,enter:{props:{translateX:["0%","100%"]}},leave:{props:{translateX:["100%","0%"]}}},"slide-left-rtl":{duration:300,easing:i,enter:{props:{translateX:["0%","-100%"]}},leave:{props:{translateX:["-100%","0%"]}}},"slide-forward":{duration:200,easing:[.19,.93,.18,.99],enter:{props:{translateX:["0%","100%"]}},leave:{props:{translateX:["-100%","0%"]}}},"slide-back":{duration:200,easing:[.19,.93,.18,.99],enter:{props:{translateX:["0%","-100%"]}},leave:{props:{translateX:["100%","0%"]}}},"media-slide-forward":{duration:200,easing:[.19,.93,.18,.99],enter:[{selector:"[data-animate-attach-media]",props:{opacity:[1,0],translateX:["0%","30%"]}},{selector:"[data-animate-media-caption]",props:{opacity:[1,0]}}],leave:[{selector:"[data-animate-attach-media]",props:{opacity:[0,1],translateX:["-30%","0%"]}},{selector:"[data-animate-media-caption]",props:{opacity:[0,1]}}]},"media-slide-back":{duration:200,easing:[.19,.93,.18,.99],enter:[{selector:"[data-animate-attach-media]",props:{opacity:[1,0],translateX:["0%","-30%"]}},{selector:"[data-animate-media-caption]",props:{opacity:[1,0]}}],leave:[{selector:"[data-animate-attach-media]",props:{opacity:[0,1],translateX:["30%","0%"]}},{selector:"[data-animate-media-caption]",props:{opacity:[0,1]}}]},"slide-down-date":{duration:300,enter:{props:{translateY:["0%","-130%"],opacity:[1,0]},easing:i},leave:{props:{translateY:["-130%","0%"],opacity:[0,1]},easing:o}},"slide-down-test":{duration:300,easing:i,enter:{props:{height:["auto","0"],opacity:[1,0]}},leave:{props:{translateY:["-130%","0%"],opacity:[0,1]}}},"pop-fast-reverse":{duration:75,easing:[.14,.62,.33,.9],enter:[{selector:"[data-js-context-icon]",props:{translateX:["0%","-100%"]}},{props:{opacity:[1,.5]}}],leave:[{selector:"[data-js-context-icon]",props:{translateX:["-100%","0%"]}},{props:{opacity:[0,1]}}]},"pop-fast":{duration:75,easing:[.14,.62,.33,.9],enter:[{selector:"[data-js-context-icon]",props:{translateX:["0%","100%"]}},{props:{opacity:[1,.5]}}],leave:[{selector:"[data-js-context-icon]",props:{translateX:["100%","0%"]}},{props:{opacity:[0,1]}}]},"pop-fast-chat":{duration:75,easing:[.14,.62,.33,.9],enter:[{props:{width:["20px","5px"],opacity:[1,.5]}}],leave:[{props:{width:["5px","20px"],opacity:[0,1]}}]},"toast-transition":{duration:300,easing:i,cleanOnComplete:!0,enter:{props:{translateY:["0%","100%"],opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},"slide-up-down":{duration:300,easing:i,enter:{props:{translateY:["0%","100%"]}},leave:{props:{translateY:["100%","0%"]}}},"slide-up-down-footer":{duration:200,easing:i,enter:[{props:{translateY:["0%","100%"]}},{selector:"[data-animate-btn]",props:{opacity:[1,0],scale:[1,0]},delay:200,duration:300}],leave:[{props:{translateY:["100%","0%"]},delay:200},{selector:"[data-animate-btn]",props:{opacity:[0,1],scale:[.6,1]},duration:200}]},"slide-up":{duration:300,easing:i,enter:{props:{translateY:["0%","100%"]}},leave:{props:{translateY:["100%","0%"]}}},"slide-down":{duration:300,easing:i,enter:{props:{translateY:["0%","-100%"]}},leave:{props:{translateY:["-100%","0%"]}}},"emoji-search-slide-away":{duration:300,enter:{easing:"easeOutCubic",props:{translateY:["0%","-100%"]}},leave:{easing:"easeInCubic",props:{translateY:["-100%","0%"]}}},"emoji-search-slide-away-fast":{duration:80,enter:{easing:"easeOutCubic",props:{translateY:["0%","-100%"]}},leave:{easing:"easeInCubic",props:{translateY:["-100%","0%"]}}},"emoji-search-panel-slide-up":{duration:300,easing:i,enter:{props:{translateY:["0%","100%"],opacity:[1,0]}},leave:{props:{translateY:["100%","0%"],opacity:[0,1]}}},none:{},btn:{duration:300,easing:i,enter:{props:{scale:[1,0],opacity:[1,0]}},leave:{props:{scale:[0,1],opacity:[0,1]}}},pop_delay:{duration:300,enter:[{props:{scale:[1,0],opacity:[1,0]},delay:500,easing:i}],leave:{props:"transition.expandOut",easing:o}},"delay-leave":{duration:1,enter:{props:{opacity:[1,1]}},leave:{props:{opacity:[1,1]},delay:300}},"media-caption":{enter:[{props:{opacity:[0,0],translateY:["100%","100%"]},duration:200},{props:{opacity:[1,0],translateY:["0%","100%"]},easing:i,delay:200,duration:300}],leave:{props:{opacity:[0,1]},easing:"ease",duration:300}},"media-scale":{enter:[{selector:"[data-animate-media-caption]",props:{opacity:[0,0],translateY:["100%","100%"]},duration:200},{selector:"[data-animate-media-caption]",props:{opacity:[1,0],translateY:["0%","100%"]},easing:i,delay:200,duration:300},{selector:"[data-animate-attach-media]",props:{opacity:[0,0]},duration:200},{selector:"[data-animate-attach-media]",props:{opacity:[1,0],scale:[1,.625],display:"flex"},delay:200,duration:300,easing:i}],leave:[{selector:"[data-animate-media-caption]",props:{opacity:[0,1]},easing:"ease",duration:300},{selector:"[data-animate-attach-media]",props:{opacity:[0,1],scale:[.5,1],display:"flex"},delay:0,duration:200,easing:o}]},"thumb-scale":{duration:400,easing:i,enter:{props:"transition.expandIn"},leave:{props:"transition.expandOut"}},"thumb-scale-flex":{duration:400,easing:i,enter:{props:{scale:[1,0],display:"flex"}},leave:{duration:200,props:{scale:[0,1],display:"flex"}}},default:{duration:300,enter:{props:{opacity:[1,0]}},leave:{props:{opacity:[0,1]}}},noop:{duration:0},"noop-full-opacity":{duration:0,enter:{props:{opacity:[1,1]}},leave:{props:{opacity:[1,1]}}},pip:{enter:{props:{opacity:[1,0]},duration:400},leave:{props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]},duration:200,easing:s}},voip:{enter:{props:{opacity:[1,0]},duration:400},leave:{props:{scaleX:[.5,1],scaleY:[.5,1],opacity:[0,1]},duration:200,easing:s}},"replace-fade":{enter:[{props:{opacity:[0,0]},duration:400},{props:{opacity:[1,0]},duration:400,delay:400}],leave:{props:{opacity:[0,1]},duration:400}}};t.default=u},80958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t instanceof e)return t;if("string"==typeof t)return new e((0,r.decodeB64)(t));return new e(t)};var r=n(92827)},53069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.reduce((function(e,t){return e+t.length}),0),r=new e(n),a=0;return t.forEach((function(e){r.set(e,a),a+=e.length})),r}},88828:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isBoolean=function(e){return"boolean"==typeof e}},73358:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.gteVersion=o,t.ltVersion=s,t.parseUA=u,t.default=void 0;var a=r(n(42238));function i(e,t){var n,r,a=/(\.0)+[^\.]*$/,i=(e+"").replace(a,"").split("."),o=(t+"").replace(a,"").split("."),s=Math.min(i.length,o.length);for(n=0;n<s;n++)if(0!==(r=parseInt(i[n],10)-parseInt(o[n],10)))return r;return i.length-o.length}function o(e,t){return i(e,t)>=0}function s(e,t){return i(e,t)<0}function u(e){var t=new a.default;t.setUA(e||"");var n=(t.getBrowser().name||"").toUpperCase(),r=t.getBrowser().version||"0.0.0",i=(t.getEngine().name||"").toUpperCase(),u=(t.getOS().name||"").toUpperCase(),l=t.getOS().version||"0.0.0",c="SAFARI"===n,d="CHROME"===n,f="GECKO"===i,p=!1;switch(u){case"MAC OS":d?p=o(l,"10.10")&&o(r,"41.0.0"):o(l,"10.7")&&(p=!0);break;case"WINDOWS":o(l,"8.1")&&(f||d&&o(r,"41.0.0"))&&(p=!0)}var h=c||d&&s(r,"76");return h=process.versions.chrome&&s(process.versions.chrome,"76"),{isWebkit:!i||"WEBKIT"===i,isGecko:f,isTrident:"TRIDENT"===i||"EDGEHTML"===i,isSafari:c,isElectron:!0,isBuggyVideoLoad:d&&o(r,"76")||"BLINK"===i&&!d,hasEmoji:p,troublesWithLotsOfVideos:d,supportsEmojiEllipsification:!h,isBrokenGetUserMedia:d&&s(r,"50"),isLocalStorageBroken:c&&o(r,"14.1"),os:u.toLowerCase(),osVersion:l,browser:n.toLowerCase(),browserVersion:r,parser:t,isChrome:d}}var l=u("undefined"!=typeof self?self.navigator.userAgent:null);t.default=l},17957:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r;return n=t=function(t){(0,s.default)(r,t);var n=(0,u.default)(r);function r(){return(0,i.default)(this,r),n.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var t=this;return this.state.hasError?null:c.default.createElement(p.default.Consumer,null,(function(n){return c.default.createElement(e,(0,a.default)({ref:t.setComponent},t.props,{uim:(0,l.default)(n,"uim")}))}))}}]),r}(f.WrappedComponent),t.defaultProps=null!==(r=e.defaultProps)&&void 0!==r?r:void 0,t.displayName=`UIM(${(0,d.default)(e)})`,n};var a=r(n(67154)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),u=r(n(99842)),l=r(n(91080)),c=r(n(67294)),d=r(n(99934)),f=n(67780),p=r(n(3609))},37618:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UIMState=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(96486)),s=n(54302).Mirrored(["ACTIVE","PASSIVE","INACTIVE","DEAD"]);t.UIMState=s;var u=function(){function e(t,n){(0,a.default)(this,e),this.shouldRequestFocus=!0,this.parent=t||this,t||(e.Manager.root&&(__LOG__(4,void 0,new Error,!0)`Attempting to set multiple UIM tree roots. Expecting only one.`,SEND_LOGS("multiple-uim-roots")),e.Manager.root=this),this.uie=n,this.children=[],this.state=n.getUIMState()}return(0,i.default)(e,null,[{key:"maybePreventScroll",value:function(t){var n=e.Manager.top&&e.Manager.top.uie.getNode();t.target instanceof HTMLElement&&n&&!n.contains(t.target)&&(t.preventDefault(),t.stopPropagation())}}]),(0,i.default)(e,[{key:"activate",value:function(){this.state=this._state}},{key:"branch",value:function(t){var n=new e(this,t);return this.children.push(n),e.pprint(),n}},{key:"pop",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.state!==s.DEAD){this._invalidateAndDismissChildren(this.children,n),o.default.remove(this.parent.children,(function(e){return e===t}));var a=e.findMostRecentlyActiveFocusable(this);a&&(a.shouldRequestFocus=r),e.Manager.top=a,e.pprint()}}},{key:"_invalidateAndDismissChildren",value:function(e,t){var n=this;e.forEach((function(e){e.state=s.DEAD,e.uie.requestDismiss(t),n._invalidateAndDismissChildren(e.children,t)}))}},{key:"state",get:function(){return this._state},set:function(t){switch(t){case s.ACTIVE:this.lastActive=Date.now(),e.Manager.top=this;break;case s.PASSIVE:this.lastActive=Date.now(),this._state!==s.ACTIVE&&(e.Manager.top=e.findMostRecentlyActiveFocusable());break;case s.INACTIVE:this._state&&this._state!==t&&(e.Manager.top=e.findMostRecentlyActiveFocusable());break;case s.DEAD:}this._state=t}}],[{key:"findMostRecentlyActiveFocusable",value:function(t){var n=e.Manager.root;if(n)return l(n,t,(function(e){return e.state===s.ACTIVE||e.state===s.PASSIVE}))}},{key:"findMostRecentlyActiveDismissable",value:function(t){var n=e.Manager.root;if(n)return l(n,t,(function(e){return e.state===s.ACTIVE}))||l(n,t,(function(e){return e.state===s.PASSIVE}))}},{key:"pprint",value:function(t){if(t||e.Manager.verbose){var n=e.Manager.root;n&&__LOG__(2)`${d(n,[])}`}}}]),e}();function l(e,t,n){if(!e.children.length)return e;var r=e.children.filter((function(e){return e!==t})).map((function(e){return l(e,t,n)})).concat([e]).filter(Boolean).filter(n);return o.default.maxBy(r,"lastActive")}u.State=s,u.Manager={_top:void 0,set top(e){e&&(e.lastActive=Date.now()),e&&this._top!==e&&e.state!==s.INACTIVE&&e.state!==s.DEAD&&e.shouldRequestFocus&&e.uie.requestFocus(),e&&(e.shouldRequestFocus=!0),this._top&&this._top.uie.popable()&&window.removeEventListener("wheel",u.maybePreventScroll,!0),e&&e.uie.popable()&&window.addEventListener("wheel",u.maybePreventScroll,!0),this._top=e},get top(){return this._top},refocusTopUie:function(){var e=this;setTimeout((function(){e._top&&document.activeElement===document.body&&e._top.uie.requestFocus()}),0)},root:void 0,verbose:!1};function c(e,t,n,r){var a;a=n&&r?"├─┬":n&&!r?"├──":!n&&r?"└─┬":"└──",e===u.Manager.root&&(a="▶");var i=e.uie.getDisplayName();e===u.Manager.top&&(i=`${i} ⬥`);var o=`(${function(e){switch(e){case s.ACTIVE:return"A";case s.PASSIVE:return"P";case s.INACTIVE:return"I";case s.DEAD:return"D"}}(e.state)})${r?"\n":""}`;return`${t.join("")}${a} ${i} ${o}`}function d(e,t,n){return c(e,t,n,!!e.children.length)+e.children.map((function(r,a){var i=a<e.children.length-1;return d(r,n?t.concat(["│ "]):t.concat(["  "]),i)})).join("\n")}window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=u.Manager.top,n=t&&t.state===s.ACTIVE?t:u.findMostRecentlyActiveDismissable();n&&n.uie.escapable()&&(e.stopPropagation(),e.preventDefault(),n&&n.uie.requestDismiss(!1))}}),{capture:!0});var f=null;function p(e,t){var n=e&&e.state===s.ACTIVE&&e.uie.popable()?e:u.findMostRecentlyActiveDismissable();if(!n||!n.uie.popable())return null;var r=n.uie.getNode();return r&&t.target instanceof Node&&r.contains(t.target)?null:n}window.addEventListener("mousedown",(function(e){if(f=null,e.screenX&&e.screenY){var t=p(u.Manager.top,e);t&&2===e.button?t.uie.requestDismiss():f=t}}),{capture:!0}),window.addEventListener("mouseup",(function(e){if(e.screenX&&e.screenY){var t=p(u.Manager.top,e);t&&t===f&&setTimeout((function(){return t.uie.requestDismiss()}),0),f=null}else f=null}),{capture:!0});var h=u;t.default=h},3609:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(67294).createContext)(null);t.default=r},30564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstNCodepoints=function(e,t){return a(e||"",0,t)},t.numCodepoints=function(e){return(0,r.length)(e||"")},t.substring=a,t.toArray=i,t.codePointAt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.codePointAt)return e.codePointAt(t);var n=e.charCodeAt(t);if(n>=55296&&n<=56319){var r=e.charCodeAt(t+1);r>=56320&&r<=57343&&(n=65536+(n-55296<<10)+(r-56320))}return n},t.firstNEncodedBytes=function(e,t){if(null==t)return e;if(encodeURI(e).length<=t)return e;for(var n=0,r=i(e),o=r.length,s=0;s<o;s++){var u=r[s],l=encodeURI(u).length;if(n+l>t)return a(e,0,s);n+=l}return e};var r=n(33473);function a(e,t,n){if(!e)return"";var a=t||0,i=null==n?1/0:n;return e.length,0===a&&i===1/0?e:e.length>=5e3&&i/e.length<=.5?function(e,t,n){var a,i=new RegExp(r.astralRange),o="",s=0;do{(a=i.exec(e))&&(o+=a[0]),s++}while(a&&s<n);return o}(e,0,i):(0,r.substring)(e,a,i)}function i(e,t,n){var a=e||"",i=t||0,o=null==n?1/0:n;return a.length>=5e3&&o/a.length<=.5?function(e,t,n){var a,i=new RegExp(r.astralRange),o=[];do{(a=i.exec(e))&&o.push(a[0])}while(a&&o.length<n);return o}(a,0,o):(0,r.toArray)(a).slice(i,o)}},17291:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.checkForUpdates=function(){return f.apply(this,arguments)},t.default=t.hasUpdate=t.PLATFORMS=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34263)),s=r(n(88430)),u=r(n(75934)),l=r(n(6497)),c={WEB:"web",DARWIN:"darwin",WIN32:"win32",MACSTORE:"darwin-store",WINSTORE:"win32-store",DARWIN_BETA:"darwin-beta",WIN32_BETA:"win32-beta"};t.PLATFORMS=c;var d=function(e){return[e.isBroken,e.isBelowSoft,e.isBelowHard,e.beta].some(Boolean)};function f(){return(f=(0,i.default)(a.default.mark((function e(){var t,r,i,u,f,p,h,_,v,m,g,y,E;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c[o.default.WAM_PLATFORM],r=o.default.VERSION_STR.replace(/\.[di]$/,""),i=null,e.prev=3,e.next=6,(0,s.default)(`${o.default.CHECK_UPDATE_URL}?version=${r}&platform=${t}`);case 6:if((u=e.sent).ok){e.next=9;break}throw Error(u.statusText);case 9:return e.next=11,u.json();case 11:i=e.sent,f=(new Date).toISOString(),__LOG__(2)`Updater: Checked at ${f} ${JSON.stringify({response:i,version:r})}`,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),__LOG__(4,void 0,new Error)`Updater: Version check failed`;case 19:if(i&&d(i)){e.next=21;break}return e.abrupt("return",!1);case 21:return h=(p=i).isBelowHard,_=p.isBelowSoft,v=p.hardUpdateTime,m=p.currentVersion,g=p.isBroken,y=p.beta,__LOG__(2)`Updater: App will update. ${JSON.stringify({response:i,version:r})}`,E=h?v:null,"web"===t?l.default.update(m,_,E):g?n(14094).default.needsManualDownload=!0:l.default.update(void 0,_,E,y),e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}t.hasUpdate=d;var p=new u.default({name:"updater",interval:1800,restingInterval:3600,randomIntervalExtension:180});t.default=p},28530:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DownloadState=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(99842)),u=n(1838),l=r(n(1073)),c=r(n(79140)),d=r(n(34263)),f=r(n(63984)),p=r(n(28681)),h=r(n(23393)),_=r(n(39638)),v=n(54302).Mirrored(["UPDATE_DOWNLOADED","UPDATE_NOT_AVAILABLE","ERROR"]);t.DownloadState=v;var m=function(e){(0,o.default)(r,e);var t=(0,s.default)(r);function r(){var e;return(0,a.default)(this,r),(e=t.call(this))._forceUpdateOnTakeOver=!1,e.latestUpdateIteration=0,e.activeVersion=new _.default(d.default.VERSION_BASE),f.default.onVersionChange((function(){return e.setForceUpdateOnTakeOver()})),e}return(0,i.default)(r,[{key:"setForceUpdateOnTakeOver",value:function(){this._forceUpdateOnTakeOver=!0}},{key:"shouldForceUpdateOnTakeOver",value:function(){var e=this._forceUpdateOnTakeOver;return this._forceUpdateOnTakeOver=!1,!!e}},{key:"isExpired",value:function(){return c.default.globalUnixTime()>Number(h.default)}},{key:"clearHardExpiration",value:function(){this.hardExpirationTimer&&(l.default.clearTimeout(this.hardExpirationTimer),this.hardExpirationTimer=void 0),this.stopListening(n(14094).default,"change:couldForce")}},{key:"update",value:function(){throw new u.UnimplementedMethod("Updater::update")}},{key:"restart",value:function(){throw new u.UnimplementedMethod("Updater::restart")}},{key:"manualDownload",value:function(){throw new u.UnimplementedMethod("Updater::manualDownload")}},{key:"killServiceWorker",value:function(){throw new u.UnimplementedMethod("Updater::killServiceWorker")}}]),r}(p.default);t.default=m},6497:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DownloadState",{enumerable:!0,get:function(){return c.DownloadState}}),t.default=t.Updater=t.Mode=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(2205)),l=i(n(99842)),c=a(n(28530)),d=i(n(1073)),f=i(n(5693)).default.require("AutoUpdater"),p=window.Native.ipcRenderer,h={IDLE:"IDLE",CHECKING:"CHECKING",DOWNLOADING:"DOWNLOADING",DOWNLOADED:"DOWNLOADED",ERROR:"ERROR"};t.Mode=h;var _=function(e){(0,u.default)(a,e);var t=(0,l.default)(a);function a(){var e,n;return(0,o.default)(this,a),(e=t.call(this))._initialModeFetch=null==f||null===(n=f.mode)||void 0===n?void 0:n.then((function(t){return e.mode=t,e.trigger("change:mode",t),__LOG__(2)`Renderer updater mode initialized as ${e.mode}`,e._initialModeFetch=void 0,t})).catch((function(t){e.mode=h.ERROR,e._initialModeFetch=void 0,__LOG__(4,void 0,new Error,!0)`AutoUpdater failed mode failed ${String(t)}`,SEND_LOGS("mode-fetch-failed")})),p.on("autoUpdater:mode",(function(t,n){e.mode=n,e.trigger("change:mode",n),__LOG__(2)`Renderer updater mode changed to ${e.mode}`})),p.on("autoUpdater:updateVersion",(function(t,n){e.updateVersion=n})),e}return(0,s.default)(a,[{key:"update",value:function(e,t,a,i){var o=this,s=++this.latestUpdateIteration;this.clearHardExpiration();var u=n(14094).default;"number"==typeof a&&(this.hardExpirationTimer=d.default.setLocalTimeout((function(){return u.clientExpired=!0,o._update(i).then((function(e){e===c.DownloadState.UPDATE_DOWNLOADED&&o.restart()}))}),Date.now()+a));var l=r.all([this._initialModeFetch,this.updateInProgress,this._waitUntilSettled()]).then((function(){return o._update(i)})).tap((function(e){o.updateInProgress=void 0,s===o.latestUpdateIteration&&e!==c.DownloadState.ERROR&&(e!==c.DownloadState.UPDATE_NOT_AVAILABLE||o.updateVersion)&&(u.needsUpdate=!(!t&&"number"!=typeof a),"number"==typeof a&&o.listenToAndRun(u,"change:couldForce",(function(){u.couldForce&&o.restart()})))}));return this.updateInProgress=l,l}},{key:"_update",value:function(e){var t=this;return f.setBeta(e),f.tryUpdate().then((function(e){return e?t._waitUntilChecking().then((function(){return t._waitUntilSettled()})):c.DownloadState.UPDATE_NOT_AVAILABLE}))}},{key:"_waitUntilChecking",value:function(){var e,t=this;return this.mode===h.CHECKING||this.mode===h.DOWNLOADING?r.resolve():new r((function(n){e=function(){if(t.mode===h.CHECKING||t.mode===h.DOWNLOADING)return t.off("change:mode",e),n()},t.on("change:mode",e)}))}},{key:"_waitUntilSettled",value:function(){var e,t=this;return this.mode===h.IDLE||this.mode===h.DOWNLOADED?r.resolve(c.DownloadState.UPDATE_NOT_AVAILABLE):this.mode===h.ERROR?r.resolve(c.DownloadState.ERROR):new r((function(n){e=function(){if(t.mode===h.IDLE)return t.off("change:mode",e),n(c.DownloadState.UPDATE_NOT_AVAILABLE);t.mode===h.DOWNLOADED?(t.off("change:mode",e),n(c.DownloadState.UPDATE_DOWNLOADED)):t.mode===h.ERROR&&(t.off("change:mode",e),n(c.DownloadState.ERROR))},t.on("change:mode",e)}))}},{key:"restart",value:function(e){return e?this.update(void 0,!0,0):(__LOG__(2)`App restarted`,f.quitAndInstall(),r.resolve(c.DownloadState.UPDATE_DOWNLOADED))}},{key:"manualDownload",value:function(){f.manualDownload()}}]),a}(c.default);t.Updater=_;var v=new _;t.default=v},39638:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(93913)),i=r(n(34575)),o=r(n(2205)),s=r(n(99842)),u=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return n}((0,n(1838).customError)("InvalidVersion")),l=function(){function e(t){(0,i.default)(this,e);var n=t.split(".");if(3!==n.length)throw new u("Version format does not contain 3 numbers.");if(this.primary=Number.parseInt(n[0],10),this.secondary=Number.parseInt(n[1],10),this.tertiary=Number.parseInt(n[2],10),Number.isNaN(this.primary)||Number.isNaN(this.secondary)||Number.isNaN(this.tertiary))throw new u("Version contains a non-parseable string.")}return(0,a.default)(e,[{key:"lt",value:function(t){var n=t;return"string"==typeof n&&(n=new e(n)),this.primary<n.primary||this.primary===n.primary&&this.secondary<n.secondary||this.primary===n.primary&&this.secondary===n.secondary&&this.tertiary<n.tertiary}},{key:"equals",value:function(t){var n=t;return!!n&&("string"==typeof n&&(n=new e(n)),this.primary===n.primary&&this.secondary===n.secondary&&this.tertiary===n.tertiary)}},{key:"toString",value:function(){return`${this.primary}.${this.secondary}.${this.tertiary}`}}]),e}();t.default=l},69267:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.URL_REGEX=void 0;var a,i=n(17643),o=n(92827),s=r(n(96486)),u=r(n(8575)),l=n(19059),c=n(97223),d=r(n(24357)),f=n(88828),p=r(n(20997)),h=/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/;t.URL_REGEX=h;var _={build:function(e,t){var n=new p.default;return s.default.forOwn(t||{},(function(e,t){n.set(t,e)})),`${e}?${n.toString()}`},canMuckHistory:function(){return!!((0,c.isConnectedToPage)()&&window.history&&window.history.pushState&&self.location)},relToAbs:function(e){return a||(a=document.createElement("a")),a.href=e,a.href},hostname:s.default.memoize((function(e){return a||(a=document.createElement("a")),a.href=this.isHttp(e)?e:"http://"+e,a.hostname})),withoutWww:function(e){return e.split("www.").join("")},isHttp:function(e){return e&&("https://"===e.toLowerCase().substring(0,8)||"http://"===e.toLowerCase().substring(0,7))},isHttps:function(e){return e&&"https://"===e.toLowerCase().substring(0,8)},hasValidUrlScheme:function(e){var t=e.trim();return["irc://","ftp://","mailto:","http://","https://"].some((function(e){return 0===t.toLowerCase().indexOf(e)}))},isBlob:function(e){return(0,f.isString)(e)&&"blob:"===e.substring(0,5)},isData:function(e){return(0,f.isString)(e)&&"data:"===e.substring(0,5)},isEncryptedMedia:function(e){return e&&(0,f.isString)(e)&&e.endsWith(".enc")},parseDataURL:function(e){var t=e.indexOf(":"),n=e.indexOf(";"),r=e.indexOf(",");return{mimetype:e.substring(t+1,n),data:e.substring(r+1)}},dataURLtoFile:function(e){var t=this.parseDataURL(e).mimetype;return(0,l.createFile)([window.dataURLtoBlob(e)],"",{type:t})},GSM_NAME:"gme-whatsappinc",GSM_NUMS:"LM4NgcjF-X_EedaZ6MwPVSH0Sac=",gsmURL:function(e,t){var n=t.replace(/\-/g,"+").replace(/_/g,"/"),r=(0,o.decodeB64)(n),a=u.default.parse(e).path,s=i.Binary.build(a).readByteArray();return new d.default(r).sign(s).then((function(t){return`${e}&signature=${(0,o.encodeB64UrlSafe)(t)}`}))},thumbToCSSURL:function(e){return`url("${this.isHttp(e)||e.startsWith("data:")?e:`data:image/jpeg;base64,${e}`}")`},thumbAsBackgroundImage:function(e){return e?{backgroundImage:this.thumbToCSSURL(e)}:{}},isValid:function(e){return h.test(e)}};t.default=_},13839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if((0,r.isConnectedToPage)()){return n(14094).default.available}return!1};var r=n(97223)},38210:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.vcardGetDate=function(e){var t=e;return u.default.forEach([/-([^-]*)-([^-]*)-([^-]*)/,/([^-]*)-([^-]*)-([^-]*)/],(function(n){var r=e.match(n);if(r){var a=!r[1].length||"1604"===r[1],i=a?"0000":r[1];return t=(0,l.default)(`${i}-${r[2]}-${r[3]}`).format("l"),a&&(t=t.replace(/[.,-\/\s]*0000[.,-\/\s]*/,"")),!1}})),t},t.vcardGetOrganizationString=function(e){var t=e.ORG&&e.ORG[0],n=e.TITLE&&e.TITLE[0];if(t&&Array.isArray(t.value)&&t.value.length>0){var r=null;n&&n.value&&(r=`${n.value}`.trim());var a=(0,i.default)(t.value),o=a[0],s=a.slice(1);s.push(o);var u=s.map((function(e){return(0,f.isString)(e)?e.trim():""})).filter((function(e){return e.length})).join(c.default.t(658));return(r||"")+(r&&r.length&&u.length?" - ":"")+u}return""},t.vcardGetType=function(e){var t=(0,a.default)({jabber:c.default.t(1513),"skype-username":c.default.t(1518),skype:c.default.t(1518),msn:c.default.t(1515),aim:c.default.t(1503),yahoo:c.default.t(1521),icq:c.default.t(1511),"wa-biz-description":c.default.t(1505)},y,c.default.t(1506)),n=e.properties["X-ABLabel"]||t[e.type.toLowerCase()];if(n)return function(e){if(!e)return;return e.replace(/^_\$!<([^>]*)>!\$_$/,"$1").replace(/\\,/,",").replace(/\\;/,";").replace(/\\\\/,"\\")}(n);var r={TEL:[[["cell"],c.default.t(1507)],[["iphone"],c.default.t(1512)],[["main"],c.default.t(1514)],[["home","fax"],c.default.t(1510)],[["work","fax"],c.default.t(1520)],[["home"],c.default.t(1509)],[["work"],c.default.t(1519)],[["pager"],c.default.t(1517)],[[],c.default.t(1509)]],EMAIL:[[["home"],c.default.t(1509)],[["work"],c.default.t(1519)],[["internet"],c.default.t(1508)]],URL:[[["home"],c.default.t(1509)],[["work"],c.default.t(1519)]],ADR:[[["home"],c.default.t(1509)],[["work"],c.default.t(1519)]]};return n=e.type,u.default.forOwn(r,(function(t){if(t){var r=(0,o.default)(t,2),a=r[0],i=r[1];if(0===u.default.difference(a,u.default.map(e.properties.type,(function(e){return e.toLowerCase()}))).length)return n=i,!1}})),n},t.vcardWids=function(e){var t=[];e&&e.TEL&&e.TEL.forEach((function(e){e.properties&&e.properties.waid&&e.properties.waid.length>0&&(t=t.concat(u.default.map(e.properties.waid,_.createUserWid)))}));return t},t.parseVcard=w,t.vcardSerialize=function(e){return e.map((function(e){return e.line.replace(/(.{75,75})/g,"$1\n ").replace(/\n^-$/gm,"")})).join("\n")},t.vcardThumbnail=function(e){if(!e)return;var t=e.PHOTO;if(t&&t[0]&&p.default.isData(t[0].value))return t[0].value},t.vcardGetName=A,t.vcardGetNameFromParsed=function(e){var t=null,n=e.FN,r=e.NICKNAME,a=e.TEL;if(n&&n[0])t=n[0].value;else if(r&&r[0])t=r[0].value;else if(a&&a[0]){var i,o=a[0],s=null===(i=o.properties.waid)||void 0===i?void 0:i[0];t=s?(0,h.default)(s):o.value}return t},t.vcardFromContactModel=function(e){var t,n=T(e.formattedName),r=["BEGIN:VCARD","VERSION:3.0",`N:${A(e)}`,`FN:${n}`,`TEL;type=CELL;waid=${String(e.userid)}:${(0,h.default)(e.userid)}`,e.isBusiness?`X-WA-BIZ-NAME:${n}`:null,(null===(t=e.businessProfile)||void 0===t?void 0:t.description)?`X-WA-BIZ-DESCRIPTION:${T(e.businessProfile.description)}`:null,"END:VCARD"].filter(Boolean);return{displayName:n,vcard:r.join("\n"),isMultiVcard:!1}},t.getNameString=C,t.getNameStringFromNames=O,t.mergeVcards=function(e){if(0===e.length)throw new Error("No vcards provided");return 1===e.length?e[0]:{displayName:C(e),vcard:e.map((function(e){return e.vcard})).join("\n"),isMultiVcard:!0}},t.parseMultiVcard=function(e){var t=e.match(/BEGIN:VCARD([\s\S]*?)END:VCARD/g);return t?t.map((function(e){return w(e)})).filter(Boolean):[]},t.vcardIsBiz=function(e){return(e.SERVICE||[]).some((function(e){return e.type.toLowerCase()===y&&e.value}))},t.Field=void 0;var a=r(n(59713)),i=r(n(68551)),o=r(n(63038)),s=r(n(34575)),u=r(n(96486)),l=r(n(30381)),c=r(n(89115)),d=r(n(35643)),f=n(88828),p=r(n(69267)),h=r(n(78422)),_=n(75793),v=/X-([^;:]+)(?:;[^:]+)*:(.+)/,m={"X-ABLabel":[/X-ABLabel(?:;([^:]+))*:(.+)/,1],ADR:[/ADR(?:;([^:]+))*:;;(.*);(.*);(.*);(.*);(.*)/,5],"X-ABADR":[/X-ABADR(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.*)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1],TEL:[/TEL(?:;([^:]+))*:(.+)/,1]},g={N:[/N(?:;([^:]+))*:([^;]*);([^;]*);([^;]*);([^;]*);(.*)/,5],FN:[/FN(?:;([^:]+))*:(.*)/,1],NICKNAME:[/NICKNAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-FIRST-NAME":[/X-PHONETIC-FIRST-NAME(?:;([^:]+))*:(.*)/,1],"X-PHONETIC-LAST-NAME":[/X-PHONETIC-LAST-NAME(?:;([^:]+))*:(.*)/,1],ORG:[/ORG(?:;([^:]+))*:([^;]*)(?:;(.*))*/,2],TITLE:[/TITLE(?:;([^:]+))*:(.*)/,1],TEL:[/TEL(?:;([^:]+))*:(.*)/,1],PHOTO:[/PHOTO(?:;([^:]+))*:(.*)/,1],BDAY:[/BDAY(?:;([^:]+))*:(.*)/,1],URL:[/URL(?:;([^:]+))*:(.+)/,1],EMAIL:[/EMAIL(?:;([^:]+))*:(.+)/,1]},y="wa-biz-name",E=function e(t,n,r,a){(0,s.default)(this,e),this.type=t,this.index=n,this.properties=r||{},this.value=a};function S(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function b(e){var t={};return e?(e.split(";").forEach((function(e){var n=e.split(/=/);if(1===n.length){var r=n[0];S(t,r.toLowerCase(),!0)}else if(2===n.length){var a=(0,o.default)(n,2),i=a[0],s=a[1];S(t,i.toLowerCase(),s.toLowerCase())}})),t):t}function T(e){return e?e.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,"):""}function w(e){var t=e.replace(/\r?\n|\r/g,"\n").replace(/\n^[ \t]/gm,"").split("\n").filter((function(e){return 0!==e.trim().length})),n={},r={};if(!(t.length<3)){var a=t[0].trim().toUpperCase(),i=t[1].trim().toUpperCase(),s=t[t.length-1].trim().toUpperCase(),l="VERSION:2.1"===i||"VERSION:3.0"===i||"VERSION:4.0"===i;if("BEGIN:VCARD"!==a||!l||"END:VCARD"!==s)return __LOG__(4,void 0,new Error,!0)`vcard:parse failed because the vCard is not formatted as expected:
Header as expected? ${String("BEGIN:VCARD"===a)}
Version as expected? ${String(l)}
Footer as expected? ${String("END:VCARD"===s)}
Lines: ${t.length}`,void SEND_LOGS("vcard-fault");for(var c=2;c<t.length-1;c++){var p=t[c],h=p.match(/item(\d+)\.(.*)/),_=h?h[2]:p,y=(0,d.default)(_.match(/([^:;]*)[:;].*/),"field.match(/([^:;]*)[:;].*/)")[1],T=h?m:g,w=y,A=y,C=void 0,O=void 0;if(T[w]){var M=(0,o.default)(T[w],2),I=M[0],k=M[1],P=_.match(I);P&&(C=b(P[1]),O=1===k?O=P[2]:P.slice(2,2+k))}else{var R=_.match(v);R&&(A="SERVICE",w=R[1],O=R[2],C={})}if((Array.isArray(O)?O:[O]).some((function(e){return e&&(0,f.isString)(e)&&e.trim()})))if(h){var D=h[1];r[D]?r[D].fields.push(new E(w,null,C,O)):r[D]={type:w,index:c,key:A,properties:C,value:O,fields:[]}}else S(n,A,new E(w,c,C,O))}return Object.keys(r).forEach((function(e){var t=r[e],a=t.key,i=t.index,o=t.type,s=t.value,u=t.properties;t.fields.forEach((function(e){u[e.type]=e.value})),S(n,a,new E(o,i,u,s))})),function(e){var t={};return u.default.forOwn(e,(function(e,n){t[n]=u.default.sortBy(e,(function(e){return e.index}))})),t}(n)}}function A(e){var t=u.default.filter(e.formattedName.split(e.formattedShortName)),n=t.length?t[0].trim():void 0,r=n?e.formattedShortName:e.formattedName;return`${T(n)};${T(r)};;;`}function C(e){return O(e.map((function(e){return e.displayName})))}function O(e){var t=e.find((function(e){return!!e}));return e.length?t?1===e.length?t:c.default.t(1082,{contactName:t,count:e.length-1,_plural:e.length-1}):c.default.t(1084,{count:e.length,_plural:e.length}):c.default.t(1083)}t.Field=E},77478:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!e)return r.resolve();for(var a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];if("string"==typeof t&&(t===u||t===l))return s.default.apply(void 0,[e,t,n].concat(i));d(e,(function(e){var t=c.get(e)||0;c.set(e,t+1)}));var p=t;if("object"==typeof n&&"object"==typeof p){var h;"function"==typeof n.begin&&(h=n.begin),n.begin=function(e){for(var t in p){var n=p[t];Array.isArray(n)&&(0,s.hook)(e,t,n[1])}h&&h(e)}}return s.default.apply(void 0,[e,t,n].concat(i)).then((function(e){return d(e,(function(e){var t=(c.get(e)||1)-1;0===t?(c.delete(e),f(e)):c.set(e,t)})),e}))};var o=i(n(96486)),s=a(n(12641)),u="finish",l="stop",c=new Map;function d(e,t){Array.isArray(e)?e.forEach((function(e){t(e)})):t(e)}function f(e){var t=s.default.Utilities.data(e),n=s.default.State.delayedElements;o.default.forOwn(n,(function(t,r){"count"!==r&&(t!==e&&t||delete n[r])})),t&&t.velocity&&t.velocity.tweensContainer&&(t.velocity.tweensContainer.element=null),s.default.Utilities.removeData(e,["fxqueue","velocity"])}},38512:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(81109)),s=i(n(6479)),u=i(n(34575)),l=i(n(93913)),c=i(n(2205)),d=i(n(99842)),f=i(n(96486)),p=a(n(67294)),h=n(53175),_=i(n(34541)),v=a(n(98569)),m=n(78499),g=n(42594),y=i(n(19145)),E=n(88828),S=i(n(77478)),b="enter",T="leave",w="appear",A=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._isUnmounted=!1,e.setBusy=function(){e.busyId=g.UIBusyTasks.setBusy(e.busyId),e.isBusy||(e.isBusy=!0,_.default.setUiBusy(!0,"vtg"))},e.unsetBusy=function(){null!=e.busyId&&(g.UIBusyTasks.clearBusy(e.busyId),delete e.busyId),e.isBusy&&(e.uiBusy=!1,_.default.setUiBusy(!1,"vtg"))},e.componentWillAppear=function(t){e.animateIfEnabled(w,t)},e.componentWillEnter=function(t){e.animateIfEnabled(b,t)},e.componentWillLeave=function(t){e.animateIfEnabled(T,t)},e}return(0,l.default)(n,[{key:"_getTransition",value:function(){var e=this.props.transitionName;if(e&&!y.default[e])throw __LOG__(4,void 0,new Error,!0)` ${e} wasn't found in VelocityTransitionGroupChild transitions.`,SEND_LOGS("transition-name"),new Error("Invalid transitionName");return e?y.default[e]:y.default.default}},{key:"animateIfEnabled",value:function(e,t){var n=this,r=!1;switch(e){case b:r=this.props.transitionEnter;break;case T:r=this.props.transitionLeave;break;case w:r=this.props.transitionAppear}r?(this.setBusy(),this.animateTransitions(e).finally((function(){n.unsetBusy()})).checkpoint(this.rejectOnUnmount()).then((function(){(0,E.isFunction)(t)&&t()})).catchType(v.Unmount,(function(){}))):t()}},{key:"getTransitionNodes",value:function(e,t){var n=t;Array.isArray(n)||(n=[n]);var r={};return n.map((function(t){var n,a=t.selector,i=(0,s.default)(t,["selector"]);return n=a?a in r?r[a]:r[a]=e?Array.from(e.querySelectorAll(a)):void 0:e,f.default.isEmpty(n)?void 0:(0,o.default)({nodes:n},i)})).filter(Boolean)}},{key:"blockAction",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"animateTransitions",value:function(e){var t=this,n=e,a=this.props,i=a.delay,o=void 0===i?0:i,s=a.children,u=a.onAnimationComplete,l=p.Children.only(s).staggerDelay;n===w&&(n=b);var c=this._getTransition(),d=c[n];if(!c||!d)return r.resolve();var h=f.default.omit(c,T,b),_=(0,m.forbiddenFindDOMNode)(this,window.Node),v=this.getTransitionNodes(_,d);return n===T&&_&&_.setAttribute&&_.addEventListener&&(_.setAttribute("pointerEvents","none",_),_.addEventListener("keypress",this.blockAction,!0),_.addEventListener("keydown",this.blockAction,!0)),r.all(v.map((function(e){var t=e.nodes,n=e.props,r=e.easing,a=e.duration,i=e.delay,s=e.stagger,u=e.drag;return(0,S.default)(t,n,{easing:r||h.easing||"easeInSine",duration:a||h.duration||0,delay:l||o||i||h.delay||0,queue:h.queue||!1,stagger:s||!1,drag:u||!1})}))).finally((function(){h.cleanOnComplete&&n===b&&v.forEach((function(e){var t=e.nodes;(Array.isArray(t)?t:[t]).forEach((function(e){return e.removeAttribute("style")}))})),n===T&&_&&_.removeEventListener&&(_.removeEventListener("keypress",t.blockAction,!0),_.removeEventListener("keydown",t.blockAction,!0)),u&&u()}))}},{key:"componentWillUnmount",value:function(){this._isUnmounted=!0,this._rejectPromise&&this._rejector(new v.Unmount);var e=(0,m.forbiddenFindDOMNode)(this,window.Node);(0,S.default)(e,"finish")}},{key:"rejectOnUnmount",value:function(){var e=this;return this._rejectPromise||(this._rejectPromise=new r((function(t,n){e._rejector=n})),this._rejectPromise.catch((function(){})),this._isUnmounted&&this._rejector(new v.Unmount)),this._rejectPromise}},{key:"render",value:function(){return p.Children.only(this.props.children)}}]),n}(p.Component);A.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},A.displayName="VelocityTransitionGroupChild";var C=function(e){(0,c.default)(n,e);var t=(0,d.default)(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._wrapChild=function(t){return p.default.createElement(A,e.props,t)},e}return(0,l.default)(n,[{key:"render",value:function(){return p.default.createElement(h.TransitionGroup,{childFactory:this._wrapChild,className:this.props.className,transitionName:this.props.transitionName,component:this.props.component,children:this.props.children})}}]),n}(p.Component);t.default=C,C.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},C.displayName="VelocityTransitionGroup"},82170:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.waitForOnlineNaive=function(){return(0,i.default)(self,"online").then((function(){return(0,a.delayMs)(100)}))};var a=n(53615),i=r(n(39873))},39858:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getWallpaperColors=f,t.toggleWallpaperColor=function(e,t){var n=f(t);if(e===a.default.DEFAULT_CHAT_WALLPAPER)return a.default.DEFAULT_CHAT_WALLPAPER;if(i.default.wallpapersV2){var r=n.findIndex((function(t){return t.toUpperCase()===e.toUpperCase()}));if(-1!==r)return"light"===t?d[r]:c[r]}return e},t.colorExistsInTheme=function(e,t){var n=f(t);return e===a.default.DEFAULT_CHAT_WALLPAPER||n.some((function(t){return t.toUpperCase()===e.toUpperCase()}))},t.getWallpaperColorPropValue=p,t.getDoodleOpacity=function(e,t){if(i.default.wallpapersV2){var n=p(e,t,"opacity");if(n)return n}return"0.06"},t.getDoodleAssetName=function(e,t){if(i.default.wallpapersV2&&"light"===t&&e!==a.default.DEFAULT_CHAT_WALLPAPER){var n=p(e,t,"doodle");if(n)return`data-asset-chat-background-${n}`}return`data-asset-chat-background-${t}`},t.invertTransparentWallpaperColors=function(e,t){if(i.default.wallpapersV2)return"light"===e&&t!==a.default.DEFAULT_CHAT_WALLPAPER&&!!p(t,e,"invertTransparentWallpaperColors");var n=s.includes(t);return!!f(e).includes(t)&&(n?"light"===e:"dark"===e)};var a=r(n(34263)),i=r(n(63056)),o=["#ccebdc","#aed8c7","#7acba5","#c7e9eb","#a9dbd8","#68d5d9","#6ec3d4","#f2dad5","#f2d5e1","#fbcad2","#ffa7a8","#cbdaec","#d7d3eb","#e5c0eb","#d0deb1","#dee0b4","#e6dfa8","#f7e9a8","#ffd1a4","#ff8a8c","#ff5978","#f56056","#dc6e4f","#e6e365","#73c780","#2293a4","#219ed9","#2b5aa6","#74676a","#48324d","#dee3e9","#d9dade","#c0c1c4","#7e90a3","#55626f","#243640","#162127"],s=["#ff8a8c","#ff5978","#f56056","#dc6e4f","#73c780","#2293a4","#219ed9","#2b5aa6","#74676a","#48324d","#7e90a3","#55626f","#243640","#162127"],u={"#BBE4E5":{doodle:"dark",opacity:"0.42"},"#AED8C7":{doodle:"dark",opacity:"0.3"},"#7ACBA5":{doodle:"dark",opacity:"0.26"},"#CBDAEC":{doodle:"dark",opacity:"0.42"},"#66D2D5":{doodle:"dark",opacity:"0.26"},"#63BDCF":{doodle:"dark",opacity:"0.26"},"#D6D0F0":{doodle:"dark",opacity:"0.36"},"#CECECE":{doodle:"dark",opacity:"0.36"},"#D1DABE":{doodle:"dark",opacity:"0.36"},"#E6E1B1":{doodle:"dark",opacity:"0.42"},"#FEEFA9":{doodle:"light",opacity:"0.06"},"#FED297":{doodle:"dark",opacity:"0.42"},"#FD9A9B":{doodle:"dark",opacity:"0.26"},"#FD6769":{doodle:"dark",opacity:"0.26"},"#FB4668":{doodle:"dark",opacity:"0.26"},"#922040":{doodle:"dark",opacity:"0.17",invertTransparentWallpaperColors:!0},"#DC6E4F":{doodle:"dark",opacity:"0.2"},"#644D52":{doodle:"dark",opacity:"0.13",invertTransparentWallpaperColors:!0},"#517E7E":{doodle:"dark",opacity:"0.13"},"#3190BB":{doodle:"dark",opacity:"0.13"},"#35558A":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#55626F":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#1D2326":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#301E34":{doodle:"dark",opacity:"0.1",invertTransparentWallpaperColors:!0},"#ECF0F1":{doodle:"light",opacity:"0.06"},"#FFFEA2":{doodle:"light",opacity:"0.06"},"#E7E8D2":{doodle:"light",opacity:"0.06"}},l={"#0F2424":{doodle:"dark",opacity:"0.05"},"#12261F":{doodle:"dark",opacity:"0.055"},"#11241C":{doodle:"dark",opacity:"0.055"},"#111E27":{doodle:"dark",opacity:"0.06"},"#0F2224":{doodle:"dark",opacity:"0.06"},"#0E2125":{doodle:"dark",opacity:"0.055"},"#1F1D25":{doodle:"dark",opacity:"0.06"},"#212121":{doodle:"dark",opacity:"0.055"},"#1F211C":{doodle:"dark",opacity:"0.055"},"#23231B":{doodle:"dark",opacity:"0.055"},"#262419":{doodle:"dark",opacity:"0.055"},"#261F17":{doodle:"dark",opacity:"0.055"},"#261717":{doodle:"dark",opacity:"0.055"},"#260F10":{doodle:"dark",opacity:"0.06"},"#260A10":{doodle:"dark",opacity:"0.07"},"#19050B":{doodle:"dark",opacity:"0.075"},"#21100C":{doodle:"dark",opacity:"0.07"},"#0F0C0C":{doodle:"dark",opacity:"0.065"},"#101919":{doodle:"dark",opacity:"0.06"},"#0A1D25":{doodle:"dark",opacity:"0.055"},"#0D1523":{doodle:"dark",opacity:"0.065"},"#0D0F11":{doodle:"dark",opacity:"0.07"},"#0A0C0D":{doodle:"dark",opacity:"0.07"},"#110B12":{doodle:"dark",opacity:"0.07"},"#1E1F1F":{doodle:"dark",opacity:"0.055"},"#262618":{doodle:"dark",opacity:"0.055"},"#23231F":{doodle:"dark",opacity:"0.055"}},c=Object.keys(u),d=Object.keys(l);function f(e){return i.default.wallpapersV2?"light"===e?c:d:o}function p(e,t,n){var r="light"===t?u:l;for(var a in r)if(a.toUpperCase()===e.toUpperCase())return r[a][n];return null}},51818:(e,t,n)=>{"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fibonacci=function(e,t,n){if("number"==typeof n){var r=n;return function(n){switch(n.failGeneration){case 0:return Math.min(r,t);case 1:return Math.min(r,e+t);default:return Math.min(r,n.waitDuration+n.prevWaitDuration)}}}return function(n){switch(n.failGeneration){case 0:return t;case 1:return e+t;default:return n.waitDuration+n.prevWaitDuration}}},t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),u=a(n(99842)),l=n(12035),c=r(n(56727)),d=r(n(70371)),f=function(e){(0,s.default)(n,e);var t=(0,u.default)(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).failGeneration=(0,c.session)(0),e.ts=(0,c.session)(),e.waitDuration=(0,c.session)(0),e.prevWaitDuration=(0,c.session)(0),e.jitter=(0,c.session)(0),e.shiftTimer=(0,c.session)(),e.waitAlgorithm=(0,c.session)(),e.onActivated=(0,c.session)(),e.onDeactivated=(0,c.session)(),e.onFed=(0,c.session)(),e.onTimeout=(0,c.session)(),e}return(0,o.default)(n,[{key:"initialize",value:function(){var e=this;this.shiftTimer=new l.ShiftTimer((function(){return h.call(e)}))}},{key:"activate",value:function(){this.shiftTimer.isScheduled()||(this._run(!0),this.onActivated&&this.onActivated(this))}},{key:"deactivate",value:function(){this.shiftTimer.isScheduled()&&(this.shiftTimer.cancel(),this.onDeactivated&&this.onDeactivated(this))}},{key:"feed",value:function(){this.shiftTimer.isScheduled()&&(this._run(!0),this.onFed&&this.onFed(this))}},{key:"forceTimeout",value:function(e){this.shiftTimer.isScheduled()?null!=e&&0!==e?(this.shiftTimer.onOrBefore(e),this.ts=this.shiftTimer.ts):this.shiftTimer.forceRunNow():__LOG__(3)`forced non-running watchdog!`}},{key:"poke",value:function(){this.forceTimeout.apply(this,arguments)}},{key:"resetGeneration",value:function(){this.failGeneration=0}},{key:"_run",value:function(e){e&&this.resetGeneration();var t=this.waitAlgorithm(this),n=this.jitter*Math.random()*t;this.shiftTimer.debounce(t+n),this.set({ts:this.shiftTimer.ts,waitDuration:t,prevWaitDuration:this.waitDuration})}}]),n}(c.default),p=(0,c.defineModel)(f);function h(){var e=this.onTimeout;if(!e)return __LOG__(3)`Watchdog timed-out without handler!`,void d.upload({reason:"watchdog-no-handler"});this.failGeneration++,e(this)&&this._run(!1)}t.default=p},54844:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e){var t,n;try{t=new O(e)}catch(e){return __LOG__(3)`WatchedSocket error constructing: ${e}`,E.default.reject(e)}return new E.default(t,(function(e,t){this.id=(O.numSocketsAttempted++).toString(),__LOG__(2)`WatchedSocket opening socket ${this.id}`,n=new v.default.WebcWsOpen;var r=(0,m.openSocket)(this.url);r.binaryType="arraybuffer",r.onopen=e,r.onclose=r.onerror=function(e){t(new h.SocketError(e))},this.socket=r})).cancellable().catch((function(e){if(__LOG__(2)`WatchedSocket error on open of ${this.id}: ${e}`,this.socket){var t=this.socket;switch(t.readyState){case WebSocket.CONNECTING:t.onopen=null;case WebSocket.OPEN:t.onerror=null,t.onclose=null,t.close();break;case WebSocket.CLOSING:case WebSocket.CLOSED:t.onerror=null,t.onclose=null}}throw e})).then((function(){__LOG__(2)`WatchedSocket opened socket ${this.id}`,n.markWebcWsOpenT(),n.commit();var e=this.socket;return e.onmessage=this._onMessage.bind(this),e.onerror=this._onCloseOrError.bind(this,!0),e.onclose=this._onCloseOrError.bind(this,!1),this._offlineListener=(0,b.default)().then(this.close.bind(this,!1,"offline")).catchType(r.CancellationError,(function(){})),this._pingTimer.onOrAfter(I()),this.state=A.OPEN,this}))},t.default=t.STATE=void 0;var o=i(n(34575)),s=i(n(93913)),u=i(n(2205)),l=i(n(99842)),c=n(12035),d=i(n(96486)),f=a(n(56727)),p=a(n(70371)),h=a(n(98569)),_=a(n(70496)),v=i(n(8643)),m=n(15933),g=i(n(34625)),y=i(n(85169)),E=i(n(83376)),S=i(n(73358)),b=i(n(27744)),T=18e4;function w(e,t){var n=-1,r=e.find((function(e){return n++,t(e)}));return void 0===r?void 0:{index:n,value:r}}var A={OPEN:"OPEN",CLOSED:"CLOSED"};t.STATE=A;var C=function(e){(0,u.default)(n,e);var t=(0,l.default)(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).id=(0,f.session)(),e.url=(0,f.session)(),e.onmessage=(0,f.session)(),e.onactivity=(0,f.session)(),e.timeSkew=(0,f.session)(),e.msgParser=(0,f.session)(),e.state=(0,f.session)(),e.error=(0,f.session)(),e.socket=(0,f.session)(),e.isQueueing=(0,f.session)(!0),e.maxQueueSize=(0,f.session)(),e.messageQueue=(0,f.session)(),e._offlineListener=(0,f.session)(),e._msgListeners=(0,f.session)(),e._pingTimer=(0,f.session)(),e._killTimer=(0,f.session)(),e}return(0,s.default)(n,[{key:"initialize",value:function(){var e=this;this._msgListeners=[],this.messageQueue=[],this.safariSplitter=S.default.isSafari?new g.default(this):null,this._pingTimer=new c.ShiftTimer((function(){return e._ping()})),this._killTimer=new c.ShiftTimer((function(){return e._killSocket()})),_.default.on(_.JS_HALT_EVENT,this._onJsHalt,this)}},{key:"_onJsHalt",value:function(e){e>T&&(__LOG__(2)`js halt longer than ${T} ms detected, killing socket`,this._killTimer.cancel(),this._killTimer.onOrBefore(0))}},{key:"_ping",value:function(){this.send("?,,"),this._killTimer.onOrAfter(k())}},{key:"_killSocket",value:function(){__LOG__(3)`WatchedSocket ${this.id} Timeout!`,this.close(!0,"stale")}},{key:"detachCallbacks",value:function(){this.set({onactivity:void 0,onmessage:void 0})}},{key:"send",value:function(e){this.cast(e),this._pingTimer.cancel(),this._killTimer.onOrAfter(k())}},{key:"cast",value:function(e){if(this.state!==A.OPEN)throw new h.SocketNotOpen(this.state);if("string"==typeof e&&/\[object ArrayBuffer\]/.test(e))throw new TypeError("converted ArrayBuffer to string prematurely");if(this.safariSplitter)this.safariSplitter.send(e);else try{this.socket.send(e)}catch(e){__LOG__(3)`exception sending: ${e}\n${e.stack}`,p.upload({reason:"send-exception"}),this.close(!0,e)}}},{key:"partingSend",value:function(e,t,n){var a=this,i=this.socket;return new r((function(r){function o(){r(void 0)}i.onclose=o,i.onerror=o,i.onmessage=function(e){var t=e.data;n&&!n(t)||r(t)},a.send(t),a._onCloseOrError(!1,e)})).timeout(2e4,"paringSendTimeout").catch((function(){})).finally((function(){i.onclose=void 0,i.onerror=void 0,i.onmessage=void 0,i.readyState===WebSocket.OPEN&&i.close()}))}},{key:"close",value:function(e,t){var n,r=this.socket;if(this._onCloseOrError(e,t||"unspecified"),r&&((n=r.readyState)===WebSocket.CONNECTING||n===WebSocket.OPEN))try{r.close()}catch(e){__LOG__(3)`WatchedSocket:exception closing: ${e}\n${e.stack}`}}},{key:"_onMessage",value:function(e){this._pingTimer.onOrAfter(I()),this._killTimer.cancel();var t=e.data;if("string"==typeof t&&"!"===t.charAt(0)){var n=parseInt(t.slice(1),10);return n==n&&(this.timeSkew=Date.now()-n),void(this.onactivity&&this.onactivity())}var r=this.msgParser(e);this.onactivity&&this.onactivity(r),this._onParsedMsg(r)}},{key:"_onParsedMsg",value:function(e){var t=w(this._msgListeners,(function(t){return!t.filter||t.filter(e)}));t?(this._msgListeners.splice(t.index,1),t.value.removed=!0,t.value.promise.force(e)):this.isQueueing?(__LOG__(3)`watchedSocket:enqueued`,this.messageQueue.push(e),void 0!==this.maxQueueSize&&this.messageQueue.length>this.maxQueueSize&&this.close(!0,"Queue Overflow")):this.onmessage?this.onmessage(e):__LOG__(3)`watchedSocket:dropped!`}},{key:"_onCloseOrError",value:function(e,t){if(this.state!==A.CLOSED){this.safariSplitter&&this.safariSplitter.cancel(),this.socket&&(this.socket.onclose=void 0,this.socket.onerror=void 0,this.socket.onmessage=void 0),this._offlineListener&&this._offlineListener.cancel(),__LOG__(3)`Socket ${this.id} closing: ${t.toString()}`,_.default.off(_.JS_HALT_EVENT,this._onJsHalt,this),this._pingTimer.cancel(),this._killTimer.cancel(),this.set({state:A.CLOSED,error:e?t:void 0});var n=this._msgListeners,r=e?new h.SocketError(t):new h.SocketClosed(t);this._msgListeners=[],n.forEach((function(e){e.removed=!0,e.promise.cancel(r)}))}}},{key:"holdMessages",value:function(e){var t=this.isQueueing&&void 0!==e&&this.messageQueue>e;this.set({isQueueing:!0,messageQueue:this.messageQueue||[],maxQueueSize:e}),t&&this.close(!0,"Queue Overflow")}},{key:"releaseMessages",value:function(e){var t=this;if(this.isQueueing){var n=this.messageQueue;this.set({isQueueing:!1,messageQueue:[]}),e?n.length>0&&__LOG__(3)`WatchedSocket:releaseMessages dropping ${n.length} messages.`:n.forEach((function(e){t._onParsedMsg(e)}))}else __LOG__(3)`WatchedSocket:releaseMessages not queued!`}},{key:"nextMessage",value:function(e){var t,n=this;if(this.state!==A.OPEN)return E.default.reject(new h.SocketNotOpen(this.state)).cancellable();if(t=e instanceof y.default?e.test.bind(e):e,this.isQueueing){var r;if(t){var a=w(this.messageQueue,t);a&&(r=a.value,this.messageQueue.splice(a.index,1))}else this.messageQueue.length>0&&(r=this.messageQueue.shift());if(r)return E.default.resolve(r).cancellable()}var i=(new E.default).cancellable().forceable(),o={removed:!1,filter:t,promise:i};return this._msgListeners.push(o),i.catch((function(){o.removed||(n._msgListeners=d.default.without(n._msgListeners,o))})),i}}]),n}(f.default),O=(0,f.defineModel)(C);O.numSocketsAttempted=0;var M=O;function I(){return 2e4*Math.random()+1e4}function k(){return 7e4*Math.random()+2e4}t.default=M},24822:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e){var t;try{t=new m(e)}catch(e){return __LOG__(3)`WatchedSocketMD error constructing: ${e}`,p.default.reject(e)}return new p.default(t,(function(e,t){m.numSocketsAttempted++,this.id=m.numSocketsAttempted,__LOG__(2)`WatchedSocketMD opening socket ${this.id}`;var n=(0,f.openSocket)(this.url);n.binaryType="arraybuffer",n.onopen=e,n.onclose=n.onerror=function(e){t(new c.SocketError(e))},this.socket=n})).cancellable().catch((function(e){if(__LOG__(2)`WatchedSocketMD error on open of ${this.id}: ${e}`,this.socket){var t=this.socket;switch(t.readyState){case WebSocket.CONNECTING:t.onopen=null;case WebSocket.OPEN:t.onerror=null,t.onclose=null,t.close();break;case WebSocket.CLOSING:case WebSocket.CLOSED:t.onerror=null,t.onclose=null}}throw e})).then((function(){__LOG__(2)`WatchedSocketMD opened socket ${this.id}`;var e=this.socket;return e.onmessage=this._onMessage.bind(this),e.onerror=this._onCloseOrError.bind(this,!0),e.onclose=this._onCloseOrError.bind(this,!1),this._offlineListener=(0,h.default)().then(this.close.bind(this,!1,"offline")).catchType(r.CancellationError,(function(){})),this.state=v.OPEN,this}))},t.default=t.STATE=void 0;var o=i(n(34575)),s=i(n(93913)),u=n(17643),l=n(12035),c=a(n(98569)),d=a(n(70496)),f=n(15933),p=i(n(83376)),h=i(n(27744)),_=18e4,v={OPEN:"OPEN",CLOSED:"CLOSED"};t.STATE=v;var m=function(){function e(t){var n=this;(0,o.default)(this,e),this.onError=null,this.dataToSend=new u.Binary,this.url=t,this._killTimer=new l.ShiftTimer((function(){return n._killSocket()})),d.default.on(d.JS_HALT_EVENT,this._onJsHalt,this)}return(0,s.default)(e,[{key:"_onJsHalt",value:function(e){e>_&&(__LOG__(2)`js halt longer than ${_} ms detected, killing socket`,this._killTimer.cancel(),this._killTimer.onOrBefore(0))}},{key:"_killSocket",value:function(){__LOG__(3)`WatchedSocketMD ${this.id} Timeout!`,this.close(!0,"stale")}},{key:"detachCallbacks",value:function(){this.socket.onmessage=g}},{key:"close",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,r=this.socket;if(this._onCloseOrError(t,n||"unspecified"),r&&((e=r.readyState)===WebSocket.CONNECTING||e===WebSocket.OPEN))try{r.close()}catch(e){__LOG__(3)`WatchedSocketMD:exception closing: ${e}\n${e.stack}`}}},{key:"requestSend",value:function(){if(this.state!==v.OPEN)throw new c.SocketNotOpen(this.state);if(this.dataToSend.size())try{this.socket.send(this.dataToSend.readByteArray())}catch(e){__LOG__(3)`exception sending: ${e}\n${e.stack}`,this.close(!0,e)}}},{key:"_onMessage",value:function(e){if(!(e.data instanceof ArrayBuffer))throw new TypeError("expected ArrayBuffer from the socket");this.onData&&(0,this.onData)(new Uint8Array(e.data))}},{key:"_onCloseOrError",value:function(e,t){this.state!==v.CLOSED&&(this.socket&&(this.socket.onclose=g,this.socket.onerror=g,this.socket.onmessage=g),this._offlineListener&&this._offlineListener.cancel(),__LOG__(3)`Socket ${this.id} closing: ${t.toString()}`,d.default.off(d.JS_HALT_EVENT,this._onJsHalt,this),this._killTimer.cancel(),this.state=v.CLOSED,this.error=e?t:void 0,null!=this.onClose&&this.onClose())}}]),e}();function g(){}t.default=m,m.numSocketsAttempted=0},86201:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new r((function(t,n){var r=new o.default;r.onerror=function(e){r.terminate(),n(new s.DecodeWebpResultsError("worker error",e))},r.onmessageerror=function(e){r.terminate(),n(new s.DecodeWebpResultsError("worker message error",e))},r.onmessage=function(e){r.terminate();var n=e.data;t(n)},r.postMessage({webpBuffer:e},[e])}))};var o=i(n(78862)),s=a(n(98569))},82206:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalAnimationDuration=o,t.default=function(e){var t=new Uint8Array(e);if(!f(t))return __LOG__(2)`Sticker file not extended format.`,c;if(!p(t))return(0,a.default)((0,a.default)({},c),{},{emojis:d(t)});var n,r=0,u=44;for(;(0,i.default)(t.slice(u,u+4),l);){var h=u+20,_=t.slice(h,h+3);if(3!==_.length)return c;r+=s(_);var v=u+4,m=t.slice(v,v+4);if(4!==m.length)return c;u+=8+s(m),null==n&&(n=u)}var g=o(r),y=d(t);return{animationDuration:g,firstFrameLength:n,singleLoopDuration:r,emojis:y}},t.getCorrespondingEmojis=d,t.isExtendedFile=f,t.isAnimatedWebp=p,t.MAX_DURATION=t.MAX_LOOPS=void 0;var a=r(n(81109)),i=r(n(87485));t.MAX_LOOPS=3;function o(e){if(0===e)return 0;var t=Math.min(Math.floor(5e3/e),3);return Math.max(t,1)*e}function s(e){return e.reduce((function(e,t,n){return e+(t<<8*n)}),0)}t.MAX_DURATION=5e3;var u=new Uint8Array([86,80,56,88]),l=new Uint8Array([65,78,77,70]),c={animationDuration:0,singleLoopDuration:0,emojis:[]};function d(e){if(null==TextDecoder)return[];var t=String.fromCharCode(0),n=new TextDecoder,r=0;for(r+=12;r<e.byteLength;){var a=n.decode(e.slice(r,r+4)),i=s(e.slice(r+4,r+4+4));if(i%2!=0&&(i+=1),"EXIF"===a||"XMP"===a){for(var o=e.slice(r,e.byteLength),u=n.decode(o),l=void 0,c=void 0,d=u.length;d>0;--d)if(null==c&&"}"===u[d])c=d;else if(null!=c&&u[d]===t){l=d+1;break}if(null==l||null==c)return __LOG__(3)`JSON not found in sticker file`,[];var f=u.substring(l,c+1);try{var p=JSON.parse(f);return Array.isArray(p.emojis)?p.emojis:[]}catch(e){return __LOG__(2)`Failed to parse emojis out of sticker, returning array.`,[]}}r+=8+i}return[]}function f(e){var t=e.slice(12,16);return(0,i.default)(t,u)}function p(e){var t=new Uint8Array(e);return f(t)&&0!=(2&t[20])}},12717:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=r(n(34263)),u=n(88828),l=/(?:^([^.:@]+))(?:\.([0-9]{1,2}))?(?:\:([0-9]{1,2}))?@(s\.whatsapp\.net|c\.us|g\.us|broadcast|call|b\.whatsapp\.net)$/i,c=["name","short","notify"],d=function(){function e(t,n){if((0,i.default)(this,e),!(n&&n.intentionallyUsePrivateConstructor))throw new Error("You should use WidFactory.createWid() instead of the Wid constructor. If you absolutely must use the constructor, pass {intentionallyUsePrivateConstructor: true} as a second parameter.");var r=t.match(l);if(!r)throw new Error(`wid error: invalid wid: ${t}`);var a,o=[],s=r[1],u=r[2],c=r[3],d=r[4].toLowerCase();switch(d){case"s.whatsapp.net":a="c.us";break;default:a=d}if(this.server=a,this.user=s,o.push(this.user),u){if("c.us"!==this.server)throw new Error(`wid error: wrong server for wid with agent present: ${t}`);var f=parseInt(u,10);if(isNaN(f))throw new Error(`wid error: NaN agent: ${u} wid: ${t}`);if(f>255)throw new Error(`wid error: agent>255 : ${f} wid: ${t}`);f&&(o.push("."),o.push(f),this.agent=f)}if(c){if("c.us"!==this.server)throw new Error(`wid error: wrong server for wid with device present: ${t}`);var p=parseInt(c,10);if(isNaN(p))throw new Error(`wid error: NaN device: ${c} wid: ${t}`);if(p>255)throw new Error(`wid error: device>255 : ${p} wid: ${t}`);p&&(o.push(":"),o.push(p),this.device=p)}o.push("@"),o.push(this.server),this._serialized=o.join("")}return(0,o.default)(e,[{key:"getUserPartForLog",value:function(){if(this.isGroup()){var e=this.user.split("-");if(2===e.length){var t=(0,a.default)(e,2),n=t[0],r=t[1];return`${n.slice(-4)}-${r}`}}return this.user.slice(-4)}},{key:"toString",value:function(e){if(e){var t,n,r=e.legacy&&"c.us"===this.server?"s.whatsapp.net":this.server;e.formatFull?(t=`.${this.agent||0}`,n=`:${this.device||0}`):(t=null!=this.agent&&0!==this.agent?`.${this.agent}`:"",n=null!=this.device&&0!==this.device?`:${this.device}`:"");var a=e.forLog?this.getUserPartForLog():this.user;if(e.formatFull||e.legacy&&"c.us"===this.server||e.forLog)return[a,t,n,"@",r].join("")}return this._serialized}},{key:"toLogString",value:function(){return this.toString({forLog:!0,legacy:!1})}},{key:"toJid",value:function(){return this.toString({legacy:!0})}},{key:"getSignalAddress",value:function(){var e=null!=this.agent&&0!==this.agent?`_${this.agent}`:"",t=null!=this.device&&0!==this.device?`:${this.device}`:"";return[this.user,e,t].join("")}},{key:"getDeviceId",value:function(){var e=this.device;return null==e?0:e}},{key:"equals",value:function(t){return t instanceof e&&this.toString()===t.toString()}},{key:"isLessThan",value:function(t){return t instanceof e&&this.toString()<t.toString()}},{key:"isGreaterThan",value:function(t){return t instanceof e&&this.toString()>t.toString()}},{key:"isCompanion",value:function(){return null!=this.device&&this.device!==s.default.DEVICE.PRIMARY_DEVICE}},{key:"isUser",value:function(){return"c.us"===this.server}},{key:"isBroadcast",value:function(){return"broadcast"===this.server}},{key:"isOfficialBizAccount",value:function(){return this.toString()===s.default.OFFICIAL_BIZ_WID}},{key:"isGroup",value:function(){return"g.us"===this.server}},{key:"isGroupCall",value:function(){return"call"===this.server}},{key:"isServer",value:function(){return"server"===this.user&&"c.us"===this.server}},{key:"isPSA",value:function(){return"0"===this.user&&"c.us"===this.server}},{key:"isStatusV3",value:function(){return"status"===this.user&&"broadcast"===this.server}},{key:"toJSON",value:function(){return this.toString()}}],[{key:"isXWid",value:function(t,n){return(0,u.isString)(n)?n.split("@")[1]===t:n instanceof e?n.server===t:(void 0!==n&&__LOG__(2)`wid:isXWid called on nonstring: + ${String(n)}`,!1)}},{key:"isUser",value:function(t){return e.isXWid("c.us",t)}},{key:"isBroadcast",value:function(t){return e.isXWid("broadcast",t)}},{key:"isGroup",value:function(t){return e.isXWid("g.us",t)}},{key:"isGroupCall",value:function(t){return e.isXWid("call",t)}},{key:"isWid",value:function(t){return(0,u.isString)(t)?l.test(t):t instanceof e}},{key:"canBeWid",value:function(e){return!e||!c.includes(e)}},{key:"isServer",value:function(t){return(0,u.isString)(t)?t.toLowerCase()===s.default.SERVER_WID:t instanceof e&&t.isServer()}},{key:"isPSA",value:function(t){return(0,u.isString)(t)?t.toLowerCase()===s.default.PSA_WID:t instanceof e&&t.isPSA()}},{key:"isStatusV3",value:function(t){return(0,u.isString)(t)?t.toLowerCase()===s.default.STATUS_WID:t instanceof e&&t.isStatusV3()}},{key:"isOfficialBizAccount",value:function(t){return(0,u.isString)(t)?t.toLowerCase()===s.default.OFFICIAL_BIZ_WID:t instanceof e&&t.isOfficialBizAccount()}},{key:"user",value:function(t){return(0,u.isString)(t)?t.split("@")[0]:t instanceof e?t.user:void 0}},{key:"equals",value:function(t,n){return t instanceof e||n instanceof e?t instanceof e&&t.equals(n):t===n}},{key:"isLessThan",value:function(t,n){return t instanceof e&&n instanceof e&&t.toString()<n.toString()}},{key:"isGreaterThan",value:function(t,n){return t instanceof e&&n instanceof e&&t.toString()>n.toString()}}]),e}();t.default=d},78422:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e){var t;if(e instanceof u.default?t=e.user:(0,s.isString)(e)&&(t=e.split("@")[0]),t){var n=t;return o.default.isRTL()?o.default.isolateLTR(l(n)):l(n)}}return""};var a=n(31988),i=r(n(96486)),o=r(n(89115)),s=n(88828),u=r(n(12717)),l=i.default.memoize((function(e){return"Server"===e?e:(0,a.formatPhone)(e)}))},75793:(e,t,n)=>{"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createWid=s,t.createWidFromWidLike=function(e){return s("string"==typeof e?e:e._serialized)},t.isWidlike=function(e){return!!e&&(!!i.default.isWid(e)||!(!e||"object"!=typeof e||!i.default.isWid(e._serialized)))},t.createDeviceWidFromUserAndDevice=function(e,t){return u(`${e}:${t}@c.us`)},t.createDeviceWid=u,t.createUserWid=l,t.toUserWid=c,t.toChatWid=function(e){if(e.isUser())return c(e);return e},t.userJidToUserWid=function(e){return c(s(e))};var a=n(88828),i=r(n(12717)),o=r(n(95461));function s(e){var t;return o.default&&o.default.cache?(t=o.default.cache[e])||(t=new i.default(e,{intentionallyUsePrivateConstructor:!0}),o.default.cache[e]=t):t=new i.default(e,{intentionallyUsePrivateConstructor:!0}),t}function u(e){return s(e)}function l(e,t){var n;if(!(null!=(n=s(n=(0,a.isString)(e)&&(e.endsWith("@c.us")||e.endsWith("@s.whatsapp.net"))?e:`${e}@${t||"c.us"}`)).device&&0!==n.device||null!=n.agent&&0!==n.agent))return n;throw new Error("createUserWid is called with invalid user string")}function c(e){if(!e.isUser())throw new Error("asUserWid: wid is not a user wid");return null!=e.device&&0!==e.device||null!=e.agent&&0!==e.agent?l(e.user):e}},89428:(e,t,n)=>{"use strict";var r=n(60077).default,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(69267)),o={GET:"GET",POST:"POST",HEAD:"HEAD",PUT:"PUT"};function s(e,t){for(var n in t)e.setRequestHeader(n,t[n])}function u(e,t,n,a,u,l){var c=new XMLHttpRequest,d=new r((function(r,d){if(c.onload=function(e){4===c.readyState?r(c):d(e)},c.onerror=d,c.ontimeout=d,u&&(c.onprogress=u),c.onabort=d,n instanceof FormData)c.open(t||o.POST,e,!0),a&&(c.responseType=a),l&&s(c,l),c.send(n);else if(n instanceof Object){var f=i.default.build(e,n);c.open(t||o.GET,f,!0),a&&(c.responseType=a),l&&s(c,l),c.send()}else c.open(t||o.GET,e,!0),a&&(c.responseType=a),l&&s(c,l),c.send()})).cancellable();return d.catchType(r.CancellationError,(function(){c.abort()})).catch((function(){})),d}var l={head:function(e){return u(e,o.HEAD)},get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return u(e,o.GET,null,t,void 0,n)},post:function(e,t){return u(e,o.POST,t)},request:u,VERB:o,RESP_TYPE:{ARRAY_BUFFER:"arraybuffer",BLOB:"blob",JSON:"json"}};t.default=l},29347:(e,t,n)=>{e.exports=n.p+"img/bg-chat-tile-dark_a4be512e7195b6b733d9110b408f075d.png"},33557:(e,t,n)=>{e.exports=n.p+"img/bg-chat-tile-light_04fcacde539c58cca6745483d4858c52.png"},91672:(e,t,n)=>{e.exports=n.p+"img/icon-group-default_92b8a80d57227e2f342bd57ccf6382d8.png"},10795:(e,t,n)=>{e.exports=n.p+"img/icon-user-default_bfb4ec026499f5b2d80e673a1a3a5bd7.png"},35729:(e,t,n)=>{e.exports=n.p+"img/intro-connection-dark_0ee01153183b5ebd9b296399cc2104b0.jpg"},74548:(e,t,n)=>{e.exports=n.p+"img/intro-connection-hq-dark_f8cb12a6fc73afaf9d5903b7849bebd6.jpg"},12891:(e,t,n)=>{e.exports=n.p+"img/intro-connection-hq-light_9466a20e6d2921a21ac7ab82419be157.jpg"},5250:(e,t,n)=>{e.exports=n.p+"img/intro-connection-light_c98cc75f2aa905314d74375a975d2cf2.jpg"},37211:(e,t,n)=>{e.exports=n.p+"notification_2a485d84012c106acef03b527bb54635.mp3"},92474:(e,t,n)=>{e.exports=n.p+"send_message_98602e277c84944aafc41098fa4dd8d8.m4a"},91720:(e,t,n)=>{e.exports=n.p+"sequential-ptt-end_62ed28be622237546fd39f9468a76a49.mp3"},39181:(e,t,n)=>{e.exports=n.p+"sequential-ptt-middle_7fa161964e93db72b8d00ae22189d75f.mp3"},54630:(e,t,n)=>{e.exports=n.p+"whatsapp_desktop_hangup_ffb098e6aa70a54e901455767e1cf006.m4a"},41371:(e,t,n)=>{e.exports=n.p+"whatsapp_desktop_ringtone_f846cad273bcec585ccc5e6c410ee00e.m4a"},44053:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"pdf.worker.96d1bc1f3d0105cd5a81bae7a9dad228.js"},62605:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={wrapper:"_1ADa8",isQR:"nMnIl",isQr:"nMnIl",draggableHeader:"_2jOS3",isMain:"_3Nsgw"}},85954:(e,t,n)=>{"use strict";n.r(t)},44889:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={button:"_20C5O",plainWhite:"GObVX",primary:"_2Zdgs",secondary:"_1zOyO",strongPrimary:"pNwLD",warning:"_1XvHd",itemFocused:"_2yKMT",disabled:"_3fyVm",nowrap:"_1gUOr",simplified:"_1RguK",spinner:"_1SPEF",strong:"SEZ8N"}},37892:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={link:"_3i9kF"}},97922:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={noop:"tm2tP"}},8581:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={noop:"i0jNr"}},23257:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={"-emoji-picker-width":"388px",emojiPickerWidth:"388px",container:"o--vV",right:"wGJyi",picker:"_3nQGi",tooltip:"_3t1CR",items:"_1HnQz",nib:"_2hkxa",inverse:"QLmve",colorPicker:"fe-ue",emoji:"_3IU7z",sticker:"_1166F",inverseVertical:"_24No0",text:"_3h2j_",icons:"_1lPfJ"}},19328:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={item:"_2qR8G",text:"_18oo2",hover:"_19zgN",action:"dJxPU",compact:"_3gcnK",icon:"_26nDl",emoji:"_17jhh",emojiGrid:"_34jUG",ellipsify:"_2oldI",disabled:"_3BFHH",shortcut:"_1wMaz"}},94870:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={ellipsify:"_ccCW",inlineblock:"FqYAR",dirMismatch:"J9IUQ",clickable:"_3xSVM",multiline:"_1SjQX",breakWord:"_2Qc5p"}},77793:(e,t,n)=>{"use strict";n.r(t)},70202:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={flex:"_1yM10",directionHorizontal:"_31Diy",directionVertical:"_1XusQ",directionHorizontalReverse:"_31igC",directionVerticalReverse:"_32sqp",justifyStart:"_3Q2F2",justifyCenter:"hcIB8",justifyEnd:"VEaQr",justifyAll:"_2oHjh",justifyAround:"jTyqI",justifyEvenly:"_1aP71",alignCenter:"_1YoQb",alignStart:"_3juR8",alignEnd:"_3LUfH",alignStretch:"_1D2NK",alignBaseline:"_5HVO7",wrap:"_3YplS",wrapReverse:"_37ch3"}},37112:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={flexItem:"_2vB9T",alignAuto:"_2QSxG",alignStart:"pd8Z1",alignCenter:"_3qUAm",alignEnd:"_3QZOC",alignStretch:"_33Rky"}},28662:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={viewport:"_3uIPm",verticalListViewport:"WYyr1",horizontalListViewport:"_1iA0_"}},60322:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={item:"_3m_Xw"}},80648:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={progress:"_35Zb2"}},66937:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={qrWrapper:"_1N3oL",text:"_2WuPw",qr:"_25pwu",headline:"_3-XoE",list:"_2A31C",listItem:"QtrYx",hint:"_3aF8K",toggle:"_2lolS",tip:"_2jR6Q",rememberMeTip:"w2rV5",codeCopy:"_3YgA3",qrcode:"_2UwZ_",codeLogo:"b77wc",idle:"n4LVt",qrButton:"_2znac",qrButtonIcon:"_1pFa_",groupInviteTip:"_3Egqg",icon:"_30yMe"}},96153:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={container:"_3Bc7H"}},98850:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={sensor:"_1lRek"}},37349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={gridContainer:"_2aoOW",baseEmoji:"yz0X-",options:"watw2"}},30240:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={"-emoji-width":"44px",emojiWidth:"44px","-emoji-height":"44px",emojiHeight:"44px","-side-margin":"12px",sideMargin:"12px",panel:"_2Wd6U",section:"_27GWS"}},98483:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={bodyContainer:"_2bgh7",list:"_3Cc11",search:"_1Kk5B",hidden:"VaOo_"}},80325:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={"-total-search-height":"62px",totalSearchHeight:"62px","-scrollbar-width":"6px",scrollbarWidth:"6px","-windows-scrollbar-width":"8px",windowsScrollbarWidth:"8px","-section-bottom-margin":"12px",sectionBottomMargin:"12px","-title-height":"27px",titleHeight:"27px",container:"_1rtUb",title:"xfDtH"}},78666:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={"-emoji-width":"44px",emojiWidth:"44px",panel:"_2ikL3"}},51460:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={emojiPanel:"_1DP8V",panelBody:"_2Gmvm",panelDropdown:"_30SX6"}},64827:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={container:"_16kef"}},30462:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={tab:"_1zlQ1",highlightOnFocus:"JRJYO",menu:"_-2oTK",carousel:"_3hl6E",carouselEnd:"_3GM_s",selected:"_1v2yz"}},71414:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={menuTabsMarker:"NCirl",animate:"_1PHGw",animateWithTransform:"_2TG0r",hide:"_3gVEQ"}},97802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={cancelIcon:"_3pgom",inputContainer:"M1or0",inputEmojiSearch:"_3K9QW",searchRow:"_10mnt",ffFix:"_3KMMv",rowShadow:"_3wgrR",rowInput:"_2VSMU"}},56051:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={input:"_1UWac",placeholder:"_2vbn4",mediaEditorTextInputPlaceholder:"_2it_2",body:"_13NKt",default:"Z2O8p",compose:"_1LbR4",large:"czcZD",status:"_23wR2",media:"oHEu9",invite:"y2xeH",mediaEditorTextInput:"_3pH28",small:"_9SNTl","list-search":"_3hKpJ",listSearch:"_3hKpJ",textInput:"_1aweH"}},75886:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={emojiSearch:"yY6AE",searchBody:"dVelf",positioningContainer:"_57r8B",overlayContainer:"_3gMHK",resultsContainer:"ECdkZ",mediaCaption:"_1TBzR",emojiInput:"_30wt2"}},12095:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={container:"_1Y6d8"}},26490:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={container:"_3bvta"}},60033:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={container:"_2q3FD"}},89195:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={container:"_3dpR7","rotate-ltr":"_1Qdsx",rotateLtr:"_1Qdsx",path:"VUaem",dash:"_2pKjq",default:"_2K8pI",white:"_37dfX",solidwhite:"x7Tgp",highlight:"_2CMI1",accent:"_2QvhS",in:"dR74z",out:"_1vWFX",noop:"_3yR5t","rotate-rtl":"_3Upvr",rotateRtl:"_3Upvr"}},55535:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={reverse:"_1PyOa",inline:"_287pX",white:"_2djVz",black:"_3dS2j"}},58425:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={"weight-light":"_7qtH8",weightLight:"_7qtH8","weight-normal":"_1lF7t",weightNormal:"_1lF7t","weight-medium":"_3EVTz",weightMedium:"_3EVTz","weight-semibold":"_3VDu5",weightSemibold:"_3VDu5","weight-bold":"_2I4o9",weightBold:"_2I4o9","size-8":"_2Le-W",size8:"_2Le-W","size-9":"_2lMoY",size9:"_2lMoY","size-10":"_3QN-O",size10:"_3QN-O","size-11":"_1uSon",size11:"_1uSon","size-12":"_1MfDb",size12:"_1MfDb","size-13":"_2xTZM",size13:"_2xTZM","size-14":"VWPRY",size14:"VWPRY","size-15":"_3SFxP",size15:"_3SFxP","size-16":"_1FXE6",size16:"_1FXE6","size-17":"_2LoZ-",size17:"_2LoZ-","size-18":"ioBp1",size18:"ioBp1","size-19":"oUgLo",size19:"oUgLo","size-20":"_1ioN3",size20:"_1ioN3","size-22":"Urfuj",size22:"Urfuj","size-24":"_3rp2W",size24:"_3rp2W","size-26":"_1651n",size26:"_1651n","size-28":"_1o3ni",size28:"_1o3ni","size-30":"_3jq2u",size30:"_3jq2u","size-32":"_1Zkh5",size32:"_1Zkh5","size-36":"_2gaDs",size36:"_2gaDs","size-48":"i_P7s",size48:"i_P7s","size-60":"_116zp",size60:"_116zp",title:"_3NUK1",large:"_3WYXy","section-title":"_2MNpf",sectionTitle:"_2MNpf","section-title-larger":"_24CNZ",sectionTitleLarger:"_24CNZ",small:"TWzFz",muted:"_3Bg5b","muted-small":"_2gdKz",mutedSmall:"_2gdKz",plain:"_26jM1","popup-title":"wMe6l",popupTitle:"wMe6l","color-accent":"_35orJ",colorAccent:"_35orJ","color-danger":"_2Hpjf",colorDanger:"_2Hpjf","color-dark":"PoW1D",colorDark:"PoW1D","color-secondary":"AjtLy",colorSecondary:"AjtLy","color-muted":"_2P9Q7",colorMuted:"_2P9Q7","color-success":"_3Vwf8",colorSuccess:"_3Vwf8"}},65690:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={textInput:"_10Mbz",labelText:"_2Pq6r",hideFloatingLabel:"_1RVBL",float:"_3zbxJ",spacer:"X2s7w",noPlaceholder:"q_gDO",wrapper:"_3mpG7",locked:"_1M8UY",errorText:"_1SeZ5",textError:"_1PQrR",textActive:"_23KyQ",iconMainContainer:"hS9Jh",iconsEditContainer:"_27Wz_",invite:"_1misX",emojiBtn:"_2M8MP",charCounter:"_17PfY",iconMain:"_8o4MO",iconSpinner:"_2NNpn",noErrorInfo:"_1JgEV",infoStrip:"_37xeC",inputLarge:"_1pGaf",active:"_2fOd_",emptyValPlaceholder:"_12vlY",more:"_2mPox",emojiText:"_3-H1x",groupInfoName:"_2KoKm",small:"_3skxK",desaturated:"bIGyp"}},30849:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={toast:"_1Ftww",right:"_1Rm3C",close:"SoAUF",button:"_3ya1x",btnSuccess:"cCs-A"}},33802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={wrapper:"_21opK",slide0:"_2E1IN",slide1:"JCSaG",slide2:"_2LGpz",slide3:"_3enVh"}},90657:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={button:"UQz9-",focused:"_3-OrX"}},57312:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={highRes:"_2UdhN",wrapper:"_3R6rC",large:"_3zyju",lowRes:"_2LodA",medium:"_3Ci02",xlarge:"_1xeoG",animation:"KPHJD",invisible:"_1gSQr",heartbeat:"_1jJBG"}},8762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={pending:"_3zTDv"}},83322:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={mask:"_25anU"}},24326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={container:"_1INL_",web:"_1UG2S",containerFixed:"_1iyey",graphic:"_26aja",logo:"_35GDA",dots:"_2pp-n",laptop:"_1JPfm",shimmering:"_1dEQH","shimmer-ltr":"_1l95B",shimmerLtr:"_1l95B","shimmer-rtl":"NUHBh",shimmerRtl:"NUHBh",initialLoad:"_2FX6G",logout:"_3iu7m",organizing:"A_WMk",progress:"_30oB1",main:"_2dfCc",secondary:"_2e4Ei",warning:"QgIWN",showWarning:"_3dIM5",dot:"behLh"}},79436:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={background:"_2c_rw",mainWrapper:"_5XBCY",logoutTitle:"_329-Z"}},17152:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={backdrop:"_2B4d4",popupContainer:"_3ev9-",popup:"_3J6wB",popupBody:"nne8e",popupTitle:"_1bpDE",backdropCover:"_1QH2G",popupContents:"_2Nr6U",popupBox:"_2DOJ8",popupFlex:"_2EOHJ",popupAuto:"_1PdSy",popupControls:"_2i3w0",popupFlexInvite:"_3cUTm",popupTower:"_2ctZG",popupGuide:"_1hMip",popupColumnButtons:"_1Nf9C"}},7984:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={screenshots:"_2N-Sr",action:"_2Z00h",disabled:"_1dCWS",screenshotPreview:"_1aNKD",screenshotsImg:"_1vJ4T",btnDelete:"_1J6XW"}},39326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={action:"_1WVC6",textTip:"_14jEY",divider:"_1Uvap"}},57525:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={textTip:"_2Z6v5",divider:"_2Xgjp"}},43047:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={suspiciousHostname:"_1xz_9",suspiciousCharacter:"_2x-Eg",explanation:"_3eYuR",url:"_6nRAy"}},89687:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={focusAnimation:"_3N4HJ",focusAnimationKeyframes:"_36G6o"}},52812:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={ul:"LP6da",inline:"_1VtNw"}},75759:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={inline:"_2ZEMa"}},65227:(e,t,n)=>{"use strict";function r(){return new Worker(n.p+"milan.worker.js")}n.r(t),n.d(t,{default:()=>r})},29009:(e,t,n)=>{"use strict";function r(){return new Worker(n.p+"index.worker.js")}n.r(t),n.d(t,{default:()=>r})},59941:(e,t,n)=>{"use strict";function r(){return new Worker(n.p+"opus.worker.js")}n.r(t),n.d(t,{default:()=>r})},78862:(e,t,n)=>{"use strict";function r(){return new Worker(n.p+"webp_to_rgba.worker.worker.js")}n.r(t),n.d(t,{default:()=>r})}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var a=2&t&&e;"object"==typeof a&&!~leafPrototypes.indexOf(a);a=getProto(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>(({155:"locales/kn",165:"locales/cs",248:"locales/tr",275:"lazy_loaded_low_priority_components",319:"moment_locales/nl",673:"locales/es",792:"locales/et",820:"locales/ko",906:"locales/uk",907:"locales/fil",1055:"moment_locales/el",1069:"moment_locales/sv",1081:"locales/zh-HK",1204:"locales/el",1248:"locales/mr",1381:"moment_locales/hr",1473:"moment_locales/ar",1520:"moment_locales/ms-MY",1529:"locales/lt",1628:"locales/da",1770:"locales/sk",1791:"moment_locales/es",2017:"moment_locales/sw",2023:"moment_locales/cs",2091:"locales/pt-BR",2135:"locales/th",2394:"moment_locales/es-DO",2445:"moment_locales/fr",2556:"locales/hu",2739:"locales/ta",2830:"locales/it",2944:"locales/sv",2957:"moment_locales/ru",2966:"moment_locales/ar-MA",2979:"moment_locales/en-IE",3017:"moment_locales/uz",3047:"moment_locales/zh-CN",3113:"moment_locales/ml",3370:"moment_locales/te",3422:"moment_locales/mr",3501:"moment_locales/sl",3569:"moment_locales/ro",3722:"locales/hi",3748:"moment_locales/af",3892:"moment_locales/en-NZ",3934:"moment_locales/ar-XB",3998:"locales/sw",4259:"locales/sl",4339:"moment_locales/hu",4361:"locales/ur",4473:"moment_locales/et",4616:"moment_locales/en-CA",4708:"locales/lv",4818:"moment_locales/ko",4873:"locales/uz",4980:"moment_locales/pl",5027:"moment_locales/he",5125:"moment_locales/zh-TW",5128:"locales/id",5170:"moment_locales/sr",5182:"locales/ja",5247:"moment_locales/it",5443:"locales/ms",5512:"svg",5632:"locales/ca",5650:"locales/te",5671:"moment_locales/ar-LY",5708:"locales/hr",5729:"locales/he",5740:"moment_locales/az",5790:"moment_locales/sr-CYRL",5862:"moment_locales/de",5959:"moment_locales/nb",6038:"locales/gu",6163:"moment_locales/ur",6282:"moment_locales/ar-KW",6293:"locales/fr",6331:"locales/sr",6365:"locales/af",6483:"locales/zh-CN",6496:"moment_locales/sq",6511:"moment_locales/id",6547:"moment_locales/pt-BR",6568:"moment_locales/kn",6651:"locales/mk",6655:"locales/ml",6709:"moment_locales/hi",6884:"moment_locales/ar-DZ",6920:"moment_locales/lt",6933:"locales/en",6953:"locales/pt",7072:"locales/az",7074:"moment_locales/kk",7102:"locales/bg",7162:"locales/ro",7205:"lazy_loaded_high_priority_components",7216:"locales/de",7315:"moment_locales/da",7386:"moment_locales/fi",7542:"locales/zh-TW",7662:"moment_locales/fa",7728:"moment_locales/bn",7739:"moment_locales/ms",7749:"locales/nb",7964:"bootstrap_main",8054:"locales/ar",8117:"moment_locales/uz-LATN",8132:"moment_locales/pa-IN",8192:"pdf",8292:"locales/ru",8598:"locales/vi",8628:"locales/pl",8634:"moment_locales/ta",8678:"moment_locales/en-AU",8700:"locales/bn",8799:"moment_locales/fr-CH",9116:"moment_locales/pt",9191:"unorm",9223:"licenses",9227:"moment_locales/en-GB",9289:"moment_locales/ar-TN",9313:"moment_locales/tr",9545:"moment_locales/mk",9613:"locales/fi",9646:"moment_locales/ar-SA",9682:"moment_locales/uk",9719:"locales/kk",9737:"locales/sq",9750:"locales/nl",9765:"moment_locales/fr-CA",9815:"locales/pa",9817:"moment_locales/ca",9995:"locales/ar-XB",9999:"locales/fa"}[e]||e)+"."+{155:"f2f325da1715a16c32c7",165:"32d35440916ea3d0919e",248:"897970a088a47a32844e",275:"00143cce7ea6db8e21c6",319:"a36cbe591ef1ba952163",673:"d1f08b57ad959a459b6c",792:"f0ef24ed0b2c999c9dfb",820:"2c3c26f69086f1e7cd74",906:"b6f4a32f9ea841beeb3d",907:"55e972c298c6e46e74ae",1055:"65e7829e97d21512ff07",1069:"f38f84794036df4a7b4b",1081:"93ec3eb1e1190c14380b",1204:"30e2ad4dea96359b0464",1248:"9696688398c753a6128c",1381:"285646ee91abbbbd9eaf",1473:"80820d3b397e17237cdd",1520:"ae90b5dc247fb19a9be1",1529:"9cc0eeb9b1fc407ee1df",1628:"f0d61857a8402cbcbd7a",1715:"a63b9a2b110f62d16d00",1767:"db072ec6ece6a6a55c2e",1770:"7d382071b8e487a59081",1791:"9c130365edb3e32d66d5",2017:"fe4e9c6d518ab71e2e7d",2023:"e93e18a7eb764d23229d",2091:"4212212a5fd58b280419",2135:"6f51ee15c6b74f12e693",2394:"6520f21b09034a6abdbb",2445:"92d0529d20b94f121cda",2556:"db1216fee272792f9d5f",2739:"e6b6cca2b444173697c9",2830:"124a236b265e1f4400ea",2944:"cda3bb9b8e4bfcf8e1b2",2957:"1d9bbc29aeb8187ab87f",2966:"f391fb7f392d12240edb",2979:"e4b1a85e06c813953b81",3017:"c1ac3fb16010be0587dc",3047:"688c649454b88a5b86a2",3113:"afda75eb9fe15c4bf821",3370:"d095bdffba31534e71fe",3422:"e1a04a2487fafa314b7f",3501:"944834088019f1bb194d",3535:"9d2eb814cbcde8b6e165",3569:"9f977efaa0c67b426fac",3722:"04d870cc1402962f1a2a",3748:"d791cd6229adc3da8a96",3892:"2d440e935c2e56c7bbab",3913:"d1d388126eaa81d9e063",3934:"a0f8dd5ce7d66b1fd971",3998:"11f63ea1247d918231b8",4259:"db86641dc0fb2681a770",4339:"2117031ee55ad2f068ec",4361:"885336c3698ee7e428cc",4473:"c61c502ef72067a1f458",4616:"103ab136d047a7fe2e3f",4708:"40a871988e4ce1d9a731",4818:"5a314191db5cdf5c4dfa",4873:"830213af721c4f5802ba",4980:"6ec08c93c3c5c6e8ac13",5027:"408e620f03295d44bc77",5125:"ba5ecc3b9ab0d8f77765",5128:"7965285c77d01bada23d",5170:"5811a5539cb97eea0933",5182:"41e3e3c2f97280eea0dc",5247:"e3f8b8b5b14c8c0db316",5443:"5d250d5b2ad795578d0b",5512:"c1eb4c141d152ade5f84",5632:"be66876f84eb7dea9d20",5650:"068e329bc296a61aa498",5671:"694e8ea9b0d48e7b8f98",5708:"ee5bcec1672dac79112b",5729:"48748f28a69e27373ae7",5740:"e35e187f15209710c8c8",5790:"1f90afc171d429af1590",5862:"321e346fd194247abbc4",5959:"1a29efbcdcd23e3aea66",6038:"985716bb84cdab5c3c1b",6163:"bdbe68a20b191decb1ea",6282:"41cb08644e3897068da2",6293:"8f9bf97c027959bce76d",6331:"dabea4dcdc3f7c06795c",6365:"fd2ab0b789f36e1cd683",6483:"6727915a4719fd5a159e",6496:"dedfe9785a0cce74bbbf",6511:"851a202392397cc99106",6547:"020a0c5a24e6fd93217c",6568:"6e7077f1bad2ebec153f",6651:"e176b9bdd17d09a91b6d",6655:"3bb2f7fbae43568fc6b8",6709:"6746627d06a28b45800c",6884:"6f5224cb9862385785d9",6920:"cf5ed75aea68dbe515cf",6933:"1bc897d375b21a0fad72",6953:"deb542a68a770dd4c9bb",7072:"e08ffbb5eaddc3750b3b",7074:"ca182c3304396980cbc1",7102:"0206adc236e64d7aa9a0",7162:"2f12969f0bba386599cc",7205:"370cfe8d10f545043c6d",7216:"0fdbdd051dce62d96766",7315:"3363e90e92ca431ad638",7386:"32c38df5610f0f6a4c09",7542:"0cbb6555772d02a43473",7662:"3152dae16acae43123e3",7728:"a29ad27e32164967d927",7739:"6addf89db4d037216ff3",7749:"dcaee73ca6cb7c9e47fd",7964:"19116822289381012839",8054:"eea532401cfbf165f117",8117:"9eaa84b88c830b3b4a9d",8132:"4940f3cbfe3abe4d6c5e",8192:"31981f1a9867990edd88",8292:"4ec791d1aae93a3ca942",8598:"cafcdbe83b46aedff56c",8628:"985f0e34a9a627e8464f",8634:"2c69a2817c9a4a185ac7",8678:"ff9311a0aeae5566e4f8",8700:"42db9dde30cf7e9adb0b",8799:"b3e6573f6f46edb9d26a",9116:"7d05a80808f16a7988de",9191:"d8929854b4c512620d57",9223:"48d918a90d0668e0d43b",9227:"0a0c9e428df6d0cd9799",9289:"25822f3945ecd5c7654e",9313:"92e4b1d3faa2e220f1b7",9356:"5c3e37f8b5b38af615fe",9451:"e56ce7be50b52a9f7d58",9545:"5d0f76fa610f2d20ad89",9613:"a4163e4e1384a22b857f",9644:"517ab04a33b0d79ef84b",9646:"0afb6acc961b9fbd9e8a",9682:"cb9e2072a7b6949c1b1e",9719:"91c8a30824219f0369e2",9737:"acf3ddba2b681e449cb8",9750:"3f56e7b773bfc6ae6648",9765:"226eb101f4e7f3d7b557",9815:"37cf18644baa8e70baf8",9817:"7812bc4eba4fc12e9733",9995:"f1f35120ec579e0146af",9999:"8137b0f5e56e33c35d68"}[e]+".js"),__webpack_require__.miniCssF=e=>(({275:"lazy_loaded_low_priority_components",7205:"lazy_loaded_high_priority_components",7964:"bootstrap_main"}[e]||e)+"."+{275:"b99e2e084b8204a6eabe",3535:"1ea7383d8f98db5bdd01",7205:"e9c4fa81edbe6df6bce3",7964:"6e1382b45a15c8362e16"}[e]+".css"),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="whatsapp-web-client:",__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var a,i;if(void 0!==n)for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++){var u=o[s];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==dataWebpackPrefix+n){a=u;break}}a||(i=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",dataWebpackPrefix+n),a.src=e),inProgress[e]=[t];var l=(t,n)=>{a.onerror=a.onload=null,clearTimeout(c);var r=inProgress[e];if(delete inProgress[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},c=setTimeout(l.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=l.bind(null,a.onerror),a.onload=l.bind(null,a.onload),i&&document.head.appendChild(a)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",loadStylesheet=e=>new Promise(((t,n)=>{var r=__webpack_require__.miniCssF(e),a=__webpack_require__.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=(o=n[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var o;if((a=(o=i[r]).getAttribute("data-href"))===e||a===t)return o}})(r,a))return t();((e,t,n,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=i=>{if(a.onerror=a.onload=null,"load"===i.type)n();else{var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=o,u.request=s,a.parentNode.removeChild(a),r(u)}},a.href=t,document.head.appendChild(a)})(e,a,t,n)})),installedCssChunks={1401:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{275:1,3535:1,7205:1,7964:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{var e={1401:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var i=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(i,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[i,o,s]=n,u=0;for(r in o)__webpack_require__.o(o,r)&&(__webpack_require__.m[r]=o[r]);if(s)s(__webpack_require__);for(t&&t(n);u<i.length;u++)a=i[u],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[i[u]]=0},n=self.webpackChunkwhatsapp_web_client=self.webpackChunkwhatsapp_web_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__=__webpack_require__(2443)})();